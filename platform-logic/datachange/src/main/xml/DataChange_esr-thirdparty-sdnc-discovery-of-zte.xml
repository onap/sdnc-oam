<service-logic
  xmlns='http://www.onap.org/sdnc/svclogic'
  xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>
  <method rpc='esr-thirdparty-sdnc-discovery-of-zte' mode='sync'> 
    <block atomic="true">
      <switch test='`$data-change-notification-input.aai-event-trigger`'> 
        <outcome value='Update'> 
          <block> 
            <switch test='`$prop.sdncRestApi.type`'> 
              <outcome value='SOTN'> 
                <block atomic="true">
                  <execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest'> 
                    <parameter name="templateFileName" value="`$prop.restapi.templateDir + '/getztetopotemplate.json'`"/>  
                    <parameter name="restapiUrl" value="`$zte.prop.sdncRestApi.thirdpartySdnc.url + '/restconf/operations/ZTE-API-Topology:get-topology-details'`"/>  
                    <parameter name="restapiUser" value="`$zte.prop.sdncRestApi.thirdpartySdnc.user`"/>  
                    <parameter name="restapiPassword" value="`$zte.prop.sdncRestApi.thirdpartySdnc.password`"/>  
                    <parameter name="format" value="json"/>  
                    <parameter name="httpMethod" value="POST"/>  
                    <parameter name="responsePrefix" value="ztetopology"/>  
                    <parameter name="trustStoreFileName" value="/opt/onap/sdnc/data/stores/truststore.openecomp.zte.client.jks"/>  
                    <parameter name="trustStorePassword" value="adminadmin"/>  
                    <parameter name="keyStoreFileName" value="/opt/onap/sdnc/data/stores/sdnc.zte.p12"/>  
                    <parameter name="keyStorePassword" value="adminadmin"/>  
                    <outcome value='success'> 
                      <block atomic="true"/>
                    </outcome>
                    <outcome value='failure'> 
                      <return status='failure'> 
                        <parameter name='ack-final' value='Y'/>  
                        <parameter name="error-code" value="500"/>  
                        <parameter name="error-message" value="Error executing Create vpn rest api"/> 
                      </return>
                    </outcome>
                  </execute>
                </block>
              </outcome>
              <outcome value='Other'> 
                <return status='failure'> 
                  <parameter name='ack-final' value='Y'/>  
                  <parameter name="error-code" value="500"/>  
                  <parameter name="error-message" value="`'Unsupported type = ' + $prop.sdncRestApi.type`"/> 
                </return>
              </outcome>
            </switch>
          </block>
        </outcome>
        <outcome value='delete'> 
          <block atomic="true"/>
        </outcome>
      </switch>
    </block>
  </method>
</service-logic>