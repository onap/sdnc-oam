[
    {
        "id": "edeab341.54bb4",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 126,
        "y": 105.00650024414062,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "fa7cab2b.24d26"
            ]
        ]
    },
    {
        "id": "fa7cab2b.24d26",
        "type": "service-logic",
        "name": "DataChange ${project.version}",
        "module": "DataChange",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
        "outputs": 1,
        "x": 215.00003051757812,
        "y": 195.89541244506836,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "6ea5e78a.d4f118"
            ]
        ]
    },
    {
        "id": "6ea5e78a.d4f118",
        "type": "method",
        "name": "update-network-to-aai",
        "xml": "<method rpc='update-network-to-aai' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 251.1112518310547,
        "y": 266.2287368774414,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "d9721e0.ea910e"
            ]
        ]
    },
    {
        "id": "d9721e0.ea910e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 476.33343505859375,
        "y": 265.784423828125,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "fe85cd4e.468048",
                "e705d0b4.a9ae58",
                "2ddaf91a.d98b16",
                "ff89ecd9.d9563",
                "e471027b.286e6",
                "159870db.58eb07"
            ]
        ]
    },
    {
        "id": "e705d0b4.a9ae58",
        "type": "save",
        "name": "save network-resource",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='network-resource'  \n     key='network-resource.network-id = $tmp.network-id' >\n<parameter name='network-id' value='`$tmp.network-id`' />\n<parameter name='client-id' value='`$network.client-id`' />\n<parameter name='te-topo-id' value='`$network.te-topology-id`' />\n<parameter name='provider-id' value='`$network.provider-id`' />\n\n<parameter name='network-type' value='`$network.network-types`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 706.333251953125,
        "y": 171.0065155029297,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "cb2cfb3d.12f0a8",
        "type": "save",
        "name": "save pnf",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf' \n      key='pnf.pnf-name = $unique-nodeId' >\n<parameter name='pnf-name' value='`$unique-nodeId`' />\n<parameter name='pnf-id' value='`$node.node-id`' />\n<parameter name='operational-status' value='`$node.te.oper-status`' />\n<parameter name='admin-status' value='`$node.te.te-node-attributes.admin-status`' />\n<parameter name='in-maint' value='true' />\n\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 906.1111450195312,
        "y": 542.1175842285156,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "2ddaf91a.d98b16",
        "type": "for",
        "name": "for each node",
        "xml": "<for index='pidx' start='0' end='`$network.node_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 677.8888549804688,
        "y": 522.3398132324219,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "cb2cfb3d.12f0a8",
                "fc39e59f.e19f7",
                "404895b3.1b9a0c",
                "38f275a2.ec1422",
                "dcf15e98.55cd98",
                "2d8d0a77.affafe",
                "1758985b.dd13f8",
                "7f99493d.24ad2"
            ]
        ]
    },
    {
        "id": "fc39e59f.e19f7",
        "type": "set",
        "name": "set node",
        "xml": "<set>\n<parameter name='node.' value='`$network.node[$pidx].`' />\n<parameter name='unique-networkId' value='`$tmp.network-id`' />\n\n",
        "comments": "",
        "x": 911.111083984375,
        "y": 438.2287139892578,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "38f275a2.ec1422",
        "type": "save",
        "name": "save pnf relationship to network-resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf:relationship-list' \n      key='pnf.pnf-name = $unique-nodeId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"network-resource\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"network-resource.network-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.network-id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1002.7779541015625,
        "y": 717.4509782791138,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "f06afd2d.6a87a8",
        "type": "for",
        "name": "for each termination point",
        "xml": "<for index='tidx' start='0' end='`$node.termination-point_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1310.4444580078125,
        "y": 633.1175537109375,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "641e627.90ce71c",
                "62e3b2b7.0e1854",
                "7c4704e9.f42bfc",
                "cdce39b5.3e2ce8",
                "c12a9ec.a16bae"
            ]
        ]
    },
    {
        "id": "641e627.90ce71c",
        "type": "set",
        "name": "set termination point",
        "xml": "<set>\n<parameter name='tp.' value='`$node.termination-point[$tidx].`' />\n",
        "comments": "",
        "x": 1580.111328125,
        "y": 616.0065307617188,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "7c4704e9.f42bfc",
        "type": "save",
        "name": "save p-interface",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='p-interface' \n      key='pnf.pnf-name = $unique-nodeId\n      AND p-interface.interface-name = $unique-ltpId' >      \n<parameter name='interface-name' value='`$unique-ltpId`' />\n<parameter name='network-ref' value='`$tp.supporting-termination-point[0].network-ref`' />\n<parameter name='transparent' value='`$tp.svc.supported-classification.transparent`' />\n<parameter name='speed-value' value='`$tp.te.interface-switching-capability[0].max-lsp-bandwidth[0].te-bandwidth.eth-bandwidth`' />\n<parameter name='operational-status' value='`$tp.te.oper-status`' />\n<parameter name='in-maint' value=\"true\" />\n\n<parameter name='inter-layer-lock-id' value='`$tp.te.inter-layer-lock-id[0]`' />\n<!--<parameter name='inter-domain-plug-id' value='`$tp.te.inter-domain-plug-id`' />-->\n<parameter name='inter-domain-plug-id' value='`$tmp.decoded-plug-id`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1574.815185546875,
        "y": 803.5620727539062,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "99a9f83c.592fb",
                "2cd1ffbf.d1e38"
            ]
        ]
    },
    {
        "id": "6c4885ee.2512d4",
        "type": "save",
        "name": "save pnf relationship to p-interface in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf:relationship-list' \n      key='pnf.pnf-name = $unique-nodeId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id + '/pnfs/pnf/' + $unique-nodeId '/p-interfaces/p-interface/' + $unique-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-ltpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1395.703857421875,
        "y": 1716.33984375,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "62e3b2b7.0e1854",
        "type": "set",
        "name": "set unique-ltpId",
        "xml": "<set>\n<parameter name='unique-ltpId' value=\"`$unique-nodeId + '-ltpId-' + $tp.te-tp-id`\" />\n",
        "comments": "",
        "x": 1564.000244140625,
        "y": 673.1175537109375,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "fe85cd4e.468048",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$network.network-id`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.original-network-id\"/>\n    <parameter name=\"target\" value=\"/\"/>\n    <parameter name=\"replacement\" value=\"-\"/>\n    ",
        "comments": "",
        "outputs": 1,
        "x": 662.9935302734375,
        "y": 80,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "404895b3.1b9a0c",
        "type": "save",
        "name": "save pnf relation with esr-thirdparty-sdnc",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='esr-thirdparty-sdnc:relationship-list' \n      key='esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.sdncRestApi.thirdpartySdnc.id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"pnf\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-nodeId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"pnf.pnf-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-nodeId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 984,
        "y": 754,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "99a9f83c.592fb",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1746.499885559082,
        "y": 790.7525482177734,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "7275269b.187718"
            ]
        ]
    },
    {
        "id": "2cd1ffbf.d1e38",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1740.1784744262695,
        "y": 842.9668598175049,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "6558158e.20a7e4"
            ]
        ]
    },
    {
        "id": "7275269b.187718",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1897.0000457763672,
        "y": 790.0064792633057,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "6558158e.20a7e4",
        "type": "update",
        "name": "update p-interface",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='p-interface' \n      key='pnf.pnf-name = $unique-nodeId\n      AND p-interface.interface-name = $unique-ltpId' >      \n<parameter name='interface-name' value='`$unique-ltpId`' />\n<parameter name='network-ref' value='`$tp.supporting-termination-point[0].network-ref`' />\n<parameter name='transparent' value='`$tp.svc.supported-classification.transparent`' />\n<parameter name='speed-value' value='`$tp.te.interface-switching-capability[0].max-lsp-bandwidth[0].te-bandwidth.eth-bandwidth`' />\n<parameter name='operational-status' value='`$tp.te.oper-status`' />\n<parameter name='in-maint' value=\"true\" />\n\n<parameter name='inter-layer-lock-id' value='`$tp.te.inter-layer-lock-id[0]`' />\n<!--<parameter name='inter-domain-plug-id' value='`$tp.te.inter-domain-plug-id`' />-->\n<parameter name='inter-domain-plug-id' value='`$tmp.decoded-plug-id`' />",
        "comments": "",
        "outputs": 1,
        "x": 1926,
        "y": 844.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "b62e74a8.72d8f8",
        "type": "save",
        "name": "save tunnel-termination-point",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='tunnel-termination-point' \n      key='tunnel-termination-point.ttp-id = $unique-ttpId' >\n\n<parameter name='ttp-id' value='`$unique-ttpId`' />\n<parameter name='tunnel-tp-id' value='`$ttp.tunnel-tp-id`' />\n<parameter name='name' value='`$ttp.name`' />\n<parameter name='admin-status' value='`$ttp.admin-status`' />\n<parameter name='oper-status' value='`$ttp.oper-status`' />\n<parameter name='inter-layer-lock-id' value='`$ttp.inter-layer-lock-id[0]`' />\n<parameter name='switching-capability' value='`$ttp.switching-capability`' />\n<parameter name='protection-type' value='`$ttp.protection-type`' />\n<parameter name='encoding' value='`$ttp.encoding`' />\n\n\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1640,
        "y": 1095.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "7c8389d1.ee45",
                "bbd909f2.ba2d1"
            ]
        ]
    },
    {
        "id": "b69752f.a47b03",
        "type": "for",
        "name": "for each tunnel termination point",
        "xml": "<for index='ttidx' start='0' end='`$node.te.tunnel-termination-point_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1303,
        "y": 1083.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "25de11e2.0dd0ae",
                "b2448024.6d9268",
                "b62e74a8.72d8f8",
                "4cb5cbe8.ee37a4",
                "3ba1d3d8.7bd96c",
                "ead9d9cc.bab4f8"
            ]
        ]
    },
    {
        "id": "25de11e2.0dd0ae",
        "type": "set",
        "name": "set tunnel termination point",
        "xml": "<set>\n<parameter name='ttp.' value='`$node.te.tunnel-termination-point[$ttidx].`' />\n",
        "comments": "",
        "x": 1638,
        "y": 1003.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "b2448024.6d9268",
        "type": "set",
        "name": "set unique-ttpId",
        "xml": "<set>\n<parameter name='unique-ttpId' value=\"`$unique-nodeId + '-ttpId-' + $ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 1596.888916015625,
        "y": 1041.1175537109375,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "7c8389d1.ee45",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1906,
        "y": 1081.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "49e600b2.247268"
            ]
        ]
    },
    {
        "id": "bbd909f2.ba2d1",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1899.6785888671875,
        "y": 1133.220781326294,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "8a380f1a.fa11e"
            ]
        ]
    },
    {
        "id": "49e600b2.247268",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2056.500160217285,
        "y": 1080.2604007720947,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "8a380f1a.fa11e",
        "type": "update",
        "name": "update tunnel-termination-point",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='tunnel-termination-point' \n      key='tunnel-termination-point.ttp-id = $unique-ttpId' >\n\n<parameter name='ttp-id' value='`$unique-ttpId`' />\n<parameter name='tunnel-tp-id' value='`$ttp.tunnel-tp-id`' />\n<parameter name='name' value='`$ttp.name`' />\n<parameter name='admin-status' value='`$ttp.admin-status`' />\n<parameter name='oper-status' value='`$ttp.oper-status`' />\n<parameter name='inter-layer-lock-id' value='`$ttp.inter-layer-lock-id[0]`' />\n<parameter name='switching-capability' value='`$ttp.switching-capability`' />\n<parameter name='protection-type' value='`$ttp.protection-type`' />\n<parameter name='encoding' value='`$ttp.encoding`' />\n\n\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2137,
        "y": 1135.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "dcf15e98.55cd98",
        "type": "set",
        "name": "set local variables",
        "xml": "<set>\n<parameter name='unique-nodeId' value=\"`'networkId-' + $unique-networkId + '-nodeId-' + $node.node-id`\" />\n",
        "comments": "",
        "x": 936,
        "y": 485.0065002441406,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "ff89ecd9.d9563",
        "type": "call",
        "name": "call update-network-links-to-aai",
        "xml": "<call module='DataChange' rpc='update-network-links-to-aai' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 620,
        "y": 648.0065002441406,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "d7b3037a.697688",
        "type": "save",
        "name": "save pnf-interface relationship to pnf in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='p-interface:relationship-list' \n      key='pnf.pnf-name = $unique-nodeId\n      AND p-interface.interface-name = $unique-ltpId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"pnf\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-nodeId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"pnf.pnf-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-nodeId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1402,
        "y": 1672.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "4cb5cbe8.ee37a4",
        "type": "save",
        "name": "save pnf relationship to tunnel termination point in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf:relationship-list' \n      key='pnf.pnf-name = $unique-nodeId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"tunnel-termination-point\" />\n<!--<parameter name=\"relationship-list.relationship[$ttidx].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id + '/pnfs/pnf/' + $node.node-id '/tunnel-termination-points/tunnel-termination-point/' + $unique-ttpId`\" />-->\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/tunnel-termination-points/tunnel-termination-point/' + $unique-ttpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"tunnel-termination-point.ttp-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-ttpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1711,
        "y": 1187.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "477ea94a.d9b708",
                "1857aab6.41528d"
            ]
        ]
    },
    {
        "id": "2d8d0a77.affafe",
        "type": "switchNode",
        "name": "switch node ttp",
        "xml": "<switch test='`$node.te.tunnel-termination-point_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 875,
        "y": 1059.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "df28f111.dccd78",
                "56382251.f0ed44",
                "836a4c10.0f5058"
            ]
        ]
    },
    {
        "id": "efccb4e8.6c1f7",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1223,
        "y": 1011.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "836a4c10.0f5058",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1070,
        "y": 1094.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "b69752f.a47b03"
            ]
        ]
    },
    {
        "id": "1758985b.dd13f8",
        "type": "switchNode",
        "name": "switch node tp",
        "xml": "<switch test='`$node.termination-point_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 924,
        "y": 609.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "9b64d5a2.85c768",
                "9d78d705.498a28",
                "fec4616c.fd5128"
            ]
        ]
    },
    {
        "id": "9b64d5a2.85c768",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1103,
        "y": 561.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "31b2e806.d617f"
            ]
        ]
    },
    {
        "id": "9d78d705.498a28",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1102,
        "y": 663.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "f06afd2d.6a87a8"
            ]
        ]
    },
    {
        "id": "31b2e806.d617f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1258,
        "y": 561.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "264d4645.5fe58a",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logTopologyDiscovery.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"sucess executing Hesam log file\" />\n    <parameter name=\"field3\" value=\"`$node.te.tunnel-termination-point_length`\" />\n    <parameter name=\"field4\" value=\"`$node.termination-point_length`\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 853,
        "y": 1103.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "df28f111.dccd78",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1063,
        "y": 945.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "efccb4e8.6c1f7"
            ]
        ]
    },
    {
        "id": "56382251.f0ed44",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1068,
        "y": 1020.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "efccb4e8.6c1f7"
            ]
        ]
    },
    {
        "id": "fec4616c.fd5128",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1113,
        "y": 609.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "31b2e806.d617f"
            ]
        ]
    },
    {
        "id": "7f99493d.24ad2",
        "type": "set",
        "name": "unset node",
        "xml": "<set>\n<parameter name='node.' value='' />\n\n",
        "comments": "",
        "x": 908,
        "y": 387.0065002441406,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "cdce39b5.3e2ce8",
        "type": "set",
        "name": "unset termination point",
        "xml": "<set>\n<parameter name='tp.' value='' />\n",
        "comments": "",
        "x": 1592,
        "y": 559.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "3ba1d3d8.7bd96c",
        "type": "set",
        "name": "unset tunnel termination point",
        "xml": "<set>\n<parameter name='ttp.' value='' />\n",
        "comments": "",
        "x": 1638,
        "y": 955.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "477ea94a.d9b708",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2043,
        "y": 1190.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "1857aab6.41528d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2040,
        "y": 1238.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "7abfb291.6dcbac",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logTopologyDiscovery.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"sucess executing Hesam log file\" />\n    <parameter name=\"field3\" value=\"`$node.te.tunnel-termination-point_length`\" />\n    <parameter name=\"field4\" value=\"`$node.termination-point_length`\" />\n    <parameter name=\"field5\" value=\"sucessfully saved ttp\" />\n    <parameter name=\"field6\" value=\"`relationship-list.relationship[$ttidx].related-link`\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2198,
        "y": 1191.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "ec345a2.2004e28",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logTopologyDiscovery.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"sucess executing Hesam log file\" />\n    <parameter name=\"field3\" value=\"`$node.te.tunnel-termination-point_length`\" />\n    <parameter name=\"field4\" value=\"`$node.termination-point_length`\" />\n    <parameter name=\"field5\" value=\"failuire on saving ttp\" />\n    <parameter name=\"field6\" value=\"`relationship-list.relationship[$ttidx].related-link`\" />\n\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2199,
        "y": 1239.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "49dd63ef.87e564",
        "type": "execute",
        "name": "execute Base64 Converter",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='base64DecodingAlgo' >\n    <parameter name=\"encodedValue\" value='`$tp.te.inter-domain-plug-id`'/>\n    <parameter name=\"decodedValue\" value=\"tmp.decoded-plug-id\"/>\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2058,
        "y": 728.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "fafe42.8d2fb9c",
                "2c876749.ba8618"
            ]
        ]
    },
    {
        "id": "c12a9ec.a16bae",
        "type": "switchNode",
        "name": "switch inter-domain-plug-id empty?",
        "xml": "<switch test='`length($tp.te.inter-domain-plug-id) == 0`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1628,
        "y": 729.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "a32fa569.0a3c28",
                "b8de06da.79eb1"
            ]
        ]
    },
    {
        "id": "b8de06da.79eb1",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1855,
        "y": 682.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "578202f3.fbbe74"
            ]
        ]
    },
    {
        "id": "a32fa569.0a3c28",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1856,
        "y": 728.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "49dd63ef.87e564"
            ]
        ]
    },
    {
        "id": "578202f3.fbbe74",
        "type": "set",
        "name": "unset tmp.decoded-plug-id",
        "xml": "<set>\n<parameter name='tmp.decoded-plug-id' value='' />\n",
        "comments": "",
        "x": 2059,
        "y": 682.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "fafe42.8d2fb9c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2263,
        "y": 705.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "cad449b6.73c6d"
            ]
        ]
    },
    {
        "id": "2c876749.ba8618",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2256.6785888671875,
        "y": 757.220781326294,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "92336385.660b18"
            ]
        ]
    },
    {
        "id": "cad449b6.73c6d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2404,
        "y": 705.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "92336385.660b18",
        "type": "set",
        "name": "unset tmp.decoded-plug-id",
        "xml": "<set>\n<parameter name='tmp.decoded-plug-id' value='`$tp.te.inter-domain-plug-id`' />\n",
        "comments": "",
        "x": 2463,
        "y": 757.0064697265625,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "e471027b.286e6",
        "type": "set",
        "name": "set tmp.network-if",
        "xml": "<set>\n<!--<parameter name='tmp.network-id' value=\"`$prop.sdncRestApi.thirdpartySdnc.id + '-' + $tmp.original-network-id`\" />-->\n<parameter name='tmp.network-id' value=\"`$tmp.original-network-id`\" />\n\n",
        "comments": "",
        "x": 688,
        "y": 121.00650024414062,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "159870db.58eb07",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.sdncRestApi.thirdpartySdnc.id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 749,
        "y": 260,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "f22633be.4476e8",
                "4f55d446.34a7f4",
                "beabc6d6.2806f"
            ]
        ]
    },
    {
        "id": "f22633be.4476e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 995,
        "y": 220,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "543559cc.c24e08"
            ]
        ]
    },
    {
        "id": "4f55d446.34a7f4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 999,
        "y": 260,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "50076a10.d4e1b4"
            ]
        ]
    },
    {
        "id": "beabc6d6.2806f",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 991,
        "y": 300,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "a9b8ac2f.1b4d8"
            ]
        ]
    },
    {
        "id": "50076a10.d4e1b4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1149,
        "y": 260,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "a9b8ac2f.1b4d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1149,
        "y": 300,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "543559cc.c24e08",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1139,
        "y": 218,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "627ad99d.a81fa"
            ]
        ]
    },
    {
        "id": "627ad99d.a81fa",
        "type": "save",
        "name": "save network-resource relationship to esr-thirdparty-sdnc",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='network-resource:relationship-list' \n      key='network-resource.network-id = $tmp.network-id'\n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"esr-thirdparty-sdnc\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/aai/v19/external-system/esr-thirdparty-sdnc-list/esr-thirdparty-sdnc/' + $prop.sdncRestApi.thirdpartySdnc.id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"esr-thirdparty-sdnc.thirdparty-sdnc-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sdncRestApi.thirdpartySdnc.id`\" />\n\n<!--/aai/v19/external-system/esr-thirdparty-sdnc-list/esr-thirdparty-sdnc/SOTNControllerDomain2-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1442,
        "y": 219,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "ead9d9cc.bab4f8",
        "type": "switchNode",
        "name": "switch llcl length",
        "xml": "<switch test='`$node.te.tunnel-termination-point[$ttidx].local-link-connectivities.local-link-connectivity_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1572,
        "y": 1359,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "adf88b82.7a0f88",
                "67300142.b2942",
                "fa1d40a0.27dcc"
            ]
        ]
    },
    {
        "id": "adf88b82.7a0f88",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1760,
        "y": 1245,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "f1f92de8.0da378"
            ]
        ]
    },
    {
        "id": "67300142.b2942",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1765,
        "y": 1320,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "f1f92de8.0da378"
            ]
        ]
    },
    {
        "id": "fa1d40a0.27dcc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1767,
        "y": 1394,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "945bda0b.acb23"
            ]
        ]
    },
    {
        "id": "f1f92de8.0da378",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1920,
        "y": 1311,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "489cfee9.f3ca9",
        "type": "save",
        "name": "save ttp relationship to tp in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='tunnel-termination-point:relationship-list' \n      key='tunnel-termination-point.ttp-id = $unique-ttpId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-nodeId + '/p-interfaces/p-interface/' + $unique-ltpId-second`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-ltpId-second`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2148,
        "y": 1397,
        "z": "a1dc56fc.25a538",
        "wires": [
            []
        ]
    },
    {
        "id": "5109bb9b.43b29c",
        "type": "set",
        "name": "set unique-ltpId second",
        "xml": "<set>\n<parameter name='unique-ltpId-second' value=\"`$unique-nodeId + '-ltpId-' + $node.te.tunnel-termination-point[$ttidx].local-link-connectivities.local-link-connectivity[0].link-tp-ref`\" />\n",
        "comments": "",
        "x": 2097,
        "y": 1353,
        "z": "a1dc56fc.25a538",
        "wires": []
    },
    {
        "id": "945bda0b.acb23",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1907,
        "y": 1390,
        "z": "a1dc56fc.25a538",
        "wires": [
            [
                "5109bb9b.43b29c",
                "489cfee9.f3ca9"
            ]
        ]
    }
]