[
  {
    "id": "ead186d2.0f6828",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 110,
    "y": 82,
    "z": "2ad194c2.78b59c",
    "wires": [
      [
        "e5bcd36f.164ae"
      ]
    ]
  },
  {
    "id": "e5bcd36f.164ae",
    "type": "service-logic",
    "name": "DataChange ${project.version}",
    "module": "DataChange",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
    "outputs": 1,
    "x": 199.00003051757812,
    "y": 172.88891220092773,
    "z": "2ad194c2.78b59c",
    "wires": [
      [
        "f6ea89fc.625028"
      ]
    ]
  },
  {
    "id": "f6ea89fc.625028",
    "type": "method",
    "name": "method update-network-to-aai",
    "xml": "<method rpc='update-network-to-aai' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 235.1112518310547,
    "y": 243.22223663330078,
    "z": "2ad194c2.78b59c",
    "wires": [
      [
        "863e8ceb.57c48"
      ]
    ]
  },
  {
    "id": "863e8ceb.57c48",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 460.33343505859375,
    "y": 242.77792358398438,
    "z": "2ad194c2.78b59c",
    "wires": [
      [
        "8e74b421.191e98",
        "803b39dd.386858",
        "d43f1da5.dc4b6"
      ]
    ]
  },
  {
    "id": "803b39dd.386858",
    "type": "update",
    "name": "save network-resource",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='network-resource'  \n     key='network-resource.network-id = $tmp.network-id' >\n<parameter name='network-id' value='`$tmp.network-id`' />\n<parameter name='client-id' value='`$network.client-id`' />\n<parameter name='te-topo-id' value='`$network.te-topology-id`' />\n<parameter name='provider-id' value='`$network.provider-id`' />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 690.333251953125,
    "y": 148.00001525878906,
    "z": "2ad194c2.78b59c",
    "wires": [
      []
    ]
  },
  {
    "id": "e439623b.4f315",
    "type": "update",
    "name": "save pnf",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf' \n      key='network-resource.network-id = $tmp.network-id\n      AND pnf.pnf-name = $node.node-id' >\n<parameter name='pnf-name' value='`$node.node-id`' />\n<parameter name='pnf-id' value='`$node.node-id`' />\n<parameter name='oper-status' value='`$node.te.oper-status`' />\n<parameter name='admin-status' value='`$node.te.te-node-attributes.admin-status`' />\n<parameter name='in-maint' value='true' />\n<parameter name='selflink' value=\"`'network/network-resources/network-resource/' + $tmp.network-id + '/pnfs/pnf/' + $node.node-id `\" />\n\n\n\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 880.1111450195312,
    "y": 200.11109924316406,
    "z": "2ad194c2.78b59c",
    "wires": [
      []
    ]
  },
  {
    "id": "d43f1da5.dc4b6",
    "type": "for",
    "name": "for each node",
    "xml": "<for index='pidx' start='0' end='`$network.node_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 666.8888549804688,
    "y": 192.33331298828125,
    "z": "2ad194c2.78b59c",
    "wires": [
      [
        "e439623b.4f315",
        "ef8e69fa.97b018",
        "499bb267.5b465c",
        "be8edd04.63c4d",
        "940d7de9.6e0f8"
      ]
    ]
  },
  {
    "id": "ef8e69fa.97b018",
    "type": "set",
    "name": "set network",
    "xml": "<set>\n<parameter name='node.' value='`$network.node[$pidx].`' />\n",
    "comments": "",
    "x": 887.111083984375,
    "y": 166.2222137451172,
    "z": "2ad194c2.78b59c",
    "wires": []
  },
  {
    "id": "499bb267.5b465c",
    "type": "save",
    "name": "save pnf relationship to network-resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf:relationship-list' \n      key='pnf.pnf-name = $node.node-id' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"network-resource\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"network-resource.network-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.network-id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 998.7780151367188,
    "y": 233.44448852539062,
    "z": "2ad194c2.78b59c",
    "wires": [
      []
    ]
  },
  {
    "id": "940d7de9.6e0f8",
    "type": "for",
    "name": "for each termination point",
    "xml": "<for index='tidx' start='0' end='`$node.termination-point_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 931.4444580078125,
    "y": 349.111083984375,
    "z": "2ad194c2.78b59c",
    "wires": [
      [
        "c76492f9.50394",
        "539a2a78.e58064",
        "4ef53491.96368c",
        "5adb74b7.4f324c"
      ]
    ]
  },
  {
    "id": "c76492f9.50394",
    "type": "set",
    "name": "set termination point",
    "xml": "<set>\n<parameter name='tp.' value='`$node.termination-point[$tidx].`' />\n",
    "comments": "",
    "x": 1198.111328125,
    "y": 310.0000457763672,
    "z": "2ad194c2.78b59c",
    "wires": []
  },
  {
    "id": "5adb74b7.4f324c",
    "type": "update",
    "name": "save p-interface",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='p-interface' \n      key='network-resource.network-id = $tmp.network-id\n      AND pnf.pnf-name = $node.node-id\n      AND p-interface.interface-name = $unique-ltpId' >\n<parameter name='network-ref' value='`$tp.supporting-termination-point[0].network-ref`' />\n<parameter name='transparent' value='`$tp.svc.supported-classification.transparent`' />\n<parameter name='speed-value' value='`$tp.te.interface-switching-capability[0].max-lsp-bandwidth[0].te-bandwidth.eth-bandwidth`' />\n<parameter name='oper-status' value='`$tp.te.oper-status`' />\n<parameter name='in-maint' value=\"true\" />\n<parameter name='selflink' value=\"`'network/network-resources/network-resource/' + $tmp.network-id + '/pnfs/pnf/' + $node.node-id '/p-interfaces/p-interface/' + $unique-ltpId`\" />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1181.8150634765625,
    "y": 378.55560302734375,
    "z": "2ad194c2.78b59c",
    "wires": [
      []
    ]
  },
  {
    "id": "539a2a78.e58064",
    "type": "save",
    "name": "save pnf relationship to p-interface in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf:relationship-list' \n      key='pnf.pnf-name = $node.node-id' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id + '/pnfs/pnf/' + $node.node-id '/p-interfaces/p-interface/' + $unique-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-ltpId`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1259.703857421875,
    "y": 416.3333435058594,
    "z": "2ad194c2.78b59c",
    "wires": [
      []
    ]
  },
  {
    "id": "4ef53491.96368c",
    "type": "set",
    "name": "set unique-ltpId",
    "xml": "<set>\n<parameter name='unique-ltpId' value=\"`'nodeId-' + $node.node-id + '-ltpId-' + $tp.te-tp-id`\" />\n",
    "comments": "",
    "x": 1182.000244140625,
    "y": 344.1111145019531,
    "z": "2ad194c2.78b59c",
    "wires": []
  },
  {
    "id": "8e74b421.191e98",
    "type": "execute",
    "name": "execute",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$network.network-id`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.network-id\"/>\n    <parameter name=\"target\" value=\"/\"/>\n    <parameter name=\"replacement\" value=\"-\"/>\n    ",
    "comments": "",
    "outputs": 1,
    "x": 639.9935302734375,
    "y": 108.99349212646484,
    "z": "2ad194c2.78b59c",
    "wires": [
      []
    ]
  },
  {
    "id": "be8edd04.63c4d",
    "type": "save",
    "name": "save pnf relation with esr-thirdparty-sdnc",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='esr-thirdparty-sdnc:relationship-list' \n      key='esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.sdncRestApi.thirdpartySdnc.id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"pnf\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id + '/pnfs/pnf/' + $node.node-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"pnf.pnf-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$node.node-id`\" />\n",
    "comments": "",
    "outputs": 1,
    "x": 980,
    "y": 269.9934997558594,
    "z": "2ad194c2.78b59c",
    "wires": [
      []
    ]
  }
]
