[
    {
        "id": "761e68a4.20d828",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 138,
        "y": 118,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "77bd0709.0316f8"
            ]
        ]
    },
    {
        "id": "77bd0709.0316f8",
        "type": "service-logic",
        "name": "DataChange ${project.version}",
        "module": "DataChange",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
        "outputs": 1,
        "x": 227.00003051757812,
        "y": 208.88891220092773,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "ce4c01c9.aadb6"
            ]
        ]
    },
    {
        "id": "ce4c01c9.aadb6",
        "type": "method",
        "name": "update-network-to-aai",
        "xml": "<method rpc='update-network-to-aai' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 263.1112518310547,
        "y": 279.2222366333008,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "d7c571d2.ba17"
            ]
        ]
    },
    {
        "id": "d7c571d2.ba17",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 488.33343505859375,
        "y": 278.7779235839844,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "bbf04729.a6b23",
                "e453d9fe.dac3d",
                "5625b915.f4097",
                "c5a21baf.a8c168",
                "6179e02b.bcf5",
                "1d5c0100.129fd7"
            ]
        ]
    },
    {
        "id": "e453d9fe.dac3d",
        "type": "save",
        "name": "save network-resource",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='network-resource'  \n     key='network-resource.network-id = $tmp.network-id' >\n<parameter name='network-id' value='`$tmp.network-id`' />\n<parameter name='client-id' value='`$network.te-topology-identifier.client-id`' />\n<parameter name='te-topo-id' value='`$network.te-topology-identifier.topology-id`' />\n<parameter name='provider-id' value='`$network.te-topology-identifier.provider-id`' />\n\n<parameter name='network-type' value='`$network.network-types`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 718.333251953125,
        "y": 184.00001525878906,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "375be865.3c0f",
        "type": "save",
        "name": "save pnf",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf' \n      key='pnf.pnf-name = $unique-nodeId' >\n<parameter name='pnf-name' value='`$unique-nodeId`' />\n<parameter name='pnf-id' value='`$node.node-id`' />\n<parameter name='operational-status' value='`$node.te.oper-status`' />\n<parameter name='admin-status' value='`$node.te.te-node-attributes.admin-status`' />\n<parameter name='in-maint' value='true' />\n\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 918.1111450195312,
        "y": 555.111083984375,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "5625b915.f4097",
        "type": "for",
        "name": "for each node",
        "xml": "<for index='pidx' start='0' end='`$network.node_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 689.8888549804688,
        "y": 535.3333129882812,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "375be865.3c0f",
                "4ec17378.333f8c",
                "56584a7c.bcf26c",
                "e61a37ad.722b58",
                "53212212.eee0d4",
                "d084b3c7.e9a8d8",
                "b406de10.4f976",
                "10825cf6.777533"
            ]
        ]
    },
    {
        "id": "4ec17378.333f8c",
        "type": "set",
        "name": "set node",
        "xml": "<set>\n<parameter name='node.' value='`$network.node[$pidx].`' />\n<parameter name='unique-networkId' value='`$tmp.network-id`' />\n\n",
        "comments": "",
        "x": 923.111083984375,
        "y": 451.2222137451172,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "e61a37ad.722b58",
        "type": "save",
        "name": "save pnf relationship to network-resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf:relationship-list' \n      key='pnf.pnf-name = $unique-nodeId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"network-resource\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"network-resource.network-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.network-id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1014.7779541015625,
        "y": 730.4444780349731,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "663dfab3.1deedc",
        "type": "for",
        "name": "for each termination point",
        "xml": "<for index='tidx' start='0' end='`$node.termination-point_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1322.4444580078125,
        "y": 646.1110534667969,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "34b91b9e.a21bbc",
                "8ee77851.c5edd8",
                "15e31265.27a116",
                "bdd15a8d.477f28",
                "847fbf7b.b4b66"
            ]
        ]
    },
    {
        "id": "34b91b9e.a21bbc",
        "type": "set",
        "name": "set termination point",
        "xml": "<set>\n<parameter name='tp.' value='`$node.termination-point[$tidx].`' />\n",
        "comments": "",
        "x": 1592.111328125,
        "y": 629.0000305175781,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "15e31265.27a116",
        "type": "save",
        "name": "save p-interface",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='p-interface' \n      key='pnf.pnf-name = $unique-nodeId\n      AND p-interface.interface-name = $unique-ltpId' >      \n<parameter name='interface-name' value='`$unique-ltpId`' />\n<parameter name='network-ref' value='`$tp.supporting-termination-point[0].network-ref`' />\n<parameter name='transparent' value='`$tp.svc.supported-classification.transparent`' />\n<parameter name='speed-value' value='`$tp.te.interface-switching-capability[0].max-lsp-bandwidth[0].te-bandwidth.eth-bandwidth`' />\n<parameter name='operational-status' value='`$tp.te.oper-status`' />\n<parameter name='in-maint' value=\"true\" />\n\n<parameter name='inter-layer-lock-id' value='`$tp.te.inter-layer-lock-id[0]`' />\n<!--<parameter name='inter-domain-plug-id' value='`$tp.te.inter-domain-plug-id`' />-->\n<parameter name='inter-domain-plug-id' value='`$tmp.decoded-plug-id`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1586.815185546875,
        "y": 816.5555725097656,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "3101a3f2.5441ec",
                "1a80d066.48736"
            ]
        ]
    },
    {
        "id": "923c5d7b.98959",
        "type": "save",
        "name": "save pnf relationship to p-interface in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf:relationship-list' \n      key='pnf.pnf-name = $unique-nodeId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id + '/pnfs/pnf/' + $unique-nodeId '/p-interfaces/p-interface/' + $unique-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-ltpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1407.703857421875,
        "y": 1729.3333435058594,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "8ee77851.c5edd8",
        "type": "set",
        "name": "set unique-ltpId",
        "xml": "<set>\n<parameter name='unique-ltpId' value=\"`$unique-nodeId + '-ltpId-' + $tp.te-tp-id`\" />\n",
        "comments": "",
        "x": 1576.000244140625,
        "y": 686.1110534667969,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "bbf04729.a6b23",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$network.network-id`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.original-network-id\"/>\n    <parameter name=\"target\" value=\"/\"/>\n    <parameter name=\"replacement\" value=\"-\"/>\n    ",
        "comments": "",
        "outputs": 1,
        "x": 674.9935302734375,
        "y": 92.99349975585938,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "56584a7c.bcf26c",
        "type": "save",
        "name": "save pnf relation with esr-thirdparty-sdnc",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='esr-thirdparty-sdnc:relationship-list' \n      key='esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.sdncRestApi.thirdpartySdnc.id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"pnf\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-nodeId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"pnf.pnf-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-nodeId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 996,
        "y": 766.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "3101a3f2.5441ec",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1758.499885559082,
        "y": 803.7460479736328,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "f0102e05.0d4918"
            ]
        ]
    },
    {
        "id": "1a80d066.48736",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1752.1784744262695,
        "y": 855.9603595733643,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "851b8afc.ed0d6"
            ]
        ]
    },
    {
        "id": "f0102e05.0d4918",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1909.0000457763672,
        "y": 802.999979019165,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "851b8afc.ed0d6",
        "type": "update",
        "name": "update p-interface",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='p-interface' \n      key='pnf.pnf-name = $unique-nodeId\n      AND p-interface.interface-name = $unique-ltpId' >      \n<parameter name='interface-name' value='`$unique-ltpId`' />\n<parameter name='network-ref' value='`$tp.supporting-termination-point[0].network-ref`' />\n<parameter name='transparent' value='`$tp.svc.supported-classification.transparent`' />\n<parameter name='speed-value' value='`$tp.te.interface-switching-capability[0].max-lsp-bandwidth[0].te-bandwidth.eth-bandwidth`' />\n<parameter name='operational-status' value='`$tp.te.oper-status`' />\n<parameter name='in-maint' value=\"true\" />\n\n<parameter name='inter-layer-lock-id' value='`$tp.te.inter-layer-lock-id[0]`' />\n<!--<parameter name='inter-domain-plug-id' value='`$tp.te.inter-domain-plug-id`' />-->\n<parameter name='inter-domain-plug-id' value='`$tmp.decoded-plug-id`' />",
        "comments": "",
        "outputs": 1,
        "x": 1938,
        "y": 856.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "95d00fe5.3c431",
        "type": "save",
        "name": "save tunnel-termination-point",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='tunnel-termination-point' \n      key='tunnel-termination-point.ttp-id = $unique-ttpId' >\n\n<parameter name='ttp-id' value='`$unique-ttpId`' />\n<parameter name='tunnel-tp-id' value='`$ttp.tunnel-tp-id`' />\n<parameter name='name' value='`$ttp.name`' />\n<parameter name='admin-status' value='`$ttp.admin-status`' />\n<parameter name='oper-status' value='`$ttp.oper-status`' />\n<parameter name='inter-layer-lock-id' value='`$ttp.inter-layer-lock-id[0]`' />\n<parameter name='switching-capability' value='`$ttp.switching-capability`' />\n<parameter name='protection-type' value='`$ttp.protection-type`' />\n<parameter name='encoding' value='`$ttp.encoding`' />\n\n\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1652,
        "y": 1107.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "fd2c3c98.e696c",
                "ddcea662.a71648"
            ]
        ]
    },
    {
        "id": "9b51f802.015ec",
        "type": "for",
        "name": "for each tunnel termination point",
        "xml": "<for index='ttidx' start='0' end='`$node.te.tunnel-termination-point_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1315,
        "y": 1095.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "f4695d4f.8e6e6",
                "5bac7584.0c80fc",
                "95d00fe5.3c431",
                "215e84ff.a6a76c",
                "27c88040.1575b8",
                "cbf87dc2.898dc8"
            ]
        ]
    },
    {
        "id": "f4695d4f.8e6e6",
        "type": "set",
        "name": "set tunnel termination point",
        "xml": "<set>\n<parameter name='ttp.' value='`$node.te.tunnel-termination-point[$ttidx].`' />\n",
        "comments": "",
        "x": 1650,
        "y": 1015.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "5bac7584.0c80fc",
        "type": "set",
        "name": "set unique-ttpId",
        "xml": "<set>\n<parameter name='unique-ttpId' value=\"`$unique-nodeId + '-ttpId-' + $ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 1608.888916015625,
        "y": 1054.1110534667969,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "fd2c3c98.e696c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1918,
        "y": 1093.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "17cf7c51.7123dc"
            ]
        ]
    },
    {
        "id": "ddcea662.a71648",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1911.6785888671875,
        "y": 1146.2142810821533,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "44867d6a.9d6f04"
            ]
        ]
    },
    {
        "id": "17cf7c51.7123dc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2068.500160217285,
        "y": 1093.253900527954,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "44867d6a.9d6f04",
        "type": "update",
        "name": "update tunnel-termination-point",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='tunnel-termination-point' \n      key='tunnel-termination-point.ttp-id = $unique-ttpId' >\n\n<parameter name='ttp-id' value='`$unique-ttpId`' />\n<parameter name='tunnel-tp-id' value='`$ttp.tunnel-tp-id`' />\n<parameter name='name' value='`$ttp.name`' />\n<parameter name='admin-status' value='`$ttp.admin-status`' />\n<parameter name='oper-status' value='`$ttp.oper-status`' />\n<parameter name='inter-layer-lock-id' value='`$ttp.inter-layer-lock-id[0]`' />\n<parameter name='switching-capability' value='`$ttp.switching-capability`' />\n<parameter name='protection-type' value='`$ttp.protection-type`' />\n<parameter name='encoding' value='`$ttp.encoding`' />\n\n\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2149,
        "y": 1147.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "53212212.eee0d4",
        "type": "set",
        "name": "set local variables",
        "xml": "<set>\n<parameter name='unique-nodeId' value=\"`'networkId-' + $unique-networkId + '-nodeId-' + $node.node-id`\" />\n",
        "comments": "",
        "x": 948,
        "y": 498,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "c5a21baf.a8c168",
        "type": "call",
        "name": "call update-network-links-to-aai",
        "xml": "<call module='DataChange' rpc='update-network-links-to-aai' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 632,
        "y": 661,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "bb1cacb7.ad451",
        "type": "save",
        "name": "save pnf-interface relationship to pnf in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='p-interface:relationship-list' \n      key='pnf.pnf-name = $unique-nodeId\n      AND p-interface.interface-name = $unique-ltpId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"pnf\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-nodeId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"pnf.pnf-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-nodeId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1414,
        "y": 1684.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "215e84ff.a6a76c",
        "type": "save",
        "name": "save pnf relationship to tunnel termination point in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf:relationship-list' \n      key='pnf.pnf-name = $unique-nodeId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"tunnel-termination-point\" />\n<!--<parameter name=\"relationship-list.relationship[$ttidx].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id + '/pnfs/pnf/' + $node.node-id '/tunnel-termination-points/tunnel-termination-point/' + $unique-ttpId`\" />-->\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/tunnel-termination-points/tunnel-termination-point/' + $unique-ttpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"tunnel-termination-point.ttp-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-ttpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1723,
        "y": 1199.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "b2ce5e57.725c48",
                "ecae58d2.6c42a"
            ]
        ]
    },
    {
        "id": "d084b3c7.e9a8d8",
        "type": "switchNode",
        "name": "switch node ttp",
        "xml": "<switch test='`$node.te.tunnel-termination-point_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 887,
        "y": 1071.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "4865cde2.7cfebc",
                "3d27675.a149b18",
                "57deece8.01b8cc"
            ]
        ]
    },
    {
        "id": "35cbe11c.dd6a16",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1235,
        "y": 1023.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "57deece8.01b8cc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1082,
        "y": 1106.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "9b51f802.015ec"
            ]
        ]
    },
    {
        "id": "b406de10.4f976",
        "type": "switchNode",
        "name": "switch node tp",
        "xml": "<switch test='`$node.termination-point_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 936,
        "y": 621.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "d2843fed.623f28",
                "35baa2d4.5e4b66",
                "ea06dcd1.7022d8"
            ]
        ]
    },
    {
        "id": "d2843fed.623f28",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1115,
        "y": 573.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "6b24c820.32a928"
            ]
        ]
    },
    {
        "id": "35baa2d4.5e4b66",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1114,
        "y": 675.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "663dfab3.1deedc"
            ]
        ]
    },
    {
        "id": "6b24c820.32a928",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1270,
        "y": 573.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "c2dd2cff.e58418",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logTopologyDiscovery.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"sucess executing Hesam log file\" />\n    <parameter name=\"field3\" value=\"`$node.te.tunnel-termination-point_length`\" />\n    <parameter name=\"field4\" value=\"`$node.termination-point_length`\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 865,
        "y": 1115.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "4865cde2.7cfebc",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1075,
        "y": 957.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "35cbe11c.dd6a16"
            ]
        ]
    },
    {
        "id": "3d27675.a149b18",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1080,
        "y": 1032.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "35cbe11c.dd6a16"
            ]
        ]
    },
    {
        "id": "ea06dcd1.7022d8",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1125,
        "y": 621.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "6b24c820.32a928"
            ]
        ]
    },
    {
        "id": "10825cf6.777533",
        "type": "set",
        "name": "unset node",
        "xml": "<set>\n<parameter name='node.' value='' />\n\n",
        "comments": "",
        "x": 920,
        "y": 400,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "bdd15a8d.477f28",
        "type": "set",
        "name": "unset termination point",
        "xml": "<set>\n<parameter name='tp.' value='' />\n",
        "comments": "",
        "x": 1604,
        "y": 571.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "27c88040.1575b8",
        "type": "set",
        "name": "unset tunnel termination point",
        "xml": "<set>\n<parameter name='ttp.' value='' />\n",
        "comments": "",
        "x": 1650,
        "y": 967.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "b2ce5e57.725c48",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2055,
        "y": 1202.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "ecae58d2.6c42a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2052,
        "y": 1250.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "66810254.224164",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logTopologyDiscovery.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"sucess executing Hesam log file\" />\n    <parameter name=\"field3\" value=\"`$node.te.tunnel-termination-point_length`\" />\n    <parameter name=\"field4\" value=\"`$node.termination-point_length`\" />\n    <parameter name=\"field5\" value=\"sucessfully saved ttp\" />\n    <parameter name=\"field6\" value=\"`relationship-list.relationship[$ttidx].related-link`\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2210,
        "y": 1203.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "1bb980b.9e20b7f",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logTopologyDiscovery.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"sucess executing Hesam log file\" />\n    <parameter name=\"field3\" value=\"`$node.te.tunnel-termination-point_length`\" />\n    <parameter name=\"field4\" value=\"`$node.termination-point_length`\" />\n    <parameter name=\"field5\" value=\"failuire on saving ttp\" />\n    <parameter name=\"field6\" value=\"`relationship-list.relationship[$ttidx].related-link`\" />\n\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2211,
        "y": 1251.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "7353d26c.dd96ec",
        "type": "execute",
        "name": "execute Base64 Converter",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='base64DecodingAlgo' >\n    <parameter name=\"encodedValue\" value='`$tp.te.inter-domain-plug-id`'/>\n    <parameter name=\"decodedValue\" value=\"tmp.decoded-plug-id\"/>\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2070,
        "y": 740.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "5edff614.826d5",
                "1737b2af.9f2d45"
            ]
        ]
    },
    {
        "id": "847fbf7b.b4b66",
        "type": "switchNode",
        "name": "switch inter-domain-plug-id empty?",
        "xml": "<switch test='`length($tp.te.inter-domain-plug-id) == 0`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1640,
        "y": 741.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "c7b2022.f3821",
                "cdd8e382.236ad"
            ]
        ]
    },
    {
        "id": "cdd8e382.236ad",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1867,
        "y": 694.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "7cffd999.b3b1b8"
            ]
        ]
    },
    {
        "id": "c7b2022.f3821",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1868,
        "y": 740.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "7353d26c.dd96ec"
            ]
        ]
    },
    {
        "id": "7cffd999.b3b1b8",
        "type": "set",
        "name": "unset tmp.decoded-plug-id",
        "xml": "<set>\n<parameter name='tmp.decoded-plug-id' value='' />\n",
        "comments": "",
        "x": 2071,
        "y": 694.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "5edff614.826d5",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2275,
        "y": 717.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "c0e19e99.143c08"
            ]
        ]
    },
    {
        "id": "1737b2af.9f2d45",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2268.6785888671875,
        "y": 770.2142810821533,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "d55c12df.ae4af8"
            ]
        ]
    },
    {
        "id": "c0e19e99.143c08",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2416,
        "y": 717.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "d55c12df.ae4af8",
        "type": "set",
        "name": "unset tmp.decoded-plug-id",
        "xml": "<set>\n<parameter name='tmp.decoded-plug-id' value='`$tp.te.inter-domain-plug-id`' />\n",
        "comments": "",
        "x": 2475,
        "y": 769.9999694824219,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "6179e02b.bcf5",
        "type": "set",
        "name": "set tmp.network-if",
        "xml": "<set>\n<!--<parameter name='tmp.network-id' value=\"`$prop.sdncRestApi.thirdpartySdnc.id + '-' + $tmp.original-network-id`\" />-->\n<parameter name='tmp.network-id' value=\"`$tmp.original-network-id`\" />\n\n",
        "comments": "",
        "x": 700,
        "y": 134,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "1d5c0100.129fd7",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.sdncRestApi.thirdpartySdnc.id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 761,
        "y": 272.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "90eb31b2.77c238",
                "f3a7ce78.cbd56",
                "9f7c8245.3dec38"
            ]
        ]
    },
    {
        "id": "90eb31b2.77c238",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1007,
        "y": 232.99349975585938,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "8f122881.12a378"
            ]
        ]
    },
    {
        "id": "f3a7ce78.cbd56",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1011,
        "y": 272.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "ecbad826.8cc148"
            ]
        ]
    },
    {
        "id": "9f7c8245.3dec38",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1003,
        "y": 312.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "cf84ec83.d6cc78"
            ]
        ]
    },
    {
        "id": "ecbad826.8cc148",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1161,
        "y": 272.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "cf84ec83.d6cc78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1161,
        "y": 312.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "8f122881.12a378",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1151,
        "y": 230.99349975585938,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "1e7c71ae.903b3e"
            ]
        ]
    },
    {
        "id": "1e7c71ae.903b3e",
        "type": "save",
        "name": "save network-resource relationship to esr-thirdparty-sdnc",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='network-resource:relationship-list' \n      key='network-resource.network-id = $tmp.network-id'\n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"esr-thirdparty-sdnc\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/aai/v19/external-system/esr-thirdparty-sdnc-list/esr-thirdparty-sdnc/' + $prop.sdncRestApi.thirdpartySdnc.id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"esr-thirdparty-sdnc.thirdparty-sdnc-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sdncRestApi.thirdpartySdnc.id`\" />\n\n<!--/aai/v19/external-system/esr-thirdparty-sdnc-list/esr-thirdparty-sdnc/SOTNControllerDomain2-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1454,
        "y": 231.99349975585938,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "cbf87dc2.898dc8",
        "type": "switchNode",
        "name": "switch llcl length",
        "xml": "<switch test='`$node.te.tunnel-termination-point[$ttidx].local-link-connectivities.local-link-connectivity_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1584,
        "y": 1371.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "63cc82cd.b17e4c",
                "7a2ef7bd.18409",
                "bb4f9fb3.43afc8"
            ]
        ]
    },
    {
        "id": "63cc82cd.b17e4c",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1772,
        "y": 1257.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "6223b1f1.46672"
            ]
        ]
    },
    {
        "id": "7a2ef7bd.18409",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1777,
        "y": 1332.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "6223b1f1.46672"
            ]
        ]
    },
    {
        "id": "bb4f9fb3.43afc8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1779,
        "y": 1406.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "3a444976.a40cae"
            ]
        ]
    },
    {
        "id": "6223b1f1.46672",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1932,
        "y": 1323.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "7f51d8cc.cf481",
        "type": "save",
        "name": "save ttp relationship to tp in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='tunnel-termination-point:relationship-list' \n      key='tunnel-termination-point.ttp-id = $unique-ttpId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-nodeId + '/p-interfaces/p-interface/' + $unique-ltpId-second`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-ltpId-second`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2160,
        "y": 1409.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": [
            []
        ]
    },
    {
        "id": "23d6e8d8.b0dc08",
        "type": "set",
        "name": "set unique-ltpId second",
        "xml": "<set>\n<parameter name='unique-ltpId-second' value=\"`$unique-nodeId + '-ltpId-' + $node.te.tunnel-termination-point[$ttidx].local-link-connectivities.local-link-connectivity[0].link-tp-ref`\" />\n",
        "comments": "",
        "x": 2109,
        "y": 1365.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": []
    },
    {
        "id": "3a444976.a40cae",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1919,
        "y": 1402.9934997558594,
        "z": "602a9cf3.38fe14",
        "wires": [
            [
                "23d6e8d8.b0dc08",
                "7f51d8cc.cf481"
            ]
        ]
    }
]