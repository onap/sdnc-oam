[
    {
        "id": "b9fcda31.4ec79",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 113,
        "y": 65.00650024414062,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "3760ce9c.1bf2e2"
            ]
        ]
    },
    {
        "id": "3760ce9c.1bf2e2",
        "type": "service-logic",
        "name": "DataChange ${project.version}",
        "module": "DataChange",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
        "outputs": 1,
        "x": 202.00003051757812,
        "y": 155.89541244506836,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "de74005b.f44ce8"
            ]
        ]
    },
    {
        "id": "de74005b.f44ce8",
        "type": "method",
        "name": "update-network-to-aai",
        "xml": "<method rpc='update-network-to-aai' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 238.1112518310547,
        "y": 226.2287368774414,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "1541ad9c.69aa8a"
            ]
        ]
    },
    {
        "id": "1541ad9c.69aa8a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 463.33343505859375,
        "y": 225.784423828125,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "dbbcebe5.6f422",
                "e66d9ed0.3d3d8",
                "f1256a59.e632c",
                "1dca15d7.0a7a3a",
                "1c1d34a0.adaa8b",
                "4469da89.6a377c"
            ]
        ]
    },
    {
        "id": "e66d9ed0.3d3d8",
        "type": "save",
        "name": "save network-resource",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='network-resource'  \n     key='network-resource.network-id = $tmp.network-id' >\n<parameter name='network-id' value='`$tmp.network-id`' />\n<parameter name='client-id' value='`$network.client-id`' />\n<parameter name='te-topo-id' value='`$network.te-topology-id`' />\n<parameter name='provider-id' value='`$network.provider-id`' />\n\n<parameter name='network-type' value='`$network.network-types`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 693.333251953125,
        "y": 131.0065155029297,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "40545c4b.9221f4",
        "type": "save",
        "name": "save pnf",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf' \n      key='pnf.pnf-name = $unique-nodeId' >\n<parameter name='pnf-name' value='`$unique-nodeId`' />\n<parameter name='pnf-id' value='`$node.node-id`' />\n<parameter name='operational-status' value='`$node.te.oper-status`' />\n<parameter name='admin-status' value='`$node.te.te-node-attributes.admin-status`' />\n<parameter name='in-maint' value='true' />\n\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 893.1111450195312,
        "y": 502.1175842285156,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "f1256a59.e632c",
        "type": "for",
        "name": "for each node",
        "xml": "<for index='pidx' start='0' end='`$network.node_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 664.8888549804688,
        "y": 482.3398132324219,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "40545c4b.9221f4",
                "eba2ef35.33c428",
                "4817116d.5f593",
                "466a40bd.9d277",
                "1acdca56.b6e67e",
                "3e1f14bc.ee90c4",
                "6de7541f.0e2a24",
                "8794be9f.289a08",
                "1b6896a8.e62c19"
            ]
        ]
    },
    {
        "id": "eba2ef35.33c428",
        "type": "set",
        "name": "set node",
        "xml": "<set>\n<parameter name='node.' value='`$network.node[$pidx].`' />\n<parameter name='unique-networkId' value='`$tmp.network-id`' />\n\n",
        "comments": "",
        "x": 898.111083984375,
        "y": 398.2287139892578,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "466a40bd.9d277",
        "type": "save",
        "name": "save pnf relationship to network-resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf:relationship-list' \n      key='pnf.pnf-name = $unique-nodeId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"network-resource\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"network-resource.network-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.network-id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 989.7779541015625,
        "y": 677.4509782791138,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "3d4b777c.0e42f",
        "type": "for",
        "name": "for each termination point",
        "xml": "<for index='tidx' start='0' end='`$node.termination-point_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1297.4444580078125,
        "y": 593.1175537109375,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "95dfcdd1.046e6",
                "1ac320c7.c54f67",
                "aa2f70cf.6e112",
                "64896027.57fb78",
                "fe275075.949f1"
            ]
        ]
    },
    {
        "id": "95dfcdd1.046e6",
        "type": "set",
        "name": "set termination point",
        "xml": "<set>\n<parameter name='tp.' value='`$node.termination-point[$tidx].`' />\n",
        "comments": "",
        "x": 1567.111328125,
        "y": 576.0065307617188,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "aa2f70cf.6e112",
        "type": "save",
        "name": "save p-interface",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='p-interface' \n      key='pnf.pnf-name = $unique-nodeId\n      AND p-interface.interface-name = $unique-ltpId' >      \n<parameter name='interface-name' value='`$unique-ltpId`' />\n<parameter name='network-ref' value='`$tp.supporting-termination-point[0].network-ref`' />\n<parameter name='transparent' value='`$tp.svc.supported-classification.transparent`' />\n<parameter name='speed-value' value='`$tp.te.interface-switching-capability[0].max-lsp-bandwidth[0].te-bandwidth.eth-bandwidth`' />\n<parameter name='operational-status' value='`$tp.te.oper-status`' />\n<parameter name='in-maint' value=\"true\" />\n\n<parameter name='inter-layer-lock-id' value='`$tp.te.inter-layer-lock-id[0]`' />\n<!--<parameter name='inter-domain-plug-id' value='`$tp.te.inter-domain-plug-id`' />-->\n<parameter name='inter-domain-plug-id' value='`$tmp.decoded-plug-id`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1561.815185546875,
        "y": 763.5620727539062,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "673078d4.a5cb68",
                "5651def0.2c85b8"
            ]
        ]
    },
    {
        "id": "6cce4024.476ad",
        "type": "save",
        "name": "save pnf relationship to p-interface in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf:relationship-list' \n      key='pnf.pnf-name = $unique-nodeId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id + '/pnfs/pnf/' + $unique-nodeId '/p-interfaces/p-interface/' + $unique-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-ltpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1382.703857421875,
        "y": 1676.33984375,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "1ac320c7.c54f67",
        "type": "set",
        "name": "set unique-ltpId",
        "xml": "<set>\n<parameter name='unique-ltpId' value=\"`$unique-nodeId + '-ltpId-' + $tp.te-tp-id`\" />\n",
        "comments": "",
        "x": 1551.000244140625,
        "y": 633.1175537109375,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "dbbcebe5.6f422",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$network.network-id`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.original-network-id\"/>\n    <parameter name=\"target\" value=\"/\"/>\n    <parameter name=\"replacement\" value=\"-\"/>\n    ",
        "comments": "",
        "outputs": 1,
        "x": 649.9935302734375,
        "y": 40,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "4817116d.5f593",
        "type": "save",
        "name": "save pnf relation with esr-thirdparty-sdnc",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='esr-thirdparty-sdnc:relationship-list' \n      key='esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.sdncRestApi.thirdpartySdnc.id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"pnf\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $node.node-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"pnf.pnf-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$node.node-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 971,
        "y": 714,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "673078d4.a5cb68",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1733.499885559082,
        "y": 750.7525482177734,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "72e23ce3.0ceb8c"
            ]
        ]
    },
    {
        "id": "5651def0.2c85b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1727.1784744262695,
        "y": 802.9668598175049,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "936d0942.79b6"
            ]
        ]
    },
    {
        "id": "72e23ce3.0ceb8c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1884.0000457763672,
        "y": 750.0064792633057,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "936d0942.79b6",
        "type": "update",
        "name": "update p-interface",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='p-interface' \n      key='pnf.pnf-name = $unique-nodeId\n      AND p-interface.interface-name = $unique-ltpId' >      \n<parameter name='interface-name' value='`$unique-ltpId`' />\n<parameter name='network-ref' value='`$tp.supporting-termination-point[0].network-ref`' />\n<parameter name='transparent' value='`$tp.svc.supported-classification.transparent`' />\n<parameter name='speed-value' value='`$tp.te.interface-switching-capability[0].max-lsp-bandwidth[0].te-bandwidth.eth-bandwidth`' />\n<parameter name='operational-status' value='`$tp.te.oper-status`' />\n<parameter name='in-maint' value=\"true\" />\n\n<parameter name='inter-layer-lock-id' value='`$tp.te.inter-layer-lock-id[0]`' />\n<!--<parameter name='inter-domain-plug-id' value='`$tp.te.inter-domain-plug-id`' />-->\n<parameter name='inter-domain-plug-id' value='`$tmp.decoded-plug-id`' />",
        "comments": "",
        "outputs": 1,
        "x": 1913,
        "y": 804.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "7077dcc4.1aa314",
        "type": "save",
        "name": "save tunnel-termination-point",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='tunnel-termination-point' \n      key='tunnel-termination-point.ttp-id = $unique-ttpId' >\n\n<parameter name='ttp-id' value='`$unique-ttpId`' />\n<parameter name='tunnel-tp-id' value='`$ttp.tunnel-tp-id`' />\n<parameter name='name' value='`$ttp.name`' />\n<parameter name='admin-status' value='`$ttp.admin-status`' />\n<parameter name='oper-status' value='`$ttp.oper-status`' />\n<parameter name='inter-layer-lock-id' value='`$ttp.inter-layer-lock-id[0]`' />\n<parameter name='switching-capability' value='`$ttp.switching-capability`' />\n<parameter name='protection-type' value='`$ttp.protection-type`' />\n<parameter name='encoding' value='`$ttp.encoding`' />\n\n\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1627,
        "y": 1055.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "ee093e46.66c7d8",
                "e9c7ad6a.1577f"
            ]
        ]
    },
    {
        "id": "3a45511d.adcf26",
        "type": "for",
        "name": "for each tunnel termination point",
        "xml": "<for index='ttidx' start='0' end='`$node.te.tunnel-termination-point_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1290,
        "y": 1043.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "2ea4deaf.40bdfa",
                "458ce581.77bfe4",
                "7077dcc4.1aa314",
                "dad1a90d.61b018",
                "7da29c03.1dbdf4",
                "58b65656.8480c8"
            ]
        ]
    },
    {
        "id": "2ea4deaf.40bdfa",
        "type": "set",
        "name": "set tunnel termination point",
        "xml": "<set>\n<parameter name='ttp.' value='`$node.te.tunnel-termination-point[$ttidx].`' />\n",
        "comments": "",
        "x": 1625,
        "y": 963.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "458ce581.77bfe4",
        "type": "set",
        "name": "set unique-ttpId",
        "xml": "<set>\n<parameter name='unique-ttpId' value=\"`$unique-nodeId + '-ttpId-' + $ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 1583.888916015625,
        "y": 1001.1175537109375,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "ee093e46.66c7d8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1893,
        "y": 1041.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "1b7d5a60.835d5e"
            ]
        ]
    },
    {
        "id": "e9c7ad6a.1577f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1886.6785888671875,
        "y": 1093.220781326294,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "652a4eb1.3c9f7"
            ]
        ]
    },
    {
        "id": "1b7d5a60.835d5e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2043.5001602172852,
        "y": 1040.2604007720947,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "652a4eb1.3c9f7",
        "type": "update",
        "name": "update tunnel-termination-point",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='tunnel-termination-point' \n      key='tunnel-termination-point.ttp-id = $unique-ttpId' >\n\n<parameter name='ttp-id' value='`$unique-ttpId`' />\n<parameter name='tunnel-tp-id' value='`$ttp.tunnel-tp-id`' />\n<parameter name='name' value='`$ttp.name`' />\n<parameter name='admin-status' value='`$ttp.admin-status`' />\n<parameter name='oper-status' value='`$ttp.oper-status`' />\n<parameter name='inter-layer-lock-id' value='`$ttp.inter-layer-lock-id[0]`' />\n<parameter name='switching-capability' value='`$ttp.switching-capability`' />\n<parameter name='protection-type' value='`$ttp.protection-type`' />\n<parameter name='encoding' value='`$ttp.encoding`' />\n\n\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2124,
        "y": 1095.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "1acdca56.b6e67e",
        "type": "set",
        "name": "set local variables",
        "xml": "<set>\n<parameter name='unique-nodeId' value=\"`'networkId-' + $unique-networkId + '-nodeId-' + $node.node-id`\" />\n",
        "comments": "",
        "x": 923,
        "y": 445.0065002441406,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "1dca15d7.0a7a3a",
        "type": "call",
        "name": "call update-network-links-to-aai",
        "xml": "<call module='DataChange' rpc='update-network-links-to-aai' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 607,
        "y": 608.0065002441406,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "c87f71c.204801",
        "type": "save",
        "name": "save pnf-interface relationship to pnf in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='p-interface:relationship-list' \n      key='pnf.pnf-name = $unique-nodeId\n      AND p-interface.interface-name = $unique-ltpId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"pnf\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-nodeId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"pnf.pnf-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-nodeId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1389,
        "y": 1632.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "dad1a90d.61b018",
        "type": "save",
        "name": "save pnf relationship to tunnel termination point in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf:relationship-list' \n      key='pnf.pnf-name = $unique-nodeId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"tunnel-termination-point\" />\n<!--<parameter name=\"relationship-list.relationship[$ttidx].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id + '/pnfs/pnf/' + $node.node-id '/tunnel-termination-points/tunnel-termination-point/' + $unique-ttpId`\" />-->\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/tunnel-termination-points/tunnel-termination-point/' + $unique-ttpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"tunnel-termination-point.ttp-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-ttpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1698,
        "y": 1147.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "486bef2.804149",
                "8297f8e3.32f2f"
            ]
        ]
    },
    {
        "id": "3e1f14bc.ee90c4",
        "type": "switchNode",
        "name": "switch node ttp",
        "xml": "<switch test='`$node.te.tunnel-termination-point_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 862,
        "y": 1019.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "3564e5a8.68c49a",
                "fd68b5a4.a3a878",
                "f36d0950.312798"
            ]
        ]
    },
    {
        "id": "d6240165.9d9a1",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1210,
        "y": 971.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "f36d0950.312798",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1057,
        "y": 1054.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "3a45511d.adcf26"
            ]
        ]
    },
    {
        "id": "6de7541f.0e2a24",
        "type": "switchNode",
        "name": "switch node tp",
        "xml": "<switch test='`$node.termination-point_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 911,
        "y": 569.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "d28496d2.5ae628",
                "74698dba.4a5d9c",
                "f51e137e.4b4cd"
            ]
        ]
    },
    {
        "id": "d28496d2.5ae628",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1090,
        "y": 521.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "1912a08f.2e751f"
            ]
        ]
    },
    {
        "id": "74698dba.4a5d9c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1089,
        "y": 623.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "3d4b777c.0e42f"
            ]
        ]
    },
    {
        "id": "1912a08f.2e751f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1245,
        "y": 521.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "8794be9f.289a08",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logTopologyDiscovery.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"sucess executing Hesam log file\" />\n    <parameter name=\"field3\" value=\"`$node.te.tunnel-termination-point_length`\" />\n    <parameter name=\"field4\" value=\"`$node.termination-point_length`\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 840,
        "y": 1063.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "3564e5a8.68c49a",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1050,
        "y": 905.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "d6240165.9d9a1"
            ]
        ]
    },
    {
        "id": "fd68b5a4.a3a878",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1055,
        "y": 980.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "d6240165.9d9a1"
            ]
        ]
    },
    {
        "id": "f51e137e.4b4cd",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1100,
        "y": 569.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "1912a08f.2e751f"
            ]
        ]
    },
    {
        "id": "1b6896a8.e62c19",
        "type": "set",
        "name": "unset node",
        "xml": "<set>\n<parameter name='node.' value='' />\n\n",
        "comments": "",
        "x": 895,
        "y": 347.0065002441406,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "64896027.57fb78",
        "type": "set",
        "name": "unset termination point",
        "xml": "<set>\n<parameter name='tp.' value='' />\n",
        "comments": "",
        "x": 1579,
        "y": 519.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "7da29c03.1dbdf4",
        "type": "set",
        "name": "unset tunnel termination point",
        "xml": "<set>\n<parameter name='ttp.' value='' />\n",
        "comments": "",
        "x": 1625,
        "y": 915.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "486bef2.804149",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2030,
        "y": 1150.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "f859267c.20dd3"
            ]
        ]
    },
    {
        "id": "8297f8e3.32f2f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2027,
        "y": 1198.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "19a686f.52c17f9"
            ]
        ]
    },
    {
        "id": "f859267c.20dd3",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logTopologyDiscovery.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"sucess executing Hesam log file\" />\n    <parameter name=\"field3\" value=\"`$node.te.tunnel-termination-point_length`\" />\n    <parameter name=\"field4\" value=\"`$node.termination-point_length`\" />\n    <parameter name=\"field5\" value=\"sucessfully saved ttp\" />\n    <parameter name=\"field6\" value=\"`relationship-list.relationship[$ttidx].related-link`\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2185,
        "y": 1151.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "19a686f.52c17f9",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logTopologyDiscovery.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"sucess executing Hesam log file\" />\n    <parameter name=\"field3\" value=\"`$node.te.tunnel-termination-point_length`\" />\n    <parameter name=\"field4\" value=\"`$node.termination-point_length`\" />\n    <parameter name=\"field5\" value=\"failuire on saving ttp\" />\n    <parameter name=\"field6\" value=\"`relationship-list.relationship[$ttidx].related-link`\" />\n\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2186,
        "y": 1199.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "c991cb25.a4c41",
        "type": "execute",
        "name": "execute Base64 Converter",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='base64DecodingAlgo' >\n    <parameter name=\"encodedValue\" value='`$tp.te.inter-domain-plug-id`'/>\n    <parameter name=\"decodedValue\" value=\"tmp.decoded-plug-id\"/>\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2045,
        "y": 688.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "dcbfdbac.4106e8",
                "25f66573.5f2caa"
            ]
        ]
    },
    {
        "id": "fe275075.949f1",
        "type": "switchNode",
        "name": "switch inter-domain-plug-id empty?",
        "xml": "<switch test='`length($tp.te.inter-domain-plug-id) == 0`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1615,
        "y": 689.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "2202ef19.0cb66",
                "a44d5e08.8645a8"
            ]
        ]
    },
    {
        "id": "a44d5e08.8645a8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1842,
        "y": 642.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "77ac957f.8f7e64"
            ]
        ]
    },
    {
        "id": "2202ef19.0cb66",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1843,
        "y": 688.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "c991cb25.a4c41"
            ]
        ]
    },
    {
        "id": "77ac957f.8f7e64",
        "type": "set",
        "name": "unset tmp.decoded-plug-id",
        "xml": "<set>\n<parameter name='tmp.decoded-plug-id' value='' />\n",
        "comments": "",
        "x": 2046,
        "y": 642.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "dcbfdbac.4106e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2250,
        "y": 665.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "21836a86.63b72e"
            ]
        ]
    },
    {
        "id": "25f66573.5f2caa",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2243.6785888671875,
        "y": 717.220781326294,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "8297f536.6bb4a"
            ]
        ]
    },
    {
        "id": "21836a86.63b72e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2391,
        "y": 665.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "8297f536.6bb4a",
        "type": "set",
        "name": "unset tmp.decoded-plug-id",
        "xml": "<set>\n<parameter name='tmp.decoded-plug-id' value='`$tp.te.inter-domain-plug-id`' />\n",
        "comments": "",
        "x": 2450,
        "y": 717.0064697265625,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "1c1d34a0.adaa8b",
        "type": "set",
        "name": "set tmp.network-if",
        "xml": "<set>\n<parameter name='tmp.network-id' value=\"`$prop.sdncRestApi.thirdpartySdnc.id + '-' + $tmp.original-network-id`\" />\n\n",
        "comments": "",
        "x": 675,
        "y": 81.00650024414062,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "4469da89.6a377c",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.sdncRestApi.thirdpartySdnc.id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 736,
        "y": 220,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "259a6f10.d859c",
                "2643a1bc.bc0f46",
                "7a6e0ac1.83425c"
            ]
        ]
    },
    {
        "id": "259a6f10.d859c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 982,
        "y": 180,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "83c13ac.c0250c8"
            ]
        ]
    },
    {
        "id": "2643a1bc.bc0f46",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 986,
        "y": 220,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "7add65bd.d43c1c"
            ]
        ]
    },
    {
        "id": "7a6e0ac1.83425c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 978,
        "y": 260,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "a3451a06.01294"
            ]
        ]
    },
    {
        "id": "7add65bd.d43c1c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1136,
        "y": 220,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "a3451a06.01294",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 1136,
        "y": 260,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "83c13ac.c0250c8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1126,
        "y": 178,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "70f6d2fc.749b0c"
            ]
        ]
    },
    {
        "id": "70f6d2fc.749b0c",
        "type": "save",
        "name": "save network-resource relationship to esr-thirdparty-sdnc",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='network-resource:relationship-list' \n      key='network-resource.network-id = $tmp.network-id'\n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"esr-thirdparty-sdnc\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/aai/v19/external-system/esr-thirdparty-sdnc-list/esr-thirdparty-sdnc/' + $prop.sdncRestApi.thirdpartySdnc.id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"esr-thirdparty-sdnc.thirdparty-sdnc-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sdncRestApi.thirdpartySdnc.id`\" />\n\n<!--/aai/v19/external-system/esr-thirdparty-sdnc-list/esr-thirdparty-sdnc/SOTNControllerDomain2-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1429,
        "y": 179,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "58b65656.8480c8",
        "type": "switchNode",
        "name": "switch llcl length",
        "xml": "<switch test='`$node.te.tunnel-termination-point[$ttidx].local-link-connectivities.local-link-connectivity_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1559,
        "y": 1319,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "cf6621ae.60449",
                "a969fa1e.a9262",
                "31cb7972.09206e"
            ]
        ]
    },
    {
        "id": "cf6621ae.60449",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1747,
        "y": 1205,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "95b8f366.2c9b38"
            ]
        ]
    },
    {
        "id": "a969fa1e.a9262",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1752,
        "y": 1280,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "95b8f366.2c9b38"
            ]
        ]
    },
    {
        "id": "31cb7972.09206e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1754,
        "y": 1354,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "df66f384.e71e78"
            ]
        ]
    },
    {
        "id": "95b8f366.2c9b38",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1907,
        "y": 1271,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "ba6a5053.fa9158",
        "type": "save",
        "name": "save ttp relationship to tp in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='tunnel-termination-point:relationship-list' \n      key='tunnel-termination-point.ttp-id = $unique-ttpId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-nodeId + '/p-interfaces/p-interface/' + $unique-ltpId-second`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-ltpId-second`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2135,
        "y": 1357,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            []
        ]
    },
    {
        "id": "f20766b0.56af",
        "type": "set",
        "name": "set unique-ltpId second",
        "xml": "<set>\n<parameter name='unique-ltpId-second' value=\"`$unique-nodeId + '-ltpId-' + $node.te.tunnel-termination-point[$ttidx].local-link-connectivities.local-link-connectivity[0].link-tp-ref`\" />\n",
        "comments": "",
        "x": 2084,
        "y": 1313,
        "z": "6d6b8a1f.be1cb4",
        "wires": []
    },
    {
        "id": "df66f384.e71e78",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1894,
        "y": 1350,
        "z": "6d6b8a1f.be1cb4",
        "wires": [
            [
                "f20766b0.56af",
                "ba6a5053.fa9158"
            ]
        ]
    }
]