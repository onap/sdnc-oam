[
  {
    "id": "20435d2f.b707b2",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 129.01040649414062,
    "y": 61.010414123535156,
    "z": "3e15e6f8.d8900a",
    "wires": [
      [
        "83ca6f8e.538a2"
      ]
    ]
  },
  {
    "id": "83ca6f8e.538a2",
    "type": "service-logic",
    "name": "DataChange ${project.version}",
    "module": "DataChange",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
    "outputs": 1,
    "x": 218.01043701171875,
    "y": 151.8993263244629,
    "z": "3e15e6f8.d8900a",
    "wires": [
      [
        "5fa2f1f3.bb35e"
      ]
    ]
  },
  {
    "id": "5fa2f1f3.bb35e",
    "type": "method",
    "name": "method update-network-to-aai",
    "xml": "<method rpc='update-network-to-aai' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 254.1216583251953,
    "y": 222.23265075683594,
    "z": "3e15e6f8.d8900a",
    "wires": [
      [
        "44238134.7d97f"
      ]
    ]
  },
  {
    "id": "44238134.7d97f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 479.3438415527344,
    "y": 221.78833770751953,
    "z": "3e15e6f8.d8900a",
    "wires": [
      [
        "84458cb3.2004e",
        "282c5771.31f2f8",
        "c27c36c9.fe0038"
      ]
    ]
  },
  {
    "id": "282c5771.31f2f8",
    "type": "update",
    "name": "save network-resource",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='network-resource'  \n     key='network-resource.network-id = $tmp.network-id' >\n<parameter name='network-id' value='`$tmp.network-id`' />\n<parameter name='client-id' value='`$network.client-id`' />\n<parameter name='te-topo-id' value='`$network.te-topology-id`' />\n<parameter name='provider-id' value='`$network.provider-id`' />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 709.3436584472656,
    "y": 127.01042938232422,
    "z": "3e15e6f8.d8900a",
    "wires": [
      []
    ]
  },
  {
    "id": "8db597cb.e2ef58",
    "type": "update",
    "name": "save pnf",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf' \n      key='network-resource.network-id = $tmp.network-id\n      AND pnf.pnf-name = $node.node-id' >\n<parameter name='pnf-name' value='`$node.node-id`' />\n<parameter name='pnf-id' value='`$node.node-id`' />\n<parameter name='operational-status' value='`$node.te.oper-status`' />\n<parameter name='admin-status' value='`$node.te.te-node-attributes.admin-status`' />\n<parameter name='in-maint' value='true' />\n\n\n\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 899.1215515136719,
    "y": 179.12151336669922,
    "z": "3e15e6f8.d8900a",
    "wires": [
      []
    ]
  },
  {
    "id": "c27c36c9.fe0038",
    "type": "for",
    "name": "for each node",
    "xml": "<for index='pidx' start='0' end='`$network.node_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 685.8992614746094,
    "y": 171.3437271118164,
    "z": "3e15e6f8.d8900a",
    "wires": [
      [
        "8db597cb.e2ef58",
        "6b246a86.7d22b4",
        "79357b97.6a6604",
        "629488d9.a436f8",
        "89ed3af1.c4f958"
      ]
    ]
  },
  {
    "id": "6b246a86.7d22b4",
    "type": "set",
    "name": "set network",
    "xml": "<set>\n<parameter name='node.' value='`$network.node[$pidx].`' />\n",
    "comments": "",
    "x": 906.1214904785156,
    "y": 145.23262786865234,
    "z": "3e15e6f8.d8900a",
    "wires": []
  },
  {
    "id": "79357b97.6a6604",
    "type": "save",
    "name": "save pnf relationship to network-resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf:relationship-list' \n      key='pnf.pnf-name = $node.node-id' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"network-resource\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"network-resource.network-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.network-id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1017.7884216308594,
    "y": 212.45490264892578,
    "z": "3e15e6f8.d8900a",
    "wires": [
      []
    ]
  },
  {
    "id": "89ed3af1.c4f958",
    "type": "for",
    "name": "for each termination point",
    "xml": "<for index='tidx' start='0' end='`$node.termination-point_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 950.4548645019531,
    "y": 328.12149810791016,
    "z": "3e15e6f8.d8900a",
    "wires": [
      [
        "6bc546b5.f87e18",
        "8d1a709c.fbdf6",
        "ad4de444.eb7858",
        "bd80da47.090a88"
      ]
    ]
  },
  {
    "id": "6bc546b5.f87e18",
    "type": "set",
    "name": "set termination point",
    "xml": "<set>\n<parameter name='tp.' value='`$node.termination-point[$tidx].`' />\n",
    "comments": "",
    "x": 1217.1217346191406,
    "y": 289.01045989990234,
    "z": "3e15e6f8.d8900a",
    "wires": []
  },
  {
    "id": "bd80da47.090a88",
    "type": "update",
    "name": "save p-interface",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='p-interface' \n      key='network-resource.network-id = $tmp.network-id\n      AND pnf.pnf-name = $node.node-id\n      AND p-interface.interface-name = $unique-ltpId' >      \n<parameter name='interface-name' value='`$unique-ltpId`' />\n<parameter name='network-ref' value='`$tp.supporting-termination-point[0].network-ref`' />\n<parameter name='transparent' value='`$tp.svc.supported-classification.transparent`' />\n<parameter name='speed-value' value='`$tp.te.interface-switching-capability[0].max-lsp-bandwidth[0].te-bandwidth.eth-bandwidth`' />\n<parameter name='operational-status' value='`$tp.te.oper-status`' />\n<parameter name='in-maint' value=\"true\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1200.8254699707031,
    "y": 357.5660171508789,
    "z": "3e15e6f8.d8900a",
    "wires": [
      []
    ]
  },
  {
    "id": "8d1a709c.fbdf6",
    "type": "save",
    "name": "save pnf relationship to p-interface in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='pnf:relationship-list' \n      key='pnf.pnf-name = $node.node-id' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id + '/pnfs/pnf/' + $node.node-id '/p-interfaces/p-interface/' + $unique-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-ltpId`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1278.7142639160156,
    "y": 395.34375762939453,
    "z": "3e15e6f8.d8900a",
    "wires": [
      []
    ]
  },
  {
    "id": "ad4de444.eb7858",
    "type": "set",
    "name": "set unique-ltpId",
    "xml": "<set>\n<parameter name='unique-ltpId' value=\"`'nodeId-' + $node.node-id + '-ltpId-' + $tp.te-tp-id`\" />\n",
    "comments": "",
    "x": 1201.0106506347656,
    "y": 323.1215286254883,
    "z": "3e15e6f8.d8900a",
    "wires": []
  },
  {
    "id": "84458cb3.2004e",
    "type": "execute",
    "name": "execute",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$network.network-id`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.network-id\"/>\n    <parameter name=\"target\" value=\"/\"/>\n    <parameter name=\"replacement\" value=\"-\"/>\n    ",
    "comments": "",
    "outputs": 1,
    "x": 659.0039367675781,
    "y": 88.00390625,
    "z": "3e15e6f8.d8900a",
    "wires": [
      []
    ]
  },
  {
    "id": "629488d9.a436f8",
    "type": "save",
    "name": "save pnf relation with esr-thirdparty-sdnc",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='esr-thirdparty-sdnc:relationship-list' \n      key='esr-thirdparty-sdnc.thirdparty-sdnc-id = $prop.sdncRestApi.thirdpartySdnc.id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"pnf\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/network-resources/network-resource/' + $tmp.network-id + '/pnfs/pnf/' + $node.node-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"pnf.pnf-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$node.node-id`\" />\n",
    "comments": "",
    "outputs": 1,
    "x": 999.0104064941406,
    "y": 249.00391387939453,
    "z": "3e15e6f8.d8900a",
    "wires": [
      []
    ]
  }
]
