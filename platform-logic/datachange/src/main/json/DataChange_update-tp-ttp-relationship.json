[
    {
        "id": "f3e0b928.e8c7e",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 128,
        "y": 83,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "2b8024f5.a0b3e4"
            ]
        ]
    },
    {
        "id": "2b8024f5.a0b3e4",
        "type": "service-logic",
        "name": "DataChange ${project.version}",
        "module": "DataChange",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
        "outputs": 1,
        "x": 217.00003051757812,
        "y": 173.88891220092773,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "e0b4218d.2d604"
            ]
        ]
    },
    {
        "id": "e0b4218d.2d604",
        "type": "method",
        "name": "method update-tp-ttp-relationship",
        "xml": "<method rpc='update-tp-ttp-relationship' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 253.1112518310547,
        "y": 244.22223663330078,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "36afdba8.70bb5c"
            ]
        ]
    },
    {
        "id": "36afdba8.70bb5c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 478.33343505859375,
        "y": 243.77792358398438,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "63bd9611.390fd8",
                "1ed8c21a.583ede",
                "232a5f0a.159568",
                "e63ab049.15d1f"
            ]
        ]
    },
    {
        "id": "1ed8c21a.583ede",
        "type": "for",
        "name": "for each node in network-eth",
        "xml": "<for index='pethidx' start='0' end='`$network-eth.node_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 710.8888549804688,
        "y": 198.33331298828125,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "d25c4b67.5fdd7",
                "7e336092.2a08",
                "d912c615.382f4",
                "e1c780a1.bce018"
            ]
        ]
    },
    {
        "id": "d25c4b67.5fdd7",
        "type": "set",
        "name": "set node-eth",
        "xml": "<set>\n<parameter name='node-eth.' value='`$network-eth.node[$pethidx].`' />",
        "comments": "",
        "x": 973.111083984375,
        "y": 42.22221374511719,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "68049.3760dfb7c",
        "type": "set",
        "name": "set termination point tp-eth",
        "xml": "<set>\n<parameter name='tp-eth.' value='`$node-eth.termination-point[$tidx].`' />\n",
        "comments": "",
        "x": 1215.111328125,
        "y": 232.00006103515625,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "78ae2560.1cea4c",
        "type": "set",
        "name": "set unique-ltpethId",
        "xml": "<set>\n<parameter name='unique-ltpethId' value=\"`$unique-node-ethId + '-ltpId-' + $tp-eth.te-tp-id`\" />\n",
        "comments": "",
        "x": 1193.000244140625,
        "y": 269.111083984375,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "63bd9611.390fd8",
        "type": "execute",
        "name": "execute set tmp.network-eth.network-id",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$network-eth.network-id`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.original-network-eth.network-id\"/>\n    <parameter name=\"target\" value=\"/\"/>\n    <parameter name=\"replacement\" value=\"-\"/>\n    ",
        "comments": "",
        "outputs": 1,
        "x": 668.9935302734375,
        "y": 62.993499755859375,
        "z": "8966128c.40fc9",
        "wires": [
            []
        ]
    },
    {
        "id": "7e336092.2a08",
        "type": "set",
        "name": "set local variables",
        "xml": "<set>\n<parameter name='unique-network-ethId' value='`$tmp.network-eth.network-id`' />\n",
        "comments": "",
        "x": 987,
        "y": 97,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "232a5f0a.159568",
        "type": "execute",
        "name": "execute set tmp.network-otn.network-id",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$network-otn.network-id`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.original-network-otn.network-id\"/>\n    <parameter name=\"target\" value=\"/\"/>\n    <parameter name=\"replacement\" value=\"-\"/>\n    ",
        "comments": "",
        "outputs": 1,
        "x": 666,
        "y": 102,
        "z": "8966128c.40fc9",
        "wires": [
            []
        ]
    },
    {
        "id": "5ced7489.3fd33c",
        "type": "for",
        "name": "for each tunnel termination point in otn",
        "xml": "<for index='ttidx' start='0' end='`$node-otn.te.tunnel-termination-point_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1570,
        "y": 629,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "c149dbcd.dbc5b",
                "a007e2e5.f8d76",
                "1e876a82.9683f5",
                "a5938665.3779c8",
                "a06a50c9.82a2f"
            ]
        ]
    },
    {
        "id": "c149dbcd.dbc5b",
        "type": "set",
        "name": "set tunnel termination point",
        "xml": "<set>\n<parameter name='ttp.' value='`$node-otn.te.tunnel-termination-point[$ttidx].`' />\n",
        "comments": "",
        "x": 1939,
        "y": 341,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "a007e2e5.f8d76",
        "type": "set",
        "name": "set unique-ttpId",
        "xml": "<set>\n<parameter name='unique-ttpId' value=\"`$unique-node-otnId + '-ttpId-' + $ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 1906.888916015625,
        "y": 405.111083984375,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "b56a229e.94c8d8",
        "type": "set",
        "name": "set tp-inter-layer-lock-id",
        "xml": "<set>\n<parameter name='tp-inter-layer-lock-id' value='`$node-eth.termination-point[$tidx].te.inter-layer-lock-id[0]`' />\n",
        "comments": "",
        "x": 1233,
        "y": 309,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "91b08f38.b7b1f",
        "type": "for",
        "name": "for each node in network-otn",
        "xml": "<for index='potnidx' start='0' end='`$network-otn.node_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1251,
        "y": 358,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "2a04c22a.d38706",
                "747557f8.e08f6",
                "23d7e732.31c878",
                "7fec5669.9d797",
                "5525a122.db022"
            ]
        ]
    },
    {
        "id": "2a04c22a.d38706",
        "type": "set",
        "name": "set node-otn",
        "xml": "<set>\n<parameter name='node-otn.' value='`$network-otn.node[$potnidx].`' />",
        "comments": "",
        "x": 1545,
        "y": 328,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "747557f8.e08f6",
        "type": "set",
        "name": "set local variables",
        "xml": "<set>\n<parameter name='unique-network-otnId' value='`$tmp.network-otn.network-id`' />\n",
        "comments": "",
        "x": 1543.888916015625,
        "y": 375.7777862548828,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "1e876a82.9683f5",
        "type": "set",
        "name": "set ttp-inter-layer-lock-id",
        "xml": "<set>\n<parameter name='ttp-inter-layer-lock-id' value='`$node-otn.te.tunnel-termination-point[$ttidx].inter-layer-lock-id[0]`' />\n",
        "comments": "",
        "x": 1931,
        "y": 459,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "a5938665.3779c8",
        "type": "switchNode",
        "name": "switch tp-inter-layer-lock-id",
        "xml": "<switch test='`$tp-inter-layer-lock-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1938,
        "y": 515,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "48b284bc.31f88c"
            ]
        ]
    },
    {
        "id": "48b284bc.31f88c",
        "type": "outcome",
        "name": "ttp-inter-layer-lock-id",
        "xml": "<outcome value='`$ttp-inter-layer-lock-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1996,
        "y": 611,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "d5168225.118b5"
            ]
        ]
    },
    {
        "id": "d5168225.118b5",
        "type": "save",
        "name": "save p-interface relationship to ttp in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='p-interface:relationship-list' \n      key='p-interface.interface-name = $unique-ltpethId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"tunnel-termination-point\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"/network/tunnel-termination-points/tunnel-termination-point/ + `$unique-ttpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"tunnel-termination-point.tunnel-tp-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-ttpId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2314,
        "y": 611,
        "z": "8966128c.40fc9",
        "wires": [
            []
        ]
    },
    {
        "id": "679b8e41.9ed698",
        "type": "set",
        "name": "unset termination point tp-eth",
        "xml": "<set>\n<parameter name='tp-eth.' value='' />\n",
        "comments": "",
        "x": 1210,
        "y": 194.99349975585938,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "a06a50c9.82a2f",
        "type": "set",
        "name": "unset tunnel termination point",
        "xml": "<set>\n<parameter name='ttp.' value='' />\n",
        "comments": "",
        "x": 1947,
        "y": 287.9934997558594,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "d912c615.382f4",
        "type": "switchNode",
        "name": "switch node-eth tp",
        "xml": "<switch test='`$node-eth.termination-point_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 577,
        "y": 377,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "a5220607.a1fd88",
                "ed33421.4d77fc",
                "60e52ea8.adce88"
            ]
        ]
    },
    {
        "id": "a5220607.a1fd88",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 756,
        "y": 329,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "f8847f3a.3586c"
            ]
        ]
    },
    {
        "id": "f8847f3a.3586c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 911,
        "y": 329,
        "z": "8966128c.40fc9",
        "wires": [
            []
        ]
    },
    {
        "id": "60e52ea8.adce88",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 766,
        "y": 377,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "f8847f3a.3586c"
            ]
        ]
    },
    {
        "id": "ed33421.4d77fc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 755,
        "y": 431,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "4137593c.5397c"
            ]
        ]
    },
    {
        "id": "4137593c.5397c",
        "type": "for",
        "name": "for each termination point",
        "xml": "<for index='tidx' start='0' end='`$node-eth.termination-point_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 963.4444580078125,
        "y": 401.111083984375,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "679b8e41.9ed698",
                "68049.3760dfb7c",
                "78ae2560.1cea4c",
                "b56a229e.94c8d8",
                "91b08f38.b7b1f"
            ]
        ]
    },
    {
        "id": "23d7e732.31c878",
        "type": "set",
        "name": "unset node-otn",
        "xml": "<set>\n<parameter name='node-otn.' value='' />\n<parameter name='unique-network-otnId' value='' />\n<parameter name='unique-node-otnId' value=\"\" />\n",
        "comments": "",
        "x": 1546,
        "y": 277,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "7fec5669.9d797",
        "type": "switchNode",
        "name": "switch node-otn ttp",
        "xml": "<switch test='`$node-otn.te.tunnel-termination-point_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1143,
        "y": 608,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "c2495d37.4f1a88",
                "4a7d6e3.4a2c99",
                "e5a8fd10.f52c58"
            ]
        ]
    },
    {
        "id": "c2495d37.4f1a88",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1331,
        "y": 494,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "50aa44cc.08445c"
            ]
        ]
    },
    {
        "id": "4a7d6e3.4a2c99",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1336,
        "y": 569,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "50aa44cc.08445c"
            ]
        ]
    },
    {
        "id": "e5a8fd10.f52c58",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1333,
        "y": 631,
        "z": "8966128c.40fc9",
        "wires": [
            [
                "5ced7489.3fd33c"
            ]
        ]
    },
    {
        "id": "50aa44cc.08445c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1491,
        "y": 560,
        "z": "8966128c.40fc9",
        "wires": [
            []
        ]
    },
    {
        "id": "e1c780a1.bce018",
        "type": "set",
        "name": "set local variables",
        "xml": "<set>\n<parameter name='unique-node-ethId' value=\"`'networkId-' + $unique-network-ethId + '-nodeId-' + $node-eth.node-id`\" />\n",
        "comments": "",
        "x": 989,
        "y": 153,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "e63ab049.15d1f",
        "type": "set",
        "name": "set local variables",
        "xml": "<set>\n<parameter name='tmp.network-eth.network-id' value=\"`$prop.sdncRestApi.thirdpartySdnc.id + '-' + $tmp.original-network-eth.network-id`\" />\n<parameter name='tmp.network-otn.network-id' value=\"`$prop.sdncRestApi.thirdpartySdnc.id + '-' + $tmp.original-network-otn.network-id`\" />\n\n",
        "comments": "",
        "x": 658,
        "y": 144,
        "z": "8966128c.40fc9",
        "wires": []
    },
    {
        "id": "5525a122.db022",
        "type": "set",
        "name": "set local variables",
        "xml": "<set>\n<parameter name='unique-node-otnId' value=\"`'networkId-' + $unique-network-otnId + '-nodeId-' + $node-otn.node-id`\" />\n",
        "comments": "",
        "x": 1544,
        "y": 425,
        "z": "8966128c.40fc9",
        "wires": []
    }
]