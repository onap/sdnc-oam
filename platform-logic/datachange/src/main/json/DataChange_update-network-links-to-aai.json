[
    {
        "id": "ebe56983.0d3a9",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 134,
        "y": 65,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "13e5c84a.55bf3"
            ]
        ]
    },
    {
        "id": "13e5c84a.55bf3",
        "type": "service-logic",
        "name": "DataChange ${project.version}",
        "module": "DataChange",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
        "outputs": 1,
        "x": 191,
        "y": 144.888916015625,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "66a22ecb.fd2f58"
            ]
        ]
    },
    {
        "id": "66a22ecb.fd2f58",
        "type": "method",
        "name": "method update-network-links-to-aai",
        "xml": "<method rpc='update-network-links-to-aai' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 205,
        "y": 221.22222900390625,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "6e3553b1.ce5dcc"
            ]
        ]
    },
    {
        "id": "6e3553b1.ce5dcc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 216.33343505859375,
        "y": 298.7779235839844,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "ce48b85e.94f938"
            ]
        ]
    },
    {
        "id": "a43a6e87.7bb85",
        "type": "update",
        "name": "save logical-link with regular id",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='logical-link' \n      key='logical-link.link-name = $unique-linkId' >\n<parameter name='link-name' value='`$unique-linkId`' />\n<parameter name='link-id' value='`$link.link-id`' />\n<parameter name='link-type' value='`$link.te.te-link-attributes.access-type`' />\n\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1091.111083984375,
        "y": 723.111083984375,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "ce48b85e.94f938",
        "type": "for",
        "name": "for each link",
        "xml": "<for index='pidx' start='0' end='`$network.link_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 244.88885498046875,
        "y": 392.33331298828125,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "dec42fbf.1e3dc8",
                "faf4c2c8.a313e8",
                "6624aa74.606e14",
                "dbc86076.1de4f",
                "4c4fa03a.a50f2"
            ]
        ]
    },
    {
        "id": "dec42fbf.1e3dc8",
        "type": "set",
        "name": "set network link's local variables",
        "xml": "<set>\n<parameter name='link.' value='`$network.link[$pidx].`' />\n<parameter name='unique-networkId' value='`$tmp.network-id`' />\n\n",
        "comments": "",
        "x": 577.111083984375,
        "y": 97.22221374511719,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "9f28786b.9755c",
        "type": "for",
        "name": "for each label-restriction",
        "xml": "<for index='tidx' start='0' end='`$link.te.te-link-attributes.label-restriction_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1617.4444580078125,
        "y": 943.111083984375,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "a10e9de3.90e708",
                "9f6f811c.bccf8",
                "7166bef0.82e4a",
                "c6ea0cbf.fb7cd",
                "441a859d.1c08ec",
                "e1339bff.8f7f98"
            ]
        ]
    },
    {
        "id": "a10e9de3.90e708",
        "type": "set",
        "name": "set label-restriction's local variables",
        "xml": "<set>\n<parameter name='unique-lrId' value=\"`$unique-linkId + '-lrId-' + $label-restriction.index`\" />\n",
        "comments": "",
        "x": 1922.111328125,
        "y": 908.0000610351562,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "481ae7ff.84ac9",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2035.4998779296875,
        "y": 950.74609375,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "4b5e8d4c.a2cfc4"
            ]
        ]
    },
    {
        "id": "958898b9.8616a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2043.178466796875,
        "y": 1009.9604187011719,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "76714a99.5b6304"
            ]
        ]
    },
    {
        "id": "4b5e8d4c.a2cfc4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2196,
        "y": 950.0000305175781,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "1494b149.c9a337",
        "type": "set",
        "name": "set src-ltpId dst-ltpId",
        "xml": "<set>\n<parameter name='src-ltpId' value=\"`'nodeId-' + $oof.vpn.access-node-id + '-ltpId-' + $oof.vpn.src-access-ltp-id`\" />\n<parameter name='dst-ltpId' value=\"`'nodeId-' + $oof.vpn.access-node-id + '-ltpId-' + $oof.vpn.dst-access-ltp-id`\" />",
        "comments": "",
        "x": 2604.5001220703125,
        "y": 2412.545135498047,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "ed0f5687.170a7",
        "type": "save",
        "name": "save srcLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $src-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-ltpId`\" />\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2638.0001220703125,
        "y": 2452.545135498047,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "c964af3.a8439d",
        "type": "save",
        "name": "save dstLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $dst-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$dst-ltpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2638.0001220703125,
        "y": 2492.545135498047,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "76714a99.5b6304",
        "type": "update",
        "name": "save label-restriction",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='label-restriction' \n      key='logical-link.link-name = $unique-linkId\n      AND label-restriction.id = $unique-lrId' >      \n<parameter name='id' value='`$unique-lrId`' />\n<parameter name='label-start' value='`$label-restriction.label-start`' />\n<parameter name='label-end' value='`$label-restriction.label-end`' />\n<parameter name='range-bitmap' value='`$label-restriction.range-bitmap`' />\n<parameter name='label-step' value='`$label-restriction.label-step`' />\n<parameter name='inclusive-exclusive' value='`$label-restriction.inclusive-exclusive`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2227,
        "y": 1010.0000305175781,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "df8f6a30.0e19f",
        "type": "save",
        "name": "save link relationship to label-restriction in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='logical-link:relationship-list' \n      key='logical-link.link-name = $unique-linkId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"label-restriction\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/label-restrictions/label-restriction/' + $unique-lrId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"label-restriction.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-lrId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1938,
        "y": 1206,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "9f6f811c.bccf8",
        "type": "update",
        "name": "save label-restriction",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='label-restriction' \n      key='label-restriction.id = $unique-lrId' >      \n<parameter name='id' value='`$unique-lrId`' />\n<parameter name='label-start' value='`$label-restriction.label-start.te-label-tpn`' />\n<parameter name='label-end' value='`$label-restriction.label-end.te-label-tpn`' />\n<parameter name='range-bitmap' value='`$label-restriction.range-bitmap`' />\n<parameter name='label-step' value='`$label-restriction.label-step`' />\n<parameter name='inclusive-exclusive' value='`$label-restriction.inclusive-exclusive`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1876.815185546875,
        "y": 982.5556640625,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "481ae7ff.84ac9",
                "958898b9.8616a"
            ]
        ]
    },
    {
        "id": "e7971b0b.c3d0c",
        "type": "switchNode",
        "name": "switch te-link-attributes label-restriction_length",
        "xml": "<switch test='`$link.te.te-link-attributes.label-restriction_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1136,
        "y": 943,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "d0a27e5d.161cf",
                "c301ff98.2e6928",
                "4d75dbb8.4d6b04"
            ]
        ]
    },
    {
        "id": "faf4c2c8.a313e8",
        "type": "switchNode",
        "name": "switch link.destination",
        "xml": "<switch test='`$link.destination.dest-node`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 553,
        "y": 202,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "998d07b5.34538",
                "4877c101.9ce65"
            ]
        ]
    },
    {
        "id": "998d07b5.34538",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 757,
        "y": 163,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "c3ced1a5.7034b"
            ]
        ]
    },
    {
        "id": "4877c101.9ce65",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 754,
        "y": 225,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "d4197495.299218"
            ]
        ]
    },
    {
        "id": "d4197495.299218",
        "type": "set",
        "name": "set network link's destination variables",
        "xml": "<set>\n<parameter name='dst-tpId' value=\"`'networkId-' + $unique-networkId + '-nodeId-' + $link.destination.dest-node + '-ltpId-' + $link.destination.dest-tp`\" />\n<parameter name='unique-dst-node-Id' value=\"`'networkId-' + $unique-networkId + '-nodeId-' + $link.destination.dest-node`\" />\n<parameter name='is-open-ended-link' value='false' />\n\n",
        "comments": "",
        "x": 983,
        "y": 188,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "c382f34.d97691",
        "type": "set",
        "name": "set is-open-ended-link",
        "xml": "<set>\n<parameter name='is-open-ended-link' value='true' />\n\n",
        "comments": "",
        "x": 1161,
        "y": 63,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "ff450949.dbf658",
        "type": "save",
        "name": "get p-interface from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $unique-src-node-Id\n\t        and p-interface.interface-name = $src-tpId\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.p-interface\" >",
        "comments": "",
        "outputs": 1,
        "x": 1164,
        "y": 148,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "5da3043a.2acbac",
                "1bf53d3.d439ac3",
                "8f4faa5b.7a92c"
            ]
        ]
    },
    {
        "id": "5da3043a.2acbac",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1407,
        "y": 143,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "ce061615.442fb"
            ]
        ]
    },
    {
        "id": "1bf53d3.d439ac3",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1405,
        "y": 232,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "8dce7fe6.cbf1f"
            ]
        ]
    },
    {
        "id": "863e663a.20d8f8",
        "type": "set",
        "name": "set alternative unique link id",
        "xml": "<set>\n<parameter name='alt-unique-linkId' value=\"`$tmp.aai.p-interface.inter-domain-plug-id`\" />\n<!--<parameter name='alt-unique-linkId' value=\"`'networkId-' + $unique-networkId + '-linkId-' + $tmp.aai.p-interface.inter-domain-plug-id`\" />-->\n\n",
        "comments": "",
        "x": 2080,
        "y": 160,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "8dce7fe6.cbf1f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1574,
        "y": 233,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "2b1dcd15.312222",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\t    key=\"logical-link.link-name = $alt-unique-linkId\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.logical-link\" >",
        "comments": "",
        "outputs": 1,
        "x": 872,
        "y": 669,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "ec693039.84dc28",
                "3de532fd.f494f6"
            ]
        ]
    },
    {
        "id": "8f4faa5b.7a92c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1416.490966796875,
        "y": 185.57403564453125,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "788cf8a5.93c298"
            ]
        ]
    },
    {
        "id": "788cf8a5.93c298",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1570.0623779296875,
        "y": 188.85977172851562,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "98f67a1e.d79eb",
        "type": "switchNode",
        "name": "switch is-open-ended-link",
        "xml": "<switch test='`$is-open-ended-link`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 451,
        "y": 708,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "6cd18165.d49da8",
                "a4b87205.849aa"
            ]
        ]
    },
    {
        "id": "6cd18165.d49da8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 668,
        "y": 730,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "6eb10efe.79be58"
            ]
        ]
    },
    {
        "id": "a4b87205.849aa",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 671,
        "y": 670,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "2b1dcd15.312222"
            ]
        ]
    },
    {
        "id": "ec693039.84dc28",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1116,
        "y": 339,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "7e014e1e.a8dd8"
            ]
        ]
    },
    {
        "id": "3de532fd.f494f6",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1141.490966796875,
        "y": 534.5740356445312,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "308dc22b.73a67e"
            ]
        ]
    },
    {
        "id": "2e5d2820.63e8c",
        "type": "update",
        "name": "save logical-link with alternative link id",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='logical-link' \n      key='logical-link.link-name = $alt-unique-linkId' >\n<parameter name='link-name' value='`$alt-unique-linkId`' />\n<parameter name='link-id' value='`$link.link-id`' />\n<parameter name='link-type' value='`$link.te.te-link-attributes.access-type`' />\n<parameter name='link-role' value='cross-domain' />\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1613,
        "y": 556,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "6eb10efe.79be58",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 846,
        "y": 738,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "a43a6e87.7bb85",
                "e7971b0b.c3d0c",
                "a6b6ae44.7eb2a8",
                "370b414a.4eba76",
                "4aadddbd.521a8c"
            ]
        ]
    },
    {
        "id": "521f891d.91cfc8",
        "type": "save",
        "name": "update dest TP by putting src TP of the current link",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='logical-link:relationship-list' \n      key='logical-link.link-name = $alt-unique-linkId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-src-node-Id + '/p-interfaces/p-interface/' + $src-tpId`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-tpId`\" />-->\n\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-src-node-Id + '/p-interfaces/p-interface/' + $src-tpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-tpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2527,
        "y": 385,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "27e614a8.33d2f4",
                "5b692078.dcecc"
            ]
        ]
    },
    {
        "id": "6468635a.9e6d94",
        "type": "save",
        "name": "save source and dest TP",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='logical-link:relationship-list' \n      key='logical-link.link-name = $unique-linkId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-src-node-Id + '/p-interfaces/p-interface/' + $src-tpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-tpId`\" />\n\n<parameter name=\"relationship-list.relationship[1].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[1].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-dst-node-Id + '/p-interfaces/p-interface/' + $dst-tpId`\" />\n<parameter name=\"relationship-list.relationship[1].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[1].relationship-data[0].relationship-value\" value=\"`$dst-tpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1076,
        "y": 1177,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "c3ced1a5.7034b",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 945,
        "y": 124,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "c382f34.d97691",
                "ff450949.dbf658",
                "b85c23da.8517d"
            ]
        ]
    },
    {
        "id": "308dc22b.73a67e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1330,
        "y": 537,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "2e5d2820.63e8c",
                "3996c800.afa0a8",
                "d3a8ab71.fccb7",
                "6c137df8.722b8c"
            ]
        ]
    },
    {
        "id": "3996c800.afa0a8",
        "type": "save",
        "name": "save source only",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='logical-link:relationship-list' \n      key='logical-link.link-name = $alt-unique-linkId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-src-node-Id + '/p-interfaces/p-interface/' + $src-tpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-tpId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1542,
        "y": 617,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "51ef22a.000c3dc",
        "type": "for",
        "name": "for each label-restriction",
        "xml": "<for index='tidx' start='0' end='`$link.te.te-link-attributes.label-restriction_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2069,
        "y": 743,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "cb31166c.2edd2",
                "db1f7d98.2def68",
                "c4dd69cd.d872b",
                "f581a4e4.841408",
                "f2fac409.beeaf8",
                "ea1f1d76.87207"
            ]
        ]
    },
    {
        "id": "cb31166c.2edd2",
        "type": "set",
        "name": "set label-restriction's local variables",
        "xml": "<set>\n<parameter name='label-restriction.' value='`$link.te.te-link-attributes.label-restriction[$tidx].`' />\n",
        "comments": "",
        "x": 2359.6669921875,
        "y": 621.8889770507812,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "1dcb5e38.622da2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2501.0555419921875,
        "y": 700.635009765625,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "2526017c.1c252e"
            ]
        ]
    },
    {
        "id": "19906550.30ac83",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2508.734130859375,
        "y": 759.8493347167969,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "52d0ed95.142f34"
            ]
        ]
    },
    {
        "id": "2526017c.1c252e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2661.5556640625,
        "y": 699.8889465332031,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "52d0ed95.142f34",
        "type": "update",
        "name": "save label-restriction",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='label-restriction' \n      key='logical-link.link-name = $alt-unique-linkId\n      AND label-restriction.id = $unique-lrId' >      \n<parameter name='id' value='`$unique-lrId`' />\n<parameter name='label-start' value='`$label-restriction.label-start`' />\n<parameter name='label-end' value='`$label-restriction.label-end`' />\n<parameter name='range-bitmap' value='`$label-restriction.range-bitmap`' />\n<parameter name='label-step' value='`$label-restriction.label-step`' />\n<parameter name='inclusive-exclusive' value='`$label-restriction.inclusive-exclusive`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2692.5556640625,
        "y": 759.8889465332031,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "e7979ea6.dbce4",
        "type": "save",
        "name": "save link relationship to label-restriction in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='logical-link:relationship-list' \n      key='logical-link.link-name = $alt-unique-linkId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"label-restriction\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/label-restrictions/label-restriction/' + $unique-lrId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"label-restriction.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-lrId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2368.5556640625,
        "y": 892.888916015625,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "db1f7d98.2def68",
        "type": "update",
        "name": "save label-restriction",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='label-restriction' \n      key='label-restriction.id = $unique-lrId' >      \n<parameter name='id' value='`$unique-lrId`' />\n<parameter name='label-start' value='`$label-restriction.label-start.te-label-tpn`' />\n<parameter name='label-end' value='`$label-restriction.label-end.te-label-tpn`' />\n<parameter name='range-bitmap' value='`$label-restriction.range-bitmap`' />\n<parameter name='label-step' value='`$label-restriction.label-step`' />\n<parameter name='inclusive-exclusive' value='`$label-restriction.inclusive-exclusive`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 2310.370849609375,
        "y": 732.444580078125,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "1dcb5e38.622da2",
                "19906550.30ac83"
            ]
        ]
    },
    {
        "id": "6624aa74.606e14",
        "type": "set",
        "name": "set more local variables",
        "xml": "<set>\n<parameter name='unique-linkId' value=\"`'networkId-' + $unique-networkId + '-linkId-' + $link.link-id`\" />\n<parameter name='src-tpId' value=\"`'networkId-' + $unique-networkId + '-nodeId-' + $link.source.source-node + '-ltpId-' + $link.source.source-tp`\" />\n<parameter name='unique-src-node-Id' value=\"`'networkId-' + $unique-networkId + '-nodeId-' + $link.source.source-node`\" />\n",
        "comments": "",
        "x": 554,
        "y": 147,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "6e337c6f.cd362c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1496,
        "y": 60,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "ce061615.442fb",
        "type": "switchNode",
        "name": "switch inter-domain-plug-id of the src tp",
        "xml": "<switch test='`$tmp.aai.p-interface.inter-domain-plug-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1646,
        "y": 140,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "a445a8a1.87665",
                "7abf5d27.d789e4"
            ]
        ]
    },
    {
        "id": "a445a8a1.87665",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1876,
        "y": 87,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "85dfc9e9.b205a8"
            ]
        ]
    },
    {
        "id": "7abf5d27.d789e4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1880,
        "y": 160,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "863e663a.20d8f8"
            ]
        ]
    },
    {
        "id": "85dfc9e9.b205a8",
        "type": "set",
        "name": "unset is-open-ended-link",
        "xml": "<set>\n<parameter name='is-open-ended-link' value='false' />\n<parameter name='is-invalid-open-ended-link' value='true' />\n\n",
        "comments": "",
        "x": 2064,
        "y": 83,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "5df859b8.6bf788",
        "type": "save",
        "name": "delete logical-link",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\" \n\tkey=\"logical-link.link-name = $tmp.link-name\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2045,
        "y": 32,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "dbc86076.1de4f",
        "type": "set",
        "name": "unset network link's local variables",
        "xml": "<set>\n<parameter name='link.' value='' />\n<parameter name='dst-tpId' value='' />\n<parameter name='unique-dst-node-Id' value='' />\n<parameter name='is-open-ended-link' value='false' />\n<parameter name='is-invalid-open-ended-link' value='false' />\n\n",
        "comments": "",
        "x": 582,
        "y": 39,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "5be7d94e.325bd",
        "type": "switchNode",
        "name": "switch is-invalid-open-ended-link",
        "xml": "<switch test='`$is-invalid-open-ended-link`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 672,
        "y": 1155,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "3a021903.aa35de",
                "bd6a87fb.60cad"
            ]
        ]
    },
    {
        "id": "bd6a87fb.60cad",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 879,
        "y": 1123,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "7d536275.1f7f6c"
            ]
        ]
    },
    {
        "id": "3a021903.aa35de",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 876,
        "y": 1183,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "6468635a.9e6d94"
            ]
        ]
    },
    {
        "id": "7d536275.1f7f6c",
        "type": "save",
        "name": "save source only",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='logical-link:relationship-list' \n      key='logical-link.link-name = $unique-linkId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-src-node-Id + '/p-interfaces/p-interface/' + $src-tpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-tpId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1059,
        "y": 1122,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "c290c25a.9cb058",
        "type": "switchNode",
        "name": "switch relationship-list_length",
        "xml": "<switch test='`$tmp.aai.logical-link.relationship-list_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1388,
        "y": 312,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "8171cd76.e9b4d",
                "9c1be6a.eb1c998",
                "be2751bf.fc2318"
            ]
        ]
    },
    {
        "id": "8ea0dfd0.e04d5",
        "type": "switchNode",
        "name": "switch relationship-list_length != $src-tpId",
        "xml": "<switch test='`$tmp.aai.logical-link.relationship-list.relationship[0].relationship-data[1].relationship-value != $src-tpId`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1839,
        "y": 326,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "f6fe2af1.32bcd"
            ]
        ]
    },
    {
        "id": "8171cd76.e9b4d",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1606,
        "y": 271,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "6d799180.26117"
            ]
        ]
    },
    {
        "id": "9c1be6a.eb1c998",
        "type": "outcome",
        "name": "1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1603,
        "y": 308,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "8ea0dfd0.e04d5"
            ]
        ]
    },
    {
        "id": "be2751bf.fc2318",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1613,
        "y": 382,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "a1d91cb.fcaede"
            ]
        ]
    },
    {
        "id": "a1d91cb.fcaede",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1750,
        "y": 383,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "9a538487.c08aa"
            ]
        ]
    },
    {
        "id": "6d799180.26117",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1748,
        "y": 279,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "92abbd48.ac3ab"
            ]
        ]
    },
    {
        "id": "4c4fa03a.a50f2",
        "type": "switchNode",
        "name": "switch is-invalid-open-ended-link",
        "xml": "<switch test='`$is-invalid-open-ended-link`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 449,
        "y": 536,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "7a803037.7fbd88",
                "a043c19c.e11a18"
            ]
        ]
    },
    {
        "id": "a043c19c.e11a18",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 656,
        "y": 504,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "2aea0930.46cd5e"
            ]
        ]
    },
    {
        "id": "7a803037.7fbd88",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 653,
        "y": 564,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "98f67a1e.d79eb"
            ]
        ]
    },
    {
        "id": "2aea0930.46cd5e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 807,
        "y": 504,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "a6b6ae44.7eb2a8",
        "type": "save",
        "name": "save source and dest TP",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='logical-link:relationship-list' \n      key='logical-link.link-name = $unique-linkId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-src-node-Id + '/p-interfaces/p-interface/' + $src-tpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-tpId`\" />\n\n<parameter name=\"relationship-list.relationship[1].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[1].related-link\" value=\"`'/network/pnfs/pnf/' + $unique-dst-node-Id + '/p-interfaces/p-interface/' + $dst-tpId`\" />\n<parameter name=\"relationship-list.relationship[1].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[1].relationship-data[0].relationship-value\" value=\"`$dst-tpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1074,
        "y": 826,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "f6fe2af1.32bcd",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2086,
        "y": 317,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "370b414a.4eba76",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logTopologyDiscovery.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"uniqueLinkId\" />\n    <parameter name=\"field3\" value=\"`$unique-linkId`\" />\n    <parameter name=\"field4\" value=\"srcTpId\" />\n    <parameter name=\"field5\" value=\"`$src-tpId`\" />\n    <parameter name=\"field6\" value=\"dstTpId\" />\n    <parameter name=\"field7\" value=\"`$dst-tpId`\" />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 1019,
        "y": 771,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "b85c23da.8517d",
        "type": "set",
        "name": "unset tmp.aai.p-interface",
        "xml": "<set>\n<parameter name='tmp.aai.p-interface' value='' />\n<parameter name='tmp.aai.p-interface.inter-domain-plug-id' value='' />\n\n",
        "comments": "",
        "x": 1162,
        "y": 101,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "e0d728fb.03e448",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logMerge.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"altUniqueLinkId\" />\n    <parameter name=\"field3\" value=\"`$alt-unique-linkId`\" />\n    <parameter name=\"field4\" value=\"srcTpId\" />\n    <parameter name=\"field5\" value=\"`$src-tpId`\" />\n    <parameter name=\"field6\" value=\"relationship-value\" />\n    <parameter name=\"field7\" value='`$tmp.aai.logical-link.relationship-list.relationship[0].relationship-data[1].relationship-value`' />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 2402,
        "y": 289,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "7e014e1e.a8dd8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2078,
        "y": 534,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "e0d728fb.03e448",
                "521f891d.91cfc8",
                "cedaeaf5.78fef8",
                "740002f8.4aedac"
            ]
        ]
    },
    {
        "id": "27e614a8.33d2f4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2816,
        "y": 355,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "c5f6a36b.0845d8"
            ]
        ]
    },
    {
        "id": "5b692078.dcecc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2823.6785888671875,
        "y": 414.2143249511719,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "b2044c9b.8096a"
            ]
        ]
    },
    {
        "id": "c5f6a36b.0845d8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2964,
        "y": 350,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "ad2b40a6.ff37f8"
            ]
        ]
    },
    {
        "id": "ad2b40a6.ff37f8",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logMergeSuccess.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"altUniqueLinkId\" />\n    <parameter name=\"field3\" value=\"`$alt-unique-linkId`\" />\n    <parameter name=\"field4\" value=\"srcTpId\" />\n    <parameter name=\"field5\" value=\"`$src-tpId`\" />\n    <parameter name=\"field6\" value=\"relationship-value\" />\n    <parameter name=\"field7\" value='`$tmp.aai.logical-link.relationship-list.relationship[0].relationship-data[1].relationship-value`' />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 3109,
        "y": 350,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "b2044c9b.8096a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2971,
        "y": 412,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "a8dbf2db.72f548"
            ]
        ]
    },
    {
        "id": "92abbd48.ac3ab",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logNoRelationship.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"noRelationshipForLink:\" />\n    <parameter name=\"field3\" value=\"`$tmp.aai.logical-link.link-name`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1884,
        "y": 277,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "9a538487.c08aa",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logNoRelationship.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"moreThanOneRelationshipForLink:\" />\n    <parameter name=\"field3\" value=\"`$tmp.aai.logical-link.link-name`\" />\n    <parameter name=\"field4\" value=\"HowMany:\" />\n    <parameter name=\"field5\" value=\"`$tmp.aai.logical-link.relationship-list_length`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1895,
        "y": 392,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "a8dbf2db.72f548",
        "type": "record",
        "name": "log file",
        "xml": " <record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n    <parameter name=\"file\" value=\"/opt/onap/logMergeFailure.txt\" />\n    <parameter name=\"field1\" value=\"__TIMESTAMP__\" />\n    <parameter name=\"field2\" value=\"altUniqueLinkId\" />\n    <parameter name=\"field3\" value=\"`$alt-unique-linkId`\" />\n    <parameter name=\"field4\" value=\"srcTpId\" />\n    <parameter name=\"field5\" value=\"`$src-tpId`\" />\n    <parameter name=\"field6\" value=\"relationship-value\" />\n    <parameter name=\"field7\" value='`$tmp.aai.logical-link.relationship-list.relationship[0].relationship-data[1].relationship-value`' />\n    ",
        "comments": "",
        "outputs": 1,
        "x": 3116,
        "y": 412,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "d0a27e5d.161cf",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1430,
        "y": 841,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "53c3433b.ea3fa4"
            ]
        ]
    },
    {
        "id": "c301ff98.2e6928",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1432,
        "y": 889,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "53c3433b.ea3fa4"
            ]
        ]
    },
    {
        "id": "4d75dbb8.4d6b04",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1429,
        "y": 943,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "9f28786b.9755c"
            ]
        ]
    },
    {
        "id": "53c3433b.ea3fa4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1585,
        "y": 841,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "d3a8ab71.fccb7",
        "type": "switchNode",
        "name": "switch te-link-attributes label-restriction_length",
        "xml": "<switch test='`$link.te.te-link-attributes.label-restriction_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1611,
        "y": 734,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "d2a47af.0c53388",
                "6ac8d49a.12d694",
                "7da4e2ad.ccfb34"
            ]
        ]
    },
    {
        "id": "d2a47af.0c53388",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1883,
        "y": 644,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "70211305.a9bd74"
            ]
        ]
    },
    {
        "id": "70211305.a9bd74",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2038,
        "y": 644,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "6ac8d49a.12d694",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1885,
        "y": 692,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "70211305.a9bd74"
            ]
        ]
    },
    {
        "id": "7da4e2ad.ccfb34",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1884,
        "y": 743,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "51ef22a.000c3dc"
            ]
        ]
    },
    {
        "id": "c4dd69cd.d872b",
        "type": "set",
        "name": "unset label-restriction's local variables",
        "xml": "<set>\n<parameter name='label-restriction.' value='' />\n<parameter name='unique-lrId' value=\"\" />\n",
        "comments": "",
        "x": 2365,
        "y": 570,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "7166bef0.82e4a",
        "type": "set",
        "name": "unset label-restriction's local variables",
        "xml": "<set>\n<parameter name='label-restriction.' value='' />\n<parameter name='unique-lrId' value=\"\" />\n",
        "comments": "",
        "x": 1919,
        "y": 797,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "cedaeaf5.78fef8",
        "type": "switchNode",
        "name": "switch te-link-attributes label-restriction_length",
        "xml": "<switch test='`$link.te.te-link-attributes.label-restriction_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2703,
        "y": 521,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "e2267c99.350348",
                "3e0a9900.cec47e",
                "ab55b067.791f5"
            ]
        ]
    },
    {
        "id": "e2267c99.350348",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 2973,
        "y": 483,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "8e66b008.2f7c48"
            ]
        ]
    },
    {
        "id": "8e66b008.2f7c48",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3128,
        "y": 483,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "3e0a9900.cec47e",
        "type": "outcome",
        "name": "length 0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2975,
        "y": 531,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "8e66b008.2f7c48"
            ]
        ]
    },
    {
        "id": "ab55b067.791f5",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2974,
        "y": 582,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "ef26b767.51cb"
            ]
        ]
    },
    {
        "id": "ef26b767.51cb",
        "type": "for",
        "name": "for each label-restriction",
        "xml": "<for index='tidx' start='0' end='`$link.te.te-link-attributes.label-restriction_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3159,
        "y": 582,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "1e98f683.1aa1c9",
                "fb05e52d.520ed8",
                "d6c4c7a0.0d9e8",
                "c76088aa.f470c8",
                "4bfdac8d.42ab7c",
                "fab9bbde.d7c01"
            ]
        ]
    },
    {
        "id": "d6c4c7a0.0d9e8",
        "type": "set",
        "name": "unset label-restriction's local variables",
        "xml": "<set>\n<parameter name='label-restriction.' value='' />\n<parameter name='unique-lrId' value=\"\" />\n",
        "comments": "",
        "x": 3457,
        "y": 397,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "1e98f683.1aa1c9",
        "type": "set",
        "name": "set label-restriction's local variables",
        "xml": "<set>\n<parameter name='label-restriction.' value='`$link.te.te-link-attributes.label-restriction[$tidx].`' />\n",
        "comments": "",
        "x": 3446.6669921875,
        "y": 443.88897705078125,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "fb05e52d.520ed8",
        "type": "update",
        "name": "save label-restriction",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='label-restriction' \n      key='label-restriction.id = $unique-lrId' >      \n<parameter name='id' value='`$unique-lrId`' />\n<parameter name='label-start' value='`$label-restriction.label-start.te-label-tpn`' />\n<parameter name='label-end' value='`$label-restriction.label-end.te-label-tpn`' />\n<parameter name='range-bitmap' value='`$label-restriction.range-bitmap`' />\n<parameter name='label-step' value='`$label-restriction.label-step`' />\n<parameter name='inclusive-exclusive' value='`$label-restriction.inclusive-exclusive`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3400.370849609375,
        "y": 571.444580078125,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "d9005ccd.b320e8",
                "c6b7c3e3.521e98"
            ]
        ]
    },
    {
        "id": "9c6aaa8e.65077",
        "type": "save",
        "name": "save link relationship to label-restriction in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='logical-link:relationship-list' \n      key='logical-link.link-name = $alt-unique-linkId' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"label-restriction\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/label-restrictions/label-restriction/' + $unique-lrId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"label-restriction.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-lrId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3474.5556640625,
        "y": 755.888916015625,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "d9005ccd.b320e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3591.0555419921875,
        "y": 539.635009765625,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "85dd0f0d.ac434"
            ]
        ]
    },
    {
        "id": "c6b7c3e3.521e98",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3598.734130859375,
        "y": 598.8493347167969,
        "z": "3cbec5d5.54ea02",
        "wires": [
            [
                "d138a600.db5b8"
            ]
        ]
    },
    {
        "id": "85dd0f0d.ac434",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3751.5556640625,
        "y": 538.8889465332031,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "d138a600.db5b8",
        "type": "update",
        "name": "save label-restriction",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='label-restriction' \n      key='label-restriction.id = $unique-lrId' >      \n<parameter name='id' value='`$unique-lrId`' />\n<parameter name='label-start' value='`$label-restriction.label-start.te-label-tpn`' />\n<parameter name='label-end' value='`$label-restriction.label-end.te-label-tpn`' />\n<parameter name='range-bitmap' value='`$label-restriction.range-bitmap`' />\n<parameter name='label-step' value='`$label-restriction.label-step`' />\n<parameter name='inclusive-exclusive' value='`$label-restriction.inclusive-exclusive`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3782.5556640625,
        "y": 598.8889465332031,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "c76088aa.f470c8",
        "type": "set",
        "name": "set label-restriction's local variables",
        "xml": "<set>\n<parameter name='unique-lrId' value=\"`$alt-unique-linkId + '-lrId-' + $label-restriction.index`\" />\n",
        "comments": "",
        "x": 3447,
        "y": 493,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "f581a4e4.841408",
        "type": "set",
        "name": "set label-restriction's local variables",
        "xml": "<set>\n<parameter name='unique-lrId' value=\"`$alt-unique-linkId + '-lrId-' + $label-restriction.index`\" />\n",
        "comments": "",
        "x": 2361,
        "y": 662,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "c6ea0cbf.fb7cd",
        "type": "set",
        "name": "set label-restriction's local variables",
        "xml": "<set>\n<parameter name='label-restriction.' value='`$link.te.te-link-attributes.label-restriction[$tidx].`' />\n",
        "comments": "",
        "x": 1916,
        "y": 849,
        "z": "3cbec5d5.54ea02",
        "wires": []
    },
    {
        "id": "4aadddbd.521a8c",
        "type": "update",
        "name": "save te-link-attribute",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='te-link-attribute' \n      key='te-link-attribute.id = $link.te.te-link-attributes.name' >      \n<parameter name='id' value='`$link.te.te-link-attributes.name`' />\n<parameter name='access-type' value='`$link.te.te-link-attributes.access-type`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1057,
        "y": 871,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "e1339bff.8f7f98",
        "type": "save",
        "name": "save te-link-attribute relationship to label-restriction",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='te-link-attribute:relationship-list' \n      key='te-link-attribute.id = $link.te.te-link-attributes.name' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"label-restriction\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/label-restrictions/label-restriction/' + $unique-lrId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"label-restriction.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-lrId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1948,
        "y": 1140,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "441a859d.1c08ec",
        "type": "save",
        "name": "save te-link-attribute relationship to logical-link in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='te-link-attribute:relationship-list' \n      key='te-link-attribute.id = $link.te.te-link-attributes.name' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"logical-link\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/logical-links/logical-link/' + $unique-linkId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"logical-link.link-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-linkId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1957,
        "y": 1080,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "6c137df8.722b8c",
        "type": "update",
        "name": "save te-link-attribute",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='te-link-attribute' \n      key='te-link-attribute.id = $link.te.te-link-attributes.name' >      \n<parameter name='id' value='`$link.te.te-link-attributes.name`' />\n<parameter name='access-type' value='`$link.te.te-link-attributes.access-type`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1548,
        "y": 669,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "740002f8.4aedac",
        "type": "update",
        "name": "update te-link-attribute",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='te-link-attribute' \n      key='te-link-attribute.id = $link.te.te-link-attributes.name' >      \n<parameter name='id' value='`$link.te.te-link-attributes.name`' />\n<parameter name='access-type' value='`$link.te.te-link-attributes.access-type`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2428,
        "y": 454,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "f2fac409.beeaf8",
        "type": "save",
        "name": "save te-link-attribute relationship to logical-link in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='te-link-attribute:relationship-list' \n      key='te-link-attribute.id = $link.te.te-link-attributes.name' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"logical-link\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/logical-links/logical-link/' + $alt-unique-linkId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"logical-link.link-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$alt-unique-linkId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2393,
        "y": 800,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "ea1f1d76.87207",
        "type": "save",
        "name": "save te-link-attribute relationship to label-restriction",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='te-link-attribute:relationship-list' \n      key='te-link-attribute.id = $link.te.te-link-attributes.name' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"label-restriction\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/label-restrictions/label-restriction/' + $unique-lrId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"label-restriction.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-lrId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2386,
        "y": 846,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "fab9bbde.d7c01",
        "type": "save",
        "name": "save te-link-attribute relationship to label-restriction",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='te-link-attribute:relationship-list' \n      key='te-link-attribute.id = $link.te.te-link-attributes.name' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"label-restriction\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/label-restrictions/label-restriction/' + $unique-lrId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"label-restriction.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$unique-lrId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3483,
        "y": 698,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    },
    {
        "id": "4bfdac8d.42ab7c",
        "type": "save",
        "name": "save te-link-attribute relationship to logical-link in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='te-link-attribute:relationship-list' \n      key='te-link-attribute.id = $link.te.te-link-attributes.name' force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"logical-link\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/logical-links/logical-link/' + $alt-unique-linkId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"logical-link.link-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$alt-unique-linkId`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3490,
        "y": 652,
        "z": "3cbec5d5.54ea02",
        "wires": [
            []
        ]
    }
]