[
    {
        "id": "66d82769.1d01a8",
        "type": "other",
        "name": "update",
        "xml": "<outcome value='Update'>\n",
        "comments": "",
        "outputs": 1,
        "x": 739,
        "y": 271,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "ae6185fd.f9c2d8"
            ]
        ]
    },
    {
        "id": "3efeb782.bfc1",
        "type": "other",
        "name": "delete",
        "xml": "<outcome value='Delete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 739,
        "y": 351,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "a1ab5058.aebdf"
            ]
        ]
    },
    {
        "id": "a1ab5058.aebdf",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 880.5,
        "y": 351,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "fb3f26da.0ae3f8"
            ]
        ]
    },
    {
        "id": "22ce6fbc.3616d",
        "type": "switchNode",
        "name": "switch aai-event-trigger",
        "xml": "<switch test=\"`$data-change-notification-input.aai-event-trigger`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 569.5,
        "y": 311,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "66d82769.1d01a8",
                "3efeb782.bfc1"
            ]
        ]
    },
    {
        "id": "8b8fad8f.084508",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1266.5,
        "y": 182,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "cb379294.cf5aa8",
                "43fea2be.adabc4",
                "4f03377f.b0c4c8",
                "590ac352.e76a14",
                "80b5f8f0.c85808"
            ]
        ]
    },
    {
        "id": "43fea2be.adabc4",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1539.5001983642578,
        "y": 103.00000953674316,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "1315a46.1a747dc",
                "5b12ff34.641e88"
            ]
        ]
    },
    {
        "id": "1315a46.1a747dc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1829.000244140625,
        "y": 95,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "396d79e7.1bf7ce"
            ]
        ]
    },
    {
        "id": "5b12ff34.641e88",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1825.000244140625,
        "y": 135,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "20884b0c.6135fc"
            ]
        ]
    },
    {
        "id": "396d79e7.1bf7ce",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 1979.500244140625,
        "y": 95,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "794a42a5.7ff634",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2046.500244140625,
        "y": 215,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "38377ff8.a67d2",
                "b0153eb4.a0abb"
            ]
        ]
    },
    {
        "id": "38377ff8.a67d2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2289.000244140625,
        "y": 235,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "1c21d3a8.a908bc"
            ]
        ]
    },
    {
        "id": "1c21d3a8.a908bc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2446.500244140625,
        "y": 235,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "6ecea195.591998",
                "10fd3c36.34f02c"
            ]
        ]
    },
    {
        "id": "e2c46cc9.208aa",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 2423.000244140625,
        "y": 135,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "b0153eb4.a0abb",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2285.000244140625,
        "y": 135,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "e2c46cc9.208aa"
            ]
        ]
    },
    {
        "id": "8bce8e2f.0d81e8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 192,
        "y": 46,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "75e87f6c.a6d9e"
            ]
        ]
    },
    {
        "id": "75e87f6c.a6d9e",
        "type": "service-logic",
        "name": "DataChange ${project.version}",
        "module": "DataChange",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
        "outputs": 1,
        "x": 205,
        "y": 106,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "11c7e938.bc92c7"
            ]
        ]
    },
    {
        "id": "11c7e938.bc92c7",
        "type": "method",
        "name": "method esr-thirdparty-sdnc-discovery",
        "xml": "<method rpc='esr-thirdparty-sdnc-discovery' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 225,
        "y": 186,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "e3374842.e3f818"
            ]
        ]
    },
    {
        "id": "e3374842.e3f818",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 472.5,
        "y": 186,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "f09b5855.16ea9"
            ]
        ]
    },
    {
        "id": "6ecea195.591998",
        "type": "for",
        "name": "for each Network",
        "xml": "<for index='nidx' start='0' end='`$topology.networks.network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2665.500244140625,
        "y": 164,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "6ca8b7e7.59b19"
            ]
        ]
    },
    {
        "id": "6ca8b7e7.59b19",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2814.000244140625,
        "y": 164,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "43a0eef1.e5c518",
                "e94a8c36.a2247",
                "92aeb11c.309eb8"
            ]
        ]
    },
    {
        "id": "43a0eef1.e5c518",
        "type": "call",
        "name": "call update-network-to-aai",
        "xml": "<call module='DataChange' rpc='update-network-to-aai' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2993.000244140625,
        "y": 184,
        "z": "dc90116d.356cd8",
        "wires": [
            []
        ]
    },
    {
        "id": "e94a8c36.a2247",
        "type": "set",
        "name": "set network",
        "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$nidx].`' />\n",
        "comments": "",
        "x": 2946.000244140625,
        "y": 144,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "20884b0c.6135fc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1945.000244140625,
        "y": 135,
        "z": "dc90116d.356cd8",
        "wires": [
            []
        ]
    },
    {
        "id": "62ce2665.d3bbc",
        "type": "comment",
        "name": "Do Nothing",
        "info": "",
        "comments": "",
        "x": 2115.000244140625,
        "y": 175,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "c35780c2.b517a8",
        "type": "switchNode",
        "name": "switch type",
        "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 992,
        "y": 271,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "4be7af0d.179fe8",
                "9d611449.5dcd4",
                "88a47a49.6947f",
                "c116943.cd1a8e8"
            ]
        ]
    },
    {
        "id": "ae6185fd.f9c2d8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 859,
        "y": 271,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "c35780c2.b517a8"
            ]
        ]
    },
    {
        "id": "4be7af0d.179fe8",
        "type": "other",
        "name": "WAN",
        "xml": "<outcome value='WAN'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1105,
        "y": 182,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "8b8fad8f.084508"
            ]
        ]
    },
    {
        "id": "9d611449.5dcd4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1134.5,
        "y": 643.5001220703125,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "8a5453eb.ab4e28"
            ]
        ]
    },
    {
        "id": "8a5453eb.ab4e28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n",
        "comments": "",
        "x": 1320.75,
        "y": 669.5001220703125,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "cb379294.cf5aa8",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1486.0001983642578,
        "y": 63.000009536743164,
        "z": "dc90116d.356cd8",
        "wires": [
            []
        ]
    },
    {
        "id": "4f03377f.b0c4c8",
        "type": "switchNode",
        "name": "switch prop.sdncRestApi.token_id",
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1532.5001983642578,
        "y": 183.00000953674316,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "e2260a6c.d9a708",
                "536e3c2c.29577c"
            ]
        ]
    },
    {
        "id": "e2260a6c.d9a708",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1825.000244140625,
        "y": 175,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "9626e71e.38aeb8"
            ]
        ]
    },
    {
        "id": "536e3c2c.29577c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1825.000244140625,
        "y": 215,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "794a42a5.7ff634"
            ]
        ]
    },
    {
        "id": "9626e71e.38aeb8",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2046.500244140625,
        "y": 175,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "b0153eb4.a0abb",
                "38377ff8.a67d2"
            ]
        ]
    },
    {
        "id": "80b5f8f0.c85808",
        "type": "execute",
        "name": "execute RestconfDiscoveryNode",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='establishSubscription' >\n<parameter name=\"subscriberId\" value=\"sotn-controller\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/operations/ietf-subscribed-notifications:establish-subscription'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"sseConnectURL\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/streams/yang-push-json'`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"post\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n<parameter name=\"module\" value=\"DataChange\" />\n<parameter name=\"rpc\" value=\"sotn-notification-handler\" />\n<parameter name=\"mode\" value=\"sync\" />",
        "comments": "",
        "outputs": 1,
        "x": 1529.0001983642578,
        "y": 323.00000953674316,
        "z": "dc90116d.356cd8",
        "wires": [
            []
        ]
    },
    {
        "id": "590ac352.e76a14",
        "type": "set",
        "name": "set encoding-format",
        "xml": "<set>\n<parameter name='input' value='ietf-subscribed-notifications:establish-subscription.input.' />\n<parameter name=\"`$input + 'encoding'`\" value=\"encode-json\" />",
        "comments": "",
        "x": 1489.0001983642578,
        "y": 283.00000953674316,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "50fcae42.2c2a8",
        "type": "comment",
        "name": "Notification subscription",
        "info": "",
        "comments": "",
        "x": 1494.000343322754,
        "y": 240.00000858306885,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "f09b5855.16ea9",
        "type": "switchNode",
        "name": "switch",
        "xml": "<switch test=\"`$prop.sdncRestApi.vendor == 'ZTE'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 179,
        "y": 311,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "bf78bf6d.9dbf38",
                "2804a0b9.d69f28"
            ]
        ]
    },
    {
        "id": "bf78bf6d.9dbf38",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 366,
        "y": 311,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "22ce6fbc.3616d"
            ]
        ]
    },
    {
        "id": "2804a0b9.d69f28",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 140.00003051757812,
        "y": 1067.75,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "53ab0ac2.38d284"
            ]
        ]
    },
    {
        "id": "53ab0ac2.38d284",
        "type": "call",
        "name": "call esr-thirdparty-sdnc-of-zte",
        "xml": "<call module='DataChange' rpc='esr-thirdparty-sdnc-of-zte' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 371.75,
        "y": 1084.5000610351562,
        "z": "dc90116d.356cd8",
        "wires": [
            []
        ]
    },
    {
        "id": "88a47a49.6947f",
        "type": "other",
        "name": "TAPI",
        "xml": "<outcome value='TAPI'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1183,
        "y": 416,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "d5710d01.9be8f8"
            ]
        ]
    },
    {
        "id": "d5710d01.9be8f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1346,
        "y": 415,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "a039ff23.d54198"
            ]
        ]
    },
    {
        "id": "a039ff23.d54198",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/cxf/tapi/v2/topologies?topology-id-or-name=otn'`\"/>  \n    <parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>  \n    <parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>  \n    <parameter name=\"format\" value=\"json\"/>  \n    <parameter name=\"httpMethod\" value=\"get\"/>  \n    <parameter name=\"responsePrefix\" value=\"topologies\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.tapi.jks\"/>  \n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>  \n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>  \n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1507,
        "y": 414,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "44a0211d.fd2598",
                "493dc7eb.c52f08"
            ]
        ]
    },
    {
        "id": "493dc7eb.c52f08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1649,
        "y": 490,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "2d7698ce.b0a7a"
            ]
        ]
    },
    {
        "id": "44a0211d.fd2598",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1683,
        "y": 411,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "fe95a25e.cdaa98"
            ]
        ]
    },
    {
        "id": "fe95a25e.cdaa98",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Error executing get topology TAPI rest api\" />\n\n",
        "comments": "",
        "x": 1853,
        "y": 410,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "2d7698ce.b0a7a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1810,
        "y": 489,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "1dc691cb.358196"
            ]
        ]
    },
    {
        "id": "1dc691cb.358196",
        "type": "for",
        "name": "for each topology",
        "xml": "<for index='tidx' start='0' end=\"`$topologies.topology_length`\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1989,
        "y": 489,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "48d82ee8.688dd"
            ]
        ]
    },
    {
        "id": "48d82ee8.688dd",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2156,
        "y": 490,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "d5ce9061.b89e98",
                "b1436387.1231d8"
            ]
        ]
    },
    {
        "id": "d5ce9061.b89e98",
        "type": "set",
        "name": "set topology",
        "xml": "<set>\n<parameter name='topology.' value='`$topologies.topology[$tidx].`' />\n",
        "comments": "",
        "x": 2315,
        "y": 491,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "b1436387.1231d8",
        "type": "call",
        "name": "call tapi-update-network-to-aai",
        "xml": "<call module='DataChange' rpc='tapi-update-network-to-aai' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2306,
        "y": 557,
        "z": "dc90116d.356cd8",
        "wires": [
            []
        ]
    },
    {
        "id": "c116943.cd1a8e8",
        "type": "outcome",
        "name": "MSA",
        "xml": "<outcome value='MSA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1153.677324295044,
        "y": 572.8993349075317,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "9d338868.302c1"
            ]
        ]
    },
    {
        "id": "9d338868.302c1",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1315.6773872375488,
        "y": 570.899335861206,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "b0b285cb.6ebea"
            ]
        ]
    },
    {
        "id": "b0b285cb.6ebea",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/cxf/openroadm/v2/networks/otn-topology'`\"/>  \n    <parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>  \n    <parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>  \n    <parameter name=\"format\" value=\"json\"/>  \n    <parameter name=\"httpMethod\" value=\"get\"/>  \n    <parameter name=\"responsePrefix\" value=\"networks\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.msa.jks\"/>  \n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>  \n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>  \n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1492.6771354675293,
        "y": 562.8992919921875,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "8054b37a.3900a8",
                "37099c40.484064"
            ]
        ]
    },
    {
        "id": "8054b37a.3900a8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1645.6771354675293,
        "y": 559.8992919921875,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "ee854a40.fe1848"
            ]
        ]
    },
    {
        "id": "ee854a40.fe1848",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Error executing get topology MSA rest api\" />\n\n",
        "comments": "",
        "x": 1820.6771354675293,
        "y": 558.8992919921875,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "37099c40.484064",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1651.6771354675293,
        "y": 632.8992919921875,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "6b6e7027.f016d"
            ]
        ]
    },
    {
        "id": "6b6e7027.f016d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1835.6771354675293,
        "y": 634.8992919921875,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "5444f8a5.36fed"
            ]
        ]
    },
    {
        "id": "5444f8a5.36fed",
        "type": "call",
        "name": "call msa-update-network-to-aai",
        "xml": "<call module='DataChange' rpc='msa-update-network-to-aai' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2114.677001953125,
        "y": 632.8992919921875,
        "z": "dc90116d.356cd8",
        "wires": [
            []
        ]
    },
    {
        "id": "fb3f26da.0ae3f8",
        "type": "switchNode",
        "name": "switch type",
        "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 285.566650390625,
        "y": 801.5666809082031,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "57cb25c2.9e9be4",
                "30ce121c.bfe97e",
                "d3232a5d.18a288"
            ]
        ]
    },
    {
        "id": "57cb25c2.9e9be4",
        "type": "outcome",
        "name": "MSA",
        "xml": "<outcome value='MSA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 464.857177734375,
        "y": 718.9285888671875,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "7a4cfe82.92d42"
            ]
        ]
    },
    {
        "id": "30ce121c.bfe97e",
        "type": "other",
        "name": "TAPI",
        "xml": "<outcome value='TAPI'>\n",
        "comments": "",
        "outputs": 1,
        "x": 473.6070556640625,
        "y": 969.6428527832031,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "d394227.d0cf06"
            ]
        ]
    },
    {
        "id": "7a4cfe82.92d42",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 618.607177734375,
        "y": 715.7143249511719,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "b595413f.cfe8e8",
                "8c8fae68.b08168"
            ]
        ]
    },
    {
        "id": "d394227.d0cf06",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 623,
        "y": 969.5,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "6724f8a4.5cbe3",
                "c711ca11.6e628"
            ]
        ]
    },
    {
        "id": "d3232a5d.18a288",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 576,
        "y": 1133.5,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "ba5f29b3.a93ac8"
            ]
        ]
    },
    {
        "id": "ba5f29b3.a93ac8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n",
        "comments": "",
        "x": 738,
        "y": 1172.5,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "b595413f.cfe8e8",
        "type": "get-resource",
        "name": "get resources from DB -controller_id",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT controller_id\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE controller_id = $controllerid'\npfx='dbcontrollerid'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 850.5,
        "y": 763.5,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "74d7baba.1daacc",
                "582fc831.36e3c",
                "b559176c.28e268"
            ]
        ]
    },
    {
        "id": "8c8fae68.b08168",
        "type": "set",
        "name": "set controller_id",
        "xml": "<set>\n<parameter name='controllerid' value=\"`$prop.sdncRestApi.type + '_' + $prop.sdncRestApi.thirdpartySdnc.url + '_' + $prop.sdncRestApi.thirdpartySdnc.id`\" />\n\n\n\n",
        "comments": "",
        "x": 810.5,
        "y": 697.5,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "74d7baba.1daacc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1089.5,
        "y": 783.5,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "c192dc38.daa8b8"
            ]
        ]
    },
    {
        "id": "c192dc38.daa8b8",
        "type": "delete",
        "name": "delete from db",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource'\n    resource=\"SQL\"\n    key=\"DELETE FROM TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE WHERE controller_id = $controllerid\">",
        "comments": "",
        "outputs": 1,
        "x": 1258.5,
        "y": 790.5,
        "z": "dc90116d.356cd8",
        "wires": [
            []
        ]
    },
    {
        "id": "6724f8a4.5cbe3",
        "type": "set",
        "name": "set controller_id",
        "xml": "<set>\n<parameter name='controllerid' value=\"`$prop.sdncRestApi.type + '_' + $prop.sdncRestApi.thirdpartySdnc.url + '_' + $prop.sdncRestApi.thirdpartySdnc.id`\" />\n\n\n\n",
        "comments": "",
        "x": 787.5,
        "y": 925.5,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "c711ca11.6e628",
        "type": "get-resource",
        "name": "get resources from DB -controller_id",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT controller_id\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE controller_id = $controllerid'\npfx='dbcontrollerid'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 800.5,
        "y": 1014.5,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "9c302232.f8804",
                "b1ece16a.0f3c9",
                "3da8c72e.feda78"
            ]
        ]
    },
    {
        "id": "9c302232.f8804",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1025.5,
        "y": 1029.5,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "dd99da73.f2065"
            ]
        ]
    },
    {
        "id": "dd99da73.f2065",
        "type": "delete",
        "name": "delete from db",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource'\n    resource=\"SQL\"\n    key=\"DELETE FROM TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE WHERE controller_id = $controllerid\">",
        "comments": "",
        "outputs": 1,
        "x": 1196.5,
        "y": 1030.5,
        "z": "dc90116d.356cd8",
        "wires": [
            []
        ]
    },
    {
        "id": "582fc831.36e3c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1075.5,
        "y": 862.5,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "b099b128.5136c8"
            ]
        ]
    },
    {
        "id": "b1ece16a.0f3c9",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1006.5,
        "y": 1102.5,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "c581f585.410918"
            ]
        ]
    },
    {
        "id": "b099b128.5136c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Failure in getting controller-id from DB\" />\n\n",
        "comments": "",
        "x": 1236.5,
        "y": 867.5,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "b559176c.28e268",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1066.5,
        "y": 922.5,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "50ff2098.8d83d"
            ]
        ]
    },
    {
        "id": "50ff2098.8d83d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"controller-id could not be found in DB\" />\n\n",
        "comments": "",
        "x": 1215.5,
        "y": 924.5,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "c581f585.410918",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Failure in getting controller-id from DB\" />\n\n",
        "comments": "",
        "x": 1154.5,
        "y": 1103.5,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "3da8c72e.feda78",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1006.5,
        "y": 1146.5,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "37d6a3b7.1cca8c"
            ]
        ]
    },
    {
        "id": "37d6a3b7.1cca8c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"controller-id could not be found in DB\" />\n\n",
        "comments": "",
        "x": 1171.5,
        "y": 1143.5,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "10fd3c36.34f02c",
        "type": "switchNode",
        "name": "switch network_length",
        "xml": "<switch test='`$topology.networks.network_length >= 2`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2682,
        "y": 295,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "fbaeb9ed.a2e628"
            ]
        ]
    },
    {
        "id": "fbaeb9ed.a2e628",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2864,
        "y": 296,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "93fe6a3d.a61a8"
            ]
        ]
    },
    {
        "id": "c8aabe3a.b7443",
        "type": "for",
        "name": "for each Network",
        "xml": "<for index='netidx' start='0' end='`$topology.networks.network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3237,
        "y": 289,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "c5d07173.a82"
            ]
        ]
    },
    {
        "id": "c5d07173.a82",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3455,
        "y": 286,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "6173b924.39e6a8",
                "a7527c77.d05fd8",
                "17750ab4.92778d"
            ]
        ]
    },
    {
        "id": "1c54dabe.e430a5",
        "type": "call",
        "name": "call update-tp-ttp-relationship",
        "xml": "<call module='DataChange' rpc='update-tp-ttp-relationship' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3270,
        "y": 349,
        "z": "dc90116d.356cd8",
        "wires": [
            []
        ]
    },
    {
        "id": "93fe6a3d.a61a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3034,
        "y": 292,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "c8aabe3a.b7443",
                "1c54dabe.e430a5"
            ]
        ]
    },
    {
        "id": "17750ab4.92778d",
        "type": "set",
        "name": "unset network",
        "xml": "<set>\n<parameter name='network.' value='' />\n",
        "comments": "",
        "x": 3614,
        "y": 226,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "6173b924.39e6a8",
        "type": "set",
        "name": "set network",
        "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$netidx].`' />\n",
        "comments": "",
        "x": 3608,
        "y": 274,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "a7527c77.d05fd8",
        "type": "switchNode",
        "name": "switch network-types with topologyId",
        "xml": "<switch test='`$network.te-topology-identifier.topology-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3685,
        "y": 321,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "de52bd0e.85db08",
                "fa3a626b.d125c8"
            ]
        ]
    },
    {
        "id": "de52bd0e.85db08",
        "type": "outcome",
        "name": "1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3911,
        "y": 290,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "84c7d418.e115f8"
            ]
        ]
    },
    {
        "id": "fa3a626b.d125c8",
        "type": "outcome",
        "name": "2",
        "xml": "<outcome value='2'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3911,
        "y": 351,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "caaba956.377e8"
            ]
        ]
    },
    {
        "id": "23780bd3.2604dc",
        "type": "set",
        "name": "set network-otn",
        "xml": "<set>\n<parameter name='network-otn.' value='`$topology.networks.network[$netidx].`' />\n",
        "comments": "",
        "x": 4206,
        "y": 290,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "6f9e8e73.c1bc3",
        "type": "set",
        "name": "set network eth",
        "xml": "<set>\n<parameter name='network-eth.' value='`$topology.networks.network[$netidx].`' />\n",
        "comments": "",
        "x": 4206,
        "y": 351,
        "z": "dc90116d.356cd8",
        "wires": []
    },
    {
        "id": "84c7d418.e115f8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4045,
        "y": 290,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "23780bd3.2604dc"
            ]
        ]
    },
    {
        "id": "caaba956.377e8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4046,
        "y": 351,
        "z": "dc90116d.356cd8",
        "wires": [
            [
                "6f9e8e73.c1bc3"
            ]
        ]
    },
    {
        "id": "92aeb11c.309eb8",
        "type": "set",
        "name": "unset network",
        "xml": "<set>\n<parameter name='network.' value='' />\n",
        "comments": "",
        "x": 2952,
        "y": 94,
        "z": "dc90116d.356cd8",
        "wires": []
    }
]