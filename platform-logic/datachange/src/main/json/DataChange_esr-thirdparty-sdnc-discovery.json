[
    {
        "id": "b49e6ed1.c8dcb",
        "type": "other",
        "name": "update",
        "xml": "<outcome value='Update'>\n",
        "comments": "",
        "outputs": 1,
        "x": 663,
        "y": 290,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "afc79595.03a058"
            ]
        ]
    },
    {
        "id": "93d3a809.23d83",
        "type": "other",
        "name": "delete",
        "xml": "<outcome value='delete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 663,
        "y": 370,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "87f5ce3d.163be8"
            ]
        ]
    },
    {
        "id": "87f5ce3d.163be8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 804.5,
        "y": 370,
        "z": "1b18cff5.bba51",
        "wires": [
            []
        ]
    },
    {
        "id": "ed89d8e2.366518",
        "type": "comment",
        "name": "TODO: Delete topology from AAI",
        "info": "",
        "comments": "",
        "x": 737.3335189819336,
        "y": 337.96899485588074,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "493ee223.06b5cc",
        "type": "switchNode",
        "name": "switch aai-event-trigger",
        "xml": "<switch test=\"`$data-change-notification-input.aai-event-trigger`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 493.5,
        "y": 330,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "b49e6ed1.c8dcb",
                "93d3a809.23d83"
            ]
        ]
    },
    {
        "id": "c970e0d9.988dc8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1190.5,
        "y": 201,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "b93333aa.1c0a7",
                "8e89ec86.381848",
                "6bfd56ef.86aba8",
                "29c878c8.6e2e3",
                "9dd42ebd.c3ec58"
            ]
        ]
    },
    {
        "id": "8e89ec86.381848",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1463.5001983642578,
        "y": 122.00000953674316,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "37b02225.daaf3e",
                "e44faed5.0a562"
            ]
        ]
    },
    {
        "id": "37b02225.daaf3e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1753.000244140625,
        "y": 114,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "9ee82b4c.027258"
            ]
        ]
    },
    {
        "id": "e44faed5.0a562",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1749.000244140625,
        "y": 154,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "95fadd6c.fb4588"
            ]
        ]
    },
    {
        "id": "9ee82b4c.027258",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 1903.500244140625,
        "y": 114,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "d863483.fe451b8",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1970.500244140625,
        "y": 234,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "27150b59.a15c7c",
                "10804f14.8fac71"
            ]
        ]
    },
    {
        "id": "27150b59.a15c7c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2213.000244140625,
        "y": 254,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "45766a62.487964"
            ]
        ]
    },
    {
        "id": "45766a62.487964",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2370.500244140625,
        "y": 254,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "ed8abc6a.23da9",
                "3075f0c3.b7397",
                "5530fe3e.d46a6"
            ]
        ]
    },
    {
        "id": "679734df.7d768c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 2347.000244140625,
        "y": 154,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "10804f14.8fac71",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2209.000244140625,
        "y": 154,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "679734df.7d768c"
            ]
        ]
    },
    {
        "id": "fb65e652.c18e18",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 116,
        "y": 65,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "5fd8c6ae.cf15e8"
            ]
        ]
    },
    {
        "id": "5fd8c6ae.cf15e8",
        "type": "service-logic",
        "name": "DataChange ${project.version}",
        "module": "DataChange",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
        "outputs": 1,
        "x": 129,
        "y": 125,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "7c6d0d29.a4e9cc"
            ]
        ]
    },
    {
        "id": "7c6d0d29.a4e9cc",
        "type": "method",
        "name": "method esr-thirdparty-sdnc-discovery",
        "xml": "<method rpc='esr-thirdparty-sdnc-discovery' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 149,
        "y": 205,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "d5da3f05.d59de8"
            ]
        ]
    },
    {
        "id": "d5da3f05.d59de8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 396.5,
        "y": 205,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "94fe0252.df11a8"
            ]
        ]
    },
    {
        "id": "ed8abc6a.23da9",
        "type": "for",
        "name": "for each Network",
        "xml": "<for index='nidx' start='0' end='`$topology.networks.network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2609.500244140625,
        "y": 214,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "9a721924.2f2028"
            ]
        ]
    },
    {
        "id": "9a721924.2f2028",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2786.000244140625,
        "y": 209,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "6726d129.2959a",
                "896230f8.99ca6"
            ]
        ]
    },
    {
        "id": "6726d129.2959a",
        "type": "call",
        "name": "call update-network-to-aai",
        "xml": "<call module='DataChange' rpc='update-network-to-aai' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2965.000244140625,
        "y": 229,
        "z": "1b18cff5.bba51",
        "wires": [
            []
        ]
    },
    {
        "id": "896230f8.99ca6",
        "type": "set",
        "name": "set network",
        "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$nidx].`' />\n",
        "comments": "",
        "x": 2920.000244140625,
        "y": 189,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "95fadd6c.fb4588",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1869.000244140625,
        "y": 154,
        "z": "1b18cff5.bba51",
        "wires": [
            []
        ]
    },
    {
        "id": "8fa7ac01.7e9068",
        "type": "comment",
        "name": "Do Nothing",
        "info": "",
        "comments": "",
        "x": 2039.000244140625,
        "y": 194,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "4076575b.04c63",
        "type": "switchNode",
        "name": "switch type",
        "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 916,
        "y": 290,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "e5bd5122.002238",
                "6d8d65c8.0b06bc",
                "b3287819.8ca7c",
                "4433c168.8e0cb"
            ]
        ]
    },
    {
        "id": "afc79595.03a058",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 783,
        "y": 290,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "4076575b.04c63"
            ]
        ]
    },
    {
        "id": "e5bd5122.002238",
        "type": "other",
        "name": "SOTN",
        "xml": "<outcome value='SOTN'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1029,
        "y": 201,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "c970e0d9.988dc8"
            ]
        ]
    },
    {
        "id": "6d8d65c8.0b06bc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1031.000087738037,
        "y": 750.0001106262207,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "f76541c6.503d4"
            ]
        ]
    },
    {
        "id": "f76541c6.503d4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n",
        "comments": "",
        "x": 1181.0000610351562,
        "y": 746.0000972747803,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "b93333aa.1c0a7",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1410.0001983642578,
        "y": 82.00000953674316,
        "z": "1b18cff5.bba51",
        "wires": [
            []
        ]
    },
    {
        "id": "6bfd56ef.86aba8",
        "type": "switchNode",
        "name": "switch prop.sdncRestApi.token_id",
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1456.5001983642578,
        "y": 202.00000953674316,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "ec0b1f86.de86a8",
                "d869f67b.6cbd68"
            ]
        ]
    },
    {
        "id": "ec0b1f86.de86a8",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1749.000244140625,
        "y": 194,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "36410877.b60b2"
            ]
        ]
    },
    {
        "id": "d869f67b.6cbd68",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1749.000244140625,
        "y": 234,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "d863483.fe451b8"
            ]
        ]
    },
    {
        "id": "36410877.b60b2",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1970.500244140625,
        "y": 194,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "10804f14.8fac71",
                "27150b59.a15c7c"
            ]
        ]
    },
    {
        "id": "9dd42ebd.c3ec58",
        "type": "execute",
        "name": "execute RestconfDiscoveryNode",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='establishSubscription' >\n<parameter name=\"subscriberId\" value=\"sotn-controller\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/operations/ietf-subscribed-notifications:establish-subscription'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"sseConnectURL\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/streams/yang-push-json'`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"post\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n<parameter name=\"module\" value=\"DataChange\" />\n<parameter name=\"rpc\" value=\"sotn-notification-handler\" />\n<parameter name=\"mode\" value=\"sync\" />",
        "comments": "",
        "outputs": 1,
        "x": 1453.0001983642578,
        "y": 342.00000953674316,
        "z": "1b18cff5.bba51",
        "wires": [
            []
        ]
    },
    {
        "id": "29c878c8.6e2e3",
        "type": "set",
        "name": "set encoding-format",
        "xml": "<set>\n<parameter name='input' value='ietf-subscribed-notifications:establish-subscription.input.' />\n<parameter name=\"`$input + 'encoding'`\" value=\"encode-json\" />",
        "comments": "",
        "x": 1413.0001983642578,
        "y": 302.00000953674316,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "6c35f59f.31aaf4",
        "type": "comment",
        "name": "Notification subscription",
        "info": "",
        "comments": "",
        "x": 1418.000343322754,
        "y": 259.00000858306885,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "94fe0252.df11a8",
        "type": "switchNode",
        "name": "switch",
        "xml": "<switch test=\"`$prop.sdncRestApi.vendor == 'ZTE'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 103,
        "y": 330,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "97112dfb.d25148",
                "c86f88a8.e3654"
            ]
        ]
    },
    {
        "id": "97112dfb.d25148",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 290,
        "y": 330,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "493ee223.06b5cc"
            ]
        ]
    },
    {
        "id": "c86f88a8.e3654",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 291,
        "y": 455,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "31c62e46.1b6bfa"
            ]
        ]
    },
    {
        "id": "31c62e46.1b6bfa",
        "type": "call",
        "name": "call esr-thirdparty-sdnc-of-zte",
        "xml": "<call module='DataChange' rpc='esr-thirdparty-sdnc-of-zte' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 514,
        "y": 455,
        "z": "1b18cff5.bba51",
        "wires": [
            []
        ]
    },
    {
        "id": "b3287819.8ca7c",
        "type": "other",
        "name": "TAPI",
        "xml": "<outcome value='TAPI'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1107,
        "y": 435,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "a1b223fc.4bfc8"
            ]
        ]
    },
    {
        "id": "a1b223fc.4bfc8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1270,
        "y": 434,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "2ba90d0d.a5469a"
            ]
        ]
    },
    {
        "id": "2ba90d0d.a5469a",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/cxf/tapi/v2/topologies?topology-id-or-name=otn'`\"/>  \n    <parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>  \n    <parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>  \n    <parameter name=\"format\" value=\"json\"/>  \n    <parameter name=\"httpMethod\" value=\"get\"/>  \n    <parameter name=\"responsePrefix\" value=\"topologies\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.tapi.jks\"/>  \n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>  \n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>  \n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1431,
        "y": 433,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "e4e0c00a.96655",
                "8857c3bd.cbf58"
            ]
        ]
    },
    {
        "id": "8857c3bd.cbf58",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1573,
        "y": 509,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "5009a48f.6c9144"
            ]
        ]
    },
    {
        "id": "e4e0c00a.96655",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1607,
        "y": 430,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "3d3fabb0.3b7c64"
            ]
        ]
    },
    {
        "id": "3d3fabb0.3b7c64",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Error executing get topology TAPI rest api\" />\n\n",
        "comments": "",
        "x": 1777,
        "y": 429,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "5009a48f.6c9144",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1734,
        "y": 508,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "7bccde97.6587f8"
            ]
        ]
    },
    {
        "id": "7bccde97.6587f8",
        "type": "for",
        "name": "for each topology",
        "xml": "<for index='tidx' start='0' end=\"`$topologies.topology_length`\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1913,
        "y": 508,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "b488f25e.063e58"
            ]
        ]
    },
    {
        "id": "b488f25e.063e58",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2080,
        "y": 509,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "5387bb7e.ccfa04",
                "58ce3e1c.538878"
            ]
        ]
    },
    {
        "id": "5387bb7e.ccfa04",
        "type": "set",
        "name": "set topology",
        "xml": "<set>\n<parameter name='topology.' value='`$topologies.topology[$tidx].`' />\n",
        "comments": "",
        "x": 2239,
        "y": 510,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "58ce3e1c.538878",
        "type": "call",
        "name": "call tapi-update-network-to-aai",
        "xml": "<call module='DataChange' rpc='tapi-update-network-to-aai' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2230,
        "y": 576,
        "z": "1b18cff5.bba51",
        "wires": [
            []
        ]
    },
    {
        "id": "4433c168.8e0cb",
        "type": "outcome",
        "name": "MSA",
        "xml": "<outcome value='MSA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1077.677324295044,
        "y": 591.8993349075317,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "e65be9ee.c7b3b"
            ]
        ]
    },
    {
        "id": "e65be9ee.c7b3b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1239.6773872375488,
        "y": 589.899335861206,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "35fd633c.bf4964"
            ]
        ]
    },
    {
        "id": "35fd633c.bf4964",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/cxf/openroadm/v2/networks/otn-topology'`\"/>  \n    <parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>  \n    <parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>  \n    <parameter name=\"format\" value=\"json\"/>  \n    <parameter name=\"httpMethod\" value=\"get\"/>  \n    <parameter name=\"responsePrefix\" value=\"networks\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.msa.jks\"/>  \n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>  \n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>  \n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1416.6771354675293,
        "y": 581.8992919921875,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "7a243e03.e07788",
                "31b0685e.813ca8"
            ]
        ]
    },
    {
        "id": "7a243e03.e07788",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1569.6771354675293,
        "y": 578.8992919921875,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "a65ca6e4.09ef28"
            ]
        ]
    },
    {
        "id": "a65ca6e4.09ef28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Error executing get topology MSA rest api\" />\n\n",
        "comments": "",
        "x": 1744.6771354675293,
        "y": 577.8992919921875,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "31b0685e.813ca8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1575.6771354675293,
        "y": 651.8992919921875,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "777a7a58.789fc4"
            ]
        ]
    },
    {
        "id": "777a7a58.789fc4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1759.6771354675293,
        "y": 653.8992919921875,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "7575649a.153f4c"
            ]
        ]
    },
    {
        "id": "7575649a.153f4c",
        "type": "call",
        "name": "call msa-update-network-to-aai",
        "xml": "<call module='DataChange' rpc='msa-update-network-to-aai' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2038.677001953125,
        "y": 651.8992919921875,
        "z": "1b18cff5.bba51",
        "wires": [
            []
        ]
    },
    {
        "id": "3075f0c3.b7397",
        "type": "switchNode",
        "name": "switch network_length",
        "xml": "<switch test='`$topology.networks.network_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2630,
        "y": 320,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "8524dca2.aeded8"
            ]
        ]
    },
    {
        "id": "8524dca2.aeded8",
        "type": "outcome",
        "name": "2 Topologies (1 Domain)",
        "xml": "<outcome value='2'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2904,
        "y": 320,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "b33095ec.9e9e"
            ]
        ]
    },
    {
        "id": "b33095ec.9e9e",
        "type": "switchNode",
        "name": "switch network-types[0]",
        "xml": "<switch test='`$topology.networks.network[0].network-types`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3272,
        "y": 305,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "d9671ae7.1f2ac",
                "8d2f7cad.ac7078"
            ]
        ]
    },
    {
        "id": "d9671ae7.1f2ac",
        "type": "outcome",
        "name": "ethernet-topology",
        "xml": "<outcome value='ethernet-topology'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3488,
        "y": 305,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "9105249.2609cd8"
            ]
        ]
    },
    {
        "id": "9105249.2609cd8",
        "type": "switchNode",
        "name": "switch network-types[1]",
        "xml": "<switch test='`$topology.networks.network[1].network-types`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3713,
        "y": 305,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "9ce7c86d.2eb2d8",
                "36497843.e3494"
            ]
        ]
    },
    {
        "id": "9ce7c86d.2eb2d8",
        "type": "outcome",
        "name": "otn-topology",
        "xml": "<outcome value='otn-topology'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3949,
        "y": 258,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "637acfae.0f124"
            ]
        ]
    },
    {
        "id": "f3d25251.c6e91",
        "type": "call",
        "name": "call update-tp-ttp-relationship",
        "xml": "<call module='DataChange' rpc='update-tp-ttp-relationship' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4365,
        "y": 246,
        "z": "1b18cff5.bba51",
        "wires": [
            []
        ]
    },
    {
        "id": "741e41f5.1da6",
        "type": "set",
        "name": "set networks",
        "xml": "<set>\n<parameter name='network-eth.' value='`$topology.networks.network[0].`' />\n<parameter name='network-otn.' value='`$topology.networks.network[1].`' />\n",
        "comments": "",
        "x": 4321,
        "y": 155,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "8d2f7cad.ac7078",
        "type": "outcome",
        "name": "otn-topology",
        "xml": "<outcome value='otn-topology'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3493,
        "y": 362,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "a8d319cf.4bc79"
            ]
        ]
    },
    {
        "id": "637acfae.0f124",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4131,
        "y": 232,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "741e41f5.1da6",
                "f3d25251.c6e91"
            ]
        ]
    },
    {
        "id": "a8d319cf.4bc79",
        "type": "switchNode",
        "name": "switch network-types[1]",
        "xml": "<switch test='`$topology.networks.network[1].network-types`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3712,
        "y": 364,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "5531c9a0.612ad8",
                "182315db.ba9502"
            ]
        ]
    },
    {
        "id": "36497843.e3494",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3943,
        "y": 317,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "695f6a27.1421dc"
            ]
        ]
    },
    {
        "id": "695f6a27.1421dc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4145,
        "y": 315,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "5531c9a0.612ad8",
        "type": "outcome",
        "name": "ethernet-topology",
        "xml": "<outcome value='ethernet-topology'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3935,
        "y": 378,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "842f72e1.b17048"
            ]
        ]
    },
    {
        "id": "3a98f05a.e5da8",
        "type": "set",
        "name": "set networks",
        "xml": "<set>\n<parameter name='network.eth' value='`$topology.networks.network[1].`' />\n<parameter name='network.otn' value='`$topology.networks.network[0].`' />\n",
        "comments": "",
        "x": 4351,
        "y": 359,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "182315db.ba9502",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3894,
        "y": 439,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "ac618cc1.491d7"
            ]
        ]
    },
    {
        "id": "ac618cc1.491d7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4063,
        "y": 446,
        "z": "1b18cff5.bba51",
        "wires": []
    },
    {
        "id": "842f72e1.b17048",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4113,
        "y": 374,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "3a98f05a.e5da8",
                "225dfddc.2a0cba"
            ]
        ]
    },
    {
        "id": "5530fe3e.d46a6",
        "type": "get-resource",
        "name": "get-resource network-resources",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"network-resource\" \n\t\tkey=\"depth = 'all'\"\n        pfx='tmp.aai.network-resources' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2617,
        "y": 510,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "d9e48832.552bd8",
                "59795789.351ce",
                "61ad07cf.dca3e8"
            ]
        ]
    },
    {
        "id": "d9e48832.552bd8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2870,
        "y": 428,
        "z": "1b18cff5.bba51",
        "wires": [
            [
                "11abef7e.ad2629"
            ]
        ]
    },
    {
        "id": "59795789.351ce",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2873.490966796875,
        "y": 475.57403564453125,
        "z": "1b18cff5.bba51",
        "wires": [
            []
        ]
    },
    {
        "id": "61ad07cf.dca3e8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2868.823974609375,
        "y": 516.9073486328125,
        "z": "1b18cff5.bba51",
        "wires": [
            []
        ]
    },
    {
        "id": "225dfddc.2a0cba",
        "type": "call",
        "name": "call update-tp-ttp-relationship",
        "xml": "<call module='DataChange' rpc='update-tp-ttp-relationship' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4386,
        "y": 425,
        "z": "1b18cff5.bba51",
        "wires": [
            []
        ]
    },
    {
        "id": "11abef7e.ad2629",
        "type": "call",
        "name": "call update-open-ended-links",
        "xml": "<call module='DataChange' rpc='update-open-ended-links' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3124,
        "y": 426,
        "z": "1b18cff5.bba51",
        "wires": [
            []
        ]
    }
]