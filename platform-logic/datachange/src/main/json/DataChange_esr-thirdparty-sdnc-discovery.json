[
    {
        "id": "3872acaa.809c44",
        "type": "other",
        "name": "update",
        "xml": "<outcome value='Update'>\n",
        "comments": "",
        "outputs": 1,
        "x": 710,
        "y": 305,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "5a988226.7d9fdc"
            ]
        ]
    },
    {
        "id": "dbb694.b27a417",
        "type": "other",
        "name": "delete",
        "xml": "<outcome value='Delete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 710,
        "y": 385,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "754f4acc.eae6dc"
            ]
        ]
    },
    {
        "id": "754f4acc.eae6dc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 851.5,
        "y": 385,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "983792ba.976408"
            ]
        ]
    },
    {
        "id": "4cc508ad.f5c7d",
        "type": "switchNode",
        "name": "switch aai-event-trigger",
        "xml": "<switch test=\"`$data-change-notification-input.aai-event-trigger`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 540.5,
        "y": 345,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "3872acaa.809c44",
                "dbb694.b27a417"
            ]
        ]
    },
    {
        "id": "f974c517.d68cd",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1237.5,
        "y": 216,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "29d0fcfc.c3657c",
                "80deb47b.7e9e",
                "f9b155cc.d14098",
                "c374fd8f.2c9bc8",
                "31237f4.62f8c"
            ]
        ]
    },
    {
        "id": "80deb47b.7e9e",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1510.5001983642578,
        "y": 137.00000953674316,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "6d5b07.e87e6cf8",
                "403286df.c4eed8"
            ]
        ]
    },
    {
        "id": "6d5b07.e87e6cf8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1800.000244140625,
        "y": 129,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "b95a0f0f.c5f4"
            ]
        ]
    },
    {
        "id": "403286df.c4eed8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1796.000244140625,
        "y": 169,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "f35984bc.58f298"
            ]
        ]
    },
    {
        "id": "b95a0f0f.c5f4",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 1950.500244140625,
        "y": 129,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "c03c3a2.5764a48",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2017.500244140625,
        "y": 249,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "986cb045.40c5",
                "e9ec571f.c3cfe8"
            ]
        ]
    },
    {
        "id": "986cb045.40c5",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2260.000244140625,
        "y": 269,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "7a144ec7.8a9348"
            ]
        ]
    },
    {
        "id": "7a144ec7.8a9348",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2417.500244140625,
        "y": 269,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "55ea6ad.8497214",
                "ad96f3f.ca0439"
            ]
        ]
    },
    {
        "id": "c2f07a72.d9a858",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 2394.000244140625,
        "y": 169,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "e9ec571f.c3cfe8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2256.000244140625,
        "y": 169,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "c2f07a72.d9a858"
            ]
        ]
    },
    {
        "id": "7d5868e5.98eab",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 163,
        "y": 80,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "22d8189e.4866f"
            ]
        ]
    },
    {
        "id": "22d8189e.4866f",
        "type": "service-logic",
        "name": "DataChange ${project.version}",
        "module": "DataChange",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
        "outputs": 1,
        "x": 176,
        "y": 140,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "3a8b8af3.4d4416"
            ]
        ]
    },
    {
        "id": "3a8b8af3.4d4416",
        "type": "method",
        "name": "method esr-thirdparty-sdnc-discovery",
        "xml": "<method rpc='esr-thirdparty-sdnc-discovery' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 196,
        "y": 220,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "c8a85a4d.9e66f"
            ]
        ]
    },
    {
        "id": "c8a85a4d.9e66f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 443.5,
        "y": 220,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "cbd24389.ade708"
            ]
        ]
    },
    {
        "id": "55ea6ad.8497214",
        "type": "for",
        "name": "for each Network",
        "xml": "<for index='nidx' start='0' end='`$topology.networks.network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2636.500244140625,
        "y": 198,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "1ed2d22d.82cc36"
            ]
        ]
    },
    {
        "id": "1ed2d22d.82cc36",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2785.000244140625,
        "y": 198,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "852144d1.2cc6d",
                "530a9a06.d69fc4"
            ]
        ]
    },
    {
        "id": "852144d1.2cc6d",
        "type": "call",
        "name": "call update-network-to-aai",
        "xml": "<call module='DataChange' rpc='update-network-to-aai' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2964.000244140625,
        "y": 218,
        "z": "8cb67e95.d771b8",
        "wires": [
            []
        ]
    },
    {
        "id": "530a9a06.d69fc4",
        "type": "set",
        "name": "set network",
        "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$nidx].`' />\n",
        "comments": "",
        "x": 2919.000244140625,
        "y": 178,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "f35984bc.58f298",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1916.000244140625,
        "y": 169,
        "z": "8cb67e95.d771b8",
        "wires": [
            []
        ]
    },
    {
        "id": "a473b7cc.4471d8",
        "type": "comment",
        "name": "Do Nothing",
        "info": "",
        "comments": "",
        "x": 2086.000244140625,
        "y": 209,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "d9afda1.5ca9828",
        "type": "switchNode",
        "name": "switch type",
        "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 963,
        "y": 305,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "7ea96e84.4a184",
                "e5a11dd.415fde",
                "11ea46b7.9ad609",
                "a5c3b391.3c4aa"
            ]
        ]
    },
    {
        "id": "5a988226.7d9fdc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 830,
        "y": 305,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "d9afda1.5ca9828"
            ]
        ]
    },
    {
        "id": "7ea96e84.4a184",
        "type": "other",
        "name": "SOTN",
        "xml": "<outcome value='SOTN'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1076,
        "y": 216,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "f974c517.d68cd"
            ]
        ]
    },
    {
        "id": "e5a11dd.415fde",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1105.5,
        "y": 677.5001220703125,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "4a0581b6.8cbdf"
            ]
        ]
    },
    {
        "id": "4a0581b6.8cbdf",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n",
        "comments": "",
        "x": 1291.75,
        "y": 703.5001220703125,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "29d0fcfc.c3657c",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1457.0001983642578,
        "y": 97.00000953674316,
        "z": "8cb67e95.d771b8",
        "wires": [
            []
        ]
    },
    {
        "id": "f9b155cc.d14098",
        "type": "switchNode",
        "name": "switch prop.sdncRestApi.token_id",
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1503.5001983642578,
        "y": 217.00000953674316,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "4e229170.2e1108",
                "495c5d16.740274"
            ]
        ]
    },
    {
        "id": "4e229170.2e1108",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1796.000244140625,
        "y": 209,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "b14dd129.fcf7f"
            ]
        ]
    },
    {
        "id": "495c5d16.740274",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1796.000244140625,
        "y": 249,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "c03c3a2.5764a48"
            ]
        ]
    },
    {
        "id": "b14dd129.fcf7f",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2017.500244140625,
        "y": 209,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "e9ec571f.c3cfe8",
                "986cb045.40c5"
            ]
        ]
    },
    {
        "id": "31237f4.62f8c",
        "type": "execute",
        "name": "execute RestconfDiscoveryNode",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='establishSubscription' >\n<parameter name=\"subscriberId\" value=\"sotn-controller\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/operations/ietf-subscribed-notifications:establish-subscription'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"sseConnectURL\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/streams/yang-push-json'`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"post\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n<parameter name=\"module\" value=\"DataChange\" />\n<parameter name=\"rpc\" value=\"sotn-notification-handler\" />\n<parameter name=\"mode\" value=\"sync\" />",
        "comments": "",
        "outputs": 1,
        "x": 1500.0001983642578,
        "y": 357.00000953674316,
        "z": "8cb67e95.d771b8",
        "wires": [
            []
        ]
    },
    {
        "id": "c374fd8f.2c9bc8",
        "type": "set",
        "name": "set encoding-format",
        "xml": "<set>\n<parameter name='input' value='ietf-subscribed-notifications:establish-subscription.input.' />\n<parameter name=\"`$input + 'encoding'`\" value=\"encode-json\" />",
        "comments": "",
        "x": 1460.0001983642578,
        "y": 317.00000953674316,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "47fcc4e5.c080a4",
        "type": "comment",
        "name": "Notification subscription",
        "info": "",
        "comments": "",
        "x": 1465.000343322754,
        "y": 274.00000858306885,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "cbd24389.ade708",
        "type": "switchNode",
        "name": "switch",
        "xml": "<switch test=\"`$prop.sdncRestApi.vendor == 'ZTE'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 150,
        "y": 345,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "f624fdf6.4a4ef8",
                "67364ea6.885738"
            ]
        ]
    },
    {
        "id": "f624fdf6.4a4ef8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 337,
        "y": 345,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "4cc508ad.f5c7d"
            ]
        ]
    },
    {
        "id": "67364ea6.885738",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 111.00003051757812,
        "y": 1101.75,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "48c54790.7a017"
            ]
        ]
    },
    {
        "id": "48c54790.7a017",
        "type": "call",
        "name": "call esr-thirdparty-sdnc-of-zte",
        "xml": "<call module='DataChange' rpc='esr-thirdparty-sdnc-of-zte' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 342.75,
        "y": 1118.5000610351562,
        "z": "8cb67e95.d771b8",
        "wires": [
            []
        ]
    },
    {
        "id": "11ea46b7.9ad609",
        "type": "other",
        "name": "TAPI",
        "xml": "<outcome value='TAPI'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1154,
        "y": 450,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "a1313060.f8d7d"
            ]
        ]
    },
    {
        "id": "a1313060.f8d7d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1317,
        "y": 449,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "f271610b.da5a3"
            ]
        ]
    },
    {
        "id": "f271610b.da5a3",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/cxf/tapi/v2/topologies?topology-id-or-name=otn'`\"/>  \n    <parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>  \n    <parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>  \n    <parameter name=\"format\" value=\"json\"/>  \n    <parameter name=\"httpMethod\" value=\"get\"/>  \n    <parameter name=\"responsePrefix\" value=\"topologies\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.tapi.jks\"/>  \n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>  \n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>  \n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1478,
        "y": 448,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "878204ba.609a58",
                "1c89864.e323d7a"
            ]
        ]
    },
    {
        "id": "1c89864.e323d7a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1620,
        "y": 524,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "5d965dcc.6101a4"
            ]
        ]
    },
    {
        "id": "878204ba.609a58",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1654,
        "y": 445,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "4052d329.1b779c"
            ]
        ]
    },
    {
        "id": "4052d329.1b779c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Error executing get topology TAPI rest api\" />\n\n",
        "comments": "",
        "x": 1824,
        "y": 444,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "5d965dcc.6101a4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1781,
        "y": 523,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "d1531df6.3732f"
            ]
        ]
    },
    {
        "id": "d1531df6.3732f",
        "type": "for",
        "name": "for each topology",
        "xml": "<for index='tidx' start='0' end=\"`$topologies.topology_length`\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1960,
        "y": 523,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "8b55167c.96333"
            ]
        ]
    },
    {
        "id": "8b55167c.96333",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2127,
        "y": 524,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "e7e4969d.73ce58",
                "9e2e1ddf.baa2b"
            ]
        ]
    },
    {
        "id": "e7e4969d.73ce58",
        "type": "set",
        "name": "set topology",
        "xml": "<set>\n<parameter name='topology.' value='`$topologies.topology[$tidx].`' />\n",
        "comments": "",
        "x": 2286,
        "y": 525,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "9e2e1ddf.baa2b",
        "type": "call",
        "name": "call tapi-update-network-to-aai",
        "xml": "<call module='DataChange' rpc='tapi-update-network-to-aai' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2277,
        "y": 591,
        "z": "8cb67e95.d771b8",
        "wires": [
            []
        ]
    },
    {
        "id": "a5c3b391.3c4aa",
        "type": "outcome",
        "name": "MSA",
        "xml": "<outcome value='MSA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1124.677324295044,
        "y": 606.8993349075317,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "1925d7f4.b889a8"
            ]
        ]
    },
    {
        "id": "1925d7f4.b889a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1286.6773872375488,
        "y": 604.899335861206,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "7ba5724d.ffaffc"
            ]
        ]
    },
    {
        "id": "7ba5724d.ffaffc",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/cxf/openroadm/v2/networks/otn-topology'`\"/>  \n    <parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>  \n    <parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>  \n    <parameter name=\"format\" value=\"json\"/>  \n    <parameter name=\"httpMethod\" value=\"get\"/>  \n    <parameter name=\"responsePrefix\" value=\"networks\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.msa.jks\"/>  \n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>  \n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>  \n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1463.6771354675293,
        "y": 596.8992919921875,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "6946de0a.deebc",
                "5d4a6514.4c3a9c"
            ]
        ]
    },
    {
        "id": "6946de0a.deebc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1616.6771354675293,
        "y": 593.8992919921875,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "e290e7ee.1a21f"
            ]
        ]
    },
    {
        "id": "e290e7ee.1a21f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Error executing get topology MSA rest api\" />\n\n",
        "comments": "",
        "x": 1791.6771354675293,
        "y": 592.8992919921875,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "5d4a6514.4c3a9c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1622.6771354675293,
        "y": 666.8992919921875,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "815556fb.bd9668"
            ]
        ]
    },
    {
        "id": "815556fb.bd9668",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1806.6771354675293,
        "y": 668.8992919921875,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "9834a552.e8e02"
            ]
        ]
    },
    {
        "id": "9834a552.e8e02",
        "type": "call",
        "name": "call msa-update-network-to-aai",
        "xml": "<call module='DataChange' rpc='msa-update-network-to-aai' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2085.677001953125,
        "y": 666.8992919921875,
        "z": "8cb67e95.d771b8",
        "wires": [
            []
        ]
    },
    {
        "id": "983792ba.976408",
        "type": "switchNode",
        "name": "switch type",
        "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 256.566650390625,
        "y": 835.5666809082031,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "674a6a9f.8c143c",
                "42c7b2ab.76125c",
                "1501fed.f113881"
            ]
        ]
    },
    {
        "id": "674a6a9f.8c143c",
        "type": "outcome",
        "name": "MSA",
        "xml": "<outcome value='MSA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 435.857177734375,
        "y": 752.9285888671875,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "8b3cf345.6948d"
            ]
        ]
    },
    {
        "id": "42c7b2ab.76125c",
        "type": "other",
        "name": "TAPI",
        "xml": "<outcome value='TAPI'>\n",
        "comments": "",
        "outputs": 1,
        "x": 444.6070556640625,
        "y": 1003.6428527832031,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "ec6a41aa.381fd"
            ]
        ]
    },
    {
        "id": "8b3cf345.6948d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 589.607177734375,
        "y": 749.7143249511719,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "49d8550e.67af3c",
                "db848d25.52ee9"
            ]
        ]
    },
    {
        "id": "ec6a41aa.381fd",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 594,
        "y": 1003.5,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "1335976f.2d9b19",
                "16c45478.af99e4"
            ]
        ]
    },
    {
        "id": "1501fed.f113881",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 547,
        "y": 1167.5,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "41c63854.9379a8"
            ]
        ]
    },
    {
        "id": "41c63854.9379a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n",
        "comments": "",
        "x": 709,
        "y": 1206.5,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "49d8550e.67af3c",
        "type": "get-resource",
        "name": "get resources from DB -controller_id",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT controller_id\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE controller_id = $controllerid'\npfx='dbcontrollerid'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 821.5,
        "y": 797.5,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "1a8d1895.ab6a47",
                "47ef9d8f.3964f4",
                "d98324ce.97ca8"
            ]
        ]
    },
    {
        "id": "db848d25.52ee9",
        "type": "set",
        "name": "set controller_id",
        "xml": "<set>\n<parameter name='controllerid' value=\"`$prop.sdncRestApi.type + '_' + $prop.sdncRestApi.thirdpartySdnc.url + '_' + $prop.sdncRestApi.thirdpartySdnc.id`\" />\n\n\n\n",
        "comments": "",
        "x": 781.5,
        "y": 731.5,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "1a8d1895.ab6a47",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1060.5,
        "y": 817.5,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "d1f9e1a7.c7f19"
            ]
        ]
    },
    {
        "id": "d1f9e1a7.c7f19",
        "type": "delete",
        "name": "delete from db",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource'\n    resource=\"SQL\"\n    key=\"DELETE FROM TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE WHERE controller_id = $controllerid\">",
        "comments": "",
        "outputs": 1,
        "x": 1229.5,
        "y": 824.5,
        "z": "8cb67e95.d771b8",
        "wires": [
            []
        ]
    },
    {
        "id": "1335976f.2d9b19",
        "type": "set",
        "name": "set controller_id",
        "xml": "<set>\n<parameter name='controllerid' value=\"`$prop.sdncRestApi.type + '_' + $prop.sdncRestApi.thirdpartySdnc.url + '_' + $prop.sdncRestApi.thirdpartySdnc.id`\" />\n\n\n\n",
        "comments": "",
        "x": 758.5,
        "y": 959.5,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "16c45478.af99e4",
        "type": "get-resource",
        "name": "get resources from DB -controller_id",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT controller_id\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE controller_id = $controllerid'\npfx='dbcontrollerid'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 771.5,
        "y": 1048.5,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "a8a3e82f.8a5a8",
                "ae0994a7.403ab8",
                "e57ecfd9.55df58"
            ]
        ]
    },
    {
        "id": "a8a3e82f.8a5a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 996.5,
        "y": 1063.5,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "d7aae079.2ca2a"
            ]
        ]
    },
    {
        "id": "d7aae079.2ca2a",
        "type": "delete",
        "name": "delete from db",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource'\n    resource=\"SQL\"\n    key=\"DELETE FROM TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE WHERE controller_id = $controllerid\">",
        "comments": "",
        "outputs": 1,
        "x": 1167.5,
        "y": 1064.5,
        "z": "8cb67e95.d771b8",
        "wires": [
            []
        ]
    },
    {
        "id": "47ef9d8f.3964f4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1046.5,
        "y": 896.5,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "1e298c8c.f0408b"
            ]
        ]
    },
    {
        "id": "ae0994a7.403ab8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 977.5,
        "y": 1136.5,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "c236971a.ee197"
            ]
        ]
    },
    {
        "id": "1e298c8c.f0408b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Failure in getting controller-id from DB\" />\n\n",
        "comments": "",
        "x": 1207.5,
        "y": 901.5,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "d98324ce.97ca8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1037.5,
        "y": 956.5,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "3416464c.a143ea"
            ]
        ]
    },
    {
        "id": "3416464c.a143ea",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"controller-id could not be found in DB\" />\n\n",
        "comments": "",
        "x": 1186.5,
        "y": 958.5,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "c236971a.ee197",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Failure in getting controller-id from DB\" />\n\n",
        "comments": "",
        "x": 1125.5,
        "y": 1137.5,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "e57ecfd9.55df58",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 977.5,
        "y": 1180.5,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "d5ad8139.acdf48"
            ]
        ]
    },
    {
        "id": "d5ad8139.acdf48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"controller-id could not be found in DB\" />\n\n",
        "comments": "",
        "x": 1142.5,
        "y": 1177.5,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "ad96f3f.ca0439",
        "type": "switchNode",
        "name": "switch network_length",
        "xml": "<switch test='`$topology.networks.network_length >= 2`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2653,
        "y": 329,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "d135440e.332828"
            ]
        ]
    },
    {
        "id": "d135440e.332828",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2835,
        "y": 330,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "9dfbe1b1.0501b8"
            ]
        ]
    },
    {
        "id": "27de91fe.6ca4f6",
        "type": "for",
        "name": "for each Network",
        "xml": "<for index='netidx' start='0' end='`$topology.networks.network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3208,
        "y": 323,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "7ec0ad88.0666cc"
            ]
        ]
    },
    {
        "id": "7ec0ad88.0666cc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3426,
        "y": 320,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "8fdc47cc.432ab",
                "b5eed741.5fbb08",
                "1656178e.3ba998"
            ]
        ]
    },
    {
        "id": "5634a256.4e2744",
        "type": "call",
        "name": "call update-tp-ttp-relationship",
        "xml": "<call module='DataChange' rpc='update-tp-ttp-relationship' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3241,
        "y": 383,
        "z": "8cb67e95.d771b8",
        "wires": [
            []
        ]
    },
    {
        "id": "9dfbe1b1.0501b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3005,
        "y": 326,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "27de91fe.6ca4f6",
                "5634a256.4e2744"
            ]
        ]
    },
    {
        "id": "1656178e.3ba998",
        "type": "set",
        "name": "unset network",
        "xml": "<set>\n<parameter name='network.' value='' />\n",
        "comments": "",
        "x": 3585,
        "y": 260,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "8fdc47cc.432ab",
        "type": "set",
        "name": "set network",
        "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$netidx].`' />\n",
        "comments": "",
        "x": 3579,
        "y": 308,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "b5eed741.5fbb08",
        "type": "switchNode",
        "name": "switch network-types with topologyId",
        "xml": "<switch test='`$network.te-topology-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3656,
        "y": 355,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "c1423a29.1c46e8",
                "ab490ddf.8e1c1"
            ]
        ]
    },
    {
        "id": "c1423a29.1c46e8",
        "type": "outcome",
        "name": "1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3882,
        "y": 324,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "3c6e5d11.fbd2b2"
            ]
        ]
    },
    {
        "id": "ab490ddf.8e1c1",
        "type": "outcome",
        "name": "2",
        "xml": "<outcome value='2'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3882,
        "y": 385,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "654a57a4.0fd38"
            ]
        ]
    },
    {
        "id": "adf965cc.3e515",
        "type": "set",
        "name": "set network-otn",
        "xml": "<set>\n<parameter name='network-otn.' value='`$topology.networks.network[$netidx].`' />\n",
        "comments": "",
        "x": 4177,
        "y": 324,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "f1dbbcab.0dda4",
        "type": "set",
        "name": "set network eth",
        "xml": "<set>\n<parameter name='network-eth.' value='`$topology.networks.network[$netidx].`' />\n",
        "comments": "",
        "x": 4177,
        "y": 385,
        "z": "8cb67e95.d771b8",
        "wires": []
    },
    {
        "id": "3c6e5d11.fbd2b2",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4016,
        "y": 324,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "adf965cc.3e515"
            ]
        ]
    },
    {
        "id": "654a57a4.0fd38",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4017,
        "y": 385,
        "z": "8cb67e95.d771b8",
        "wires": [
            [
                "f1dbbcab.0dda4"
            ]
        ]
    }
]