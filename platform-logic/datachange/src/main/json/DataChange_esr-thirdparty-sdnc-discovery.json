[
    {
        "id": "e773e89.91c6b98",
        "type": "other",
        "name": "update",
        "xml": "<outcome value='Update'>\n",
        "comments": "",
        "outputs": 1,
        "x": 716,
        "y": 331,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "e959cc87.47852"
            ]
        ]
    },
    {
        "id": "c1b624e8.c4a36",
        "type": "other",
        "name": "delete",
        "xml": "<outcome value='Delete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 716,
        "y": 411,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "f94d770b.d7a21"
            ]
        ]
    },
    {
        "id": "f94d770b.d7a21",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 857.5,
        "y": 411,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "4f7d3c56.d58604"
            ]
        ]
    },
    {
        "id": "a0413cd2.f1f8e8",
        "type": "switchNode",
        "name": "switch aai-event-trigger",
        "xml": "<switch test=\"`$data-change-notification-input.aai-event-trigger`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 546.5,
        "y": 371,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "e773e89.91c6b98",
                "c1b624e8.c4a36"
            ]
        ]
    },
    {
        "id": "24096151.ae8cf6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1243.5,
        "y": 242,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "d3849c0c.290268",
                "2e3a9914.38f54e",
                "5d9111f6.fc1a7",
                "e1aa7ec9.6ea95",
                "4884da36.8dcb24"
            ]
        ]
    },
    {
        "id": "2e3a9914.38f54e",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1516.5001983642578,
        "y": 163.00000953674316,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "e0b90864.1c659",
                "2d5ac090.7f4d28"
            ]
        ]
    },
    {
        "id": "e0b90864.1c659",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1806.000244140625,
        "y": 155,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "fbadc5f1.b9042"
            ]
        ]
    },
    {
        "id": "2d5ac090.7f4d28",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1802.000244140625,
        "y": 195,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "8ebd62d2.d420b"
            ]
        ]
    },
    {
        "id": "fbadc5f1.b9042",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 1956.500244140625,
        "y": 155,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "74d21b60.35097c",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2023.500244140625,
        "y": 275,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "73b2188f.535b88",
                "e3942d82.1d981"
            ]
        ]
    },
    {
        "id": "73b2188f.535b88",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2266.000244140625,
        "y": 295,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "4a760f4a.5cb7e8"
            ]
        ]
    },
    {
        "id": "4a760f4a.5cb7e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2423.500244140625,
        "y": 295,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "300a5bac.b9481c",
                "ad97aa98.c768d"
            ]
        ]
    },
    {
        "id": "8f9fe5f7.1e28d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 2400.000244140625,
        "y": 195,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "e3942d82.1d981",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2262.000244140625,
        "y": 195,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "8f9fe5f7.1e28d"
            ]
        ]
    },
    {
        "id": "52ac41c0.5bfd18",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 169,
        "y": 106,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "2f07965a.1dd8e2"
            ]
        ]
    },
    {
        "id": "2f07965a.1dd8e2",
        "type": "service-logic",
        "name": "DataChange ${project.version}",
        "module": "DataChange",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
        "outputs": 1,
        "x": 182,
        "y": 166,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "be9d83e5.bff8b"
            ]
        ]
    },
    {
        "id": "be9d83e5.bff8b",
        "type": "method",
        "name": "method esr-thirdparty-sdnc-discovery",
        "xml": "<method rpc='esr-thirdparty-sdnc-discovery' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 202,
        "y": 246,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "dc3c6fc7.178d18"
            ]
        ]
    },
    {
        "id": "dc3c6fc7.178d18",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 449.5,
        "y": 246,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "febec156.8b3598"
            ]
        ]
    },
    {
        "id": "300a5bac.b9481c",
        "type": "for",
        "name": "for each Network",
        "xml": "<for index='nidx' start='0' end='`$topology.networks.network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2642.500244140625,
        "y": 224,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "2eec7c8a.0065d4"
            ]
        ]
    },
    {
        "id": "2eec7c8a.0065d4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2791.000244140625,
        "y": 224,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "c6d65b06.9b8418",
                "d5bb0470.a0963",
                "51f49074.c67e58"
            ]
        ]
    },
    {
        "id": "c6d65b06.9b8418",
        "type": "call",
        "name": "call update-network-to-aai",
        "xml": "<call module='DataChange' rpc='update-network-to-aai' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2970.000244140625,
        "y": 244,
        "z": "8a5117b5.c01db8",
        "wires": [
            []
        ]
    },
    {
        "id": "d5bb0470.a0963",
        "type": "set",
        "name": "set network",
        "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$nidx].`' />\n",
        "comments": "",
        "x": 2923.000244140625,
        "y": 204,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "8ebd62d2.d420b",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1922.000244140625,
        "y": 195,
        "z": "8a5117b5.c01db8",
        "wires": [
            []
        ]
    },
    {
        "id": "e262d253.cb79",
        "type": "comment",
        "name": "Do Nothing",
        "info": "",
        "comments": "",
        "x": 2092.000244140625,
        "y": 235,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "a6bffc76.37edc",
        "type": "switchNode",
        "name": "switch type",
        "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 969,
        "y": 331,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "6f99e35d.de977c",
                "c02a6e99.4562c",
                "3d7935ef.04d57a",
                "cfd2103d.fd26"
            ]
        ]
    },
    {
        "id": "e959cc87.47852",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 836,
        "y": 331,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "a6bffc76.37edc"
            ]
        ]
    },
    {
        "id": "6f99e35d.de977c",
        "type": "other",
        "name": "WAN",
        "xml": "<outcome value='WAN'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1082,
        "y": 242,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "24096151.ae8cf6"
            ]
        ]
    },
    {
        "id": "c02a6e99.4562c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1111.5,
        "y": 703.5001220703125,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "1f5381b5.13672e"
            ]
        ]
    },
    {
        "id": "1f5381b5.13672e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n",
        "comments": "",
        "x": 1297.75,
        "y": 729.5001220703125,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "d3849c0c.290268",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1463.0001983642578,
        "y": 123.00000953674316,
        "z": "8a5117b5.c01db8",
        "wires": [
            []
        ]
    },
    {
        "id": "5d9111f6.fc1a7",
        "type": "switchNode",
        "name": "switch prop.sdncRestApi.token_id",
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1509.5001983642578,
        "y": 243.00000953674316,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "8bff0ee3.9c1d08",
                "46defe8b.c98d58"
            ]
        ]
    },
    {
        "id": "8bff0ee3.9c1d08",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1802.000244140625,
        "y": 235,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "4af5b25c.a6728c"
            ]
        ]
    },
    {
        "id": "46defe8b.c98d58",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1802.000244140625,
        "y": 275,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "74d21b60.35097c"
            ]
        ]
    },
    {
        "id": "4af5b25c.a6728c",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2023.500244140625,
        "y": 235,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "e3942d82.1d981",
                "73b2188f.535b88"
            ]
        ]
    },
    {
        "id": "4884da36.8dcb24",
        "type": "execute",
        "name": "execute RestconfDiscoveryNode",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='establishSubscription' >\n<parameter name=\"subscriberId\" value=\"sotn-controller\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/operations/ietf-subscribed-notifications:establish-subscription'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"sseConnectURL\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/streams/yang-push-json'`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"post\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n<parameter name=\"module\" value=\"DataChange\" />\n<parameter name=\"rpc\" value=\"sotn-notification-handler\" />\n<parameter name=\"mode\" value=\"sync\" />",
        "comments": "",
        "outputs": 1,
        "x": 1506.0001983642578,
        "y": 383.00000953674316,
        "z": "8a5117b5.c01db8",
        "wires": [
            []
        ]
    },
    {
        "id": "e1aa7ec9.6ea95",
        "type": "set",
        "name": "set encoding-format",
        "xml": "<set>\n<parameter name='input' value='ietf-subscribed-notifications:establish-subscription.input.' />\n<parameter name=\"`$input + 'encoding'`\" value=\"encode-json\" />",
        "comments": "",
        "x": 1466.0001983642578,
        "y": 343.00000953674316,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "bbab4551.0a236",
        "type": "comment",
        "name": "Notification subscription",
        "info": "",
        "comments": "",
        "x": 1471.000343322754,
        "y": 300.00000858306885,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "febec156.8b3598",
        "type": "switchNode",
        "name": "switch",
        "xml": "<switch test=\"`$prop.sdncRestApi.vendor == 'ZTE'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 156,
        "y": 371,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "9a519619.b1895",
                "48ffb5b3.b827e4"
            ]
        ]
    },
    {
        "id": "9a519619.b1895",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 343,
        "y": 371,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "a0413cd2.f1f8e8"
            ]
        ]
    },
    {
        "id": "48ffb5b3.b827e4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 117.00003051757812,
        "y": 1127.75,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "9ffa3ea5.b70bf"
            ]
        ]
    },
    {
        "id": "9ffa3ea5.b70bf",
        "type": "call",
        "name": "call esr-thirdparty-sdnc-of-zte",
        "xml": "<call module='DataChange' rpc='esr-thirdparty-sdnc-of-zte' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 348.75,
        "y": 1144.5000610351562,
        "z": "8a5117b5.c01db8",
        "wires": [
            []
        ]
    },
    {
        "id": "3d7935ef.04d57a",
        "type": "other",
        "name": "TAPI",
        "xml": "<outcome value='TAPI'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1160,
        "y": 476,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "4fe6a7b1.5767f"
            ]
        ]
    },
    {
        "id": "4fe6a7b1.5767f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1323,
        "y": 475,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "f9123ca9.fc888"
            ]
        ]
    },
    {
        "id": "f9123ca9.fc888",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/cxf/tapi/v2/topologies?topology-id-or-name=otn'`\"/>  \n    <parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>  \n    <parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>  \n    <parameter name=\"format\" value=\"json\"/>  \n    <parameter name=\"httpMethod\" value=\"get\"/>  \n    <parameter name=\"responsePrefix\" value=\"topologies\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.tapi.jks\"/>  \n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>  \n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>  \n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1484,
        "y": 474,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "cc52ed00.f5d2c",
                "dd1ac4e1.b59088"
            ]
        ]
    },
    {
        "id": "dd1ac4e1.b59088",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1626,
        "y": 550,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "f1e8f88.8710a88"
            ]
        ]
    },
    {
        "id": "cc52ed00.f5d2c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1660,
        "y": 471,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "54fdb7ce.6dd1a"
            ]
        ]
    },
    {
        "id": "54fdb7ce.6dd1a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Error executing get topology TAPI rest api\" />\n\n",
        "comments": "",
        "x": 1830,
        "y": 470,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "f1e8f88.8710a88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1787,
        "y": 549,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "f8f968a.7a53a98"
            ]
        ]
    },
    {
        "id": "f8f968a.7a53a98",
        "type": "for",
        "name": "for each topology",
        "xml": "<for index='tidx' start='0' end=\"`$topologies.topology_length`\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1966,
        "y": 549,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "3fb827df.939078"
            ]
        ]
    },
    {
        "id": "3fb827df.939078",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2133,
        "y": 550,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "6c8666ff.44e6e8",
                "8622f8e6.4ca888"
            ]
        ]
    },
    {
        "id": "6c8666ff.44e6e8",
        "type": "set",
        "name": "set topology",
        "xml": "<set>\n<parameter name='topology.' value='`$topologies.topology[$tidx].`' />\n",
        "comments": "",
        "x": 2292,
        "y": 551,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "8622f8e6.4ca888",
        "type": "call",
        "name": "call tapi-update-network-to-aai",
        "xml": "<call module='DataChange' rpc='tapi-update-network-to-aai' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2283,
        "y": 617,
        "z": "8a5117b5.c01db8",
        "wires": [
            []
        ]
    },
    {
        "id": "cfd2103d.fd26",
        "type": "outcome",
        "name": "MSA",
        "xml": "<outcome value='MSA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1130.677324295044,
        "y": 632.8993349075317,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "787c580c.21a83"
            ]
        ]
    },
    {
        "id": "787c580c.21a83",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1292.6773872375488,
        "y": 630.899335861206,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "cb55af39.dad0b"
            ]
        ]
    },
    {
        "id": "cb55af39.dad0b",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/cxf/openroadm/v2/networks/otn-topology'`\"/>  \n    <parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>  \n    <parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>  \n    <parameter name=\"format\" value=\"json\"/>  \n    <parameter name=\"httpMethod\" value=\"get\"/>  \n    <parameter name=\"responsePrefix\" value=\"networks\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.msa.jks\"/>  \n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>  \n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>  \n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1469.6771354675293,
        "y": 622.8992919921875,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "55b8f3fc.f2c404",
                "dba7d725.59fa18"
            ]
        ]
    },
    {
        "id": "55b8f3fc.f2c404",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1622.6771354675293,
        "y": 619.8992919921875,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "2cc6fdd5.2640a2"
            ]
        ]
    },
    {
        "id": "2cc6fdd5.2640a2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Error executing get topology MSA rest api\" />\n\n",
        "comments": "",
        "x": 1797.6771354675293,
        "y": 618.8992919921875,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "dba7d725.59fa18",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1628.6771354675293,
        "y": 692.8992919921875,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "170b822d.317ece"
            ]
        ]
    },
    {
        "id": "170b822d.317ece",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1812.6771354675293,
        "y": 694.8992919921875,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "8f4caf49.c88e68"
            ]
        ]
    },
    {
        "id": "8f4caf49.c88e68",
        "type": "call",
        "name": "call msa-update-network-to-aai",
        "xml": "<call module='DataChange' rpc='msa-update-network-to-aai' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2091.677001953125,
        "y": 692.8992919921875,
        "z": "8a5117b5.c01db8",
        "wires": [
            []
        ]
    },
    {
        "id": "4f7d3c56.d58604",
        "type": "switchNode",
        "name": "switch type",
        "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 262.566650390625,
        "y": 861.5666809082031,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "7c479945.15b6c",
                "41dab8d.79e9dc8",
                "fb32359d.de7e3"
            ]
        ]
    },
    {
        "id": "7c479945.15b6c",
        "type": "outcome",
        "name": "MSA",
        "xml": "<outcome value='MSA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 441.857177734375,
        "y": 778.9285888671875,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "d9d0d78b.47d9f"
            ]
        ]
    },
    {
        "id": "41dab8d.79e9dc8",
        "type": "other",
        "name": "TAPI",
        "xml": "<outcome value='TAPI'>\n",
        "comments": "",
        "outputs": 1,
        "x": 450.6070556640625,
        "y": 1029.6428527832031,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "1a2de346.3f0ebd"
            ]
        ]
    },
    {
        "id": "d9d0d78b.47d9f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 595.607177734375,
        "y": 775.7143249511719,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "e787c325.7a3d48",
                "e74f02d1.684a5"
            ]
        ]
    },
    {
        "id": "1a2de346.3f0ebd",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 600,
        "y": 1029.5,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "39caa350.271204",
                "14436f1d.f47b89"
            ]
        ]
    },
    {
        "id": "fb32359d.de7e3",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 553,
        "y": 1193.5,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "33b66d76.b73a6a"
            ]
        ]
    },
    {
        "id": "33b66d76.b73a6a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n",
        "comments": "",
        "x": 715,
        "y": 1232.5,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "e787c325.7a3d48",
        "type": "get-resource",
        "name": "get resources from DB -controller_id",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT controller_id\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE controller_id = $controllerid'\npfx='dbcontrollerid'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 827.5,
        "y": 823.5,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "48ef075d.23d478",
                "6aefa7bc.0e864",
                "b6643c83.4fa068"
            ]
        ]
    },
    {
        "id": "e74f02d1.684a5",
        "type": "set",
        "name": "set controller_id",
        "xml": "<set>\n<parameter name='controllerid' value=\"`$prop.sdncRestApi.type + '_' + $prop.sdncRestApi.thirdpartySdnc.url + '_' + $prop.sdncRestApi.thirdpartySdnc.id`\" />\n\n\n\n",
        "comments": "",
        "x": 787.5,
        "y": 757.5,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "48ef075d.23d478",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1066.5,
        "y": 843.5,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "3a0200d5.7fabc"
            ]
        ]
    },
    {
        "id": "3a0200d5.7fabc",
        "type": "delete",
        "name": "delete from db",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource'\n    resource=\"SQL\"\n    key=\"DELETE FROM TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE WHERE controller_id = $controllerid\">",
        "comments": "",
        "outputs": 1,
        "x": 1235.5,
        "y": 850.5,
        "z": "8a5117b5.c01db8",
        "wires": [
            []
        ]
    },
    {
        "id": "39caa350.271204",
        "type": "set",
        "name": "set controller_id",
        "xml": "<set>\n<parameter name='controllerid' value=\"`$prop.sdncRestApi.type + '_' + $prop.sdncRestApi.thirdpartySdnc.url + '_' + $prop.sdncRestApi.thirdpartySdnc.id`\" />\n\n\n\n",
        "comments": "",
        "x": 764.5,
        "y": 985.5,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "14436f1d.f47b89",
        "type": "get-resource",
        "name": "get resources from DB -controller_id",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT controller_id\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE controller_id = $controllerid'\npfx='dbcontrollerid'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 777.5,
        "y": 1074.5,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "82076a69.af01a",
                "7b1e0312.764db4",
                "5cc08e4.aa9e2f"
            ]
        ]
    },
    {
        "id": "82076a69.af01a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1002.5,
        "y": 1089.5,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "dc7dee5b.44e56"
            ]
        ]
    },
    {
        "id": "dc7dee5b.44e56",
        "type": "delete",
        "name": "delete from db",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource'\n    resource=\"SQL\"\n    key=\"DELETE FROM TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE WHERE controller_id = $controllerid\">",
        "comments": "",
        "outputs": 1,
        "x": 1173.5,
        "y": 1090.5,
        "z": "8a5117b5.c01db8",
        "wires": [
            []
        ]
    },
    {
        "id": "6aefa7bc.0e864",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1052.5,
        "y": 922.5,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "2c713fb3.4d6888"
            ]
        ]
    },
    {
        "id": "7b1e0312.764db4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 983.5,
        "y": 1162.5,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "2bfd8d24.d64f22"
            ]
        ]
    },
    {
        "id": "2c713fb3.4d6888",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Failure in getting controller-id from DB\" />\n\n",
        "comments": "",
        "x": 1213.5,
        "y": 927.5,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "b6643c83.4fa068",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1043.5,
        "y": 982.5,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "a2919cf8.1bf828"
            ]
        ]
    },
    {
        "id": "a2919cf8.1bf828",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"controller-id could not be found in DB\" />\n\n",
        "comments": "",
        "x": 1192.5,
        "y": 984.5,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "2bfd8d24.d64f22",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Failure in getting controller-id from DB\" />\n\n",
        "comments": "",
        "x": 1131.5,
        "y": 1163.5,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "5cc08e4.aa9e2f",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 983.5,
        "y": 1206.5,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "2f855e70.bc0c7a"
            ]
        ]
    },
    {
        "id": "2f855e70.bc0c7a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"controller-id could not be found in DB\" />\n\n",
        "comments": "",
        "x": 1148.5,
        "y": 1203.5,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "ad97aa98.c768d",
        "type": "switchNode",
        "name": "switch network_length",
        "xml": "<switch test='`$topology.networks.network_length >= 2`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2659,
        "y": 355,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "47f11a60.715fe4"
            ]
        ]
    },
    {
        "id": "47f11a60.715fe4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2841,
        "y": 356,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "610c5ba8.ab12f4"
            ]
        ]
    },
    {
        "id": "3f621874.83f7b",
        "type": "for",
        "name": "for each Network",
        "xml": "<for index='netidx' start='0' end='`$topology.networks.network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3214,
        "y": 349,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "47e16032.729b78"
            ]
        ]
    },
    {
        "id": "47e16032.729b78",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3432,
        "y": 346,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "cc7e5bc4.9fb7e8",
                "8fc85a95.09a108",
                "c99c88.f08ccb78"
            ]
        ]
    },
    {
        "id": "40eac1bc.82a228",
        "type": "call",
        "name": "call update-tp-ttp-relationship",
        "xml": "<call module='DataChange' rpc='update-tp-ttp-relationship' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3247,
        "y": 409,
        "z": "8a5117b5.c01db8",
        "wires": [
            []
        ]
    },
    {
        "id": "610c5ba8.ab12f4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3011,
        "y": 352,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "3f621874.83f7b",
                "40eac1bc.82a228"
            ]
        ]
    },
    {
        "id": "c99c88.f08ccb78",
        "type": "set",
        "name": "unset network",
        "xml": "<set>\n<parameter name='network.' value='' />\n",
        "comments": "",
        "x": 3591,
        "y": 286,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "cc7e5bc4.9fb7e8",
        "type": "set",
        "name": "set network",
        "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$netidx].`' />\n",
        "comments": "",
        "x": 3585,
        "y": 334,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "8fc85a95.09a108",
        "type": "switchNode",
        "name": "switch network-types with topologyId",
        "xml": "<switch test='`$network.te-topology-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3662,
        "y": 381,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "a101ef60.461f68",
                "46ddd7fc.c3c038"
            ]
        ]
    },
    {
        "id": "a101ef60.461f68",
        "type": "outcome",
        "name": "1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3888,
        "y": 350,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "9f9b045e.002478"
            ]
        ]
    },
    {
        "id": "46ddd7fc.c3c038",
        "type": "outcome",
        "name": "2",
        "xml": "<outcome value='2'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3888,
        "y": 411,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "c00ddb6e.187aa"
            ]
        ]
    },
    {
        "id": "55fe80ee.35e4c",
        "type": "set",
        "name": "set network-otn",
        "xml": "<set>\n<parameter name='network-otn.' value='`$topology.networks.network[$netidx].`' />\n",
        "comments": "",
        "x": 4183,
        "y": 350,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "b736da6.72f0128",
        "type": "set",
        "name": "set network eth",
        "xml": "<set>\n<parameter name='network-eth.' value='`$topology.networks.network[$netidx].`' />\n",
        "comments": "",
        "x": 4183,
        "y": 411,
        "z": "8a5117b5.c01db8",
        "wires": []
    },
    {
        "id": "9f9b045e.002478",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4022,
        "y": 350,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "55fe80ee.35e4c"
            ]
        ]
    },
    {
        "id": "c00ddb6e.187aa",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4023,
        "y": 411,
        "z": "8a5117b5.c01db8",
        "wires": [
            [
                "b736da6.72f0128"
            ]
        ]
    },
    {
        "id": "51f49074.c67e58",
        "type": "set",
        "name": "unset network",
        "xml": "<set>\n<parameter name='network.' value='' />\n",
        "comments": "",
        "x": 2929,
        "y": 154,
        "z": "8a5117b5.c01db8",
        "wires": []
    }
]