[
  {
    "id": "3492b641.0dfbba",
    "type": "other",
    "name": "update",
    "xml": "<outcome value='Update'>\n",
    "comments": "",
    "outputs": 1,
    "x": 673,
    "y": 276.6667003631592,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "f2d65f4a.d687"
      ]
    ]
  },
  {
    "id": "668a1af1.719b34",
    "type": "other",
    "name": "delete",
    "xml": "<outcome value='delete'>\n",
    "comments": "",
    "outputs": 1,
    "x": 709.2221145629883,
    "y": 478.33349609375,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "3b8ddbef.903fa4"
      ]
    ]
  },
  {
    "id": "3b8ddbef.903fa4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 859.6667594909668,
    "y": 473.3335485458374,
    "z": "cbb28df7.1359",
    "wires": [
      []
    ]
  },
  {
    "id": "c0cbee48.6a5f9",
    "type": "comment",
    "name": "TODO: Delete topology from AAI",
    "info": "",
    "comments": "",
    "x": 817.3334274291992,
    "y": 429.0001735687256,
    "z": "cbb28df7.1359",
    "wires": []
  },
  {
    "id": "d3c03070.16287",
    "type": "switchNode",
    "name": "switch aai-event-trigger",
    "xml": "<switch test=\"`$data-change-notification-input.aai-event-trigger`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 465.5555648803711,
    "y": 345.2222261428833,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "3492b641.0dfbba",
        "668a1af1.719b34"
      ]
    ]
  },
  {
    "id": "6bfaf616.869108",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1267.333755493164,
    "y": 270.1112537384033,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "c706e157.72486",
        "4130ca8.c1efa34"
      ]
    ]
  },
  {
    "id": "f4c114b8.d66028",
    "type": "execute",
    "name": "execute RestApiCallNode Get token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
    "comments": "",
    "outputs": 1,
    "x": 1523.993263244629,
    "y": 132.0305051803589,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "fafa0167.57f14",
        "c8836a7f.1ba7f8"
      ]
    ]
  },
  {
    "id": "fafa0167.57f14",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1758.993263244629,
    "y": 110.03050518035889,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "bd59ffd7.cdf9"
      ]
    ]
  },
  {
    "id": "c8836a7f.1ba7f8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1751.243263244629,
    "y": 163.67338848114014,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "8505bfec.1c327"
      ]
    ]
  },
  {
    "id": "bd59ffd7.cdf9",
    "type": "set",
    "name": "set token-id",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
    "comments": "",
    "x": 1912.993263244629,
    "y": 111.03050518035889,
    "z": "cbb28df7.1359",
    "wires": []
  },
  {
    "id": "c706e157.72486",
    "type": "execute",
    "name": "execute RestApiCallNode Get Topology",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1527.3266906738281,
    "y": 225.73424291610718,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "87479d00.dc1c9",
        "c2d07026.26d52"
      ]
    ]
  },
  {
    "id": "87479d00.dc1c9",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1785.882022857666,
    "y": 203.73422479629517,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "3aa58504.f6229a"
      ]
    ]
  },
  {
    "id": "3aa58504.f6229a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1961.4375534057617,
    "y": 201.40094709396362,
    "z": "cbb28df7.1359",
    "wires": [
      []
    ]
  },
  {
    "id": "dca7d6ac.f501f8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
    "comments": "",
    "x": 1969.6598281860352,
    "y": 275.6230607032776,
    "z": "cbb28df7.1359",
    "wires": []
  },
  {
    "id": "c2d07026.26d52",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1791.3265075683594,
    "y": 274.845290184021,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "dca7d6ac.f501f8"
      ]
    ]
  },
  {
    "id": "7cae77af.f5b818",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 105.9999008178711,
    "y": 85,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "b697d007.11e41"
      ]
    ]
  },
  {
    "id": "b697d007.11e41",
    "type": "service-logic",
    "name": "DataChange ${project.version}",
    "module": "DataChange",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
    "outputs": 1,
    "x": 244.11102676391602,
    "y": 126.44446134567261,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "49de6de0.6f78a4"
      ]
    ]
  },
  {
    "id": "49de6de0.6f78a4",
    "type": "method",
    "name": "method esr-thirdparty-sdnc-discovery",
    "xml": "<method rpc='esr-thirdparty-sdnc-discovery' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 340.5555877685547,
    "y": 237.22224235534668,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "5f1e0612.f09808"
      ]
    ]
  },
  {
    "id": "5f1e0612.f09808",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 248.77781677246094,
    "y": 346.11122035980225,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "d3c03070.16287"
      ]
    ]
  },
  {
    "id": "4130ca8.c1efa34",
    "type": "for",
    "name": "for each Network",
    "xml": "<for index='nidx' start='0' end='`$topology.networks.network_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1459.481460571289,
    "y": 353.2221817970276,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "5ae402a2.fe5ffc"
      ]
    ]
  },
  {
    "id": "5ae402a2.fe5ffc",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1649.4814224243164,
    "y": 360.9999747276306,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "7d9ae4c3.21708c",
        "f67aa4a3.311fc8"
      ]
    ]
  },
  {
    "id": "7d9ae4c3.21708c",
    "type": "call",
    "name": "call update-network-to-aai",
    "xml": "<call module='DataChange' rpc='update-network-to-aai' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1902.8148441314697,
    "y": 424.33334493637085,
    "z": "cbb28df7.1359",
    "wires": [
      []
    ]
  },
  {
    "id": "f67aa4a3.311fc8",
    "type": "set",
    "name": "set network",
    "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$nidx].`' />\n",
    "comments": "",
    "x": 1855.036964416504,
    "y": 342.11108922958374,
    "z": "cbb28df7.1359",
    "wires": []
  },
  {
    "id": "8505bfec.1c327",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1912.8146591186523,
    "y": 158.77776765823364,
    "z": "cbb28df7.1359",
    "wires": [
      []
    ]
  },
  {
    "id": "27eaeed1.46c512",
    "type": "comment",
    "name": "Do Nothing",
    "info": "",
    "comments": "",
    "x": 2048.3702328999834,
    "y": 157.66664340760974,
    "z": "cbb28df7.1359",
    "wires": []
  },
  {
    "id": "416dcc31.e9a444",
    "type": "switchNode",
    "name": "switch type",
    "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 948.0001487731934,
    "y": 279.00003147125244,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "7de88c94.fa0ca4",
        "8ee217f7.3b1bd8"
      ]
    ]
  },
  {
    "id": "f2d65f4a.d687",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 802.9999847412109,
    "y": 277.00002002716064,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "416dcc31.e9a444"
      ]
    ]
  },
  {
    "id": "7de88c94.fa0ca4",
    "type": "other",
    "name": "SOTN",
    "xml": "<outcome value='SOTN'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1101.9999313354492,
    "y": 235.00000190734863,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "6bfaf616.869108"
      ]
    ]
  },
  {
    "id": "8ee217f7.3b1bd8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1098.9999313354492,
    "y": 359.00000953674316,
    "z": "cbb28df7.1359",
    "wires": [
      [
        "c0794a5f.727638"
      ]
    ]
  },
  {
    "id": "c0794a5f.727638",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n",
    "comments": "",
    "x": 1247.7726364135742,
    "y": 358.43917751312256,
    "z": "cbb28df7.1359",
    "wires": []
  }
]
