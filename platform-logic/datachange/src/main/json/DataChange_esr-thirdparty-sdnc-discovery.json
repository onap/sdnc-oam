[
  {
    "id": "e714f114.a841a",
    "type": "other",
    "name": "update",
    "xml": "<outcome value='Update'>\n",
    "comments": "",
    "outputs": 1,
    "x": 674.5000419616699,
    "y": 205.66669845581055,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "412d4a4c.5ea2f4"
      ]
    ]
  },
  {
    "id": "47ba392d.437028",
    "type": "other",
    "name": "delete",
    "xml": "<outcome value='delete'>\n",
    "comments": "",
    "outputs": 1,
    "x": 702.7222175598145,
    "y": 477.3335008621216,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "e84e5704.965b68"
      ]
    ]
  },
  {
    "id": "e84e5704.965b68",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 858.1668968200684,
    "y": 477.33352184295654,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      []
    ]
  },
  {
    "id": "5e6b6675.fc5a18",
    "type": "comment",
    "name": "TODO: Delete topology from AAI",
    "info": "",
    "comments": "",
    "x": 782.8334770202637,
    "y": 440.0001859664917,
    "z": "f60ccc0b.2e9e5",
    "wires": []
  },
  {
    "id": "bf8e19f1.7f5908",
    "type": "switchNode",
    "name": "switch aai-event-trigger",
    "xml": "<switch test=\"`$data-change-notification-input.aai-event-trigger`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 459.05566787719727,
    "y": 344.2222309112549,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "e714f114.a841a",
        "47ba392d.437028"
      ]
    ]
  },
  {
    "id": "412d4a4c.5ea2f4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 842.8338432312012,
    "y": 204.11124992370605,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "52b0fb73.694034",
        "b992a9e2.abb498"
      ]
    ]
  },
  {
    "id": "bf4a7e8b.e2772",
    "type": "execute",
    "name": "execute RestApiCallNode Get token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
    "comments": "",
    "outputs": 1,
    "x": 1120.4932975769043,
    "y": 160.03050470352173,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "cbcc146a.b18a48",
        "934e7ef4.942bd"
      ]
    ]
  },
  {
    "id": "cbcc146a.b18a48",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1355.4932975769043,
    "y": 138.03050470352173,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "9ebe20af.228e5"
      ]
    ]
  },
  {
    "id": "934e7ef4.942bd",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1347.7432975769043,
    "y": 191.67338800430298,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "fe461c21.f9128"
      ]
    ]
  },
  {
    "id": "9ebe20af.228e5",
    "type": "set",
    "name": "set token-id",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
    "comments": "",
    "x": 1509.4932975769043,
    "y": 139.03050470352173,
    "z": "f60ccc0b.2e9e5",
    "wires": []
  },
  {
    "id": "52b0fb73.694034",
    "type": "execute",
    "name": "execute RestApiCallNode Get Topology",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1123.8267250061035,
    "y": 253.73424243927002,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "bf8dd5a2.3ec108",
        "4e2f04da.b5496c"
      ]
    ]
  },
  {
    "id": "bf8dd5a2.3ec108",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1382.3820571899414,
    "y": 231.734224319458,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "9692e7a9.a7ad78"
      ]
    ]
  },
  {
    "id": "9692e7a9.a7ad78",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1557.937587738037,
    "y": 229.40094661712646,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      []
    ]
  },
  {
    "id": "1548c97d.137267",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
    "comments": "",
    "x": 1566.1598625183105,
    "y": 303.62306022644043,
    "z": "f60ccc0b.2e9e5",
    "wires": []
  },
  {
    "id": "4e2f04da.b5496c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1387.8265419006348,
    "y": 302.84528970718384,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "1548c97d.137267"
      ]
    ]
  },
  {
    "id": "773b4a80.972f64",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 99.50000381469727,
    "y": 84.00000476837158,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "6b3bf10f.0a471"
      ]
    ]
  },
  {
    "id": "6b3bf10f.0a471",
    "type": "service-logic",
    "name": "DataChange ${project.version}",
    "module": "DataChange",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
    "outputs": 1,
    "x": 237.6111297607422,
    "y": 125.44446611404419,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "34347376.ce668c"
      ]
    ]
  },
  {
    "id": "34347376.ce668c",
    "type": "method",
    "name": "method esr-thirdparty-sdnc-discovery",
    "xml": "<method rpc='esr-thirdparty-sdnc-discovery' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 334.05569076538086,
    "y": 236.22224712371826,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "1ded1b72.af18c5"
      ]
    ]
  },
  {
    "id": "1ded1b72.af18c5",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 242.2779197692871,
    "y": 345.1112251281738,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "bf8e19f1.7f5908"
      ]
    ]
  },
  {
    "id": "b992a9e2.abb498",
    "type": "for",
    "name": "for each Network",
    "xml": "<for index='nidx' start='0' end='`$topology.networks.network_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1055.9814949035645,
    "y": 381.22218132019043,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "d00ff672.d0b048"
      ]
    ]
  },
  {
    "id": "d00ff672.d0b048",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1245.9814567565918,
    "y": 388.99997425079346,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      [
        "ba2cdcd.67eab2",
        "b9e492ff.96a56"
      ]
    ]
  },
  {
    "id": "ba2cdcd.67eab2",
    "type": "call",
    "name": "call update-network-to-aai",
    "xml": "<call module='DataChange' rpc='update-network-to-aai' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1499.3148784637451,
    "y": 452.3333444595337,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      []
    ]
  },
  {
    "id": "b9e492ff.96a56",
    "type": "set",
    "name": "set network",
    "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$nidx].`' />\n",
    "comments": "",
    "x": 1451.5369987487793,
    "y": 370.1110887527466,
    "z": "f60ccc0b.2e9e5",
    "wires": []
  },
  {
    "id": "fe461c21.f9128",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1509.3146934509277,
    "y": 186.77776718139648,
    "z": "f60ccc0b.2e9e5",
    "wires": [
      []
    ]
  },
  {
    "id": "12e3cffc.36ff4",
    "type": "comment",
    "name": "Do Nothing",
    "info": "",
    "comments": "",
    "x": 1644.8702672322588,
    "y": 185.66664293077258,
    "z": "f60ccc0b.2e9e5",
    "wires": []
  }
]
