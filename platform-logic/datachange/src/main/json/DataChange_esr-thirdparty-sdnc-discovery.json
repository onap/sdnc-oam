[
    {
        "id": "346770b6.e0b2e",
        "type": "other",
        "name": "update",
        "xml": "<outcome value='Update'>\n",
        "comments": "",
        "outputs": 1,
        "x": 666,
        "y": 282,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "ac79093c.29ec78"
            ]
        ]
    },
    {
        "id": "2f504934.7894c6",
        "type": "other",
        "name": "delete",
        "xml": "<outcome value='Delete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 666,
        "y": 362,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "5f23df82.9ac6e"
            ]
        ]
    },
    {
        "id": "5f23df82.9ac6e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 807.5,
        "y": 362,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "dc10cae0.74e44"
            ]
        ]
    },
    {
        "id": "5a242175.0e7ef",
        "type": "switchNode",
        "name": "switch aai-event-trigger",
        "xml": "<switch test=\"`$data-change-notification-input.aai-event-trigger`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 496.5,
        "y": 322,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "346770b6.e0b2e",
                "2f504934.7894c6"
            ]
        ]
    },
    {
        "id": "39f2e6f9.408272",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1193.5,
        "y": 193,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "97074a04.9156f",
                "a612156e.6c82f",
                "af67ee77.5ddb88",
                "8f8e9805.87c3c8",
                "9d5ac624.def28"
            ]
        ]
    },
    {
        "id": "a612156e.6c82f",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1466.5001983642578,
        "y": 114.00000953674316,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "e7c29f07.2a4d28",
                "fe96d7c9.6dc11"
            ]
        ]
    },
    {
        "id": "e7c29f07.2a4d28",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1756.000244140625,
        "y": 106,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "9a41c115.acccd8"
            ]
        ]
    },
    {
        "id": "fe96d7c9.6dc11",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1752.000244140625,
        "y": 146,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "142d0bb2.73cbec"
            ]
        ]
    },
    {
        "id": "9a41c115.acccd8",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 1906.500244140625,
        "y": 106,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "74c607f5.33c7f",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1973.500244140625,
        "y": 226,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "46585599.99541c",
                "e4dc69e3.746e88"
            ]
        ]
    },
    {
        "id": "46585599.99541c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2216.000244140625,
        "y": 246,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "c7c89355.9ce378"
            ]
        ]
    },
    {
        "id": "c7c89355.9ce378",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2373.500244140625,
        "y": 246,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "b3a801bb.6b3e08"
            ]
        ]
    },
    {
        "id": "4462058b.03bf7c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 2350.000244140625,
        "y": 146,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "e4dc69e3.746e88",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2212.000244140625,
        "y": 146,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "4462058b.03bf7c"
            ]
        ]
    },
    {
        "id": "e48e789f.6305e8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 119,
        "y": 57,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "f17ff4c0.c3b85"
            ]
        ]
    },
    {
        "id": "f17ff4c0.c3b85",
        "type": "service-logic",
        "name": "DataChange ${project.version}",
        "module": "DataChange",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
        "outputs": 1,
        "x": 132,
        "y": 117,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "dcee4efc.fbc398"
            ]
        ]
    },
    {
        "id": "dcee4efc.fbc398",
        "type": "method",
        "name": "method esr-thirdparty-sdnc-discovery",
        "xml": "<method rpc='esr-thirdparty-sdnc-discovery' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 152,
        "y": 197,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "ee1d05c.842daf8"
            ]
        ]
    },
    {
        "id": "ee1d05c.842daf8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 399.5,
        "y": 197,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "289966fd.257632"
            ]
        ]
    },
    {
        "id": "b3a801bb.6b3e08",
        "type": "for",
        "name": "for each Network",
        "xml": "<for index='nidx' start='0' end='`$topology.networks.network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1799.500259399414,
        "y": 345.00001525878906,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "f46be5c.444e598"
            ]
        ]
    },
    {
        "id": "f46be5c.444e598",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1948.000259399414,
        "y": 345.00001525878906,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "9f7c6e21.8e3448",
                "a45b31cf.5b428"
            ]
        ]
    },
    {
        "id": "9f7c6e21.8e3448",
        "type": "call",
        "name": "call update-network-to-aai",
        "xml": "<call module='DataChange' rpc='update-network-to-aai' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2127.000259399414,
        "y": 365.00001525878906,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            []
        ]
    },
    {
        "id": "a45b31cf.5b428",
        "type": "set",
        "name": "set network",
        "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$nidx].`' />\n",
        "comments": "",
        "x": 2082.000259399414,
        "y": 325.00001525878906,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "142d0bb2.73cbec",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1872.000244140625,
        "y": 146,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            []
        ]
    },
    {
        "id": "77d98c9a.bbdddc",
        "type": "comment",
        "name": "Do Nothing",
        "info": "",
        "comments": "",
        "x": 2042.000244140625,
        "y": 186,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "7a5efd17.5c18a4",
        "type": "switchNode",
        "name": "switch type",
        "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 919,
        "y": 282,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "c610bb27.6f7938",
                "f6f15d6a.b855f8",
                "2ed61a13.0813c6",
                "ca97ad3.a311cd"
            ]
        ]
    },
    {
        "id": "ac79093c.29ec78",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 786,
        "y": 282,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "7a5efd17.5c18a4"
            ]
        ]
    },
    {
        "id": "c610bb27.6f7938",
        "type": "other",
        "name": "SOTN",
        "xml": "<outcome value='SOTN'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1032,
        "y": 193,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "39f2e6f9.408272"
            ]
        ]
    },
    {
        "id": "f6f15d6a.b855f8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1061.5,
        "y": 654.5001220703125,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "bacba57d.e755a8"
            ]
        ]
    },
    {
        "id": "bacba57d.e755a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n",
        "comments": "",
        "x": 1247.75,
        "y": 680.5001220703125,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "97074a04.9156f",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1413.0001983642578,
        "y": 74.00000953674316,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            []
        ]
    },
    {
        "id": "af67ee77.5ddb88",
        "type": "switchNode",
        "name": "switch prop.sdncRestApi.token_id",
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1459.5001983642578,
        "y": 194.00000953674316,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "196dbf86.289fe8",
                "2e000adc.427cfe"
            ]
        ]
    },
    {
        "id": "196dbf86.289fe8",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1752.000244140625,
        "y": 186,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "58dbe772.71f75"
            ]
        ]
    },
    {
        "id": "2e000adc.427cfe",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1752.000244140625,
        "y": 226,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "74c607f5.33c7f"
            ]
        ]
    },
    {
        "id": "58dbe772.71f75",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1973.500244140625,
        "y": 186,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "e4dc69e3.746e88",
                "46585599.99541c"
            ]
        ]
    },
    {
        "id": "9d5ac624.def28",
        "type": "execute",
        "name": "execute RestconfDiscoveryNode",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='establishSubscription' >\n<parameter name=\"subscriberId\" value=\"sotn-controller\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/operations/ietf-subscribed-notifications:establish-subscription'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"sseConnectURL\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/streams/yang-push-json'`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"post\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n<parameter name=\"module\" value=\"DataChange\" />\n<parameter name=\"rpc\" value=\"sotn-notification-handler\" />\n<parameter name=\"mode\" value=\"sync\" />",
        "comments": "",
        "outputs": 1,
        "x": 1456.0001983642578,
        "y": 334.00000953674316,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            []
        ]
    },
    {
        "id": "8f8e9805.87c3c8",
        "type": "set",
        "name": "set encoding-format",
        "xml": "<set>\n<parameter name='input' value='ietf-subscribed-notifications:establish-subscription.input.' />\n<parameter name=\"`$input + 'encoding'`\" value=\"encode-json\" />",
        "comments": "",
        "x": 1416.0001983642578,
        "y": 294.00000953674316,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "bcab4612.fb18e",
        "type": "comment",
        "name": "Notification subscription",
        "info": "",
        "comments": "",
        "x": 1421.000343322754,
        "y": 251.00000858306885,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "289966fd.257632",
        "type": "switchNode",
        "name": "switch",
        "xml": "<switch test=\"`$prop.sdncRestApi.vendor == 'ZTE'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 106,
        "y": 322,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "8432bc7f.958c98",
                "dbdc5153.c45968"
            ]
        ]
    },
    {
        "id": "8432bc7f.958c98",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 293,
        "y": 322,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "5a242175.0e7ef"
            ]
        ]
    },
    {
        "id": "dbdc5153.c45968",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 67.00003051757812,
        "y": 1078.75,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "94027433.59821"
            ]
        ]
    },
    {
        "id": "94027433.59821",
        "type": "call",
        "name": "call esr-thirdparty-sdnc-of-zte",
        "xml": "<call module='DataChange' rpc='esr-thirdparty-sdnc-of-zte' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 298.75,
        "y": 1095.5000610351562,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            []
        ]
    },
    {
        "id": "2ed61a13.0813c6",
        "type": "other",
        "name": "TAPI",
        "xml": "<outcome value='TAPI'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1110,
        "y": 427,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "4691c66b.5d4a4"
            ]
        ]
    },
    {
        "id": "4691c66b.5d4a4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1273,
        "y": 426,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "7dd7f464.c6c9e4"
            ]
        ]
    },
    {
        "id": "7dd7f464.c6c9e4",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/cxf/tapi/v2/topologies?topology-id-or-name=otn'`\"/>  \n    <parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>  \n    <parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>  \n    <parameter name=\"format\" value=\"json\"/>  \n    <parameter name=\"httpMethod\" value=\"get\"/>  \n    <parameter name=\"responsePrefix\" value=\"topologies\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.tapi.jks\"/>  \n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>  \n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>  \n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1434,
        "y": 425,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "4311848d.591ed4",
                "fc46f47a.aebbb"
            ]
        ]
    },
    {
        "id": "fc46f47a.aebbb",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1576,
        "y": 501,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "cc96eb4.79b6718"
            ]
        ]
    },
    {
        "id": "4311848d.591ed4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1610,
        "y": 422,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "85a205fd.e6fe2"
            ]
        ]
    },
    {
        "id": "85a205fd.e6fe2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Error executing get topology TAPI rest api\" />\n\n",
        "comments": "",
        "x": 1780,
        "y": 421,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "cc96eb4.79b6718",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1737,
        "y": 500,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "84ea29d7.966748"
            ]
        ]
    },
    {
        "id": "84ea29d7.966748",
        "type": "for",
        "name": "for each topology",
        "xml": "<for index='tidx' start='0' end=\"`$topologies.topology_length`\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1916,
        "y": 500,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "23afbd29.52671a"
            ]
        ]
    },
    {
        "id": "23afbd29.52671a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2083,
        "y": 501,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "be671cf9.1f4a38",
                "2c9a9e44.4d4e72"
            ]
        ]
    },
    {
        "id": "be671cf9.1f4a38",
        "type": "set",
        "name": "set topology",
        "xml": "<set>\n<parameter name='topology.' value='`$topologies.topology[$tidx].`' />\n",
        "comments": "",
        "x": 2242,
        "y": 502,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "2c9a9e44.4d4e72",
        "type": "call",
        "name": "call tapi-update-network-to-aai",
        "xml": "<call module='DataChange' rpc='tapi-update-network-to-aai' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2233,
        "y": 568,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            []
        ]
    },
    {
        "id": "ca97ad3.a311cd",
        "type": "outcome",
        "name": "MSA",
        "xml": "<outcome value='MSA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1080.677324295044,
        "y": 583.8993349075317,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "c2e22ff3.03e78"
            ]
        ]
    },
    {
        "id": "c2e22ff3.03e78",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1242.6773872375488,
        "y": 581.899335861206,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "cdc360bb.4f8c6"
            ]
        ]
    },
    {
        "id": "cdc360bb.4f8c6",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/cxf/openroadm/v2/networks/otn-topology'`\"/>  \n    <parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>  \n    <parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>  \n    <parameter name=\"format\" value=\"json\"/>  \n    <parameter name=\"httpMethod\" value=\"get\"/>  \n    <parameter name=\"responsePrefix\" value=\"networks\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.msa.jks\"/>  \n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>  \n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>  \n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1419.6771354675293,
        "y": 573.8992919921875,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "150d6764.a614e9",
                "1e259e4f.0e9d9a"
            ]
        ]
    },
    {
        "id": "150d6764.a614e9",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1572.6771354675293,
        "y": 570.8992919921875,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "a457e272.01c1b8"
            ]
        ]
    },
    {
        "id": "a457e272.01c1b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Error executing get topology MSA rest api\" />\n\n",
        "comments": "",
        "x": 1747.6771354675293,
        "y": 569.8992919921875,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "1e259e4f.0e9d9a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1578.6771354675293,
        "y": 643.8992919921875,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "c148d343.01eac8"
            ]
        ]
    },
    {
        "id": "c148d343.01eac8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1762.6771354675293,
        "y": 645.8992919921875,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "f964e642.cb1ae"
            ]
        ]
    },
    {
        "id": "f964e642.cb1ae",
        "type": "call",
        "name": "call msa-update-network-to-aai",
        "xml": "<call module='DataChange' rpc='msa-update-network-to-aai' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2041.677001953125,
        "y": 643.8992919921875,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            []
        ]
    },
    {
        "id": "dc10cae0.74e44",
        "type": "switchNode",
        "name": "switch type",
        "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 212.566650390625,
        "y": 812.5666809082031,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "447a364c.b91ea8",
                "f7872c45.99a4e",
                "c8e48bf6.778e98"
            ]
        ]
    },
    {
        "id": "447a364c.b91ea8",
        "type": "outcome",
        "name": "MSA",
        "xml": "<outcome value='MSA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 391.857177734375,
        "y": 729.9285888671875,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "a07fdc63.5a34d8"
            ]
        ]
    },
    {
        "id": "f7872c45.99a4e",
        "type": "other",
        "name": "TAPI",
        "xml": "<outcome value='TAPI'>\n",
        "comments": "",
        "outputs": 1,
        "x": 400.6070556640625,
        "y": 980.6428527832031,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "6d4308e1.31c5f"
            ]
        ]
    },
    {
        "id": "a07fdc63.5a34d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 545.607177734375,
        "y": 726.7143249511719,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "cfc4d202.c64d78",
                "366bec81.83eddc"
            ]
        ]
    },
    {
        "id": "6d4308e1.31c5f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 550,
        "y": 980.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "6a48df29.ca491",
                "62ccb800.ba59c8"
            ]
        ]
    },
    {
        "id": "c8e48bf6.778e98",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 503,
        "y": 1144.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "ab761f62.a873d"
            ]
        ]
    },
    {
        "id": "ab761f62.a873d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n",
        "comments": "",
        "x": 665,
        "y": 1183.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "cfc4d202.c64d78",
        "type": "get-resource",
        "name": "get resources from DB -controller_id",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT controller_id\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE controller_id = $controllerid'\npfx='dbcontrollerid'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 777.5,
        "y": 774.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "69e5b135.13096",
                "70bf128f.7ac3cc",
                "136d8709.29f489"
            ]
        ]
    },
    {
        "id": "366bec81.83eddc",
        "type": "set",
        "name": "set controller_id",
        "xml": "<set>\n<parameter name='controllerid' value=\"`$prop.sdncRestApi.type + '_' + $prop.sdncRestApi.thirdpartySdnc.url + '_' + $prop.sdncRestApi.thirdpartySdnc.id`\" />\n\n\n\n",
        "comments": "",
        "x": 737.5,
        "y": 708.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "69e5b135.13096",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1016.5,
        "y": 794.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "f7324afe.a3cb98"
            ]
        ]
    },
    {
        "id": "f7324afe.a3cb98",
        "type": "delete",
        "name": "delete from db",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource'\n    resource=\"SQL\"\n    key=\"DELETE FROM TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE WHERE controller_id = $controllerid\">",
        "comments": "",
        "outputs": 1,
        "x": 1185.5,
        "y": 801.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            []
        ]
    },
    {
        "id": "6a48df29.ca491",
        "type": "set",
        "name": "set controller_id",
        "xml": "<set>\n<parameter name='controllerid' value=\"`$prop.sdncRestApi.type + '_' + $prop.sdncRestApi.thirdpartySdnc.url + '_' + $prop.sdncRestApi.thirdpartySdnc.id`\" />\n\n\n\n",
        "comments": "",
        "x": 714.5,
        "y": 936.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "62ccb800.ba59c8",
        "type": "get-resource",
        "name": "get resources from DB -controller_id",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT controller_id\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE controller_id = $controllerid'\npfx='dbcontrollerid'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 727.5,
        "y": 1025.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "4cc181ad.c4d1f8",
                "85870c46.3089f",
                "d2032fdb.614ce8"
            ]
        ]
    },
    {
        "id": "4cc181ad.c4d1f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 952.5,
        "y": 1040.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "ebe8f601.eebec8"
            ]
        ]
    },
    {
        "id": "ebe8f601.eebec8",
        "type": "delete",
        "name": "delete from db",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource'\n    resource=\"SQL\"\n    key=\"DELETE FROM TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE WHERE controller_id = $controllerid\">",
        "comments": "",
        "outputs": 1,
        "x": 1123.5,
        "y": 1041.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            []
        ]
    },
    {
        "id": "70bf128f.7ac3cc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1002.5,
        "y": 873.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "dd76e326.6dd408"
            ]
        ]
    },
    {
        "id": "85870c46.3089f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 933.5,
        "y": 1113.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "b35680d0.668ed"
            ]
        ]
    },
    {
        "id": "dd76e326.6dd408",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Failure in getting controller-id from DB\" />\n\n",
        "comments": "",
        "x": 1163.5,
        "y": 878.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "136d8709.29f489",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 993.5,
        "y": 933.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "84fa6086.1cdbd"
            ]
        ]
    },
    {
        "id": "84fa6086.1cdbd",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"controller-id could not be found in DB\" />\n\n",
        "comments": "",
        "x": 1142.5,
        "y": 935.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "b35680d0.668ed",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Failure in getting controller-id from DB\" />\n\n",
        "comments": "",
        "x": 1081.5,
        "y": 1114.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    },
    {
        "id": "d2032fdb.614ce8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 933.5,
        "y": 1157.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": [
            [
                "a6db07ae.aaca38"
            ]
        ]
    },
    {
        "id": "a6db07ae.aaca38",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"controller-id could not be found in DB\" />\n\n",
        "comments": "",
        "x": 1098.5,
        "y": 1154.5,
        "z": "7bb5d2cb.8cfacc",
        "wires": []
    }
]