[
    {
        "id": "26c72de4.f15082", 
        "type": "other", 
        "name": "update", 
        "xml": "<outcome value='Update'>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 666, 
        "y": 254, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "414d6ccb.3d26fc"
            ]
        ]
    }, 
    {
        "id": "41138058.b8876", 
        "type": "other", 
        "name": "delete", 
        "xml": "<outcome value='delete'>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 666, 
        "y": 334, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "25011722.26281"
            ]
        ]
    }, 
    {
        "id": "25011722.26281", 
        "type": "block", 
        "name": "block : atomic", 
        "xml": "<block atomic=\"true\">", 
        "atomic": "true", 
        "outputs": 1, 
        "x": 807.5, 
        "y": 334, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [ ]
        ]
    }, 
    {
        "id": "8fedb811.8ebe38", 
        "type": "comment", 
        "name": "TODO: Delete topology from AAI", 
        "info": "", 
        "comments": "", 
        "x": 740.3335189819336, 
        "y": 301.96899485588074, 
        "z": "1a9b8475.da0d2c", 
        "wires": [ ]
    }, 
    {
        "id": "fc46fa0c.31e87", 
        "type": "switchNode", 
        "name": "switch aai-event-trigger", 
        "xml": "<switch test=\"`$data-change-notification-input.aai-event-trigger`\">\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 496.5, 
        "y": 294, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "26c72de4.f15082", 
                "41138058.b8876"
            ]
        ]
    }, 
    {
        "id": "73bed9ba.1eeb9", 
        "type": "block", 
        "name": "block : atomic", 
        "xml": "<block atomic=\"true\">", 
        "atomic": "true", 
        "outputs": 1, 
        "x": 1193.5, 
        "y": 165, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "ebd26579.8d9818", 
                "7c364355.c7d31c", 
                "6bff7a95.f6b11c", 
                "e40bbeb2.1466c", 
                "257a5269.7c0d86"
            ]
        ]
    }, 
    {
        "id": "7c364355.c7d31c", 
        "type": "execute", 
        "name": "execute RestApiCallNode Get token", 
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>", 
        "comments": "", 
        "outputs": 1, 
        "x": 1466.5001983642578, 
        "y": 86.00000953674316, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "460f203b.a3333", 
                "2634113c.c7fc8e"
            ]
        ]
    }, 
    {
        "id": "460f203b.a3333", 
        "type": "success", 
        "name": "success", 
        "xml": "<outcome value='success'>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 1756.000244140625, 
        "y": 78, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "964773.4acb289"
            ]
        ]
    }, 
    {
        "id": "2634113c.c7fc8e", 
        "type": "failure", 
        "name": "failure", 
        "xml": "<outcome value='failure'>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 1752.000244140625, 
        "y": 118, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "67cff30a.da3b54"
            ]
        ]
    }, 
    {
        "id": "964773.4acb289", 
        "type": "set", 
        "name": "set token-id", 
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n", 
        "comments": "", 
        "x": 1906.500244140625, 
        "y": 78, 
        "z": "1a9b8475.da0d2c", 
        "wires": [ ]
    }, 
    {
        "id": "3bf66a70.af3866", 
        "type": "execute", 
        "name": "execute RestApiCallNode Get Topology", 
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />", 
        "comments": "", 
        "outputs": 1, 
        "x": 1973.500244140625, 
        "y": 198, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "83daffef.93261", 
                "9a6001a7.b0681"
            ]
        ]
    }, 
    {
        "id": "83daffef.93261", 
        "type": "success", 
        "name": "success", 
        "xml": "<outcome value='success'>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 2216.000244140625, 
        "y": 218, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "815ae1d4.60f8"
            ]
        ]
    }, 
    {
        "id": "815ae1d4.60f8", 
        "type": "block", 
        "name": "block : atomic", 
        "xml": "<block atomic=\"true\">", 
        "atomic": "true", 
        "comments": "", 
        "outputs": 1, 
        "x": 2373.500244140625, 
        "y": 218, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "a1b0634d.e55008"
            ]
        ]
    }, 
    {
        "id": "56a034a.503e6cc", 
        "type": "returnFailure", 
        "name": "return failure", 
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n", 
        "comments": "", 
        "x": 2350.000244140625, 
        "y": 118, 
        "z": "1a9b8475.da0d2c", 
        "wires": [ ]
    }, 
    {
        "id": "9a6001a7.b0681", 
        "type": "failure", 
        "name": "failure", 
        "xml": "<outcome value='failure'>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 2212.000244140625, 
        "y": 118, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "56a034a.503e6cc"
            ]
        ]
    }, 
    {
        "id": "39a13bfe.fb4444", 
        "type": "dgstart", 
        "name": "DGSTART", 
        "outputs": 1, 
        "x": 66, 
        "y": 29, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "5147cfad.5c3908"
            ]
        ]
    }, 
    {
        "id": "5147cfad.5c3908", 
        "type": "service-logic", 
        "name": "DataChange ${project.version}", 
        "module": "DataChange", 
        "version": "${project.version}", 
        "comments": "", 
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>", 
        "outputs": 1, 
        "x": 132, 
        "y": 89, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "15128d59.469f9b"
            ]
        ]
    }, 
    {
        "id": "15128d59.469f9b", 
        "type": "method", 
        "name": "method esr-thirdparty-sdnc-discovery", 
        "xml": "<method rpc='esr-thirdparty-sdnc-discovery' mode='sync'>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 152, 
        "y": 169, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "1baee5be.1b11da"
            ]
        ]
    }, 
    {
        "id": "1baee5be.1b11da", 
        "type": "block", 
        "name": "block : atomic", 
        "xml": "<block atomic=\"true\">\n", 
        "atomic": "false", 
        "comments": "", 
        "outputs": 1, 
        "x": 399.5, 
        "y": 169, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "f40069ea.6c541"
            ]
        ]
    }, 
    {
        "id": "a1b0634d.e55008", 
        "type": "for", 
        "name": "for each Network", 
        "xml": "<for index='nidx' start='0' end='`$topology.networks.network_length`' >\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 1799.500259399414, 
        "y": 317.00001525878906, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "e7339f4e.4a45b8"
            ]
        ]
    }, 
    {
        "id": "e7339f4e.4a45b8", 
        "type": "block", 
        "name": "block", 
        "xml": "<block>\n", 
        "atomic": "false", 
        "comments": "", 
        "outputs": 1, 
        "x": 1948.000259399414, 
        "y": 317.00001525878906, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "e39a1349.d59948", 
                "a69e5196.594768"
            ]
        ]
    }, 
    {
        "id": "e39a1349.d59948", 
        "type": "call", 
        "name": "call update-network-to-aai", 
        "xml": "<call module='DataChange' rpc='update-network-to-aai' mode='sync' >\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 2127.000259399414, 
        "y": 337.00001525878906, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [ ]
        ]
    }, 
    {
        "id": "a69e5196.594768", 
        "type": "set", 
        "name": "set network", 
        "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$nidx].`' />\n", 
        "comments": "", 
        "x": 2082.000259399414, 
        "y": 297.00001525878906, 
        "z": "1a9b8475.da0d2c", 
        "wires": [ ]
    }, 
    {
        "id": "67cff30a.da3b54", 
        "type": "block", 
        "name": "block", 
        "xml": "<block>\n", 
        "atomic": "false", 
        "comments": "", 
        "outputs": 1, 
        "x": 1872.000244140625, 
        "y": 118, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [ ]
        ]
    }, 
    {
        "id": "86d88e9f.569c1", 
        "type": "comment", 
        "name": "Do Nothing", 
        "info": "", 
        "comments": "", 
        "x": 2042.000244140625, 
        "y": 158, 
        "z": "1a9b8475.da0d2c", 
        "wires": [ ]
    }, 
    {
        "id": "9b7ecf5d.bb983", 
        "type": "switchNode", 
        "name": "switch type", 
        "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 919, 
        "y": 254, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "d7810e52.09a7a8", 
                "ef809a67.dde878"
            ]
        ]
    }, 
    {
        "id": "414d6ccb.3d26fc", 
        "type": "block", 
        "name": "block", 
        "xml": "<block>\n", 
        "atomic": "false", 
        "comments": "", 
        "outputs": 1, 
        "x": 786, 
        "y": 254, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "9b7ecf5d.bb983"
            ]
        ]
    }, 
    {
        "id": "d7810e52.09a7a8", 
        "type": "other", 
        "name": "SOTN", 
        "xml": "<outcome value='SOTN'>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 1032, 
        "y": 165, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "73bed9ba.1eeb9"
            ]
        ]
    }, 
    {
        "id": "ef809a67.dde878", 
        "type": "other", 
        "name": "other", 
        "xml": "<outcome value='Other'>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 1047.0000076293945, 
        "y": 404.00003242492676, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "ad793f5e.17f88"
            ]
        ]
    }, 
    {
        "id": "ad793f5e.17f88", 
        "type": "returnFailure", 
        "name": "return failure", 
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n", 
        "comments": "", 
        "x": 1225.0000076293945, 
        "y": 404.00003242492676, 
        "z": "1a9b8475.da0d2c", 
        "wires": [ ]
    }, 
    {
        "id": "ebd26579.8d9818", 
        "type": "execute", 
        "name": "execute Properties", 
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 1413.0001983642578, 
        "y": 46.000009536743164, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [ ]
        ]
    }, 
    {
        "id": "6bff7a95.f6b11c", 
        "type": "switchNode", 
        "name": "switch prop.sdncRestApi.token_id", 
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 1459.5001983642578, 
        "y": 166.00000953674316, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "baf46d81.bf5f6", 
                "789590c1.ea5428"
            ]
        ]
    }, 
    {
        "id": "baf46d81.bf5f6", 
        "type": "other", 
        "name": "Null", 
        "xml": "<outcome value=''>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 1752.000244140625, 
        "y": 158, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "fe0ff87c.8c90c"
            ]
        ]
    }, 
    {
        "id": "789590c1.ea5428", 
        "type": "other", 
        "name": "other", 
        "xml": "<outcome value='Other'>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 1752.000244140625, 
        "y": 198, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "3bf66a70.af3866"
            ]
        ]
    }, 
    {
        "id": "fe0ff87c.8c90c", 
        "type": "execute", 
        "name": "execute RestApiCallNode Get Topology", 
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 1973.500244140625, 
        "y": 158, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "9a6001a7.b0681", 
                "83daffef.93261"
            ]
        ]
    }, 
    {
        "id": "257a5269.7c0d86", 
        "type": "execute", 
        "name": "execute RestconfDiscoveryNode", 
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='establishSubscription' >\n<parameter name=\"subscriberId\" value=\"sotn-controller\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/operations/ietf-subscribed-notifications:establish-subscription'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"sseConnectURL\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/streams/yang-push-json'`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"post\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n<parameter name=\"module\" value=\"DataChange\" />\n<parameter name=\"rpc\" value=\"sotn-notification-handler\" />\n<parameter name=\"mode\" value=\"sync\" />", 
        "comments": "", 
        "outputs": 1, 
        "x": 1456.0001983642578, 
        "y": 306.00000953674316, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [ ]
        ]
    }, 
    {
        "id": "e40bbeb2.1466c", 
        "type": "set", 
        "name": "set encoding-format", 
        "xml": "<set>\n<parameter name='input' value='ietf-subscribed-notifications:establish-subscription.input.' />\n<parameter name=\"`$input + 'encoding'`\" value=\"encode-json\" />", 
        "comments": "", 
        "x": 1416.0001983642578, 
        "y": 266.00000953674316, 
        "z": "1a9b8475.da0d2c", 
        "wires": [ ]
    }, 
    {
        "id": "d34b58fb.df8cd", 
        "type": "comment", 
        "name": "Notification subscription", 
        "info": "", 
        "comments": "", 
        "x": 1421.000343322754, 
        "y": 223.00000858306885, 
        "z": "1a9b8475.da0d2c", 
        "wires": [ ]
    }, 
    {
        "id": "f40069ea.6c541", 
        "type": "switchNode", 
        "name": "switch", 
        "xml": "<switch test=\"`$prop.sdncRestApi.vendor == 'ZTE'`\">\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 106, 
        "y": 294, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "5e28a0df.7fabe", 
                "39367b0f.d19614"
            ]
        ]
    }, 
    {
        "id": "5e28a0df.7fabe", 
        "type": "outcomeFalse", 
        "name": "false", 
        "xml": "<outcome value='false'>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 293, 
        "y": 294, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "fc46fa0c.31e87"
            ]
        ]
    }, 
    {
        "id": "39367b0f.d19614", 
        "type": "outcomeTrue", 
        "name": "true", 
        "xml": "<outcome value='true'>\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 294, 
        "y": 419, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [
                "8828fa0f.91d7c8"
            ]
        ]
    }, 
    {
        "id": "8828fa0f.91d7c8", 
        "type": "call", 
        "name": "call esr-thirdparty-sdnc-of-zte", 
        "xml": "<call module='DataChange' rpc='esr-thirdparty-sdnc-of-zte' mode='sync' >\n", 
        "comments": "", 
        "outputs": 1, 
        "x": 517, 
        "y": 419, 
        "z": "1a9b8475.da0d2c", 
        "wires": [
            [ ]
        ]
    }
]