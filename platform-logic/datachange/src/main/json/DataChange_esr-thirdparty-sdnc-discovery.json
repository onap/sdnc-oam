[
    {
        "id": "ccc764e6.2a3f58",
        "type": "other",
        "name": "update",
        "xml": "<outcome value='Update'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1010.0000610351562,
        "y": 347.6354675292969,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "d689a3b5.6ccb2"
            ]
        ]
    },
    {
        "id": "f9cb3ae2.5da978",
        "type": "other",
        "name": "delete",
        "xml": "<outcome value='delete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1046.2221755981445,
        "y": 549.3022632598877,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "f062.73701f9e9"
            ]
        ]
    },
    {
        "id": "f062.73701f9e9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1196.666820526123,
        "y": 544.3023157119751,
        "z": "4038c990.8e0db8",
        "wires": [
            []
        ]
    },
    {
        "id": "a21a68c9.eff7e8",
        "type": "comment",
        "name": "TODO: Delete topology from AAI",
        "info": "",
        "comments": "",
        "x": 1154.3334884643555,
        "y": 499.9689407348633,
        "z": "4038c990.8e0db8",
        "wires": []
    },
    {
        "id": "6e6fdc62.9b6434",
        "type": "switchNode",
        "name": "switch aai-event-trigger",
        "xml": "<switch test=\"`$data-change-notification-input.aai-event-trigger`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 780.5556640625,
        "y": 408.19097900390625,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "ccc764e6.2a3f58",
                "f9cb3ae2.5da978"
            ]
        ]
    },
    {
        "id": "92bdf572.5d25c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1683.3338623046875,
        "y": 306.08001708984375,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "3d28d456.09ff3c",
                "7f7a2127.329b5",
                "22705375.9edd3c"
            ]
        ]
    },
    {
        "id": "7f7a2127.329b5",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 2028.993408203125,
        "y": 235.99925231933594,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "2cadb97f.089706",
                "f7bc489e.13ac38"
            ]
        ]
    },
    {
        "id": "2cadb97f.089706",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2263.993408203125,
        "y": 213.99925231933594,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "c3384ff3.6f02f"
            ]
        ]
    },
    {
        "id": "f7bc489e.13ac38",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2256.243408203125,
        "y": 267.6421356201172,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "fec99281.027f6"
            ]
        ]
    },
    {
        "id": "c3384ff3.6f02f",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 2423.993537902832,
        "y": 207.99925804138184,
        "z": "4038c990.8e0db8",
        "wires": []
    },
    {
        "id": "5a5fb994.06ecd8",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2477.3268127441406,
        "y": 397.20301818847656,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "89ef6df1.91052",
                "fae42f5c.f4cb3"
            ]
        ]
    },
    {
        "id": "89ef6df1.91052",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2790.8823471069336,
        "y": 426.2030248641968,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "a09e00e9.672c3"
            ]
        ]
    },
    {
        "id": "a09e00e9.672c3",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2974.4378929138184,
        "y": 426.8697454929352,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "a51a4274.99329"
            ]
        ]
    },
    {
        "id": "782718ca.d29ca8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 2935.66019821167,
        "y": 330.091854095459,
        "z": "4038c990.8e0db8",
        "wires": []
    },
    {
        "id": "fae42f5c.f4cb3",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2789.326930999756,
        "y": 330.31409072875977,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "782718ca.d29ca8"
            ]
        ]
    },
    {
        "id": "1ccae2df.41f00d",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 92,
        "y": 118.46875,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "58fe9d13.a929d4"
            ]
        ]
    },
    {
        "id": "58fe9d13.a929d4",
        "type": "service-logic",
        "name": "DataChange ${project.version}",
        "module": "DataChange",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
        "outputs": 1,
        "x": 173.11112594604492,
        "y": 191.4132113456726,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "65345e54.24045"
            ]
        ]
    },
    {
        "id": "65345e54.24045",
        "type": "method",
        "name": "method esr-thirdparty-sdnc-discovery",
        "xml": "<method rpc='esr-thirdparty-sdnc-discovery' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 269.5556869506836,
        "y": 302.1909923553467,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "bfaf2516.9f1ed8"
            ]
        ]
    },
    {
        "id": "bfaf2516.9f1ed8",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 177.77791595458984,
        "y": 409.07997035980225,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "3d8abb30.296914"
            ]
        ]
    },
    {
        "id": "a51a4274.99329",
        "type": "for",
        "name": "for each Network",
        "xml": "<for index='nidx' start='0' end='`$topology.networks.network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3186.4818477630615,
        "y": 426.69095516204834,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "5d1ce51a.5fa03c"
            ]
        ]
    },
    {
        "id": "5d1ce51a.5fa03c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3374.481689453125,
        "y": 426.46875,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "c0ab760c.fa6e88",
                "fcc2d8ca.ddb388"
            ]
        ]
    },
    {
        "id": "c0ab760c.fa6e88",
        "type": "call",
        "name": "call update-network-to-aai",
        "xml": "<call module='DataChange' rpc='update-network-to-aai' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3597.815185546875,
        "y": 487.8021240234375,
        "z": "4038c990.8e0db8",
        "wires": [
            []
        ]
    },
    {
        "id": "fcc2d8ca.ddb388",
        "type": "set",
        "name": "set network",
        "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$nidx].`' />\n",
        "comments": "",
        "x": 3551.037353515625,
        "y": 388.5798645019531,
        "z": "4038c990.8e0db8",
        "wires": []
    },
    {
        "id": "fec99281.027f6",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2417.8148040771484,
        "y": 262.7465147972107,
        "z": "4038c990.8e0db8",
        "wires": [
            []
        ]
    },
    {
        "id": "6f24231d.7f75ac",
        "type": "comment",
        "name": "Do Nothing",
        "info": "",
        "comments": "",
        "x": 2553.3703778584795,
        "y": 261.6353905465868,
        "z": "4038c990.8e0db8",
        "wires": []
    },
    {
        "id": "5f7395df.91559c",
        "type": "switchNode",
        "name": "switch type",
        "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1285.0002098083496,
        "y": 349.96879863739014,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "55c13fbf.6fe1",
                "a730dd92.e15e7"
            ]
        ]
    },
    {
        "id": "d689a3b5.6ccb2",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1140.0000457763672,
        "y": 347.96878719329834,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "5f7395df.91559c"
            ]
        ]
    },
    {
        "id": "55c13fbf.6fe1",
        "type": "other",
        "name": "SOTN",
        "xml": "<outcome value='SOTN'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1438.9999923706055,
        "y": 305.9687690734863,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "92bdf572.5d25c8"
            ]
        ]
    },
    {
        "id": "a730dd92.e15e7",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1435.9999923706055,
        "y": 429.96877670288086,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "d8ac2f10.6b09a"
            ]
        ]
    },
    {
        "id": "d8ac2f10.6b09a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n",
        "comments": "",
        "x": 1663.7726364135742,
        "y": 430.40794467926025,
        "z": "4038c990.8e0db8",
        "wires": []
    },
    {
        "id": "3d28d456.09ff3c",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1977.03125,
        "y": 153,
        "z": "4038c990.8e0db8",
        "wires": [
            []
        ]
    },
    {
        "id": "22705375.9edd3c",
        "type": "switchNode",
        "name": "switch prop.sdncRestApi.token_id",
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2022.5311279296875,
        "y": 373.9687833786011,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "abe94950.0dc9a8",
                "a0f2ac1b.30651"
            ]
        ]
    },
    {
        "id": "abe94950.0dc9a8",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 2238.5312461853027,
        "y": 345.9687604904175,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "558bf2c5.98923c"
            ]
        ]
    },
    {
        "id": "a0f2ac1b.30651",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2237.5311851501465,
        "y": 395.46877002716064,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "5a5fb994.06ecd8"
            ]
        ]
    },
    {
        "id": "558bf2c5.98923c",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2473.031204223633,
        "y": 343.0000123977661,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "fae42f5c.f4cb3",
                "89ef6df1.91052"
            ]
        ]
    },
    {
        "id": "3d8abb30.296914",
        "type": "switchNode",
        "name": "switch",
        "xml": "<switch test=\"`$prop.sdncRestApi.vendor == 'ZTE'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 356,
        "y": 409,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "f391a60f.c95d38",
                "73809990.a13bc8"
            ]
        ]
    },
    {
        "id": "f391a60f.c95d38",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 543,
        "y": 409,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "6e6fdc62.9b6434"
            ]
        ]
    },
    {
        "id": "73809990.a13bc8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 544,
        "y": 534,
        "z": "4038c990.8e0db8",
        "wires": [
            [
                "90fe0c18.3c55"
            ]
        ]
    },
    {
        "id": "90fe0c18.3c55",
        "type": "call",
        "name": "call esr-thirdparty-sdnc-of-zte",
        "xml": "<call module='DataChange' rpc='esr-thirdparty-sdnc-of-zte' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 795,
        "y": 534,
        "z": "4038c990.8e0db8",
        "wires": [
            []
        ]
    }
]