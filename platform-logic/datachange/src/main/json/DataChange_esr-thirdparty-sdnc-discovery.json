[
    {
        "id": "c3dc4adb.8c6008",
        "type": "other",
        "name": "update",
        "xml": "<outcome value='Update'>\n",
        "comments": "",
        "outputs": 1,
        "x": 739,
        "y": 311,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "bd0845c9.41d478"
            ]
        ]
    },
    {
        "id": "71253ee0.23906",
        "type": "other",
        "name": "delete",
        "xml": "<outcome value='Delete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 739,
        "y": 391,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "3f0bf71e.180588"
            ]
        ]
    },
    {
        "id": "3f0bf71e.180588",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 880.5,
        "y": 391,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "67540de7.5dd14c"
            ]
        ]
    },
    {
        "id": "de801ea6.e90758",
        "type": "switchNode",
        "name": "switch aai-event-trigger",
        "xml": "<switch test=\"`$data-change-notification-input.aai-event-trigger`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 569.5,
        "y": 351,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "c3dc4adb.8c6008",
                "71253ee0.23906"
            ]
        ]
    },
    {
        "id": "1007cea6.282501",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1266.5,
        "y": 222,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "95e785b5.d067b",
                "7a1058d1.4b2d6",
                "558bdafc.122dbc",
                "54848569.ec4d54",
                "25993b47.1f060c"
            ]
        ]
    },
    {
        "id": "7a1058d1.4b2d6",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1539.5001983642578,
        "y": 143.00000953674316,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "1f13ca65.eddc8e",
                "fa7642f7.a126c8"
            ]
        ]
    },
    {
        "id": "1f13ca65.eddc8e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1829.000244140625,
        "y": 135,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "a5768e87.aa1bb"
            ]
        ]
    },
    {
        "id": "fa7642f7.a126c8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1825.000244140625,
        "y": 175,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "334af206.383786"
            ]
        ]
    },
    {
        "id": "a5768e87.aa1bb",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 1979.500244140625,
        "y": 135,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "272f0d19.0aa972",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2046.500244140625,
        "y": 255,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "c0f8711f.5047d8",
                "6134ff85.3a875"
            ]
        ]
    },
    {
        "id": "c0f8711f.5047d8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2289.000244140625,
        "y": 275,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "f5e8d64.1d84ba8"
            ]
        ]
    },
    {
        "id": "f5e8d64.1d84ba8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2446.500244140625,
        "y": 275,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "f392518f.1c82f",
                "f7bc5da7.da31b"
            ]
        ]
    },
    {
        "id": "dd9ef895.8d06e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 2423.000244140625,
        "y": 175,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "6134ff85.3a875",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2285.000244140625,
        "y": 175,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "dd9ef895.8d06e8"
            ]
        ]
    },
    {
        "id": "bca2c88c.f5748",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 192,
        "y": 86,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "1c8eebdb.be2d0c"
            ]
        ]
    },
    {
        "id": "1c8eebdb.be2d0c",
        "type": "service-logic",
        "name": "DataChange ${project.version}",
        "module": "DataChange",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='DataChange' version='${project.version}'>",
        "outputs": 1,
        "x": 205,
        "y": 146,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "a6fcf3ab.5f9578"
            ]
        ]
    },
    {
        "id": "a6fcf3ab.5f9578",
        "type": "method",
        "name": "method esr-thirdparty-sdnc-discovery",
        "xml": "<method rpc='esr-thirdparty-sdnc-discovery' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 225,
        "y": 226,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "6420c8d3.d15ee"
            ]
        ]
    },
    {
        "id": "6420c8d3.d15ee",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 472.5,
        "y": 226,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "39152f22.f0d4a8"
            ]
        ]
    },
    {
        "id": "f392518f.1c82f",
        "type": "for",
        "name": "for each Network",
        "xml": "<for index='nidx' start='0' end='`$topology.networks.network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2665.500244140625,
        "y": 204,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "48caa041.662da"
            ]
        ]
    },
    {
        "id": "48caa041.662da",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2814.000244140625,
        "y": 204,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "f9d6723a.6cdf78",
                "929dfcd4.4e318"
            ]
        ]
    },
    {
        "id": "f9d6723a.6cdf78",
        "type": "call",
        "name": "call update-network-to-aai",
        "xml": "<call module='DataChange' rpc='update-network-to-aai' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2993.000244140625,
        "y": 224,
        "z": "fcc91756.c8d038",
        "wires": [
            []
        ]
    },
    {
        "id": "929dfcd4.4e318",
        "type": "set",
        "name": "set network",
        "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$nidx].`' />\n",
        "comments": "",
        "x": 2948.000244140625,
        "y": 184,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "334af206.383786",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1945.000244140625,
        "y": 175,
        "z": "fcc91756.c8d038",
        "wires": [
            []
        ]
    },
    {
        "id": "2b9bc1fc.7f9d86",
        "type": "comment",
        "name": "Do Nothing",
        "info": "",
        "comments": "",
        "x": 2115.000244140625,
        "y": 215,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "ec977bcd.52b8a8",
        "type": "switchNode",
        "name": "switch type",
        "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 992,
        "y": 311,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "e6327558.85a0e",
                "ece3c1dc.08a25",
                "57f0cdff.7f0d04",
                "e6efb547.0bd5a8"
            ]
        ]
    },
    {
        "id": "bd0845c9.41d478",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 859,
        "y": 311,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "ec977bcd.52b8a8"
            ]
        ]
    },
    {
        "id": "e6327558.85a0e",
        "type": "other",
        "name": "SOTN",
        "xml": "<outcome value='SOTN'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1105,
        "y": 222,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "1007cea6.282501"
            ]
        ]
    },
    {
        "id": "ece3c1dc.08a25",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1134.5,
        "y": 683.5001220703125,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "752a836e.32daf4"
            ]
        ]
    },
    {
        "id": "752a836e.32daf4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n",
        "comments": "",
        "x": 1320.75,
        "y": 709.5001220703125,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "95e785b5.d067b",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1486.0001983642578,
        "y": 103.00000953674316,
        "z": "fcc91756.c8d038",
        "wires": [
            []
        ]
    },
    {
        "id": "558bdafc.122dbc",
        "type": "switchNode",
        "name": "switch prop.sdncRestApi.token_id",
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1532.5001983642578,
        "y": 223.00000953674316,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "9764857a.46386",
                "b55a5855.1b4c4"
            ]
        ]
    },
    {
        "id": "9764857a.46386",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1825.000244140625,
        "y": 215,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "d18413fb.5938e8"
            ]
        ]
    },
    {
        "id": "b55a5855.1b4c4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1825.000244140625,
        "y": 255,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "272f0d19.0aa972"
            ]
        ]
    },
    {
        "id": "d18413fb.5938e8",
        "type": "execute",
        "name": "execute RestApiCallNode Get Topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"topology\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2046.500244140625,
        "y": 215,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "6134ff85.3a875",
                "c0f8711f.5047d8"
            ]
        ]
    },
    {
        "id": "25993b47.1f060c",
        "type": "execute",
        "name": "execute RestconfDiscoveryNode",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='establishSubscription' >\n<parameter name=\"subscriberId\" value=\"sotn-controller\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/operations/ietf-subscribed-notifications:establish-subscription'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"sseConnectURL\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/streams/yang-push-json'`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"post\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n<parameter name=\"module\" value=\"DataChange\" />\n<parameter name=\"rpc\" value=\"sotn-notification-handler\" />\n<parameter name=\"mode\" value=\"sync\" />",
        "comments": "",
        "outputs": 1,
        "x": 1529.0001983642578,
        "y": 363.00000953674316,
        "z": "fcc91756.c8d038",
        "wires": [
            []
        ]
    },
    {
        "id": "54848569.ec4d54",
        "type": "set",
        "name": "set encoding-format",
        "xml": "<set>\n<parameter name='input' value='ietf-subscribed-notifications:establish-subscription.input.' />\n<parameter name=\"`$input + 'encoding'`\" value=\"encode-json\" />",
        "comments": "",
        "x": 1489.0001983642578,
        "y": 323.00000953674316,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "c147e994.7edd08",
        "type": "comment",
        "name": "Notification subscription",
        "info": "",
        "comments": "",
        "x": 1494.000343322754,
        "y": 280.00000858306885,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "39152f22.f0d4a8",
        "type": "switchNode",
        "name": "switch",
        "xml": "<switch test=\"`$prop.sdncRestApi.vendor == 'ZTE'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 179,
        "y": 351,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "404d2f08.96ad7",
                "74ffd1db.2f31c8"
            ]
        ]
    },
    {
        "id": "404d2f08.96ad7",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 366,
        "y": 351,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "de801ea6.e90758"
            ]
        ]
    },
    {
        "id": "74ffd1db.2f31c8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 140.00003051757812,
        "y": 1107.75,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "c3886c05.a14928"
            ]
        ]
    },
    {
        "id": "c3886c05.a14928",
        "type": "call",
        "name": "call esr-thirdparty-sdnc-of-zte",
        "xml": "<call module='DataChange' rpc='esr-thirdparty-sdnc-of-zte' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 371.75,
        "y": 1124.5000610351562,
        "z": "fcc91756.c8d038",
        "wires": [
            []
        ]
    },
    {
        "id": "57f0cdff.7f0d04",
        "type": "other",
        "name": "TAPI",
        "xml": "<outcome value='TAPI'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1183,
        "y": 456,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "9159c5db.f9ecb"
            ]
        ]
    },
    {
        "id": "9159c5db.f9ecb",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1346,
        "y": 455,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "359e52a9.fb7c36"
            ]
        ]
    },
    {
        "id": "359e52a9.fb7c36",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/cxf/tapi/v2/topologies?topology-id-or-name=otn'`\"/>  \n    <parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>  \n    <parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>  \n    <parameter name=\"format\" value=\"json\"/>  \n    <parameter name=\"httpMethod\" value=\"get\"/>  \n    <parameter name=\"responsePrefix\" value=\"topologies\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.tapi.jks\"/>  \n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>  \n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>  \n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1507,
        "y": 454,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "bdd5dc28.9d2908",
                "a872bbb4.c3aec8"
            ]
        ]
    },
    {
        "id": "a872bbb4.c3aec8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1649,
        "y": 530,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "e24829ea.497098"
            ]
        ]
    },
    {
        "id": "bdd5dc28.9d2908",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1683,
        "y": 451,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "ba70e873.59e928"
            ]
        ]
    },
    {
        "id": "ba70e873.59e928",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Error executing get topology TAPI rest api\" />\n\n",
        "comments": "",
        "x": 1853,
        "y": 450,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "e24829ea.497098",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1810,
        "y": 529,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "e5d11bee.6d3f3"
            ]
        ]
    },
    {
        "id": "e5d11bee.6d3f3",
        "type": "for",
        "name": "for each topology",
        "xml": "<for index='tidx' start='0' end=\"`$topologies.topology_length`\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1989,
        "y": 529,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "f9dbd640.006d18"
            ]
        ]
    },
    {
        "id": "f9dbd640.006d18",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2156,
        "y": 530,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "c60ea7f.3bd2058",
                "b4f9b29d.c49458"
            ]
        ]
    },
    {
        "id": "c60ea7f.3bd2058",
        "type": "set",
        "name": "set topology",
        "xml": "<set>\n<parameter name='topology.' value='`$topologies.topology[$tidx].`' />\n",
        "comments": "",
        "x": 2315,
        "y": 531,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "b4f9b29d.c49458",
        "type": "call",
        "name": "call tapi-update-network-to-aai",
        "xml": "<call module='DataChange' rpc='tapi-update-network-to-aai' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2306,
        "y": 597,
        "z": "fcc91756.c8d038",
        "wires": [
            []
        ]
    },
    {
        "id": "e6efb547.0bd5a8",
        "type": "outcome",
        "name": "MSA",
        "xml": "<outcome value='MSA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1153.677324295044,
        "y": 612.8993349075317,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "e1657417.9cefe8"
            ]
        ]
    },
    {
        "id": "e1657417.9cefe8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1315.6773872375488,
        "y": 610.899335861206,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "1f0bde0a.fa2cb2"
            ]
        ]
    },
    {
        "id": "1f0bde0a.fa2cb2",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/cxf/openroadm/v2/networks/otn-topology'`\"/>  \n    <parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\"/>  \n    <parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\"/>  \n    <parameter name=\"format\" value=\"json\"/>  \n    <parameter name=\"httpMethod\" value=\"get\"/>  \n    <parameter name=\"responsePrefix\" value=\"networks\"/>\n    <parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.msa.jks\"/>  \n    <parameter name=\"trustStorePassword\" value=\"adminadmin\"/>  \n    <parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>  \n    <parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1492.6771354675293,
        "y": 602.8992919921875,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "7133cad2.99b11c",
                "c3d837c.d0ca2c8"
            ]
        ]
    },
    {
        "id": "7133cad2.99b11c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1645.6771354675293,
        "y": 599.8992919921875,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "eab907ff.882ae8"
            ]
        ]
    },
    {
        "id": "eab907ff.882ae8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Error executing get topology MSA rest api\" />\n\n",
        "comments": "",
        "x": 1820.6771354675293,
        "y": 598.8992919921875,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "c3d837c.d0ca2c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1651.6771354675293,
        "y": 672.8992919921875,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "224d6e37.21354a"
            ]
        ]
    },
    {
        "id": "224d6e37.21354a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1835.6771354675293,
        "y": 674.8992919921875,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "622b9c10.ebdeac"
            ]
        ]
    },
    {
        "id": "622b9c10.ebdeac",
        "type": "call",
        "name": "call msa-update-network-to-aai",
        "xml": "<call module='DataChange' rpc='msa-update-network-to-aai' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2114.677001953125,
        "y": 672.8992919921875,
        "z": "fcc91756.c8d038",
        "wires": [
            []
        ]
    },
    {
        "id": "67540de7.5dd14c",
        "type": "switchNode",
        "name": "switch type",
        "xml": "<switch test=\"`$prop.sdncRestApi.type`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 285.566650390625,
        "y": 841.5666809082031,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "ed11f93e.13815",
                "b9986099.553ab8",
                "eeccf78a.d71e3"
            ]
        ]
    },
    {
        "id": "ed11f93e.13815",
        "type": "outcome",
        "name": "MSA",
        "xml": "<outcome value='MSA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 464.857177734375,
        "y": 758.9285888671875,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "40980c29.103654"
            ]
        ]
    },
    {
        "id": "b9986099.553ab8",
        "type": "other",
        "name": "TAPI",
        "xml": "<outcome value='TAPI'>\n",
        "comments": "",
        "outputs": 1,
        "x": 473.6070556640625,
        "y": 1009.6428527832031,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "b9906adb.aedb"
            ]
        ]
    },
    {
        "id": "40980c29.103654",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 618.607177734375,
        "y": 755.7143249511719,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "f4759d50.5acb",
                "6300b23d.858844"
            ]
        ]
    },
    {
        "id": "b9906adb.aedb",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 623,
        "y": 1009.5,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "ee72aef0.96b35",
                "80047dba.a18518"
            ]
        ]
    },
    {
        "id": "eeccf78a.d71e3",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 576,
        "y": 1173.5,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "a7ccb229.5cc45"
            ]
        ]
    },
    {
        "id": "a7ccb229.5cc45",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unsupported type = ' + $prop.sdncRestApi.type`\" />\n\n",
        "comments": "",
        "x": 738,
        "y": 1212.5,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "f4759d50.5acb",
        "type": "get-resource",
        "name": "get resources from DB -controller_id",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT controller_id\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE controller_id = $controllerid'\npfx='dbcontrollerid'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 850.5,
        "y": 803.5,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "418351d.550fdb",
                "5d9de12a.c40778",
                "4f52ba75.31f414"
            ]
        ]
    },
    {
        "id": "6300b23d.858844",
        "type": "set",
        "name": "set controller_id",
        "xml": "<set>\n<parameter name='controllerid' value=\"`$prop.sdncRestApi.type + '_' + $prop.sdncRestApi.thirdpartySdnc.url + '_' + $prop.sdncRestApi.thirdpartySdnc.id`\" />\n\n\n\n",
        "comments": "",
        "x": 810.5,
        "y": 737.5,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "418351d.550fdb",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1089.5,
        "y": 823.5,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "7d4b021f.b58864"
            ]
        ]
    },
    {
        "id": "7d4b021f.b58864",
        "type": "delete",
        "name": "delete from db",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource'\n    resource=\"SQL\"\n    key=\"DELETE FROM TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE WHERE controller_id = $controllerid\">",
        "comments": "",
        "outputs": 1,
        "x": 1258.5,
        "y": 830.5,
        "z": "fcc91756.c8d038",
        "wires": [
            []
        ]
    },
    {
        "id": "ee72aef0.96b35",
        "type": "set",
        "name": "set controller_id",
        "xml": "<set>\n<parameter name='controllerid' value=\"`$prop.sdncRestApi.type + '_' + $prop.sdncRestApi.thirdpartySdnc.url + '_' + $prop.sdncRestApi.thirdpartySdnc.id`\" />\n\n\n\n",
        "comments": "",
        "x": 787.5,
        "y": 965.5,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "80047dba.a18518",
        "type": "get-resource",
        "name": "get resources from DB -controller_id",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT controller_id\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE controller_id = $controllerid'\npfx='dbcontrollerid'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 800.5,
        "y": 1054.5,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "193e8ffa.2d1e68",
                "392a4087.7340c",
                "3b51b50f.fabfaa"
            ]
        ]
    },
    {
        "id": "193e8ffa.2d1e68",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1025.5,
        "y": 1069.5,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "7c3655cf.c7356c"
            ]
        ]
    },
    {
        "id": "7c3655cf.c7356c",
        "type": "delete",
        "name": "delete from db",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource'\n    resource=\"SQL\"\n    key=\"DELETE FROM TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE WHERE controller_id = $controllerid\">",
        "comments": "",
        "outputs": 1,
        "x": 1196.5,
        "y": 1070.5,
        "z": "fcc91756.c8d038",
        "wires": [
            []
        ]
    },
    {
        "id": "5d9de12a.c40778",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1075.5,
        "y": 902.5,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "44b36cb9.4f203c"
            ]
        ]
    },
    {
        "id": "392a4087.7340c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1006.5,
        "y": 1142.5,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "568e56df.183be8"
            ]
        ]
    },
    {
        "id": "44b36cb9.4f203c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Failure in getting controller-id from DB\" />\n\n",
        "comments": "",
        "x": 1236.5,
        "y": 907.5,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "4f52ba75.31f414",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1066.5,
        "y": 962.5,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "67091014.c5cb48"
            ]
        ]
    },
    {
        "id": "67091014.c5cb48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"controller-id could not be found in DB\" />\n\n",
        "comments": "",
        "x": 1215.5,
        "y": 964.5,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "568e56df.183be8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"Failure in getting controller-id from DB\" />\n\n",
        "comments": "",
        "x": 1154.5,
        "y": 1143.5,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "3b51b50f.fabfaa",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1006.5,
        "y": 1186.5,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "74792395.d77524"
            ]
        ]
    },
    {
        "id": "74792395.d77524",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n <parameter name='ack-final' value='Y'/>\n <parameter name=\"error-code\" value=\"500\" />\n <parameter name=\"error-message\" value=\"controller-id could not be found in DB\" />\n\n",
        "comments": "",
        "x": 1171.5,
        "y": 1183.5,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "f7bc5da7.da31b",
        "type": "switchNode",
        "name": "switch network_length",
        "xml": "<switch test='`$topology.networks.network_length >= 2`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2682,
        "y": 335,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "aa4a8663.38bb68"
            ]
        ]
    },
    {
        "id": "aa4a8663.38bb68",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2864,
        "y": 336,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "efdac693.289728"
            ]
        ]
    },
    {
        "id": "6a7f62ea.d32524",
        "type": "for",
        "name": "for each Network",
        "xml": "<for index='netidx' start='0' end='`$topology.networks.network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3237,
        "y": 329,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "de962ed4.8e2558"
            ]
        ]
    },
    {
        "id": "de962ed4.8e2558",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3455,
        "y": 326,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "d31ddaea.690348",
                "bbbca45f.8e2228",
                "acccc325.a38838"
            ]
        ]
    },
    {
        "id": "73e20b64.41827c",
        "type": "call",
        "name": "call update-tp-ttp-relationship",
        "xml": "<call module='DataChange' rpc='update-tp-ttp-relationship' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3270,
        "y": 389,
        "z": "fcc91756.c8d038",
        "wires": [
            []
        ]
    },
    {
        "id": "efdac693.289728",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3034,
        "y": 332,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "6a7f62ea.d32524",
                "73e20b64.41827c"
            ]
        ]
    },
    {
        "id": "acccc325.a38838",
        "type": "set",
        "name": "unset network",
        "xml": "<set>\n<parameter name='network.' value='' />\n",
        "comments": "",
        "x": 3614,
        "y": 266,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "d31ddaea.690348",
        "type": "set",
        "name": "set network",
        "xml": "<set>\n<parameter name='network.' value='`$topology.networks.network[$netidx].`' />\n",
        "comments": "",
        "x": 3608,
        "y": 314,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "bbbca45f.8e2228",
        "type": "switchNode",
        "name": "switch network-types with topologyId",
        "xml": "<switch test='`$network.te-topology-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3685,
        "y": 361,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "e4f22bce.03ea18",
                "2f6da0f9.e964d8"
            ]
        ]
    },
    {
        "id": "e4f22bce.03ea18",
        "type": "outcome",
        "name": "11",
        "xml": "<outcome value='11'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3911,
        "y": 330,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "a545d36e.f0b618"
            ]
        ]
    },
    {
        "id": "2f6da0f9.e964d8",
        "type": "outcome",
        "name": "33",
        "xml": "<outcome value='33'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3911,
        "y": 391,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "d2ccc5d0.bc949"
            ]
        ]
    },
    {
        "id": "dcbdf3ee.469d4",
        "type": "set",
        "name": "set network-otn",
        "xml": "<set>\n<parameter name='network-otn.' value='`$topology.networks.network[$netidx].`' />\n",
        "comments": "",
        "x": 4206,
        "y": 330,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "6a7bd0f0.92b65",
        "type": "set",
        "name": "set network eth",
        "xml": "<set>\n<parameter name='network-eth.' value='`$topology.networks.network[$netidx].`' />\n",
        "comments": "",
        "x": 4206,
        "y": 391,
        "z": "fcc91756.c8d038",
        "wires": []
    },
    {
        "id": "a545d36e.f0b618",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4045,
        "y": 330,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "dcbdf3ee.469d4"
            ]
        ]
    },
    {
        "id": "d2ccc5d0.bc949",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4046,
        "y": 391,
        "z": "fcc91756.c8d038",
        "wires": [
            [
                "6a7bd0f0.92b65"
            ]
        ]
    }
]