[
    {
        "id": "a60c3a75.bbec5",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 213,
        "y": 182,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "5b510e2a.808e9"
            ]
        ]
    },
    {
        "id": "c50c5fff.124b48",
        "type": "method",
        "name": "method",
        "xml": "<method rpc='optical-service-create' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 212,
        "y": 257,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "95411f3f.dd7f98"
            ]
        ]
    },
    {
        "id": "5b510e2a.808e9",
        "type": "service-logic",
        "name": "optical-service ${project.version}",
        "module": "optical-service",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='optical-service' version='${project.version}'>",
        "outputs": 1,
        "x": 430.5,
        "y": 165,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "c50c5fff.124b48"
            ]
        ]
    },
    {
        "id": "95411f3f.dd7f98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 388,
        "y": 270,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "3ce1c2e1.3b2f6e",
                "4f2664fb.690704",
                "8396ec44.a3b3f",
                "98a2e7e3.d11d58",
                "dbd48c3a.1af36",
                "79f9f3f0.aa019c",
                "a32436b4.dcfeb8",
                "6cb71359.685f54"
            ]
        ]
    },
    {
        "id": "4f2664fb.690704",
        "type": "switchNode",
        "name": "switch : domain-type",
        "xml": "<switch test='`$optical-service-create-input.payload.domain-type`'>\n    \n",
        "comments": "",
        "outputs": 1,
        "x": 265.5,
        "y": 583,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "d95d35a6.d10db",
                "6077e8a.adc5618"
            ]
        ]
    },
    {
        "id": "d95d35a6.d10db",
        "type": "outcome",
        "name": "MSA",
        "xml": "<outcome value='MSA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 568,
        "y": 553,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "7a015c66.3154ec"
            ]
        ]
    },
    {
        "id": "6077e8a.adc5618",
        "type": "outcome",
        "name": "TAPI",
        "xml": "<outcome value='TAPI'>\n",
        "comments": "",
        "outputs": 1,
        "x": 564,
        "y": 662,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "ebb70e0a.9be68"
            ]
        ]
    },
    {
        "id": "3ce1c2e1.3b2f6e",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n<parameter name='fileName' value='/opt/onap/sdnc/data/properties/optical-service-dg.properties' />\n<parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 770,
        "y": 145,
        "z": "f1813121.5d5738",
        "wires": [
            []
        ]
    },
    {
        "id": "7a015c66.3154ec",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 756,
        "y": 554,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "3e4acd01.4d0db2"
            ]
        ]
    },
    {
        "id": "ebb70e0a.9be68",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 749,
        "y": 667,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "9e442bec.ab7e8"
            ]
        ]
    },
    {
        "id": "8396ec44.a3b3f",
        "type": "call",
        "name": "call validate-input-parameters",
        "xml": "<call module='optical-service' rpc='optical-validate-input-params' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 856,
        "y": 92,
        "z": "f1813121.5d5738",
        "wires": [
            []
        ]
    },
    {
        "id": "9e442bec.ab7e8",
        "type": "call",
        "name": "call TAPI DG",
        "xml": "<call module='optical-service' rpc='service-create-tapi' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 948,
        "y": 665,
        "z": "f1813121.5d5738",
        "wires": [
            []
        ]
    },
    {
        "id": "3e4acd01.4d0db2",
        "type": "call",
        "name": "call MSA DG",
        "xml": "<call module='optical-service' rpc='service-create-msa' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 960,
        "y": 550,
        "z": "f1813121.5d5738",
        "wires": [
            []
        ]
    },
    {
        "id": "98a2e7e3.d11d58",
        "type": "get-resource",
        "name": "get resources from DB -controller_id",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT controller_id\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE interface_name = $optical-service-create-input.payload.service-aend.port-id\nAND interface_id = $optical-service-create-input.payload.service-aend.port-name'\npfx='controllerid'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 746,
        "y": 230,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "130f8c79.83a0ec"
            ]
        ]
    },
    {
        "id": "dbd48c3a.1af36",
        "type": "execute",
        "name": "split node-id a-end retrieved from DB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$controller-id`'/>\n<parameter name=\"regex\" value=\"_\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 765,
        "y": 283,
        "z": "f1813121.5d5738",
        "wires": [
            []
        ]
    },
    {
        "id": "130f8c79.83a0ec",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 976,
        "y": 229,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "526e75aa.f179f4"
            ]
        ]
    },
    {
        "id": "526e75aa.f179f4",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='controller-id' value='`$controllerid.controller-id`' />\n\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "x": 1129,
        "y": 232,
        "z": "f1813121.5d5738",
        "wires": []
    },
    {
        "id": "79f9f3f0.aa019c",
        "type": "set",
        "name": "set controller-ip",
        "xml": "<set>\n<parameter name='controller-ip' value='`$param-prefix[1]`' />\n",
        "comments": "",
        "x": 705,
        "y": 341,
        "z": "f1813121.5d5738",
        "wires": []
    },
    {
        "id": "a32436b4.dcfeb8",
        "type": "get-resource",
        "name": "get-resource",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT *\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE interface_name = $optical-service-create-input.payload.service-aend.port-id\nAND interface_id = $optical-service-create-input.payload.service-aend.port-name'\npfx='db-aend'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 616,
        "y": 405,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "73558010.2c724"
            ]
        ]
    },
    {
        "id": "6cb71359.685f54",
        "type": "get-resource",
        "name": "get-resource",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT *\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE interface_name = $optical-service-create-input.payload.service-zend.port-id\nAND interface_id = $optical-service-create-input.payload.service-zend.port-name'\npfx='db-zend'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 612,
        "y": 477,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "c9ac9911.a76998"
            ]
        ]
    },
    {
        "id": "73558010.2c724",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 805,
        "y": 402,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "35f9f711.be4718"
            ]
        ]
    },
    {
        "id": "35f9f711.be4718",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='aend-nodeid' value='`$db-aend.pnf-id`' />\n<parameter name='a-end-pnf-name' value='`$db-aend.pnf-name`' />\n<parameter name='aend-clli' value='`$db-aend.clli`' />\n\n\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "x": 967,
        "y": 401,
        "z": "f1813121.5d5738",
        "wires": []
    },
    {
        "id": "c9ac9911.a76998",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 803,
        "y": 476,
        "z": "f1813121.5d5738",
        "wires": [
            [
                "1b6fe865.a8bca8"
            ]
        ]
    },
    {
        "id": "1b6fe865.a8bca8",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='zend-nodeid' value='`$db-zend.pnf-id`' />\n<parameter name='z-end-pnf-name' value='`$db-zend.pnf-name`' />\n<parameter name='zend-clli' value='`$db-zend.clli`' />\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "x": 971,
        "y": 473,
        "z": "f1813121.5d5738",
        "wires": []
    }
]