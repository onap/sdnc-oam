[
    {
        "id": "dc8e74bc.6b0e6",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 201.5,
        "y": 89.5,
        "z": "78cee624.48d318",
        "wires": [
            [
                "793fbbb8.688d0c"
            ]
        ]
    },
    {
        "id": "793fbbb8.688d0c",
        "type": "service-logic",
        "name": "optical-service ${project.version}",
        "module": "optical-service",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='optical-service' version='${project.version}'>",
        "outputs": 1,
        "x": 388.5,
        "y": 38.5,
        "z": "78cee624.48d318",
        "wires": [
            [
                "fac8c114.6a11a"
            ]
        ]
    },
    {
        "id": "fac8c114.6a11a",
        "type": "method",
        "name": "method",
        "xml": "<method rpc='aai-delete-service-handling' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 242.5,
        "y": 212.5,
        "z": "78cee624.48d318",
        "wires": [
            [
                "af5e3982.ec86d8"
            ]
        ]
    },
    {
        "id": "af5e3982.ec86d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 415.5,
        "y": 211.5,
        "z": "78cee624.48d318",
        "wires": [
            [
                "47ce9b8c.699c64",
                "532ef147.e30af8",
                "d5300514.b84e18",
                "e3be8795.085c9",
                "31c5321a.c7540e",
                "137b4c1c.0ee49c"
            ]
        ]
    },
    {
        "id": "47ce9b8c.699c64",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/async-notif.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Inside Revert PInterface details\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 646.5,
        "y": 98.5,
        "z": "78cee624.48d318",
        "wires": [
            []
        ]
    },
    {
        "id": "532ef147.e30af8",
        "type": "get-resource",
        "name": "Get service from AAI",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\nresource=\"service-instance\"\n key='customer.global-customer-id = $output.global-customer-id AND\n     service-subscription.service-type = $output.service-type AND\n     service-instance.service-instance-id = $output.service-instance-id' \npfx='aai.service'      local-only='false'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 665.5,
        "y": 214.5,
        "z": "78cee624.48d318",
        "wires": [
            []
        ]
    },
    {
        "id": "d5300514.b84e18",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/async-notif.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Inside Revert PInterface details\"/>\n<parameter name=\"field2\" value=\"`$aai.service.orchestration-status`\"/>\n<parameter name=\"field3\" value=\"`$aai.service.relationship-list.relationship_length`\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 675.5,
        "y": 280.5,
        "z": "78cee624.48d318",
        "wires": [
            []
        ]
    },
    {
        "id": "e3be8795.085c9",
        "type": "for",
        "name": "for",
        "xml": "<for index='idx' start='1' end='`$aai.service.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 648.5,
        "y": 343.5,
        "z": "78cee624.48d318",
        "wires": [
            [
                "3755c730.096448"
            ]
        ]
    },
    {
        "id": "9620ad1b.3b5ab",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='pnf-name' value='`$aai.service.relationship-list.relationship[$idx].relationship-data[0].relationship-value`' />\n<parameter name='pinterface-name' value='`$aai.service.relationship-list.relationship[$idx].relationship-data[1].relationship-value`' />\n\n",
        "comments": "",
        "x": 1058.5,
        "y": 30.5,
        "z": "78cee624.48d318",
        "wires": []
    },
    {
        "id": "7afe7104.170b88",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/async-notif.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Inside Revert PInterface details\"/>\n<parameter name=\"field2\" value=\"`$pnf-name`\"/>\n<parameter name=\"field3\" value=\"`$pinterface-name`\"/>\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1081.5,
        "y": 99.5,
        "z": "78cee624.48d318",
        "wires": [
            []
        ]
    },
    {
        "id": "31c5321a.c7540e",
        "type": "delete",
        "name": "delete service instance AAI",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\nresource=\"service-instance\"\nkey='customer.global-customer-id = $output.global-customer-id AND\nservice-subscription.service-type = $output.service-type AND\nservice-instance.service-instance-id = $output.service-instance-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 668.5,
        "y": 419.5,
        "z": "78cee624.48d318",
        "wires": [
            []
        ]
    },
    {
        "id": "3755c730.096448",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 832.5,
        "y": 347.5,
        "z": "78cee624.48d318",
        "wires": [
            [
                "9620ad1b.3b5ab",
                "7afe7104.170b88",
                "d6286179.01c048",
                "651efb55.9daa24",
                "24dec78d.b7fd48",
                "3e61b022.837b4"
            ]
        ]
    },
    {
        "id": "137b4c1c.0ee49c",
        "type": "delete",
        "name": "delete from db",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource'\n    resource=\"SQL\"\n    key=\"DELETE FROM REQUEST_DETAILS WHERE request_id = $request-id\">",
        "comments": "",
        "outputs": 1,
        "x": 605.5,
        "y": 476.5,
        "z": "78cee624.48d318",
        "wires": [
            []
        ]
    },
    {
        "id": "24dec78d.b7fd48",
        "type": "get-resource",
        "name": "get p-interface total capacity",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\nresource=\"p-interface\"\n     key='pnf.pnf-name = $pnf-name AND\n     p-interface.interface-name = $pinterface-name ' \npfx='p.in.details'      local-only='false'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1178.3887939453125,
        "y": 155.61111450195312,
        "z": "78cee624.48d318",
        "wires": [
            []
        ]
    },
    {
        "id": "3e61b022.837b4",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='new-rate' value='`$p.in.details.speed-value`' />\n",
        "comments": "",
        "x": 1118.611083984375,
        "y": 245.83334350585938,
        "z": "78cee624.48d318",
        "wires": []
    },
    {
        "id": "d6286179.01c048",
        "type": "update",
        "name": "update p-interface capacity AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' \nforce='true'\nresource='p-interface'\n     key='pnf.pnf-name = $pnf-name AND\n     p-interface.interface-name = $pinterface-name '\n      local-only='false'>\n<parameter name='available-capacity' value='`$new-rate`' />\n\n\n\n\n\n\n\n\n\n    \n    \n    \n    \n    \n    \n    \n    \n   \n    \n    \n    \n\n \n \n",
        "comments": "",
        "outputs": 1,
        "x": 1085.5,
        "y": 351.5,
        "z": "78cee624.48d318",
        "wires": [
            []
        ]
    },
    {
        "id": "651efb55.9daa24",
        "type": "save",
        "name": "update pinterface rate DB",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' \nresource='SQL' \nkey='UPDATE TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE SET rate = $new-rate WHERE interface_name = $pinterface-name '\nforce='true' pfx='save-result'>",
        "comments": "",
        "outputs": 1,
        "x": 1076.5,
        "y": 419.5,
        "z": "78cee624.48d318",
        "wires": [
            []
        ]
    }
]