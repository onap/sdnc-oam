[
    {
        "id": "b2c9d122.8079d",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 279.566650390625,
        "y": 287,
        "z": "4d560a72.e4927c",
        "wires": [
            [
                "b624e48.81e8398"
            ]
        ]
    },
    {
        "id": "b624e48.81e8398",
        "type": "service-logic",
        "name": "optical-service ${project.version}",
        "module": "optical-service",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='optical-service' version='${project.version}'>",
        "outputs": 1,
        "x": 466.566650390625,
        "y": 236,
        "z": "4d560a72.e4927c",
        "wires": [
            [
                "e75c0d8a.68d908"
            ]
        ]
    },
    {
        "id": "e75c0d8a.68d908",
        "type": "method",
        "name": "method",
        "xml": "<method rpc='aai-delete-service-handling' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 320.566650390625,
        "y": 410,
        "z": "4d560a72.e4927c",
        "wires": [
            [
                "730df27.f0e4c0c"
            ]
        ]
    },
    {
        "id": "730df27.f0e4c0c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 493.566650390625,
        "y": 409,
        "z": "4d560a72.e4927c",
        "wires": [
            [
                "6723ac25.55f13c",
                "eb2abe2d.21c0e8",
                "914875aa.50ff98",
                "7a255a1a.b26164",
                "8dbb40fc.b81ee",
                "c3a4108f.675268"
            ]
        ]
    },
    {
        "id": "6723ac25.55f13c",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/async-notif.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Inside Revert PInterface details\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 724.566650390625,
        "y": 296,
        "z": "4d560a72.e4927c",
        "wires": [
            []
        ]
    },
    {
        "id": "eb2abe2d.21c0e8",
        "type": "get-resource",
        "name": "Get service from AAI",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\nresource=\"service-instance\"\n key='customer.global-customer-id = $output.global-customer-id AND\n     service-subscription.service-type = $output.service-type AND\n     service-instance.service-instance-id = $output.service-instance-id' \npfx='aai.service'      local-only='false'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 743.566650390625,
        "y": 412,
        "z": "4d560a72.e4927c",
        "wires": [
            []
        ]
    },
    {
        "id": "914875aa.50ff98",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/async-notif.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Inside Revert PInterface details\"/>\n<parameter name=\"field2\" value=\"`$aai.service.orchestration-status`\"/>\n<parameter name=\"field3\" value=\"`$aai.service.relationship-list.relationship_length`\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 753.566650390625,
        "y": 478,
        "z": "4d560a72.e4927c",
        "wires": [
            []
        ]
    },
    {
        "id": "7a255a1a.b26164",
        "type": "for",
        "name": "for",
        "xml": "<for index='idx' start='0' end='`$aai.service.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 726.566650390625,
        "y": 541,
        "z": "4d560a72.e4927c",
        "wires": [
            [
                "d1115849.8412c"
            ]
        ]
    },
    {
        "id": "9d29a06.61df4e",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='pnf-name' value='`$aai.service.relationship-list.relationship[$idx].relationship-data[0].relationship-value`' />\n<parameter name='pinterface-name' value='`$aai.service.relationship-list.relationship[$idx].relationship-data[1].relationship-value`' />\n\n",
        "comments": "",
        "x": 1136.566650390625,
        "y": 228,
        "z": "4d560a72.e4927c",
        "wires": []
    },
    {
        "id": "99771c42.d3d4f",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/async-notif.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Inside Revert PInterface details\"/>\n<parameter name=\"field2\" value=\"`$pnf-name`\"/>\n<parameter name=\"field3\" value=\"`$pinterface-name`\"/>\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1159.566650390625,
        "y": 297,
        "z": "4d560a72.e4927c",
        "wires": [
            []
        ]
    },
    {
        "id": "8dbb40fc.b81ee",
        "type": "delete",
        "name": "delete service instance AAI",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\nresource=\"service-instance\"\nkey='customer.global-customer-id = $output.global-customer-id AND\nservice-subscription.service-type = $output.service-type AND\nservice-instance.service-instance-id = $output.service-instance-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 746.566650390625,
        "y": 617,
        "z": "4d560a72.e4927c",
        "wires": [
            []
        ]
    },
    {
        "id": "d1115849.8412c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 910.566650390625,
        "y": 545,
        "z": "4d560a72.e4927c",
        "wires": [
            [
                "9d29a06.61df4e",
                "99771c42.d3d4f",
                "d7dc2f90.81174",
                "1e0cbdbd.3ee7f2",
                "d3321d96.966928",
                "d37a6f28.98bec"
            ]
        ]
    },
    {
        "id": "c3a4108f.675268",
        "type": "delete",
        "name": "delete from db",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource'\n    resource=\"SQL\"\n    key=\"DELETE FROM REQUEST_DETAILS WHERE request_id = $request-id\">",
        "comments": "",
        "outputs": 1,
        "x": 683.566650390625,
        "y": 674,
        "z": "4d560a72.e4927c",
        "wires": [
            []
        ]
    },
    {
        "id": "d3321d96.966928",
        "type": "get-resource",
        "name": "get p-interface total capacity",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\nresource=\"p-interface\"\n     key='pnf.pnf-name = $pnf-name AND\n     p-interface.interface-name = $pinterface-name ' \npfx='p.in.details'      local-only='false'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1256.4554443359375,
        "y": 353.1111145019531,
        "z": "4d560a72.e4927c",
        "wires": [
            []
        ]
    },
    {
        "id": "d37a6f28.98bec",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='new-rate' value='`$p.in.details.speed-value`' />\n",
        "comments": "",
        "x": 1196.677734375,
        "y": 443.3333435058594,
        "z": "4d560a72.e4927c",
        "wires": []
    },
    {
        "id": "d7dc2f90.81174",
        "type": "update",
        "name": "update p-interface capacity AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' \nforce='true'\nresource='p-interface'\n     key='pnf.pnf-name = $pnf-name AND\n     p-interface.interface-name = $pinterface-name '\n      local-only='false'>\n<parameter name='available-capacity' value='`$new-rate`' />\n\n\n\n\n\n\n\n\n\n    \n    \n    \n    \n    \n    \n    \n    \n   \n    \n    \n    \n\n \n \n",
        "comments": "",
        "outputs": 1,
        "x": 1163.566650390625,
        "y": 549,
        "z": "4d560a72.e4927c",
        "wires": [
            []
        ]
    },
    {
        "id": "1e0cbdbd.3ee7f2",
        "type": "save",
        "name": "update pinterface rate DB",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' \nresource='SQL' \nkey='UPDATE TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE SET rate = $new-rate WHERE interface_name = $pinterface-name '\nforce='true' pfx='save-result'>",
        "comments": "",
        "outputs": 1,
        "x": 1154.566650390625,
        "y": 617,
        "z": "4d560a72.e4927c",
        "wires": [
            []
        ]
    }
]