[
    {
        "id": "53abb973.be3358",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 320.566650390625,
        "y": 127.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "a8f6adda.0744"
            ]
        ]
    },
    {
        "id": "a8f6adda.0744",
        "type": "service-logic",
        "name": "optical-service ${project.version}",
        "module": "optical-service",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='optical-service' version='${project.version}'>",
        "outputs": 1,
        "x": 333.566650390625,
        "y": 187.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "18e37cee.ceb953"
            ]
        ]
    },
    {
        "id": "18e37cee.ceb953",
        "type": "method",
        "name": "method service-delete-msa-sync",
        "xml": "<method rpc='service-delete-msa' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 353.566650390625,
        "y": 267.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "64d96c24.58677c"
            ]
        ]
    },
    {
        "id": "64d96c24.58677c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 601.066650390625,
        "y": 267.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "d0c8eab9.2acb7",
                "7e4b0c6a.d80e4c"
            ]
        ]
    },
    {
        "id": "d0c8eab9.2acb7",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='optical-service-create-input.request-id' value=\"`$domain-service1`\" />\n<parameter name='optical-service-delete-input.payload.service-name' value=\"`$optical-service-delete-input.payload.param[0].value + '_MDONS-OTN-MSA'`\"/>\n",
        "comments": "",
        "x": 783.566650390625,
        "y": 242.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": []
    },
    {
        "id": "7e4b0c6a.d80e4c",
        "type": "execute",
        "name": "Call MSA Controller",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/optical-service-delete-msa.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$controller-ip + '/cxf/openroadm/openroadm-services/' + $optical-service-delete-input.payload.service-name`\"/>\n<parameter name='restapiUser' value='admin' />\n<parameter name='restapiPassword' value='admin' />\n<parameter name=\"httpMethod\" value=\"DELETE\"/>\n<parameter name=\"responsePrefix\" value=\"service-delete-response\"/>\n<parameter name='contentType' value='application/json' />\n<parameter name='format' value='json' />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.msa.jks\"/>  \n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/> \n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 781.566650390625,
        "y": 344.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "e8374b35.9489e8",
                "59601e7a.333fb8"
            ]
        ]
    },
    {
        "id": "59601e7a.333fb8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 960.566650390625,
        "y": 415.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "f7639000.8d09b"
            ]
        ]
    },
    {
        "id": "e8374b35.9489e8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 957.566650390625,
        "y": 301.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "44136677.41a668"
            ]
        ]
    },
    {
        "id": "44136677.41a668",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1119.566650390625,
        "y": 296.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "656a3cd0.5027ec"
            ]
        ]
    },
    {
        "id": "f7639000.8d09b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1133.566650390625,
        "y": 418.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "6f5cb50c.47cb9c",
                "61d2d42e.74ce34"
            ]
        ]
    },
    {
        "id": "656a3cd0.5027ec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='Error deleting the Service' />\n",
        "comments": "",
        "x": 1287.566650390625,
        "y": 293.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": []
    },
    {
        "id": "6f5cb50c.47cb9c",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/optical-service-create.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Successfully sent the request\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1314.566650390625,
        "y": 377.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": [
            []
        ]
    },
    {
        "id": "61d2d42e.74ce34",
        "type": "switchNode",
        "name": "switch",
        "xml": "<switch test='`$service-delete-response.configuration-response-common.response-code`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1307.566650390625,
        "y": 468.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "6a32e2cb.011efc",
                "126ef311.e5b135"
            ]
        ]
    },
    {
        "id": "6a32e2cb.011efc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1450.566650390625,
        "y": 443.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "20f6b725.7d2e3"
            ]
        ]
    },
    {
        "id": "20f6b725.7d2e3",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='`$service-delete-response.configuration-response-common.response-code`' />\n<parameter name='error-message' value='`$service-delete-response.configuration-response-common.response-message`' />\n",
        "comments": "",
        "x": 1647.566650390625,
        "y": 441.56666564941406,
        "z": "8588d9b2.517e38",
        "wires": []
    },
    {
        "id": "126ef311.e5b135",
        "type": "outcome",
        "name": "200",
        "xml": "<outcome value='200'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1474.566650390625,
        "y": 557.5666656494141,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "47d51f0e.38e19"
            ]
        ]
    },
    {
        "id": "47d51f0e.38e19",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1638.566650390625,
        "y": 552.5666656494141,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "b9afc35f.499458",
                "f8b135a9.17c5d8",
                "70aa5b37.57ec94",
                "a77548a2.59db78",
                "ba4b7b38.d871e"
            ]
        ]
    },
    {
        "id": "b9afc35f.499458",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/optical-service-create.log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"Inside controller\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1810.566650390625,
        "y": 520.5666656494141,
        "z": "8588d9b2.517e38",
        "wires": [
            []
        ]
    },
    {
        "id": "f8b135a9.17c5d8",
        "type": "save",
        "name": "save",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' \nresource='SQL' \nkey='UPDATE REQUEST_DETAILS SET status = \"DELETING\" WHERE request_id = $optical-service-delete-input.request-id' \nforce='true' pfx='save-result'>\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1820.566650390625,
        "y": 607.5666656494141,
        "z": "8588d9b2.517e38",
        "wires": [
            []
        ]
    },
    {
        "id": "70aa5b37.57ec94",
        "type": "get-resource",
        "name": "get-resource",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL' \nkey='SELECT *\nfrom REQUEST_DETAILS \nWHERE request_id = $optical-service-delete-input.request-id'\npfx='db.request-details'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n\n",
        "comments": "",
        "outputs": 1,
        "x": 1826.566650390625,
        "y": 683.5666656494141,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "84297f07.a526"
            ]
        ]
    },
    {
        "id": "84297f07.a526",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1984.566650390625,
        "y": 674.5666656494141,
        "z": "8588d9b2.517e38",
        "wires": [
            [
                "aff15672.da7fa8"
            ]
        ]
    },
    {
        "id": "aff15672.da7fa8",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='instance-id' value='`$db.request-details.service-instance-id`' />\n<parameter name='customer-id' value='`$db.request-details.global-customer-id`' />\n<parameter name='service-id' value='`$db.request-details.service-type`' />\n\n\n\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "x": 2133.566650390625,
        "y": 677.5666656494141,
        "z": "8588d9b2.517e38",
        "wires": []
    },
    {
        "id": "a77548a2.59db78",
        "type": "update",
        "name": "update",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' \nforce='true' \nresource='service-instance' \nkey = 'customer.global-customer-id = $customer-id AND\n     service-subscription.service-type = $service-id AND\n     service-instance.service-instance-id = $instance-id'\nlocal-only='false'>\n    <parameter name='orchestration-status' value='DELETING' />\n\n    \n    \n    \n\n",
        "comments": "",
        "outputs": 1,
        "x": 1799.566650390625,
        "y": 750.5666656494141,
        "z": "8588d9b2.517e38",
        "wires": [
            []
        ]
    },
    {
        "id": "ba4b7b38.d871e",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='final-response-code' value=\"200\" />\n",
        "comments": "",
        "x": 1790.566650390625,
        "y": 859.566650390625,
        "z": "8588d9b2.517e38",
        "wires": []
    }
]