[
    {
        "id": "65bbf2ea.e8f944",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 286.8833312988281,
        "y": 269,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "1593715.ae96a8f"
            ]
        ]
    },
    {
        "id": "f336edeb.74ce6",
        "type": "method",
        "name": "method",
        "xml": "<method rpc='main-create' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 285.8833312988281,
        "y": 344,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "14882330.8313b5"
            ]
        ]
    },
    {
        "id": "1593715.ae96a8f",
        "type": "service-logic",
        "name": "optical-service ${project.version}",
        "module": "optical-service",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='optical-service' version='${project.version}'>",
        "outputs": 1,
        "x": 504.3833312988281,
        "y": 252,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "f336edeb.74ce6"
            ]
        ]
    },
    {
        "id": "14882330.8313b5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 461.8833312988281,
        "y": 357,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "994bfa4.9799188",
                "c4d3d388.dc35a",
                "204f0598.3ac182",
                "2d636d44.e5a0fa",
                "2c72a67.f372ada",
                "79455985.47e29",
                "887cbe59.b1784",
                "4f44de12.e7fb18"
            ]
        ]
    },
    {
        "id": "c4d3d388.dc35a",
        "type": "switchNode",
        "name": "switch : domain-type",
        "xml": "<switch test='`$domain-type`'>\n    \n",
        "comments": "",
        "outputs": 1,
        "x": 339.3833312988281,
        "y": 670,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "77b74d5.6495a34",
                "7bd5cfea.c1ac2"
            ]
        ]
    },
    {
        "id": "77b74d5.6495a34",
        "type": "outcome",
        "name": "MSA",
        "xml": "<outcome value='MSA'>\n",
        "comments": "",
        "outputs": 1,
        "x": 641.8833312988281,
        "y": 640,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "70f7a20a.befe0c"
            ]
        ]
    },
    {
        "id": "7bd5cfea.c1ac2",
        "type": "outcome",
        "name": "TAPI",
        "xml": "<outcome value='TAPI'>\n",
        "comments": "",
        "outputs": 1,
        "x": 637.8833312988281,
        "y": 749,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "9b03001b.004b98"
            ]
        ]
    },
    {
        "id": "994bfa4.9799188",
        "type": "execute",
        "name": "execute",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n<parameter name='fileName' value='/opt/onap/sdnc/data/properties/optical-service-dg.properties' />\n<parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 854.88330078125,
        "y": 181,
        "z": "30ae7182.add8b6",
        "wires": [
            []
        ]
    },
    {
        "id": "70f7a20a.befe0c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 829.8833312988281,
        "y": 641,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "5fc1c8dc.a583e8"
            ]
        ]
    },
    {
        "id": "9b03001b.004b98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 822.8833312988281,
        "y": 754,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "b46560fc.9378b8"
            ]
        ]
    },
    {
        "id": "204f0598.3ac182",
        "type": "call",
        "name": "call validate-input-parameters",
        "xml": "<call module='optical-service' rpc='optical-validate-input-params' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 911.88330078125,
        "y": 136,
        "z": "30ae7182.add8b6",
        "wires": [
            []
        ]
    },
    {
        "id": "b46560fc.9378b8",
        "type": "call",
        "name": "call TAPI DG",
        "xml": "<call module='optical-service' rpc='service-create-tapi' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1018.8833618164062,
        "y": 760,
        "z": "30ae7182.add8b6",
        "wires": [
            []
        ]
    },
    {
        "id": "5fc1c8dc.a583e8",
        "type": "call",
        "name": "call MSA DG",
        "xml": "<call module='optical-service' rpc='service-create-msa' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1048.88330078125,
        "y": 641,
        "z": "30ae7182.add8b6",
        "wires": [
            []
        ]
    },
    {
        "id": "2d636d44.e5a0fa",
        "type": "get-resource",
        "name": "get resources from DB -controller_id",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT controller_id\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE interface_name = $optical-service-create-input.payload.service-aend.port-id'\npfx='controllerid'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 871.88330078125,
        "y": 257,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "33031f70.c9e2f"
            ]
        ]
    },
    {
        "id": "2c72a67.f372ada",
        "type": "execute",
        "name": "split node-id a-end retrieved from DB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$controller-id`'/>\n<parameter name=\"regex\" value=\"_\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 871.88330078125,
        "y": 308,
        "z": "30ae7182.add8b6",
        "wires": [
            []
        ]
    },
    {
        "id": "33031f70.c9e2f",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1107.88330078125,
        "y": 255,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "6316e11e.6a8a8"
            ]
        ]
    },
    {
        "id": "6316e11e.6a8a8",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='controller-id' value='`$controllerid.controller-id`' />\n\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "x": 1250.88330078125,
        "y": 257,
        "z": "30ae7182.add8b6",
        "wires": []
    },
    {
        "id": "79455985.47e29",
        "type": "set",
        "name": "set controller-ip",
        "xml": "<set>\n<parameter name='controller-ip' value='`$param-prefix[1]`' />\n<parameter name='domain-type' value='`$param-prefix[0]`' />\n \n",
        "comments": "",
        "x": 815.88330078125,
        "y": 370,
        "z": "30ae7182.add8b6",
        "wires": []
    },
    {
        "id": "887cbe59.b1784",
        "type": "get-resource",
        "name": "get-resource",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT *\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE interface_name = $optical-service-create-input.payload.service-aend.port-id'\npfx='db-aend'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 693.88330078125,
        "y": 424,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "1d791c96.d1da33"
            ]
        ]
    },
    {
        "id": "4f44de12.e7fb18",
        "type": "get-resource",
        "name": "get-resource",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\nkey='SELECT *\nfrom TOPOLOGY_LOGICAL_RELATION_TO_PINTERFACE\nWHERE interface_name = $optical-service-create-input.payload.service-zend.port-id'\npfx='db-zend'>\n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n\n    \n    \n    \n    \n    \n    \n    \n    \n    \n    \n",
        "comments": "",
        "outputs": 1,
        "x": 679.88330078125,
        "y": 487,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "ef8516e4.6c5f7"
            ]
        ]
    },
    {
        "id": "1d791c96.d1da33",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 877.88330078125,
        "y": 426,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "c56f5bdc.a7e378"
            ]
        ]
    },
    {
        "id": "c56f5bdc.a7e378",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='aend-nodeid' value='`$db-aend.pnf-id`' />\n<parameter name='a-end-pnf-name' value='`$db-aend.pnf-name`' />\n<parameter name='aend-clli' value='`$db-aend.clli`' />\n\n\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "x": 1044.88330078125,
        "y": 425,
        "z": "30ae7182.add8b6",
        "wires": []
    },
    {
        "id": "ef8516e4.6c5f7",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 876.88330078125,
        "y": 491,
        "z": "30ae7182.add8b6",
        "wires": [
            [
                "3ea4fdfa.d7bd4a"
            ]
        ]
    },
    {
        "id": "3ea4fdfa.d7bd4a",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='zend-nodeid' value='`$db-zend.pnf-id`' />\n<parameter name='z-end-pnf-name' value='`$db-zend.pnf-name`' />\n<parameter name='zend-clli' value='`$db-zend.clli`' />\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "x": 1044.88330078125,
        "y": 492,
        "z": "30ae7182.add8b6",
        "wires": []
    }
]