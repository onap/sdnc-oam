[
    {
        "id": "1a420388.7ce24c",
        "type": "method",
        "name": "upgrade-software",
        "xml": "<method rpc='upgrade-software' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 550,
        "y": 102,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "e635fd5d.f4087"
            ]
        ]
    },
    {
        "id": "c220826b.91906",
        "type": "service-logic",
        "name": "LCM ${project.version}",
        "module": "LCM",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='LCM' version='${project.version}'>",
        "outputs": 1,
        "x": 337.99993896484375,
        "y": 103,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "1a420388.7ce24c"
            ]
        ]
    },
    {
        "id": "810e1e54.dec1c",
        "type": "execute",
        "name": "execute AnsibleA.reqExec",
        "xml": "<execute plugin='org.onap.ccsdk.sli.adaptors.ansible.AnsibleAdapter' method='reqExec' >\n<parameter name='AgentUrl' value='`$prop.ansible.agenturl`'/>\n<parameter name='User' value='`$prop.ansible.user`'/>\n<parameter name='Password' value='`$prop.ansible.password`'/>\n<parameter name='LocalParameters' value='`$prop.ansible.lcm.localparameters`'/>\n<parameter name='EnvParameters' value='`$upgrade-software-input.payload`'/>\n<parameter name='NodeList' value=\"`$nodelist`\"/>\n<parameter name='Timeout' value='`$prop.ansible.timeout`'/>\n<parameter name='Version' value='`$prop.ansible.version`'/>\n<parameter name='Id' value='`$upgrade-software-input.common-header.request-id`'/>\n<parameter name='PlaybookName' value='`$prop.lcm.upgrade-software.playbookname`'/>",
        "comments": "",
        "outputs": 1,
        "x": 345.00001525878906,
        "y": 379,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "f279f5b8.9d49b8",
                "895a0a53.e12ea8",
                "fa759954.4e2068"
            ]
        ]
    },
    {
        "id": "f7db5396.7b5f1",
        "type": "switchNode",
        "name": "switch",
        "xml": "<switch test=\"`$org.onap.appc.adapter.ansible.result.code`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 690.9999389648438,
        "y": 530.0000228881836,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "bc5a2382.4973",
                "84f0dd88.8438",
                "ffd4aab1.e3c4b8"
            ]
        ]
    },
    {
        "id": "bc5a2382.4973",
        "type": "other",
        "name": "outcome 500",
        "xml": "<outcome value='500'>\n",
        "comments": "",
        "outputs": 1,
        "x": 835.9999389648438,
        "y": 528.0000305175781,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "80cc4946.3f0f78"
            ]
        ]
    },
    {
        "id": "84f0dd88.8438",
        "type": "other",
        "name": "outcome 100",
        "xml": "<outcome value='100'>\n",
        "comments": "",
        "outputs": 1,
        "x": 838.9999389648438,
        "y": 571.0000610351562,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "f44a47b3.3aa128"
            ]
        ]
    },
    {
        "id": "f44a47b3.3aa128",
        "type": "execute",
        "name": "execute reqExecResult",
        "xml": "<execute plugin='org.onap.ccsdk.sli.adaptors.ansible.AnsibleAdapter' method='reqExecResult' >\n    <parameter name='AgentUrl' value='`$prop.ansible.agenturl`'/>\n\t<parameter name='User' value='`$prop.ansible.user`'/>\n\t<parameter name='Password' value='`$prop.ansible.password`'/>\n\t<parameter name='Id' value='`$org.onap.appc.adapter.ansible.Id`'/>\n\t<parameter name='PlaybookName' value='`$prop.lcm.upgrade-software.playbookname`'/>\n\t\n\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1025.9999389648438,
        "y": 570.0000305175781,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "dd2fe7e6.957248",
                "6913b982.6c9bb8"
            ]
        ]
    },
    {
        "id": "895a0a53.e12ea8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 581.9999389648438,
        "y": 439.0000534057617,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "80cc4946.3f0f78"
            ]
        ]
    },
    {
        "id": "f279f5b8.9d49b8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 583.9999389648438,
        "y": 491.0000228881836,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "f7db5396.7b5f1"
            ]
        ]
    },
    {
        "id": "dd2fe7e6.957248",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1189.9999389648438,
        "y": 542.0000305175781,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "80cc4946.3f0f78"
            ]
        ]
    },
    {
        "id": "ffd4aab1.e3c4b8",
        "type": "other",
        "name": "outcome 101",
        "xml": "<outcome value='101'>\n",
        "comments": "",
        "outputs": 1,
        "x": 832.9999389648438,
        "y": 486.00006103515625,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "80cc4946.3f0f78"
            ]
        ]
    },
    {
        "id": "6913b982.6c9bb8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1191.9999389648438,
        "y": 597.0000915527344,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "14c8dea1.b5b7a1"
            ]
        ]
    },
    {
        "id": "a32993f8.f8215",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name='status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='status.message' value='`$org.onap.appc.adapter.ansible.message`'/>",
        "comments": "",
        "x": 1467.9998779296875,
        "y": 648.0000610351562,
        "z": "af8f5cdd.6e4de",
        "wires": []
    },
    {
        "id": "d8c3f83d.d0b9d8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 153,
        "y": 102,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "c220826b.91906"
            ]
        ]
    },
    {
        "id": "e635fd5d.f4087",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 139.91668701171875,
        "y": 241.08334350585938,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "810e1e54.dec1c",
                "ee1802be.c5c18",
                "e8d3b31a.f46c6",
                "4d7f56db.9375c8"
            ]
        ]
    },
    {
        "id": "ee1802be.c5c18",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/lcm-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 328.00001525878906,
        "y": 225.08334350585938,
        "z": "af8f5cdd.6e4de",
        "wires": [
            []
        ]
    },
    {
        "id": "3830f5d4.87f1aa",
        "type": "execute",
        "name": "execute DmaapMsg",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.lcm.dmaap.publish.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.lcm.dmaap.url`' />\n    <parameter name='restapiUser' value='`$prop.lcm.dmaap.user`' />\n    <parameter name='restapiPassword' value='`$prop.lcm.dmaap.password`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name=\"responsePrefix\" value=\"lcm\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1222.9999389648438,
        "y": 371.0833740234375,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "1566d659.a0655a"
            ]
        ]
    },
    {
        "id": "1566d659.a0655a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1392.9998779296875,
        "y": 370.0833740234375,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "22f8bfd0.6139e"
            ]
        ]
    },
    {
        "id": "80cc4946.3f0f78",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1025.9998779296875,
        "y": 395.0833740234375,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "3830f5d4.87f1aa",
                "fedbb5e6.fb3c28",
                "898f667e.daf2e8"
            ]
        ]
    },
    {
        "id": "7ce48bed.5b7c74",
        "type": "execute",
        "name": "execute DmaapMsg",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.lcm.dmaap.publish.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.lcm.dmaap.url`' />\n    <parameter name='restapiUser' value='`$prop.lcm.dmaap.user`' />\n    <parameter name='restapiPassword' value='`$prop.lcm.dmaap.password`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name=\"responsePrefix\" value=\"lcm\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1488.4998779296875,
        "y": 597.0833740234375,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "37e7fa80.2728b6"
            ]
        ]
    },
    {
        "id": "37e7fa80.2728b6",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1648.4998779296875,
        "y": 597.0833740234375,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "47c7511a.dd8fe"
            ]
        ]
    },
    {
        "id": "22f8bfd0.6139e",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\"> \n\t<parameter name=\"logger\" value=\"message-log\"/> \n\t<parameter name=\"field1\" value='Failed to Publish to DMaap'/>",
        "comments": "",
        "outputs": 1,
        "x": 1524.9998779296875,
        "y": 370.0833740234375,
        "z": "af8f5cdd.6e4de",
        "wires": [
            []
        ]
    },
    {
        "id": "fedbb5e6.fb3c28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='status.code' value='401' />\n<parameter name='status.message' value='`$org.onap.appc.adapter.ansible.message`' />\n",
        "comments": "",
        "x": 1197.9165649414062,
        "y": 408.0833740234375,
        "z": "af8f5cdd.6e4de",
        "wires": []
    },
    {
        "id": "47c7511a.dd8fe",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\"> \n\t<parameter name=\"logger\" value=\"message-log\"/> \n\t<parameter name=\"field1\" value='Failed to Publish to DMaap'/>",
        "comments": "",
        "outputs": 1,
        "x": 1769.9166259765625,
        "y": 598.0833740234375,
        "z": "af8f5cdd.6e4de",
        "wires": [
            []
        ]
    },
    {
        "id": "898f667e.daf2e8",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='lcm-dmaap.version' value='`$prop.lcm.dmaap.version`'/>\n<parameter name='lcm-dmaap.correlation-id' value=\"`$upgrade-software-input.common-header.request-id + '-' + $upgrade-software-input.common-header.sub-request-id`\"/>\n<parameter name='lcm-dmaap.partition' value='`$prop.lcm.dmaap.partition`'/>\n<parameter name='lcm-dmaap.rpc-name' value='upgrade-software'/>\n<parameter name='lcm-dmaap.type' value='`$prop.lcm.dmaap.type`'/>\n<parameter name='lcm-dmaap.timestamp' value='`$upgrade-software-input.common-header.timestamp`'/>\n<parameter name='lcm-dmaap.api-ver' value='`$upgrade-software-input.common-header.api-ver`'/>\n<parameter name='lcm-dmaap.originator-id' value='`$upgrade-software-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.request-id' value='`$upgrade-software-input.common-header.request-id`'/>\n<parameter name='lcm-dmaap.sub-request-id' value='`$upgrade-software-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.flags.mode' value='`$upgrade-software-input.common-header.flags.mode`'/>\n<parameter name='lcm-dmaap.flags.force' value='`$upgrade-software-input.common-header.flags.force`'/>\n<parameter name='lcm-dmaap.flags.ttl' value='`$upgrade-software-input.common-header.flags.ttl`'/>\n<parameter name='lcm-dmaap.status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='lcm-dmaap.status.message' value='`$org.onap.appc.adapter.ansible.message`'/>\n",
        "comments": "",
        "x": 1174.9999389648438,
        "y": 318.0833740234375,
        "z": "af8f5cdd.6e4de",
        "wires": []
    },
    {
        "id": "14c8dea1.b5b7a1",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1317.9998779296875,
        "y": 596.0833435058594,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "7ce48bed.5b7c74",
                "70a28c6a.563d24",
                "a32993f8.f8215"
            ]
        ]
    },
    {
        "id": "70a28c6a.563d24",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='lcm-dmaap.version' value='`$prop.lcm.dmaap.version`'/>\n<parameter name='lcm-dmaap.correlation-id' value=\"`$upgrade-software-input.common-header.request-id + '-' + $upgrade-software-input.common-header.sub-request-id`\"/>\n<parameter name='lcm-dmaap.partition' value='`$prop.lcm.dmaap.partition`'/>\n<parameter name='lcm-dmaap.rpc-name' value='upgrade-software'/>\n<parameter name='lcm-dmaap.type' value='`$prop.lcm.dmaap.type`'/>\n<parameter name='lcm-dmaap.timestamp' value='`$upgrade-software-input.common-header.timestamp`'/>\n<parameter name='lcm-dmaap.api-ver' value='`$upgrade-software-input.common-header.api-ver`'/>\n<parameter name='lcm-dmaap.originator-id' value='`$upgrade-software-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.request-id' value='`$upgrade-software-input.common-header.request-id`'/>\n<parameter name='lcm-dmaap.sub-request-id' value='`$upgrade-software-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.flags.mode' value='`$upgrade-software-input.common-header.flags.mode`'/>\n<parameter name='lcm-dmaap.flags.force' value='`$upgrade-software-input.common-header.flags.force`'/>\n<parameter name='lcm-dmaap.flags.ttl' value='`$upgrade-software-input.common-header.flags.ttl`'/>\n<parameter name='lcm-dmaap.status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='lcm-dmaap.status.message' value='`$org.onap.appc.adapter.ansible.message`'/>\n",
        "comments": "",
        "x": 1448.1666259765625,
        "y": 549.0833740234375,
        "z": "af8f5cdd.6e4de",
        "wires": []
    },
    {
        "id": "fa759954.4e2068",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 577.9999389648438,
        "y": 392.0000228881836,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "ed41675d.59c088"
            ]
        ]
    },
    {
        "id": "756c2e53.ca6d7",
        "type": "set",
        "name": "set Defaults",
        "xml": "<set>\n<parameter name='org.onap.appc.adapter.ansible.result.code' value='401'/>\n<parameter name='org.onap.appc.adapter.ansible.message' value='Ansible Adapter was not found'/>\n",
        "comments": "",
        "x": 1009.9999389648438,
        "y": 297.0000305175781,
        "z": "af8f5cdd.6e4de",
        "wires": []
    },
    {
        "id": "ed41675d.59c088",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 761.9999389648438,
        "y": 384.0000228881836,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "756c2e53.ca6d7",
                "80cc4946.3f0f78"
            ]
        ]
    },
    {
        "id": "e8d3b31a.f46c6",
        "type": "set",
        "name": "set default status value",
        "xml": "<set>\n<parameter name='status.code' value='200' />\n<parameter name='status.message' value='unexpected return from DG' />\n<parameter name='nodelist' value=\"`$prop.ansible.nodelist`\"/>",
        "comments": "",
        "x": 336,
        "y": 269,
        "z": "af8f5cdd.6e4de",
        "wires": []
    },
    {
        "id": "4d7f56db.9375c8",
        "type": "get-resource",
        "name": "get aai.generic-vnf by vnf-id",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"generic-vnf\" \n\t\tkey=\"generic-vnf.vnf-id = $upgrade-software-input.action-identifiers.vnf-id\" \n\t\tlocal-only=\"false\" \n\t\tpfx='aai.generic-vnf'>",
        "comments": "",
        "outputs": 1,
        "x": 349.0000305175781,
        "y": 325,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "fa69a126.2a554",
                "f9cb9963.f9e368"
            ]
        ]
    },
    {
        "id": "fa69a126.2a554",
        "type": "failure",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 589.86083984375,
        "y": 312.53564453125,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "2d1a88c6.11f9d8"
            ]
        ]
    },
    {
        "id": "f9cb9963.f9e368",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 591.3908081054688,
        "y": 260.28399658203125,
        "z": "af8f5cdd.6e4de",
        "wires": [
            [
                "c4d4de4d.3e19f"
            ]
        ]
    },
    {
        "id": "c4d4de4d.3e19f",
        "type": "set",
        "name": "set nodelist",
        "xml": "<set>\n<parameter name='quote' value=\"'\" />\n<parameter name='nodelist' value=\"`'[' + $quote + $aai.ipv4-oam-address +  $quote + ']'`\"/>\n",
        "comments": "",
        "x": 740.3908081054688,
        "y": 259.28399658203125,
        "z": "af8f5cdd.6e4de",
        "wires": []
    },
    {
        "id": "2d1a88c6.11f9d8",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\"> \n\t<parameter name=\"logger\" value=\"message-log\"/> \n\t<parameter name=\"field1\" value='VNF not found in AAI. Nodelist retrieved from config'/>",
        "comments": "",
        "outputs": 1,
        "x": 736,
        "y": 312,
        "z": "af8f5cdd.6e4de",
        "wires": [
            []
        ]
    }
]