[
    {
        "comments": "",
        "id": "e3957e37.35361",
        "name": "upgrade-software",
        "outputs": 1,
        "type": "method",
        "wires": [
            [
                "c5d4c45f.4457e"
            ]
        ],
        "x": 506,
        "xml": "<method rpc='upgrade-software' mode='sync'>\n",
        "y": 196,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "5f2faaca.f39734",
        "module": "LCM",
        "name": "LCM ${project.version}",
        "outputs": 1,
        "type": "service-logic",
        "version": "${project.version}",
        "wires": [
            [
                "e3957e37.35361"
            ]
        ],
        "x": 293.99993896484375,
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='LCM' version='${project.version}'>",
        "y": 197,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "70dc7b0c.2f14e4",
        "name": "execute AnsibleA.reqExec",
        "outputs": 1,
        "type": "execute",
        "wires": [
            [
                "bc899025.fa2868",
                "f27679b0.21ec",
                "704e725e.7e874c"
            ]
        ],
        "x": 294.00001525878906,
        "xml": "<execute plugin='org.onap.ccsdk.sli.adaptors.ansible.AnsibleAdapter' method='reqExec' >\n<parameter name='AgentUrl' value='`$prop.ansible.agenturl`'/>\n<parameter name='User' value='`$prop.ansible.user`'/>\n<parameter name='Password' value='`prop.ansible.password`'/>\n<parameter name='LocalParameters' value='`$prop.ansible.lcm.localparameters`'/>\n<parameter name='EnvParameters' value='`$upgrade-software-input.payload`'/>\n<parameter name='NodeList' value='`$prop.ansible.nodelist`'/>\n<parameter name='Timeout' value='`$prop.ansible.timeout`'/>\n<parameter name='Version' value='`$prop.ansible.version`'/>\n<parameter name='Id' value='`$upgrade-software-input.common-header.request-id`'/>\n<parameter name='PlaybookName' value='`$prop.lcm.upgrade-software.playbookname`'/>",
        "y": 414,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "e3dc71b8.c785c8",
        "name": "switch",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "86baeda9.1ff078",
                "195ba453.c1b374",
                "931e0cc5.50a74"
            ]
        ],
        "x": 595,
        "xml": "<switch test=\"`$org.onap.appc.adapter.ansible.result.code`\">\n",
        "y": 462,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "86baeda9.1ff078",
        "name": "outcome 500",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "d1ce272a.df817"
            ]
        ],
        "x": 740,
        "xml": "<outcome value='500'>\n",
        "y": 460.00000762939453,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "195ba453.c1b374",
        "name": "outcome 100",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "245ca838.b01f4"
            ]
        ],
        "x": 743,
        "xml": "<outcome value='100'>\n",
        "y": 503.00003814697266,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "245ca838.b01f4",
        "name": "execute reqExecResult",
        "outputs": 1,
        "type": "execute",
        "wires": [
            [
                "b1d260a0.f027c8",
                "7c135a2c.b77b1c"
            ]
        ],
        "x": 921.0000305175781,
        "xml": "<execute plugin='org.onap.ccsdk.sli.adaptors.ansible.AnsibleAdapter' method='reqExecResult' >\n    <parameter name='AgentUrl' value='`$prop.ansible.agenturl`'/>\n\t<parameter name='User' value='`$prop.ansible.user`'/>\n\t<parameter name='Password' value='`$prop.ansible.password`'/>\n\t<parameter name='Id' value='`$upgrade-software-input.common-header.request-id`'/>\n\t<parameter name='PlaybookName' value='`$prop.lcm.upgrade-software.playbookname`'/>\n\t\n\n\n\n\n",
        "y": 503.00003814697266,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "f27679b0.21ec",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "d1ce272a.df817"
            ]
        ],
        "x": 486,
        "xml": "<outcome value='failure'>\n",
        "y": 371.0000305175781,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "bc899025.fa2868",
        "name": "other",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "e3dc71b8.c785c8"
            ]
        ],
        "x": 488,
        "xml": "<outcome value='Other'>\n",
        "y": 423,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "b1d260a0.f027c8",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "d1ce272a.df817"
            ]
        ],
        "x": 1082.0000610351562,
        "xml": "<outcome value='failure'>\n",
        "y": 480.00000762939453,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "931e0cc5.50a74",
        "name": "outcome 101",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "d1ce272a.df817"
            ]
        ],
        "x": 737,
        "xml": "<outcome value='101'>\n",
        "y": 418.00003814697266,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "7c135a2c.b77b1c",
        "name": "success",
        "outputs": 1,
        "type": "success",
        "wires": [
            [
                "a9adb7fd.3d4988"
            ]
        ],
        "x": 1089.0000610351562,
        "xml": "<outcome value='success'>\n",
        "y": 528.0000381469727,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "6546fdb6.d892ac",
        "name": "return success",
        "type": "returnSuccess",
        "wires": [],
        "x": 1371.9999389648438,
        "xml": "<return status='success'>\n<parameter name='status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='status.message' value='`$org.onap.appc.adapter.ansible.message`'/>",
        "y": 580.0000381469727,
        "z": "455a25b6.fcbc5c"
    },
    {
        "id": "c7222a65.c32fa",
        "name": "DGSTART",
        "outputs": 1,
        "type": "dgstart",
        "wires": [
            [
                "5f2faaca.f39734"
            ]
        ],
        "x": 109,
        "y": 196,
        "z": "455a25b6.fcbc5c"
    },
    {
        "atomic": "false",
        "comments": "",
        "id": "c5d4c45f.4457e",
        "name": "block",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "70dc7b0c.2f14e4",
                "2144c479.557abc",
                "2dcfb067.346e98"
            ]
        ],
        "x": 104.91668701171875,
        "xml": "<block>\n",
        "y": 377.0833435058594,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "2144c479.557abc",
        "name": "execute Properties",
        "outputs": 1,
        "type": "execute",
        "wires": [
            []
        ],
        "x": 279.00001525878906,
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/lcm-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "y": 319.0833435058594,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "3ab47119.0770ce",
        "name": "execute DmaapMsg",
        "outputs": 1,
        "type": "execute",
        "wires": [
            [
                "29d7b192.efbf56"
            ]
        ],
        "x": 1089.0000610351562,
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.lcm.dmaap.publish.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.lcm.dmaap.url`' />\n    <parameter name='restapiUser' value='`$prop.lcm.dmaap.user`' />\n    <parameter name='restapiPassword' value='`$prop.lcm.dmaap.password`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name=\"responsePrefix\" value=\"lcm\" />\n",
        "y": 324.0833435058594,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "29d7b192.efbf56",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "3b3f2df3.e75202"
            ]
        ],
        "x": 1259,
        "xml": "<outcome value='failure'>\n",
        "y": 323.0833435058594,
        "z": "455a25b6.fcbc5c"
    },
    {
        "atomic": "false",
        "comments": "",
        "id": "d1ce272a.df817",
        "name": "block",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "3ab47119.0770ce",
                "be81ce81.d8751",
                "e34055b3.f4fc"
            ]
        ],
        "x": 892,
        "xml": "<block>\n",
        "y": 348.0833435058594,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "d0e97f8b.a0a97",
        "name": "execute DmaapMsg",
        "outputs": 1,
        "type": "execute",
        "wires": [
            [
                "f13ad0f8.38e418"
            ]
        ],
        "x": 1392.4999389648438,
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.lcm.dmaap.publish.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.lcm.dmaap.url`' />\n    <parameter name='restapiUser' value='`$prop.lcm.dmaap.user`' />\n    <parameter name='restapiPassword' value='`$prop.lcm.dmaap.password`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name=\"responsePrefix\" value=\"lcm\" />\n",
        "y": 529.0833511352539,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "f13ad0f8.38e418",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "8b1d7157.857a38"
            ]
        ],
        "x": 1552.4999389648438,
        "xml": "<outcome value='failure'>\n",
        "y": 529.0833511352539,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "3b3f2df3.e75202",
        "name": "record",
        "outputs": 1,
        "type": "record",
        "wires": [
            []
        ],
        "x": 1391,
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\"> \n\t<parameter name=\"logger\" value=\"message-log\"/> \n\t<parameter name=\"field1\" value='Failed to Publish to DMaap'/>",
        "y": 323.0833435058594,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "be81ce81.d8751",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1063.9166870117188,
        "xml": "<return status='failure'>\n<parameter name='status.code' value='401' />\n<parameter name='status.message' value='`$org.onap.appc.adapter.ansible.message`' />\n",
        "y": 361.0833435058594,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "8b1d7157.857a38",
        "name": "record",
        "outputs": 1,
        "type": "record",
        "wires": [
            []
        ],
        "x": 1673.9166870117188,
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\"> \n\t<parameter name=\"logger\" value=\"message-log\"/> \n\t<parameter name=\"field1\" value='Failed to Publish to DMaap'/>",
        "y": 530.0833511352539,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "e34055b3.f4fc",
        "name": "set",
        "type": "set",
        "wires": [],
        "x": 1041.0000610351562,
        "xml": "<set>\n<parameter name='lcm-dmaap.version' value='`$prop.lcm.dmaap.version`'/>\n<parameter name='lcm-dmaap.correlation-id' value='`$upgrade-software-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.partition' value='`$prop.lcm.dmaap.partition`'/>\n<parameter name='lcm-dmaap.rpc-name' value='upgrade-software'/>\n<parameter name='lcm-dmaap.type' value='`$prop.lcm.dmaap.type`'/>\n<parameter name='lcm-dmaap.timestamp' value='`$upgrade-software-input.common-header.timestamp`'/>\n<parameter name='lcm-dmaap.api-ver' value='`$upgrade-software-input.common-header.api-ver`'/>\n<parameter name='lcm-dmaap.originator-id' value='`$upgrade-software-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.request-id' value='`$upgrade-software-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.sub-request-id' value='`$upgrade-software-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.flags.mode' value='`$upgrade-software-input.common-header.flags.mode`'/>\n<parameter name='lcm-dmaap.flags.force' value='`$upgrade-software-input.common-header.flags.force`'/>\n<parameter name='lcm-dmaap.flags.ttl' value='`$upgrade-software-input.common-header.flags.ttl`'/>\n<parameter name='lcm-dmaap.payload' value='`$org.onap.appc.adapter.ansible.results`'/>\n<parameter name='lcm-dmaap.status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='lcm-dmaap.status.message' value='`$org.onap.appc.adapter.ansible.message`'/>\n",
        "y": 271.0833435058594,
        "z": "455a25b6.fcbc5c"
    },
    {
        "atomic": "false",
        "comments": "",
        "id": "a9adb7fd.3d4988",
        "name": "block",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "d0e97f8b.a0a97",
                "c5897c80.8110a",
                "6546fdb6.d892ac"
            ]
        ],
        "x": 1221.9999389648438,
        "xml": "<block>\n",
        "y": 528.0833206176758,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "c5897c80.8110a",
        "name": "set",
        "type": "set",
        "wires": [],
        "x": 1352.1666870117188,
        "xml": "<set>\n<parameter name='lcm-dmaap.version' value='`$prop.lcm.dmaap.version`'/>\n<parameter name='lcm-dmaap.correlation-id' value='`$upgrade-software-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.partition' value='`$prop.lcm.dmaap.partition`'/>\n<parameter name='lcm-dmaap.rpc-name' value='upgrade-software'/>\n<parameter name='lcm-dmaap.type' value='`$prop.lcm.dmaap.type`'/>\n<parameter name='lcm-dmaap.timestamp' value='`$upgrade-software-input.common-header.timestamp`'/>\n<parameter name='lcm-dmaap.api-ver' value='`$upgrade-software-input.common-header.api-ver`'/>\n<parameter name='lcm-dmaap.originator-id' value='`$upgrade-software-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.request-id' value='`$upgrade-software-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.sub-request-id' value='`$upgrade-software-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.flags.mode' value='`$upgrade-software-input.common-header.flags.mode`'/>\n<parameter name='lcm-dmaap.flags.force' value='`$upgrade-software-input.common-header.flags.force`'/>\n<parameter name='lcm-dmaap.flags.ttl' value='`$upgrade-software-input.common-header.flags.ttl`'/>\n<parameter name='lcm-dmaap.payload' value='`$org.onap.appc.adapter.ansible.results`'/>\n<parameter name='lcm-dmaap.status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='lcm-dmaap.status.message' value='`$org.onap.appc.adapter.ansible.message`'/>\n",
        "y": 481.0833511352539,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "704e725e.7e874c",
        "name": "not-found",
        "outputs": 1,
        "type": "not-found",
        "wires": [
            [
                "28042a17.b7aa2e"
            ]
        ],
        "x": 482,
        "xml": "<outcome value='not-found'>\n",
        "y": 324,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "e7d4edd8.d7f83",
        "name": "set Defaults",
        "type": "set",
        "wires": [],
        "x": 866,
        "xml": "<set>\n<parameter name='$org.onap.appc.adapter.ansible.result.code' value='401'/>\n<parameter name='org.onap.appc.adapter.ansible.message' value='Ansible Adapter was not found'/>\n",
        "y": 271,
        "z": "455a25b6.fcbc5c"
    },
    {
        "atomic": "false",
        "comments": "",
        "id": "28042a17.b7aa2e",
        "name": "block",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "e7d4edd8.d7f83",
                "d1ce272a.df817"
            ]
        ],
        "x": 666,
        "xml": "<block>\n",
        "y": 316,
        "z": "455a25b6.fcbc5c"
    },
    {
        "comments": "",
        "id": "2dcfb067.346e98",
        "name": "set default status value",
        "type": "set",
        "wires": [],
        "x": 293,
        "xml": "<set>\n<parameter name='status.code' value='200' />\n<parameter name='status.message' value='unexpected return from DG' />\n",
        "y": 363,
        "z": "455a25b6.fcbc5c"
    }
]
