[{"id":"e4e70092.b7662","type":"method","name":"upgrade-post-check","xml":"<method rpc='upgrade-post-check' mode='sync'>\n","comments":"","outputs":1,"x":521,"y":182,"z":"9bf3d460.112078","wires":[["bb888dbc.8c45a8"]]},{"id":"8bfd5b63.3e5f4","type":"service-logic","name":"LCM ${project.version}","module":"LCM","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='LCM' version='${project.version}'>","outputs":1,"x":308.99993896484375,"y":183,"z":"9bf3d460.112078","wires":[["e4e70092.b7662"]]},{"id":"5e5ee749.3bcc48","type":"execute","name":"execute AnsibleA.reqExec","xml":"<execute plugin='org.onap.ccsdk.sli.adaptors.ansible.AnsibleAdapter' method='reqExec' >\n<parameter name='AgentUrl' value='`$prop.ansible.agenturl`'/>\n<parameter name='User' value='`$prop.ansible.user`'/>\n<parameter name='Password' value='`prop.ansible.password`'/>\n<parameter name='LocalParameters' value='`$prop.ansible.lcm.localparameters`'/>\n<parameter name='EnvParameters' value='`$upgrade-post-check-input.payload`'/>\n<parameter name='NodeList' value='`$prop.ansible.nodelist`'/>\n<parameter name='Timeout' value='`$prop.ansible.timeout`'/>\n<parameter name='Version' value='`$prop.ansible.version`'/>\n<parameter name='Id' value='`$upgrade-post-check-input.common-header.request-id`'/>\n<parameter name='PlaybookName' value='`$prop.lcm.upgrade-post-check.playbookname`'/>","comments":"","outputs":1,"x":309.00001525878906,"y":400,"z":"9bf3d460.112078","wires":[["1634a5a.ed4b85a","957f4d84.2df1f","46d7a6a2.66c73"]]},{"id":"a6974c46.ebe7b8","type":"switchNode","name":"switch","xml":"<switch test=\"`$org.onap.appc.adapter.ansible.result.code`\">\n","comments":"","outputs":1,"x":610,"y":448,"z":"9bf3d460.112078","wires":[["688b9000.f7d6e","6d4c7406.63e3a4","f9c039c.e2674c8"]]},{"id":"688b9000.f7d6e","type":"other","name":"outcome 500","xml":"<outcome value='500'>\n","comments":"","outputs":1,"x":755,"y":446.00000762939453,"z":"9bf3d460.112078","wires":[["31c18e01.31d712"]]},{"id":"6d4c7406.63e3a4","type":"other","name":"outcome 100","xml":"<outcome value='100'>\n","comments":"","outputs":1,"x":758,"y":489.00003814697266,"z":"9bf3d460.112078","wires":[["49c00e3.94ec7f"]]},{"id":"49c00e3.94ec7f","type":"execute","name":"execute reqExecResult","xml":"<execute plugin='org.onap.ccsdk.sli.adaptors.ansible.AnsibleAdapter' method='reqExecResult' >\n    <parameter name='AgentUrl' value='`$prop.ansible.agenturl`'/>\n\t<parameter name='User' value='`$prop.ansible.user`'/>\n\t<parameter name='Password' value='`$prop.ansible.password`'/>\n\t<parameter name='Id' value='`$upgrade-post-check-input.common-header.request-id`'/>\n\t<parameter name='PlaybookName' value='`$prop.lcm.upgrade-post-check.playbookname`'/>\n\t\n\n\n\n\n","comments":"","outputs":1,"x":936.0000305175781,"y":489.00003814697266,"z":"9bf3d460.112078","wires":[["23a74147.f18206","8fc99d96.bc351"]]},{"id":"957f4d84.2df1f","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":501,"y":357.0000305175781,"z":"9bf3d460.112078","wires":[["31c18e01.31d712"]]},{"id":"1634a5a.ed4b85a","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":503,"y":409,"z":"9bf3d460.112078","wires":[["a6974c46.ebe7b8"]]},{"id":"23a74147.f18206","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1097.0000610351562,"y":466.00000762939453,"z":"9bf3d460.112078","wires":[["31c18e01.31d712"]]},{"id":"f9c039c.e2674c8","type":"other","name":"outcome 101","xml":"<outcome value='101'>\n","comments":"","outputs":1,"x":752,"y":404.00003814697266,"z":"9bf3d460.112078","wires":[["31c18e01.31d712"]]},{"id":"8fc99d96.bc351","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1104.0000610351562,"y":514.0000381469727,"z":"9bf3d460.112078","wires":[["d1887396.9adf08"]]},{"id":"6d18cbe4.797a4c","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='status.message' value='`$org.onap.appc.adapter.ansible.message`'/>","comments":"","x":1386.9999389648438,"y":566.0000381469727,"z":"9bf3d460.112078","wires":[]},{"id":"12001730.eb4a51","type":"dgstart","name":"DGSTART","outputs":1,"x":124,"y":182,"z":"9bf3d460.112078","wires":[["8bfd5b63.3e5f4"]]},{"id":"bb888dbc.8c45a8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":119.91668701171875,"y":363.0833435058594,"z":"9bf3d460.112078","wires":[["5e5ee749.3bcc48","a6d4fb87.681f68","b740ef3c.edfdc8"]]},{"id":"a6d4fb87.681f68","type":"execute","name":"execute Properties","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/lcm-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":292.00001525878906,"y":321.0833435058594,"z":"9bf3d460.112078","wires":[[]]},{"id":"cb67f90f.046f3","type":"execute","name":"execute DmaapMsg","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.lcm.dmaap.publish.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.lcm.dmaap.url`' />\n    <parameter name='restapiUser' value='`$prop.lcm.dmaap.user`' />\n    <parameter name='restapiPassword' value='`$prop.lcm.dmaap.password`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name=\"responsePrefix\" value=\"lcm\" />\n","comments":"","outputs":1,"x":1104.0000610351562,"y":310.0833435058594,"z":"9bf3d460.112078","wires":[["875f0b0e.0e6f7"]]},{"id":"875f0b0e.0e6f7","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1274,"y":309.0833435058594,"z":"9bf3d460.112078","wires":[["ffef3abf.fa3b28"]]},{"id":"31c18e01.31d712","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":907,"y":334.0833435058594,"z":"9bf3d460.112078","wires":[["cb67f90f.046f3","a0aa0de3.da3e58","ba94d9aa.311d58"]]},{"id":"49340dd8.256594","type":"execute","name":"execute DmaapMsg","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.lcm.dmaap.publish.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.lcm.dmaap.url`' />\n    <parameter name='restapiUser' value='`$prop.lcm.dmaap.user`' />\n    <parameter name='restapiPassword' value='`$prop.lcm.dmaap.password`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name=\"responsePrefix\" value=\"lcm\" />\n","comments":"","outputs":1,"x":1407.4999389648438,"y":515.0833511352539,"z":"9bf3d460.112078","wires":[["2488d4ee.ca9d2c"]]},{"id":"2488d4ee.ca9d2c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1567.4999389648438,"y":515.0833511352539,"z":"9bf3d460.112078","wires":[["4d1cd7f3.31def8"]]},{"id":"ffef3abf.fa3b28","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\"> \n\t<parameter name=\"logger\" value=\"message-log\"/> \n\t<parameter name=\"field1\" value='Failed to Publish to DMaap'/>","comments":"","outputs":1,"x":1406,"y":309.0833435058594,"z":"9bf3d460.112078","wires":[[]]},{"id":"a0aa0de3.da3e58","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='status.code' value='401' />\n<parameter name='status.message' value='`$org.onap.appc.adapter.ansible.message`' />\n","comments":"","x":1078.9166870117188,"y":347.0833435058594,"z":"9bf3d460.112078","wires":[]},{"id":"4d1cd7f3.31def8","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\"> \n\t<parameter name=\"logger\" value=\"message-log\"/> \n\t<parameter name=\"field1\" value='Failed to Publish to DMaap'/>","comments":"","outputs":1,"x":1688.9166870117188,"y":516.0833511352539,"z":"9bf3d460.112078","wires":[[]]},{"id":"ba94d9aa.311d58","type":"set","name":"set","xml":"<set>\n<parameter name='lcm-dmaap.version' value='`$prop.lcm.dmaap.version`'/>\n<parameter name='lcm-dmaap.correlation-id' value='`$upgrade-post-check-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.partition' value='`$prop.lcm.dmaap.partition`'/>\n<parameter name='lcm-dmaap.rpc-name' value='upgrade-post-check'/>\n<parameter name='lcm-dmaap.type' value='`$prop.lcm.dmaap.type`'/>\n<parameter name='lcm-dmaap.timestamp' value='`$upgrade-post-check-input.common-header.timestamp`'/>\n<parameter name='lcm-dmaap.api-ver' value='`$upgrade-post-check-input.common-header.api-ver`'/>\n<parameter name='lcm-dmaap.originator-id' value='`$upgrade-post-check-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.request-id' value='`$upgrade-post-check-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.sub-request-id' value='`$upgrade-post-check-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.flags.mode' value='`$upgrade-post-check-input.common-header.flags.mode`'/>\n<parameter name='lcm-dmaap.flags.force' value='`$upgrade-post-check-input.common-header.flags.force`'/>\n<parameter name='lcm-dmaap.flags.ttl' value='`$upgrade-post-check-input.common-header.flags.ttl`'/>\n<parameter name='lcm-dmaap.payload' value='`$org.onap.appc.adapter.ansible.results`'/>\n<parameter name='lcm-dmaap.status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='lcm-dmaap.status.message' value='`$org.onap.appc.adapter.ansible.message`'/>\n","comments":"","x":1056.0000610351562,"y":257.0833435058594,"z":"9bf3d460.112078","wires":[]},{"id":"d1887396.9adf08","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1236.9999389648438,"y":514.0833206176758,"z":"9bf3d460.112078","wires":[["49340dd8.256594","2c76247f.67dc84","6d18cbe4.797a4c"]]},{"id":"2c76247f.67dc84","type":"set","name":"set","xml":"<set>\n<parameter name='lcm-dmaap.version' value='`$prop.lcm.dmaap.version`'/>\n<parameter name='lcm-dmaap.correlation-id' value='`$upgrade-post-check-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.partition' value='`$prop.lcm.dmaap.partition`'/>\n<parameter name='lcm-dmaap.rpc-name' value='upgrade-post-check'/>\n<parameter name='lcm-dmaap.type' value='`$prop.lcm.dmaap.type`'/>\n<parameter name='lcm-dmaap.timestamp' value='`$upgrade-post-check-input.common-header.timestamp`'/>\n<parameter name='lcm-dmaap.api-ver' value='`$upgrade-post-check-input.common-header.api-ver`'/>\n<parameter name='lcm-dmaap.originator-id' value='`$upgrade-post-check-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.request-id' value='`$upgrade-post-check-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.sub-request-id' value='`$upgrade-post-check-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.flags.mode' value='`$upgrade-post-check-input.common-header.flags.mode`'/>\n<parameter name='lcm-dmaap.flags.force' value='`$upgrade-post-check-input.common-header.flags.force`'/>\n<parameter name='lcm-dmaap.flags.ttl' value='`$upgrade-post-check-input.common-header.flags.ttl`'/>\n<parameter name='lcm-dmaap.payload' value='`$org.onap.appc.adapter.ansible.results`'/>\n<parameter name='lcm-dmaap.status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='lcm-dmaap.status.message' value='`$org.onap.appc.adapter.ansible.message`'/>\n","comments":"","x":1367.1666870117188,"y":467.0833511352539,"z":"9bf3d460.112078","wires":[]},{"id":"46d7a6a2.66c73","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":497,"y":310,"z":"9bf3d460.112078","wires":[["c55c0137.1972f8"]]},{"id":"5abbb598.ba8e2c","type":"set","name":"set Defaults","xml":"<set>\n<parameter name='$org.onap.appc.adapter.ansible.result.code' value='401'/>\n<parameter name='org.onap.appc.adapter.ansible.message' value='Ansible Adapter was not found'/>\n","comments":"","x":881,"y":257,"z":"9bf3d460.112078","wires":[]},{"id":"c55c0137.1972f8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":681,"y":302,"z":"9bf3d460.112078","wires":[["5abbb598.ba8e2c","31c18e01.31d712"]]},{"id":"b740ef3c.edfdc8","type":"set","name":"set default status value","xml":"<set>\n<parameter name='status.code' value='200' />\n<parameter name='status.message' value='unexpected return from DG' />\n","comments":"","x":306,"y":361,"z":"9bf3d460.112078","wires":[]}]