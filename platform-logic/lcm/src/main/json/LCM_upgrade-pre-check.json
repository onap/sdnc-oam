[{"id":"7018ec36.4cc5ec","type":"method","name":"upgrade-pre-check","xml":"<method rpc='upgrade-pre-check' mode='sync'>\n","comments":"","outputs":1,"x":531,"y":159,"z":"c751ea25.6a3e48","wires":[["7b5d3338.9d34a4"]]},{"id":"761735d6.a3ecec","type":"service-logic","name":"LCM ${project.version}","module":"LCM","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='LCM' version='${project.version}'>","outputs":1,"x":318.99993896484375,"y":160,"z":"c751ea25.6a3e48","wires":[["7018ec36.4cc5ec"]]},{"id":"df87797d.9a6da8","type":"execute","name":"execute AnsibleA.reqExec","xml":"<execute plugin='org.onap.ccsdk.sli.adaptors.ansible.AnsibleAdapter' method='reqExec' >\n<parameter name='AgentUrl' value='`$prop.ansible.agenturl`'/>\n<parameter name='User' value='`$prop.ansible.user`'/>\n<parameter name='Password' value='`prop.ansible.password`'/>\n<parameter name='LocalParameters' value='`$prop.ansible.lcm.localparameters`'/>\n<parameter name='EnvParameters' value='`$upgrade-pre-check-input.payload`'/>\n<parameter name='NodeList' value='`$prop.ansible.nodelist`'/>\n<parameter name='Timeout' value='`$prop.ansible.timeout`'/>\n<parameter name='Version' value='`$prop.ansible.version`'/>\n<parameter name='Id' value='`$upgrade-pre-check-input.common-header.request-id`'/>\n<parameter name='PlaybookName' value='`$prop.lcm.upgrade-pre-check.playbookname`'/>","comments":"","outputs":1,"x":319.00001525878906,"y":377,"z":"c751ea25.6a3e48","wires":[["1f9baab1.f667bd","4dcb875e.05025","98923780.210838"]]},{"id":"be5a404c.df63b","type":"switchNode","name":"switch","xml":"<switch test=\"`$org.onap.appc.adapter.ansible.result.code`\">\n","comments":"","outputs":1,"x":620,"y":425,"z":"c751ea25.6a3e48","wires":[["a0717baa.0ad7c8","76b22e49.42c978","9040169.c537f68"]]},{"id":"a0717baa.0ad7c8","type":"other","name":"outcome 500","xml":"<outcome value='500'>\n","comments":"","outputs":1,"x":765,"y":423.00000762939453,"z":"c751ea25.6a3e48","wires":[["ea274695.4ed0a"]]},{"id":"76b22e49.42c978","type":"other","name":"outcome 100","xml":"<outcome value='100'>\n","comments":"","outputs":1,"x":768,"y":466.00003814697266,"z":"c751ea25.6a3e48","wires":[["f49ca07a.b8928"]]},{"id":"f49ca07a.b8928","type":"execute","name":"execute reqExecResult","xml":"<execute plugin='org.onap.ccsdk.sli.adaptors.ansible.AnsibleAdapter' method='reqExecResult' >\n    <parameter name='AgentUrl' value='`$prop.ansible.agenturl`'/>\n\t<parameter name='User' value='`$prop.ansible.user`'/>\n\t<parameter name='Password' value='`$prop.ansible.password`'/>\n\t<parameter name='Id' value='`$upgrade-pre-check-input.common-header.request-id`'/>\n\t<parameter name='PlaybookName' value='`$prop.lcm.upgrade-pre-check.playbookname`'/>\n\t\n\n\n\n\n","comments":"","outputs":1,"x":946.0000305175781,"y":466.00003814697266,"z":"c751ea25.6a3e48","wires":[["49baafab.739d7","225528dc.01ae88"]]},{"id":"4dcb875e.05025","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":511,"y":334.0000305175781,"z":"c751ea25.6a3e48","wires":[["ea274695.4ed0a"]]},{"id":"1f9baab1.f667bd","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":513,"y":386,"z":"c751ea25.6a3e48","wires":[["be5a404c.df63b"]]},{"id":"49baafab.739d7","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1107.0000610351562,"y":443.00000762939453,"z":"c751ea25.6a3e48","wires":[["ea274695.4ed0a"]]},{"id":"9040169.c537f68","type":"other","name":"outcome 101","xml":"<outcome value='101'>\n","comments":"","outputs":1,"x":762,"y":381.00003814697266,"z":"c751ea25.6a3e48","wires":[["ea274695.4ed0a"]]},{"id":"225528dc.01ae88","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1114.0000610351562,"y":491.00003814697266,"z":"c751ea25.6a3e48","wires":[["6714b2b5.d30774"]]},{"id":"a635bf9c.d50128","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='status.message' value='`$org.onap.appc.adapter.ansible.message`'/>","comments":"","x":1396.9999389648438,"y":543.0000381469727,"z":"c751ea25.6a3e48","wires":[]},{"id":"cfce7550.eb4e38","type":"dgstart","name":"DGSTART","outputs":1,"x":134,"y":159,"z":"c751ea25.6a3e48","wires":[["761735d6.a3ecec"]]},{"id":"7b5d3338.9d34a4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":129.91668701171875,"y":340.0833435058594,"z":"c751ea25.6a3e48","wires":[["df87797d.9a6da8","61c92510.8e1f44","88ad34a4.11ef"]]},{"id":"61c92510.8e1f44","type":"execute","name":"execute Properties","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/lcm-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":303.00001525878906,"y":293.0833435058594,"z":"c751ea25.6a3e48","wires":[[]]},{"id":"1b10ccd4.98611b","type":"execute","name":"execute DmaapMsg","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.lcm.dmaap.publish.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.lcm.dmaap.url`' />\n    <parameter name='restapiUser' value='`$prop.lcm.dmaap.user`' />\n    <parameter name='restapiPassword' value='`$prop.lcm.dmaap.password`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name=\"responsePrefix\" value=\"lcm\" />\n","comments":"","outputs":1,"x":1114.0000610351562,"y":287.0833435058594,"z":"c751ea25.6a3e48","wires":[["41a315d2.219cbc"]]},{"id":"41a315d2.219cbc","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1284,"y":286.0833435058594,"z":"c751ea25.6a3e48","wires":[["8cd3938a.e26c48"]]},{"id":"ea274695.4ed0a","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":917,"y":311.0833435058594,"z":"c751ea25.6a3e48","wires":[["1b10ccd4.98611b","bccd0081.01b13","7a021bb.f1ec464"]]},{"id":"bdd486fa.e9a568","type":"execute","name":"execute DmaapMsg","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.lcm.dmaap.publish.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.lcm.dmaap.url`' />\n    <parameter name='restapiUser' value='`$prop.lcm.dmaap.user`' />\n    <parameter name='restapiPassword' value='`$prop.lcm.dmaap.password`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='contentType' value='application/json' />\n    <parameter name=\"responsePrefix\" value=\"lcm\" />\n","comments":"","outputs":1,"x":1417.4999389648438,"y":492.0833511352539,"z":"c751ea25.6a3e48","wires":[["9f6ebc1e.f5d92"]]},{"id":"9f6ebc1e.f5d92","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1577.4999389648438,"y":492.0833511352539,"z":"c751ea25.6a3e48","wires":[["570d9c94.41a1c4"]]},{"id":"8cd3938a.e26c48","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\"> \n\t<parameter name=\"logger\" value=\"message-log\"/> \n\t<parameter name=\"field1\" value='Failed to Publish to DMaap'/>","comments":"","outputs":1,"x":1416,"y":286.0833435058594,"z":"c751ea25.6a3e48","wires":[[]]},{"id":"bccd0081.01b13","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='status.code' value='401' />\n<parameter name='status.message' value='`$org.onap.appc.adapter.ansible.message`' />\n","comments":"","x":1088.9166870117188,"y":324.0833435058594,"z":"c751ea25.6a3e48","wires":[]},{"id":"570d9c94.41a1c4","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\"> \n\t<parameter name=\"logger\" value=\"message-log\"/> \n\t<parameter name=\"field1\" value='Failed to Publish to DMaap'/>","comments":"","outputs":1,"x":1698.9166870117188,"y":493.0833511352539,"z":"c751ea25.6a3e48","wires":[[]]},{"id":"7a021bb.f1ec464","type":"set","name":"set","xml":"<set>\n<parameter name='lcm-dmaap.version' value='`$prop.lcm.dmaap.version`'/>\n<parameter name='lcm-dmaap.correlation-id' value='`$upgrade-pre-check-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.partition' value='`$prop.lcm.dmaap.partition`'/>\n<parameter name='lcm-dmaap.rpc-name' value='upgrade-pre-check'/>\n<parameter name='lcm-dmaap.type' value='`$prop.lcm.dmaap.type`'/>\n<parameter name='lcm-dmaap.timestamp' value='`$upgrade-pre-check-input.common-header.timestamp`'/>\n<parameter name='lcm-dmaap.api-ver' value='`$upgrade-pre-check-input.common-header.api-ver`'/>\n<parameter name='lcm-dmaap.originator-id' value='`$upgrade-pre-check-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.request-id' value='`$upgrade-pre-check-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.sub-request-id' value='`$upgrade-pre-check-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.flags.mode' value='`$upgrade-pre-check-input.common-header.flags.mode`'/>\n<parameter name='lcm-dmaap.flags.force' value='`$upgrade-pre-check-input.common-header.flags.force`'/>\n<parameter name='lcm-dmaap.flags.ttl' value='`$upgrade-pre-check-input.common-header.flags.ttl`'/>\n<parameter name='lcm-dmaap.payload' value='`$org.onap.appc.adapter.ansible.results`'/>\n<parameter name='lcm-dmaap.status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='lcm-dmaap.status.message' value='`$org.onap.appc.adapter.ansible.message`'/>\n","comments":"","x":1066.0000610351562,"y":234.08334350585938,"z":"c751ea25.6a3e48","wires":[]},{"id":"6714b2b5.d30774","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1246.9999389648438,"y":491.0833206176758,"z":"c751ea25.6a3e48","wires":[["bdd486fa.e9a568","a28655e0.def7f8","a635bf9c.d50128"]]},{"id":"a28655e0.def7f8","type":"set","name":"set","xml":"<set>\n<parameter name='lcm-dmaap.version' value='`$prop.lcm.dmaap.version`'/>\n<parameter name='lcm-dmaap.correlation-id' value='`$upgrade-pre-check-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.partition' value='`$prop.lcm.dmaap.partition`'/>\n<parameter name='lcm-dmaap.rpc-name' value='upgrade-pre-check'/>\n<parameter name='lcm-dmaap.type' value='`$prop.lcm.dmaap.type`'/>\n<parameter name='lcm-dmaap.timestamp' value='`$upgrade-pre-check-input.common-header.timestamp`'/>\n<parameter name='lcm-dmaap.api-ver' value='`$upgrade-pre-check-input.common-header.api-ver`'/>\n<parameter name='lcm-dmaap.originator-id' value='`$upgrade-pre-check-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.request-id' value='`$upgrade-pre-check-input.common-header.originator-id`'/>\n<parameter name='lcm-dmaap.sub-request-id' value='`$upgrade-pre-check-input.common-header.sub-request-id`'/>\n<parameter name='lcm-dmaap.flags.mode' value='`$upgrade-pre-check-input.common-header.flags.mode`'/>\n<parameter name='lcm-dmaap.flags.force' value='`$upgrade-pre-check-input.common-header.flags.force`'/>\n<parameter name='lcm-dmaap.flags.ttl' value='`$upgrade-pre-check-input.common-header.flags.ttl`'/>\n<parameter name='lcm-dmaap.payload' value='`$org.onap.appc.adapter.ansible.results`'/>\n<parameter name='lcm-dmaap.status.code' value='`$org.onap.appc.adapter.ansible.result.code`' />\n<parameter name='lcm-dmaap.status.message' value='`$org.onap.appc.adapter.ansible.message`'/>\n","comments":"","x":1377.1666870117188,"y":444.0833511352539,"z":"c751ea25.6a3e48","wires":[]},{"id":"98923780.210838","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":507,"y":287,"z":"c751ea25.6a3e48","wires":[["504babef.4c020c"]]},{"id":"4ab0c40.39584bc","type":"set","name":"set Defaults","xml":"<set>\n<parameter name='org.onap.appc.adapter.ansible.result.code' value='401'/>\n<parameter name='org.onap.appc.adapter.ansible.message' value='Ansible Adapter was not found'/>\n","comments":"","x":891,"y":234,"z":"c751ea25.6a3e48","wires":[]},{"id":"504babef.4c020c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":691,"y":279,"z":"c751ea25.6a3e48","wires":[["4ab0c40.39584bc","ea274695.4ed0a"]]},{"id":"88ad34a4.11ef","type":"set","name":"set default status value","xml":"<set>\n<parameter name='status.code' value='200' />\n<parameter name='status.message' value='unexpected return from DG' />\n","comments":"","x":312,"y":337,"z":"c751ea25.6a3e48","wires":[]}]