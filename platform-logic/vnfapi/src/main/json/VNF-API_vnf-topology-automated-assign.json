[{"id":"19c70578.77915b","type":"dgstart","name":"DGSTART","outputs":1,"x":198.3333282470703,"y":104.99999237060547,"z":"69f32ccf.cd5fd4","wires":[["e5ed4bd.9ce4ab8"]]},{"id":"e5ed4bd.9ce4ab8","type":"service-logic","name":"VNF-API ${project.version}","module":"VNF-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='VNF-API' version='${project.version}'>","outputs":1,"x":406.6190490722656,"y":105.4285659790039,"z":"69f32ccf.cd5fd4","wires":[["90e4b736.cd6728"]]},{"id":"90e4b736.cd6728","type":"method","name":"method vnf-topology-automated-assign","xml":"<method rpc='vnf-topology-automated-assign' mode='sync'>\n","comments":"","outputs":1,"x":323.4047546386719,"y":176.42856407165527,"z":"69f32ccf.cd5fd4","wires":[["ef055ffb.d5451"]]},{"id":"8f224618.aa8cd8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":892.4761657714844,"y":444.1428623199463,"z":"69f32ccf.cd5fd4","wires":[["65434f57.13c75","f1c31e1e.17da3","d18d9ad.4e9e468","f73f0c2e.1eb52","65e6ea47.2a0094","7e3fa03c.64e07","cb771c76.70e45","86aa2905.3e7f58"]]},{"id":"5cbdeac4.822c34","type":"set","name":"set: order-status = PendingCreate","xml":"<set>\n\t<parameter name=\"service-data.oper-status.order-status\" value=\"PendingCreate\"/>","comments":"","x":568.8333129882812,"y":1485.7143726348877,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"e9c1d54d.8e17f8","type":"comment","name":"request-action = VNFActivateRequest","info":"","comments":"","x":739.8333282470703,"y":97.49999237060547,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"b17a9338.48991","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1458.9047317504883,"y":942.4285926818848,"z":"69f32ccf.cd5fd4","wires":[["333d3434.f96b6c"]]},{"id":"5fa3cf38.7cbe6","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"Encountered error while updating vf-module orchestration-status in AnAI\"/>","comments":"","x":1841.5476150512695,"y":1045.714259147644,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"3f389ad8.2a12f6","type":"save","name":"save relationship: l3-network","xml":"<save plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" \n\tresource=\"vf-module:relationship-list\" \n\t\tkey=\"vf-module.vf-module-id = $vnf-topology-operation-input.vnf-request-information.vnf-id \n\t\t\tand generic-vnf.vnf-id = $vnf-topology-operation-input.vnf-request-information.generic-vnf-id\" \n\tforce=\"true\" \n\tlocal-only=\"false\">\n\t\n\t<parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n\t<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"l3-network.network-id\" />\n\t<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$service-data.vnf-topology-information.vnf-assignments.vnf-networks[$i].network-id`\" />","comments":"","outputs":1,"x":1486.9047317504883,"y":816.4285926818848,"z":"69f32ccf.cd5fd4","wires":[["f318fbcd.181d28"]]},{"id":"f318fbcd.181d28","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1714.0475578308105,"y":815.7142887115479,"z":"69f32ccf.cd5fd4","wires":[["e27f2ae9.5c7ec8"]]},{"id":"65434f57.13c75","type":"for","name":"for i : SERVICE_DATA vnf-networks","xml":"<for index=\"i\" start=\"0\" end=\"`$service-data.vnf-topology-information.vnf-assignments.vnf-networks_length`\">","comments":"","outputs":1,"x":1168.9047317504883,"y":816.4285926818848,"z":"69f32ccf.cd5fd4","wires":[["3f389ad8.2a12f6"]]},{"id":"d74276cd.85df88","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Encountered error while saving vf-module l3-network relationship in AnAI with network-id = ' + $service-data.vnf-topology-information.vnf-assignments.vnf-networks[$i].network-id`\"/>","comments":"","x":2143.118896484375,"y":1021.7143115997314,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"e27f2ae9.5c7ec8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1895.0475578308105,"y":815.7142887115479,"z":"69f32ccf.cd5fd4","wires":[["d74276cd.85df88","5cfffa58.0d15f4"]]},{"id":"cbf4a58d.9e5538","type":"save","name":"delete vf-module: l3-network relationship","xml":"<delete plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" \n\tresource=\"vf-module:relationship-list\" \n\tkey=\"vf-module.vf-module-id = $vnf-topology-operation-input.vnf-request-information.vnf-id \n\t\tAND generic-vnf.vnf-id = $vnf-topology-operation-input.vnf-request-information.generic-vnf-id \n\t\tAND related-to = l3-network\" \n\tforce=\"true\" \n\tlocal-only=\"false\">","comments":"","outputs":1,"x":2416.6907653808594,"y":941.5713872909546,"z":"69f32ccf.cd5fd4","wires":[[]]},{"id":"f1c31e1e.17da3","type":"save","name":"update AnAI - vf-module.orchestration-status","xml":"<update plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" \n\tresource=\"vf-module\" \n\t\tkey=\"vf-module.vf-module-id = $vnf-topology-operation-input.vnf-request-information.vnf-id \n\t\t\tand generic-vnf.vnf-id = $vnf-topology-operation-input.vnf-request-information.generic-vnf-id\" \n\t\tlocal-only=\"false\" >\n\t<parameter name=\"orchestration-status\" value=\"pending-create\" />","comments":"","outputs":1,"x":1197.4047317504883,"y":942.4285926818848,"z":"69f32ccf.cd5fd4","wires":[["b17a9338.48991","39a3b937.486786"]]},{"id":"333d3434.f96b6c","type":"block","name":"block: atomic","xml":"<block atomic=\"true\">\n","atomic":"false","comments":"","outputs":1,"x":1643.976173400879,"y":942.8571624755859,"z":"69f32ccf.cd5fd4","wires":[["5fa3cf38.7cbe6","5cfffa58.0d15f4"]]},{"id":"d18d9ad.4e9e468","type":"call","name":"call: vnf-topology-automated-assign-vfmodule","xml":"<call module='VNF-API' rpc='vnf-topology-automated-assign-vfmodule' mode='sync' >","comments":"","outputs":1,"x":1199.4047317504883,"y":638.4285926818848,"z":"69f32ccf.cd5fd4","wires":[["7c00c0f7.ee28c"]]},{"id":"e9b2b022.4eabd","type":"set","name":"Set final indicator to Y","xml":"<set>\n<parameter name=\"ack-final\" value=\"Y\"/>","comments":"","x":532.8333129882812,"y":1541.7143726348877,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"f73f0c2e.1eb52","type":"switchNode","name":"switch ...SERVICE-DATA vnf-networks[]","xml":"<switch test=\"`$service-data.vnf-topology-information.vnf-assignments.vnf-networks_length`\">","comments":"","outputs":1,"x":1181.4047317504883,"y":749.4285926818848,"z":"69f32ccf.cd5fd4","wires":[["33b7b793.0c9ec8"]]},{"id":"33b7b793.0c9ec8","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1423.3491439819336,"y":749.5396842956543,"z":"69f32ccf.cd5fd4","wires":[["b9700509.d5c998"]]},{"id":"b9700509.d5c998","type":"set","name":"set SERVICE-DATA vnf-networks[] = 0","xml":"<set>\n<parameter name='service-data.vnf-topology-information.vnf-assignments.vnf-networks_length' value='0' />\n","comments":"","x":1656.9047317504883,"y":749.4285926818848,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"65e6ea47.2a0094","type":"save","name":"GET AnAI - vf-module","xml":"<get-resource plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" \n\tresource=\"vf-module\" \n\t\tkey=\"vf-module.vf-module-id = $vnf-topology-operation-input.vnf-request-information.vnf-id \n\t\t\tand generic-vnf.vnf-id = $vnf-topology-operation-input.vnf-request-information.generic-vnf-id\" \n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.AnAI.vfmodule\" >","comments":"","outputs":1,"x":1130.6904525756836,"y":554.4285869598389,"z":"69f32ccf.cd5fd4","wires":[["975256ab.71d298","27b91bf5.2e2034"]]},{"id":"975256ab.71d298","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1328.9047241210938,"y":525.8571662902832,"z":"69f32ccf.cd5fd4","wires":[["e6a7b96d.b296b8"]]},{"id":"27b91bf5.2e2034","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1334.5475845336914,"y":577.2857341766357,"z":"69f32ccf.cd5fd4","wires":[["177e88.6038b179"]]},{"id":"e6a7b96d.b296b8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Encountered error while querying vf-module from AnAI with vf-module-id = ' + $vnf-topology-operation-input.vnf-request-information.vnf-id + ' and generic-vnf-id = ' + $vnf-topology-operation-input.vnf-request-information.generic-vnf-id`\"/>","comments":"","x":1527.4047241210938,"y":525.8571662902832,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"177e88.6038b179","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='404'/>\n\t<parameter name='error-message' value=\"`'vf-module not found in AnAI with vf-module-id = ' + $vnf-topology-operation-input.vnf-request-information.vnf-id + ' and generic-vnf-id = ' + $vnf-topology-operation-input.vnf-request-information.generic-vnf-id`\"/>","comments":"","x":1524.5475845336914,"y":577.2857341766357,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"50d1f591.f57f2c","type":"switchNode","name":"switch:vnf-id | config == input","xml":"<switch test=\"`$vnf-topology-operation-input.vnf-request-information.vnf-id == $service-data.vnf-id`\">","comments":"","outputs":1,"x":523.023811340332,"y":257.4285774230957,"z":"69f32ccf.cd5fd4","wires":[["ee5d1b39.e29f58","c0af7323.12563"]]},{"id":"ee5d1b39.e29f58","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":733.1904983520508,"y":257.4285640716553,"z":"69f32ccf.cd5fd4","wires":[["e707c69b.6ba1e8"]]},{"id":"7e3fa03c.64e07","type":"switchNode","name":"switch: INPUT model-customization-uuid","xml":"<switch test=\"`$vnf-topology-operation-input.vnf-request-information.model-customization-uuid`\">","comments":"","outputs":1,"x":1182.6190032958984,"y":443.74997329711914,"z":"69f32ccf.cd5fd4","wires":[["4b362009.d3dfc","ca6c7782.4a6d48"]]},{"id":"ca6c7782.4a6d48","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1441.6903915405273,"y":464.9999599456787,"z":"69f32ccf.cd5fd4","wires":[["ab8232e9.42b06"]]},{"id":"4b362009.d3dfc","type":"outcome","name":"0","xml":"<outcome value='0'>","comments":"","outputs":1,"x":1437.9761505126953,"y":418.85712909698486,"z":"69f32ccf.cd5fd4","wires":[["ab8232e9.42b06"]]},{"id":"ab8232e9.42b06","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='model-customization-uuid cannot be NULL or 0'/>","comments":"","x":1611.6904678344727,"y":438.14280700683594,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"5cfffa58.0d15f4","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2148.333427429199,"y":942.4642696380615,"z":"69f32ccf.cd5fd4","wires":[["cbf4a58d.9e5538","91762bb4.9cfce8"]]},{"id":"53b076c9.4ba648","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value='vnf-id is already present in config-tree'/>","comments":"","x":1379.7619552612305,"y":257.0000009536743,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"773d250a.812e7c","type":"other","name":"false","xml":"<outcome value='false'>","comments":"","outputs":1,"x":1212.7619323730469,"y":256.74999618530273,"z":"69f32ccf.cd5fd4","wires":[["53b076c9.4ba648"]]},{"id":"e707c69b.6ba1e8","type":"switchNode","name":"switch: order-status = PendingDelete","xml":"<switch test=\"`$service-data.oper-status.order-status == PendingDelete`\">","comments":"","outputs":1,"x":972.9448318481445,"y":257.04979705810547,"z":"69f32ccf.cd5fd4","wires":[["773d250a.812e7c","b0c148.4691deb8"]]},{"id":"b05cb87e.8f8618","type":"comment","name":"Soft Delete will have PendingDelete status","info":"","comments":"","x":969.2619476318359,"y":212.24999952316284,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"b0c148.4691deb8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1215.5119323730469,"y":303.49999618530273,"z":"69f32ccf.cd5fd4","wires":[["5921680a.767eb8"]]},{"id":"dda1dee2.97977","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1735.511962890625,"y":303.5000114440918,"z":"69f32ccf.cd5fd4","wires":[["ce743f75.14516"]]},{"id":"40141bc0.f5b3f4","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"Encountered error while updating vf-module orchestration-status in AnAI during soft delete\"/>","comments":"","x":2086.011962890625,"y":303.5000114440918,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"5921680a.767eb8","type":"save","name":"update AnAI - vf-module.orchestration-status","xml":"<update plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" \n\tresource=\"vf-module\" \n\t\tkey=\"vf-module.vf-module-id = $vnf-topology-operation-input.vnf-request-information.vnf-id \n\t\t\tand generic-vnf.vnf-id = $vnf-topology-operation-input.vnf-request-information.generic-vnf-id\" \n\t\tlocal-only=\"false\" >\n\t<parameter name=\"orchestration-status\" value=\"pending-create\" />","comments":"","outputs":1,"x":1474.011962890625,"y":303.5000114440918,"z":"69f32ccf.cd5fd4","wires":[["dda1dee2.97977","bccffa78.02e648"]]},{"id":"ce743f75.14516","type":"block","name":"block: atomic","xml":"<block atomic=\"true\">\n","atomic":"false","comments":"","outputs":1,"x":1915.011962890625,"y":303.5000114440918,"z":"69f32ccf.cd5fd4","wires":[["40141bc0.f5b3f4"]]},{"id":"bccffa78.02e648","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1743.5119400024414,"y":346.0000047683716,"z":"69f32ccf.cd5fd4","wires":[["ce743f75.14516"]]},{"id":"ef055ffb.d5451","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":292.6190490722656,"y":257.8571434020996,"z":"69f32ccf.cd5fd4","wires":[["50d1f591.f57f2c","5cbdeac4.822c34","e9b2b022.4eabd"]]},{"id":"c0af7323.12563","type":"other","name":"false","xml":"<outcome value='false'>","comments":"","outputs":1,"x":734.0476379394531,"y":309.28571701049805,"z":"69f32ccf.cd5fd4","wires":[["8f224618.aa8cd8"]]},{"id":"39a3b937.486786","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1465.4762268066406,"y":984.9999942779541,"z":"69f32ccf.cd5fd4","wires":[["333d3434.f96b6c"]]},{"id":"de153954.fb5e88","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1731.476219177246,"y":1196.8571758270264,"z":"69f32ccf.cd5fd4","wires":[["95839647.bb2178"]]},{"id":"a698b60c.f2ea08","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Encountered error while saving vnfc with vnfc-name' + tmp.vnfc[$i].vnfc-name + ' in AnAI; ' + $error-message`\"/>","comments":"","x":2140.262092590332,"y":1248.2857522964478,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"1dfa44b7.83732b","type":"save","name":"save AAI: vnfc objects","xml":"<save plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" \n\tresource=\"vnfc\" \n\t\tkey=\"vnfc.vnfc-name = $tmp.vnfc[$i].vnfc-name\" >\n\t<parameter name=\"nfc-function\" value=\"`$tmp.vnfc[$i].nfc-function`\" />\n\t<parameter name=\"nfc-naming-code\" value=\"`$tmp.vnfc[$i].nfc-naming-code`\" />\n\t<parameter name=\"orchestration-status\" value=\"pending-create\" />","comments":"","outputs":1,"x":1522.2620239257812,"y":1197.2857122421265,"z":"69f32ccf.cd5fd4","wires":[["de153954.fb5e88","8836042b.b71728"]]},{"id":"95839647.bb2178","type":"block","name":"block: atomic","xml":"<block atomic=\"true\">\n","atomic":"false","comments":"","outputs":1,"x":1909.1191101074219,"y":1196.8571319580078,"z":"69f32ccf.cd5fd4","wires":[["a698b60c.f2ea08","66ae746b.d0177c","5cfffa58.0d15f4"]]},{"id":"8836042b.b71728","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1738.047737121582,"y":1245.1428527832031,"z":"69f32ccf.cd5fd4","wires":[["95839647.bb2178"]]},{"id":"cb771c76.70e45","type":"for","name":"for i : vnfc-index","xml":"<for index=\"i\" start=\"0\" end=\"`$vnfc-index`\">","comments":"","outputs":1,"x":1106.9047012329102,"y":1196.8571586608887,"z":"69f32ccf.cd5fd4","wires":[["568db2c9.1eb4ec"]]},{"id":"b7cc312e.a742d","type":"save","name":"delete AAI: vnfc","xml":"<delete plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" \n\tresource=\"vnfc\" \n\t\tkey=\"vnfc.vnfc-name = $tmp.vnfc[$i].vnfc-name\" > ","comments":"","outputs":1,"x":2356.0476570129395,"y":1195.7141780853271,"z":"69f32ccf.cd5fd4","wires":[["c692de6a.d92fb"]]},{"id":"66ae746b.d0177c","type":"for","name":"for i : vnfc-index","xml":"<for index=\"i\" start=\"0\" end=\"`$vnfc-index`\">","comments":"","outputs":1,"x":2149.761962890625,"y":1196.1428031921387,"z":"69f32ccf.cd5fd4","wires":[["b7cc312e.a742d"]]},{"id":"c692de6a.d92fb","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2527.4762115478516,"y":1195.4285593032837,"z":"69f32ccf.cd5fd4","wires":[["7d93d9c0.8496f8"]]},{"id":"7d93d9c0.8496f8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Encountered error while rolling back vnfc object' + $tmp.vnfc[$i].vnfc-name + ' from AnAI. MANUAL rollback is required!'`\"/>","comments":"","x":2687.761650085449,"y":1195.8570919036865,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"568db2c9.1eb4ec","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1306.1904678344727,"y":1197.4284925460815,"z":"69f32ccf.cd5fd4","wires":[["1dfa44b7.83732b","becf31d5.b02ee"]]},{"id":"becf31d5.b02ee","type":"save","name":"save vnfc:relationship-list","xml":"<save plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" \n\tresource=\"vnfc:relationship-list\" \n\t\tkey=\"vnfc.vnfc-name = $tmp.vnfc[$i].vnfc-name\" >\n\n\t<parameter name=\"relationship-list.relationship[0].related-to\" value=\"generic-vnf\" />\n\t<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"generic-vnf.vnf-id\" />\n\t<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$vnf-topology-operation-input.vnf-request-information.generic-vnf-id`\" />\n\t<parameter name=\"relationship-list.relationship[1].related-to\" value=\"vf-module\" />\n\t<parameter name=\"relationship-list.relationship[1].relationship-data[0].relationship-key\" value=\"generic-vnf.vnf-id\" />\n\t<parameter name=\"relationship-list.relationship[1].relationship-data[0].relationship-value\" value=\"`$vnf-topology-operation-input.vnf-request-information.generic-vnf-id`\" />\n\t<parameter name=\"relationship-list.relationship[1].relationship-data[1].relationship-key\" value=\"vf-module.vf-module-id\" />\n\t<parameter name=\"relationship-list.relationship[1].relationship-data[1].relationship-value\" value=\"`$vnf-topology-operation-input.vnf-request-information.vnf-id`\" />","comments":"","outputs":1,"x":1526.9048538208008,"y":1357.8570861816406,"z":"69f32ccf.cd5fd4","wires":[["9d0dfba7.931438","4d2ed2f6.04f82c"]]},{"id":"9d0dfba7.931438","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1736.1904830932617,"y":1357.857159614563,"z":"69f32ccf.cd5fd4","wires":[["24c05658.1de61a"]]},{"id":"486c6ae5.14d274","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Encountered error while saving generic-vnf and vf-module relationship for vnfc with vnfc-name' + tmp.vnfc[$i].vnfc-name + ' in AnAI'`\"/>","comments":"","x":2109.6906204223633,"y":1353.5714225769043,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"24c05658.1de61a","type":"block","name":"block: atomic","xml":"<block atomic=\"true\">\n","atomic":"false","comments":"","outputs":1,"x":1908.8333740234375,"y":1357.8571157455444,"z":"69f32ccf.cd5fd4","wires":[["486c6ae5.14d274","66ae746b.d0177c","5cfffa58.0d15f4"]]},{"id":"4d2ed2f6.04f82c","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1742.761978149414,"y":1400.4285612106323,"z":"69f32ccf.cd5fd4","wires":[["24c05658.1de61a"]]},{"id":"86aa2905.3e7f58","type":"switchNode","name":"switch vnfc-index","xml":"<switch test=\"`$vnfc-index`\">","comments":"","outputs":1,"x":1112.8571319580078,"y":1135.7142848968506,"z":"69f32ccf.cd5fd4","wires":[["8e6c3cf5.860c2"]]},{"id":"8e6c3cf5.860c2","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1294.2857208251953,"y":1135.7142848968506,"z":"69f32ccf.cd5fd4","wires":[["edd2282a.3ece48"]]},{"id":"edd2282a.3ece48","type":"set","name":"set vnfc-index = 0","xml":"<set>\n\t<parameter name='vnfc-index' value='0' />\n","comments":"","x":1475.7143096923828,"y":1135.7142848968506,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"c5d3ee95.f379a","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Failed to create vnf-assignment for vf-module: ' + $error-message`\"/>","comments":"","x":1855.0000686645508,"y":690.5714511871338,"z":"69f32ccf.cd5fd4","wires":[]},{"id":"7c00c0f7.ee28c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1468.5714111328125,"y":638.5714111328125,"z":"69f32ccf.cd5fd4","wires":[["4e1b9464.7fca0c"]]},{"id":"4e1b9464.7fca0c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1687.714241027832,"y":638.5714616775513,"z":"69f32ccf.cd5fd4","wires":[["91762bb4.9cfce8","c5d3ee95.f379a"]]},{"id":"91762bb4.9cfce8","type":"call","name":"call: rollback-eipam-ip-assignment","xml":"<call module='VNF-API' rpc='rollback-eipam-ip-assignment' mode='sync' >","comments":"","outputs":1,"x":2402.857177734375,"y":638.8571667671204,"z":"69f32ccf.cd5fd4","wires":[[]]}]