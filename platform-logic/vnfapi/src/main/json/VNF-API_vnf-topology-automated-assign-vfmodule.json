[{"id":"ac9aa135.1566d","type":"dgstart","name":"DGSTART","outputs":1,"x":267.1428337097168,"y":52.85696887969971,"z":"7b493cae.ee7e54","wires":[["bb0e1719.9134b8"]]},{"id":"bb0e1719.9134b8","type":"service-logic","name":"VNF-API ${project.version}","module":"VNF-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='VNF-API' version='${project.version}'>","outputs":1,"x":472.9285469055176,"y":52.5950813293457,"z":"7b493cae.ee7e54","wires":[["ad06f4c5.22be88"]]},{"id":"ad06f4c5.22be88","type":"method","name":"method vnf-topology-automated-assign-vfmodule","xml":"<method rpc='vnf-topology-automated-assign-vfmodule' mode='sync'>\n","comments":"","outputs":1,"x":389.4285774230957,"y":111.6069688796997,"z":"7b493cae.ee7e54","wires":[["bf0e6e2a.45dd6"]]},{"id":"c8436c4f.042d6","type":"get-resource","name":"get-resource VF_MODULE_MODEL","xml":"<get-resource plugin='org.openecomp.sdnc.sli.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODULE_MODEL WHERE customization_uuid = $vnf-topology-operation-input.vnf-request-information.model-customization-uuid'\n  pfx='db.vf-module-model'>\n\n","comments":"","outputs":1,"x":663.1427726745605,"y":176.49992847442627,"z":"7b493cae.ee7e54","wires":[["13e34500.ff4a1b","8d2dabee.bdb638"]]},{"id":"5fb22bf1.14a554","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"`'No model found for VF module customization UUID ' + $vnf-topology-operation-input.vnf-request-information.model-customization-uuid`\" />\n","comments":"","x":1104.5711936950684,"y":200.92840099334717,"z":"7b493cae.ee7e54","wires":[]},{"id":"13e34500.ff4a1b","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":928.9284629821777,"y":156.88075923919678,"z":"7b493cae.ee7e54","wires":[["77035fff.a7b78"]]},{"id":"8d2dabee.bdb638","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":937.4998931884766,"y":201.16647243499756,"z":"7b493cae.ee7e54","wires":[["5fb22bf1.14a554"]]},{"id":"77035fff.a7b78","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table\" />\n","comments":"","x":1103.928394317627,"y":156.02365970611572,"z":"7b493cae.ee7e54","wires":[]},{"id":"bf0e6e2a.45dd6","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":321.249942779541,"y":175.8210973739624,"z":"7b493cae.ee7e54","wires":[["c8436c4f.042d6","fcc185cd.c96d48","16e71726.63ad69","5bfe2ea1.9a62e","e429cba4.b9ee28","5108f73b.377a88","996d5eac.9d1f7","942f22fd.4f7f7","52354e95.d6a6d","dac9bf92.a2bec","c1039f57.f7bf","16e69727.52bec9"]]},{"id":"fcc185cd.c96d48","type":"get-resource","name":"get-resource VF_MODULE_TO_VFC_MAPPING","xml":"<get-resource plugin='org.openecomp.sdnc.sli.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODULE_TO_VFC_MAPPING WHERE vf_module_customization_uuid = $vnf-topology-operation-input.vnf-request-information.model-customization-uuid'\n  pfx='db.vf-module-to-vfc-mapping[]'>\n\n","comments":"","outputs":1,"x":694.000072479248,"y":590.833179473877,"z":"7b493cae.ee7e54","wires":[["d0678544.a76578","d0e397c4.111448"]]},{"id":"d0678544.a76578","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":978.3572044372559,"y":572.9282779693604,"z":"7b493cae.ee7e54","wires":[["8079e4f6.692b78"]]},{"id":"d0e397c4.111448","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":986.9286346435547,"y":617.2139911651611,"z":"7b493cae.ee7e54","wires":[["312f5c6e.533e44"]]},{"id":"8079e4f6.692b78","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_TO_VFC_MAPPING table\" />\n","comments":"","x":1153.357135772705,"y":572.0711784362793,"z":"7b493cae.ee7e54","wires":[]},{"id":"16e71726.63ad69","type":"for","name":"for each vm-type","xml":"<for index='vm-type-index' start='0' end='`$db.vf-module-to-vfc-mapping_length`' >\n","comments":"","outputs":1,"x":587.1310348510742,"y":726.012038230896,"z":"7b493cae.ee7e54","wires":[["25dc8557.92934a"]]},{"id":"25dc8557.92934a","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":790.2144088745117,"y":792.190502166748,"z":"7b493cae.ee7e54","wires":[["66774ea1.e829f","4428191c.fe23e8","a096785e.97d5f8","a2d7857d.6acc88"]]},{"id":"5bfe2ea1.9a62e","type":"set","name":"set vnf-vms_length","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms_length'\n  value='`$db.vf-module-to-vfc-mapping_length`' />\n","comments":"","x":600.5475959777832,"y":656.7381496429443,"z":"7b493cae.ee7e54","wires":[]},{"id":"66774ea1.e829f","type":"set","name":"set vm-networks_length","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-networks_length' \n  value='`$db.vfc-to-network-role-mapping_length`' />\n","comments":"","x":1027.0000305175781,"y":1639.3842849731445,"z":"7b493cae.ee7e54","wires":[]},{"id":"996d5eac.9d1f7","type":"execute","name":"printContext","xml":"<execute plugin='org.openecomp.sdnc.sli.SliPluginUtils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vnfapi-vfmodule.log' />\n","comments":"","outputs":1,"x":514.6071815490723,"y":4045.8598742485046,"z":"7b493cae.ee7e54","wires":[[]]},{"id":"312f5c6e.533e44","type":"set","name":"set vf-module-to-vfc-mapping length to 0","xml":"<set>\n<parameter name='db.vf-module-to-vfc-mapping_length' value='0' />\n","comments":"","x":1240.1429252624512,"y":616.8326539993286,"z":"7b493cae.ee7e54","wires":[]},{"id":"e429cba4.b9ee28","type":"set","name":"set: service-data.vnf-id","xml":"<set>\n\t<parameter name=\"service-data.vnf-id\" value=\"`$vnf-topology-operation-input.vnf-request-information.vnf-id`\"/>\n\t<parameter name=\"service-data.service-information.service-instance-id\" value=\"`$vnf-topology-operation-input.service-information.service-instance-id`\"/>\n\t<parameter name=\"service-data.service-information.service-type\" value=\"`$vnf-topology-operation-input.service-information.service-type`\"/>\n","comments":"","x":620.8572425842285,"y":223.29302215576172,"z":"7b493cae.ee7e54","wires":[]},{"id":"a46a07af.73a678","type":"comment","name":"NO SUPPORT for network-macs","info":"","comments":"","x":495.19046783447266,"y":1470.3567743301392,"z":"7b493cae.ee7e54","wires":[]},{"id":"614aeb42.d53684","type":"comment","name":"NO SUPPORT for interface-route-prefixes[]","info":"","comments":"","x":518.619026184082,"y":1521.0235033035278,"z":"7b493cae.ee7e54","wires":[]},{"id":"95bd7f04.1a696","type":"get-resource","name":"get-resource VFC_MODEL","xml":"<get-resource plugin='org.openecomp.sdnc.sli.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VFC_MODEL WHERE customization_uuid = $db.vf-module-to-vfc-mapping[$vm-type-index].vfc-customization-uuid'\n  pfx='db.vfc-model'>\n\n","comments":"","outputs":1,"x":1625.8453063964844,"y":892.8923473358154,"z":"7b493cae.ee7e54","wires":[["cf0c6e0f.dac04","b7652e5.e44acd"]]},{"id":"6fd2b037.109e4","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No entries found in VFC_MODEL table for customization UUID ' + $db.vf-module-to-vfc-mapping[$db-vm-index].vfc-customization-uuid`\" />\n","comments":"","x":2022.2736549377441,"y":917.3207397460938,"z":"7b493cae.ee7e54","wires":[]},{"id":"cf0c6e0f.dac04","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1848.6309242248535,"y":872.2730979919434,"z":"7b493cae.ee7e54","wires":[["e2b75ac4.72d518"]]},{"id":"b7652e5.e44acd","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1856.2023544311523,"y":917.5588111877441,"z":"7b493cae.ee7e54","wires":[["6fd2b037.109e4"]]},{"id":"e2b75ac4.72d518","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VFC_MODEL table\" />\n","comments":"","x":2022.6308555603027,"y":872.4159984588623,"z":"7b493cae.ee7e54","wires":[]},{"id":"4f431a46.d4df04","type":"outcomeFalse","name":"Y","xml":"<outcome value='Y'>\n","comments":"","outputs":1,"x":2741.3094367980957,"y":686.8680472373962,"z":"7b493cae.ee7e54","wires":[[]]},{"id":"5108f73b.377a88","type":"set","name":"copy input data","xml":"<set>\n\t<parameter name=\"service-data.\" value=\"vnf-topology-operation-input.\" />","comments":"","x":598.142765045166,"y":271.678409576416,"z":"7b493cae.ee7e54","wires":[]},{"id":"4428191c.fe23e8","type":"get-resource","name":"get-resource VFC_TO_NETWORK_ROLE_MAPPING","xml":"<get-resource plugin='org.openecomp.sdnc.sli.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VFC_TO_NETWORK_ROLE_MAPPING WHERE vfc_customization_uuid = $db.vf-module-to-vfc-mapping[$vm-type-index].vfc-customization-uuid'\n  pfx='db.vfc-to-network-role-mapping[]'>\n\n","comments":"","outputs":1,"x":1120.4762573242188,"y":1576.4164867401123,"z":"7b493cae.ee7e54","wires":[["123da1b.143a85e","28953b57.98f104"]]},{"id":"123da1b.143a85e","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1407.6904602050781,"y":1556.7973337173462,"z":"7b493cae.ee7e54","wires":[["911796e8.83ed08"]]},{"id":"28953b57.98f104","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1416.261890411377,"y":1601.083046913147,"z":"7b493cae.ee7e54","wires":[["656f1a00.760d48"]]},{"id":"911796e8.83ed08","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VFC_TO_NETWORK_ROLE_MAPPING table\" />\n","comments":"","x":1582.6903915405273,"y":1555.9402341842651,"z":"7b493cae.ee7e54","wires":[]},{"id":"656f1a00.760d48","type":"set","name":"set vfc-to-network-role-mapping length to 0","xml":"<set>\n<parameter name='db.vfc-to-network-role-mapping_length' value='0' />\n","comments":"","x":1679.6667098999023,"y":1601.0914373397827,"z":"7b493cae.ee7e54","wires":[]},{"id":"408d5e9a.3ff7","type":"comment","name":"db.vf-module-to-vfc-mapping[].vm-type","info":"","comments":"","x":520.6904907226562,"y":865.678674697876,"z":"7b493cae.ee7e54","wires":[]},{"id":"411c140f.45c9fc","type":"set","name":"set auto-ip-assignments inputs","xml":"<set>  \n<parameter name='auto-ip-assignment-input.vf-module.model-customization-uuid' \n\tvalue='`$vnf-topology-operation-input.vnf-request-information.model-customization-uuid`' />\n<parameter name='auto-ip-assignment-input.vf-module-id' \n\tvalue='`$vnf-topology-operation-input.vnf-request-information.vnf-id`' />\n<parameter name='auto-ip-assignment-input.vf-module-name' \n\tvalue='`$vnf-topology-operation-input.vnf-request-information.vnf-name`' />\n<parameter name='auto-ip-assignment-input.aic-cloud-region'\n\tvalue='`$vnf-topology-operation-input.vnf-request-information.aic-cloud-region`' />\n<parameter name='auto-ip-assignment-input.service-instance-id' \n\tvalue='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n\n<!--\nvnf-id is same as vf-module-id\n-->","comments":"","x":861.9643859863281,"y":1803.9165058135986,"z":"7b493cae.ee7e54","wires":[]},{"id":"5736c73a.a4d438","type":"call","name":"call: auto-ip-assignment","xml":"<call module='VNF-API' rpc='auto-ip-assignment' mode='sync' >","comments":"","outputs":1,"x":841.9643936157227,"y":1858.1665296554565,"z":"7b493cae.ee7e54","wires":[["5f81b63f.defa38"]]},{"id":"942f22fd.4f7f7","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":536.250114440918,"y":1804.6308555603027,"z":"7b493cae.ee7e54","wires":[["411c140f.45c9fc","5736c73a.a4d438","14059e55.b70902","c3e0dacc.f51658"]]},{"id":"5f81b63f.defa38","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1043.2143096923828,"y":1857.9522724151611,"z":"7b493cae.ee7e54","wires":[["19ad3e5b.0052c2"]]},{"id":"19ad3e5b.0052c2","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Failed to create assignment for vf-module: '+ $error-message`\" />\n","comments":"","x":1218.214241027832,"y":1857.09517288208,"z":"7b493cae.ee7e54","wires":[]},{"id":"14059e55.b70902","type":"for","name":"for eipam-ip-block.plans[]","xml":"<for index='plan-index' start='0' end='`$eipam-ip-block.plans_length`' >\n","comments":"","outputs":1,"x":847.0594940185547,"y":1960.9173021316528,"z":"7b493cae.ee7e54","wires":[["f73b00d.52f88"]]},{"id":"f73b00d.52f88","type":"set","name":"set vnf-network","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-networks[$plan-index].network-role'\n   value='`$eipam-ip-block.plans[$plan-index].l3-network.network-role`' />\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-networks[$plan-index].network-name'\n   value='`$eipam-ip-block.plans[$plan-index].l3-network.network-name`' />\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-networks[$plan-index].network-id'\n   value='`$eipam-ip-block.plans[$plan-index].l3-network.network-id`' />\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-networks[$plan-index].neutron-id'\n   value='`$eipam-ip-block.plans[$plan-index].l3-network.neutron-network-id`' />\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-networks[$plan-index].contrail-network-fqdn'\n   value='`$eipam-ip-block.plans[$plan-index].l3-network.contrail-network-fqdn`' />   ","comments":"","x":1069.345230102539,"y":1960.8458547592163,"z":"7b493cae.ee7e54","wires":[]},{"id":"541b1a33.927514","type":"set","name":"copy vnf-assignments.vnf-vms[]","xml":"<set>\n<parameter name='service-data.vnf-topology-information.vnf-assignments.vnf-vms[$k].' \n\tvalue='tmp.vnf-topology.vnf-assignments.vnf-vms[$k].' />\n<parameter name='service-data.vnf-topology-information.vnf-assignments.vnf-vms_length' \n\tvalue='`$tmp.vnf-topology.vnf-assignments.vnf-vms_length`' />","comments":"","x":1771.6786499023438,"y":4015.285942554474,"z":"7b493cae.ee7e54","wires":[]},{"id":"2fcbc062.954ed","type":"switchNode","name":"switch vnf-vms_length","xml":"<switch test='`$tmp.vnf-topology.vnf-assignments.vnf-vms_length`'>\n","comments":"","outputs":1,"x":733.1426620483398,"y":3911.4376425743103,"z":"7b493cae.ee7e54","wires":[["84eae768.760018","79c5efa7.4933a","be655469.b57958"]]},{"id":"84eae768.760018","type":"outcome","name":"0","xml":"<outcome value='0'>","comments":"","outputs":1,"x":965.142692565918,"y":3911.437488079071,"z":"7b493cae.ee7e54","wires":[["da20ee40.486ee"]]},{"id":"79c5efa7.4933a","type":"other","name":"Other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":966.8093414306641,"y":3963.1043181419373,"z":"7b493cae.ee7e54","wires":[["21c5335c.70d28c"]]},{"id":"da20ee40.486ee","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1125.1428260803223,"y":3911.437728404999,"z":"7b493cae.ee7e54","wires":[[]]},{"id":"ebd34f51.983f8","type":"set","name":"copy vnf-assignments.availability-zones[]","xml":"<set>\n<parameter name='service-data.vnf-topology-information.vnf-assignments.availability-zones[$j].' \n\tvalue='tmp.vnf-topology.vnf-assignments.availability-zones[$j].' />","comments":"","x":1754.0948486328125,"y":3702.9612941741943,"z":"7b493cae.ee7e54","wires":[]},{"id":"92eb36f4.c3c4c8","type":"switchNode","name":"switch vnf-assignments.availability-zones_length","xml":"<switch test='`$tmp.vnf-topology.vnf-assignments.availability-zones_length`'>\n","comments":"","outputs":1,"x":821.5591049194336,"y":3650.3993124961853,"z":"7b493cae.ee7e54","wires":[["702311a4.7e472","837c746b.3793e8","dbc7592c.5a2768"]]},{"id":"702311a4.7e472","type":"outcome","name":"0","xml":"<outcome value='0'>","comments":"","outputs":1,"x":1108.5591354370117,"y":3650.399158000946,"z":"7b493cae.ee7e54","wires":[["71450cc5.5c3144"]]},{"id":"837c746b.3793e8","type":"other","name":"Other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1107.2257843017578,"y":3702.0659880638123,"z":"7b493cae.ee7e54","wires":[["e8763150.28ea1"]]},{"id":"71450cc5.5c3144","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1268.559268951416,"y":3650.399398326874,"z":"7b493cae.ee7e54","wires":[[]]},{"id":"87a79be.2d05868","type":"set","name":"copy vnf-assignments.vnf-networks[]","xml":"<set>\n<parameter name='service-data.vnf-topology-information.vnf-assignments.vnf-networks[$i].' \n\tvalue='tmp.vnf-topology.vnf-assignments.vnf-networks[$i].' />","comments":"","x":1605.618911743164,"y":3461.7707629203796,"z":"7b493cae.ee7e54","wires":[]},{"id":"32da50bd.d2f0c","type":"switchNode","name":"switch vnf-newtorks_length","xml":"<switch test='`$tmp.vnf-topology.vnf-assignments.vnf-networks_length`'>\n","comments":"","outputs":1,"x":759.7973861694336,"y":3410.6371054649353,"z":"7b493cae.ee7e54","wires":[["d627076a.0c8d68","c78c00dc.2ddf2","251d1899.00ad38"]]},{"id":"d627076a.0c8d68","type":"outcome","name":"0","xml":"<outcome value='0'>","comments":"","outputs":1,"x":995.7974166870117,"y":3410.636950969696,"z":"7b493cae.ee7e54","wires":[["a1e82baa.f3c6b8"]]},{"id":"c78c00dc.2ddf2","type":"other","name":"Other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":996.4640655517578,"y":3462.3037810325623,"z":"7b493cae.ee7e54","wires":[["e503411a.28d3f"]]},{"id":"a1e82baa.f3c6b8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1155.797550201416,"y":3410.637191295624,"z":"7b493cae.ee7e54","wires":[[]]},{"id":"52354e95.d6a6d","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":499.76184463500977,"y":3410.341860294342,"z":"7b493cae.ee7e54","wires":[["32da50bd.d2f0c","92eb36f4.c3c4c8","2fcbc062.954ed"]]},{"id":"89762c08.e802c","type":"for","name":"for i in vnf-networks","xml":"<for index='i' start='0' end='`$tmp.vnf-topology.vnf-assignments.vnf-networks_length`' >\n","comments":"","outputs":1,"x":1320.761703491211,"y":3462.342086791992,"z":"7b493cae.ee7e54","wires":[["87a79be.2d05868"]]},{"id":"5e45cf83.e43b3","type":"for","name":"for j in availability-zones","xml":"<for index='j' start='0' end='`$tmp.vnf-topology.vnf-assignments.availability-zones_length`' >\n","comments":"","outputs":1,"x":1439.618911743164,"y":3702.7706546783447,"z":"7b493cae.ee7e54","wires":[["ebd34f51.983f8"]]},{"id":"21c5335c.70d28c","type":"for","name":"for k in vnf-vms[]","xml":"<for index='k' start='0' end='`$tmp.vnf-topology.vnf-assignments.vnf-vms_length`' >\n","comments":"","outputs":1,"x":1157.7619705200195,"y":3963.3418593406677,"z":"7b493cae.ee7e54","wires":[["e3488410.388a28"]]},{"id":"dffcd029.c7fe2","type":"comment","name":"Change History","info":"1.1.21.test\n- added naming-type as input to naming-policy DG calls\n- removed tmp.vm-count from Base, Expansion flow and set db.vf_module_to_vfc_mapping[].vm-count to 0\n- Added set node to set tmp.do-ip-assignemnt flag, so skip ip assignment if Base module\n9/18/17\n- added NULL outcome for node 23, chking vm-type","comments":"","x":1025.714282444545,"y":69.738112449646,"z":"7b493cae.ee7e54","wires":[]},{"id":"251d1899.00ad38","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":994.3690338134766,"y":3362.1663093566895,"z":"7b493cae.ee7e54","wires":[["a1e82baa.f3c6b8"]]},{"id":"dbc7592c.5a2768","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1107.6189193725586,"y":3597.832998752594,"z":"7b493cae.ee7e54","wires":[["71450cc5.5c3144"]]},{"id":"be655469.b57958","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":966.1189651489258,"y":3862.5830025672913,"z":"7b493cae.ee7e54","wires":[["da20ee40.486ee"]]},{"id":"704fad1c.5fa424","type":"switchNode","name":"switch ecomp-generated-naming","xml":"<switch test=\"`$db.vfc-model.ecomp-generated-naming`\">\n","comments":"","outputs":1,"x":2503.9285049438477,"y":638.2969155311584,"z":"7b493cae.ee7e54","wires":[["4f431a46.d4df04","38787cde.af3cf4"]]},{"id":"dd5d2e7e.2a11c","type":"switchNode","name":"switch db.vf-module-to-vfc-mapping[].vm-type","xml":"<switch test=\"`$db.vf-module-to-vfc-mapping[$vm-type-index].vm-type`\">\n","comments":"","outputs":1,"x":2453.428535461426,"y":781.1427998542786,"z":"7b493cae.ee7e54","wires":[["53ed8922.b67b38","9c79510b.53838"]]},{"id":"53ed8922.b67b38","type":"outcome","name":"Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":2723.428535461426,"y":781.7142109870911,"z":"7b493cae.ee7e54","wires":[["9c1a929f.94df1"]]},{"id":"38787cde.af3cf4","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":2740.14298248291,"y":637.7141537666321,"z":"7b493cae.ee7e54","wires":[[]]},{"id":"9c1a929f.94df1","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'ecomp-generated-naming for vm-type = ' + $db.vf-module-to-vfc-mapping[$vm-type-index].vm-type`\" />\n","comments":"","x":2887.571258544922,"y":781.4284167289734,"z":"7b493cae.ee7e54","wires":[]},{"id":"ec8d794.4227188","type":"for","name":"for each vm-count","xml":"<for index='vm-index' start='0' end='`$db.vf-module-to-vfc-mapping[$vm-type-index].vm-count`' >\n","comments":"","outputs":1,"x":1826.9525299072266,"y":1100.9045639038086,"z":"7b493cae.ee7e54","wires":[["6c20491e.4768c8"]]},{"id":"919e12a7.6ceb4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2570.524028778076,"y":1149.9524534344673,"z":"7b493cae.ee7e54","wires":[["91c658ce.e74608"]]},{"id":"794c0e14.a2561","type":"set","name":"set generated vm-name","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-names[$vm-index].vm-name' \n\tvalue='`$naming-policy-generate-name-output.vm-name`' />","comments":"","x":2302.8809509277344,"y":1197.7737426757812,"z":"7b493cae.ee7e54","wires":[]},{"id":"91c658ce.e74608","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Failed get generate vm-name\" />\n","comments":"","x":2738.3811416625977,"y":1149.3809650540352,"z":"7b493cae.ee7e54","wires":[]},{"id":"b43eb8d4.0f1858","type":"set","name":"set vm-names_length","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-names_length'\n  value='`$db.vf-module-to-vfc-mapping[$vm-type-index].vm-count`' />\n","comments":"","x":1837.869327545166,"y":1176.4050378799438,"z":"7b493cae.ee7e54","wires":[]},{"id":"f00db9a7.d64e58","type":"set","name":"set variables for generating unique vm-name","xml":"<set>\n<parameter name='naming-policy-generate-name-input.vfc-customization-uuid' \n\tvalue='`$db.vfc-model.customization-uuid`' />\n<parameter name='naming-policy-generate-name-input.policy-instance-name' \n\tvalue='`$db.vfc-model.naming-policy`' />\n<parameter name='naming-policy-generate-name-input.naming-type' value='VM' />","comments":"","x":2363.524185180664,"y":1099.7236213684082,"z":"7b493cae.ee7e54","wires":[]},{"id":"aaf226b2.7f2d38","type":"call","name":"call: naming-policy-generate-name","xml":"<call module='VNF-API' rpc='naming-policy-generate-name' mode='sync' >","comments":"","outputs":1,"x":2333.8455505371094,"y":1149.723533630371,"z":"7b493cae.ee7e54","wires":[["919e12a7.6ceb4"]]},{"id":"e69f9810.871788","type":"set","name":"set generated vnfc-name","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-names[$vm-index].vnfc-names[0].vnfc-name' value='`$naming-policy-generate-name-output.vnfc-name`' />\n","comments":"","x":2563.0956802368164,"y":1362.4019184112549,"z":"7b493cae.ee7e54","wires":[]},{"id":"7d044588.00dc6c","type":"comment","name":"Set up tmp vnfc object","info":"","comments":"","x":2241.726516723633,"y":1403.5925765037537,"z":"7b493cae.ee7e54","wires":[]},{"id":"333998f3.609238","type":"set","name":"set tmp vnfc object","xml":"<set>\n<parameter name='tmp.vnfc[$vnfc-index].vnfc-name' \n\tvalue = '`$naming-policy-generate-name-output.vnfc-name`' />\n<parameter name='tmp.vnfc[$vnfc-index].nfc-function' \n\tvalue = '`$db.vfc-model.nfc-function`' />\n<parameter name='tmp.vnfc[$vnfc-index].nfc-naming-code' \n\tvalue = '`$db.vfc-model.nfc-naming-code`' />\n<parameter name='tmp.vnfc[$vnfc-index].orchestration-status' value = 'pending-create' />\n","comments":"","x":2545.917205810547,"y":1416.6878080368042,"z":"7b493cae.ee7e54","wires":[]},{"id":"2e35ad08.63a562","type":"set","name":"set vnfc-index++","xml":"<set>\n<parameter name='vnfc-index' value='`$vnfc-index + 1`' />\n","comments":"","x":2540.6316299438477,"y":1460.830491065979,"z":"7b493cae.ee7e54","wires":[]},{"id":"a6cd3d6b.8420f","type":"set","name":"set variables for generating unique vnfc-name","xml":"<set>\n<parameter name='naming-policy-generate-name-input.vfc-customization-uuid' \n\tvalue='`$db.vfc-model.customization-uuid`' />\n<parameter name='naming-policy-generate-name-input.policy-instance-name' \n\tvalue='`$db.vfc-model.naming-policy`' />\n<parameter name='naming-policy-generate-name-input.vm-name' \n\tvalue='`$tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-names[$vm-index].vm-name`' />\n<parameter name='naming-policy-generate-name-input.naming-type' value='VNFC' />","comments":"","x":2627.4885025024414,"y":1260.4614887237549,"z":"7b493cae.ee7e54","wires":[]},{"id":"ac9d9c63.a2852","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2827.488540649414,"y":1311.8899383544922,"z":"7b493cae.ee7e54","wires":[["901b2ca8.13e01"]]},{"id":"901b2ca8.13e01","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Failed to generate vnfc-name\" />\n","comments":"","x":2995.3456535339355,"y":1312.31844997406,"z":"7b493cae.ee7e54","wires":[]},{"id":"3535c0ad.de876","type":"call","name":"call: naming-policy-generate-name","xml":"<call module='VNF-API' rpc='naming-policy-generate-name' mode='sync' >","comments":"","outputs":1,"x":2593.20272064209,"y":1311.8899383544922,"z":"7b493cae.ee7e54","wires":[["ac9d9c63.a2852"]]},{"id":"6c20491e.4768c8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2038.8098907470703,"y":1100.5328254699707,"z":"7b493cae.ee7e54","wires":[["f00db9a7.d64e58","aaf226b2.7f2d38","794c0e14.a2561","cc6ec69a.94dda8"]]},{"id":"cc6ec69a.94dda8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":2267.560028076172,"y":1260.3185443878174,"z":"7b493cae.ee7e54","wires":[["333998f3.609238","2e35ad08.63a562","a6cd3d6b.8420f","3535c0ad.de876","e69f9810.871788","c3d617a1.6bd258"]]},{"id":"a79cf06c.9945a","type":"set","name":"set vnfc-index = 0","xml":"<set>\n\t<parameter name='vnfc-index' value='0' />\n","comments":"","x":1826.5479278564453,"y":984.3542261123657,"z":"7b493cae.ee7e54","wires":[]},{"id":"79aadf38.6c531","type":"switchNode","name":"switch VF_MODULE_TO_VFC_MAPPING[].vm-count","xml":"\n<switch test='`$db.vf-module-to-vfc-mapping[$vm-type-index].vm-count`' >\n","comments":"","outputs":1,"x":1937.762191772461,"y":1035.1040868759155,"z":"7b493cae.ee7e54","wires":[["7289f741.d7b218"]]},{"id":"7289f741.d7b218","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":2230.619369506836,"y":1034.6755018234253,"z":"7b493cae.ee7e54","wires":[["2868925d.088dbe"]]},{"id":"2868925d.088dbe","type":"set","name":"set db.vf-module-to-vfc-mapping[].vm-count=0","xml":"<set>\n<parameter name='db.vf-module-to-vfc-mapping[$vm-type-index].vm-count' value='0' />\n\n","comments":"","x":2512.0479583740234,"y":1034.1040906906128,"z":"7b493cae.ee7e54","wires":[]},{"id":"157155b9.209fda","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1587.7384033203125,"y":1064.67578125,"z":"7b493cae.ee7e54","wires":[["ec8d794.4227188","b43eb8d4.0f1858","a79cf06c.9945a","79aadf38.6c531"]]},{"id":"9c79510b.53838","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":2722.8570251464844,"y":734.2855334281921,"z":"7b493cae.ee7e54","wires":[["6624614f.afebb"]]},{"id":"6624614f.afebb","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2865.8570289611816,"y":733.9998049736023,"z":"7b493cae.ee7e54","wires":[[]]},{"id":"35ce3aea.2296a6","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1545.9046936035156,"y":3963.9759097099304,"z":"7b493cae.ee7e54","wires":[["20bd7fc2.c4326"]]},{"id":"3477340e.32eb1c","type":"other","name":"Other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1548.7617492675781,"y":4015.404498577118,"z":"7b493cae.ee7e54","wires":[["541b1a33.927514"]]},{"id":"20bd7fc2.c4326","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1691.6189270019531,"y":3963.9759097099304,"z":"7b493cae.ee7e54","wires":[[]]},{"id":"e3488410.388a28","type":"switchNode","name":"switch vm-type","xml":"<switch test='`$tmp.vnf-topology.vnf-assignments.vnf-vms[$k].vm-type`'>\n","comments":"","outputs":1,"x":1363.9046821594238,"y":3963.4047589302063,"z":"7b493cae.ee7e54","wires":[["35ce3aea.2296a6","3477340e.32eb1c"]]},{"id":"dac9bf92.a2bec","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":535.2380676269531,"y":2110.214111328125,"z":"7b493cae.ee7e54","wires":[["9e0e1ae2.c0e5d8","f0121d86.91ad","b69e193e.7dba88"]]},{"id":"b866a373.785c1","type":"set","name":"set vnf-vms[].vm-type","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-type'\n  value='`$db.vf-module-to-vfc-mapping[$vm-type-index].vm-type`' />\n","comments":"","x":1382.4285507202148,"y":1323.714105606079,"z":"7b493cae.ee7e54","wires":[]},{"id":"a096785e.97d5f8","type":"switchNode","name":"switch vm-count","xml":"<switch test=\"`$db.vf-module-to-vfc-mapping[$vm-type-index].vm-count`\">\n","comments":"","outputs":1,"x":1011.4284973144531,"y":851.428617477417,"z":"7b493cae.ee7e54","wires":[["541b1f15.6b246","82f49b1e.daa358","f1f746b1.548728"]]},{"id":"541b1f15.6b246","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1197.2856712341309,"y":809.1429815292358,"z":"7b493cae.ee7e54","wires":[["563567a5.2aa5f8"]]},{"id":"82f49b1e.daa358","type":"outcomeFalse","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":1197.2856712341309,"y":850.1429805755615,"z":"7b493cae.ee7e54","wires":[["563567a5.2aa5f8"]]},{"id":"563567a5.2aa5f8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1348.5713653564453,"y":830.0000982284546,"z":"7b493cae.ee7e54","wires":[[]]},{"id":"f1f746b1.548728","type":"outcome","name":"Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":1197.1429748535156,"y":893.0001058578491,"z":"7b493cae.ee7e54","wires":[["df64f6eb.ff49e8"]]},{"id":"df64f6eb.ff49e8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1372.8572082519531,"y":892.428581237793,"z":"7b493cae.ee7e54","wires":[["95bd7f04.1a696","157155b9.209fda","dbc46965.5eec48"]]},{"id":"c3e0dacc.f51658","type":"set","name":"set vnf-networks_length","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-networks_length' \n\tvalue='`$eipam-ip-block.plans_length`' />","comments":"","x":840.9999084472656,"y":1904.9998331069946,"z":"7b493cae.ee7e54","wires":[]},{"id":"a2d7857d.6acc88","type":"switchNode","name":"switch vm-type","xml":"<switch test=\"`$db.vf-module-to-vfc-mapping[$vm-type-index].vm-type`\">\n","comments":"","outputs":1,"x":1011.4285888671875,"y":1324.71435546875,"z":"7b493cae.ee7e54","wires":[["e41b7da0.01f87"]]},{"id":"e41b7da0.01f87","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1191.4285714285713,"y":1324.2857142857142,"z":"7b493cae.ee7e54","wires":[["b866a373.785c1"]]},{"id":"c3d617a1.6bd258","type":"set","name":"set vnfc-names_length","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-names[$vm-index].vnfc-names_length'\n  value='`$vnfc-index`' />\n","comments":"","x":2555.7142791748047,"y":1507.1429195404053,"z":"7b493cae.ee7e54","wires":[]},{"id":"dbc46965.5eec48","type":"set","name":"set vnf-vms[].vm-count","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-count'\n  value='`$db.vf-module-to-vfc-mapping[$vm-type-index].vm-count`' />\n","comments":"","x":1618.333251953125,"y":1248.333251953125,"z":"7b493cae.ee7e54","wires":[]},{"id":"b69e193e.7dba88","type":"for","name":"for each vm-type","xml":"<for index='vm-type-index' start='0' end='`$tmp.vnf-topology.vnf-assignments.vnf-vms_length`' >\n","comments":"","outputs":1,"x":769,"y":2217.5,"z":"7b493cae.ee7e54","wires":[["301b1afc.6aecd6"]]},{"id":"1db89c88.0444d3","type":"for","name":"for each network-role in vm-networks","xml":"<for index='network-role-index' start='0' end='`$db.vfc-to-network-role-mapping_length`' >\n","comments":"","outputs":1,"x":941.7141571044922,"y":2432.380979537964,"z":"7b493cae.ee7e54","wires":[["304d3cc5.fd1bd4"]]},{"id":"ff666271.d53e6","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1153.6428184509277,"y":2191.3191318511963,"z":"7b493cae.ee7e54","wires":[["47c30f24.96d93"]]},{"id":"ab17c46f.fae908","type":"other","name":"Other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1156.4998741149902,"y":2242.747720718384,"z":"7b493cae.ee7e54","wires":[["584c45d5.7713ac"]]},{"id":"301b1afc.6aecd6","type":"switchNode","name":"switch vm-type","xml":"<switch test='`$tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-type`'>\n","comments":"","outputs":1,"x":979.9761047363281,"y":2217.7480449676514,"z":"7b493cae.ee7e54","wires":[["ff666271.d53e6","ab17c46f.fae908"]]},{"id":"47c30f24.96d93","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1303.500057220459,"y":2190.8907356262207,"z":"7b493cae.ee7e54","wires":[[]]},{"id":"3221cc22.ab5924","type":"for","name":"for pidx in eipam-ip-block.plans[]","xml":"<for index='pidx' start='0' end='`$eipam-ip-block.plans_length`' >\n","comments":"","outputs":1,"x":2243.476104736328,"y":2423.152379989624,"z":"7b493cae.ee7e54","wires":[["48048a3f.93b794"]]},{"id":"48048a3f.93b794","type":"switchNode","name":"switch plans[].address-family","xml":"<switch test='`$eipam-ip-block.plans[$pidx].address-family`'>\n","comments":"","outputs":1,"x":2542.8570251464844,"y":2422.819055557251,"z":"7b493cae.ee7e54","wires":[["be880d51.4a00a","eedda3e7.df221"]]},{"id":"be880d51.4a00a","type":"other","name":"ipv4","xml":"<outcome value='ipv4'>\n","comments":"","outputs":1,"x":2785.2858085632324,"y":2355.6999549865723,"z":"7b493cae.ee7e54","wires":[["37b2b9c9.ecf6c6"]]},{"id":"bfc28a71.3fabb8","type":"set","name":"set network-ips[].ip-address","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-networks[$extcp-index].network-ips[$vm-index].ip-address'\n   value='`$eipam-ip-block.plans[$pidx].requests[$tmp.consumed-ipv4-count].ip-prefix`' />","comments":"","x":4273.9880447387695,"y":2354.6643085479736,"z":"7b493cae.ee7e54","wires":[]},{"id":"a09542c5.79244","type":"set","name":"set floating-ip","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-networks[$network-role-index].floating-ip'\n   value='`$eipam-ip-block.plans[$pidx].requests[$tmp.consumed-ipv4-count].ip-prefix`' />","comments":"","x":3274.440933227539,"y":3028.605305671692,"z":"7b493cae.ee7e54","wires":[]},{"id":"eedda3e7.df221","type":"other","name":"ipv6","xml":"<outcome value='ipv6'>\n","comments":"","outputs":1,"x":2782.5950317382812,"y":2474.6882343292236,"z":"7b493cae.ee7e54","wires":[["1291ea91.15ed25"]]},{"id":"93e6eeb9.18027","type":"set","name":"set network-ips-v6[].ip-address-ipv6","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-networks[$extcp-index].network-ips-v6[$vm-index].ip-address-ipv6'\n   value='`$eipam-ip-block.plans[$pidx].requests[$tmp.consumed-ipv6-count].ip-prefix`' />","comments":"","x":4305.452430725098,"y":2471.782958984375,"z":"7b493cae.ee7e54","wires":[]},{"id":"f270bd6a.1f54e","type":"set","name":"set floating-ip-v6","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-networks[$network-role-index].floating-ip-v6'\n   value='`$eipam-ip-block.plans[$pidx].requests[$tmp.consumed-ipv6-count].ip-prefix`' />","comments":"","x":3277.4879760742188,"y":3152.890875816345,"z":"7b493cae.ee7e54","wires":[]},{"id":"489da410.b1e93c","type":"for","name":"for vm-index in vm-count","xml":"<for index='vm-index' start='0' end='`$tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-count`' >\n","comments":"","outputs":1,"x":3563.237907409668,"y":2355.152032852173,"z":"7b493cae.ee7e54","wires":[["f0e7297e.9e4568"]]},{"id":"37b2b9c9.ecf6c6","type":"switchNode","name":"switch: ipv4-address-plan-name- db | eipam-ip-block","xml":"<switch test='`$db.vfc-to-network-role-mapping[$network-role-index].ipv4-address-plan-name == $eipam-ip-block.plans[$pidx].plan-name`'>\n","comments":"","outputs":1,"x":3068.856918334961,"y":2355.1999893188477,"z":"7b493cae.ee7e54","wires":[["54955198.2abfe"]]},{"id":"1291ea91.15ed25","type":"switchNode","name":"switch: ipv6-address-plan-name- db | eipam-ip-block","xml":"<switch test='`$db.vfc-to-network-role-mapping[$network-role-index].ipv6-address-plan-name == $eipam-ip-block.plans[$pidx].plan-name`'>\n","comments":"","outputs":1,"x":3073.3331985473633,"y":2474.628801345825,"z":"7b493cae.ee7e54","wires":[["a50e5558.964ec8"]]},{"id":"a50e5558.964ec8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":3364.285572052002,"y":2474.390193939209,"z":"7b493cae.ee7e54","wires":[["db9d5778.299458"]]},{"id":"54955198.2abfe","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":3356.8092346191406,"y":2354.8668422698975,"z":"7b493cae.ee7e54","wires":[["489da410.b1e93c"]]},{"id":"f0e7297e.9e4568","type":"for","name":"for ipv4-index in ipv4-ip-count","xml":"<for index='ipv4-index' start='0' end='`$db.vfc-to-network-role-mapping[$network-role-index].ipv4-count`' >\n","comments":"","outputs":1,"x":3829.2382431030273,"y":2355.152272939682,"z":"7b493cae.ee7e54","wires":[["702d4c28.9b4914"]]},{"id":"db9d5778.299458","type":"for","name":"for vm-index in vm-count","xml":"<for index='vm-index' start='0' end='`$tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-count`' >\n","comments":"","outputs":1,"x":3571.952500661214,"y":2473.72346051534,"z":"7b493cae.ee7e54","wires":[["32893090.a5b3a"]]},{"id":"32893090.a5b3a","type":"for","name":"for ipv6-index in vm-networks","xml":"<for index='ipv6-index' start='0' end='`$db.vfc-to-network-role-mapping[$network-role-index].ipv6-count`' >\n","comments":"","outputs":1,"x":3838.571746826172,"y":2473.104528903961,"z":"7b493cae.ee7e54","wires":[["12ae6852.37df58"]]},{"id":"9e0e1ae2.c0e5d8","type":"set","name":"set tmp.consumed-ipv4-count = 0","xml":"<set>\n<parameter name='tmp.consumed-ipv4-count' value='0' />","comments":"","x":818.2617721557617,"y":2109.6998224258423,"z":"7b493cae.ee7e54","wires":[]},{"id":"e0bea904.51b118","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":3095.761890411377,"y":3028.533284187317,"z":"7b493cae.ee7e54","wires":[["a09542c5.79244","28e6000c.92b84","3bb48837.b10f78"]]},{"id":"702d4c28.9b4914","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4041.6185913085938,"y":2354.8184661865234,"z":"7b493cae.ee7e54","wires":[["bfc28a71.3fabb8","5564e9b6.651b68","1eb54ad2.d2a8b5","db950f6d.2eaf","3d848b3b.e43b64"]]},{"id":"5564e9b6.651b68","type":"set","name":" tmp.consumed-ipv4-count++","xml":"<set>\n<parameter name='tmp.consumed-ipv4-count' value='`$tmp.consumed-ipv4-count + 1`' />","comments":"","x":4278.523086547852,"y":2403.5329599380493,"z":"7b493cae.ee7e54","wires":[]},{"id":"12ae6852.37df58","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":4050.999729156494,"y":2473.0093126296997,"z":"7b493cae.ee7e54","wires":[["93e6eeb9.18027","92bcaeb6.4b8b","6b7de9c5.f85e98","db950f6d.2eaf","3d848b3b.e43b64"]]},{"id":"467a1731.484e68","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":3092.0953063964844,"y":3152.866950035095,"z":"7b493cae.ee7e54","wires":[["f270bd6a.1f54e","258499ec.07e086","3bb48837.b10f78"]]},{"id":"f0121d86.91ad","type":"set","name":"set tmp.consumed-ipv6-count = 0","xml":"<set>\n<parameter name='tmp.consumed-ipv6-count' value='0' />","comments":"","x":816.5950775146484,"y":2161.3666133880615,"z":"7b493cae.ee7e54","wires":[]},{"id":"92bcaeb6.4b8b","type":"set","name":" tmp.consumed-ipv6-count++","xml":"<set>\n<parameter name='tmp.consumed-ipv6-count' value='`$tmp.consumed-ipv6-count + 1`' />","comments":"","x":4283.571090698242,"y":2523.4856300354004,"z":"7b493cae.ee7e54","wires":[]},{"id":"993aa5f2.6f82d8","type":"switchNode","name":"switch: ipv4-count > 0","xml":"<switch test='`$db.vfc-to-network-role-mapping[$network-role-index].ipv4-count &gt; 0`'>\n","comments":"","outputs":1,"x":1392.0713577270508,"y":2389.9373421669006,"z":"7b493cae.ee7e54","wires":[["75ef08b4.acdd08"]]},{"id":"1f51f891.894c47","type":"for","name":"for each vm-type","xml":"<for index='vm-type-index' start='0' end='`$tmp.vnf-topology.vnf-assignments.vnf-vms_length`' >\n","comments":"","outputs":1,"x":720.4285850524902,"y":2882.1999292373657,"z":"7b493cae.ee7e54","wires":[["6a7ba783.aee218"]]},{"id":"2c605dbe.ea3e82","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1085.071376800537,"y":2882.685646057129,"z":"7b493cae.ee7e54","wires":[["c5b25e8e.1605"]]},{"id":"d76cad72.b2daa","type":"other","name":"Other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1087.9284324645996,"y":2934.1142349243164,"z":"7b493cae.ee7e54","wires":[["c549300f.af982"]]},{"id":"6a7ba783.aee218","type":"switchNode","name":"switch vm-type","xml":"<switch test='`$tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-type`'>\n","comments":"","outputs":1,"x":908.0713653564453,"y":2882.114495277405,"z":"7b493cae.ee7e54","wires":[["2c605dbe.ea3e82","d76cad72.b2daa"]]},{"id":"c5b25e8e.1605","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1234.9286155700684,"y":2882.2572498321533,"z":"7b493cae.ee7e54","wires":[[]]},{"id":"8ed0f8a7.886b98","type":"other","name":"ipv4","xml":"<outcome value='ipv4'>\n","comments":"","outputs":1,"x":2360.761859893799,"y":3029.8670225143433,"z":"7b493cae.ee7e54","wires":[["39c33e22.fc5ee2"]]},{"id":"22520f12.97579","type":"other","name":"ipv6","xml":"<outcome value='ipv6'>\n","comments":"","outputs":1,"x":2359.5472373962402,"y":3152.0934648513794,"z":"7b493cae.ee7e54","wires":[["afca04a7.180588"]]},{"id":"39c33e22.fc5ee2","type":"switchNode","name":"switch: ipv4-address-plan-name- db | eipam-ip-block","xml":"<switch test='`$db.vfc-to-network-role-mapping[$network-role-index].ipv4-address-plan-name == $eipam-ip-block.plans[$pidx].plan-name`'>\n","comments":"","outputs":1,"x":2651.9043731689453,"y":3029.5575342178345,"z":"7b493cae.ee7e54","wires":[["d6cb9218.198f8"]]},{"id":"afca04a7.180588","type":"switchNode","name":"switch: ipv6-address-plan-name- db | eipam-ip-block","xml":"<switch test='`$db.vfc-to-network-role-mapping[$network-role-index].ipv6-address-plan-name == $eipam-ip-block.plans[$pidx].plan-name`'>\n","comments":"","outputs":1,"x":2648.9520568847656,"y":3152.46240901947,"z":"7b493cae.ee7e54","wires":[["b05b5a52.d126a8"]]},{"id":"b05b5a52.d126a8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2939.571128845215,"y":3152.557297706604,"z":"7b493cae.ee7e54","wires":[["467a1731.484e68"]]},{"id":"d6cb9218.198f8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2943.5710678100586,"y":3029.224347114563,"z":"7b493cae.ee7e54","wires":[["e0bea904.51b118"]]},{"id":"28e6000c.92b84","type":"set","name":" tmp.consumed-ipv4-count++","xml":"<set>\n<parameter name='tmp.consumed-ipv4-count' value='`$tmp.consumed-ipv4-count + 1`' />","comments":"","x":3325.237159729004,"y":3087.5574560165405,"z":"7b493cae.ee7e54","wires":[]},{"id":"258499ec.07e086","type":"set","name":" tmp.consumed-ipv6-count++","xml":"<set>\n<parameter name='tmp.consumed-ipv6-count' value='`$tmp.consumed-ipv6-count + 1`' />","comments":"","x":3316.570732116699,"y":3211.8905515670776,"z":"7b493cae.ee7e54","wires":[]},{"id":"1dc52e4b.245ca2","type":"for","name":"for each network-role in vm-networks","xml":"<for index='network-role-index' start='0' end='`$db.vfc-to-network-role-mapping_length`' >\n","comments":"","outputs":1,"x":947.4284973144531,"y":3095.53377532959,"z":"7b493cae.ee7e54","wires":[["d381c726.b7cc28"]]},{"id":"c0bc2d9a.8606","type":"for","name":"for pidx in eipam-ip-block.plans[]","xml":"<for index='pidx' start='0' end='`$eipam-ip-block.plans_length`' >\n","comments":"","outputs":1,"x":1837.7381286621094,"y":3093.471034049988,"z":"7b493cae.ee7e54","wires":[["ca0b5abb.4052b8"]]},{"id":"ca0b5abb.4052b8","type":"switchNode","name":"switch plans[].address-family","xml":"<switch test='`$eipam-ip-block.plans[$pidx].address-family`'>\n","comments":"","outputs":1,"x":2135.4523315429688,"y":3093.28076839447,"z":"7b493cae.ee7e54","wires":[["8ed0f8a7.886b98","22520f12.97579"]]},{"id":"1a1dac2b.1a9a54","type":"switchNode","name":"switch: ipv4-floating-count >0","xml":"<switch test='`$db.vfc-to-network-role-mapping[$network-role-index].ipv4-floating-count &gt; 0`'>\n","comments":"","outputs":1,"x":1390.6903991699219,"y":3059.661648750305,"z":"7b493cae.ee7e54","wires":[["9b5a5b6.4b66fa8"]]},{"id":"304d3cc5.fd1bd4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1180.880844116211,"y":2431.8423833847046,"z":"7b493cae.ee7e54","wires":[["993aa5f2.6f82d8","8df9e2.1aca562","94bb71ca.4eb54"]]},{"id":"8df9e2.1aca562","type":"switchNode","name":"switch: ipv6-count > 0","xml":"<switch test='`$db.vfc-to-network-role-mapping[$network-role-index].ipv6-count &gt; 0`'>\n","comments":"","outputs":1,"x":1392.6427726745605,"y":2465.890151977539,"z":"7b493cae.ee7e54","wires":[["4aa8629e.28b3ac"]]},{"id":"75ef08b4.acdd08","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1596.1190185546875,"y":2389.985263824463,"z":"7b493cae.ee7e54","wires":[["e83b72d3.1e2b1"]]},{"id":"4aa8629e.28b3ac","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1594.690341949463,"y":2466.4138679504395,"z":"7b493cae.ee7e54","wires":[["8e7b3912.ba0378"]]},{"id":"736fa1b1.373c3","type":"switchNode","name":"switch: ipv6-floating-count > 0","xml":"<switch test='`$db.vfc-to-network-role-mapping[$network-role-index].ipv6-floating-count &gt; 0`'>\n","comments":"","outputs":1,"x":1392.4285278320312,"y":3131.533532142639,"z":"7b493cae.ee7e54","wires":[["19be4642.83d04a"]]},{"id":"d381c726.b7cc28","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1170.7618103027344,"y":3097.20033454895,"z":"7b493cae.ee7e54","wires":[["1a1dac2b.1a9a54","736fa1b1.373c3","e95c0517.e09a68"]]},{"id":"9b5a5b6.4b66fa8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1614.095287322998,"y":3059.5336084365845,"z":"7b493cae.ee7e54","wires":[["c0bc2d9a.8606"]]},{"id":"19be4642.83d04a","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1614.7617568969727,"y":3130.200038909912,"z":"7b493cae.ee7e54","wires":[["c0bc2d9a.8606"]]},{"id":"c1039f57.f7bf","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":522.5000457763672,"y":2882.5000400543213,"z":"7b493cae.ee7e54","wires":[["1f51f891.894c47"]]},{"id":"e83b72d3.1e2b1","type":"switchNode","name":"switch: ipv4-use-dhcp","xml":"<switch test='`$db.vfc-to-network-role-mapping[$network-role-index].ipv4-use-dhcp`'>\n","comments":"","outputs":1,"x":1803.3334350585938,"y":2390.666848182678,"z":"7b493cae.ee7e54","wires":[["88ae2c5d.bc00c","cfabf2c2.41083","41a2be26.efc88"]]},{"id":"8e7b3912.ba0378","type":"switchNode","name":"switch: ipv6-use-dhcp","xml":"<switch test='`$db.vfc-to-network-role-mapping[$network-role-index].ipv6-use-dhcp`'>\n","comments":"","outputs":1,"x":1805.9999313354492,"y":2466.666851043701,"z":"7b493cae.ee7e54","wires":[["954125f9.7a30c8","cb688c86.1ce09","d84a8945.9f0778"]]},{"id":"1eb54ad2.d2a8b5","type":"set","name":"set use-dhcp, ip-count","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-networks[$extcp-index].use-dhcp'\n   value='`$db.vfc-to-network-role-mapping[$network-role-index].ipv4-use-dhcp`' />\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-networks[$extcp-index].ip-count'\n   value='`$db.vfc-to-network-role-mapping[$network-role-index].ipv4-count`' />","comments":"","x":4256.832984924316,"y":2307.4997520446777,"z":"7b493cae.ee7e54","wires":[]},{"id":"88ae2c5d.bc00c","type":"outcomeTrue","name":"N","xml":"<outcome value='N'>\n","comments":"","outputs":1,"x":2001.666648864746,"y":2390.3332710266113,"z":"7b493cae.ee7e54","wires":[["3221cc22.ab5924"]]},{"id":"6b7de9c5.f85e98","type":"set","name":"set use-dhcp, ip-count","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-networks[$extcp-index].use-dhcp'\n   value='`$db.vfc-to-network-role-mapping[$network-role-index].ipv6-use-dhcp`' />\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-networks[$extcp-index].ip-count'\n   value='`$db.vfc-to-network-role-mapping[$network-role-index].ipv6-count`' />","comments":"","x":4264.833145141602,"y":2573.8330974578857,"z":"7b493cae.ee7e54","wires":[]},{"id":"954125f9.7a30c8","type":"outcomeTrue","name":"N","xml":"<outcome value='N'>\n","comments":"","outputs":1,"x":2003.333251953125,"y":2467,"z":"7b493cae.ee7e54","wires":[["3221cc22.ab5924"]]},{"id":"7e4a874f.2beba8","type":"set","name":"set use-dhcp, ip-count","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-networks[$extcp-index].use-dhcp'\n   value='`$db.vfc-to-network-role-mapping[$network-role-index].ipv4-use-dhcp`' />","comments":"","x":2212.9996032714844,"y":2290.000011444092,"z":"7b493cae.ee7e54","wires":[]},{"id":"925ed0ad.46cf2","type":"set","name":"set use-dhcp, ip-count","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-networks[$extcp-index].use-dhcp'\n   value='`$db.vfc-to-network-role-mapping[$network-role-index].ipv6-use-dhcp`' />","comments":"","x":2221.6665115356445,"y":2565.33327293396,"z":"7b493cae.ee7e54","wires":[]},{"id":"41a2be26.efc88","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":2001.333209991455,"y":2290.0000858306885,"z":"7b493cae.ee7e54","wires":[["7e4a874f.2beba8"]]},{"id":"cfabf2c2.41083","type":"outcomeTrue","name":"Y","xml":"<outcome value='Y'>\n","comments":"","outputs":1,"x":2002.3332061767578,"y":2339.9997663497925,"z":"7b493cae.ee7e54","wires":[["7e4a874f.2beba8"]]},{"id":"cb688c86.1ce09","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":2004.9998779296875,"y":2515,"z":"7b493cae.ee7e54","wires":[["925ed0ad.46cf2"]]},{"id":"d84a8945.9f0778","type":"outcomeTrue","name":"Y","xml":"<outcome value='Y'>\n","comments":"","outputs":1,"x":2006.9998741149902,"y":2564.999680519104,"z":"7b493cae.ee7e54","wires":[["925ed0ad.46cf2"]]},{"id":"b1e138bc.f2d888","type":"set","name":"set extcp-index = 0","xml":"<set>\n<parameter name='extcp-index' value='0' />","comments":"","x":1513.333106994629,"y":2243.3333415985107,"z":"7b493cae.ee7e54","wires":[]},{"id":"584c45d5.7713ac","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1304.9999313354492,"y":2243.3331813812256,"z":"7b493cae.ee7e54","wires":[["b1e138bc.f2d888","1db89c88.0444d3","6c135a3e.326a84","16561881.c0a6a7"]]},{"id":"ba9c61af.758a9","type":"set","name":"set extcp-index = 0","xml":"<set>\n<parameter name='extcp-index' value='0' />","comments":"","x":1410.000015258789,"y":2935.333293914795,"z":"7b493cae.ee7e54","wires":[]},{"id":"c549300f.af982","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1235.000015258789,"y":2934.66654586792,"z":"7b493cae.ee7e54","wires":[["ba9c61af.758a9","1dc52e4b.245ca2","d5a89dc3.716aa"]]},{"id":"d5a89dc3.716aa","type":"set","name":"set tmp.increment-flag = false","xml":"<set>\n<parameter name='tmp.increment-flag' value='false' />","comments":"","x":1441.6666412353516,"y":2985.00004196167,"z":"7b493cae.ee7e54","wires":[]},{"id":"6c135a3e.326a84","type":"set","name":"set tmp.increment-flag = false","xml":"<set>\n<parameter name='tmp.increment-flag' value='false' />","comments":"","x":1549.9998779296875,"y":2293.333251953125,"z":"7b493cae.ee7e54","wires":[]},{"id":"202086dd.4699ba","type":"set","name":"set extcp-index++","xml":"<set>\n<parameter name='extcp-index' value='`$extcp-index + 1`' />","comments":"","x":1808.333251953125,"y":2653.333251953125,"z":"7b493cae.ee7e54","wires":[]},{"id":"94bb71ca.4eb54","type":"switchNode","name":"switch: tmp.increment-flag","xml":"<switch test='`$tmp.increment-flag`'>\n","comments":"","outputs":1,"x":1402.499912261963,"y":2652.499975204468,"z":"7b493cae.ee7e54","wires":[["8453f660.797988"]]},{"id":"8453f660.797988","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1604.166660308838,"y":2654.166723251343,"z":"7b493cae.ee7e54","wires":[["202086dd.4699ba"]]},{"id":"239a3e6a.4203b2","type":"set","name":"set extcp-index++","xml":"<set>\n<parameter name='extcp-index' value='`$extcp-index + 1`' />","comments":"","x":1790.6666412353516,"y":3218.333293914795,"z":"7b493cae.ee7e54","wires":[]},{"id":"e95c0517.e09a68","type":"switchNode","name":"switch: tmp.increment-flag","xml":"<switch test='`$tmp.increment-flag`'>\n","comments":"","outputs":1,"x":1384.8333015441895,"y":3217.5000171661377,"z":"7b493cae.ee7e54","wires":[["bf94ae0c.12fa4"]]},{"id":"bf94ae0c.12fa4","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1586.5000495910645,"y":3219.1667652130127,"z":"7b493cae.ee7e54","wires":[["239a3e6a.4203b2"]]},{"id":"16561881.c0a6a7","type":"set","name":"set vm-networks_length to extcp-index","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-networks_length' \n  value='`$extcp-index`' />\n","comments":"","x":1565,"y":2747.5,"z":"7b493cae.ee7e54","wires":[]},{"id":"3bb48837.b10f78","type":"set","name":"set tmp.increment-flag = true","xml":"<set>\n<parameter name='tmp.increment-flag' value='true' />","comments":"","x":3317.1429748535156,"y":3300.0001182556152,"z":"7b493cae.ee7e54","wires":[]},{"id":"db950f6d.2eaf","type":"set","name":"set tmp.increment-flag = true","xml":"<set>\n<parameter name='tmp.increment-flag' value='true' />","comments":"","x":4281.90461730957,"y":2720.714300632477,"z":"7b493cae.ee7e54","wires":[]},{"id":"3d848b3b.e43b64","type":"set","name":"set vm-network[].network-role","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.vnf-vms[$vm-type-index].vm-networks[$extcp-index].network-role'\n   value='`$db.vfc-to-network-role-mapping[$network-role-index].network-role`' />","comments":"","x":4277.524169921875,"y":2654.52427482605,"z":"7b493cae.ee7e54","wires":[]},{"id":"e503411a.28d3f","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1133.71435546875,"y":3462,"z":"7b493cae.ee7e54","wires":[["89762c08.e802c","b366b5f3.c69918"]]},{"id":"b366b5f3.c69918","type":"set","name":"copy vnf-assignments.vnf-networks_length","xml":"<set>\n<parameter name='service-data.vnf-topology-information.vnf-assignments.vnf-networks_length' \n\tvalue='`$tmp.vnf-topology.vnf-assignments.vnf-networks_length`' />","comments":"","x":1375.71435546875,"y":3511.4287109375,"z":"7b493cae.ee7e54","wires":[]},{"id":"e8763150.28ea1","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1238.5714111328125,"y":3702.71435546875,"z":"7b493cae.ee7e54","wires":[["5e45cf83.e43b3","cb301c5b.4ec05"]]},{"id":"cb301c5b.4ec05","type":"set","name":"copy vnf-assignments.availability-zones_length","xml":"<set>\n<parameter name='service-data.vnf-topology-information.vnf-assignments.availability-zones_length' \n\tvalue='`$tmp.vnf-topology.vnf-assignments.availability-zones_length`' />","comments":"","x":1511.2857666015625,"y":3757.142822265625,"z":"7b493cae.ee7e54","wires":[]},{"id":"b4590740.fd6968","type":"get-resource","name":"get-resource: AAI availability-zones","xml":"<get-resource plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" \n\t\tresource=\"availability-zones\" \n\t\tkey=\"cloud-region.cloud-owner = 'att-aic' AND \n\t\t     cloud-region.cloud-region-id = $vnf-topology-operation-input.vnf-request-information.aic-cloud-region\"\n        pfx='aai.availability-zones[]' local-only='false' >\n\n","comments":"","outputs":1,"x":863.1308708190918,"y":332.72645568847656,"z":"7b493cae.ee7e54","wires":[["9f193ebf.78f8d","aedbd326.cb07c"]]},{"id":"aedbd326.cb07c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1101.3770637512207,"y":350.87731170654297,"z":"7b493cae.ee7e54","wires":[["ad767f50.8de5"]]},{"id":"ad767f50.8de5","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving cloud region from AAI\" />\n","comments":"","x":1276.3770370483398,"y":350.877347946167,"z":"7b493cae.ee7e54","wires":[]},{"id":"9f193ebf.78f8d","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1110.3056602478027,"y":309.1630449295044,"z":"7b493cae.ee7e54","wires":[["dfca4a26.159b68"]]},{"id":"dfca4a26.159b68","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"`'aic-cloud-region,'+ $vnf-topology-operation-input.vnf-request-information.aic-cloud-region + ' not found in AAI'`\" />\n","comments":"","x":1276.6549377441406,"y":308.4686222076416,"z":"7b493cae.ee7e54","wires":[]},{"id":"3044381b.282ee8","type":"for","name":"for each cloud-region availability zones","xml":"<for index='az-index' start='0' end='`$aai.availability-zones_length`' >\n","comments":"","outputs":1,"x":873.4522247314453,"y":463.04719161987305,"z":"7b493cae.ee7e54","wires":[["56ecec2a.230bf4"]]},{"id":"56ecec2a.230bf4","type":"set","name":"set availability-zone","xml":"<set>\n<parameter name='tmp.vnf-topology.vnf-assignments.availability-zones[$az-index].availability-zone'\n  value='`$aai.availability-zones[$az-index].availability-zone-name`' />\n","comments":"","x":1188.9761199951172,"y":462.5591230392456,"z":"7b493cae.ee7e54","wires":[]},{"id":"b22a5158.d6419","type":"switchNode","name":"switch AAI availability-zone_length","xml":"<switch test='`$aai.availability-zones_length`'>\n","comments":"","outputs":1,"x":864.4044456481934,"y":412.9523572921753,"z":"7b493cae.ee7e54","wires":[["7b3804b8.b2b5ec"]]},{"id":"7b3804b8.b2b5ec","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1104.9758644104004,"y":412.52376651763916,"z":"7b493cae.ee7e54","wires":[["21606554.7051aa"]]},{"id":"21606554.7051aa","type":"set","name":"set availability-zones_length to 0","xml":"<set>\n<parameter name='aai.availability-zones_length' value='0' />\n","comments":"","x":1332.1188316345215,"y":412.95221042633057,"z":"7b493cae.ee7e54","wires":[]},{"id":"16e69727.52bec9","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":591.4046936035156,"y":333.23759269714355,"z":"7b493cae.ee7e54","wires":[["b22a5158.d6419","b4590740.fd6968","3044381b.282ee8"]]},{"id":"bddb8b79.040928","type":"comment","name":"REMOVE AZ for E2E Testing","info":"","comments":"","x":657.154655456543,"y":490.0833282470703,"z":"7b493cae.ee7e54","wires":[]}]