[{"id":"e1dd2871.113f8","type":"dgstart","name":"DGSTART","outputs":1,"x":111,"y":47,"z":"ec3e8d66.f93038","wires":[["82dce757.087538"]]},{"id":"fcf7653a.3a495","type":"method","name":"method naming-policy-generate-name","xml":"<method rpc='naming-policy-generate-name' mode='sync'>\n","comments":"","outputs":1,"x":596,"y":49,"z":"ec3e8d66.f93038","wires":[["458087ee.2aacc"]]},{"id":"82dce757.087538","type":"service-logic","name":"VNF-API ${project.version}","module":"VNF-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='VNF-API' version='${project.version}'>","outputs":1,"x":308.9403991699219,"y":47.32145690917969,"z":"ec3e8d66.f93038","wires":[["fcf7653a.3a495"]]},{"id":"1cb317a1.5e39c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":276,"y":2245,"z":"ec3e8d66.f93038","wires":[["44121d7e.8f5f04","9da453f8.ba41f8","85c5165d.285088"]]},{"id":"44121d7e.8f5f04","type":"set","name":"set variables for generating unique name","xml":"<set>\n<!--<parameter name='generate-unique-name-input.index-table-name' value='VM_NAME_INDEX' />-->\n<parameter name='generate-unique-name-input.index-table-name' value=\"`$table-name`\" />\n<parameter name='generate-unique-name-input.index-table-prefix-column' value=\"`$table-prefix-column`\" />\n<!--<parameter name='generate-unique-name-input.name-table-type' value='VNFAPI_VM_INSTANCE' />-->\n<parameter name='generate-unique-name-input.name-table-type' value=\"`$table-type`\" />\n<!--<parameter name='generate-unique-name-input.prefix' value=\"`$naming-policy-generate-name-input.nfc-naming-code`\" />\n<parameter name='generate-unique-name-input.index-length' value='003' />-->\n<parameter name='generate-unique-name-input.prefix' value=\"`$constructed-name`\" />\n<parameter name='generate-unique-name-input.index-length' value=\"`$seq-length`\" />","comments":"","x":414.6904296875,"y":2349.3095703125,"z":"ec3e8d66.f93038","wires":[]},{"id":"85c5165d.285088","type":"call","name":"call VNF-API:naming-policy-generate-unique-name","xml":"<call module='VNF-API' rpc='naming-policy-generate-unique-name' mode='sync' >\n","comments":"","outputs":1,"x":456.023681640625,"y":2394.976318359375,"z":"ec3e8d66.f93038","wires":[["ca1f006f.3a8ec8","22559104.acfc4e"]]},{"id":"ca1f006f.3a8ec8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":750.7379760742188,"y":2371.83349609375,"z":"ec3e8d66.f93038","wires":[["a94665bb.c8a72"]]},{"id":"22559104.acfc4e","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":754.0713259379067,"y":2423.50013923645,"z":"ec3e8d66.f93038","wires":[["8afa973b.1a845"]]},{"id":"5f48fd88.0dd614","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`$generate-unique-name-output.error-message`\" />\n","comments":"","x":1041.5950927734375,"y":2371.261962890625,"z":"ec3e8d66.f93038","wires":[]},{"id":"d15d8b7e.107458","type":"set","name":"set generated vm-name","xml":"<set>\n<parameter name='naming-policy-generate-name-output.vm-name' value='`$generate-unique-name-output.generated-name`' />\n<parameter name='constructed-name' value='' />\n<parameter name='seq-length' value='' />","comments":"","x":1252.5950953165689,"y":2466.9760637283325,"z":"ec3e8d66.f93038","wires":[]},{"id":"5aed9e8c.01177","type":"comment","name":"Call Policy Manager getPolicy","info":"","comments":"","x":265,"y":230,"z":"ec3e8d66.f93038","wires":[]},{"id":"d7e64be2.383e5","type":"execute","name":"execute RestapiCallNode","xml":"<execute plugin='org.openecomp.sdnc.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.pm.getpolicy.templatefile`\" />\n    <parameter name='restapiUrl' value=\"`$prop.policy-manager.url + '/pdp/api/getConfig'`\" />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />  \n    <parameter name='customHttpHeaders'\n      value=\"`'Authorization=Basic ' + $prop.policy-manager.authorization + ',ClientAuth=Basic ' + $prop.policy-manager.clientauth + ',Environment=' + $prop.policy-manager.environment `\" />\n\t<parameter name=\"responsePrefix\" value=\"tmp.pm-response\" />","comments":"","outputs":1,"x":420,"y":354,"z":"ec3e8d66.f93038","wires":[["884f82d5.ee8","4540a42b.fe3534"]]},{"id":"2186307a.fbc6e","type":"set","name":"set","xml":"<set>\n<parameter name='tmp.policy-name' value=\"`$naming-policy-generate-name-input.policy-instance-name`\" />\n","comments":"","x":365,"y":275,"z":"ec3e8d66.f93038","wires":[]},{"id":"611de10b.acedc8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":222,"y":273,"z":"ec3e8d66.f93038","wires":[["2186307a.fbc6e","d7e64be2.383e5","656eb380.894a34","66f741b4.803ec8","a80fd5be.cb4d68","81708506.1cb8b8"]]},{"id":"656eb380.894a34","type":"record","name":"record","xml":"<record plugin=\"com.att.sdnctl.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: restapi-call-node Call Policy Manager getPolicy\"/>","comments":"","outputs":1,"x":365,"y":315,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"3533876a.bd79","type":"execute","name":"execute readProperties","xml":"<execute plugin='org.openecomp.sdnc.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":1125,"y":119,"z":"ec3e8d66.f93038","wires":[["54f4cdfd.39966c","87e121f4.288f3"]]},{"id":"54f4cdfd.39966c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1324,"y":98,"z":"ec3e8d66.f93038","wires":[["95854630.b392d8"]]},{"id":"87e121f4.288f3","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1322,"y":139,"z":"ec3e8d66.f93038","wires":[["4085c1e5.b48b88"]]},{"id":"4085c1e5.b48b88","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1459,"y":141,"z":"ec3e8d66.f93038","wires":[["457f9c75.c8a294","f49bc96c.95458"]]},{"id":"457f9c75.c8a294","type":"GenericXML","name":"record","xml":"<record  plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: Could not read properties file.\"/>\n<parameter name=\"field3\" value='`$prop.restapi.pm.getpolicy.templatefile`'/>","comments":"","outputs":1,"x":1586,"y":141,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"95854630.b392d8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1480,"y":98,"z":"ec3e8d66.f93038","wires":[["508187ab.8c927"]]},{"id":"458087ee.2aacc","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":113,"y":87,"z":"ec3e8d66.f93038","wires":[["611de10b.acedc8","22f52fe8.a38c58"]]},{"id":"c791ad89.2f1168","type":"comment","name":"Read properties","info":"","comments":"","x":1100,"y":72,"z":"ec3e8d66.f93038","wires":[]},{"id":"991cda26.631f2","type":"comment","name":"Generate unique name with constructed-name based on naming-recipe","info":"","comments":"","x":455,"y":2195,"z":"ec3e8d66.f93038","wires":[]},{"id":"b0ff9827.fcb1d8","type":"comment","name":"Process Policy Manager response","info":"Use the three naming components returned from Policy Manager to build the name\n\nExtract from json response three data components:\n\n1. VNFNAME\n2. CONSTANT_TAG\n3. SEQUENCE","comments":"","x":449,"y":445,"z":"ec3e8d66.f93038","wires":[]},{"id":"508187ab.8c927","type":"GenericXML","name":"record","xml":"<record  plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: read properties file.\"/>","comments":"","outputs":1,"x":1627,"y":98,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"81708506.1cb8b8","type":"set","name":"set","xml":"<set>\n<parameter name='vnf-name' value=\"`$naming-policy-generate-name-input.generic-vnf-name`\" />\n<parameter name='constant-tag' value=\"`$naming-policy-generate-name-input.constant-tag`\" />\n<parameter name='sequence' value=\"`$naming-policy-generate-name-input.sequence`\" />\n","comments":"","x":367,"y":400,"z":"ec3e8d66.f93038","wires":[]},{"id":"66f741b4.803ec8","type":"execute","name":"execute jsonStringToCtx","xml":"<execute plugin=\"org.openecomp.sdnc.sli.SliPluginUtils.SliPluginUtils\" method=\"jsonStringToCtx\">\n\t<parameter name=\"source\" value=\"naming-policy-config\" />\n\t<parameter name=\"outputPath\" value=\"jsonContextPrefix\" />\n\t<parameter name=\"isEscaped\" value=\"true\" />\n\n","comments":"","outputs":1,"x":425,"y":525,"z":"ec3e8d66.f93038","wires":[["c7122a65.1e5e28","9923560a.66ce48"]]},{"id":"a80fd5be.cb4d68","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: call jsonStringToCtx\"/>\n<parameter name='field3' value='`$naming-policy-config`' />","comments":"","outputs":1,"x":370,"y":483,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"884f82d5.ee8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":622,"y":344,"z":"ec3e8d66.f93038","wires":[["490321e7.665e48"]]},{"id":"da0f7b38.42e9f","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: Error calling Policy Manager getPolicy\"/>\n","comments":"","outputs":1,"x":883,"y":305,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"4540a42b.fe3534","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":624,"y":386,"z":"ec3e8d66.f93038","wires":[["26c40339.56d0ac"]]},{"id":"8d9633d5.31c26","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: getPolicy SUCCESS\"/>\n<parameter name='field3' value='`$tmp.pm-response.type`' />\n<parameter name='field4' value='`$tmp.pm-response.matchingConditions`' />\n<parameter name='field5' value='`$tmp.pm-response.config`' />\n<parameter name='field6' value='`$tmp.pm-response.response-code`' />\n<parameter name='field7' value='`$tmp.pm-response.response-message`' />","comments":"","outputs":1,"x":878,"y":382,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"1a76f4f4.5f49b3","type":"set","name":"set","xml":"<set>\n<parameter name='naming-policy-config' value=\"`$tmp.pm-response.config`\" />\n","comments":"","x":879,"y":420,"z":"ec3e8d66.f93038","wires":[]},{"id":"c7122a65.1e5e28","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":402,"y":573,"z":"ec3e8d66.f93038","wires":[["e16cf860.02ec18"]]},{"id":"ebdba710.8119f","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: Error calling jsonStringToCtx\"/>\n","comments":"","outputs":1,"x":663,"y":564,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"9923560a.66ce48","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":411,"y":612,"z":"ec3e8d66.f93038","wires":[["58c5f3ff.d9883c"]]},{"id":"aa47b53.f3396c8","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: jsonStringToCtx SUCCESS: policy-instance-name|naming-models_length|constructed-name:\"/>\n<parameter name='field3' value='`$jsonContextPrefix.content.police-instance-name`' />\n<parameter name='field4' value='`$jsonContextPrefix.content.naming-models_length`' />\n<parameter name='field5' value='`$constructed-name`' />","comments":"","outputs":1,"x":562,"y":692,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"7d1b7459.88e24c","type":"for","name":"for each namig-model","xml":"<for index='modelsIndex' start='0' end='`$jsonContextPrefix.content.naming-models_length`' >\n","comments":"","outputs":1,"x":456,"y":742,"z":"ec3e8d66.f93038","wires":[["14bc584a.4f9448"]]},{"id":"58c5f3ff.d9883c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":406,"y":652,"z":"ec3e8d66.f93038","wires":[["aa47b53.f3396c8","7d1b7459.88e24c","47213e62.983da8"]]},{"id":"1b5a7940.4d959f","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: propertiesIndex|source-endpoint|source-system|property-name:\"/>\n<parameter name='field3' value='`$propertiesIndex`' />\n<parameter name='field4' value='`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties[$propertiesIndex].source-endpoint`' />\n<parameter name='field5' value='`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties[$propertiesIndex].source-system`' />\n<parameter name='field6' value='`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties[$propertiesIndex].property-name`' />","comments":"","outputs":1,"x":1193,"y":1545,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"29a1edf7.00804a","type":"comment","name":"Resolve the value of the naming-property","info":"For each naming-property, get the value using the source-endpoinr and the source-system if the property-name is part of the naming-recipe.","comments":"","x":1176,"y":1500,"z":"ec3e8d66.f93038","wires":[]},{"id":"bc3599c0.48288","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1071,"y":1546,"z":"ec3e8d66.f93038","wires":[["1b5a7940.4d959f","23c0fb56.1c2b3c","7765cf52.328ef"]]},{"id":"67cd7b73.b7788c","type":"switchNode","name":"switch source-system (MD-SAL | TOSCA | BLANK)","xml":"<switch test='`$source-system`'>\n","comments":"","outputs":1,"x":1867,"y":1635,"z":"ec3e8d66.f93038","wires":[["8372ef5a.957a88","43de552b.f00ba4","12aa04b6.857ef3"]]},{"id":"23c0fb56.1c2b3c","type":"set","name":"set naming-property vars","xml":"<set>\n<parameter name='source-system' value='`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties[$propertiesIndex].source-system`'  />\n<parameter name='source-endpoint' value='`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties[$propertiesIndex].source-endpoint`'  />\n<parameter name='property-name' value='`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties[$propertiesIndex].property-name`'  />\n<parameter name='property-value' value='`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties[$propertiesIndex].property-value`'  />\n","comments":"","x":1245,"y":1583,"z":"ec3e8d66.f93038","wires":[]},{"id":"8372ef5a.957a88","type":"outcome","name":"outcome: MD-SAL","xml":"<outcome value=\"MD-SAL\">","comments":"","outputs":1,"x":1801,"y":1676,"z":"ec3e8d66.f93038","wires":[["a620207a.7297a"]]},{"id":"43de552b.f00ba4","type":"outcome","name":"outcome: TOSCA","xml":"<outcome value=\"TOSCA\">\n","comments":"","outputs":1,"x":1798,"y":1712,"z":"ec3e8d66.f93038","wires":[["21a90f5c.b0bca"]]},{"id":"12aa04b6.857ef3","type":"other","name":"Blank","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1762,"y":1748,"z":"ec3e8d66.f93038","wires":[["1e63873.2f129f9"]]},{"id":"f7fef3bc.c34e98","type":"get-resource","name":"get-resource: using source-enpoint","xml":"<execute plugin='org.openecomp.sdnc.sli.resource.sql.SqlResource' method='parameterizedQuery' emitsOutcome='true' >\n<parameter name='query' value='nfc_naming_code from VFC_MODEL where customization_uuid = ?' />\n<parameter name='prefix' value='queryPfx' />\n<parameter name='param1' value=\"`$naming-policy-generate-name-input.vfc-customization-uuid`\" />\n\n<!--<get-resource \n\tplugin='org.openecomp.sdnc.sli.resource.sql.SqlResource' \n    resource='SQL'\n\tkey=\"SELECT nfc_naming_code from VFC_MODEL where customization_uuid = $naming-policy-generate-name-input.customization-uuid ; \"\n\tpfx='queryPfx'>\n\t\n-- Use parameterized query\nRead\n<execute plugin='com.att.sdnctl.sli.resource.sql.SqlResource' method='parameterizedQuery' emitsOutcome='true' >\n<parameter name='query' value='select version from SVC_LOGIC where module = ?' />\n<parameter name='prefix' value='query1' />\n<parameter name='param1' value=\"`$vfcCustomizationUuid`  (passed in from calling DG)\" />\n-->\t\n\n","comments":"","outputs":1,"x":2635,"y":1947,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"55e950e2.1b5858","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2116,"y":1980,"z":"ec3e8d66.f93038","wires":[["f415cc12.d548e"]]},{"id":"f415cc12.d548e","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='514' />\n<parameter name='error-message' value='naming-policy-generate-name customiation_uuid not found in VFC_MODEL table'/>\n","comments":"","x":2257,"y":1980,"z":"ec3e8d66.f93038","wires":[]},{"id":"9ca32f97.a5531","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2108,"y":2016,"z":"ec3e8d66.f93038","wires":[["49e831a1.682cd8"]]},{"id":"49e831a1.682cd8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='515' />\n<parameter name='error-message' value='naming-policy-generate-name database access failure'/>\n","comments":"","x":2257,"y":2016,"z":"ec3e8d66.f93038","wires":[]},{"id":"a789e1de.77d218","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2109,"y":2055,"z":"ec3e8d66.f93038","wires":[["ef4bdc18.dee82"]]},{"id":"f4f8b95a.d985f8","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: source-system TOSCA name-value pair|new-part|constructed-name:\"/>\n<parameter name=\"field3\" value=\"`$name-var`\" />\n<parameter name=\"field4\" value=\"`$value-var`\" />\n<parameter name=\"field5\" value=\"`$new-part`\" />\n<parameter name=\"field6\" value=\"`$constructed-name`\" />","comments":"","outputs":1,"x":2235,"y":2162,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"ef4bdc18.dee82","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2235,"y":2055,"z":"ec3e8d66.f93038","wires":[["f4f8b95a.d985f8","637ea33e.1d1edc","72b799d6.4a9b1"]]},{"id":"637ea33e.1d1edc","type":"set","name":"set new-part","xml":"<set>\n<parameter name=\"name-var\" value=\"`$propertiesIndex + '-naming-property-value'`\" />\n<parameter name=\"value-var\" value=\"`$property-name + '-' + $queryPfx.nfc-naming-code`\" />\n<parameter name=\"new-part\" value=\"`$queryPfx.nfc-naming-code` \" />","comments":"","x":2255,"y":2091,"z":"ec3e8d66.f93038","wires":[]},{"id":"2fbb2a0f.338f6e","type":"set","name":"set new-part","xml":"<set>\n<parameter name=\"name-var\" value=\"`$propertiesIndex + '-naming-property-value'`\" />\n<parameter name=\"value-var\" value=\"`$property-name + '-' + $naming-policy-generate-name-input.test-source-endpoint-resolved-value` \" />\n<parameter name=\"new-part\" value=\"`$resolved-source-endpoint` \" />\n<!--<parameter name=\"new-part\" value=\"`$naming-policy-generate-name-input.test-source-endpoint-resolved-value` \" />-->","comments":"","x":2115,"y":1808,"z":"ec3e8d66.f93038","wires":[]},{"id":"c87e7d62.ee542","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: source-system MD-SAL name-value pair|new-part|constructed-name:\"/>\n<parameter name=\"field3\" value=\"`$name-var`\" />\n<parameter name=\"field4\" value=\"`$value-var`\" />\n<parameter name=\"field5\" value=\"`$new-part`\" />\n<parameter name=\"field6\" value=\"`$constructed-name`\" />","comments":"","outputs":1,"x":2099,"y":1896,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"7cb3daf6.5259cc","type":"execute","name":"SliStringUtils - split after |","xml":"<execute plugin='org.openecomp.sdnc.sli.SliPluginUtils.SliStringUtils' method='split' >\n    <parameter name=\"original_string\" value=\"`$original-name`\" />\n    <parameter name=\"regex\" value=\"\\|\"/>\n    <parameter name=\"limit\" value=\"4\" />\n    <parameter name=\"ctx_memory_result_key\" value=\"splits\" />\n  \n","comments":"","outputs":1,"x":888,"y":1144,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"c2a2e3c1.549de","type":"set","name":"set original-name","xml":"<set>\n<parameter name='original-name' value='`$naming-recipe`' />\n","comments":"","x":864.3333435058594,"y":1103.3332710266113,"z":"ec3e8d66.f93038","wires":[]},{"id":"a5c3d178.0abaf8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":755,"y":1062,"z":"ec3e8d66.f93038","wires":[["c2a2e3c1.549de","7cb3daf6.5259cc","57ce2550.9196a4","1cb317a1.5e39c"]]},{"id":"57ce2550.9196a4","type":"for","name":"for each naming-recipe section","xml":"<for index='sectionIndex' start='0' end='`$splits_length`' >\n","comments":"","outputs":1,"x":906,"y":1184,"z":"ec3e8d66.f93038","wires":[["f381642f.df11e"]]},{"id":"9ff7141e.70eb18","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: Split naming-recipe sectionIndex|section value\"/>\n<parameter name=\"field3\" value=\"`$sectionIndex`\" />\n<parameter name=\"field4\" value=\"`$splits[$sectionIndex]`\" />","comments":"","outputs":1,"x":1107,"y":1146,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"f381642f.df11e","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1106,"y":1185,"z":"ec3e8d66.f93038","wires":[["5e7bde2e.58d248","a6e0b01c.66d48"]]},{"id":"5e7bde2e.58d248","type":"for","name":"for each naming-property","xml":"<for index='propertiesIndex' start='0' end='`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties_length`' >\n","comments":"","outputs":1,"x":966,"y":1256,"z":"ec3e8d66.f93038","wires":[["a3bc0ca8.99695"]]},{"id":"e75aa916.b5c308","type":"switchNode","name":"switch property-name == section-value","xml":"<switch test='`$property-name == $section-value`'>\n","comments":"","outputs":1,"x":1069,"y":1376,"z":"ec3e8d66.f93038","wires":[["d8a18211.38a3e8"]]},{"id":"d8a18211.38a3e8","type":"outcome","name":"outcome: recipe section match","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1095,"y":1415,"z":"ec3e8d66.f93038","wires":[["6f49f02b.e01e9"]]},{"id":"9da453f8.ba41f8","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: call generate-unique-name: constructed-name\"/>\n<parameter name=\"field6\" value=\"`$constructed-name`\" />","comments":"","outputs":1,"x":303,"y":2304,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"a6e0b01c.66d48","type":"set","name":"set section-value","xml":"<set>\n<parameter name='section-value' value=\"`$splits[$sectionIndex]`\"  />\n","comments":"","x":941,"y":1220,"z":"ec3e8d66.f93038","wires":[]},{"id":"53db229c.25b264","type":"set","name":"set property-name","xml":"<set>\n<!--<parameter name='property-name' value=\"`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties[$propertiesIndex].property-name`\"  />-->\n<parameter name='property-name' value=\"`$property-name-trimmed`\"  />\n","comments":"","x":1008,"y":1336,"z":"ec3e8d66.f93038","wires":[]},{"id":"a3bc0ca8.99695","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1150,"y":1256,"z":"ec3e8d66.f93038","wires":[["e75aa916.b5c308","f633a4fd.4a0cb8","53db229c.25b264"]]},{"id":"e1026609.2d9d88","type":"set","name":"set constructed-name","xml":"<set>\n<!--<parameter name='constructed-name' value=\"`'init-constructed-name'`\"  />-->\n<parameter name='constructed-name' value=\"`''`\"  />","comments":"","x":614,"y":645,"z":"ec3e8d66.f93038","wires":[]},{"id":"6f49f02b.e01e9","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1077,"y":1459,"z":"ec3e8d66.f93038","wires":[["bc3599c0.48288","6539735c.64fabc"]]},{"id":"eebeb270.d36f9","type":"set","name":"set SEQUENCE info for this naming-property","xml":"<set>\n<!-- until PM is passing the correct source-endpoint for memory value, \n     use one passed via executeDG test\n\n<parameter name=\"`$propertiesIndex` + '-naming-property-value'\" value=\"` $property-name + '-' + $source-endpoint `\"  />\n-->\n<parameter name=\"seq-scope\" value=\"`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties[$propertiesIndex].increment-sequence.scope`\" />\n<parameter name=\"seq-start-value\" value=\"`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties[$propertiesIndex].increment-sequence.start-value` \" />\n<parameter name=\"seq-length\" value=\"`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties[$propertiesIndex].increment-sequence.length` \" />\n<parameter name=\"seq-increment\" value=\"`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties[$propertiesIndex].increment-sequence.increment` \" />\n","comments":"","x":2227,"y":2249,"z":"ec3e8d66.f93038","wires":[]},{"id":"b20eaa93.e2562","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: SDN-GC SEQUENCE info: scope|start-value|length|increment|constructed-name:\"/>\n<parameter name=\"field3\" value=\"`$seq-scope`\" />\n<parameter name=\"field4\" value=\"`$seq-start-value`\" />\n<parameter name=\"field5\" value=\"`$seq-length`\" />\n<parameter name=\"field6\" value=\"`$seq-increment`\" />\n<parameter name=\"field7\" value=\"`$constructed-name`\" />","comments":"","outputs":1,"x":2104,"y":2289,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"a620207a.7297a","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2094,"y":1751,"z":"ec3e8d66.f93038","wires":[["2fbb2a0f.338f6e","c87e7d62.ee542","53cd76e8.97e29","92d39835.a3bd38"]]},{"id":"1e63873.2f129f9","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2103,"y":2211,"z":"ec3e8d66.f93038","wires":[["eebeb270.d36f9","b20eaa93.e2562"]]},{"id":"21a90f5c.b0bca","type":"execute","name":"execute parameterized query usig source-endpoint","xml":"<execute plugin='org.openecomp.sdnc.sli.resource.sql.SqlResource' method='parameterizedQuery' emitsOutcome='true' >\n<parameter name='query' value='select nfc_naming_code from VFC_MODEL where customization_uuid = ?' />\n<parameter name='prefix' value='queryPfx' />\n<parameter name='param1' value=\"`$naming-policy-generate-name-input.vfc-customization-uuid`\" />","comments":"","outputs":1,"x":2235,"y":1944,"z":"ec3e8d66.f93038","wires":[["55e950e2.1b5858","9ca32f97.a5531","a789e1de.77d218"]]},{"id":"6539735c.64fabc","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: section match: section-value|property-name:\"/>\n<parameter name=\"field3\" value=\"`$section-value`\" />\n<parameter name=\"field4\" value=\"`$property-name`\" />","comments":"","outputs":1,"x":1215,"y":1460,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"72b799d6.4a9b1","type":"set","name":"add new-part to constructed-value","xml":"<set>\n<parameter name=\"constructed-name\" value=\"`$constructed-name + $new-part` \"  />\n","comments":"","x":2324,"y":2126,"z":"ec3e8d66.f93038","wires":[]},{"id":"53cd76e8.97e29","type":"set","name":"add new-part to constructed-value","xml":"<set>\n<parameter name=\"constructed-name\" value=\"`$constructed-name + $new-part` \"  />","comments":"","x":2184,"y":1846,"z":"ec3e8d66.f93038","wires":[]},{"id":"8afa973b.1a845","type":"switchNode","name":"switch naming-type (VM | VNFC)","xml":"<switch test='`$naming-type`'>\n","comments":"","outputs":1,"x":971.0000025431314,"y":2421.9999895095825,"z":"ec3e8d66.f93038","wires":[["e1f6f2da.edc4a8","d2819ede.243828"]]},{"id":"e1f6f2da.edc4a8","type":"outcome","name":"outcome: VM","xml":"<outcome value=\"VM\">\n<!-- <outcome value=\"MD-SAL\"> -->\n","comments":"","outputs":1,"x":1019.0000025431314,"y":2473.9999895095825,"z":"ec3e8d66.f93038","wires":[["1abc24f2.9fdddb"]]},{"id":"d2819ede.243828","type":"outcome","name":"outcome: VNFC","xml":"<outcome value=\"VNFC\">\n<!-- <outcome value=\"MD-SAL\"> -->\n","comments":"","outputs":1,"x":1022.0000025431314,"y":2565.9999895095825,"z":"ec3e8d66.f93038","wires":[["64c3149d.c02d8c"]]},{"id":"56f4e9d0.e3c6b","type":"set","name":"set generated vnfc-name","xml":"<set>\n<parameter name='naming-policy-generate-name-output.vnfc-name' value='`$generate-unique-name-output.generated-name`' />\n<parameter name='constructed-name' value='' />\n<parameter name='seq-length' value='' />","comments":"","x":1258.5950953165689,"y":2595.9760637283325,"z":"ec3e8d66.f93038","wires":[]},{"id":"675ba67f.776bf8","type":"record","name":"record generated vm-name","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: generated vm-name|generate-unique-name-output.generated-name:\"/>\n<parameter name=\"field5\" value=\"`$naming-policy-generate-name-output.vm-name`\" />\n<parameter name=\"field6\" value=\"`$generate-unique-name-output.generated-name`\" />","comments":"","outputs":1,"x":1263.0000025431314,"y":2507.9999895095825,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"1abc24f2.9fdddb","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1198.0000025431314,"y":2430.9999895095825,"z":"ec3e8d66.f93038","wires":[["675ba67f.776bf8","d15d8b7e.107458"]]},{"id":"64c3149d.c02d8c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1200.0000025431314,"y":2554.9999895095825,"z":"ec3e8d66.f93038","wires":[["19a3f67.850440a","56f4e9d0.e3c6b"]]},{"id":"19a3f67.850440a","type":"record","name":"record generated vnfc-name","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: generated vnfc-name|generate-unique-name-output.generated-name:\"/>\n<parameter name=\"field5\" value=\"`$naming-policy-generate-name-output.vnfc-name`\" />\n<parameter name=\"field6\" value=\"`$generate-unique-name-output.generated-name`\" />","comments":"","outputs":1,"x":1269.0000025431314,"y":2633.9999895095825,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"7765cf52.328ef","type":"switchNode","name":"switch property-value","xml":"<switch test='`$property-value`'>\n","comments":"","outputs":1,"x":1236,"y":1625,"z":"ec3e8d66.f93038","wires":[["ca43f965.7f0d8","da7dd717.6f44f8"]]},{"id":"ca43f965.7f0d8","type":"other","name":"Blank","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1448,"y":1635,"z":"ec3e8d66.f93038","wires":[["4cb2761a.1389c8"]]},{"id":"4cb2761a.1389c8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1582,"y":1635,"z":"ec3e8d66.f93038","wires":[["67cd7b73.b7788c"]]},{"id":"da7dd717.6f44f8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1241,"y":1827,"z":"ec3e8d66.f93038","wires":[["2c2dad2d.87454a"]]},{"id":"2c2dad2d.87454a","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1271,"y":1869,"z":"ec3e8d66.f93038","wires":[["b0a19798.d8da08","7e3833f1.ac3974","63d10d44.027524"]]},{"id":"b0a19798.d8da08","type":"set","name":"set new-part","xml":"<set>\n<!-- until PM is passing the correct source-endpoint for memory value, \n     use one passed via executeDG test\n\n<parameter name=\"`$propertiesIndex` + '-naming-property-value'\" value=\"` $property-name + '-' + $source-endpoint `\"  />\n-->\n<parameter name=\"name-var\" value=\"`$propertiesIndex + '-naming-property-value'`\" />\n<parameter name=\"value-var\" value=\"`$property-name + '-' + $property-value` \" />\n<parameter name=\"new-part\" value=\"`$property-value` \" />","comments":"","x":1289,"y":1906,"z":"ec3e8d66.f93038","wires":[]},{"id":"63d10d44.027524","type":"set","name":"add new-part to constructed-value","xml":"<set>\n<parameter name=\"constructed-name\" value=\"`$constructed-name + $new-part` \"  />","comments":"","x":1358,"y":1944,"z":"ec3e8d66.f93038","wires":[]},{"id":"7e3833f1.ac3974","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: property-value name-value pair|new-part|constructed-name:\"/>\n<parameter name=\"field3\" value=\"`$name-var`\" />\n<parameter name=\"field4\" value=\"`$value-var`\" />\n<parameter name=\"field5\" value=\"`$new-part`\" />\n<parameter name=\"field6\" value=\"`$constructed-name`\" />","comments":"","outputs":1,"x":1270,"y":1982,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"47213e62.983da8","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name='naming-policy-generate-name-output.vm-name' value=\"`$naming-policy-generate-name-output.vm-name`\" />\n<parameter name='naming-policy-generate-name-output.vnfc-name' value=\"`$naming-policy-generate-name-output.vnfc-name`\" />\n","comments":"","x":182,"y":2983,"z":"ec3e8d66.f93038","wires":[]},{"id":"f49bc96c.95458","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='501' />\n<parameter name='error-message' value='naming-policy-generate-name: could not read generic-resource-api properties' />\n","comments":"","x":1603,"y":181,"z":"ec3e8d66.f93038","wires":[]},{"id":"edf3770.c2ad188","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='502' />\n<parameter name='error-message' value='naming-policy-generate-name: getPolicy call to Policy Manger failed' />\n","comments":"","x":901,"y":343,"z":"ec3e8d66.f93038","wires":[]},{"id":"5072eaa2.a3360c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='504' />\n<parameter name='error-message' value='naming-policy-generate-name: failed to parse Policy Manger getPolicy response' />\n","comments":"","x":679,"y":603,"z":"ec3e8d66.f93038","wires":[]},{"id":"490321e7.665e48","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":749,"y":343,"z":"ec3e8d66.f93038","wires":[["da0f7b38.42e9f","edf3770.c2ad188"]]},{"id":"e16cf860.02ec18","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":537,"y":573,"z":"ec3e8d66.f93038","wires":[["ebdba710.8119f","5072eaa2.a3360c"]]},{"id":"f633a4fd.4a0cb8","type":"execute","name":"SliStringUtils - trim property-name","xml":"<execute plugin='org.openecomp.sdnc.sli.SliPluginUtils.SliStringUtils' method='trim' >\n    <parameter name=\"source\" value=\"`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-properties[$propertiesIndex].property-name`\" />\n    <parameter name=\"outputPath\" value=\"property-name-trimmed\" />\n  \n","comments":"","outputs":1,"x":1053,"y":1298,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"d2064469.922cc8","type":"execute","name":"SliPluginUtils - getArrtibuteValue for source-endpoint","xml":"<execute plugin='org.openecomp.sdnc.sli.SliPluginUtils.SliPluginUtils' method='getAttributeValue' >\n\t<parameter name=\"source\" value=\"`$source-endpoint`\" />\n\t<!--<parameter name=\"source\" value=\"`$naming-policy-generate-name-input.test-source-endpoint-path`\" />-->\n\t<parameter name=\"outputPath\" value=\"resolved-source-endpoint\" />\n\t","comments":"","outputs":1,"x":2716,"y":1833,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"88f63ad7.7019f8","type":"set","name":"set ctx-memory-path * TEST ONLY *","xml":"<set>\n<parameter name=\"ctx-memory-path\" value='test-source-endpoint-resolved-value' />","comments":"","x":2316,"y":1640,"z":"ec3e8d66.f93038","wires":[]},{"id":"92d39835.a3bd38","type":"switchNode","name":"switch property-name (VMNAME | Other)","xml":"<switch test='`$property-name`'>\n","comments":"","outputs":1,"x":2484,"y":1751,"z":"ec3e8d66.f93038","wires":[["58a58487.9a374c","fca705b.4d95478"]]},{"id":"58a58487.9a374c","type":"outcome","name":"outcome: VMNAME","xml":"<outcome value=\"VMNAME\">","comments":"","outputs":1,"x":2488,"y":1794,"z":"ec3e8d66.f93038","wires":[["bf53340e.f8062"]]},{"id":"fca705b.4d95478","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":2444,"y":1833,"z":"ec3e8d66.f93038","wires":[["d2064469.922cc8"]]},{"id":"bf53340e.f8062","type":"set","name":"set resolved-source-endpoint to input vm-name","xml":"<set>\n<parameter name=\"resolved-source-endpoint\" value=\"`$naming-policy-generate-name-input.vm-name`\" />","comments":"","x":2782,"y":1794,"z":"ec3e8d66.f93038","wires":[]},{"id":"46886dc7.e6cb54","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: Error calling generate-unique-name\"/>\n","comments":"","outputs":1,"x":1027,"y":2325,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"fad90230.6999d","type":"comment","name":"Process naming-property","info":"","comments":"","x":1781,"y":1594,"z":"ec3e8d66.f93038","wires":[]},{"id":"c70edb1c.5bb87","type":"comment","name":"If property-value was set use it instead of constructing a value","info":"","comments":"","x":1410,"y":1788,"z":"ec3e8d66.f93038","wires":[]},{"id":"1bbcec75.0ccabc","type":"comment","name":"construct a name only if the naming-type matches input","info":"","comments":"","x":561,"y":784,"z":"ec3e8d66.f93038","wires":[]},{"id":"14bc584a.4f9448","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":414,"y":823,"z":"ec3e8d66.f93038","wires":[["216727e8.94da78","f0520473.d37a3","8091fa85.cebd7"]]},{"id":"216727e8.94da78","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: modelsIndex|naming-type|naming-recipe:\"/>\n<parameter name='field3' value='`$modelsIndex`' />\n<parameter name='field4' value='`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-type`' />\n<parameter name='field5' value='`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-recipe`' />","comments":"","outputs":1,"x":414,"y":867,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"8091fa85.cebd7","type":"set","name":"set naming-model vars","xml":"<set>\n<parameter name='naming-recipe' value='`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-recipe`'  />\n<parameter name='naming-type' value='`$jsonContextPrefix.content.naming-models[$modelsIndex].naming-type`'  />\n","comments":"","x":464,"y":915,"z":"ec3e8d66.f93038","wires":[]},{"id":"f0520473.d37a3","type":"switchNode","name":"switch naming-type == input.naming-type","xml":"<switch test='`$naming-type == $naming-policy-generate-name-input.naming-type`'>\n","comments":"","outputs":1,"x":522,"y":962,"z":"ec3e8d66.f93038","wires":[["835ca7af.ca5dc8","6170d67f.885748"]]},{"id":"835ca7af.ca5dc8","type":"outcome","name":"outcome: recipe section match","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":536,"y":1028,"z":"ec3e8d66.f93038","wires":[["a5c3d178.0abaf8"]]},{"id":"6170d67f.885748","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":458,"y":1070,"z":"ec3e8d66.f93038","wires":[["1a6d2e96.bb3119"]]},{"id":"1a6d2e96.bb3119","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: naming-type from returned policy does not match input.naming-type.  Do not construct name for: \"/>\n<parameter name=\"field3\" value=\"`$naming-type`\" />","comments":"","outputs":1,"x":592,"y":1070,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"bf44554e.54efa8","type":"comment","name":"Validate inputs","info":"","comments":"","x":1096,"y":180,"z":"ec3e8d66.f93038","wires":[]},{"id":"a94665bb.c8a72","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":890,"y":2372,"z":"ec3e8d66.f93038","wires":[["46886dc7.e6cb54","5f48fd88.0dd614"]]},{"id":"d772f7f6.358028","type":"switchNode","name":"switch input.naming-type","xml":"<switch test='`$naming-policy-generate-name-input.naming-type`'>\n","comments":"","outputs":1,"x":1133,"y":226,"z":"ec3e8d66.f93038","wires":[["19373f30.317be9","33353e6d.39a5ea","de6bbe02.035f68"]]},{"id":"19373f30.317be9","type":"outcome","name":"VM","xml":"<outcome value='VM'>\n","comments":"","outputs":1,"x":1324,"y":228,"z":"ec3e8d66.f93038","wires":[["39775b1c.535f84"]]},{"id":"5547939a.98f154","type":"set","name":"set table-name NAMING_POLICY_VNFC_NAME","xml":"<set>\n<parameter name='table-name' value=\"NAMING_POLICY_VNFC_NAME_INDEX\" />\n<parameter name='table-type' value=\"VNFAPI_VNFC_INSTANCE\" />\n<parameter name='table-prefix-column' value=\"vnfc_name_prefix\" />\n<parameter name='seq-length' value=\"0\" />","comments":"","x":1956,"y":344,"z":"ec3e8d66.f93038","wires":[]},{"id":"39775b1c.535f84","type":"set","name":"set table-name NAMING_POLICY_VM_NAME","xml":"<set>\n<parameter name='table-name' value=\"NAMING_POLICY_VM_NAME_INDEX\" />\n<parameter name='table-type' value=\"VNFAPI_VM_INSTANCE\" />\n<parameter name='table-prefix-column' value=\"vm_name_prefix\" />","comments":"","x":1594,"y":228,"z":"ec3e8d66.f93038","wires":[]},{"id":"33353e6d.39a5ea","type":"outcome","name":"VNFC","xml":"<outcome value='VNFC'>\n","comments":"","outputs":1,"x":1324,"y":283,"z":"ec3e8d66.f93038","wires":[["b6e47169.c29e1"]]},{"id":"de6bbe02.035f68","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1325,"y":332,"z":"ec3e8d66.f93038","wires":[["e212ffd7.e17f6"]]},{"id":"e212ffd7.e17f6","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1446,"y":332,"z":"ec3e8d66.f93038","wires":[["149a36d8.7858d9","c4918269.b84e1"]]},{"id":"149a36d8.7858d9","type":"GenericXML","name":"record","xml":"<record  plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: invalid input.naming-type.\"/>\n<parameter name=\"field3\" value='`$naming-policy-generate-name-input.naming-type`'/>","comments":"","outputs":1,"x":1573,"y":334,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"c4918269.b84e1","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='503' />\n<parameter name='error-message' value='naming-policy-generate-name: Invalid input.naming-type' />\n","comments":"","x":1590,"y":374,"z":"ec3e8d66.f93038","wires":[]},{"id":"b6e47169.c29e1","type":"switchNode","name":"switch input.vm-name","xml":"<switch test='`$naming-policy-generate-name-input.vm-name`'>\n","comments":"","outputs":1,"x":1521,"y":283,"z":"ec3e8d66.f93038","wires":[["a702fb45.5a6b9","db15b8a0.0bd98"]]},{"id":"a702fb45.5a6b9","type":"other","name":"Blank","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1705,"y":283,"z":"ec3e8d66.f93038","wires":[["340b532e.ced8f4"]]},{"id":"db15b8a0.0bd98","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1705,"y":326,"z":"ec3e8d66.f93038","wires":[["5547939a.98f154"]]},{"id":"340b532e.ced8f4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1835,"y":283,"z":"ec3e8d66.f93038","wires":[["e9f7dd2d.9edb48","d3ddcac3.37b1"]]},{"id":"e9f7dd2d.9edb48","type":"GenericXML","name":"record","xml":"<record  plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: input.naming-type is VNFC but input.vm-name is not set\"/>","comments":"","outputs":1,"x":1968,"y":259,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"d3ddcac3.37b1","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='505' />\n<parameter name='error-message' value='naming-policy-generate-name: input.naming-type is VNFC but input.vm-name is not set' />\n","comments":"","x":1983,"y":299,"z":"ec3e8d66.f93038","wires":[]},{"id":"b775f9fb.5b40a8","type":"switchNode","name":"switch input.vfc-customization-uuid","xml":"<switch test='`$naming-policy-generate-name-input.vfc-customization-uuid`'>\n","comments":"","outputs":1,"x":1168,"y":446,"z":"ec3e8d66.f93038","wires":[["f8b72e28.55d988"]]},{"id":"bc848d1a.215b68","type":"switchNode","name":"switch input.policy-instance-name","xml":"<switch test='`$naming-policy-generate-name-input.policy-instance-name`'>\n","comments":"","outputs":1,"x":1170,"y":547,"z":"ec3e8d66.f93038","wires":[["953953f.2e729b"]]},{"id":"459e0c29.f7ddd4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1526,"y":446,"z":"ec3e8d66.f93038","wires":[["28625108.1fd88e","dc390b77.c6408"]]},{"id":"28625108.1fd88e","type":"GenericXML","name":"record","xml":"<record  plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: input.vfc-customization-uuid is not set\"/>","comments":"","outputs":1,"x":1659,"y":422,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"dc390b77.c6408","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='506' />\n<parameter name='error-message' value='naming-policy-generate-name: input.vfc-customization-uuid is not set' />\n","comments":"","x":1676,"y":462,"z":"ec3e8d66.f93038","wires":[]},{"id":"f8b72e28.55d988","type":"other","name":"Blank","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1396,"y":446,"z":"ec3e8d66.f93038","wires":[["459e0c29.f7ddd4"]]},{"id":"953953f.2e729b","type":"other","name":"Blank","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1398,"y":547,"z":"ec3e8d66.f93038","wires":[["c999e4ba.1a71f"]]},{"id":"c999e4ba.1a71f","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1528,"y":547,"z":"ec3e8d66.f93038","wires":[["e9546ace.511968","dbf28b00.96c5f8"]]},{"id":"e9546ace.511968","type":"GenericXML","name":"record","xml":"<record  plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: input.policy-instance-name is not set\"/>","comments":"","outputs":1,"x":1661,"y":523,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"dbf28b00.96c5f8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='507' />\n<parameter name='error-message' value='naming-policy-generate-name: input.policy-instance-name is not set' />\n","comments":"","x":1678,"y":563,"z":"ec3e8d66.f93038","wires":[]},{"id":"22f52fe8.a38c58","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":221,"y":180,"z":"ec3e8d66.f93038","wires":[["3533876a.bd79","d772f7f6.358028","b775f9fb.5b40a8","bc848d1a.215b68"]]},{"id":"7462f221.62a284","type":"comment","name":"Read properties and validate inputs","info":"","comments":"","x":292,"y":134,"z":"ec3e8d66.f93038","wires":[]},{"id":"26c40339.56d0ac","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":750,"y":387,"z":"ec3e8d66.f93038","wires":[["8d9633d5.31c26","1a76f4f4.5f49b3","5db1c92c.786d38"]]},{"id":"5db1c92c.786d38","type":"switchNode","name":"switch response-code","xml":"<switch test='`$tmp.pm-response.response-code`'>\n","comments":"","outputs":1,"x":938,"y":630,"z":"ec3e8d66.f93038","wires":[["8dfefef0.1fc358"]]},{"id":"8dfefef0.1fc358","type":"outcome","name":"500","xml":"<outcome value='500'>\n","comments":"","outputs":1,"x":1123,"y":632,"z":"ec3e8d66.f93038","wires":[["bc9f8019.58abf"]]},{"id":"bc9f8019.58abf","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1126,"y":680,"z":"ec3e8d66.f93038","wires":[["f789f38f.1be6f8","ae1fbc5d.537eb"]]},{"id":"f789f38f.1be6f8","type":"record","name":"record","xml":"<record plugin=\"org.openecomp.sdnc.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"LAINA: naming-policy-generate-name: Error calling Policy Manager getPolicy\"/>\n","comments":"","outputs":1,"x":1274,"y":658,"z":"ec3e8d66.f93038","wires":[[]]},{"id":"ae1fbc5d.537eb","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='502' />\n<parameter name='error-message' value='naming-policy-generate-name: getPolicy call to Policy Manger failed' />\n","comments":"","x":1294,"y":697,"z":"ec3e8d66.f93038","wires":[]}]