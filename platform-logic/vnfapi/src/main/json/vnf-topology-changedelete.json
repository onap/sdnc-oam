


[{"id":"acc7a1a9.a1048","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":202.5,"y":202.5,"z":"c2480ba7.74ffa8","wires":[["64cc4463.d3e58c","85ab4097.8b2dc","acf4923b.06fde","5df44df2.cfa404","a0786094.6ea81","ecb32124.6cd76","b4b1be1a.81bad","b95c32b4.219e1"]]},{"id":"eaa42ad6.78f358","type":"method","name":"method vnf-topology-changedelete","xml":"<method rpc='vnf-topology-changedelete' mode='sync'>\n","comments":"","outputs":1,"x":263.16668701171875,"y":128.66666507720947,"z":"c2480ba7.74ffa8","wires":[["acc7a1a9.a1048"]]},{"id":"64cc4463.d3e58c","type":"switchNode","name":"switch: order-status = Active","xml":"<switch test=\"'$service-data.oper-status.order-status == Active'\">\n\n<!--\nleaf order-status {\n\ttype enumeration {\n\t\tenum \"Active\";\n\t\tenum \"PendingAssignment\";\n\t\tenum \"PendingCreate\";\n\t\tenum \"PendingUpdate\";\n\t\tenum \"Deleted\";\n\t}\n}\n-->","comments":"","outputs":1,"x":497.83331298828125,"y":260.8331604003906,"z":"c2480ba7.74ffa8","wires":[["b18f56cb.33d1f8"]]},{"id":"c7301650.992bf8","type":"service-logic","name":"VNF-API 2.0.0","module":"VNF-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.att.com/sdnctl/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.att.com/sdnctl/svclogic ./svclogic.xsd' module='VNF-API' version='${project.version}'>","outputs":1,"x":333.1666564941406,"y":82.666672706604,"z":"c2480ba7.74ffa8","wires":[["eaa42ad6.78f358"]]},{"id":"b18f56cb.33d1f8","type":"other","name":"false","xml":"<outcome value='false'>","comments":"","outputs":1,"x":718.1666870117188,"y":261.1664733886719,"z":"c2480ba7.74ffa8","wires":[["94a2faf.7549008"]]},{"id":"608bf838.51bd68","type":"dgstart","name":"DGSTART","outputs":1,"x":170,"y":82.50000095367432,"z":"c2480ba7.74ffa8","wires":[["c7301650.992bf8"]]},{"id":"94a2faf.7549008","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='Invalid last-order-status'/>","comments":"","x":877.4998168945312,"y":261.16651916503906,"z":"c2480ba7.74ffa8","wires":[]},{"id":"85ab4097.8b2dc","type":"set","name":"set: order-status = PendingDelete","xml":"<set>\n\t<parameter name=\"service-data.oper-status.order-status\" value=\"PendingDelete\"/>","comments":"","outputs":1,"x":512.9999694824219,"y":422.4999694824219,"z":"c2480ba7.74ffa8","wires":[[]]},{"id":"acf4923b.06fde","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n\t<parameter name=\"error-code\" value=\"200\" />\n","comments":"","x":459,"y":589.4999694824219,"z":"c2480ba7.74ffa8","wires":[]},{"id":"efff4a22.b9abb8","type":"comment","name":"Update VNF status to PendingDelete","info":"","comments":"","x":1071.3333740234375,"y":73.38889789581299,"z":"c2480ba7.74ffa8","wires":[]},{"id":"67d8ea7b.3b55e4","type":"comment","name":"VNF-TOPOLOGY-CHANGEDELETE","info":"","comments":"","x":766.8889007568359,"y":73.05555725097656,"z":"c2480ba7.74ffa8","wires":[]},{"id":"94a9e016.11104","type":"comment","name":"request-action = DisconnectVNFRequest, svc-action = changedelete","info":"","comments":"","x":899.7777404785156,"y":109.1666669845581,"z":"c2480ba7.74ffa8","wires":[]},{"id":"ecb32124.6cd76","type":"set","name":"set: last-action ","xml":"<set>\n\t<parameter name=\"service-data.oper-status.last-action\" value=\"`$service-data.request-information.request-action`\"/>","comments":"","outputs":1,"x":456,"y":476.4999694824219,"z":"c2480ba7.74ffa8","wires":[[]]},{"id":"5df44df2.cfa404","type":"switchNode","name":"switch:vnf-id   config == input","xml":"<switch test=\"`$vnf-topology-operation-input.vnf-request-information.vnf-id == $service-data.vnf-id`\">","comments":"","outputs":1,"x":495.1363830566406,"y":203.69192504882812,"z":"c2480ba7.74ffa8","wires":[["e76a19e5.7aa208"]]},{"id":"e76a19e5.7aa208","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":717.5909118652344,"y":203.87375259399414,"z":"c2480ba7.74ffa8","wires":[["7f2aec26.3ec724"]]},{"id":"7f2aec26.3ec724","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vnf-id not found'/>","comments":"","x":875.6818161010742,"y":203.78285026550293,"z":"c2480ba7.74ffa8","wires":[]},{"id":"a0786094.6ea81","type":"set","name":"set: last-order-status = order-status","xml":"<set>\n\t<parameter name=\"service-data.oper-status.last-order-status\" value=\"`$service-data.oper-status.order-status`\"/>","comments":"","outputs":1,"x":518.1363525390625,"y":371.6919250488281,"z":"c2480ba7.74ffa8","wires":[[]]},{"id":"b4b1be1a.81bad","type":"set","name":"set: service-data = input","xml":"<set>\n\t<parameter name=\"service-data.\" value=\"vnf-topology-operation-input.\" /> \n","comments":"","outputs":1,"x":487.1363525390625,"y":530.6918640136719,"z":"c2480ba7.74ffa8","wires":[[]]},{"id":"b95c32b4.219e1","type":"save","name":"update generic-vnf status to pending-delete","xml":"<update plugin=\"com.att.sdnctl.sli.aai.AAIService\" \n\tresource=\"generic-vnf\" \n\t\tkey=\"vnf-id = $vnf-topology-operation-input.vnf-request-information.vnf-id\" \n\tforce=\"true\" \n\tlocal-only=\"false\" >\n\t<parameter name=\"orchestration-status\" value=\"pending-delete\" />\n","comments":"","outputs":1,"x":542.1363525390625,"y":316.6918640136719,"z":"c2480ba7.74ffa8","wires":[[]]}]
