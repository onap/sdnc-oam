

[{"id":"fae93ccf.cab658","type":"dgstart","name":"DGSTART","outputs":1,"x":129,"y":20,"z":"2500da67.7593e6","wires":[["ca4ee988.18e94"]]},{"id":"ca4ee988.18e94","type":"service-logic","name":"VNF-API 2.0.0","module":"VNF-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.att.com/sdnctl/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.att.com/sdnctl/svclogic ./svclogic.xsd' module='VNF-API' version='${project.version}'>","outputs":1,"x":162.00001525878906,"y":71.11109924316406,"z":"2500da67.7593e6","wires":[["f719cf30.51d0b"]]},{"id":"f719cf30.51d0b","type":"method","name":"preload-vnf-topology-operation","xml":"<method rpc=\"preload-vnf-topology-operation\" mode=\"sync\">","comments":"","outputs":1,"x":249.33334350585938,"y":116.22219848632812,"z":"2500da67.7593e6","wires":[["78ada0b2.50427"]]},{"id":"78ada0b2.50427","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":177.22219848632812,"y":269.6666564941406,"z":"2500da67.7593e6","wires":[["77cbb227.262d74","c8f7640f.136fa"]]},{"id":"169fbec8.2ae4b1","type":"comment","name":"preload-vnf-topology-operation","info":"","comments":"","x":710.7121696472168,"y":26.76768398284912,"z":"2500da67.7593e6","wires":[]},{"id":"77cbb227.262d74","type":"record","name":"record","xml":"<record plugin=\"com.att.sdnctl.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"preload-vnf-topology-operation\"/>\n<parameter name=\"field3\" value=\"`$preload-vnf-topology-operation-input.sdnc-request-header.svc-action`\"/>\n<parameter name=\"field4\" value=\"`$preload-vnf-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field5\" value=\"`$preload-vnf-topology-operation-input.service-information.service-instance-id`\"/>\n<parameter name=\"field6\" value=\"`$preload-vnf-topology-operation-input.request-information.request-id`\"/>\n<parameter name=\"field7\" value=\"`$preload-vnf-topology-operation-input.request-information.request-action`\"/>\n<parameter name=\"field8\" value=\"`$preload-vnf-topology-operation-input.request-information.source`\"/>\n<parameter name=\"field9\" value=\"`$preload-vnf-topology-operation-input.vnf-topology-information.vnf-topology-identifier.service-type`\"/>\n<parameter name=\"field10\" value=\"`$preload-vnf-topology-operation-input.vnf-topology-information.vnf-topology-identifier.vnf-name`\"/>\n<parameter name=\"field11\" value=\"`$preload-vnf-topology-operation-input.vnf-topology-information.vnf-topology-identifier.vnf-type`\"/>","comments":"","outputs":1,"x":397.934326171875,"y":253.32322692871094,"z":"2500da67.7593e6","wires":[[]]},{"id":"cd624889.3ab088","type":"comment","name":"request-action = PreloadVNFRequest, svc-action = reserve","info":"","comments":"","x":719.4999961853027,"y":64.4444465637207,"z":"2500da67.7593e6","wires":[]},{"id":"c8f7640f.136fa","type":"switchNode","name":"switch: request-action","xml":"<switch test=\"`$preload-vnf-topology-operation-input.request-information.request-action`\">\n<!--\nleaf request-action { \n\t\t\t\ttype enumeration { \n\t\t\t\t\tenum \"VNFActivateRequest\";\n\t\t\t\t\tenum \"ChangeVNFActivateRequest\";\n\t\t\t\t\tenum \"DisconnectVNFRequest\";\n\t\t\t\t\tenum \"PreloadVNFRequest\";\n\t\t\t\t\tenum \"DeletePreloadVNFRequest\";\n\t\t\t\t} \n}\n-->\n\n","comments":"","outputs":1,"x":444,"y":289.76768493652344,"z":"2500da67.7593e6","wires":[["496c8179.d18ef","8675aa08.bbf3f8","c9bbcd1d.2da5f8"]]},{"id":"496c8179.d18ef","type":"other","name":"PreloadVNFRequest","xml":"<outcome value='PreloadVNFRequest'>","comments":"","outputs":1,"x":672,"y":290.76768493652344,"z":"2500da67.7593e6","wires":[["c51b9598.c5f25"]]},{"id":"8675aa08.bbf3f8","type":"other","name":"DeletePreloadVNFRequest","xml":"<outcome value='DeletePreloadVNFRequest'>","comments":"","outputs":1,"x":673.5713119506836,"y":664.6248331069946,"z":"2500da67.7593e6","wires":[["56297be.01b5984"]]},{"id":"90fab1a1.b184","type":"set","name":"Delete Preload Data","xml":"<set>\n<parameter name=\"preload-data.\" value=\"\" />\n","comments":"","x":1143.5713119506836,"y":706.6248331069946,"z":"2500da67.7593e6","wires":[]},{"id":"d7b12d3.82f4c5","type":"returnSuccess","name":"return success","xml":"<return status=\"success\">\n\t<parameter name=\"error-code\" value=\"200\" />","comments":"","x":1126.5713119506836,"y":746.6248331069946,"z":"2500da67.7593e6","wires":[]},{"id":"c9bbcd1d.2da5f8","type":"other","name":"outcome: Other","xml":"<outcome value=\"Other\">\n\n","outputs":1,"x":641.5713119506836,"y":784.6248331069946,"z":"2500da67.7593e6","wires":[["e1246f8e.79201"]]},{"id":"e1246f8e.79201","type":"returnFailure","name":"return failure","xml":" <return status=\"failure\">\n\t<parameter name='error-code' value='2000'/>\n\t<parameter name='error-message' value='Invalid Request `$preload-vnf-topology-operation-input.request-information.request-action`'/>\n\n \n","comments":"","x":883.6534042358398,"y":783.0881509780884,"z":"2500da67.7593e6","wires":[]},{"id":"c51b9598.c5f25","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":912,"y":289.76768493652344,"z":"2500da67.7593e6","wires":[["ee8d2da6.a9587","9950aa2a.c6fbb","e6726c5.1ca5f1","64decaf7.b5ef04","e1a96601.00fff8","8c6d0f47.8edca","ddd51a1e.acd6b"]]},{"id":"8c6d0f47.8edca","type":"returnSuccess","name":"return success","xml":"<return status=\"success\">\n\t<parameter name=\"error-code\" value=\"200\" />","comments":"","x":1170.0000457763672,"y":526.1962547302246,"z":"2500da67.7593e6","wires":[]},{"id":"e1a96601.00fff8","type":"set","name":"set: order-status = PendingAssignment","xml":"<set>\n\t<parameter name=\"preload-data.oper-status.order-status\" value=\"PendingAssignment\"/>","comments":"","x":1245.0239715576172,"y":486.28368759155273,"z":"2500da67.7593e6","wires":[]},{"id":"ee8d2da6.a9587","type":"set","name":"Set final indicator to Y","xml":"<set>\n<parameter name=\"ack-final\" value=\"Y\"/>","comments":"","x":1190.9088668823242,"y":288.91858863830566,"z":"2500da67.7593e6","wires":[]},{"id":"e6726c5.1ca5f1","type":"get-resource","name":"get-resource: vnf-profile.vnf-type","xml":"<get-resource plugin=\"`$sql-resource-plugin`\" resource=\"vnf-profile\" key=\"SELECT * from VNF_PROFILE WHERE vnf_type = $preload-vnf-topology-operation-input.vnf-topology-information.vnf-topology-identifier.vnf-type\">\n","comments":"","outputs":1,"x":1223.520133972168,"y":368.3631076812744,"z":"2500da67.7593e6","wires":[["7db96b77.bfc044","b73e7ecf.53e96"]]},{"id":"aadb3af.3b1dcc8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name=\"error-code\" value=\"404\" />\n\t<parameter name=\"error-message\" value=\"preload vnf-type not found as valid vnf \" />","comments":"","x":1713.8533248901367,"y":367.5852756500244,"z":"2500da67.7593e6","wires":[]},{"id":"7db96b77.bfc044","type":"success","name":"not found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1500.5200729370117,"y":368.1408176422119,"z":"2500da67.7593e6","wires":[["aadb3af.3b1dcc8"]]},{"id":"9950aa2a.c6fbb","type":"set","name":"set : sql-resource-plugin","xml":"<set only-if-unset=\"true\">\n<parameter name=\"sql-resource-plugin\" value=\"org.openecomp.sdnc.sli.resource.sql.SqlResource\"/>","comments":"","x":1211.7321090698242,"y":327.79737281799316,"z":"2500da67.7593e6","wires":[]},{"id":"64decaf7.b5ef04","type":"set","name":"set: preload-data += input","xml":"<set>\n<parameter name=\"preload-data.\" value=\"preload-vnf-topology-operation-input.\" />\n","comments":"","x":1202.940658569336,"y":446.82912826538086,"z":"2500da67.7593e6","wires":[]},{"id":"b73e7ecf.53e96","type":"success","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1492.7977828979492,"y":409.68628883361816,"z":"2500da67.7593e6","wires":[["aadb3af.3b1dcc8"]]},{"id":"56297be.01b5984","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":912.5713119506836,"y":665.6248331069946,"z":"2500da67.7593e6","wires":[["f3e9e7c1.6f523","90fab1a1.b184","d7b12d3.82f4c5"]]},{"id":"f3e9e7c1.6f523","type":"get-resource","name":"get-resource: vnf-profile.vnf-type","xml":"<get-resource plugin=\"`$sql-resource-plugin`\" resource=\"generic-vnf\" key=\"SELECT * FROM VNF_PROFILE vnf-type = $preload-vnf-topology-operation-input.vnf-topology-information.vnf-topology-identifier.vnf-type\">\n","comments":"","outputs":1,"x":1181.5713119506836,"y":665.6248331069946,"z":"2500da67.7593e6","wires":[["cab895eb.9b1258"]]},{"id":"cab895eb.9b1258","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1448.5713119506836,"y":664.6248331069946,"z":"2500da67.7593e6","wires":[["f94b13c7.f036c"]]},{"id":"f94b13c7.f036c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name=\"error-code\" value=\"3000\" />\n\t<parameter name=\"error-message\" value=\"preload vnf-type cannot be deleted while vnf is in use\" />","comments":"","x":1662.5713119506836,"y":664.6248331069946,"z":"2500da67.7593e6","wires":[]},{"id":"4447ff82.0787b","type":"comment","name":"request-action = DeletePreloadVNFRequest, svc-action = delete","info":"","comments":"","x":728,"y":101.76768493652344,"z":"2500da67.7593e6","wires":[]},{"id":"ddd51a1e.acd6b","type":"set","name":"Delete Preload Data","xml":"<set>\n<parameter name=\"preload-data.\" value=\"\" />\n","comments":"","x":1185.7143020629883,"y":407.0000305175781,"z":"2500da67.7593e6","wires":[]}]
