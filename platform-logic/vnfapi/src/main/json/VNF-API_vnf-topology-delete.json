[{"id":"5aed418a.a1067","type":"service-logic","name":"VNF-API ${project.version}","module":"VNF-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='VNF-API' version='${project.version}'>","outputs":1,"x":344.33325958251953,"y":84.9999132156372,"z":"be581c50.2320c","wires":[["f7d747d1.fb47e8"]]},{"id":"95f3b09a.b4cdb","type":"dgstart","name":"DGSTART","outputs":1,"x":134.49993896484375,"y":84.83323860168457,"z":"be581c50.2320c","wires":[["5aed418a.a1067"]]},{"id":"95d30b96.89e9a8","type":"set","name":"set: order-status = Deleted","xml":"<set>\n\t<parameter name=\"service-data.oper-status.order-status\" value=\"Deleted\"/>","comments":"","x":1106.25,"y":607.5,"z":"be581c50.2320c","wires":[]},{"id":"f7d747d1.fb47e8","type":"method","name":"method vnf-topology-delete","xml":"<method rpc='vnf-topology-delete' mode='sync'>\n","comments":"","outputs":1,"x":261.4165802001953,"y":163.24990367889404,"z":"be581c50.2320c","wires":[["46fe6599.5727fc"]]},{"id":"e80bd8d6.1aeb28","type":"other","name":"false","xml":"<outcome value='false'>","comments":"","outputs":1,"x":717.9242248535156,"y":285.0453796386719,"z":"be581c50.2320c","wires":[["7a7f9914.9d89c8"]]},{"id":"7a7f9914.9d89c8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='Invalid order-status'/>","comments":"","x":870.2573547363281,"y":285.0454406738281,"z":"be581c50.2320c","wires":[]},{"id":"4fbe6c72.c80f34","type":"set","name":"set: last-action ","xml":"<set>\n\t<parameter name=\"service-data.oper-status.last-action\" value=\"`$service-data.request-information.request-action`\"/>","comments":"","x":473.5075225830078,"y":399.0455913543701,"z":"be581c50.2320c","wires":[]},{"id":"2a09acad.9ee194","type":"switchNode","name":"switch:vnf-id   config == input","xml":"<switch test=\"`$vnf-topology-operation-input.vnf-request-information.vnf-id == $service-data.vnf-id`\">","comments":"","outputs":1,"x":515.1437759399414,"y":239.0707893371582,"z":"be581c50.2320c","wires":[["cf49659.6472c98"]]},{"id":"cf49659.6472c98","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":716.5983352661133,"y":239.25261688232422,"z":"be581c50.2320c","wires":[["ad3115a7.f73698"]]},{"id":"ad3115a7.f73698","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vnf-id not found'/>","comments":"","x":880.1892547607422,"y":239.41171741485596,"z":"be581c50.2320c","wires":[]},{"id":"b03d2e94.e26fe","type":"set","name":"set: last-order-status = order-status","xml":"<set>\n\t<parameter name=\"service-data.oper-status.last-order-status\" value=\"`$service-data.oper-status.order-status`\"/>","comments":"","x":536.1438674926758,"y":345.48754501342773,"z":"be581c50.2320c","wires":[]},{"id":"8d72b0f0.9481b","type":"set","name":"Clear vnf topology","xml":"<set>\n\t<parameter name=\"service-data.\" value=\"\" /> \n","comments":"","x":1080.393928527832,"y":654.9874839782715,"z":"be581c50.2320c","wires":[]},{"id":"89bd4a9f.5ca3d8","type":"switchNode","name":"switch: order-status = Active","xml":"<switch test=\"`$service-data.oper-status.order-status == Active`\">","comments":"","outputs":1,"x":516.1071243286133,"y":285.3451805114746,"z":"be581c50.2320c","wires":[["e80bd8d6.1aeb28"]]},{"id":"802a88f4.5d12e8","type":"set","name":"Set final indicator to Y","xml":"<set>\n<parameter name=\"ack-final\" value=\"Y\"/>","comments":"","x":496.7143249511719,"y":821.440432548523,"z":"be581c50.2320c","wires":[]},{"id":"81952eeb.d32a8","type":"switchNode","name":"switch: request-sub-action","xml":"<switch test=\"`$vnf-topology-operation-input.request-information.request-sub-action`\">\n<!--\nleaf request-sub-action {\n\ttype enumeration {\n\t\tenum \"SUPP\";\n        enum \"CANCEL\";\n        enum \"RetainResource\";\n\t}\n}\n-->\n\n","comments":"","outputs":1,"x":510.49999237060547,"y":546.3332462310791,"z":"be581c50.2320c","wires":[["af97b8a3.1cd628","41be0ea9.403bc","9fc64203.c087e"]]},{"id":"af97b8a3.1cd628","type":"other","name":"RetainResource","xml":"<outcome value='RetainResource'>","comments":"","outputs":1,"x":761.7499961853027,"y":472.5832462310791,"z":"be581c50.2320c","wires":[["ada6fad6.b4b048"]]},{"id":"33a33c01.806d94","type":"set","name":"set: order-status = PendingDelete","xml":"<set>\n\t<parameter name=\"service-data.oper-status.order-status\" value=\"PendingDelete\"/>","comments":"","x":1226.7500038146973,"y":472.33324813842773,"z":"be581c50.2320c","wires":[]},{"id":"a730aeb.341b05","type":"save","name":"update AnAI - vf-module.orchestration-status","xml":"<update plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" \n\tresource=\"vf-module\" \n\t\tkey=\"vf-module.vf-module-id = $vnf-topology-operation-input.vnf-request-information.vnf-id \n\t\t\tAND generic-vnf.vnf-id = $vnf-topology-operation-input.vnf-request-information.generic-vnf-id\" \n\t\tlocal-only=\"false\" >\n\t<parameter name=\"orchestration-status\" value=\"pending-delete\" />","comments":"","outputs":1,"x":1255.5000038146973,"y":520.0832500457764,"z":"be581c50.2320c","wires":[["bfbe9204.f1aee"]]},{"id":"bfbe9204.f1aee","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1520.0238609313965,"y":520.0717525482178,"z":"be581c50.2320c","wires":[["b127ee0b.5f975"]]},{"id":"b127ee0b.5f975","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Encountered error while updating vf-module orchestration-status in AnAI with vnf-id = ' + $vnf-topology-operation-input.vnf-request-information.vnf-id + ' and generic-vnf-id = ' + $vnf-topology-operation-input.vnf-request-information.generic-vnf-id`\"/>","comments":"","x":1688.166790008545,"y":520.0718231201172,"z":"be581c50.2320c","wires":[]},{"id":"41be0ea9.403bc","type":"other","name":"null","xml":"<outcome value=''>","comments":"","outputs":1,"x":734.2499961853027,"y":607.5832500457764,"z":"be581c50.2320c","wires":[["4c42ddf3.0e8f44"]]},{"id":"46fe6599.5727fc","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":261.74993896484375,"y":239.08323860168457,"z":"be581c50.2320c","wires":[["2a09acad.9ee194","89bd4a9f.5ca3d8","81952eeb.d32a8","b03d2e94.e26fe","4fbe6c72.c80f34","802a88f4.5d12e8","d6431f0c.99dab"]]},{"id":"ada6fad6.b4b048","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":962.7500038146973,"y":472.83324813842773,"z":"be581c50.2320c","wires":[["33a33c01.806d94","a730aeb.341b05"]]},{"id":"4c42ddf3.0e8f44","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":891.7499923706055,"y":607.5832500457764,"z":"be581c50.2320c","wires":[["8d72b0f0.9481b"]]},{"id":"9fc64203.c087e","type":"other","name":"other","xml":"<outcome value='other'>","comments":"","outputs":1,"x":734.2499923706055,"y":657.5832386016846,"z":"be581c50.2320c","wires":[["4c42ddf3.0e8f44"]]},{"id":"d6431f0c.99dab","type":"set","name":"set: service-data = input","xml":"<set>\n\t<parameter name=\"service-data.\" value=\"vnf-topology-operation-input.\" />","comments":"","x":504.99996185302734,"y":766.0832500457764,"z":"be581c50.2320c","wires":[]}]