


[{"id":"b2b9aa36.90c458","type":"dgstart","name":"DGSTART","outputs":1,"x":147.38094329833984,"y":59.999999046325684,"z":"63798740.0bebb8","wires":[["3b7a89dc.6882f6"]]},{"id":"3b7a89dc.6882f6","type":"service-logic","name":"VNF-API 1.0.0","module":"VNF-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.att.com/sdnctl/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.att.com/sdnctl/svclogic ./svclogic.xsd' module='VNF-API' version='${project.version}'>","outputs":1,"x":314.65870666503906,"y":59.66666793823242,"z":"63798740.0bebb8","wires":[["80962807.697918"]]},{"id":"80962807.697918","type":"method","name":"vf-module-topology-operation","xml":"<method rpc='vf-module-topology-operation' mode='sync'>\n","comments":"","outputs":1,"x":237.88094329833984,"y":110.2222204208374,"z":"63798740.0bebb8","wires":[["a021878d.6bc908"]]},{"id":"e35b68e.76c7198","type":"other","name":"Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":665.9920959472656,"y":960.3332662582397,"z":"63798740.0bebb8","wires":[["7d148de2.daa994"]]},{"id":"7d148de2.daa994","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='svc-action not recognized'/>\n","comments":"","x":890.9920959472656,"y":960.3332662582397,"z":"63798740.0bebb8","wires":[]},{"id":"981a0559.178fd8","type":"other","name":"delete","xml":"<outcome value='delete'>","comments":"","outputs":1,"x":666.2420959472656,"y":916.5832681655884,"z":"63798740.0bebb8","wires":[["b4d8512d.b7644"]]},{"id":"b4d8512d.b7644","type":"call","name":"call: vf-module-topology-delete","xml":"<call module='VNF-API' rpc='vf-module-topology-delete' mode='sync' >","comments":"","outputs":1,"x":945.9921646118164,"y":916.5832691192627,"z":"63798740.0bebb8","wires":[[]]},{"id":"9c74b303.df115","type":"record","name":"record","xml":"<record plugin=\"com.att.sdnctl.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"vf-module-topology-operation\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-action`\"/>\n<parameter name=\"field4\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field5\" value=\"`$vf-module-topology-operation-input.request-information.source`\"/>\n<parameter name=\"field6\" value=\"`$vf-module-topology-operation-input.request-information.request-id`\"/>\n<parameter name=\"field7\" value=\"`$vf-module-topology-operation-input.request-information.request-action`\"/>\n<parameter name=\"field8\" value=\"`$vf-module-topology-operation-input.service-information.service-id`\"/>\n<parameter name=\"field9\" value=\"`$vf-module-topology-operation-input.service-information.service-type`\"/>\n<parameter name=\"field10\" value=\"`$vf-module-topology-operation-input.service-information.subscriber-name`\"/>\n<parameter name=\"field11\" value=\"`$vf-module-topology-operation-input.service-information.service-instance-id`\"/>\n<parameter name=\"field12\" value=\"`$vf-module-topology-operation-input.vf-module-topology-information.vf-module-id`\"/>\n<parameter name=\"field13\" value=\"`$vf-module-topology-operation-input.vf-module-topology-information.vf-module-model-id`\"/>\n<parameter name=\"field14\" value=\"`$vf-module-topology-operation-input.vf-module-topology-information.vf-module-name`\"/>\n<parameter name=\"field15\" value=\"`$vf-module-topology-operation-input.vf-module-topology-information.request-version`\"/>\n<parameter name=\"field16\" value=\"`$vf-module-topology-operation-input.vf-module-topology-information.vnf-instance-id`\"/>\n<parameter name=\"field17\" value=\"`$vf-module-topology-operation-input.vf-module-topology-information.vnf-model-id`\"/>\n<parameter name=\"field18\" value=\"`$vf-module-topology-operation-input.vf-module-topology-information.vnf-instance-name`\"/>\n<parameter name=\"field19\" value=\"`$vf-module-topology-operation-input.vf-module-topology-information.aic-cloud-region`\"/>\n<parameter name=\"field20\" value=\"`$vf-module-topology-operation-input.vf-module-topology-information.tenant`\"/>","comments":"","outputs":1,"x":420.0476379394531,"y":167.22222423553467,"z":"63798740.0bebb8","wires":[[]]},{"id":"f768fd5a.adb8a","type":"comment","name":"vf-module-topology-operation","info":"","comments":"","x":638.2698211669922,"y":101.44444370269775,"z":"63798740.0bebb8","wires":[]},{"id":"a021878d.6bc908","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":232.38095092773438,"y":167.00000476837158,"z":"63798740.0bebb8","wires":[["9c74b303.df115","bc617051.8373c","7d112cb1.d7edf4","4133dd42.c08bb4","293395b5.40c96a","44fbb825.f1f9d8","18c435d7.1141ea","bac1f2ae.3be1","6d26b2ee.e1dbcc"]]},{"id":"bc617051.8373c","type":"switchNode","name":"switch: INPUT vf-module-name","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vf-module-name`\">","comments":"","outputs":1,"x":494.04762268066406,"y":213.66664695739746,"z":"63798740.0bebb8","wires":[["80948d41.4e439","28867132.f8316e"]]},{"id":"80948d41.4e439","type":"outcome","name":"Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":708.0476226806641,"y":213.66664695739746,"z":"63798740.0bebb8","wires":[["b4b96e66.163f7"]]},{"id":"28867132.f8316e","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":707.0476226806641,"y":257.66664695739746,"z":"63798740.0bebb8","wires":[["40842fb6.6a48e"]]},{"id":"b4b96e66.163f7","type":"switchNode","name":"switch: PRELOAD vf-module-name","xml":"<switch test=\"`$vf-module-preload-data.vf-module-topology-information.vf-module-identifiers.vf-module-name`\">","comments":"","outputs":1,"x":938.0476226806641,"y":213.66664695739746,"z":"63798740.0bebb8","wires":[["f71a995b.156168","191fc631.94c04a"]]},{"id":"f71a995b.156168","type":"outcome","name":"Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":1173.047622680664,"y":213.66664695739746,"z":"63798740.0bebb8","wires":[["ede3c59c.0a6ad8"]]},{"id":"191fc631.94c04a","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1174.047622680664,"y":256.66664695739746,"z":"63798740.0bebb8","wires":[["6ba480c9.342ea"]]},{"id":"ede3c59c.0a6ad8","type":"switchNode","name":"switch: vf-module-name INPUT == PRELOAD","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vf-module-name == $vf-module-preload-data.vf-module-topology-information.vf-module-identifiers.vf-module-name`\">","comments":"","outputs":1,"x":1431.047607421875,"y":213.66664505004883,"z":"63798740.0bebb8","wires":[["2482f31f.63fecc"]]},{"id":"2482f31f.63fecc","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1686.380973815918,"y":214.3335475921631,"z":"63798740.0bebb8","wires":[["f44b3d7f.1ca9b"]]},{"id":"f44b3d7f.1ca9b","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='404'/>\n\t<parameter name='error-message' value='vf-module-name not found in vf-module-preload-data'/>","comments":"","x":1845.0475997924805,"y":213.66664695739746,"z":"63798740.0bebb8","wires":[]},{"id":"6ba480c9.342ea","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='No preload data found to match vf-module-name'/>","comments":"","x":1341.047622680664,"y":256.66664695739746,"z":"63798740.0bebb8","wires":[]},{"id":"40842fb6.6a48e","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vf-module-name is required'/>","comments":"","x":868.5476226806641,"y":257.91664695739746,"z":"63798740.0bebb8","wires":[]},{"id":"7d112cb1.d7edf4","type":"switchNode","name":"switch: INPUT vf-module-model-id","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vf-module-model-id`\">","comments":"","outputs":1,"x":500.26985931396484,"y":318.33331775665283,"z":"63798740.0bebb8","wires":[["474af7dd.015108","e5dce74.d4b4018"]]},{"id":"474af7dd.015108","type":"outcome","name":"Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":723.2698516845703,"y":318.33331775665283,"z":"63798740.0bebb8","wires":[["5540ad23.69af84"]]},{"id":"e5dce74.d4b4018","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":722.2698516845703,"y":360.33331775665283,"z":"63798740.0bebb8","wires":[["dddc6603.8e99c8"]]},{"id":"5540ad23.69af84","type":"switchNode","name":"switch: PRELOAD vf-module-model-id","xml":"<switch test=\"`$vf-module-preload-data.vf-module-topology-information.vf-module-identifiers.vf-module-model-id`\">","comments":"","outputs":1,"x":962.2698516845703,"y":318.33331775665283,"z":"63798740.0bebb8","wires":[["2864ae53.aa3a82","9183452.51198b8"]]},{"id":"2864ae53.aa3a82","type":"outcome","name":"Other","xml":"<outcome value='Other'>","comments":"","outputs":1,"x":1202.2698516845703,"y":318.33331775665283,"z":"63798740.0bebb8","wires":[["74e5fb42.a304e4"]]},{"id":"9183452.51198b8","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":1202.2698516845703,"y":359.33331775665283,"z":"63798740.0bebb8","wires":[["376fd68.672322a"]]},{"id":"dddc6603.8e99c8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vf-module-model-id is required'/>","comments":"","x":883.7698516845703,"y":360.58331775665283,"z":"63798740.0bebb8","wires":[]},{"id":"74e5fb42.a304e4","type":"switchNode","name":"switch: vf-module-model-id INPUT == PRELOAD","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vf-module-model-id == $vf-module-preload-data.vf-module-topology-information.vf-module-identifiers.vf-module-model-id`\">","comments":"","outputs":1,"x":1473.2698287963867,"y":318.33331775665283,"z":"63798740.0bebb8","wires":[["f518b05.e9bfe5"]]},{"id":"376fd68.672322a","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='No preload data found to match vf-module-model-id from input'/>","comments":"","x":1362.2698287963867,"y":359.33331775665283,"z":"63798740.0bebb8","wires":[]},{"id":"f518b05.e9bfe5","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1743.2698287963867,"y":318.66681385040283,"z":"63798740.0bebb8","wires":[["64c53b14.74a6a4"]]},{"id":"64c53b14.74a6a4","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='404'/>\n\t<parameter name='error-message' value='vf-module-model-id not found in vf-module-preload-data'/>","comments":"","x":1901.9364547729492,"y":317.9999132156372,"z":"63798740.0bebb8","wires":[]},{"id":"4133dd42.c08bb4","type":"switchNode","name":"switch: INPUT vf-module-id","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vf-module-id`\">","comments":"","outputs":1,"x":478.4485168457031,"y":410.2976427078247,"z":"63798740.0bebb8","wires":[["24582128.95217e","a8303f6.63a26c"]]},{"id":"a8303f6.63a26c","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":700.448486328125,"y":450.44048023223877,"z":"63798740.0bebb8","wires":[["636f5b70.b91114"]]},{"id":"24582128.95217e","type":"outcome","name":"0","xml":"<outcome value='0'>","comments":"","outputs":1,"x":700.5914154052734,"y":409.86907863616943,"z":"63798740.0bebb8","wires":[["636f5b70.b91114"]]},{"id":"636f5b70.b91114","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vf-module-id cannot be NULL or 0'/>","comments":"","x":875.3056945800781,"y":450.7262010574341,"z":"63798740.0bebb8","wires":[]},{"id":"293395b5.40c96a","type":"switchNode","name":"switch: INPUT vnf-instance-id","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vnf-instance-id`\">","comments":"","outputs":1,"x":484.3532485961914,"y":503.9444637298584,"z":"63798740.0bebb8","wires":[["9950854d.189d38","8d68bc49.6b2e4"]]},{"id":"8d68bc49.6b2e4","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":717.3532180786133,"y":542.0873012542725,"z":"63798740.0bebb8","wires":[["65b058d.3449fa8"]]},{"id":"9950854d.189d38","type":"outcome","name":"0","xml":"<outcome value='0'>","comments":"","outputs":1,"x":716.4961471557617,"y":504.5158996582031,"z":"63798740.0bebb8","wires":[["65b058d.3449fa8"]]},{"id":"65b058d.3449fa8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vnf-instance-id cannot be NULL or 0'/>","comments":"","x":871.2104263305664,"y":542.3730220794678,"z":"63798740.0bebb8","wires":[]},{"id":"44fbb825.f1f9d8","type":"switchNode","name":"switch: INPUT vnf-instance-name","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vnf-instance-name`\">","comments":"","outputs":1,"x":497.6032371520996,"y":584.9444646835327,"z":"63798740.0bebb8","wires":[["c5d65cf1.fcd86"]]},{"id":"c5d65cf1.fcd86","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":747.6032066345215,"y":585.0873022079468,"z":"63798740.0bebb8","wires":[["425cdf86.d8726"]]},{"id":"425cdf86.d8726","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vnf-instance-name cannot be NULL'/>","comments":"","x":901.4604148864746,"y":585.3730230331421,"z":"63798740.0bebb8","wires":[]},{"id":"18c435d7.1141ea","type":"switchNode","name":"switch: INPUT vnf-model-id","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.vnf-model-id`\">","comments":"","outputs":1,"x":479.353271484375,"y":632.1944665908813,"z":"63798740.0bebb8","wires":[["96ed3988.9aab78"]]},{"id":"96ed3988.9aab78","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":729.3532409667969,"y":632.3373041152954,"z":"63798740.0bebb8","wires":[["368ecf78.0f8b6"]]},{"id":"368ecf78.0f8b6","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='vnf-model-id cannot be NULL'/>","comments":"","x":883.21044921875,"y":632.6230249404907,"z":"63798740.0bebb8","wires":[]},{"id":"bac1f2ae.3be1","type":"switchNode","name":"switch: INPUT aic-cloud-region","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-information.aic-cloud-region`\">","comments":"","outputs":1,"x":489.6309509277344,"y":676.5000085830688,"z":"63798740.0bebb8","wires":[["a479aebf.dc5d"]]},{"id":"a479aebf.dc5d","type":"outcome","name":"NULL","xml":"<outcome value=''>","outputs":1,"x":707.6309204101562,"y":676.6428461074829,"z":"63798740.0bebb8","wires":[["988e892c.d475a8"]]},{"id":"988e892c.d475a8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='aic-cloud-region cannot be NULL'/>","comments":"","x":861.4881286621094,"y":676.9285669326782,"z":"63798740.0bebb8","wires":[]},{"id":"6d26b2ee.e1dbcc","type":"switchNode","name":"switch: svc-action","xml":"<switch test=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-action`\">\n<!--\nleaf svc-action { \n\ttype enumeration { \n\t\tenum \"reserve\";\n\t\tenum \"assign\";\n\t\tenum \"activate\";  // equal to commit\n\t\tenum \"delete\";\t  // equal to commit\n\t\tenum \"changeassign\";\n\t\tenum \"changedelete\";\n\t\tenum \"rollback\";\n\t}\n}\n-->\n\n","comments":"","outputs":1,"x":447.9364929199219,"y":742.3332624435425,"z":"63798740.0bebb8","wires":[["e35b68e.76c7198","93ac097f.c6f298","1922a4aa.01150b","2f8e310d.ec431e","981a0559.178fd8","33970441.68697c"]]},{"id":"93ac097f.c6f298","type":"other","name":"assign","xml":"<outcome value='assign'>","comments":"","outputs":1,"x":665.4920501708984,"y":742.3332681655884,"z":"63798740.0bebb8","wires":[["8c570735.beda08"]]},{"id":"1922a4aa.01150b","type":"other","name":"activate","xml":"<outcome value='activate'>","comments":"","outputs":1,"x":668.4920654296875,"y":831.5832567214966,"z":"63798740.0bebb8","wires":[["8daf28f.5d017d8"]]},{"id":"2f8e310d.ec431e","type":"other","name":"rollback","xml":"<outcome value='rollback'>","comments":"","outputs":1,"x":668.2420654296875,"y":873.8332576751709,"z":"63798740.0bebb8","wires":[["da48c7ad.8819b8"]]},{"id":"33970441.68697c","type":"other","name":"changeassign","xml":"<outcome value='changeassign'>","comments":"","outputs":1,"x":686.9920654296875,"y":787.8332586288452,"z":"63798740.0bebb8","wires":[["355d5e58.476532"]]},{"id":"8c570735.beda08","type":"call","name":"call: vf-module-topology-assign","xml":"<call module='VNF-API' rpc='vf-module-topology-assign' mode='sync' >","comments":"","outputs":1,"x":945.7420501708984,"y":742.3332662582397,"z":"63798740.0bebb8","wires":[[]]},{"id":"355d5e58.476532","type":"call","name":"call: vf-module-topology-changeassign","xml":"<call module='VNF-API' rpc='vf-module-topology-changeassign' mode='sync' >","comments":"","outputs":1,"x":968.9921722412109,"y":787.3332662582397,"z":"63798740.0bebb8","wires":[[]]},{"id":"da48c7ad.8819b8","type":"call","name":"call: vf-module-topology-rollback","xml":"<call module='VNF-API' rpc='vf-module-topology-rollback' mode='sync' >","comments":"","outputs":1,"x":950.7421722412109,"y":873.8332681655884,"z":"63798740.0bebb8","wires":[[]]},{"id":"8daf28f.5d017d8","type":"call","name":"call: vf-module-topology-activate","xml":"<call module='VNF-API' rpc='vf-module-topology-activate' mode='sync' >","comments":"","outputs":1,"x":950.2421646118164,"y":831.8332619667053,"z":"63798740.0bebb8","wires":[[]]}]
