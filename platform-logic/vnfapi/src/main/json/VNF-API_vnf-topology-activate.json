[{"id":"f9e994c1.abdc18","type":"comment","name":"VNF-TOPOLOGY-ACTIVATE","info":"","comments":"","x":777.5,"y":123.75000000000001,"z":"cc52e335.30071","wires":[]},{"id":"16d1ce02.919bd2","type":"service-logic","name":"VNF-API ${project.version}","module":"VNF-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='VNF-API' version='${project.version}'>","outputs":1,"x":410.27777099609375,"y":124.36111640930176,"z":"cc52e335.30071","wires":[["e76cc081.4cdfa"]]},{"id":"346ba8d9.95e098","type":"dgstart","name":"DGSTART","outputs":1,"x":205.1111297607422,"y":124.19444656372072,"z":"cc52e335.30071","wires":[["16d1ce02.919bd2"]]},{"id":"ad5812f1.83994","type":"comment","name":"request-action = VNFActivateRequest, svc-action = activate","info":"","comments":"","x":1146.7222290039062,"y":126.02778816223145,"z":"cc52e335.30071","wires":[]},{"id":"c9f10151.418e3","type":"set","name":"set: order-status = Active","xml":"<set>\n\t<parameter name=\"service-data.oper-status.order-status\" value=\"Active\"/>","comments":"","x":521.25,"y":748.75,"z":"cc52e335.30071","wires":[]},{"id":"6d5115c2.ebaffc","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":274.4999542236328,"y":253.74999523162842,"z":"cc52e335.30071","wires":[["c9f10151.418e3","68a88dcc.d26344","8e417b16.4e9478","3ff91ec7.56c492","a29ca952.2dda88","9a375431.e27e98","30f895ea.8fe28a","c7c00aa5.f55328","8fd3c9fb.db3798","4d31cb8c.a41a14"]]},{"id":"e76cc081.4cdfa","type":"method","name":"method vnf-topology-activate","xml":"<method rpc='vnf-topology-activate' mode='sync'>\n","comments":"","outputs":1,"x":317.16664123535156,"y":187.91666507720947,"z":"cc52e335.30071","wires":[["6d5115c2.ebaffc"]]},{"id":"68a88dcc.d26344","type":"switchNode","name":"switch: order-status","xml":"<switch test=\"`$service-data.oper-status.order-status`\">\n\n<!--\nleaf order-status {\n\ttype enumeration {\n\t\tenum \"Active\";\n\t\tenum \"PendingAssignment\";\n\t\tenum \"PendingCreate\";\n\t\tenum \"PendingUpdate\";\n\t\tenum \"Deleted\";\n\t}\n}\n-->","comments":"","outputs":1,"x":508.08341217041016,"y":426.3332185745239,"z":"cc52e335.30071","wires":[["67f309d9.40ec78","62526fcb.b4c87","8082a520.990808","6cee3803.e782b8"]]},{"id":"67f309d9.40ec78","type":"other","name":"PendingCreate","xml":"<outcome value='PendingCreate'>","comments":"","outputs":1,"x":746.1667213439941,"y":361.66650104522705,"z":"cc52e335.30071","wires":[["e032be7c.9cb96"]]},{"id":"4bbe6863.97f748","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value='Invalid order-status'/>","comments":"","x":894.4998626708984,"y":509.9165620803833,"z":"cc52e335.30071","wires":[]},{"id":"a29ca952.2dda88","type":"switchNode","name":"switch:vnf-id   config == input","xml":"<switch test=\"`$vnf-topology-operation-input.vnf-request-information.vnf-id == $service-data.vnf-id`\">","comments":"","outputs":1,"x":535.5226898193359,"y":307.04543590545654,"z":"cc52e335.30071","wires":[["7e114a2f.dcd8c4"]]},{"id":"7e114a2f.dcd8c4","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":754.977165222168,"y":307.227255821228,"z":"cc52e335.30071","wires":[["b451be31.a114e"]]},{"id":"b451be31.a114e","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='400'/>\n\t<parameter name='error-message' value=\"`'vnf-id = ' + $vnf-topology-operation-input.vnf-request-information.vnf-id + ' not found in config tree'`\"/>","comments":"","x":933.0681076049805,"y":307.1363592147827,"z":"cc52e335.30071","wires":[]},{"id":"8e417b16.4e9478","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n\t<parameter name=\"error-code\" value=\"200\" />","comments":"","x":491.6111145019531,"y":951.9166889190674,"z":"cc52e335.30071","wires":[]},{"id":"3ff91ec7.56c492","type":"set","name":"set: last-order-status = order-status","xml":"<set>\n\t<parameter name=\"service-data.oper-status.last-order-status\" value=\"`$service-data.oper-status.order-status`\"/>","comments":"","x":551.8636779785156,"y":693.6137065887451,"z":"cc52e335.30071","wires":[]},{"id":"9a375431.e27e98","type":"set","name":"set: service-data = input","xml":"<set>\n\t<parameter name=\"service-data.\" value=\"vnf-topology-operation-input.\" />","comments":"","x":519.5,"y":855.0556030273438,"z":"cc52e335.30071","wires":[]},{"id":"30f895ea.8fe28a","type":"set","name":"set: last-action ","xml":"<set>\n\t<parameter name=\"service-data.oper-status.last-action\" value=\"`$service-data.request-information.request-action`\"/>","comments":"","x":490.7499694824219,"y":638.3056030273438,"z":"cc52e335.30071","wires":[]},{"id":"3a9616ba.c797ea","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":847.912712097168,"y":802.5441055297852,"z":"cc52e335.30071","wires":[["c5123583.125098"]]},{"id":"c5123583.125098","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='error-code' value='500'/>\n\t<parameter name='error-message' value=\"`'Encountered error while updating vf-module orchestration-status in AnAI with vnf-id = ' + $vnf-topology-operation-input.vnf-request-information.vnf-id + ' and generic-vnf-id = ' + $vnf-topology-operation-input.vnf-request-information.generic-vnf-id`\"/>","comments":"","x":1016.0556411743164,"y":802.5441761016846,"z":"cc52e335.30071","wires":[]},{"id":"4d31cb8c.a41a14","type":"set","name":"Set final indicator to Y","xml":"<set>\n<parameter name=\"ack-final\" value=\"Y\"/>","comments":"","x":513.8174438476562,"y":903.7698383331299,"z":"cc52e335.30071","wires":[]},{"id":"8fd3c9fb.db3798","type":"save","name":"update AnAI - vf-module.orchestration-status","xml":"<update plugin=\"org.openecomp.sdnc.sli.aai.AAIService\" \n\tresource=\"vf-module\" \n\t\tkey=\"vf-module.vf-module-id = $vnf-topology-operation-input.vnf-request-information.vnf-id \n\t\t\tAND generic-vnf.vnf-id = $vnf-topology-operation-input.vnf-request-information.generic-vnf-id\" \n\t\tlocal-only=\"false\" >\n\t<parameter name=\"orchestration-status\" value=\"active\" />","comments":"","outputs":1,"x":583.3888549804688,"y":802.5556030273438,"z":"cc52e335.30071","wires":[["3a9616ba.c797ea"]]},{"id":"62526fcb.b4c87","type":"other","name":"PendingDelete","xml":"<outcome value='PendingDelete'>","comments":"","outputs":1,"x":744.6031799316406,"y":409.2698335647583,"z":"cc52e335.30071","wires":[["f0056f66.3565e"]]},{"id":"8082a520.990808","type":"other","name":"PendingUpdate","xml":"<outcome value='PendingUpdate'>","comments":"","outputs":1,"x":747.6031799316406,"y":456.7698345184326,"z":"cc52e335.30071","wires":[["5721297e.6ac318"]]},{"id":"e032be7c.9cb96","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":928.3531246185303,"y":362.0198335647583,"z":"cc52e335.30071","wires":[[]]},{"id":"f0056f66.3565e","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":929.6031112670898,"y":408.7698278427124,"z":"cc52e335.30071","wires":[[]]},{"id":"5721297e.6ac318","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":932.1031112670898,"y":457.0198278427124,"z":"cc52e335.30071","wires":[[]]},{"id":"6cee3803.e782b8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":723.3531188964844,"y":509.76983547210693,"z":"cc52e335.30071","wires":[["4bbe6863.97f748"]]},{"id":"c7c00aa5.f55328","type":"switchNode","name":"switch: request-sub-action","xml":"<switch test=\"`$service-data.request-information.request-sub-action`\">","comments":"","outputs":1,"x":527.1031265258789,"y":573.2698354721069,"z":"cc52e335.30071","wires":[["ad87d15b.bec2b"]]},{"id":"ad87d15b.bec2b","type":"other","name":"RetainResource","xml":"<outcome value='RetainResource'>","comments":"","outputs":1,"x":758.3531265258789,"y":573.5198354721069,"z":"cc52e335.30071","wires":[["48aed53d.e5beac"]]},{"id":"48aed53d.e5beac","type":"set","name":"unset: request-sub-action","xml":"<set>\n\t<parameter name=\"service-data.request-information.request-sub-action\" value=\"\"/>","comments":"","x":983.6031265258789,"y":573.7698354721069,"z":"cc52e335.30071","wires":[]}]