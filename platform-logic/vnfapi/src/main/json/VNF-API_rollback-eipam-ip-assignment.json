[{"id":"9ea9c32a.30ea1","type":"dgstart","name":"DGSTART","outputs":1,"x":160,"y":84.99997138977051,"z":"44918074.a4e7e","wires":[["709c2a0e.902744"]]},{"id":"5044bd3.c8eb844","type":"method","name":"method rollback-eipam-ip-assignment","xml":"<method rpc='rollback-eipam-ip-assignment' mode='sync'>\n","comments":"","outputs":1,"x":327.49998474121094,"y":245.93648719787598,"z":"44918074.a4e7e","wires":[["d1fba7ac.088ac8"]]},{"id":"709c2a0e.902744","type":"service-logic","name":"VNF-API ${project.version}","module":"VNF-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.openecomp.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.openecomp.org/sdnc/svclogic ./svclogic.xsd' module='VNF-API' version='${project.version}'>","outputs":1,"x":261.8968048095703,"y":158.6349058151245,"z":"44918074.a4e7e","wires":[["5044bd3.c8eb844"]]},{"id":"44e0a5da.a1296c","type":"update","name":"update EIPAM_IP_ASSIGNMENTS to PENDING_DELETE...","xml":"<update plugin=\"org.openecomp.sdnc.sli.resource.sql.SqlResource\" resource=\"SQL\"\n\tkey=\"UPDATE EIPAM_IP_ASSIGNMENTS set status = $tmp.status \n\t\tWHERE info = $vnf-topology-operation-input.vnf-request-information.vnf-id\" >","comments":"","outputs":1,"x":1351.0476188659668,"y":429.28565883636475,"z":"44918074.a4e7e","wires":[["c75801fb.cb7a2"]]},{"id":"4f4a1ad.ec3e4e4","type":"set","name":"set status variable","xml":"<set>\n<parameter name='tmp.status' \n\tvalue=\"`'PENDING_DELETE_' + $vnf-topology-operation-input.vnf-request-information.vnf-id`\" />\n<parameter name='service-data.service-information.service-type' \n\tvalue='NOT_APPLICABLE' />\n\t\n","comments":"","x":1221.0475807189941,"y":382.6190309524536,"z":"44918074.a4e7e","wires":[]},{"id":"c75801fb.cb7a2","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1657.0475273132324,"y":428.61895847320557,"z":"44918074.a4e7e","wires":[["17e34367.3383cd"]]},{"id":"17e34367.3383cd","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating EIPAM_IP_ASSIGNMENTS table on rollback.\" />\n","comments":"","x":1816.0475540161133,"y":428.4286937713623,"z":"44918074.a4e7e","wires":[]},{"id":"28ef2faf.3c81","type":"execute","name":"execute EIPAM unassign IP addresses","xml":"<execute plugin=\"com.att.sdnctl.sli.plugin.eipam.EIPAMPlugin\" method=\"unassignIPAddress\">\n<parameter name=\"deleteEIPAM_status\" value=\"`$tmp.status`\" />\n","comments":"","outputs":1,"x":1286.0475883483887,"y":474.2857027053833,"z":"44918074.a4e7e","wires":[["289dc670.7fd64a"]]},{"id":"289dc670.7fd64a","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1522.7142143249512,"y":474.2856454849243,"z":"44918074.a4e7e","wires":[["4c004691.dd32f8"]]},{"id":"4c004691.dd32f8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error in EIPAM unassign IP address on rollback.\" />\n","comments":"","x":1712.714241027832,"y":474.09538078308105,"z":"44918074.a4e7e","wires":[]},{"id":"314b77dd.accf08","type":"comment","name":"rollback-eipam-ip-assignment","info":"","comments":"","x":684.0476837158203,"y":95.71474075317383,"z":"44918074.a4e7e","wires":[]},{"id":"d1fba7ac.088ac8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":299.8571472167969,"y":335.9049015045166,"z":"44918074.a4e7e","wires":[["fb700a93.eadf78"]]},{"id":"fb700a93.eadf78","type":"update","name":"get-resource EIPAM_IP_ASSIGNMENTS","xml":"<get-resource plugin='org.openecomp.sdnc.sli.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from EIPAM_IP_ASSIGNMENTS \n  WHERE info = $vnf-topology-operation-input.vnf-request-information.vnf-id'>","comments":"","outputs":1,"x":576.0000457763672,"y":336.2856750488281,"z":"44918074.a4e7e","wires":[["e8dc4087.e12bc","3ec467e.8a70698"]]},{"id":"e8dc4087.e12bc","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":837.5714836120605,"y":335.8571135997772,"z":"44918074.a4e7e","wires":[["f672881a.38a3d8"]]},{"id":"f672881a.38a3d8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":980.7142922537669,"y":335.2856913975306,"z":"44918074.a4e7e","wires":[[]]},{"id":"3ec467e.8a70698","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":834.2856292724609,"y":383.57142639160156,"z":"44918074.a4e7e","wires":[["cf23e47f.bf9488"]]},{"id":"cf23e47f.bf9488","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1001.5714073181152,"y":382.9999599456787,"z":"44918074.a4e7e","wires":[["4f4a1ad.ec3e4e4","44e0a5da.a1296c","28ef2faf.3c81"]]}]