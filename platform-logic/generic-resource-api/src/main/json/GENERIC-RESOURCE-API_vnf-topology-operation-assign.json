[
    {
        "id": "7f85b319.ec8264",
        "name": "DGSTART",
        "outputs": 1,
        "type": "dgstart",
        "wires": [
            [
                "90051ccf.47dd18"
            ]
        ],
        "x": 158,
        "y": 108,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "90051ccf.47dd18",
        "module": "GENERIC-RESOURCE-API",
        "name": "GENERIC-RESOURCE-API 1.3.2-SNAPSHOT-20180531",
        "outputs": 1,
        "type": "service-logic",
        "version": "${project.version}",
        "wires": [
            [
                "62c9c96e.2f8908"
            ]
        ],
        "x": 271.61902618408203,
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "y": 148.2381134033203,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "62c9c96e.2f8908",
        "name": "method vnf-topology-operation-assign",
        "outputs": 1,
        "type": "method",
        "wires": [
            [
                "8c2093db.c56518"
            ]
        ],
        "x": 249.42862701416016,
        "xml": "<method rpc='vnf-topology-operation-assign' mode='sync'>\n",
        "y": 188,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "5c8563c8.abc554",
        "info": "",
        "name": "vnf-topology-operation-assign",
        "type": "comment",
        "wires": [],
        "x": 552.344856262207,
        "y": 55.58634376525879,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "3ee765f3.a92b8a",
        "name": "switch request-action",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "7d474a32.9007b4",
                "46a9e819.26787"
            ]
        ],
        "x": 559.8571395874023,
        "xml": "<switch test='`$vnf-topology-operation-input.request-information.request-action`'>\n",
        "y": 385.19043922424316,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "7d474a32.9007b4",
        "name": "CreateVnfInstance",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "1dd86dc0.120d9a"
            ]
        ],
        "x": 813.5714340209961,
        "xml": "<outcome value='CreateVnfInstance'>\n",
        "y": 362.3333206176758,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "46a9e819.26787",
        "name": "other",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "cb51940c.60aca8"
            ]
        ],
        "x": 775.5713996887207,
        "xml": "<outcome value='Other'>\n",
        "y": 408.0476484298706,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "false",
        "comments": "",
        "id": "1dd86dc0.120d9a",
        "name": "block",
        "outputs": 1,
        "type": "block",
        "wires": [
            []
        ],
        "x": 998.4285621643066,
        "xml": "<block>\n",
        "y": 362.3333501815796,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "cb51940c.60aca8",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1015.5714073181152,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'assign' then request-action must be 'CreateVnfInstance'\" />\n",
        "y": 408.0476064682007,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "true",
        "id": "8c2093db.c56518",
        "name": "block : atomic",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "3ee765f3.a92b8a",
                "d60893e6.15d0e8",
                "fb8a3580.e4647",
                "aac10be0.39a0e8",
                "b403c1ec.e059b",
                "b572efaa.cba408",
                "8e7983f7.0b8ac8",
                "95a9e356.edb75",
                "c85d4198.45c628",
                "26c17497.86b44c",
                "1a64389.04fb547",
                "2217154e.6141c2",
                "deeeb827.37f63",
                "c4c1c921.76e2b8",
                "1da784bd.1a325b",
                "6ce3245c.227ed4",
                "97e88fe.9dab2f",
                "84324533.95146",
                "fe738685.6c7d7",
                "2ab7bc1f.b085b4",
                "2dbfa8ac.567be8",
                "c33b5d51.3d59e",
                "f8b8a722.fd6508",
                "f03f1068.5af0c",
                "5e785184.8c4128",
                "3a4f6bb1.560164",
                "9bd6668b.dfc92",
                "391ed085.26b75",
                "2e7ae530.0e2cea",
                "611f691d.f4b31",
                "c510e207.134d3"
            ]
        ],
        "x": 188.11905670166016,
        "xml": "<block atomic=\"true\">",
        "y": 1719.7857055664062,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "d60893e6.15d0e8",
        "name": "get-resource VF_MODEL",
        "outputs": 1,
        "type": "get-resource",
        "wires": [
            [
                "55ac2b52.c147bc",
                "37dc7224.b3292e"
            ]
        ],
        "x": 572.1904449462891,
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODEL WHERE customization_uuid = $vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid'\n  pfx='db.vf-model'>\n\n",
        "y": 476.333309173584,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "3a32be2b.d9bc92",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1013.6189231872559,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No model found for VNF customization UUID ' + $vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid`\" />\n",
        "y": 499.7617950439453,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "55ac2b52.c147bc",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "48eedae7.45629c"
            ]
        ],
        "x": 772.9761428833008,
        "xml": "<outcome value='failure'>\n",
        "y": 456.7141466140747,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "37dc7224.b3292e",
        "name": "not-found",
        "outputs": 1,
        "type": "not-found",
        "wires": [
            [
                "3a32be2b.d9bc92"
            ]
        ],
        "x": 781.5475730895996,
        "xml": "<outcome value='not-found'>\n",
        "y": 500.9998598098755,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "48eedae7.45629c",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1012.9761238098145,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODEL table\" />\n",
        "y": 454.85705375671387,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "fb8a3580.e4647",
        "name": "switch service-data.vnfs.vnf_length",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "465f36d2.0e073",
                "2ecc5899.269788"
            ]
        ],
        "x": 602.2857131958008,
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "y": 666.5714282989502,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "465f36d2.0e073",
        "name": "NULL",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "ba18a24.ad916e"
            ]
        ],
        "x": 828.0000419616699,
        "xml": "<outcome value=''>\n",
        "y": 633.7142162322998,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "ba18a24.ad916e",
        "name": "set vnf-index=0",
        "type": "set",
        "wires": [],
        "x": 992.2857627868652,
        "xml": "<set>\n<parameter name='vnf-index' value='0' />\n",
        "y": 632.7142944335938,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "2ecc5899.269788",
        "name": "other",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "4ebd83c7.528a64"
            ]
        ],
        "x": 829.4286041259766,
        "xml": "<outcome value='Other'>\n",
        "y": 698.0000343322754,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "7048a1cb.adf078",
        "name": "set vnf-index = vnf_length",
        "type": "set",
        "wires": [],
        "x": 1168.285758972168,
        "xml": "<set>\n<parameter name='vnf-index' value='`$service-data.vnfs.vnf_length`' />\n",
        "y": 676.285722732544,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "d5aeee8c.b79908",
        "name": "for each existing VNF",
        "outputs": 1,
        "type": "for",
        "wires": [
            [
                "ce4d4a26.2f4908"
            ]
        ],
        "x": 1153.7142715454102,
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "y": 722.2856616973877,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "false",
        "comments": "",
        "id": "4ebd83c7.528a64",
        "name": "block",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "7048a1cb.adf078",
                "d5aeee8c.b79908"
            ]
        ],
        "x": 965.1428642272949,
        "xml": "<block>\n",
        "y": 698,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "ce4d4a26.2f4908",
        "name": "switch vnf-information.vnf-id == service-data.vnfs.vnf[].vnf-id",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "7bb84912.63e62"
            ]
        ],
        "x": 1508.0000381469727,
        "xml": "<switch test='`$vnf-topology-operation-input.vnf-information.vnf-id == $service-data.vnfs.vnf[$idx].vnf-id`'>\n",
        "y": 721.857141494751,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "7bb84912.63e62",
        "name": "true",
        "outputs": 1,
        "type": "outcomeTrue",
        "wires": [
            [
                "8287fea2.8f264"
            ]
        ],
        "x": 1802.2857475280762,
        "xml": "<outcome value='true'>\n",
        "y": 721.4286136627197,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "8287fea2.8f264",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1950.8571548461914,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF id ' + $service-data.vnfs.vnf[$idx].vnf-id\n      + ' already exists, and has order status ' + $service-data.vnfs.vnf[$idx].vnf-data.vnf-level-oper-status.order-status`\" />\n",
        "y": 721.4285736083984,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "7bf5b528.4f469c",
        "info": "",
        "name": "make sure this VNF doesn't exist already",
        "type": "comment",
        "wires": [],
        "x": 1495.1427688598633,
        "y": 679.4285717010498,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "aac10be0.39a0e8",
        "name": "set vnf-topology data",
        "type": "set",
        "wires": [],
        "x": 557.9999694824219,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-id'\n value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-type'\n value='`$vnf-topology-operation-input.vnf-information.vnf-type`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.nf-type'\n value='`$db.vf-model.nf-type`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.nf-role'\n value='`$db.vf-model.nf-role`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.nf-function'\n value='`$db.vf-model.nf-function`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.nf-code'\n value='`$db.vf-model.nf-code`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.tenant'\n value='`$vnf-topology-operation-input.vnf-request-input.tenant`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.aic-cloud-region'\n value='`$vnf-topology-operation-input.vnf-request-input.aic-cloud-region`' />\n \n",
        "y": 828.238115310669,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "b403c1ec.e059b",
        "name": "switch input vnf-name",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "98b70d2d.7445c8",
                "ff9bcb42.eb5f1"
            ]
        ],
        "x": 564.4285507202148,
        "xml": "<switch test='`$vnf-topology-operation-input.vnf-request-input.vnf-name`'>\n",
        "y": 1070.8571615219116,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "98b70d2d.7445c8",
        "name": "NULL",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "5ce76bf0.0fe7fc"
            ]
        ],
        "x": 832.6427726745605,
        "xml": "<outcome value=''>",
        "y": 993.8333864212036,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "dddcb6fb.6fadd",
        "name": "switch ecomp-generated-naming",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "a0e8eebb.f2bf6",
                "fcddb1f1.15f2c8",
                "fb5bcd7b.93abb8"
            ]
        ],
        "x": 1249.071662902832,
        "xml": "<switch test='`$db.vf-model.ecomp-generated-naming`'>\n",
        "y": 900.5002059936523,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "true",
        "id": "5ce76bf0.0fe7fc",
        "name": "block : atomic",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "5795f411.5a64bc",
                "9b41a0f.e8b05e",
                "dddcb6fb.6fadd"
            ]
        ],
        "x": 978.3572692871094,
        "xml": "<block atomic=\"true\">",
        "y": 993.833498954773,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "fcddb1f1.15f2c8",
        "name": "N",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "9a465697.6d89a"
            ]
        ],
        "x": 1498.357322692871,
        "xml": "<outcome value='N'>",
        "y": 902.404914855957,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "9a465697.6d89a",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1652.64310836792,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"No vnf-name was received but ecomp-generated-naming is not Y\" />\n",
        "y": 920.9763593673706,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "a0e8eebb.f2bf6",
        "name": "Y",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "b8327ea6.6151"
            ]
        ],
        "x": 1498.3572883605957,
        "xml": "<outcome value='Y'>",
        "y": 858.1192359924316,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "fb5bcd7b.93abb8",
        "name": "other",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "9a465697.6d89a"
            ]
        ],
        "x": 1498.357250213623,
        "xml": "<outcome value='Other'>\n",
        "y": 948.119234085083,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "false",
        "comments": "",
        "id": "b8327ea6.6151",
        "name": "block",
        "outputs": 1,
        "type": "block",
        "wires": [
            []
        ],
        "x": 1635.5002326965332,
        "xml": "<block>\n",
        "y": 858.1192359924316,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "ff9bcb42.eb5f1",
        "name": "other",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "1614942.5f3dcec"
            ]
        ],
        "x": 835.2144546508789,
        "xml": "<outcome value='Other'>\n",
        "y": 1140.119125366211,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "f88d9a18.d869f8",
        "name": "set tmp.vnf-name",
        "type": "set",
        "wires": [],
        "x": 1794.0715306599936,
        "xml": "<set>\n<parameter name='tmp.vnf-name' value=\"`$vnf-topology-operation-input.vnf-request-input.vnf-name`\" />\n",
        "y": 1207.5476417541504,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "5795f411.5a64bc",
        "name": "call GENERIC-RESOURCE-API:generate-unique-name",
        "outputs": 1,
        "type": "call",
        "wires": [
            [
                "51165cf7.f6843c",
                "f172e525.aff23"
            ]
        ],
        "x": 1317.4763259887695,
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='generate-unique-name' mode='sync' >\n",
        "y": 1066.8333959579468,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "51165cf7.f6843c",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "682b96e6.6b632"
            ]
        ],
        "x": 1613.1906140645347,
        "xml": "<outcome value='failure'>\n",
        "y": 1039.690658569336,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "f172e525.aff23",
        "name": "success",
        "outputs": 1,
        "type": "success",
        "wires": [
            [
                "aa7e9b78.4083b"
            ]
        ],
        "x": 1616.5239639282227,
        "xml": "<outcome value='success'>\n",
        "y": 1091.3573017120361,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "9b41a0f.e8b05e",
        "name": "set variables for generating unique name",
        "type": "set",
        "wires": [],
        "x": 1274.1430130004883,
        "xml": "<set>\n<parameter name='generate-unique-name-input.index-table-name' value='VNF_NAME_INDEX' />\n<parameter name='generate-unique-name-input.index-table-prefix-column' value='vnf_name_prefix' />\n<parameter name='generate-unique-name-input.name-table-type' value='VNF_INSTANCE' />\n<parameter name='generate-unique-name-input.prefix' value=\"`'z' + $vnf-topology-operation-input.vnf-request-input.aic-cloud-region + $db.vf-model.nf-code`\" />\n<parameter name='generate-unique-name-input.index-length' value='2' />\n",
        "y": 1015.1668043136597,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "aa7e9b78.4083b",
        "name": "set tmp.vnf-name to generated name",
        "type": "set",
        "wires": [],
        "x": 1857.7143491109214,
        "xml": "<set>\n<parameter name='tmp.vnf-name' value='`$generate-unique-name-output.generated-name`' />\n",
        "y": 1091.8333930969238,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "682b96e6.6b632",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1781.0477269490561,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`$generate-unique-name-output.error-message`\" />\n",
        "y": 1039.1191701889038,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "true",
        "id": "1614942.5f3dcec",
        "name": "block : atomic",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "4f4e849f.98565c",
                "237fb0e1.59bbc8"
            ]
        ],
        "x": 983.1429824829102,
        "xml": "<block atomic=\"true\">",
        "y": 1138.7858123779297,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "237fb0e1.59bbc8",
        "name": "call GENERIC-RESOURCE-API:generate-unique-name",
        "outputs": 1,
        "type": "call",
        "wires": [
            [
                "445f33b6.f0f264",
                "b1ac48e3.52ee98"
            ]
        ],
        "x": 1313.1429824829102,
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='generate-unique-name' mode='sync' >\n",
        "y": 1186.7858123779297,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "445f33b6.f0f264",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "d05b4ba7.3c07f"
            ]
        ],
        "x": 1611.7143987019858,
        "xml": "<outcome value='failure'>\n",
        "y": 1156.785837173462,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "b1ac48e3.52ee98",
        "name": "success",
        "outputs": 1,
        "type": "success",
        "wires": [
            [
                "f88d9a18.d869f8"
            ]
        ],
        "x": 1615.0477485656738,
        "xml": "<outcome value='success'>\n",
        "y": 1208.452480316162,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "4f4e849f.98565c",
        "name": "set variables for generating unique name",
        "type": "set",
        "wires": [],
        "x": 1269.8096542358398,
        "xml": "<set>\n<parameter name='generate-unique-name-input.name-table-type' value='VNF_INSTANCE' />\n<parameter name='generate-unique-name-input.supplied-name' value='`$vnf-topology-operation-input.vnf-request-input.vnf-name`' />\n",
        "y": 1135.1191844940186,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "d05b4ba7.3c07f",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1779.5715115865073,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`$generate-unique-name-output.error-message`\" />\n",
        "y": 1156.2143487930298,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "b572efaa.cba408",
        "name": "get-resource cloud region",
        "outputs": 1,
        "type": "get-resource",
        "wires": [
            [
                "a348eda7.660348",
                "142de0c9.dde827"
            ]
        ],
        "x": 586.5714492797852,
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"cloud-region\" \n\t\tkey=\"cloud-region.cloud-owner = 'CloudOwner' AND \n\t\t     cloud-region.cloud-region-id = $vnf-topology-operation-input.vnf-request-input.aic-cloud-region AND\n\t\t     depth='0'\"\n        pfx='aai.cloud-region' local-only='false' >\n\n",
        "y": 1748.8569984436035,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "142de0c9.dde827",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "34ef927d.00b456"
            ]
        ],
        "x": 811.8176422119141,
        "xml": "<outcome value='failure'>\n",
        "y": 1767.00785446167,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "34ef927d.00b456",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 986.8176155090332,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving cloud region from AAI\" />\n",
        "y": 1767.007890701294,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "a348eda7.660348",
        "name": "not-found",
        "outputs": 1,
        "type": "not-found",
        "wires": [
            [
                "ac864602.325b48"
            ]
        ],
        "x": 820.7462387084961,
        "xml": "<outcome value='not-found'>\n",
        "y": 1725.2935876846313,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "ac864602.325b48",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 987.095516204834,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cloud region not found in AAI\" />\n",
        "y": 1724.5991649627686,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "8e7983f7.0b8ac8",
        "name": "get-resource VF_TO_NETWORK_ROLE_MAPPING",
        "outputs": 1,
        "type": "get-resource",
        "wires": [
            [
                "4303334b.1d06ac",
                "97da19d.b97dfe8"
            ]
        ],
        "x": 651.8095321655273,
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_TO_NETWORK_ROLE_MAPPING WHERE vf_customization_uuid = $vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid'\n  pfx='db.vf-network-role-mapping[]'>\n\n",
        "y": 2059.9045181274414,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "d4db95bc.3539b",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1387.5237121582031,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No entries found in VF_TO_NETWORK_ROLE_MAPPING for VNF customization UUID ' + $vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid`\" />\n",
        "y": 2077.618698120117,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "4303334b.1d06ac",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "1cb8c40f.bbd244"
            ]
        ],
        "x": 947.5952033996582,
        "xml": "<outcome value='failure'>\n",
        "y": 2038.6186828613281,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "97da19d.b97dfe8",
        "name": "not-found",
        "outputs": 1,
        "type": "not-found",
        "wires": [
            [
                "2ca15486.5cc8cc"
            ]
        ],
        "x": 956.166633605957,
        "xml": "<outcome value='not-found'>\n",
        "y": 2082.904396057129,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "1cb8c40f.bbd244",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1122.5951843261719,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_TO_NETWORK_ROLE_MAPPING table\" />\n",
        "y": 2038.4283332824707,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "true",
        "id": "796cc7.d490b338",
        "name": "block : atomic",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "465ab09f.34229",
                "799318e1.a3e3a",
                "dc31ec67.0624a",
                "d834554a.ccf5f",
                "30a0e3fe.983584",
                "bc183bd7.3e811",
                "dc8fa939.b773f",
                "5090527e.f6c044"
            ]
        ],
        "x": 752.5715866088867,
        "xml": "<block atomic=\"true\">",
        "y": 2508.71391582489,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "dc31ec67.0624a",
        "name": "get-resource l3-network",
        "outputs": 1,
        "type": "get-resource",
        "wires": [
            [
                "c81a364.d370848",
                "419e2508.7620ac"
            ]
        ],
        "x": 985.4286041259766,
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"l3-networks\" \n\t\tkey=\"l3-network.network-role = $db.vf-network-role-mapping[$role-index].network-role\"\n        pfx='aai.l3-network' local-only='false'\n>\n",
        "y": 2187.999779701233,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "419e2508.7620ac",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "b16e3091.456208"
            ]
        ],
        "x": 1189.476318359375,
        "xml": "<outcome value='failure'>\n",
        "y": 2210.1426191329956,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "b16e3091.456208",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1364.4762916564941,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving l3-network from AAI\" />\n",
        "y": 2210.1426553726196,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "c81a364.d370848",
        "name": "not-found",
        "outputs": 1,
        "type": "not-found",
        "wires": [
            [
                "1b8e966.12c8b6a"
            ]
        ],
        "x": 1198.404914855957,
        "xml": "<outcome value='not-found'>\n",
        "y": 2168.428352355957,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "1b8e966.12c8b6a",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1364.754192352295,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No active l3-network found in AAI with cloud_region_id '\n          + $vnf-topology-operation-input.vnf-request-input.aic-cloud-region + ' and network_role '\n          + $db.vf-network-role-mapping[$network-index].network-role`\" />\n",
        "y": 2167.7339296340942,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "465ab09f.34229",
        "name": "set vnf-network data",
        "type": "set",
        "wires": [],
        "x": 974.6191940307617,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$network-index].network-role'\n    value='`$db.vf-network-role-mapping[$role-index].network-role`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$network-index].network-name'\n    value='`$aai.l3-network.l3-network[$db-network-index].network-name`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$network-index].neutron-id'\n    value='`$aai.l3-network.l3-network[$db-network-index].neutron-network-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$network-index].network-id'\n    value='`$aai.l3-network.l3-network[$db-network-index].network-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$network-index].contrail-network-fqdn'\n    value='`$aai.l3-network.l3-network[$db-network-index].contrail-network-fqdn`' />\n",
        "y": 2675.0000228881836,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "1a64389.04fb547",
        "name": "for each cloud-region availability zone",
        "outputs": 1,
        "type": "for",
        "wires": [
            [
                "509993f3.7086bc"
            ]
        ],
        "x": 586.3335571289062,
        "xml": "<for index='idx' start='0' end='`$aai.az.availability-zone_length`' >\n",
        "y": 3089.618803024292,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "696846f6.70aa8",
        "name": "set availability-zone",
        "type": "set",
        "wires": [],
        "x": 1048.0002403259277,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.availability-zones.availability-zone[$idx]'\n  value='`$aai.az.availability-zone[$idx].availability-zone-name`' />\n",
        "y": 3058.952217102051,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "2217154e.6141c2",
        "name": "set vnf-parameters-data",
        "type": "set",
        "wires": [],
        "x": 545.9524841308594,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.'\n  value='vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.' />\n",
        "y": 2939.5711631774902,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "57d7e5fc.33f244",
        "name": "save generic-vnf l3-network relationships",
        "outputs": 1,
        "type": "save",
        "wires": [
            [
                "7186d613.fe144",
                "35d8114.d0acf6e"
            ]
        ],
        "x": 1012.5240173339844,
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"generic-vnf:relationship-list\"\n   key=\"generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"l3-network.network-id\" />\n    <parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-nw-index].network-id`\" />\n",
        "y": 3233.381015777588,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "1da784bd.1a325b",
        "name": "return success",
        "type": "returnSuccess",
        "wires": [],
        "x": 509.0953674316406,
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "y": 3620.1901140213013,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "c4c1c921.76e2b8",
        "name": "set vnf-level-oper-status to PendingCreate",
        "type": "set",
        "wires": [],
        "x": 598.9088134765625,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status' value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />\n",
        "y": 3522.527594566345,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "c85d4198.45c628",
        "name": "for each network-role",
        "outputs": 1,
        "type": "for",
        "wires": [
            [
                "796cc7.d490b338"
            ]
        ],
        "x": 535.9048919677734,
        "xml": "<for index='role-index' start='0' end='`$db.vf-network-role-mapping_length`'>",
        "y": 2508.7141189575195,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "95a9e356.edb75",
        "name": "set network-index = 0",
        "type": "set",
        "wires": [],
        "x": 554.2380676269531,
        "xml": "<set>\n<parameter name='network-index' value='0' />\n",
        "y": 2126.8094577789307,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "799318e1.a3e3a",
        "name": "increment network-index",
        "type": "set",
        "wires": [],
        "x": 984.9525146484375,
        "xml": "<set>\n<parameter name='network-index' value='`$network-index + 1`' />\n",
        "y": 2812.6189250946045,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "26c17497.86b44c",
        "name": "set vnf-network_length",
        "type": "set",
        "wires": [],
        "x": 544.8095703125,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length'\n  value='`$network-index`' />\n",
        "y": 2889.571207046509,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "deeeb827.37f63",
        "name": "copy input data",
        "type": "set",
        "wires": [],
        "x": 514.4286422729492,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.sdnc-request-header.' value='$vnf-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.request-information.' value='$vnf-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.' value='$vnf-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-information.' value='$vnf-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-request-input.' value='$vnf-topology-operation-input.vnf-request-input.' />\n\n",
        "y": 3470.1904258728027,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "6ce3245c.227ed4",
        "name": "for each vnf-network",
        "outputs": 1,
        "type": "for",
        "wires": [
            [
                "21eaa2af.c3b26e"
            ]
        ],
        "x": 535.52392578125,
        "xml": "<for index='vnf-nw-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n",
        "y": 3232.380931854248,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "true",
        "id": "21eaa2af.c3b26e",
        "name": "block : atomic",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "57d7e5fc.33f244"
            ]
        ],
        "x": 739.1905670166016,
        "xml": "<block atomic=\"true\">",
        "y": 3232.380892753601,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "97e88fe.9dab2f",
        "name": "set new vnf_length",
        "type": "set",
        "wires": [],
        "x": 550.0952491760254,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf_length' value='`$vnf-index + 1`' />\n",
        "y": 782.7619781494141,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "84324533.95146",
        "name": "for each cloud-region relationship",
        "outputs": 1,
        "type": "for",
        "wires": [
            [
                "f787444c.e13378"
            ]
        ],
        "x": 599.4285736083984,
        "xml": "<for index='idx' start='0' end='`$aai.cloud-region.relationship-list.relationship_length`' >\n",
        "y": 1836.0951700210571,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "f787444c.e13378",
        "name": "switch related-to",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "cd796e7b.7cf948"
            ]
        ],
        "x": 847.1071166992188,
        "xml": "<switch test='`$aai.cloud-region.relationship-list.relationship[$idx].related-to`'>\n",
        "y": 1835.8450994491577,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "cd796e7b.7cf948",
        "name": "complex",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "29a74b62.067044"
            ]
        ],
        "x": 1016.5714378356934,
        "xml": "<outcome value='complex'>\n",
        "y": 1835.2379217147827,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "f964a25d.454b6",
        "name": "set aic-clli",
        "type": "set",
        "wires": [],
        "x": 1337.2857360839844,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.aic-clli'\n  value='`$aai-uid-split[$aai-uid-split_length - 1]`' />\n",
        "y": 1834.9045791625977,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "fe738685.6c7d7",
        "name": "switch aic-clli",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "d8ba8844.b1a0b8"
            ]
        ],
        "x": 535.3333511352539,
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.aic-clli`'>\n",
        "y": 1992.0474872589111,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "d8ba8844.b1a0b8",
        "name": "NULL",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "25200dee.75e302"
            ]
        ],
        "x": 683.4761848449707,
        "xml": "<outcome value=''>",
        "y": 1992.0474700927734,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "25200dee.75e302",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 830.6190452575684,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find aic-clli in AAI for aic-cloud-region ' + $vnf-topology-operation-input.vnf-request-input.aic-cloud-region`\" />\n",
        "y": 1991.6189041137695,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "5f4ea6d7.ceb158",
        "name": "set from DB",
        "type": "set",
        "wires": [],
        "x": 958.9287452697754,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-invariant-uuid'\n  value='`$db.vf-model.invariant-uuid`' />\n",
        "y": 1308.0475587844849,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "43d65ebc.c60b2",
        "name": "for each l3-network",
        "outputs": 1,
        "type": "for",
        "wires": [
            [
                "6f76ed5d.4970e4"
            ]
        ],
        "x": 1092.8811492919922,
        "xml": "<for index='db-network-index' start='0' end='`$aai.l3-network.l3-network_length`' >\n",
        "y": 2431.571388244629,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "6f76ed5d.4970e4",
        "name": "switch orchestration-status",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "bbe5662.f16b918",
                "cb1bcbb.e4a72b8",
                "be3d158a.0afbb",
                "a22f9423.3e4f08",
                "1aa61126.14efcf"
            ]
        ],
        "x": 1321.452350616455,
        "xml": "<switch test='`$aai.l3-network.l3-network[$db-network-index].orchestration-status`'>\n",
        "y": 2430.142815589905,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "bbe5662.f16b918",
        "name": "Pending Delete",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "c5d64162.5301c8"
            ]
        ],
        "x": 1558.1192626953125,
        "xml": "<outcome value='Pending Delete'>\n",
        "y": 2475.8095235824585,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "cb1bcbb.e4a72b8",
        "name": "other",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "cada7ba0.1dd8"
            ]
        ],
        "x": 1530.9764022827148,
        "xml": "<outcome value='Other'>\n",
        "y": 2526.809504508972,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "f2201c7e.b452e8",
        "name": "switch related-to",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "18bbcf5a.1ec521"
            ]
        ],
        "x": 1896.6907539367676,
        "xml": "<switch test='`$aai.l3-network.l3-network[$db-network-index].relationship-list.relationship[$db-rel-index].related-to`'>\n",
        "y": 2525.3808450698853,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "cada7ba0.1dd8",
        "name": "for each relationship",
        "outputs": 1,
        "type": "for",
        "wires": [
            [
                "f2201c7e.b452e8"
            ]
        ],
        "x": 1700.9763145446777,
        "xml": "<for silentFailure='true' index='db-rel-index' start='0' end='`$aai.l3-network.l3-network[$db-network-index].relationship-list.relationship_length`' >\n",
        "y": 2526.3808813095093,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "18bbcf5a.1ec521",
        "name": "cloud-region",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "9edb388f.f5112"
            ]
        ],
        "x": 2070.9763946533203,
        "xml": "<outcome value='cloud-region'>\n",
        "y": 2524.9522914886475,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "9edb388f.f5112",
        "name": "for each relationship data",
        "outputs": 1,
        "type": "for",
        "wires": [
            [
                "1a8ed1c0.72a746"
            ]
        ],
        "x": 2268.119094848633,
        "xml": "<for silentFailure='true' index='db-data-index' start='0' end='`$aai.l3-network.l3-network[$db-network-index].relationship-list.relationship[$db-rel-index].relationship-data_length`' >\n",
        "y": 2525.380759239197,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "1a8ed1c0.72a746",
        "name": "switch relationship-key",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "435633df.b879dc"
            ]
        ],
        "x": 2499.547695159912,
        "xml": "<switch test='`$aai.l3-network.l3-network[$db-network-index].relationship-list.relationship[$db-rel-index].relationship-data[$db-data-index].relationship-key`'>\n",
        "y": 2524.9521341323853,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "435633df.b879dc",
        "name": "cloud-region.cloud-region-id",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "48895616.05d3b"
            ]
        ],
        "x": 2740.9762268066406,
        "xml": "<outcome value='cloud-region.cloud-region-id'>\n",
        "y": 2524.95223903656,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "48895616.05d3b",
        "name": "switch relationship-value == cloud-region-id",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "12babad5.4b3935"
            ]
        ],
        "x": 3045.2621459960938,
        "xml": "<switch test='`$aai.l3-network.l3-network[$db-network-index].relationship-list.relationship[$db-rel-index].relationship-data[$db-data-index].relationship-value == $vnf-topology-operation-input.vnf-request-input.aic-cloud-region`'>\n",
        "y": 2524.8092947006226,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "12babad5.4b3935",
        "name": "true",
        "outputs": 1,
        "type": "outcomeTrue",
        "wires": [
            [
                "ad009415.ee8e2"
            ]
        ],
        "x": 3285.262176513672,
        "xml": "<outcome value='true'>\n",
        "y": 2524.9522399902344,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "false",
        "comments": "",
        "id": "d834554a.ccf5f",
        "name": "block",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "43d65ebc.c60b2",
                "29a56ec0.3effd2"
            ]
        ],
        "x": 931.0953330993652,
        "xml": "<block>\n",
        "y": 2499.4284858703613,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "29a56ec0.3effd2",
        "name": "CATCH BREAK",
        "type": "returnSuccess",
        "wires": [],
        "x": 1082.4287414550781,
        "xml": "<return status='success'>\n\n",
        "y": 2572.7617197036743,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "f75b0ddb.4ffe68",
        "name": "BREAK",
        "type": "returnFailure",
        "wires": [],
        "x": 3586.095157623291,
        "xml": "<return status='failure'>\n",
        "y": 2542.761643409729,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "30a0e3fe.983584",
        "name": "set l3-network-id = -1",
        "type": "set",
        "wires": [],
        "x": 975.4287033081055,
        "xml": "<set>\n<parameter name='l3-network-id' value='-1' />\n",
        "y": 2302.7616996765137,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "true",
        "id": "ad009415.ee8e2",
        "name": "block : atomic",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "7a5cc970.dcdc18",
                "f75b0ddb.4ffe68"
            ]
        ],
        "x": 3431.0951538085938,
        "xml": "<block atomic=\"true\">",
        "y": 2524.4283485412598,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "7a5cc970.dcdc18",
        "name": "set l3-network-id = this l3-network",
        "type": "set",
        "wires": [],
        "x": 3667.7618255615234,
        "xml": "<set>\n<parameter name='l3-network-id' value='`$aai.l3-network.l3-network[$db-network-index].network-id`' />\n",
        "y": 2499.4283475875854,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "bc183bd7.3e811",
        "name": "switch l3-network-id",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "91318c2.57404f"
            ]
        ],
        "x": 972.4286270141602,
        "xml": "<switch test='`$l3-network-id`'>\n",
        "y": 2626.428741455078,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "91318c2.57404f",
        "name": "-1",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "504d1216.64d004"
            ]
        ],
        "x": 1142.4285774230957,
        "xml": "<outcome value='-1'>\n",
        "y": 2626.428497314453,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "504d1216.64d004",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1290.7619400024414,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find l3-network in AAI for network role ' + $db.vf-network-role-mapping[$role-index].network-role`\" />\n",
        "y": 2626.4286346435547,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "2ab7bc1f.b085b4",
        "name": "switch input model-invariant-uuid",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "e082345e.236ca",
                "a95f8164.b4e8b8"
            ]
        ],
        "x": 602.7858200073242,
        "xml": "<switch test='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-invariant-uuid`'>\n",
        "y": 1330.8720026016235,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "e082345e.236ca",
        "name": "NULL",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "5f4ea6d7.ceb158"
            ]
        ],
        "x": 808.4524917602539,
        "xml": "<outcome value=''>",
        "y": 1308.0149660110474,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "a95f8164.b4e8b8",
        "name": "other",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "e5dcf453.7ec14"
            ]
        ],
        "x": 809.8810882568359,
        "xml": "<outcome value='Other'>\n",
        "y": 1352.3005571365356,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "e5dcf453.7ec14",
        "name": "set from input",
        "type": "set",
        "wires": [],
        "x": 964.1668243408203,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-invariant-uuid'\n  value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-invariant-uuid`' />\n",
        "y": 1351.7291293144226,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "ebeec6f9.2c628",
        "name": "set from DB",
        "type": "set",
        "wires": [],
        "x": 959.8810157775879,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-uuid'\n  value='`$db.vf-model.uuid`' />\n",
        "y": 1396.5862350463867,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "2dbfa8ac.567be8",
        "name": "switch input model-uuid",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "bafa03f0.0be328",
                "40a4f245.06edcc"
            ]
        ],
        "x": 575.4048385620117,
        "xml": "<switch test='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-uuid`'>\n",
        "y": 1419.4107398986816,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "bafa03f0.0be328",
        "name": "NULL",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "ebeec6f9.2c628"
            ]
        ],
        "x": 809.4048118591309,
        "xml": "<outcome value=''>",
        "y": 1396.553671836853,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "40a4f245.06edcc",
        "name": "other",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "9ad4384f.c55ae"
            ]
        ],
        "x": 810.8334083557129,
        "xml": "<outcome value='Other'>\n",
        "y": 1440.8392629623413,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "9ad4384f.c55ae",
        "name": "set from input",
        "type": "set",
        "wires": [],
        "x": 965.1191444396973,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-uuid'\n  value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-uuid`' />\n",
        "y": 1440.2678351402283,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "369af0fe.bb8d18",
        "name": "set from DB",
        "type": "set",
        "wires": [],
        "x": 957.0239486694336,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-version'\n  value='`$db.vf-model.version`' />\n",
        "y": 1485.4434423446655,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "c33b5d51.3d59e",
        "name": "switch input model-version",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "b1d9b14.52a99d",
                "7dbbd718.ba9528"
            ]
        ],
        "x": 583.5477104187012,
        "xml": "<switch test='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-version`'>\n",
        "y": 1508.2678871154785,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "b1d9b14.52a99d",
        "name": "NULL",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "369af0fe.bb8d18"
            ]
        ],
        "x": 806.5476951599121,
        "xml": "<outcome value=''>",
        "y": 1485.410849571228,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "7dbbd718.ba9528",
        "name": "other",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "ec86a60a.b943f8"
            ]
        ],
        "x": 807.9762916564941,
        "xml": "<outcome value='Other'>\n",
        "y": 1529.6964406967163,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "ec86a60a.b943f8",
        "name": "set from input",
        "type": "set",
        "wires": [],
        "x": 962.2620277404785,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-version'\n  value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-version`' />\n",
        "y": 1529.1250128746033,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "d84c1fb5.76aec8",
        "name": "set from DB",
        "type": "set",
        "wires": [],
        "x": 957.0239486694336,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-name'\n  value='`$db.vf-model.name`' />\n",
        "y": 1572.5862646102905,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "f8b8a722.fd6508",
        "name": "switch input model-name",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "37bd193e.8fcaee",
                "904a8546.5a6878"
            ]
        ],
        "x": 578.5477104187012,
        "xml": "<switch test='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-name`'>\n",
        "y": 1595.4107093811035,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "37bd193e.8fcaee",
        "name": "NULL",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "d84c1fb5.76aec8"
            ]
        ],
        "x": 806.5476951599121,
        "xml": "<outcome value=''>",
        "y": 1572.553671836853,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "904a8546.5a6878",
        "name": "other",
        "outputs": 1,
        "type": "other",
        "wires": [
            [
                "fb77ed1e.4c6d38"
            ]
        ],
        "x": 807.9762916564941,
        "xml": "<outcome value='Other'>\n",
        "y": 1616.8392629623413,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "fb77ed1e.4c6d38",
        "name": "set from input",
        "type": "set",
        "wires": [],
        "x": 962.2620277404785,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-name'\n  value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-name`' />\n",
        "y": 1616.2678351402283,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "false",
        "comments": "",
        "id": "c5d64162.5301c8",
        "name": "block",
        "outputs": 1,
        "type": "block",
        "wires": [
            []
        ],
        "x": 1711.3333549499512,
        "xml": "<block>\n",
        "y": 2476.586400985718,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "1aa61126.14efcf",
        "name": "PendingDelete",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "1a19e1e7.6d515e"
            ]
        ],
        "x": 1555.9999961853027,
        "xml": "<outcome value='PendingDelete'>\n",
        "y": 2431.5863151550293,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "false",
        "comments": "",
        "id": "1a19e1e7.6d515e",
        "name": "block",
        "outputs": 1,
        "type": "block",
        "wires": [
            []
        ],
        "x": 1711.2140884399414,
        "xml": "<block>\n",
        "y": 2432.3631925582886,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "a22f9423.3e4f08",
        "name": "Pending Create",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "7b5140c6.1be978"
            ]
        ],
        "x": 1557.9999961853027,
        "xml": "<outcome value='Pending Create'>\n",
        "y": 2388.2528190612793,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "false",
        "comments": "",
        "id": "7b5140c6.1be978",
        "name": "block",
        "outputs": 1,
        "type": "block",
        "wires": [
            []
        ],
        "x": 1711.2140884399414,
        "xml": "<block>\n",
        "y": 2389.0296964645386,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "be3d158a.0afbb",
        "name": "PendingCreate",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "56c1bb65.93ed54"
            ]
        ],
        "x": 1557.9999961853027,
        "xml": "<outcome value='PendingCreate'>\n",
        "y": 2344.9195671081543,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "false",
        "comments": "",
        "id": "56c1bb65.93ed54",
        "name": "block",
        "outputs": 1,
        "type": "block",
        "wires": [
            []
        ],
        "x": 1711.2140884399414,
        "xml": "<block>\n",
        "y": 2345.6964445114136,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "dc8fa939.b773f",
        "name": "for each A&AI subnet",
        "outputs": 1,
        "type": "for",
        "wires": [
            [
                "ca52b163.d4827"
            ]
        ],
        "x": 974.6667633056641,
        "xml": "<for index='subnet-index' start='0' end='`$aai.l3-network.l3-network[0].subnets.subnet_length`' >\n",
        "y": 2719.919626235962,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "ca52b163.d4827",
        "name": "set subnet data",
        "type": "set",
        "wires": [],
        "x": 1172.9999389648438,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$network-index].subnets-data.subnet-data[$subnet-index].ip-version'\n   value='`$aai.l3-network.l3-network[$db-network-index].subnets.subnet[$subnet-index].ip-version`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$network-index].subnets-data.subnet-data[$subnet-index].subnet-id'\n   value='`$aai.l3-network.l3-network[$db-network-index].subnets.subnet[$subnet-index].subnet-id`' />\n",
        "y": 2718.2532052993774,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "5090527e.f6c044",
        "name": "set subnet_length",
        "type": "set",
        "wires": [],
        "x": 963.3333282470703,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$network-index].subnets-data.subnet-data_length'\n   value='`$aai.l3-network.l3-network[0].subnets.subnet_length`' />\n",
        "y": 2764.919708251953,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "f03f1068.5af0c",
        "name": "set availability-zones.max-count and length",
        "type": "set",
        "wires": [],
        "x": 606.0000610351562,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.availability-zones.max-count'\n   value='`$db.vf-model.avail-zone-max-count`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.availability-zones.availability-zone_length'\n   value='`$aai.az.availability-zone_length`' />\n",
        "y": 3177.6342582702637,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "5e785184.8c4128",
        "name": "set vnf-name",
        "type": "set",
        "wires": [],
        "x": 539.666633605957,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-name'\n   value='`$tmp.vnf-name`' />\n",
        "y": 1264.9197664260864,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "3a4f6bb1.560164",
        "name": "update generic-vnf",
        "outputs": 1,
        "type": "save",
        "wires": [
            [
                "1fc6e960.150607",
                "a8793a07.5d6f48"
            ]
        ],
        "x": 526.3333282470703,
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"generic-vnf\"\n   key=\"generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"vnf-name\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-name`\" />\n<parameter name=\"prov-status\" value=\"PREPROV\" />\n<parameter name=\"operational-status\" value=\"out-of-service-path\" />\n<parameter name=\"equipment-role\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.nf-role`\" />\n<parameter name=\"model-invariant-id\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-uuid`\" />\n<parameter name=\"model-customization-id\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-customization-uuid`\" />\n<parameter name=\"selflink\" value=\"`$vnf-object-path`\" />\n",
        "y": 3387.300033569336,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "9bd6668b.dfc92",
        "name": "set vnf-object-path and service-object-path",
        "type": "set",
        "wires": [],
        "x": 606.3333740234375,
        "xml": "<set>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vnf-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vnf-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology'`\"/>",
        "y": 3310.300537109375,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "391ed085.26b75",
        "name": "set vnf-id",
        "type": "set",
        "wires": [],
        "x": 527.9999771118164,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-id'\n   value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n",
        "y": 1216.5863094329834,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "e3fcddaa.ac5538",
        "name": "printContext",
        "outputs": 1,
        "type": "execute",
        "wires": [
            []
        ],
        "x": 504.00009536743164,
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-viprend.log' />\n",
        "y": 3568.967363357544,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "6f3c4400.e28f24",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1449.666805267334,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No generic-vnf found in AAI for vnf ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-id`\" />\n",
        "y": 3253.9671211242676,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "7186d613.fe144",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "89a1c75d.721db8"
            ]
        ],
        "x": 1262.3573722839355,
        "xml": "<outcome value='failure'>\n",
        "y": 3210.919590950012,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "35d8114.d0acf6e",
        "name": "not-found",
        "outputs": 1,
        "type": "not-found",
        "wires": [
            [
                "6f3c4400.e28f24"
            ]
        ],
        "x": 1270.9288024902344,
        "xml": "<outcome value='not-found'>\n",
        "y": 3255.205304145813,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "89a1c75d.721db8",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1452.3573989868164,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating generic-vnf in AAI\" />\n",
        "y": 3210.729326248169,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "17590340.d661cd",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 929.6667442321777,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No generic-vnf found in AAI for vnf ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-id`\" />\n",
        "y": 3408.967043876648,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "1fc6e960.150607",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "d9024ee2.bf5d3"
            ]
        ],
        "x": 742.3573112487793,
        "xml": "<outcome value='failure'>\n",
        "y": 3365.9195137023926,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "a8793a07.5d6f48",
        "name": "not-found",
        "outputs": 1,
        "type": "not-found",
        "wires": [
            [
                "17590340.d661cd"
            ]
        ],
        "x": 750.9287414550781,
        "xml": "<outcome value='not-found'>\n",
        "y": 3410.2052268981934,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "d9024ee2.bf5d3",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 932.3573379516602,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating selflink in generic-vnf in AAI\" />\n",
        "y": 3365.7292490005493,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "2e7ae530.0e2cea",
        "name": "set model-customization-uuid",
        "type": "set",
        "wires": [],
        "x": 591.3332977294922,
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-customization-uuid'\n  value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid`' />\n",
        "y": 1668.2529134750366,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "c4513e6c.417d88",
        "name": "split related-link",
        "outputs": 1,
        "type": "execute",
        "wires": [
            []
        ],
        "x": 1356.6665954589844,
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split'>\n   <parameter name='ctx_memory_result_key' value='aai-uid-split' />\n   <parameter name='original_string' value='`$aai.cloud-region.relationship-list.relationship[$idx].related-link`' />\n   <parameter name='regex' value='/' />\n",
        "y": 1789.6664972305298,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "true",
        "id": "29a74b62.067044",
        "name": "block : atomic",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "c4513e6c.417d88",
                "f964a25d.454b6",
                "bf8afd9.c73b1"
            ]
        ],
        "x": 1176.3332977294922,
        "xml": "<block atomic=\"true\">",
        "y": 1836.333285331726,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "bf8afd9.c73b1",
        "name": "break",
        "type": "break",
        "wires": [],
        "x": 1326.3332595825195,
        "xml": "<break>\n",
        "y": 1879.666582107544,
        "z": "1f9db9a1.737df6"
    },
    {
        "atomic": "true",
        "id": "509993f3.7086bc",
        "name": "block : atomic",
        "outputs": 1,
        "type": "block",
        "wires": [
            [
                "696846f6.70aa8",
                "765526c8.d4caf"
            ]
        ],
        "x": 838,
        "xml": "<block atomic=\"true\">",
        "y": 3088.7143869400024,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "765526c8.d4caf",
        "name": "save generic-vnf availability-zone relationship",
        "outputs": 1,
        "type": "save",
        "wires": [
            [
                "43f03688.4ffc08",
                "49249c79.4e59a4"
            ]
        ],
        "x": 1129.9048156738281,
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"generic-vnf:relationship-list\"\n   key=\"generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"availability-zone\" />\n    <parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"cloud-region.cloud-owner\" />\n    <parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"CloudOwner\" />\n    <parameter name=\"relationship-list.relationship[0].relationship-data[1].relationship-key\" value=\"cloud-region.cloud-region-id\" />\n    <parameter name=\"relationship-list.relationship[0].relationship-data[1].relationship-value\" value=\"`$vnf-topology-operation-input.vnf-request-input.aic-cloud-region`\" />\n    <parameter name=\"relationship-list.relationship[0].relationship-data[2].relationship-key\" value=\"availability-zone.availability-zone-name\" />\n    <parameter name=\"relationship-list.relationship[0].relationship-data[2].relationship-value\" value=\"`$aai.az.availability-zone[$idx].availability-zone-name`\" />\n",
        "y": 3112.0478343963623,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "1fb1c5a4.5564ca",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1583.47607421875,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No generic-vnf found in AAI for vnf ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-id`\" />\n",
        "y": 3135.9671936035156,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "43f03688.4ffc08",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "31682c44.dabecc"
            ]
        ],
        "x": 1396.1666412353516,
        "xml": "<outcome value='failure'>\n",
        "y": 3092.9196634292603,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "49249c79.4e59a4",
        "name": "not-found",
        "outputs": 1,
        "type": "not-found",
        "wires": [
            [
                "1fb1c5a4.5564ca"
            ]
        ],
        "x": 1404.7380714416504,
        "xml": "<outcome value='not-found'>\n",
        "y": 3137.205376625061,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "31682c44.dabecc",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1586.1666679382324,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating generic-vnf in AAI\" />\n",
        "y": 3092.729398727417,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "2ca15486.5cc8cc",
        "name": "set mapping rows to 0",
        "type": "set",
        "wires": [],
        "x": 1150.1427688598633,
        "xml": "<set>\n<parameter name='db.vf-network-role-mapping_length' value='0' />\n",
        "y": 2082.52388381958,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "611f691d.f4b31",
        "name": "switch AAI availability-zone_length",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "701b12be.386a5c"
            ]
        ],
        "x": 578.7142868041992,
        "xml": "<switch test='`$aai.az.availability-zone_length`'>\n",
        "y": 2992.523973464966,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "701b12be.386a5c",
        "name": "NULL",
        "outputs": 1,
        "type": "outcome",
        "wires": [
            [
                "1249a549.cc39bb"
            ]
        ],
        "x": 797.2857055664062,
        "xml": "<outcome value=''>",
        "y": 2992.0953826904297,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "a04c4aba.4671b8",
        "name": "set availability-zone_length to 0",
        "type": "set",
        "wires": [],
        "x": 1398.7143478393555,
        "xml": "<set>\n<parameter name='aai.az.availability-zone_length' value='0' />\n",
        "y": 3010.6666202545166,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "1249a549.cc39bb",
        "name": "switch AZ max count > 0",
        "outputs": 1,
        "type": "switchNode",
        "wires": [
            [
                "545772cc.6dbc04",
                "f7e43f63.6a2e5"
            ]
        ],
        "x": 985.857177734375,
        "xml": "<switch test='`$db.vf-model.avail-zone-max-count &gt; 0`'>\n",
        "y": 2992.5236945152283,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "545772cc.6dbc04",
        "name": "true",
        "outputs": 1,
        "type": "outcomeTrue",
        "wires": [
            [
                "be2e43e.cc375c"
            ]
        ],
        "x": 1188.7142848968506,
        "xml": "<outcome value='true'>\n",
        "y": 2966.8094444274902,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "f7e43f63.6a2e5",
        "name": "false",
        "outputs": 1,
        "type": "outcomeFalse",
        "wires": [
            [
                "a04c4aba.4671b8"
            ]
        ],
        "x": 1190.1429061889648,
        "xml": "<outcome value='false'>\n",
        "y": 3011.0951919555664,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "be2e43e.cc375c",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 1340.142822265625,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No availability zones found in AAI for cloud region '\n       + $vnf-topology-operation-input.vnf-request-input.aic-cloud-region`\" />\n",
        "y": 2966.5238494873047,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "c510e207.134d3",
        "name": "get-resource availability zones",
        "outputs": 1,
        "type": "get-resource",
        "wires": [
            [
                "5917e224.06e004"
            ]
        ],
        "x": 588.7143096923828,
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"availability-zones\" \n\t\tkey=\"cloud-region.cloud-owner = 'CloudOwner' AND \n\t\t     cloud-region.cloud-region-id = $vnf-topology-operation-input.vnf-request-input.aic-cloud-region AND\n\t\t     depth='0'\"\n        pfx='aai.az' local-only='false' >\n\n",
        "y": 1919.4286441802979,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "5917e224.06e004",
        "name": "failure",
        "outputs": 1,
        "type": "failure",
        "wires": [
            [
                "76d22d4c.7d6684"
            ]
        ],
        "x": 813.9605255126953,
        "xml": "<outcome value='failure'>\n",
        "y": 1918.829496383667,
        "z": "1f9db9a1.737df6"
    },
    {
        "comments": "",
        "id": "76d22d4c.7d6684",
        "name": "return failure",
        "type": "returnFailure",
        "wires": [],
        "x": 987.7104644775391,
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving availability zones from AAI\" />\n",
        "y": 1917.5796184539795,
        "z": "1f9db9a1.737df6"
    }
]
