[
    {
        "id": "56f6ceeb.2f9068",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 114,
        "y": 139,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "1c7e6bd.909eb14"
            ]
        ]
    },
    {
        "id": "1c7e6bd.909eb14",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 227.85713577270508,
        "y": 178.80953788757324,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "394269ca.2493d6"
            ]
        ]
    },
    {
        "id": "394269ca.2493d6",
        "type": "method",
        "name": "method vf-module-topology-operation-assign-sync",
        "xml": "<method rpc='vf-module-topology-operation-assign-sync' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 227.42862701416016,
        "y": 219,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f31d4136.dbad18"
            ]
        ]
    },
    {
        "id": "8b850552.873b78",
        "type": "comment",
        "name": "vf-module-topology-operation-assign-sync",
        "info": "",
        "comments": "",
        "x": 372.32110595703125,
        "y": 64.97569942474365,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "76da2351.1e772c",
        "type": "switchNode",
        "name": "switch request-action",
        "xml": "<switch test='`$vf-module-topology-operation-input.request-information.request-action`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 519.1905097961426,
        "y": 394.52382230758667,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "4f2046cb.97cad",
                "6f4baeb7.64b6a"
            ]
        ]
    },
    {
        "id": "4f2046cb.97cad",
        "type": "outcome",
        "name": "CreateVfModuleInstance",
        "xml": "<outcome value='CreateVfModuleInstance'>\n",
        "comments": "",
        "outputs": 1,
        "x": 781.2381248474121,
        "y": 371.66670846939087,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "bc41f28e.925478"
            ]
        ]
    },
    {
        "id": "6f4baeb7.64b6a",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 724.9047698974609,
        "y": 417.0476975440979,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "e7106bf3.cd4de"
            ]
        ]
    },
    {
        "id": "bc41f28e.925478",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 971.0952892303467,
        "y": 371.6667399406433,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "e7106bf3.cd4de",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'assign' then request-action must be 'CreateVfModuleInstance'\" />\n",
        "comments": "",
        "x": 989.9047775268555,
        "y": 417.381010055542,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "729b2317.d41764",
        "type": "get-resource",
        "name": "get-resource VF_MODULE_MODEL",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODULE_MODEL WHERE customization_uuid = $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid'\n  pfx='db.vf-module-model'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 566.5237770080566,
        "y": 485.66677236557007,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "987fd6a8.61bdd8",
                "20959f4f.3eb5d8"
            ]
        ]
    },
    {
        "id": "85b6ba66.001968",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No model found for VF module customization UUID ' + $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`\" />\n",
        "comments": "",
        "x": 1007.9521980285645,
        "y": 510.09524488449097,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "987fd6a8.61bdd8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 832.3094673156738,
        "y": 466.0476031303406,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "b104acae.235de"
            ]
        ]
    },
    {
        "id": "20959f4f.3eb5d8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 840.8808975219727,
        "y": 510.33331632614136,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "85b6ba66.001968"
            ]
        ]
    },
    {
        "id": "b104acae.235de",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table\" />\n",
        "comments": "",
        "x": 1007.309398651123,
        "y": 465.1905035972595,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "ebe8b394.b57a1",
        "type": "switchNode",
        "name": "switch service-data.vnfs.vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 561.6190414428711,
        "y": 694.2381076812744,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "cc1ff8d8.e54a",
                "25f65cf0.a13c74"
            ]
        ]
    },
    {
        "id": "cc1ff8d8.e54a",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 802.3333129882812,
        "y": 671.3808479309082,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "e620f2a.d32df1"
            ]
        ]
    },
    {
        "id": "25f65cf0.a13c74",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 802.0951538085938,
        "y": 712.333366394043,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f839c9ee.7363c8"
            ]
        ]
    },
    {
        "id": "cdb40a91.68e35",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 140.19043731689453,
        "y": 3175.9050060510635,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "22e5e45e.411d54",
                "aab26fce.f8257",
                "d90a1287.58a548",
                "beda92ef.691fd8",
                "68d89a29.07cf94",
                "2568cf35.f17b4",
                "2930947a.5fb83c",
                "50b9a90a.fc82d",
                "23cc94b1.59977c",
                "d4c27c38.cb815",
                "83666c5c.749a58",
                "9931e32c.9b539",
                "32580d0f.1a87f2",
                "a3e2c0ba.ee212",
                "be655d76.fadfe8",
                "a5b2add1.64cc98",
                "3a0e8e07.615d92",
                "d3f07b7.dd74b88",
                "8005f008.78f808",
                "e1af8d51.2ba338",
                "8fd60795.26d88",
                "a146e36e.bc5ed",
                "cda23fd1.47e1a8",
                "4f9ff09e.f47468",
                "a248e487.7d841",
                "bf14b0a9.d3e2d",
                "56373ee9.f19b2",
                "61b10d9d.cb5ec4",
                "6758cc3d.63107c",
                "758d4da0.c2995c",
                "ee77fdb8.d87748"
            ]
        ]
    },
    {
        "id": "e620f2a.d32df1",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs defined in MD-SAL\" />\n",
        "comments": "",
        "x": 968.999927520752,
        "y": 670.6666030883789,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "f839c9ee.7363c8",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 964.3332977294922,
        "y": 711.9999847412109,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "64c8c312.1061f4"
            ]
        ]
    },
    {
        "id": "64c8c312.1061f4",
        "type": "switchNode",
        "name": "switch service data vnf == input vnf",
        "xml": "<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1215.6665954589844,
        "y": 711.6667127609253,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "b6bafc8a.6df098"
            ]
        ]
    },
    {
        "id": "b6bafc8a.6df098",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1445.6666069030762,
        "y": 711.0000257492065,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "eac623e8.5e60c8"
            ]
        ]
    },
    {
        "id": "c81a4e60.7d0e28",
        "type": "set",
        "name": "set vnf-index to -1",
        "xml": "<set>\n<parameter name='vnf-index' value='-1' />\n",
        "comments": "",
        "x": 510.66666412353516,
        "y": 625.6666069030762,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "5d5edd84.2d5f2c",
        "type": "set",
        "name": "set vnf-index to idx",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1767.3332443237305,
        "y": 681.9999837875366,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "a8e5db24.a73738",
        "type": "switchNode",
        "name": "switch vnf-index",
        "xml": "<switch test='`$vnf-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 500.6666717529297,
        "y": 762.3333034515381,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "87ecd247.e52678"
            ]
        ]
    },
    {
        "id": "87ecd247.e52678",
        "type": "outcome",
        "name": "-1",
        "xml": "<outcome value='-1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 679.000057220459,
        "y": 761.6666793823242,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "4e06f17a.d0856"
            ]
        ]
    },
    {
        "id": "4e06f17a.d0856",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find VNF ID ' + $vf-module-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'`\" />\n",
        "comments": "",
        "x": 838.9999656677246,
        "y": 760.9999828338623,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "22e5e45e.411d54",
        "type": "switchNode",
        "name": "switch vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 517.3333930969238,
        "y": 1392.3334999084473,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "14229ff2.8aa128",
                "b10cf2c1.50f1b"
            ]
        ]
    },
    {
        "id": "14229ff2.8aa128",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 774.7143478393555,
        "y": 1359.4762735366821,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "bfd42049.5713c8"
            ]
        ]
    },
    {
        "id": "bfd42049.5713c8",
        "type": "set",
        "name": "set vf-module-index=0",
        "xml": "<set>\n<parameter name='vf-module-index' value='0' />\n",
        "comments": "",
        "x": 962.3333854675293,
        "y": 1360.143048286438,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "b10cf2c1.50f1b",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 775.1428909301758,
        "y": 1423.762131690979,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "4d58fe6c.1bc33"
            ]
        ]
    },
    {
        "id": "82cd745.5985888",
        "type": "set",
        "name": "set vf-module-index = vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-index' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n",
        "comments": "",
        "x": 1160.3334312438965,
        "y": 1403.9525270462036,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "f5e9c444.577ec8",
        "type": "for",
        "name": "for each existing VF module",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1119.428524017334,
        "y": 1448.0477571487427,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "77f0e5e3.b50b0c"
            ]
        ]
    },
    {
        "id": "4d58fe6c.1bc33",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 911.8571701049805,
        "y": 1423.7620573043823,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "82cd745.5985888",
                "f5e9c444.577ec8"
            ]
        ]
    },
    {
        "id": "77f0e5e3.b50b0c",
        "type": "switchNode",
        "name": "switch vf-module-information.vf-module-id == service-data.vnfs.vnf[].vf-modules.vf-module[].vf-module-id",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.vf-module-id == $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1623.0476264953613,
        "y": 1447.6191682815552,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "d89d248c.26c058"
            ]
        ]
    },
    {
        "id": "d89d248c.26c058",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2065.666675567627,
        "y": 1447.190619468689,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "52475e31.0d704"
            ]
        ]
    },
    {
        "id": "52475e31.0d704",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VF module id ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id\n       + ' already exists, and status is ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.vf-module-level-oper-status.order-status`\" />\n",
        "comments": "",
        "x": 2217.5715560913086,
        "y": 1447.1906061172485,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "d2a9bffe.3868f",
        "type": "comment",
        "name": "make sure this VF module doesn't exist already",
        "info": "",
        "comments": "",
        "x": 1649.4999732971191,
        "y": 1402.246660232544,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "aab26fce.f8257",
        "type": "set",
        "name": "set new vf-module_length",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length' value='`$vf-module-index + 1`' />\n",
        "comments": "",
        "x": 527.9999732971191,
        "y": 1503.3333549499512,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "d90a1287.58a548",
        "type": "set",
        "name": "set vf-module-topology data",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-id' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name' value='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-type' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-type`' />\n<parameter name='tmp.vf-module-topology.tenant' value='`$vf-module-topology-operation-input.vf-module-request-input.tenant`' />\n<parameter name='tmp.vf-module-topology.aic-cloud-region' value='`$vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`' />\n",
        "comments": "",
        "x": 534.4999923706055,
        "y": 1615.8334617614746,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "52b2c2fd.f94b84",
        "type": "set",
        "name": "set aic-clli",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli'\n   value='`$aai-uid-split[$aai-uid-split_length - 1]`' />\n",
        "comments": "",
        "x": 1295.4522514343262,
        "y": 1775.071388244629,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "beda92ef.691fd8",
        "type": "switchNode",
        "name": "switch aic-clli",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 494.4999122619629,
        "y": 1889.0237283706665,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f0c65b19.86b048"
            ]
        ]
    },
    {
        "id": "f0c65b19.86b048",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 639.7856025695801,
        "y": 1889.0237970352173,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "dcf514cb.dd0c78"
            ]
        ]
    },
    {
        "id": "dcf514cb.dd0c78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find aic-clli in AAI for aic-cloud-region ' + $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`\" />\n",
        "comments": "",
        "x": 786.9284629821777,
        "y": 1888.5952310562134,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "68d89a29.07cf94",
        "type": "get-resource",
        "name": "get-resource cloud region",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"cloud-region\" \n\t\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner AND \n\t\t     cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\"\n        pfx='aai.cloud-region' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 533.3571281433105,
        "y": 1689.1669998168945,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "70243d82.24a30c",
                "f46b3e9e.8d6668"
            ]
        ]
    },
    {
        "id": "f46b3e9e.8d6668",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 747.6033210754395,
        "y": 1707.317855834961,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "91f2a24b.1b4878"
            ]
        ]
    },
    {
        "id": "91f2a24b.1b4878",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving cloud region from AAI\" />\n",
        "comments": "",
        "x": 922.6032943725586,
        "y": 1707.317892074585,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "70243d82.24a30c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 756.5319175720215,
        "y": 1665.6035890579224,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "19c79205.64aec6"
            ]
        ]
    },
    {
        "id": "19c79205.64aec6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cloud region not found in AAI\" />\n",
        "comments": "",
        "x": 922.8811950683594,
        "y": 1664.9091663360596,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "eac623e8.5e60c8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1594.0000686645508,
        "y": 709.9197244644165,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "5d5edd84.2d5f2c",
                "cf8fe3f6.94c17"
            ]
        ]
    },
    {
        "id": "cf8fe3f6.94c17",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 1729.0000343322754,
        "y": 731.5863103866577,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "f023a409.07cdc8",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$db.vf-module-model.invariant-uuid`' />\n",
        "comments": "",
        "x": 908.833251953125,
        "y": 1930.4197216033936,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "2568cf35.f17b4",
        "type": "switchNode",
        "name": "switch input model-invariant-uuid",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 552.6903266906738,
        "y": 1953.2441654205322,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "2966e953.50db6e",
                "aa0220f1.1c7508"
            ]
        ]
    },
    {
        "id": "2966e953.50db6e",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 758.3569984436035,
        "y": 1930.387128829956,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f023a409.07cdc8"
            ]
        ]
    },
    {
        "id": "aa0220f1.1c7508",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 759.7855949401855,
        "y": 1974.6727199554443,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "36a1b2f5.8b27ee"
            ]
        ]
    },
    {
        "id": "36a1b2f5.8b27ee",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`' />\n",
        "comments": "",
        "x": 914.0713310241699,
        "y": 1974.1012921333313,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "f5ac6aff.db1c88",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$db.vf-module-model.uuid`' />\n",
        "comments": "",
        "x": 909.7855224609375,
        "y": 2018.9583978652954,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "2930947a.5fb83c",
        "type": "switchNode",
        "name": "switch input model-uuid",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 525.3093452453613,
        "y": 2041.7829027175903,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "b3c44516.bf01f",
                "c8c7af7f.bda348"
            ]
        ]
    },
    {
        "id": "b3c44516.bf01f",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 759.3093185424805,
        "y": 2018.9258346557617,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f5ac6aff.db1c88"
            ]
        ]
    },
    {
        "id": "c8c7af7f.bda348",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 760.7379150390625,
        "y": 2063.21142578125,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "9ee74458.70cbf8"
            ]
        ]
    },
    {
        "id": "9ee74458.70cbf8",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`' />\n",
        "comments": "",
        "x": 915.0236511230469,
        "y": 2062.639997959137,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "137c0b44.9e7df5",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$db.vf-module-model.version`' />\n",
        "comments": "",
        "x": 906.9284553527832,
        "y": 2107.815605163574,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "50b9a90a.fc82d",
        "type": "switchNode",
        "name": "switch input model-version",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 533.4522171020508,
        "y": 2130.640049934387,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "1eea34fe.5390a3",
                "6c98f90.4d63188"
            ]
        ]
    },
    {
        "id": "1eea34fe.5390a3",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 756.4522018432617,
        "y": 2107.7830123901367,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "137c0b44.9e7df5"
            ]
        ]
    },
    {
        "id": "6c98f90.4d63188",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 757.8807983398438,
        "y": 2152.068603515625,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "699947d7.d4326"
            ]
        ]
    },
    {
        "id": "699947d7.d4326",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`' />\n",
        "comments": "",
        "x": 912.1665344238281,
        "y": 2151.497175693512,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "a7fd32d7.026dc8",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$db.vf-module-model.name`' />\n",
        "comments": "",
        "x": 906.9284553527832,
        "y": 2194.958427429199,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "23cc94b1.59977c",
        "type": "switchNode",
        "name": "switch input model-name",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 528.4522171020508,
        "y": 2217.782872200012,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "e3af7baa.c4981",
                "3ab505bb.0b8a4a"
            ]
        ]
    },
    {
        "id": "e3af7baa.c4981",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 756.4522018432617,
        "y": 2194.9258346557617,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "a7fd32d7.026dc8"
            ]
        ]
    },
    {
        "id": "3ab505bb.0b8a4a",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 757.8807983398438,
        "y": 2239.21142578125,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "2d788c97.c9e78c"
            ]
        ]
    },
    {
        "id": "2d788c97.c9e78c",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`' />\n",
        "comments": "",
        "x": 912.1665344238281,
        "y": 2238.639997959137,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "d4c27c38.cb815",
        "type": "set",
        "name": "set model-customization-uuid",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-customization-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`' />\n",
        "comments": "",
        "x": 542.9045524597168,
        "y": 2290.2918615341187,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "83666c5c.749a58",
        "type": "set",
        "name": "set vf-module-id",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id'\n   value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n",
        "comments": "",
        "x": 496.09519958496094,
        "y": 1559.015037536621,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "9931e32c.9b539",
        "type": "for",
        "name": "for each cloud-region relationship",
        "xml": "<for index='idx' start='0' end='`$aai.cloud-region.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 555.6109428405762,
        "y": 1777.673683166504,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "c780cafa.90153"
            ]
        ]
    },
    {
        "id": "c780cafa.90153",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$aai.cloud-region.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 803.2894859313965,
        "y": 1777.4236125946045,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "229e7db2.d0a45a"
            ]
        ]
    },
    {
        "id": "229e7db2.d0a45a",
        "type": "outcome",
        "name": "complex",
        "xml": "<outcome value='complex'>\n",
        "comments": "",
        "outputs": 1,
        "x": 972.7538070678711,
        "y": 1776.8164348602295,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "acb46213.14fd98"
            ]
        ]
    },
    {
        "id": "f7e18dd6.c3ff2",
        "type": "execute",
        "name": "split related-link",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split'>\n   <parameter name='ctx_memory_result_key' value='aai-uid-split' />\n   <parameter name='original_string' value='`$aai.cloud-region.relationship-list.relationship[$idx].related-link`' />\n   <parameter name='regex' value='/' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1312.848964691162,
        "y": 1731.2450103759766,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "acb46213.14fd98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1132.51566696167,
        "y": 1777.9117984771729,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f7e18dd6.c3ff2",
                "c0d0286c.f8db38",
                "52b2c2fd.f94b84"
            ]
        ]
    },
    {
        "id": "c0d0286c.f8db38",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 1282.5156288146973,
        "y": 1821.2450952529907,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "8e5c6ccb.163dc",
        "type": "execute",
        "name": "execute PropertiesNode",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 563.047607421875,
        "y": 179.5238037109375,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "8005f008.78f808",
        "type": "set",
        "name": "set order-status to PendingCreate",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n",
        "comments": "",
        "x": 438.2622375488281,
        "y": 7386.879996299744,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "8fd60795.26d88",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 377.8335418701172,
        "y": 7500.498326301575,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "d3f07b7.dd74b88",
        "type": "set",
        "name": "copy input data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.sdnc-request-header.'\n   value='$vf-module-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.request-information.'\n   value='$vf-module-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.service-information.'\n   value='$vf-module-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vnf-information.'\n   value='$vf-module-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.'\n   value='$vf-module-topology-operation-input.vf-module-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.'\n   value='$vf-module-topology-operation-input.vf-module-request-input.' />\n\n",
        "comments": "",
        "x": 394.11924743652344,
        "y": 7243.228453099728,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "3a0e8e07.615d92",
        "type": "set",
        "name": "copy vf-module-topology data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.' value='tmp.vf-module-topology.' />\n",
        "comments": "",
        "x": 439.00025177001953,
        "y": 7195.013965070248,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "e1af8d51.2ba338",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmodule.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 372.71449279785156,
        "y": 7452.728142738342,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "a3e2c0ba.ee212",
        "type": "save",
        "name": "update vf-module",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"vf-module-name\" value=\"`$tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name`\" />\n<parameter name=\"model-invariant-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-uuid`\" />\n<parameter name=\"model-customization-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-customization-uuid`\" />\n<parameter name=\"selflink\" value=\"`$vf-module-object-path`\" />\n<parameter name=\"automated-assignment\" value=\"`$automated-assignment`\" />",
        "comments": "",
        "outputs": 1,
        "x": 458.1429786682129,
        "y": 4397.015618920326,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ab0703e.11e55",
                "f03457b2.f371"
            ]
        ]
    },
    {
        "id": "e60106b.28aadf8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No vf-module found in AAI for vf module ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n",
        "comments": "",
        "x": 963.1906547546387,
        "y": 4431.777049601078,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "ab0703e.11e55",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 633.2146186828613,
        "y": 4365.396240830421,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "16daf1fb.74eafe"
            ]
        ]
    },
    {
        "id": "f03457b2.f371",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 641.7859916687012,
        "y": 4434.015330851078,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "cf4b3a59.c0e438"
            ]
        ]
    },
    {
        "id": "9f7ab13.96daed",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module in AAI\" />\n",
        "comments": "",
        "x": 968.2145729064941,
        "y": 4383.53979742527,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "32580d0f.1a87f2",
        "type": "set",
        "name": "set vf-module-object-path",
        "xml": "<set>\n<parameter name='vf-module-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $vf-module-topology-operation-input.vf-module-information.vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology/'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n",
        "comments": "",
        "x": 481.80978775024414,
        "y": 4272.539847970009,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "c0d1ee17.6f56f",
        "type": "save",
        "name": "save vf-module relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module:relationship-list\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1251.8335342407227,
        "y": 5955.168013334274,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "7141904.0c5e2f",
                "2951128e.c9a6fe"
            ]
        ]
    },
    {
        "id": "7141904.0c5e2f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1471.666877746582,
        "y": 5926.039757490158,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ba15facd.605eb8"
            ]
        ]
    },
    {
        "id": "2951128e.c9a6fe",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1480.238410949707,
        "y": 5978.658901929855,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "18873198.c57256"
            ]
        ]
    },
    {
        "id": "a267bbc6.a0ea2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module relationships in AAI\" />\n",
        "comments": "",
        "x": 1806.6670112609863,
        "y": 5945.849653959274,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "be655d76.fadfe8",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 431.50025939941406,
        "y": 5720.501566171646,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "9ef55446.fb8ff"
            ]
        ]
    },
    {
        "id": "b6dec962.68a7c",
        "type": "for",
        "name": "for each vm-network",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 828.5002708435059,
        "y": 6139.1683983802795,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "338a7f2e.d4c058"
            ]
        ]
    },
    {
        "id": "ab32c032.f2d458",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No l3-network found in AAI for network ID '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id`\" />\n",
        "comments": "",
        "x": 1808.5003852844238,
        "y": 5995.834194898605,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "a5b2add1.64cc98",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 405.92879486083984,
        "y": 7087.547621667385,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "e36a023.cd3fb"
            ]
        ]
    },
    {
        "id": "e36a023.cd3fb",
        "type": "for",
        "name": "for each vm",
        "xml": "<for index='vm-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-count`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 600.928825378418,
        "y": 7086.880629479885,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "434730cd.aa95a"
            ]
        ]
    },
    {
        "id": "7d25dc74.1b248c",
        "type": "save",
        "name": "save VIPR_CONFIGURATION",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource\" resource=\"SQL\"\nkey=\"INSERT INTO VIPR_CONFIGURATION (vnf_id, vnf_name, ecomp_service_instance_id, vm_name, cloud_region_id, cloud_owner) VALUES ( $service-data.vnfs.vnf[$vnf-index].vnf-id , $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-name , $service-data.service-information.service-instance-id , $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index] , $tmp.vf-module-topology.aic-cloud-region , $prop.cloud-region.cloud-owner )\" >",
        "comments": "",
        "outputs": 1,
        "x": 992.5955276489258,
        "y": 7109.548279702663,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "aa481da1.69dd38"
            ]
        ]
    },
    {
        "id": "5fef6728.83d2",
        "type": "comment",
        "name": "Not a failure",
        "info": "",
        "comments": "",
        "x": 1512.5954284667969,
        "y": 7109.548284471035,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "aa481da1.69dd38",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1202.5955123901367,
        "y": 7109.548429429531,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "b7f52d22.6f1a6"
            ]
        ]
    },
    {
        "id": "b7f52d22.6f1a6",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1345.928955078125,
        "y": 7109.548267304897,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "dd8f2dbc.1424c8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1375.9290771484375,
        "y": 7060.87998098135,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "105602e9.282d2d"
            ]
        ]
    },
    {
        "id": "d079e008.5f24",
        "type": "comment",
        "name": "Not a failure",
        "info": "",
        "comments": "",
        "x": 1699.2621307373047,
        "y": 7059.213803231716,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "105602e9.282d2d",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1521.929012298584,
        "y": 7060.880614221096,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "434730cd.aa95a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 769.2622184753418,
        "y": 7085.8804740309715,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "c4265324.dc984",
                "7d25dc74.1b248c"
            ]
        ]
    },
    {
        "id": "c4265324.dc984",
        "type": "delete",
        "name": "delete any pre-existing records in VIPR_CONFIGURATION",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='DELETE from VIPR_CONFIGURATION WHERE vnf_id = $service-data.vnfs.vnf[$vnf-index].vnf-id\n     AND ecomp_service_instance_id = $service-data.service-information.service-instance-id\n     AND vm_name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index]' >",
        "comments": "",
        "outputs": 1,
        "x": 1082.5955429077148,
        "y": 7061.214613854885,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "dd8f2dbc.1424c8"
            ]
        ]
    },
    {
        "id": "16daf1fb.74eafe",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 791.500186920166,
        "y": 4365.16691172123,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "9f7ab13.96daed",
                "99a0939e.edd618"
            ]
        ]
    },
    {
        "id": "cf4b3a59.c0e438",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 792.5001029968262,
        "y": 4431.833201944828,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "e60106b.28aadf8",
                "99a0939e.edd618"
            ]
        ]
    },
    {
        "id": "ba15facd.605eb8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1640.1668815612793,
        "y": 5925.834027051926,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "a267bbc6.a0ea2",
                "89b0c713.c7a1a8"
            ]
        ]
    },
    {
        "id": "18873198.c57256",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1635.1668815612793,
        "y": 5978.833869695663,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ab32c032.f2d458",
                "89b0c713.c7a1a8"
            ]
        ]
    },
    {
        "id": "c68814e7.3e7978",
        "type": "execute",
        "name": "execute RestApiCallNode - get preload-list",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value=\"`$prop.controller.url + $prop.restapi.preloadinformation + $vf-module-topology-operation-input.vf-module-request-input.vf-module-name + '/vf-module'`\" />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-preload\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 977.3333778381348,
        "y": 2435.1672344207764,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "7721826a.263bbc",
                "1da5a68e.f50659"
            ]
        ]
    },
    {
        "id": "7721826a.263bbc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1240.6666933695474,
        "y": 2398.5004507700596,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "744a6e59.c4d87"
            ]
        ]
    },
    {
        "id": "1da5a68e.f50659",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1243.9999809265137,
        "y": 2473.50044631958,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "1a97623c.4236ee"
            ]
        ]
    },
    {
        "id": "744a6e59.c4d87",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1402.333381652832,
        "y": 2396.8337354660034,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "a9ea6465.0e1a"
            ]
        ]
    },
    {
        "id": "1a97623c.4236ee",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1398.9999885559082,
        "y": 2473.5002880096436,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "7895ddc8.adca34"
            ]
        ]
    },
    {
        "id": "a9ea6465.0e1a",
        "type": "switchNode",
        "name": "switch mdsal-preload.response-code",
        "xml": "<switch test='`$mdsal-preload.response-code`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1630.6666831970215,
        "y": 2396.833776473999,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6fc37eb4.61cff8",
                "e6efb736.3838e8"
            ]
        ]
    },
    {
        "id": "6fc37eb4.61cff8",
        "type": "outcome",
        "name": "404 (not found)",
        "xml": "<outcome value='404'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1882.3334197998047,
        "y": 2360.1671504974365,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "751c0b43.04587c"
            ]
        ]
    },
    {
        "id": "751c0b43.04587c",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-operation-assign-no-preload",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-operation-assign-no-preload' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2278.9998893737793,
        "y": 2358.5002784729004,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "a300226a.2a6a9"
            ]
        ]
    },
    {
        "id": "a300226a.2a6a9",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2649.0000381469727,
        "y": 2356.8338146209717,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "854c8589.9f57c8"
            ]
        ]
    },
    {
        "id": "4b1cfdbb.d134fc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n",
        "comments": "",
        "x": 2957.3334159851074,
        "y": 2388.500551223755,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "e6efb736.3838e8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1857.3334999084473,
        "y": 2416.833641052246,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ce26b35e.dec2c"
            ]
        ]
    },
    {
        "id": "fae1cd84.a9bd78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving preload-information\" />\n",
        "comments": "",
        "x": 2170.666404724121,
        "y": 2433.5000648498535,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "7895ddc8.adca34",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-operation-assign-preload",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-operation-assign-preload' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1762.3332786560059,
        "y": 2475.1670360565186,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "abc28c19.d114f"
            ]
        ]
    },
    {
        "id": "abc28c19.d114f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2118.000141143799,
        "y": 2473.500654220581,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "e2bf8646.281a5"
            ]
        ]
    },
    {
        "id": "19d62bdc.450b0c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n",
        "comments": "",
        "x": 2426.333393096924,
        "y": 2495.167549133301,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "9ef55446.fb8ff",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 622.0003280639648,
        "y": 5721.334800958633,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "b6dec962.68a7c",
                "95f7cff4.36b8a"
            ]
        ]
    },
    {
        "id": "95f7cff4.36b8a",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 873.0003776550293,
        "y": 4926.000892162323,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f3b94caa.1b1fa8"
            ]
        ]
    },
    {
        "id": "d289e33f.82de9",
        "type": "save",
        "name": "save vnfc to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vnfc\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\" >\n<parameter name=\"vnfc-name\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n<parameter name=\"nfc-naming-code\" value=\"`$tmp.nfc-naming-code`\" />\n<parameter name=\"nfc-function\" value=\"`$tmp.nfc-function`\" />\n<parameter name=\"model-invariant-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].uuid`\" />\n<parameter name=\"model-customization-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].model-customization-uuid`\" />\n<parameter name=\"orchestration-status\" value=\"`PendingCreate`\" />\n<parameter name=\"in-maint\" value=\"true\" />\n<parameter name=\"prov-status\" value=\"`PREPROV`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1599.00044631958,
        "y": 4734.334822654724,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "bf47efb9.ef7f",
                "569de2d6.f82d54"
            ]
        ]
    },
    {
        "id": "f3b94caa.1b1fa8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1041.3336791992188,
        "y": 4926.667719364166,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "64a79036.af227",
                "1453c597.eede0a",
                "4ddfdd9a.1fb534",
                "3812039f.e87b54",
                "c84f1dbb.f047b",
                "1a6fc532.9edecb"
            ]
        ]
    },
    {
        "id": "bf47efb9.ef7f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1790.0004844665527,
        "y": 4686.66815662384,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6e86a94c.fb3c98"
            ]
        ]
    },
    {
        "id": "f7569ccb.527fb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vnfc to AAI\" />\n",
        "comments": "",
        "x": 2129.0006370544434,
        "y": 4720.811412215233,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "6e86a94c.fb3c98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1955.1671714782715,
        "y": 4700.79598993063,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f7569ccb.527fb8",
                "5306b235.f40434"
            ]
        ]
    },
    {
        "id": "4ddfdd9a.1fb534",
        "type": "save",
        "name": "save vnfc relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vnfc:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"generic-vnf\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/generic-vnfs/generic-vnf/' +\n        $vf-module-topology-operation-input.vnf-information.vnf-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vf-module\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/generic-vnfs/generic-vnf/' +\n        $vf-module-topology-operation-input.vnf-information.vnf-id +\n        '/vf-modules/vf-module/' +\n        $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1265.9049644470215,
        "y": 4834.954054355621,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "c2be51fa.60e598",
                "2a3d4c91.ac8394"
            ]
        ]
    },
    {
        "id": "3a0d84a1.dc1034",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vnfc relationships in AAI\" />\n",
        "comments": "",
        "x": 1775.904899597168,
        "y": 4826.620890140533,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "afe00e2d.a0f838",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vnfc relationships\" />\n",
        "comments": "",
        "x": 1771.0718078613281,
        "y": 4878.272097110748,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "c56add47.3caa38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1597.7381553649902,
        "y": 4808.271678447723,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "3a0d84a1.dc1034",
                "5306b235.f40434"
            ]
        ]
    },
    {
        "id": "efc908b3.5b4f1",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1597.7382316589355,
        "y": 4861.271437168121,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "afe00e2d.a0f838",
                "5306b235.f40434"
            ]
        ]
    },
    {
        "id": "c2be51fa.60e598",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1440.9050407409668,
        "y": 4808.287348270416,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "c56add47.3caa38"
            ]
        ]
    },
    {
        "id": "2a3d4c91.ac8394",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1449.4765739440918,
        "y": 4860.9064927101135,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "efc908b3.5b4f1"
            ]
        ]
    },
    {
        "id": "64a79036.af227",
        "type": "for",
        "name": "for each vnfc-network-role",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1263.3810844421387,
        "y": 5251.810462474823,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "c0124012.781378"
            ]
        ]
    },
    {
        "id": "a146e36e.bc5ed",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmoduleb.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 483.9999885559082,
        "y": 2559.7142844200134,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "5fca11f4.669f4",
        "type": "for",
        "name": "for each vnfc-subnetwork-role",
        "xml": "<for silentFailure='true' index='subnet-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1719.3336219787598,
        "y": 5215.00089597702,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "85888402.2be4b8"
            ]
        ]
    },
    {
        "id": "85888402.2be4b8",
        "type": "for",
        "name": "for each vnfc-address-family",
        "xml": "<for silentFailure='true' index='address-family-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1986.6669654846191,
        "y": 5214.00138425827,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "9a087527.d5ab28"
            ]
        ]
    },
    {
        "id": "1e939e61.89f482",
        "type": "for",
        "name": "for each vnfc-ip-address",
        "xml": "<for silentFailure='true' index='address-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2418.666576385498,
        "y": 5280.667083740234,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "7bcb5345.4ee26c"
            ]
        ]
    },
    {
        "id": "9a087527.d5ab28",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2197.666736602783,
        "y": 5214.00084066391,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "cb5d5c29.e70c1",
                "1e939e61.89f482"
            ]
        ]
    },
    {
        "id": "cb5d5c29.e70c1",
        "type": "set",
        "name": "set tmp.address-family",
        "xml": "<set>\n<parameter name='tmp.address-family'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-address-family`' />\n",
        "comments": "",
        "x": 2417.667064666748,
        "y": 5134.000738143921,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "7bcb5345.4ee26c",
        "type": "switchNode",
        "name": "switch address family",
        "xml": "<switch test='`$tmp.address-family`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2657.6666679382324,
        "y": 5279.000905990601,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "a5ee9f3c.a8b118",
                "cbf318c7.aa7798"
            ]
        ]
    },
    {
        "id": "a5ee9f3c.a8b118",
        "type": "outcome",
        "name": "ipv4",
        "xml": "<outcome value='ipv4'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2854.809673309326,
        "y": 5182.572166442871,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "af8d9d5c.4e2818"
            ]
        ]
    },
    {
        "id": "cbf318c7.aa7798",
        "type": "outcome",
        "name": "ipv6",
        "xml": "<outcome value='ipv6'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2852.4287452697754,
        "y": 5362.334197998047,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "38fedc99.f67e84"
            ]
        ]
    },
    {
        "id": "8093133b.217ed8",
        "type": "comment",
        "name": "Fixed IPs",
        "info": "",
        "comments": "",
        "x": 1736.3336372375488,
        "y": 5176.668272972107,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "512883d4.a75cdc",
        "type": "save",
        "name": "save l3-interface-ipv4-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-interface-ipv4-address-list\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv4-address-list.l3-interface-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\" >\n<parameter name=\"l3-interface-ipv4-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address`\" />\n<parameter name=\"l3-interface-ipv4-prefix-length\" value=\"32\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3298.1428031921387,
        "y": 5130.905246416729,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "caeff4c7.0f0308"
            ]
        ]
    },
    {
        "id": "af8d9d5c.4e2818",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3004.809673309326,
        "y": 5182.572085062664,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "512883d4.a75cdc",
                "8418bbb6.06414"
            ]
        ]
    },
    {
        "id": "31b70f0e.de26f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating l3-interface-ipv4-address-list object in AAI\" />\n",
        "comments": "",
        "x": 3881.4763221740723,
        "y": 5149.238905588787,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "544248a1.55df98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3711.642677307129,
        "y": 5130.88973871867,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "31b70f0e.de26f",
                "c4597b10.c8c598"
            ]
        ]
    },
    {
        "id": "caeff4c7.0f0308",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3554.8095626831055,
        "y": 5130.905408541363,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "544248a1.55df98"
            ]
        ]
    },
    {
        "id": "8418bbb6.06414",
        "type": "save",
        "name": "save l3-interface-ipv4-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"l3-interface-ipv4-address-list:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv4-address-list.l3-interface-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id +\n        '/subnets/subnet/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3293.1430473327637,
        "y": 5229.238665262859,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ede48cf8.ee34a",
                "6164433f.493c0c"
            ]
        ]
    },
    {
        "id": "4c64363c.6d06a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating l3-interface-ipv4-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 3879.809429168701,
        "y": 5220.905337015789,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "2d13a4f0.bd25d4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating l3-interface-ipv4-address-list relationships\" />\n",
        "comments": "",
        "x": 3879.976291656494,
        "y": 5270.8897949854545,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "c041ca58.d5cef",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3713.309299468994,
        "y": 5200.88971010844,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "4c64363c.6d06a",
                "c4597b10.c8c598"
            ]
        ]
    },
    {
        "id": "99e2f815.bdbdd8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3713.3093757629395,
        "y": 5253.889468828838,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "2d13a4f0.bd25d4",
                "c4597b10.c8c598"
            ]
        ]
    },
    {
        "id": "ede48cf8.ee34a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3556.4761848449707,
        "y": 5200.905379931133,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "c041ca58.d5cef"
            ]
        ]
    },
    {
        "id": "6164433f.493c0c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3565.0477180480957,
        "y": 5253.5245243708305,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "99e2f815.bdbdd8"
            ]
        ]
    },
    {
        "id": "f831731c.2fd57",
        "type": "save",
        "name": "save l3-interface-ipv6-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-interface-ipv6-address-list\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv6-address-list.l3-interface-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\" >\n<parameter name=\"l3-interface-ipv6-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address`\" />\n<parameter name=\"l3-interface-ipv6-prefix-length\" value=\"128\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3296.9525413513184,
        "y": 5309.953302383423,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "2bc07238.f95d5e"
            ]
        ]
    },
    {
        "id": "38fedc99.f67e84",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3003.619411468506,
        "y": 5361.620141029358,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f831731c.2fd57",
                "b7a7473f.797278"
            ]
        ]
    },
    {
        "id": "cf91be24.b998f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating l3-interface-ipv6-address-list object in AAI\" />\n",
        "comments": "",
        "x": 3880.286060333252,
        "y": 5328.286961555481,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "ea259af2.224e08",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3710.4524154663086,
        "y": 5309.937794685364,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "cf91be24.b998f",
                "c4597b10.c8c598"
            ]
        ]
    },
    {
        "id": "2bc07238.f95d5e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3553.619300842285,
        "y": 5309.953464508057,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ea259af2.224e08"
            ]
        ]
    },
    {
        "id": "b7a7473f.797278",
        "type": "save",
        "name": "save l3-interface-ipv6-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"l3-interface-ipv6-address-list:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv6-address-list.l3-interface-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id +\n        '/subnets/subnet/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3291.9527854919434,
        "y": 5408.286721229553,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "d5743cde.2a99a",
                "654cf89c.3dd958"
            ]
        ]
    },
    {
        "id": "6dc75c34.cbb114",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating l3-interface-ipv6-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 3878.619167327881,
        "y": 5399.953392982483,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "1830af79.d932b9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating l3-interface-ipv6-address-list relationships\" />\n",
        "comments": "",
        "x": 3882.1193885803223,
        "y": 5446.604409456253,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "bf7ed658.687448",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3712.119037628174,
        "y": 5379.937766075134,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6dc75c34.cbb114",
                "c4597b10.c8c598"
            ]
        ]
    },
    {
        "id": "6452b9f7.7198e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3712.119113922119,
        "y": 5432.937524795532,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "1830af79.d932b9",
                "c4597b10.c8c598"
            ]
        ]
    },
    {
        "id": "d5743cde.2a99a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3555.2859230041504,
        "y": 5379.953435897827,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "bf7ed658.687448"
            ]
        ]
    },
    {
        "id": "654cf89c.3dd958",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3563.8574562072754,
        "y": 5432.572580337524,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6452b9f7.7198e"
            ]
        ]
    },
    {
        "id": "338a7f2e.d4c058",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1018.3335914611816,
        "y": 6138.6678376197815,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "cdfadd41.c27e88",
                "c0d1ee17.6f56f",
                "29da88d2.619828",
                "778d41ae.068ed"
            ]
        ]
    },
    {
        "id": "f73cf5ca.890db",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1666.3337669372559,
        "y": 6261.001585483551,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f728c8ba.23c06"
            ]
        ]
    },
    {
        "id": "1824604b.2416d",
        "type": "save",
        "name": "save vip-ipv4-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vip-ipv4-address-list\" \n\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\" >\n<parameter name=\"vip-ipv4-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]`\" />\n<parameter name=\"vip-ipv4-prefix-length\" value=\"32\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1749.3336219787598,
        "y": 6092.334597110748,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "438a7d62.57f234",
                "1ad76478.51609c"
            ]
        ]
    },
    {
        "id": "29da88d2.619828",
        "type": "for",
        "name": "for each floating ipv4 address",
        "xml": "<for silentFailure='true' index='ipv4-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1257.3336143493652,
        "y": 6150.334669589996,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "37c98a04.bb93de"
            ]
        ]
    },
    {
        "id": "37c98a04.bb93de",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1483.3336143493652,
        "y": 6148.334669589996,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "1824604b.2416d",
                "83dc1a75.df99f",
                "f73cf5ca.890db"
            ]
        ]
    },
    {
        "id": "9e39d198.93b71",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vip-ipv4-address-list in AAI\" />\n",
        "comments": "",
        "x": 2311.3336219787598,
        "y": 6082.334597110748,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "61f82df6.e1bc7c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error saving vip-ipv4-address-list\" />\n",
        "comments": "",
        "x": 2311.5004844665527,
        "y": 6132.319055080414,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "70e4e939.7a5698",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2144.8334922790527,
        "y": 6062.3189702034,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "9e39d198.93b71",
                "197c2a2b.1fd476"
            ]
        ]
    },
    {
        "id": "122e2a34.2cb72e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2144.833568572998,
        "y": 6115.318728923798,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "61f82df6.e1bc7c",
                "197c2a2b.1fd476"
            ]
        ]
    },
    {
        "id": "438a7d62.57f234",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1988.0003776550293,
        "y": 6062.3346400260925,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "70e4e939.7a5698"
            ]
        ]
    },
    {
        "id": "1ad76478.51609c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1996.5719108581543,
        "y": 6114.95378446579,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "122e2a34.2cb72e"
            ]
        ]
    },
    {
        "id": "65898e8.b71e1f",
        "type": "save",
        "name": "save vip-ipv4-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv4-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-id\n        + '/subnets/subnet/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv4-subnet-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vnfc\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2085.000217437744,
        "y": 6205.001260280609,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "402e9d9b.733204",
                "70c9212c.bbca1"
            ]
        ]
    },
    {
        "id": "ace25aed.ae464",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 2654.6666259765625,
        "y": 6197.001229822636,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "31548e06.a1695a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationships\" />\n",
        "comments": "",
        "x": 2654.833595275879,
        "y": 6246.98540353775,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "50f58ee.2b436f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2488.1664962768555,
        "y": 6176.985602915287,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ace25aed.ae464",
                "197c2a2b.1fd476"
            ]
        ]
    },
    {
        "id": "d18b7bf8.606268",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2488.166572570801,
        "y": 6229.985361635685,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "31548e06.a1695a",
                "197c2a2b.1fd476"
            ]
        ]
    },
    {
        "id": "402e9d9b.733204",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2331.333381652832,
        "y": 6177.00127273798,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "50f58ee.2b436f"
            ]
        ]
    },
    {
        "id": "70c9212c.bbca1",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2339.904914855957,
        "y": 6229.620417177677,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "d18b7bf8.606268"
            ]
        ]
    },
    {
        "id": "7fc77ef2.07aa8",
        "type": "save",
        "name": "save vip-ipv6-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vip-ipv6-address-list\" \n\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\" >\n<parameter name=\"vip-ipv6-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]`\" />\n<parameter name=\"vip-ipv6-prefix-length\" value=\"128\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1752.66695022583,
        "y": 6415.667280673981,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "809737d2.f14978",
                "965dffd5.95084"
            ]
        ]
    },
    {
        "id": "778d41ae.068ed",
        "type": "for",
        "name": "for each floating ipv6 address",
        "xml": "<for silentFailure='true' index='ipv6-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1260.6669425964355,
        "y": 6472.667353153229,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "8f96d394.0feec"
            ]
        ]
    },
    {
        "id": "8f96d394.0feec",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1486.6669425964355,
        "y": 6471.667353153229,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "7fc77ef2.07aa8",
                "155a1d21.29a5db",
                "ec86e082.0ebd08"
            ]
        ]
    },
    {
        "id": "6546b9c9.b685b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vip-ipv6-address-list in AAI\" />\n",
        "comments": "",
        "x": 2314.66695022583,
        "y": 6405.667280673981,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "8dfef510.d4b698",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error saving vip-ipv6-address-list\" />\n",
        "comments": "",
        "x": 2314.833812713623,
        "y": 6455.651738643646,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "4ccd550e.0b5b84",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2148.166820526123,
        "y": 6385.651653766632,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6546b9c9.b685b8",
                "197c2a2b.1fd476"
            ]
        ]
    },
    {
        "id": "4638bb37.c9cf24",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2148.1668968200684,
        "y": 6438.65141248703,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "8dfef510.d4b698",
                "197c2a2b.1fd476"
            ]
        ]
    },
    {
        "id": "809737d2.f14978",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1991.3337059020996,
        "y": 6385.667323589325,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "4ccd550e.0b5b84"
            ]
        ]
    },
    {
        "id": "965dffd5.95084",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1999.9052391052246,
        "y": 6438.286468029022,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "4638bb37.c9cf24"
            ]
        ]
    },
    {
        "id": "1bfe393d.78ce37",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv6-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 2648.0002059936523,
        "y": 6518.667331278324,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "8e452db7.9148e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv6-address-list relationships\" />\n",
        "comments": "",
        "x": 2648.1670684814453,
        "y": 6568.65178924799,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "d1798ee3.3c5528",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2481.5000762939453,
        "y": 6498.6517043709755,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "1bfe393d.78ce37",
                "197c2a2b.1fd476"
            ]
        ]
    },
    {
        "id": "6080e54e.a2c7bc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2481.5001525878906,
        "y": 6551.651463091373,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "8e452db7.9148e",
                "197c2a2b.1fd476"
            ]
        ]
    },
    {
        "id": "1eacc679.59eb8a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2324.666961669922,
        "y": 6498.667374193668,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "d1798ee3.3c5528"
            ]
        ]
    },
    {
        "id": "60fbd117.43ed78",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2333.238494873047,
        "y": 6551.286518633366,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6080e54e.a2c7bc"
            ]
        ]
    },
    {
        "id": "870acd7f.91e8a",
        "type": "save",
        "name": "save vip-ipv6-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv6-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-id\n        + '/subnets/subnet/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv6-subnet-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vnfc\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2080.3338050842285,
        "y": 6527.3337931633,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "1eacc679.59eb8a",
                "60fbd117.43ed78"
            ]
        ]
    },
    {
        "id": "99a0939e.edd618",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1136.3334770202637,
        "y": 4335.667186319828,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "5306b235.f40434",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2301.0004234313965,
        "y": 4673.667921423912,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "89b0c713.c7a1a8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2009.6670036315918,
        "y": 5890.667758643627,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "197c2a2b.1fd476",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2958.667133331299,
        "y": 6009.667604923248,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "c4597b10.c8c598",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4278.0001220703125,
        "y": 5057.33368486166,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "1453c597.eede0a",
        "type": "set",
        "name": "set created_flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].created_flag' value='true' />\n",
        "comments": "",
        "x": 1243.0002479553223,
        "y": 4774.6675772070885,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "cdfadd41.c27e88",
        "type": "set",
        "name": "set created-flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].created-flag' value='true' />\n",
        "comments": "",
        "x": 1213.6670036315918,
        "y": 6022.667758643627,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "83dc1a75.df99f",
        "type": "set",
        "name": "set created-ipv4-flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.created-ipv4-flag' value='true' />\n",
        "comments": "",
        "x": 1686.6669692993164,
        "y": 6150.667838513851,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "155a1d21.29a5db",
        "type": "set",
        "name": "set created-ipv6-flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.created-ipv6-flag' value='true' />\n",
        "comments": "",
        "x": 1692.0003051757812,
        "y": 6476.6674417853355,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "569de2d6.f82d54",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1793.0004234313965,
        "y": 4734.667816102505,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6e86a94c.fb3c98"
            ]
        ]
    },
    {
        "id": "cda23fd1.47e1a8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-vlan-tagging-assign",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-vlan-tagging-assign' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 576.6667823791504,
        "y": 6814.667619228363,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "e90bb7c8.08e178"
            ]
        ]
    },
    {
        "id": "e90bb7c8.08e178",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 921.0001983642578,
        "y": 6814.001114368439,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "18d401ff.91ad6e"
            ]
        ]
    },
    {
        "id": "18d401ff.91ad6e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1076.000072479248,
        "y": 6814.000910282135,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "9c285c4.54c07a",
                "53893b7.1824544",
                "1e2c10de.ec2827"
            ]
        ]
    },
    {
        "id": "9c285c4.54c07a",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1424.3333625793457,
        "y": 6759.001330137253,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "53893b7.1824544",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n",
        "comments": "",
        "x": 1252.6668014526367,
        "y": 6857.334558129311,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "1e2c10de.ec2827",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vlantaggingfailure.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1247.6666984558105,
        "y": 6810.667414188385,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "f31d4136.dbad18",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 214.8928680419922,
        "y": 570.5471410751343,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "8e5c6ccb.163dc",
                "76da2351.1e772c",
                "729b2317.d41764",
                "c81a4e60.7d0e28",
                "ebe8b394.b57a1",
                "a8e5db24.a73738",
                "bd911df4.417368",
                "5e3595bc.cfed8c",
                "5eb11d31.97f244",
                "557cfb68.ef7394"
            ]
        ]
    },
    {
        "id": "6758cc3d.63107c",
        "type": "switchNode",
        "name": "switch from-preload",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.from-preload`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 505.90471267700195,
        "y": 2626.142904281616,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "cb04a746.6669f",
                "824ab2b0.df6428"
            ]
        ]
    },
    {
        "id": "cb04a746.6669f",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 677.8094444274902,
        "y": 2603.5239248275757,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "15aec9d4.c06a16"
            ]
        ]
    },
    {
        "id": "824ab2b0.df6428",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 679.4760971069336,
        "y": 2648.523763656616,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "1b5ec8ed.f0fa5f"
            ]
        ]
    },
    {
        "id": "15aec9d4.c06a16",
        "type": "set",
        "name": "set automated-assignment to true",
        "xml": "<set>\n<parameter name='automated-assignment' value='true' />\n",
        "comments": "",
        "x": 892.8094291687012,
        "y": 2601.857095718384,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "1b5ec8ed.f0fa5f",
        "type": "set",
        "name": "set automated-assignment to false",
        "xml": "<set>\n<parameter name='automated-assignment' value='false' />\n",
        "comments": "",
        "x": 891.142749786377,
        "y": 2646.857015609741,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "ec86e082.0ebd08",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1667.4288368225098,
        "y": 6575.547865390778,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "63b023e.b6b035c"
            ]
        ]
    },
    {
        "id": "7edee497.097a8c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Test return\" />\n",
        "comments": "",
        "x": 132.00014877319336,
        "y": 7055.335383474827,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "4f9ff09e.f47468",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 484.66680908203125,
        "y": 3986.3337869644165,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "617011f9.ea2ab"
            ]
        ]
    },
    {
        "id": "617011f9.ea2ab",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 675.166877746582,
        "y": 3987.167021751404,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "83d39866.f1404"
            ]
        ]
    },
    {
        "id": "83d39866.f1404",
        "type": "for",
        "name": "for each vm-network",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 876.6668090820312,
        "y": 3986.3337869644165,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "1bc0649f.f8534b"
            ]
        ]
    },
    {
        "id": "1bc0649f.f8534b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1066.500129699707,
        "y": 3985.8332262039185,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "d88aed65.46a24"
            ]
        ]
    },
    {
        "id": "d88aed65.46a24",
        "type": "get-resource",
        "name": "get-resource VFC_RELATED_NETWORK_ROLE",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VFC_RELATED_NETWORK_ROLE where vfc_customization_uuid = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].model-customization-uuid\n    and network_role = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role'\n  pfx='db.vnf-related-network-role[]'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1356.0001029968262,
        "y": 3984.3338689804077,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "2f7749ca.aec726",
                "e8b4eef1.ffee3"
            ]
        ]
    },
    {
        "id": "2f7749ca.aec726",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1627.00004196167,
        "y": 3889.0005712509155,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "66c6e90.48fb618"
            ]
        ]
    },
    {
        "id": "66c6e90.48fb618",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1774.190559387207,
        "y": 3887.5485858917236,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ec91bd86.5aa968",
                "93d1e771.4e016"
            ]
        ]
    },
    {
        "id": "e8b4eef1.ffee3",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1615.333293914795,
        "y": 4108.667042732239,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "3cdc82f8.a4faee"
            ]
        ]
    },
    {
        "id": "4cc96e52.e6a0c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2033.66654586792,
        "y": 4110.666798591614,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "a85f734e.8216f8",
                "d8f7b669.bdae5",
                "f0b1e50.2419f98",
                "c9e00ddc.ec7f9",
                "5f1709b2.75df38",
                "ed23f3c3.06c99",
                "801aa393.e7c828",
                "bc7278c.42fbb88"
            ]
        ]
    },
    {
        "id": "ec91bd86.5aa968",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VFC_RELATED_NETWORK_ROLE table\" />\n",
        "comments": "",
        "x": 1926.3334159851074,
        "y": 3884.3338232040405,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "d8f7b669.bdae5",
        "type": "for",
        "name": "for each vnf network",
        "xml": "<for silentFailure='true' index='vnf-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2228.6666831970215,
        "y": 3978.000454902649,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ab33d64f.d9b14"
            ]
        ]
    },
    {
        "id": "a85f734e.8216f8",
        "type": "set",
        "name": "set found-related-network to false",
        "xml": "<set>\n<parameter name='found-related-network' value='false' />\n",
        "comments": "",
        "x": 2268.666759490967,
        "y": 3919.6672315597534,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "a7f98828.b1bf6",
        "type": "for",
        "name": "for each related network",
        "xml": "<for silentFailure='true' index='related-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].related-networks.related-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2627.666645050049,
        "y": 3954.666718482971,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ee66934b.2211c"
            ]
        ]
    },
    {
        "id": "ab33d64f.d9b14",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2416.6666831970215,
        "y": 3978.000454902649,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "a7f98828.b1bf6",
                "c6074e1a.a9bd"
            ]
        ]
    },
    {
        "id": "ee66934b.2211c",
        "type": "switchNode",
        "name": "switch network-role matches",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].related-networks.related-network[$related-network-index].network-role\n  == $db.vnf-related-network-role[$db-related-network-index].related-network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2879.666561126709,
        "y": 3954.6667947769165,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6379e03d.d86428"
            ]
        ]
    },
    {
        "id": "3cdc82f8.a4faee",
        "type": "for",
        "name": "for each db related-network",
        "xml": "<for index='db-related-network-index' start='0' end='`$db.vnf-related-network-role_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1819.6666679382324,
        "y": 4109.333790779114,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "4cc96e52.e6a0c8"
            ]
        ]
    },
    {
        "id": "228dd6f5.02d922",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 300.6669120788574,
        "y": 7015.335383474827,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "6379e03d.d86428",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3079.666561126709,
        "y": 3952.6667947769165,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "be891755.bf2fc8"
            ]
        ]
    },
    {
        "id": "be891755.bf2fc8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3233.666561126709,
        "y": 3950.6667947769165,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "b8f64431.0e9ce",
                "dfbc238f.56c8f",
                "742ee78e.6f2f6"
            ]
        ]
    },
    {
        "id": "b8f64431.0e9ce",
        "type": "set",
        "name": "set found-related-network to true",
        "xml": "<set>\n<parameter name='found-related-network' value='true' />\n",
        "comments": "",
        "x": 3465.666721343994,
        "y": 3910.333378791809,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "dfbc238f.56c8f",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 3388.999897003174,
        "y": 3997.0001287460327,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "f0b1e50.2419f98",
        "type": "switchNode",
        "name": "switch found-related-network",
        "xml": "<switch test='`$found-related-network`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2251.6666145324707,
        "y": 4053.666932106018,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "66365547.f331dc"
            ]
        ]
    },
    {
        "id": "66365547.f331dc",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2445.6666145324707,
        "y": 4051.666932106018,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "b53b662c.742d2"
            ]
        ]
    },
    {
        "id": "40a9653b.0b6d7c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find related network '\n      + $db.vnf-related-network-role[$db-related-network-index].related-network-role + ' in vnf-networks'`\" />\n",
        "comments": "",
        "x": 2723.6666145324707,
        "y": 4049.666932106018,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "b53b662c.742d2",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2575.6666145324707,
        "y": 4051.666932106018,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "40a9653b.0b6d7c",
                "93d1e771.4e016"
            ]
        ]
    },
    {
        "id": "93d1e771.4e016",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2668.3334159851074,
        "y": 3814.3338232040405,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "c9e00ddc.ec7f9",
        "type": "set",
        "name": "set is-trunked and segmentation-id in vm-network",
        "xml": "<set>\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].is-trunked'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].is-trunked`' />\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].segmentation-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].segmentation-id`' />\n",
        "comments": "",
        "x": 2313.6666145324707,
        "y": 4101.666932106018,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "ed23f3c3.06c99",
        "type": "switchNode",
        "name": "switch rn-index",
        "xml": "<switch test='`$rn-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2201.6666145324707,
        "y": 4209.666932106018,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "d39e156e.f32e6"
            ]
        ]
    },
    {
        "id": "5f1709b2.75df38",
        "type": "set",
        "name": "set rn-index to related network length",
        "xml": "<set>\n<parameter name='rn-index' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length`' />\n",
        "comments": "",
        "x": 2273.6666145324707,
        "y": 4153.666932106018,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "d39e156e.f32e6",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 2365.6666145324707,
        "y": 4209.666932106018,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "fa5ee6e9.4c4208"
            ]
        ]
    },
    {
        "id": "fa5ee6e9.4c4208",
        "type": "set",
        "name": "set rn-index to 0",
        "xml": "<set>\n<parameter name='rn-index' value='0' />\n",
        "comments": "",
        "x": 2525.6666145324707,
        "y": 4209.666932106018,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "801aa393.e7c828",
        "type": "set",
        "name": "set related-network data",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].network-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].network-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].network-role'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].network-role`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.vlan-interface'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.vlan-interface`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.lower-tag-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.lower-tag-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.upper-tag-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.upper-tag-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.is-private'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.is-private`' />\n",
        "comments": "",
        "x": 2225.6666145324707,
        "y": 4261.666932106018,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "bc7278c.42fbb88",
        "type": "set",
        "name": "set new related network length",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length'\n  value='`$rn-index + 1`' />\n",
        "comments": "",
        "x": 2243.6666145324707,
        "y": 4313.666932106018,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "c6074e1a.a9bd",
        "type": "switchNode",
        "name": "switch found-related-network",
        "xml": "<switch test='`$found-related-network`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2640.6666679382324,
        "y": 4002.3335790634155,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "8293e055.0b529"
            ]
        ]
    },
    {
        "id": "8293e055.0b529",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2837.3335304260254,
        "y": 4002.333950996399,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "acab0841.3643f8"
            ]
        ]
    },
    {
        "id": "acab0841.3643f8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2967.3334159851074,
        "y": 4000.6670751571655,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "742ee78e.6f2f6",
        "type": "set",
        "name": "save indexes",
        "xml": "<set>\n<parameter name='saved-vnf-network-index' value='`$vnf-network-index`' />\n<parameter name='saved-related-network-index' value='`$related-network-index`' />\n",
        "comments": "",
        "x": 3407.3336296081543,
        "y": 3952.3339490890503,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "6499d375.d639b4",
        "type": "execute",
        "name": "generate cp-instance-id",
        "xml": "<execute plugin=\"org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils\" method=\"generateUUID\" >\n<parameter name=\"ctx-destination\" value=\"cp-instance-id\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1696.2381210327148,
        "y": 4981.8580021858215,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "3db114ad.dcb564",
        "type": "save",
        "name": "save cp to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"cp\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\" >\n<parameter name=\"cp-instance-id\" value=\"`$cp-instance-id`\" />\n<parameter name=\"port-id\" value=\"0\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1677.90474319458,
        "y": 5048.52450799942,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "9e0f4fdf.dbdf98",
                "1b0cb761.91e779"
            ]
        ]
    },
    {
        "id": "9e0f4fdf.dbdf98",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1866.9047241210938,
        "y": 5024.191121518612,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "c9632036.0de2a8"
            ]
        ]
    },
    {
        "id": "c9632036.0de2a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2034.0714721679688,
        "y": 5039.985555112362,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6abd6309.f3a80c",
                "5306b235.f40434"
            ]
        ]
    },
    {
        "id": "1b0cb761.91e779",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1871.9047241210938,
        "y": 5073.857381284237,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "c9632036.0de2a8"
            ]
        ]
    },
    {
        "id": "6abd6309.f3a80c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating cp object in AAI\" />\n",
        "comments": "",
        "x": 2199.5714836120605,
        "y": 5051.857759952545,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "c0124012.781378",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1472.714443206787,
        "y": 5251.142796039581,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "d25d14c8.b399b8",
                "5fca11f4.669f4",
                "6499d375.d639b4",
                "3db114ad.dcb564",
                "248610c9.0e15e",
                "b11e623d.b5492"
            ]
        ]
    },
    {
        "id": "d25d14c8.b399b8",
        "type": "set",
        "name": "set connection point data",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].connection-point.connection-point-id'\n  value='`$cp-instance-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].connection-point.port-id'\n  value='0' />\n",
        "comments": "",
        "x": 1708.2382850646973,
        "y": 5126.382077693939,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "68b0a887.307e58",
        "type": "comment",
        "name": "Floating IPs",
        "info": "",
        "comments": "",
        "x": 1269.0001029968262,
        "y": 6108.6671959757805,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "248610c9.0e15e",
        "type": "for",
        "name": "for each vnf-network",
        "xml": "<for index='vnf-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1692.3332862854004,
        "y": 5522.667571544647,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "62bb1af7.8a69a4"
            ]
        ]
    },
    {
        "id": "b1ff62bf.b7b008",
        "type": "save",
        "name": "save cp relationship to l3-network",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"cp:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n     AND cp.cp-instance-id = $cp-instance-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2330.6667671203613,
        "y": 5522.3340792655945,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "d91ef2a1.cec1a",
                "4d40fb59.ff273c"
            ]
        ]
    },
    {
        "id": "767b44d.6e18fbc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2702.4998054504395,
        "y": 5495.652027606964,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "21d7f3dd.742d5c",
                "a4df0ca4.d12fc8"
            ]
        ]
    },
    {
        "id": "f7d542c9.1503d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2702.4998817443848,
        "y": 5548.651786327362,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "21d7f3dd.742d5c",
                "f30ea0fd.c2421"
            ]
        ]
    },
    {
        "id": "d91ef2a1.cec1a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2545.666690826416,
        "y": 5495.667697429657,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "767b44d.6e18fbc"
            ]
        ]
    },
    {
        "id": "4d40fb59.ff273c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2554.238224029541,
        "y": 5548.286841869354,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f7d542c9.1503d8"
            ]
        ]
    },
    {
        "id": "a4df0ca4.d12fc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating cp relationship to l3-network in AAI\" />\n",
        "comments": "",
        "x": 2874.6666145324707,
        "y": 5518.334403514861,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "f30ea0fd.c2421",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating cp relationship to l3-network\" />\n",
        "comments": "",
        "x": 2869.833522796631,
        "y": 5569.985610485076,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "21d7f3dd.742d5c",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3076.3333778381348,
        "y": 5468.334401607513,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "b11e623d.b5492",
        "type": "for",
        "name": "for each vm-network",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1692.333438873291,
        "y": 5683.333926677704,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "4dd5a013.e9e42"
            ]
        ]
    },
    {
        "id": "81d2246c.8ca24",
        "type": "save",
        "name": "save cp relationship to l3-network and vlan-tag",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"cp:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n     AND cp.cp-instance-id = $cp-instance-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$related-network-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vlan-tag\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vlan-tags/vlan-tag/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$related-network-index].vlan-tags.vlan-interface`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2612.00044631958,
        "y": 5681.333921909332,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6f2d5835.8b06e8",
                "6af35271.e80934"
            ]
        ]
    },
    {
        "id": "aec56c50.11c2b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3018.8334922790527,
        "y": 5654.651220798493,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "e619b229.08af08",
                "21d7f3dd.742d5c"
            ]
        ]
    },
    {
        "id": "772066d4.b53278",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3018.833568572998,
        "y": 5707.650979518891,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "31e4d0b4.6f2ea8",
                "21d7f3dd.742d5c"
            ]
        ]
    },
    {
        "id": "6f2d5835.8b06e8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2862.0003776550293,
        "y": 5654.666890621186,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "aec56c50.11c2b8"
            ]
        ]
    },
    {
        "id": "6af35271.e80934",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2870.5719108581543,
        "y": 5707.2860350608835,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "772066d4.b53278"
            ]
        ]
    },
    {
        "id": "e619b229.08af08",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating cp relationship to l3-network and vlan-tag in AAI\" />\n",
        "comments": "",
        "x": 3191.000301361084,
        "y": 5677.33359670639,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "31e4d0b4.6f2ea8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating cp relationship to l3-network and vlan-tag\" />\n",
        "comments": "",
        "x": 3186.167209625244,
        "y": 5728.984803676605,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "6d38b4de.53c2e4",
        "type": "for",
        "name": "for each related-network",
        "xml": "<for silentFailure='true' index='related-network-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2308.0002784729004,
        "y": 5681.333922863007,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "81d2246c.8ca24"
            ]
        ]
    },
    {
        "id": "a248e487.7d841",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-generate-heat-parameters",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-generate-heat-parameters' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 566.3335723876953,
        "y": 6924.334183335304,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "bf14b0a9.d3e2d",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmoduleheat.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 387.6669006347656,
        "y": 6972.33428633213,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "56373ee9.f19b2",
        "type": "switchNode",
        "name": "switch input vf-module-name",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 539.0000038146973,
        "y": 2408.1667442321777,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ce9ac2f5.cd33d",
                "de25859e.aa53b8"
            ]
        ]
    },
    {
        "id": "ce9ac2f5.cd33d",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 738.9999961853027,
        "y": 2385.6666469573975,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "751c0b43.04587c"
            ]
        ]
    },
    {
        "id": "de25859e.aa53b8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 739.4285888671875,
        "y": 2435.7857580184937,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "c68814e7.3e7978"
            ]
        ]
    },
    {
        "id": "506d6b1c.ec80dc",
        "type": "for",
        "name": "for each vnfc-subnet-role",
        "xml": "<for index='subnet-role-index' start='0'\n  end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1296.5001029968262,
        "y": 3203.1664209365845,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "2294ba3f.d84456"
            ]
        ]
    },
    {
        "id": "2294ba3f.d84456",
        "type": "for",
        "name": "for each vnfc-address-family",
        "xml": "<for index='address-family-index' start='0'\n  end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1544.8333625793457,
        "y": 3203.1664209365845,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "b67cbf0d.afed4"
            ]
        ]
    },
    {
        "id": "61b10d9d.cb5ec4",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 502.33327865600586,
        "y": 2921.4997577667236,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "5cb28855.a7cb48"
            ]
        ]
    },
    {
        "id": "5cb28855.a7cb48",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 684.000057220459,
        "y": 2920.1669063568115,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "8d269e15.726ee8"
            ]
        ]
    },
    {
        "id": "8d269e15.726ee8",
        "type": "for",
        "name": "for each vnfc-network",
        "xml": "<for silentFailure='true' index='vnfc-network-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 885.1666297912598,
        "y": 2919.99959564209,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "1c614ad3.f890f5"
            ]
        ]
    },
    {
        "id": "1c614ad3.f890f5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1097.3333015441895,
        "y": 2918.9999561309814,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "9befab67.ec4df",
                "eba3a652.01819",
                "2e4be547.9f8b3a",
                "506d6b1c.ec80dc"
            ]
        ]
    },
    {
        "id": "9befab67.ec4df",
        "type": "set",
        "name": "set vnf-network-index to -1",
        "xml": "<set>\n<parameter name='vnf-network-index' value='-1' />\n",
        "comments": "",
        "x": 1309.0000190734863,
        "y": 2872.333169937134,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "eba3a652.01819",
        "type": "for",
        "name": "for each vnf-network",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1290.6668090820312,
        "y": 2918.999921798706,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6078ccfd.ea944c"
            ]
        ]
    },
    {
        "id": "6078ccfd.ea944c",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$idx].network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1532.3332786560059,
        "y": 2917.3334169387817,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "d84c654.fa00798"
            ]
        ]
    },
    {
        "id": "d84c654.fa00798",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1728.99995803833,
        "y": 2917.333335876465,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "2b9ee331.dce634"
            ]
        ]
    },
    {
        "id": "2b9ee331.dce634",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1882.333179473877,
        "y": 2917.3332080841064,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f732773f.abd008",
                "432b5764.5f12d",
                "dceb937d.7cbe3"
            ]
        ]
    },
    {
        "id": "f732773f.abd008",
        "type": "set",
        "name": "set vnf-network-index",
        "xml": "<set>\n<parameter name='vnf-network-index' value='`$idx`' />\n",
        "comments": "",
        "x": 2089.000011444092,
        "y": 2865.666585922241,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "432b5764.5f12d",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2043.999927520752,
        "y": 2955.666506767273,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "2e4be547.9f8b3a",
        "type": "switchNode",
        "name": "switch vnf-network-index",
        "xml": "<switch test='`$vnf-network-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1302.3333473205566,
        "y": 2978.9999237060547,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "3d957fc7.96b0d8"
            ]
        ]
    },
    {
        "id": "3d957fc7.96b0d8",
        "type": "outcome",
        "name": "-1",
        "xml": "<outcome value='-1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1493.9999885559082,
        "y": 2979.0001678466797,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "b4602d48.9b452"
            ]
        ]
    },
    {
        "id": "b4602d48.9b452",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1642.333179473877,
        "y": 2977.3332080841064,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "db1b6914.38bb2",
                "cb224311.28b7c8"
            ]
        ]
    },
    {
        "id": "db1b6914.38bb2",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3170.6668128967285,
        "y": 2828.999785423279,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "cb224311.28b7c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNFC network role '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-network-role\n      + ' is not found in VNF network list'\n      `\" />\n\n\n\n",
        "comments": "",
        "x": 1810.6665534973145,
        "y": 2995.6664600372314,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "776dc3af.6ef3ec",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2333.999897003174,
        "y": 3387.333059310913,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "144772ce.885bed",
                "9a72e7d3.0207b8",
                "5ab022e0.76ab7c"
            ]
        ]
    },
    {
        "id": "144772ce.885bed",
        "type": "for",
        "name": "for each subnet-data",
        "xml": "<for index='subnet-data-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2530.666648864746,
        "y": 3342.332978248596,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "746b4322.9622a4"
            ]
        ]
    },
    {
        "id": "746b4322.9622a4",
        "type": "switchNode",
        "name": "address-families match?",
        "xml": "<switch test='`$tmp.address-family\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].ip-version`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2757.3332748413086,
        "y": 3342.332978248596,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "e6434ad2.bae308"
            ]
        ]
    },
    {
        "id": "e6434ad2.bae308",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2937.333240509033,
        "y": 3342.333384513855,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "efbac697.5d7758"
            ]
        ]
    },
    {
        "id": "4e05f98.a5bdf08",
        "type": "set",
        "name": "set tmp.address-family",
        "xml": "<set>\n<parameter name='tmp.address-family'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-address-family`' />\n",
        "comments": "",
        "x": 2362.3332328796387,
        "y": 3205.6664724349976,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "b67cbf0d.afed4",
        "type": "switchNode",
        "name": "switch vnfc-subnet-ip_length",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1807.3335762023926,
        "y": 3202.333507537842,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6b6ccf2e.67b5b8",
                "3fd9179d.ef197",
                "bf6a8d08.4bbdb8"
            ]
        ]
    },
    {
        "id": "6b6ccf2e.67b5b8",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 2009.000087738037,
        "y": 3102.3330507278442,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "3d6c6945.2371a6"
            ]
        ]
    },
    {
        "id": "3fd9179d.ef197",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2005.4287185668945,
        "y": 3288.2853422164917,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "655717fb.4876b"
            ]
        ]
    },
    {
        "id": "3d6c6945.2371a6",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2140.6666374206543,
        "y": 3124.999797821045,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "adf045e3.123d",
        "type": "set",
        "name": "set subnet-id to -1",
        "xml": "<set>\n<parameter name='subnet-id' value='-1' />\n",
        "comments": "",
        "x": 3030.6671562194824,
        "y": 3504.000464439392,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "655717fb.4876b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2159.0001335144043,
        "y": 3287.332974433899,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "4e05f98.a5bdf08",
                "776dc3af.6ef3ec"
            ]
        ]
    },
    {
        "id": "87d327c8.e4f89",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4290.666753768921,
        "y": 3675.6669414043427,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "cda91ba0.8167c",
                "3842836d.d40cec"
            ]
        ]
    },
    {
        "id": "3842836d.d40cec",
        "type": "execute",
        "name": "execute isInSameSubnet",
        "xml": "<execute plugin=\"com.att.sdnctl.sli.plugin.ipAddressTools.IpAddressTool\" method=\"isInSameSubnet\">\n\t<parameter name=\"firstIPAddr\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].network-start-address`\" />\n\t<parameter name=\"secondIPAddr\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[0].vnfc-ip-address`\" />\n\t<parameter name=\"subnet\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].cidr-mask`\" />\n\t<parameter name=\"ipType\" value=\"`$ip-type`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4505.6667556762695,
        "y": 3725.6666152477264,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "625dc384.31bfcc"
            ]
        ]
    },
    {
        "id": "cda91ba0.8167c",
        "type": "switchNode",
        "name": "switch tmp.address-family",
        "xml": "<switch test='`$tmp.address-family`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4507.333911895752,
        "y": 3632.3336017131805,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "5ce62256.5b3ecc",
                "3ec18a61.4053a6"
            ]
        ]
    },
    {
        "id": "5ce62256.5b3ecc",
        "type": "outcome",
        "name": "ipv4",
        "xml": "<outcome value='ipv4'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4710.667174021402,
        "y": 3605.6668320496874,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "39db5660.d28ed2"
            ]
        ]
    },
    {
        "id": "3ec18a61.4053a6",
        "type": "outcome",
        "name": "ipv6",
        "xml": "<outcome value='ipv6'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4710.666847229004,
        "y": 3652.333359479904,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "48ff8671.c333f8"
            ]
        ]
    },
    {
        "id": "39db5660.d28ed2",
        "type": "set",
        "name": "set ip-type parameter to IPv4",
        "xml": "<set>\n<parameter name='ip-type' value='IPv4' />\n",
        "comments": "",
        "x": 4907.333660125732,
        "y": 3604.000305891037,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "48ff8671.c333f8",
        "type": "set",
        "name": "set ip-type parameter to IPv6",
        "xml": "<set>\n<parameter name='ip-type' value='IPv6' />\n",
        "comments": "",
        "x": 4912.33353805542,
        "y": 3652.3333785533905,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "3df4f091.0048b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4845.666786193848,
        "y": 3725.3333785533905,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "3a1246c3.df08aa",
                "3192bd4f.0a0cfa"
            ]
        ]
    },
    {
        "id": "3a1246c3.df08aa",
        "type": "set",
        "name": "set subnet-id",
        "xml": "<set>\n<parameter name='subnet-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id`' />\n",
        "comments": "",
        "x": 5024.000106811523,
        "y": 3701.999865293503,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "3192bd4f.0a0cfa",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 5009.000110626221,
        "y": 3748.6668593883514,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "95331b2d.c7076",
        "type": "switchNode",
        "name": "switch subnet-id",
        "xml": "<switch test='`$subnet-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3022.3330307006836,
        "y": 3665.6671991348267,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "802e0846.88a4c"
            ]
        ]
    },
    {
        "id": "802e0846.88a4c",
        "type": "outcome",
        "name": "-1",
        "xml": "<outcome value='-1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3178.99959564209,
        "y": 3665.667134284973,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "565a3c94.98b2b4"
            ]
        ]
    },
    {
        "id": "565a3c94.98b2b4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3327.3327865600586,
        "y": 3664.0001745224,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f83ab611.b83f78",
                "db1b6914.38bb2"
            ]
        ]
    },
    {
        "id": "f83ab611.b83f78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Not able to find VNF network subnet that contains address '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[0].vnfc-ip-address\n      `\" />\n\n\n\n",
        "comments": "",
        "x": 3495.666118621826,
        "y": 3680.6666498184204,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "66e17899.8fb72",
        "type": "set",
        "name": "set subnet-id in vnfc-ip-assignments (temp variable)",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id' value='`$subnet-id`' />\n",
        "comments": "",
        "x": 3133.9996757507324,
        "y": 3742.3339700698853,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "758d4da0.c2995c",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmodulec.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 487.3332710266113,
        "y": 3337.3332080841064,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "625dc384.31bfcc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4692.333358764648,
        "y": 3725.6671035289764,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "3df4f091.0048b8"
            ]
        ]
    },
    {
        "id": "dceb937d.7cbe3",
        "type": "set",
        "name": "set network-id",
        "xml": "<set>\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].network-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$idx].network-id`' />\n",
        "comments": "",
        "x": 2065.666515350342,
        "y": 2910.6666688919067,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "3812039f.e87b54",
        "type": "switchNode",
        "name": "switch nfc-naming-code",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1263.9999809265137,
        "y": 4525.666396617889,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "1f2b4bc0.e1061c",
                "dc5a09b5.b67728"
            ]
        ]
    },
    {
        "id": "1f2b4bc0.e1061c",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 1448.999927520752,
        "y": 4500.666215419769,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "5c26838f.96ae2c"
            ]
        ]
    },
    {
        "id": "dc5a09b5.b67728",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1447.095199584961,
        "y": 4547.452043056488,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "5a6b4010.6dca68"
            ]
        ]
    },
    {
        "id": "5c26838f.96ae2c",
        "type": "set",
        "name": "set tmp.nfc-naming-code to DEFAULT",
        "xml": "<set>\n<parameter name='tmp.nfc-naming-code' value='DEFAULT' />\n",
        "comments": "",
        "x": 1680.6666984558105,
        "y": 4498.999565601349,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "5a6b4010.6dca68",
        "type": "set",
        "name": "set tmp.nfc-naming-code",
        "xml": "<set>\n<parameter name='tmp.nfc-naming-code' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code`' />\n",
        "comments": "",
        "x": 1637.333209991455,
        "y": 4547.3330636024475,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "c84f1dbb.f047b",
        "type": "switchNode",
        "name": "switch nfc-function",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-function`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1252.3333129882812,
        "y": 4623.9995703697205,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "77125202.fb825c",
                "7e12ade.88495d4"
            ]
        ]
    },
    {
        "id": "77125202.fb825c",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 1448.9999198913574,
        "y": 4598.999368190765,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "90ebf553.d8bfb"
            ]
        ]
    },
    {
        "id": "7e12ade.88495d4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1447.0951919555664,
        "y": 4645.785195827484,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f9029760.f04d1"
            ]
        ]
    },
    {
        "id": "90ebf553.d8bfb",
        "type": "set",
        "name": "set tmp.nfc-function to DEFAULT",
        "xml": "<set>\n<parameter name='tmp.nfc-function' value='DEFAULT' />\n",
        "comments": "",
        "x": 1660.6667022705078,
        "y": 4597.332577228546,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "f9029760.f04d1",
        "type": "set",
        "name": "set tmp.nfc-function",
        "xml": "<set>\n<parameter name='tmp.nfc-function' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-function`' />\n",
        "comments": "",
        "x": 1618.9998321533203,
        "y": 4645.666238307953,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "d11793aa.985d98",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2892.3333015441895,
        "y": 2280.6667041778564,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "854c8589.9f57c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2798.9998054504395,
        "y": 2355.6667041778564,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "4b1cfdbb.d134fc",
                "d11793aa.985d98"
            ]
        ]
    },
    {
        "id": "ce26b35e.dec2c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2003.9998588562012,
        "y": 2415.666567802429,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "fae1cd84.a9bd78",
                "d11793aa.985d98"
            ]
        ]
    },
    {
        "id": "e2bf8646.281a5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2265.666723251343,
        "y": 2470.6667346954346,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "19d62bdc.450b0c",
                "d11793aa.985d98"
            ]
        ]
    },
    {
        "id": "62bb1af7.8a69a4",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1925.6666297912598,
        "y": 5522.66659784317,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "24a675eb.01ffea"
            ]
        ]
    },
    {
        "id": "24a675eb.01ffea",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2124.000099182129,
        "y": 5522.333753108978,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "b1ff62bf.b7b008"
            ]
        ]
    },
    {
        "id": "4dd5a013.e9e42",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1928.9999732971191,
        "y": 5682.3330454826355,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "3ba6fe94.2f5ab2"
            ]
        ]
    },
    {
        "id": "3ba6fe94.2f5ab2",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2127.3334426879883,
        "y": 5682.000200748444,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6d38b4de.53c2e4"
            ]
        ]
    },
    {
        "id": "f728c8ba.23c06",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1832.3332557678223,
        "y": 6260.66646528244,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "65898e8.b71e1f",
                "c9e14db9.4027a"
            ]
        ]
    },
    {
        "id": "63b023e.b6b035c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1834.0000038146973,
        "y": 6575.666476726532,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "870acd7f.91e8a",
                "bda1f786.4b7dc8"
            ]
        ]
    },
    {
        "id": "c9e14db9.4027a",
        "type": "for",
        "name": "for each vnfc-network-role",
        "xml": "<for silentFailure='true' index='vnfc-network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2049.000202178955,
        "y": 6318.999636173248,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "3529b19e.5788ae"
            ]
        ]
    },
    {
        "id": "24d002ee.ba7fb6",
        "type": "save",
        "name": "save vip-ipv4-address-list relationship to cp",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv4-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"cp\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n        + '/cps/cp/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].connection-point.connection-point-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2724.0001258850098,
        "y": 6318.999475002289,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "fbd88616.0314c8",
                "ad2aeb41.4c3638"
            ]
        ]
    },
    {
        "id": "39abf173.99c2f6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationship to cp in AAI\" />\n",
        "comments": "",
        "x": 3282.3333473205566,
        "y": 6312.332883358002,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "ac48317f.f58318",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationship to cp\" />\n",
        "comments": "",
        "x": 3282.500316619873,
        "y": 6362.317057073116,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "1fca7631.b2fcc2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3115.8332176208496,
        "y": 6292.317256450653,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "39abf173.99c2f6",
                "197c2a2b.1fd476"
            ]
        ]
    },
    {
        "id": "34023a4a.89eb56",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3115.833293914795,
        "y": 6345.317015171051,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ac48317f.f58318",
                "197c2a2b.1fd476"
            ]
        ]
    },
    {
        "id": "fbd88616.0314c8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2959.000102996826,
        "y": 6292.332926273346,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "1fca7631.b2fcc2"
            ]
        ]
    },
    {
        "id": "ad2aeb41.4c3638",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2967.571636199951,
        "y": 6344.952070713043,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "34023a4a.89eb56"
            ]
        ]
    },
    {
        "id": "bda1f786.4b7dc8",
        "type": "for",
        "name": "for each vnfc-network-role",
        "xml": "<for silentFailure='true' index='vnfc-network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2050.6665992736816,
        "y": 6642.3330454826355,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "4182536a.93a47c"
            ]
        ]
    },
    {
        "id": "b51ba59a.baed7",
        "type": "save",
        "name": "save vip-ipv6-address-list relationship to cp",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv6-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"cp\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n        + '/cps/cp/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].connection-point.connection-point-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2720.6665534973145,
        "y": 6640.665828227997,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ac5ffd56.e1041",
                "2f884d53.b07b72"
            ]
        ]
    },
    {
        "id": "bc8fa4b3.94381",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationship to cp in AAI\" />\n",
        "comments": "",
        "x": 3278.9997749328613,
        "y": 6633.99923658371,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "d5daac81.1710d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationship to cp\" />\n",
        "comments": "",
        "x": 3279.1667442321777,
        "y": 6683.983410298824,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "60859e82.35dfa",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3112.4996452331543,
        "y": 6613.983609676361,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "bc8fa4b3.94381"
            ]
        ]
    },
    {
        "id": "ca90c0a4.de7eb",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3112.4997215270996,
        "y": 6666.983368396759,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "d5daac81.1710d"
            ]
        ]
    },
    {
        "id": "ac5ffd56.e1041",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2955.666530609131,
        "y": 6613.999279499054,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "60859e82.35dfa"
            ]
        ]
    },
    {
        "id": "2f884d53.b07b72",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2964.238063812256,
        "y": 6666.618423938751,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "ca90c0a4.de7eb"
            ]
        ]
    },
    {
        "id": "3529b19e.5788ae",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].vnfc-network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2302.3332710266113,
        "y": 6318.999312877655,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "a96bcf8d.d96dc8"
            ]
        ]
    },
    {
        "id": "a96bcf8d.d96dc8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2489.000114440918,
        "y": 6318.999800205231,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "24d002ee.ba7fb6"
            ]
        ]
    },
    {
        "id": "4182536a.93a47c",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].vnfc-network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2298.9998512268066,
        "y": 6640.6660532951355,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "5f4a742e.72fbec"
            ]
        ]
    },
    {
        "id": "5f4a742e.72fbec",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2485.6666946411133,
        "y": 6640.666540622711,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "b51ba59a.baed7"
            ]
        ]
    },
    {
        "id": "eb0aec5b.3eb2e",
        "type": "comment",
        "name": "SELF-SERVE FORK",
        "info": "",
        "comments": "",
        "x": 668.7142944335938,
        "y": 929.0233240127563,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "b506e19a.354fc8",
        "type": "call",
        "name": "call self-serve-vf-module-assign",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='self-serve-vf-module-assign' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1201.749439239502,
        "y": 973.9401302337646,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "872941b.28382c"
            ]
        ]
    },
    {
        "id": "f8fb5987.004678",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Failed to create self-serve assignment for vf-module with vf-module-id=' + $vf-module-topology-operation-input.vf-module-information.vf-module-id + ' with error: ' + $error-message`\" />\n",
        "comments": "",
        "x": 1585.820816040039,
        "y": 973.9400806427002,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "872941b.28382c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1422.047019958496,
        "y": 973.4281616210938,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f8fb5987.004678"
            ]
        ]
    },
    {
        "id": "4a3a0c57.2c22ac",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1148.6186828613281,
        "y": 1123.7850494384766,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "52696a3e.207fdc",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss-vnfend.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1140.6662254333496,
        "y": 1078.276593208313,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "90d38352.8ab8c8",
        "type": "set",
        "name": "set order-status to PendingCreate",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n",
        "comments": "",
        "x": 1211.3567428588867,
        "y": 1027.2374877929688,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "58e6d3f7.f000a4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 922.4521713256836,
        "y": 973.6182918548584,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "b506e19a.354fc8",
                "90d38352.8ab8c8",
                "52696a3e.207fdc",
                "4a3a0c57.2c22ac"
            ]
        ]
    },
    {
        "id": "df50609c.7dd31",
        "type": "comment",
        "name": "First, count the subnets for this address family",
        "info": "",
        "comments": "",
        "x": 2664.0004081726074,
        "y": 3251.975468635559,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "478d4118.5ed98",
        "type": "for",
        "name": "for each subnet-data",
        "xml": "<for index='subnet-data-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3037.333095550537,
        "y": 3546.975972175598,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "36dfc31b.a025a4"
            ]
        ]
    },
    {
        "id": "36dfc31b.a025a4",
        "type": "switchNode",
        "name": "address-families match?",
        "xml": "<switch test='`$tmp.address-family\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].ip-version`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3263.9997215270996,
        "y": 3546.975972175598,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6559a3a7.8910e4"
            ]
        ]
    },
    {
        "id": "6559a3a7.8910e4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3443.999687194824,
        "y": 3546.976378440857,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6e77fb20.fa3f44"
            ]
        ]
    },
    {
        "id": "9a72e7d3.0207b8",
        "type": "set",
        "name": "set af-count to 0",
        "xml": "<set>\n<parameter name='af-count' value='0' />\n",
        "comments": "",
        "x": 2518.9999809265137,
        "y": 3293.6422204971313,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "8f820716.44125",
        "type": "set",
        "name": "increment af-count",
        "xml": "<set>\n<parameter name='af-count' value='`$af-count + 1`' />\n",
        "comments": "",
        "x": 3267.3333473205566,
        "y": 3360.308970451355,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "efbac697.5d7758",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3083.9997215270996,
        "y": 3341.975655555725,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "8f820716.44125",
                "b888ffd3.c0e17"
            ]
        ]
    },
    {
        "id": "b888ffd3.c0e17",
        "type": "set",
        "name": "set subnet-id",
        "xml": "<set>\n<parameter name='subnet-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id`' />\n",
        "comments": "",
        "x": 3248.999767303467,
        "y": 3315.3089685440063,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "5ab022e0.76ab7c",
        "type": "switchNode",
        "name": "switch af-count",
        "xml": "<switch test='`$af-count`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2509.0003929138184,
        "y": 3530.3091373443604,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "908b7a86.e0ec18",
                "56ed48ea.e8c8b"
            ]
        ]
    },
    {
        "id": "908b7a86.e0ec18",
        "type": "outcome",
        "name": "1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2668.999912261963,
        "y": 3428.64230632782,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "a5a8ac5f.13f948"
            ]
        ]
    },
    {
        "id": "a5a8ac5f.13f948",
        "type": "set",
        "name": "set subnet-id in vnfc-ip-assignments (temp variable)",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id'\n  value='`$subnet-id`' />\n",
        "comments": "",
        "x": 2942.3332176208496,
        "y": 3426.975655555725,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "56ed48ea.e8c8b",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2668.999828338623,
        "y": 3630.309226036072,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "c2900727.bee1c8"
            ]
        ]
    },
    {
        "id": "c2900727.bee1c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2825.6664695739746,
        "y": 3630.30890750885,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "adf045e3.123d",
                "478d4118.5ed98",
                "95331b2d.c7076",
                "66e17899.8fb72"
            ]
        ]
    },
    {
        "id": "6e77fb20.fa3f44",
        "type": "switchNode",
        "name": "switch network-start-address",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].network-start-address`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3638.9998664855957,
        "y": 3545.3092222213745,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "36c23985.79899e",
                "37a9f831.2d1a"
            ]
        ]
    },
    {
        "id": "36c23985.79899e",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 3835.6667137145996,
        "y": 3480.308832883835,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "848c0b2c.e797c"
            ]
        ]
    },
    {
        "id": "37a9f831.2d1a",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3828.7621116638184,
        "y": 3614.5947444438934,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "c0b64fb2.d819f"
            ]
        ]
    },
    {
        "id": "c0b64fb2.d819f",
        "type": "switchNode",
        "name": "switch cidr-mask",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].cidr-mask`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3983.9999046325684,
        "y": 3613.6419513225555,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f156fcb4.2140f",
                "f5392a04.2681a8"
            ]
        ]
    },
    {
        "id": "f156fcb4.2140f",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 4138.999980926514,
        "y": 3543.642250776291,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "f9c5419d.ddf64"
            ]
        ]
    },
    {
        "id": "f5392a04.2681a8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4142.095777511597,
        "y": 3676.261337995529,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "87d327c8.e4f89"
            ]
        ]
    },
    {
        "id": "bf6a8d08.4bbdb8",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>",
        "comments": "",
        "outputs": 1,
        "x": 2010.666591644287,
        "y": 3150.30890750885,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "3d6c6945.2371a6"
            ]
        ]
    },
    {
        "id": "c5a1b191.b9a848",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'SDNC subnet id '\n      + $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id\n      + ' does not have network-start-address populated'`\" />\n\n\n\n",
        "comments": "",
        "x": 4144.000217437744,
        "y": 3495.3086698055267,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "848c0b2c.e797c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3980.6666412353516,
        "y": 3480.3086001873016,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "c5a1b191.b9a848",
                "db1b6914.38bb2"
            ]
        ]
    },
    {
        "id": "6849b69.ce201c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'SDNC subnet id '\n      + $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id\n      + ' does not have cidr-mask populated'`\" />\n\n\n\n",
        "comments": "",
        "x": 4449.000072479248,
        "y": 3556.9755370616913,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "f9c5419d.ddf64",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4285.6664962768555,
        "y": 3541.975467443466,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "6849b69.ce201c8",
                "db1b6914.38bb2"
            ]
        ]
    },
    {
        "id": "5eefb8ff.6d6f5",
        "type": "comment",
        "name": "Ignore address families with no addresses",
        "info": "",
        "comments": "",
        "x": 2284.9999656677246,
        "y": 3080.6424036026,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "1a6fc532.9edecb",
        "type": "switchNode",
        "name": "switch invariant-uuid",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].invariant-uuid`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1255.666805267334,
        "y": 4710.30878162384,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "48f89263.45560c",
                "45a4171.c74a8e8"
            ]
        ]
    },
    {
        "id": "48f89263.45560c",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 1437.3332176208496,
        "y": 4686.9754114151,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "7e20832d.b83624"
            ]
        ]
    },
    {
        "id": "45a4171.c74a8e8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1435.4284896850586,
        "y": 4733.761239051819,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "d289e33f.82de9"
            ]
        ]
    },
    {
        "id": "7e20832d.b83624",
        "type": "save",
        "name": "save vnfc to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vnfc\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\" >\n<parameter name=\"vnfc-name\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n<parameter name=\"nfc-naming-code\" value=\"`$tmp.nfc-naming-code`\" />\n<parameter name=\"nfc-function\" value=\"`$tmp.nfc-function`\" />\n<parameter name=\"orchestration-status\" value=\"`PendingCreate`\" />\n<parameter name=\"in-maint\" value=\"true\" />\n<parameter name=\"prov-status\" value=\"`PREPROV`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1598.999843597412,
        "y": 4688.6424036026,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "bf47efb9.ef7f",
                "569de2d6.f82d54"
            ]
        ]
    },
    {
        "id": "bd911df4.417368",
        "type": "switchNode",
        "name": "switch input cloud-owner",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-request-input.cloud-owner`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 534.7141952514648,
        "y": 318.88043308258057,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "a704dae0.46866",
                "a2326081.5ee988"
            ]
        ]
    },
    {
        "id": "a704dae0.46866",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 718.0475692749023,
        "y": 288.88042163848877,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "4b4d3d88.c7ca9c"
            ]
        ]
    },
    {
        "id": "a2326081.5ee988",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 717.8094749450684,
        "y": 329.8329153060913,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "e4643fbe.9b324"
            ]
        ]
    },
    {
        "id": "4b4d3d88.c7ca9c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 853.0475234985352,
        "y": 287.2137613296509,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "e4643fbe.9b324",
        "type": "set",
        "name": "set prop.cloud-region.cloud-owner",
        "xml": "<set>\n<parameter name='prop.cloud-region.cloud-owner' value='`$vf-module-topology-operation-input.vf-module-request-input.cloud-owner`' />\n",
        "comments": "",
        "x": 934.7141799926758,
        "y": 328.88044261932373,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "5e3595bc.cfed8c",
        "type": "call",
        "name": "call self-serve-vf-module-forking-logic",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='self-serve-vf-module-forking-logic' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 566.3015670776367,
        "y": 870.2737636566162,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "5eb11d31.97f244",
        "type": "switchNode",
        "name": "switch ss.self-serve-flag",
        "xml": "<switch test=\"`$ss.self-serve-flag`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 524.4443054199219,
        "y": 1097.273832321167,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "e392bb12.8c4bc",
                "1c65532b.b915dd"
            ]
        ]
    },
    {
        "id": "e392bb12.8c4bc",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 745.158504486084,
        "y": 1214.8447313308716,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "cdb40a91.68e35"
            ]
        ]
    },
    {
        "id": "1c65532b.b915dd",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 745.7299575805664,
        "y": 973.7023687362671,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "58e6d3f7.f000a4"
            ]
        ]
    },
    {
        "id": "ee77fdb8.d87748",
        "type": "call",
        "name": "call check for VNF-API-preload and copy",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='gw-vfmodule-update' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 475,
        "y": 7298.975699424744,
        "z": "f3a72141.88f688",
        "wires": [
            []
        ]
    },
    {
        "id": "5e5e8a4e.e5fc5c",
        "type": "comment",
        "name": "'Old' version of DG, called for flows where SO does not expect async response (so-sdnc-adapter)",
        "info": "",
        "comments": "",
        "x": 407,
        "y": 101.97569942474365,
        "z": "f3a72141.88f688",
        "wires": []
    },
    {
        "id": "557cfb68.ef7394",
        "type": "switchNode",
        "name": "cloud-owner passed in input?",
        "xml": "<switch test=\"`$vf-module-topology-operation-input.vf-module-request-input.cloud-owner != ''`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 622,
        "y": 225,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "1bc02874.c16ff8"
            ]
        ]
    },
    {
        "id": "1bc02874.c16ff8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 942,
        "y": 227,
        "z": "f3a72141.88f688",
        "wires": [
            [
                "4a0c8b5d.038a3c"
            ]
        ]
    },
    {
        "id": "4a0c8b5d.038a3c",
        "type": "set",
        "name": "set prop.cloud-region.cloud-owner to input cloud-owner",
        "xml": "<set>\n<parameter name='prop.cloud-region.cloud-owner' value='`$vf-module-topology-operation-input.vf-module-request-input.cloud-owner`' />\n",
        "comments": "",
        "x": 1313,
        "y": 223,
        "z": "f3a72141.88f688",
        "wires": []
    }
]