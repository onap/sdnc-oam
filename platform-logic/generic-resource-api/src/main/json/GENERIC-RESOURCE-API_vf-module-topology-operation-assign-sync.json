[
    {
        "id": "d899f0c1.6bd748",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 140,
        "y": 125.02430057525635,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "aaa14e6d.86dda8"
            ]
        ]
    },
    {
        "id": "aaa14e6d.86dda8",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 253.85713577270508,
        "y": 164.8338384628296,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "769bc2ea.c9d65c"
            ]
        ]
    },
    {
        "id": "769bc2ea.c9d65c",
        "type": "method",
        "name": "method vf-module-topology-operation-assign-sync",
        "xml": "<method rpc='vf-module-topology-operation-assign-sync' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 253.42862701416016,
        "y": 205.02430057525635,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "b1406c81.923cc"
            ]
        ]
    },
    {
        "id": "a460891c.0d1ba",
        "type": "comment",
        "name": "vf-module-topology-operation-assign-sync",
        "info": "",
        "comments": "",
        "x": 398.32110595703125,
        "y": 51,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "6fdfcdf3.2ecd44",
        "type": "switchNode",
        "name": "switch request-action",
        "xml": "<switch test='`$vf-module-topology-operation-input.request-information.request-action`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 545.1905097961426,
        "y": 380.548122882843,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "5fb65925.ac9",
                "f896fbfa.e4db38"
            ]
        ]
    },
    {
        "id": "5fb65925.ac9",
        "type": "outcome",
        "name": "CreateVfModuleInstance",
        "xml": "<outcome value='CreateVfModuleInstance'>\n",
        "comments": "",
        "outputs": 1,
        "x": 807.2381248474121,
        "y": 357.6910090446472,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a252c97a.96867"
            ]
        ]
    },
    {
        "id": "f896fbfa.e4db38",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 750.9047698974609,
        "y": 403.07199811935425,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "acc70f07.86c54"
            ]
        ]
    },
    {
        "id": "a252c97a.96867",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 997.0952892303467,
        "y": 357.69104051589966,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "acc70f07.86c54",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'assign' then request-action must be 'CreateVfModuleInstance'\" />\n",
        "comments": "",
        "x": 1015.9047775268555,
        "y": 403.40531063079834,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "c5b83baf.fcb2b8",
        "type": "get-resource",
        "name": "get-resource VF_MODULE_MODEL",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODULE_MODEL WHERE customization_uuid = $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid'\n  pfx='db.vf-module-model'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 592.5237770080566,
        "y": 471.6910729408264,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "2d0c3ac2.95728e",
                "71d0e645.eeba9"
            ]
        ]
    },
    {
        "id": "986ddeb5.121a08",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No model found for VF module customization UUID ' + $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`\" />\n",
        "comments": "",
        "x": 1033.9521980285645,
        "y": 496.1195454597473,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "2d0c3ac2.95728e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 858.3094673156738,
        "y": 452.0719037055969,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a604e12e.a8eed8"
            ]
        ]
    },
    {
        "id": "71d0e645.eeba9",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 866.8808975219727,
        "y": 496.3576169013977,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "986ddeb5.121a08"
            ]
        ]
    },
    {
        "id": "a604e12e.a8eed8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table\" />\n",
        "comments": "",
        "x": 1033.309398651123,
        "y": 451.21480417251587,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "58f29161.867a9",
        "type": "switchNode",
        "name": "switch service-data.vnfs.vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 587.6190414428711,
        "y": 680.2624082565308,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4d071976.5050c",
                "c3315f66.868788"
            ]
        ]
    },
    {
        "id": "4d071976.5050c",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 828.3333129882812,
        "y": 657.4051485061646,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "550ea296.96c2cc"
            ]
        ]
    },
    {
        "id": "c3315f66.868788",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 828.0951538085938,
        "y": 698.3576669692993,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "1218b6d8.cadda9"
            ]
        ]
    },
    {
        "id": "43e1e208.1c9204",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 166.19043731689453,
        "y": 3161.92930662632,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "badfdbc9.022e2",
                "1265e597.326aea",
                "d904000a.ab2f38",
                "b9dd9667.33695",
                "b4b281fa.e85d5",
                "68dfa5ea.e5019c",
                "a1e477f0.0b584",
                "fa229a92.ce9da8",
                "43deefc2.c1bae8",
                "2312018e.28175e",
                "bab10e90.55c028",
                "5554f045.52dd38",
                "dd4f4eeb.8d24e",
                "7af69df8.0374dc",
                "453e667a.37bcb",
                "5245ba39.530f94",
                "fee3a1a8.2d1ad8",
                "a61a195a.95b1e8",
                "7314ccc5.2134a4",
                "ad9d0c92.4b3468",
                "9535b7df.620268",
                "cf140a5d.20d0a",
                "c8b952a9.c78298",
                "e5e2fde7.2191d",
                "8534c826.13da18",
                "75790bd1.e8defc",
                "c898fd55.fa0688",
                "f1de476.813b738",
                "cc91d00d.836b9",
                "709b1630.8dd8b8",
                "6f90d0a3.4f5888"
            ]
        ]
    },
    {
        "id": "550ea296.96c2cc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs defined in MD-SAL\" />\n",
        "comments": "",
        "x": 994.999927520752,
        "y": 656.6909036636353,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "1218b6d8.cadda9",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 990.3332977294922,
        "y": 698.0242853164673,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "9a0906d8.7ab488"
            ]
        ]
    },
    {
        "id": "9a0906d8.7ab488",
        "type": "switchNode",
        "name": "switch service data vnf == input vnf",
        "xml": "<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1241.6665954589844,
        "y": 697.6910133361816,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "34a2a2c8.9ed3d6"
            ]
        ]
    },
    {
        "id": "34a2a2c8.9ed3d6",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1471.6666069030762,
        "y": 697.0243263244629,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "38dbdaf8.de3b36"
            ]
        ]
    },
    {
        "id": "169ef671.ac8942",
        "type": "set",
        "name": "set vnf-index to -1",
        "xml": "<set>\n<parameter name='vnf-index' value='-1' />\n",
        "comments": "",
        "x": 536.6666641235352,
        "y": 611.6909074783325,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "8699ebe3.da5b5",
        "type": "set",
        "name": "set vnf-index to idx",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1793.3332443237305,
        "y": 668.024284362793,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "3a7d1430.c71c54",
        "type": "switchNode",
        "name": "switch vnf-index",
        "xml": "<switch test='`$vnf-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 526.6666717529297,
        "y": 748.3576040267944,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "d200952e.82a"
            ]
        ]
    },
    {
        "id": "d200952e.82a",
        "type": "outcome",
        "name": "-1",
        "xml": "<outcome value='-1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 705.000057220459,
        "y": 747.6909799575806,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "df336439.6441b8"
            ]
        ]
    },
    {
        "id": "df336439.6441b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find VNF ID ' + $vf-module-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'`\" />\n",
        "comments": "",
        "x": 864.9999656677246,
        "y": 747.0242834091187,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "badfdbc9.022e2",
        "type": "switchNode",
        "name": "switch vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 543.3333930969238,
        "y": 1378.3578004837036,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "46bc83ea.153584",
                "6bf719df.db171"
            ]
        ]
    },
    {
        "id": "46bc83ea.153584",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 800.7143478393555,
        "y": 1345.5005741119385,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a719934f.fd479"
            ]
        ]
    },
    {
        "id": "a719934f.fd479",
        "type": "set",
        "name": "set vf-module-index=0",
        "xml": "<set>\n<parameter name='vf-module-index' value='0' />\n",
        "comments": "",
        "x": 988.3333854675293,
        "y": 1346.1673488616943,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "6bf719df.db171",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 801.1428909301758,
        "y": 1409.7864322662354,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "8d56de21.005688"
            ]
        ]
    },
    {
        "id": "7bb74faf.1a3bf",
        "type": "set",
        "name": "set vf-module-index = vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-index' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n",
        "comments": "",
        "x": 1186.3334312438965,
        "y": 1389.97682762146,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "20d53539.793ec2",
        "type": "for",
        "name": "for each existing VF module",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1145.428524017334,
        "y": 1434.072057723999,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "c80b7ff5.a77ae8"
            ]
        ]
    },
    {
        "id": "8d56de21.005688",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 937.8571701049805,
        "y": 1409.7863578796387,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "7bb74faf.1a3bf",
                "20d53539.793ec2"
            ]
        ]
    },
    {
        "id": "c80b7ff5.a77ae8",
        "type": "switchNode",
        "name": "switch vf-module-information.vf-module-id == service-data.vnfs.vnf[].vf-modules.vf-module[].vf-module-id",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.vf-module-id == $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1649.0476264953613,
        "y": 1433.6434688568115,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4b42022b.8dc95c"
            ]
        ]
    },
    {
        "id": "4b42022b.8dc95c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2091.666675567627,
        "y": 1433.2149200439453,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "b16fc4ad.46cbc"
            ]
        ]
    },
    {
        "id": "b16fc4ad.46cbc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VF module id ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id\n       + ' already exists, and status is ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.vf-module-level-oper-status.order-status`\" />\n",
        "comments": "",
        "x": 2243.5715560913086,
        "y": 1433.2149066925049,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "6bc28de3.9197f4",
        "type": "comment",
        "name": "make sure this VF module doesn't exist already",
        "info": "",
        "comments": "",
        "x": 1675.4999732971191,
        "y": 1388.2709608078003,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "1265e597.326aea",
        "type": "set",
        "name": "set new vf-module_length",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length' value='`$vf-module-index + 1`' />\n",
        "comments": "",
        "x": 553.9999732971191,
        "y": 1489.3576555252075,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "d904000a.ab2f38",
        "type": "set",
        "name": "set vf-module-topology data",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-id' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name' value='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-type' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-type`' />\n<parameter name='tmp.vf-module-topology.tenant' value='`$vf-module-topology-operation-input.vf-module-request-input.tenant`' />\n<parameter name='tmp.vf-module-topology.aic-cloud-region' value='`$vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`' />\n",
        "comments": "",
        "x": 560.4999923706055,
        "y": 1601.857762336731,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "8e6d01f4.b1a178",
        "type": "set",
        "name": "set aic-clli",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli'\n   value='`$aai-uid-split[$aai-uid-split_length - 1]`' />\n",
        "comments": "",
        "x": 1321.4522514343262,
        "y": 1761.0956888198853,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "b9dd9667.33695",
        "type": "switchNode",
        "name": "switch aic-clli",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 520.4999122619629,
        "y": 1875.0480289459229,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4138e9bf.74e39"
            ]
        ]
    },
    {
        "id": "4138e9bf.74e39",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 665.7856025695801,
        "y": 1875.0480976104736,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "d3d7ad76.5bcb38"
            ]
        ]
    },
    {
        "id": "d3d7ad76.5bcb38",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find aic-clli in AAI for aic-cloud-region ' + $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`\" />\n",
        "comments": "",
        "x": 812.9284629821777,
        "y": 1874.6195316314697,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "b4b281fa.e85d5",
        "type": "get-resource",
        "name": "get-resource cloud region",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"cloud-region\" \n\t\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner AND \n\t\t     cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\"\n        pfx='aai.cloud-region' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 559.3571281433105,
        "y": 1675.1913003921509,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "c2f7e9d3.776b",
                "1f1578fa.24f767"
            ]
        ]
    },
    {
        "id": "1f1578fa.24f767",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 773.6033210754395,
        "y": 1693.3421564102173,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "657da328.17e1b4"
            ]
        ]
    },
    {
        "id": "657da328.17e1b4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving cloud region from AAI\" />\n",
        "comments": "",
        "x": 948.6032943725586,
        "y": 1693.3421926498413,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "c2f7e9d3.776b",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 782.5319175720215,
        "y": 1651.6278896331787,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "f1454109.93f188"
            ]
        ]
    },
    {
        "id": "f1454109.93f188",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cloud region not found in AAI\" />\n",
        "comments": "",
        "x": 948.8811950683594,
        "y": 1650.933466911316,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "38dbdaf8.de3b36",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1620.0000686645508,
        "y": 695.9440250396729,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "8699ebe3.da5b5",
                "bf6a8dc5.58a6a8"
            ]
        ]
    },
    {
        "id": "bf6a8dc5.58a6a8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 1755.0000343322754,
        "y": 717.6106109619141,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "9382afb.71420d",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$db.vf-module-model.invariant-uuid`' />\n",
        "comments": "",
        "x": 934.833251953125,
        "y": 1916.44402217865,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "68dfa5ea.e5019c",
        "type": "switchNode",
        "name": "switch input model-invariant-uuid",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 578.6903266906738,
        "y": 1939.2684659957886,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "e49707ca.7af328",
                "812a586e.32e2f"
            ]
        ]
    },
    {
        "id": "e49707ca.7af328",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 784.3569984436035,
        "y": 1916.4114294052124,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "9382afb.71420d"
            ]
        ]
    },
    {
        "id": "812a586e.32e2f",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 785.7855949401855,
        "y": 1960.6970205307007,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "b87936af.b7f308"
            ]
        ]
    },
    {
        "id": "b87936af.b7f308",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`' />\n",
        "comments": "",
        "x": 940.0713310241699,
        "y": 1960.1255927085876,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "118d8bd8.da309c",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$db.vf-module-model.uuid`' />\n",
        "comments": "",
        "x": 935.7855224609375,
        "y": 2004.9826984405518,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "a1e477f0.0b584",
        "type": "switchNode",
        "name": "switch input model-uuid",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 551.3093452453613,
        "y": 2027.8072032928467,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "6305d1b8.c1dda8",
                "ccca0eb9.c0c188"
            ]
        ]
    },
    {
        "id": "6305d1b8.c1dda8",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 785.3093185424805,
        "y": 2004.950135231018,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "118d8bd8.da309c"
            ]
        ]
    },
    {
        "id": "ccca0eb9.c0c188",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 786.7379150390625,
        "y": 2049.2357263565063,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "6b7d1d6.80304e4"
            ]
        ]
    },
    {
        "id": "6b7d1d6.80304e4",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`' />\n",
        "comments": "",
        "x": 941.0236511230469,
        "y": 2048.6642985343933,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "e5be2743.5d4508",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$db.vf-module-model.version`' />\n",
        "comments": "",
        "x": 932.9284553527832,
        "y": 2093.8399057388306,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "fa229a92.ce9da8",
        "type": "switchNode",
        "name": "switch input model-version",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 559.4522171020508,
        "y": 2116.6643505096436,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "34c4c596.157f8a",
                "847f3b10.726578"
            ]
        ]
    },
    {
        "id": "34c4c596.157f8a",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 782.4522018432617,
        "y": 2093.807312965393,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "e5be2743.5d4508"
            ]
        ]
    },
    {
        "id": "847f3b10.726578",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 783.8807983398438,
        "y": 2138.0929040908813,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "9764857e.e18c18"
            ]
        ]
    },
    {
        "id": "9764857e.e18c18",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`' />\n",
        "comments": "",
        "x": 938.1665344238281,
        "y": 2137.5214762687683,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "9b53eb1f.f2e23",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$db.vf-module-model.name`' />\n",
        "comments": "",
        "x": 932.9284553527832,
        "y": 2180.9827280044556,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "43deefc2.c1bae8",
        "type": "switchNode",
        "name": "switch input model-name",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 554.4522171020508,
        "y": 2203.8071727752686,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "1728f46d.49d514",
                "c03e99e4.3d5358"
            ]
        ]
    },
    {
        "id": "1728f46d.49d514",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 782.4522018432617,
        "y": 2180.950135231018,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "9b53eb1f.f2e23"
            ]
        ]
    },
    {
        "id": "c03e99e4.3d5358",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 783.8807983398438,
        "y": 2225.2357263565063,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "f18842f5.5d912"
            ]
        ]
    },
    {
        "id": "f18842f5.5d912",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`' />\n",
        "comments": "",
        "x": 938.1665344238281,
        "y": 2224.6642985343933,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "2312018e.28175e",
        "type": "set",
        "name": "set model-customization-uuid",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-customization-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`' />\n",
        "comments": "",
        "x": 568.9045524597168,
        "y": 2276.316162109375,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "bab10e90.55c028",
        "type": "set",
        "name": "set vf-module-id",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id'\n   value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n",
        "comments": "",
        "x": 522.0951995849609,
        "y": 1545.0393381118774,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "5554f045.52dd38",
        "type": "for",
        "name": "for each cloud-region relationship",
        "xml": "<for index='idx' start='0' end='`$aai.cloud-region.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 581.6109428405762,
        "y": 1763.6979837417603,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "65c117a1.56bd9"
            ]
        ]
    },
    {
        "id": "65c117a1.56bd9",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$aai.cloud-region.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 829.2894859313965,
        "y": 1763.4479131698608,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "b53c4970.3c3e18"
            ]
        ]
    },
    {
        "id": "b53c4970.3c3e18",
        "type": "outcome",
        "name": "complex",
        "xml": "<outcome value='complex'>\n",
        "comments": "",
        "outputs": 1,
        "x": 998.7538070678711,
        "y": 1762.8407354354858,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "31580412.a83eb4"
            ]
        ]
    },
    {
        "id": "1e303b58.a257cd",
        "type": "execute",
        "name": "split related-link",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split'>\n   <parameter name='ctx_memory_result_key' value='aai-uid-split' />\n   <parameter name='original_string' value='`$aai.cloud-region.relationship-list.relationship[$idx].related-link`' />\n   <parameter name='regex' value='/' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1338.848964691162,
        "y": 1717.269310951233,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "31580412.a83eb4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1158.51566696167,
        "y": 1763.9360990524292,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "1e303b58.a257cd",
                "7debff63.6d9ad",
                "8e6d01f4.b1a178"
            ]
        ]
    },
    {
        "id": "7debff63.6d9ad",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 1308.5156288146973,
        "y": 1807.269395828247,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "43097907.f1acb8",
        "type": "execute",
        "name": "execute PropertiesNode",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 559.0476226806641,
        "y": 234.5481081008911,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "7314ccc5.2134a4",
        "type": "set",
        "name": "set order-status to PendingCreate",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n",
        "comments": "",
        "x": 464.2622375488281,
        "y": 7372.904296875,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "9535b7df.620268",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 403.8335418701172,
        "y": 7486.522626876831,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "a61a195a.95b1e8",
        "type": "set",
        "name": "copy input data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.sdnc-request-header.'\n   value='$vf-module-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.request-information.'\n   value='$vf-module-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.service-information.'\n   value='$vf-module-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vnf-information.'\n   value='$vf-module-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.'\n   value='$vf-module-topology-operation-input.vf-module-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.'\n   value='$vf-module-topology-operation-input.vf-module-request-input.' />\n\n",
        "comments": "",
        "x": 420.11924743652344,
        "y": 7229.252753674984,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "fee3a1a8.2d1ad8",
        "type": "set",
        "name": "copy vf-module-topology data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.' value='tmp.vf-module-topology.' />\n",
        "comments": "",
        "x": 465.00025177001953,
        "y": 7181.038265645504,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "ad9d0c92.4b3468",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmodule.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 398.71449279785156,
        "y": 7438.752443313599,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "7af69df8.0374dc",
        "type": "save",
        "name": "update vf-module",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"vf-module-name\" value=\"`$tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name`\" />\n<parameter name=\"model-invariant-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-uuid`\" />\n<parameter name=\"model-customization-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-customization-uuid`\" />\n<parameter name=\"selflink\" value=\"`$vf-module-object-path`\" />\n<parameter name=\"automated-assignment\" value=\"`$automated-assignment`\" />",
        "comments": "",
        "outputs": 1,
        "x": 484.1429786682129,
        "y": 4383.039919495583,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "ff28151e.c99568",
                "84d4e577.067c6"
            ]
        ]
    },
    {
        "id": "829bb1f4.830f08",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No vf-module found in AAI for vf module ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n",
        "comments": "",
        "x": 989.1906547546387,
        "y": 4417.801350176334,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "ff28151e.c99568",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 659.2146186828613,
        "y": 4351.420541405678,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "c0a6d69d.c741f8"
            ]
        ]
    },
    {
        "id": "84d4e577.067c6",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 667.7859916687012,
        "y": 4420.039631426334,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "9fa62cc3.2f0038"
            ]
        ]
    },
    {
        "id": "f3f4159f.aadd9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module in AAI\" />\n",
        "comments": "",
        "x": 994.2145729064941,
        "y": 4369.564098000526,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "dd4f4eeb.8d24e",
        "type": "set",
        "name": "set vf-module-object-path",
        "xml": "<set>\n<parameter name='vf-module-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $vf-module-topology-operation-input.vf-module-information.vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology/'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n",
        "comments": "",
        "x": 507.80978775024414,
        "y": 4258.564148545265,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "98920223.9d1788",
        "type": "save",
        "name": "save vf-module relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module:relationship-list\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1277.8335342407227,
        "y": 5941.192313909531,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "3760c1b8.f1b83e",
                "e7d6710.a6ccc1"
            ]
        ]
    },
    {
        "id": "3760c1b8.f1b83e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1497.666877746582,
        "y": 5912.064058065414,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "5010a64f.2f3dc"
            ]
        ]
    },
    {
        "id": "e7d6710.a6ccc1",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1506.238410949707,
        "y": 5964.683202505112,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4bde1cab.c0624c"
            ]
        ]
    },
    {
        "id": "da526891.6d6948",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module relationships in AAI\" />\n",
        "comments": "",
        "x": 1832.6670112609863,
        "y": 5931.873954534531,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "453e667a.37bcb",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 457.50025939941406,
        "y": 5706.5258667469025,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "9e617b8e.e0967"
            ]
        ]
    },
    {
        "id": "b22bc2e1.6fc3a8",
        "type": "for",
        "name": "for each vm-network",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 854.5002708435059,
        "y": 6125.192698955536,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "e3a4933c.85a3c8"
            ]
        ]
    },
    {
        "id": "91bf4a81.2bbfb",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No l3-network found in AAI for network ID '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id`\" />\n",
        "comments": "",
        "x": 1834.5003852844238,
        "y": 5981.858495473862,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "5245ba39.530f94",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 431.92879486083984,
        "y": 7073.571922242641,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "801c847a.0c2ab8"
            ]
        ]
    },
    {
        "id": "801c847a.0c2ab8",
        "type": "for",
        "name": "for each vm",
        "xml": "<for index='vm-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-count`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 626.928825378418,
        "y": 7072.904930055141,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "9048210a.638ad"
            ]
        ]
    },
    {
        "id": "1404a29d.dfd36d",
        "type": "save",
        "name": "save VIPR_CONFIGURATION",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource\" resource=\"SQL\"\nkey=\"INSERT INTO VIPR_CONFIGURATION (vnf_id, vnf_name, ecomp_service_instance_id, vm_name, cloud_region_id, cloud_owner) VALUES ( $service-data.vnfs.vnf[$vnf-index].vnf-id , $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-name , $service-data.service-information.service-instance-id , $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index] , $tmp.vf-module-topology.aic-cloud-region , $prop.cloud-region.cloud-owner )\" >",
        "comments": "",
        "outputs": 1,
        "x": 1018.5955276489258,
        "y": 7095.57258027792,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "698fdfc8.5c59c"
            ]
        ]
    },
    {
        "id": "2fc7ee54.674b22",
        "type": "comment",
        "name": "Not a failure",
        "info": "",
        "comments": "",
        "x": 1538.5954284667969,
        "y": 7095.572585046291,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "698fdfc8.5c59c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1228.5955123901367,
        "y": 7095.572730004787,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "46d81bad.b0cf7c"
            ]
        ]
    },
    {
        "id": "46d81bad.b0cf7c",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1371.928955078125,
        "y": 7095.572567880154,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "87a12e16.c1c8e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1401.9290771484375,
        "y": 7046.904281556606,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "faaa33d2.7941d8"
            ]
        ]
    },
    {
        "id": "7a365224.c1009c",
        "type": "comment",
        "name": "Not a failure",
        "info": "",
        "comments": "",
        "x": 1725.2621307373047,
        "y": 7045.2381038069725,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "faaa33d2.7941d8",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1547.929012298584,
        "y": 7046.904914796352,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "9048210a.638ad",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 795.2622184753418,
        "y": 7071.904774606228,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "cc3d7eaa.03db28",
                "1404a29d.dfd36d"
            ]
        ]
    },
    {
        "id": "cc3d7eaa.03db28",
        "type": "delete",
        "name": "delete any pre-existing records in VIPR_CONFIGURATION",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='DELETE from VIPR_CONFIGURATION WHERE vnf_id = $service-data.vnfs.vnf[$vnf-index].vnf-id\n     AND ecomp_service_instance_id = $service-data.service-information.service-instance-id\n     AND vm_name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index]' >",
        "comments": "",
        "outputs": 1,
        "x": 1108.5955429077148,
        "y": 7047.238914430141,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "87a12e16.c1c8e"
            ]
        ]
    },
    {
        "id": "c0a6d69d.c741f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 817.500186920166,
        "y": 4351.191212296486,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "f3f4159f.aadd9",
                "6f96a138.acc9c8"
            ]
        ]
    },
    {
        "id": "9fa62cc3.2f0038",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 818.5001029968262,
        "y": 4417.857502520084,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "829bb1f4.830f08",
                "6f96a138.acc9c8"
            ]
        ]
    },
    {
        "id": "5010a64f.2f3dc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1666.1668815612793,
        "y": 5911.858327627182,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "da526891.6d6948",
                "b976bf80.a00868"
            ]
        ]
    },
    {
        "id": "4bde1cab.c0624c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1661.1668815612793,
        "y": 5964.85817027092,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "91bf4a81.2bbfb",
                "b976bf80.a00868"
            ]
        ]
    },
    {
        "id": "6529b298.61d4a4",
        "type": "execute",
        "name": "execute RestApiCallNode - get preload-list",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value=\"`$prop.controller.url + $prop.restapi.preloadinformation + $vf-module-topology-operation-input.vf-module-request-input.vf-module-name + '/vf-module'`\" />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-preload\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1003.3333778381348,
        "y": 2421.1915349960327,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "8fa815b3.c373e8",
                "d50aff26.86ca6"
            ]
        ]
    },
    {
        "id": "8fa815b3.c373e8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1266.6666933695474,
        "y": 2384.524751345316,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "72fd863f.96d978"
            ]
        ]
    },
    {
        "id": "d50aff26.86ca6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1269.9999809265137,
        "y": 2459.5247468948364,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "3381b8ad.4cf26"
            ]
        ]
    },
    {
        "id": "72fd863f.96d978",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1428.333381652832,
        "y": 2382.8580360412598,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "ddcdfbdc.02069"
            ]
        ]
    },
    {
        "id": "3381b8ad.4cf26",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1424.9999885559082,
        "y": 2459.5245885849,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "5fd67b5c.1966a4"
            ]
        ]
    },
    {
        "id": "ddcdfbdc.02069",
        "type": "switchNode",
        "name": "switch mdsal-preload.response-code",
        "xml": "<switch test='`$mdsal-preload.response-code`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1656.6666831970215,
        "y": 2382.8580770492554,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "1032eb5c.8c7bfd",
                "fe3501c8.ebdf28"
            ]
        ]
    },
    {
        "id": "1032eb5c.8c7bfd",
        "type": "outcome",
        "name": "404 (not found)",
        "xml": "<outcome value='404'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1908.3334197998047,
        "y": 2346.191451072693,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a37b13e8.33b938"
            ]
        ]
    },
    {
        "id": "a37b13e8.33b938",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-operation-assign-no-preload",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-operation-assign-no-preload' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2304.9998893737793,
        "y": 2344.5245790481567,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "233356b2.248a72"
            ]
        ]
    },
    {
        "id": "233356b2.248a72",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2675.0000381469727,
        "y": 2342.858115196228,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "5f9b54a9.c1cdd4"
            ]
        ]
    },
    {
        "id": "c88feb78.b7ccd",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n",
        "comments": "",
        "x": 2983.3334159851074,
        "y": 2374.5248517990112,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "fe3501c8.ebdf28",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1883.3334999084473,
        "y": 2402.8579416275024,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "f6f1c5d8.dc0ab"
            ]
        ]
    },
    {
        "id": "7a69f1ed.4762a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving preload-information\" />\n",
        "comments": "",
        "x": 2196.666404724121,
        "y": 2419.52436542511,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "5fd67b5c.1966a4",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-operation-assign-preload",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-operation-assign-preload' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1788.3332786560059,
        "y": 2461.191336631775,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "eeab2ed9.18515"
            ]
        ]
    },
    {
        "id": "eeab2ed9.18515",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2144.000141143799,
        "y": 2459.5249547958374,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4331007b.e83998"
            ]
        ]
    },
    {
        "id": "ff44880b.925a9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n",
        "comments": "",
        "x": 2452.333393096924,
        "y": 2481.191849708557,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "9e617b8e.e0967",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 648.0003280639648,
        "y": 5707.35910153389,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "b22bc2e1.6fc3a8",
                "938e3050.854e5"
            ]
        ]
    },
    {
        "id": "938e3050.854e5",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 899.0003776550293,
        "y": 4912.025192737579,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "6085493.53a3238"
            ]
        ]
    },
    {
        "id": "bf5629c7.b8c548",
        "type": "save",
        "name": "save vnfc to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vnfc\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\" >\n<parameter name=\"vnfc-name\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n<parameter name=\"nfc-naming-code\" value=\"`$tmp.nfc-naming-code`\" />\n<parameter name=\"nfc-function\" value=\"`$tmp.nfc-function`\" />\n<parameter name=\"model-invariant-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].uuid`\" />\n<parameter name=\"model-customization-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].model-customization-uuid`\" />\n<parameter name=\"orchestration-status\" value=\"`PendingCreate`\" />\n<parameter name=\"in-maint\" value=\"true\" />\n<parameter name=\"prov-status\" value=\"`PREPROV`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1625.00044631958,
        "y": 4720.3591232299805,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "57f9125a.f4f11c",
                "c29ebd4.1b8af4"
            ]
        ]
    },
    {
        "id": "6085493.53a3238",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1067.3336791992188,
        "y": 4912.692019939423,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "efdceadd.e8246",
                "1fc575ba.ed4b2a",
                "1a5d8b36.aeca65",
                "6f6678f2.1bf2e",
                "c11e7bb7.050ab8",
                "dc86b143.7bc0f"
            ]
        ]
    },
    {
        "id": "57f9125a.f4f11c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1816.0004844665527,
        "y": 4672.692457199097,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "e06eae25.746e28"
            ]
        ]
    },
    {
        "id": "25a824ba.d2e37c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vnfc to AAI\" />\n",
        "comments": "",
        "x": 2155.0006370544434,
        "y": 4706.835712790489,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "e06eae25.746e28",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1981.1671714782715,
        "y": 4686.820290505886,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "25a824ba.d2e37c",
                "3db10379.cadefc"
            ]
        ]
    },
    {
        "id": "1a5d8b36.aeca65",
        "type": "save",
        "name": "save vnfc relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vnfc:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"generic-vnf\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/generic-vnfs/generic-vnf/' +\n        $vf-module-topology-operation-input.vnf-information.vnf-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vf-module\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/generic-vnfs/generic-vnf/' +\n        $vf-module-topology-operation-input.vnf-information.vnf-id +\n        '/vf-modules/vf-module/' +\n        $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1291.9049644470215,
        "y": 4820.978354930878,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "fbea59e9.f333f",
                "14799014.2fab18"
            ]
        ]
    },
    {
        "id": "7572056c.67fde4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vnfc relationships in AAI\" />\n",
        "comments": "",
        "x": 1801.904899597168,
        "y": 4812.64519071579,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "7a494aad.c286a4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vnfc relationships\" />\n",
        "comments": "",
        "x": 1797.0718078613281,
        "y": 4864.296397686005,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "3e10eb95.8e38dc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1623.7381553649902,
        "y": 4794.29597902298,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "7572056c.67fde4",
                "3db10379.cadefc"
            ]
        ]
    },
    {
        "id": "eb8fe9e3.991998",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1623.7382316589355,
        "y": 4847.295737743378,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "7a494aad.c286a4",
                "3db10379.cadefc"
            ]
        ]
    },
    {
        "id": "fbea59e9.f333f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1466.9050407409668,
        "y": 4794.311648845673,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "3e10eb95.8e38dc"
            ]
        ]
    },
    {
        "id": "14799014.2fab18",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1475.4765739440918,
        "y": 4846.93079328537,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "eb8fe9e3.991998"
            ]
        ]
    },
    {
        "id": "efdceadd.e8246",
        "type": "for",
        "name": "for each vnfc-network-role",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1289.3810844421387,
        "y": 5237.834763050079,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "bc7e2484.e69228"
            ]
        ]
    },
    {
        "id": "cf140a5d.20d0a",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmoduleb.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 509.9999885559082,
        "y": 2545.73858499527,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "502f6d13.ee70cc",
        "type": "for",
        "name": "for each vnfc-subnetwork-role",
        "xml": "<for silentFailure='true' index='subnet-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1745.3336219787598,
        "y": 5201.025196552277,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "3183d8e5.672be"
            ]
        ]
    },
    {
        "id": "3183d8e5.672be",
        "type": "for",
        "name": "for each vnfc-address-family",
        "xml": "<for silentFailure='true' index='address-family-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2012.6669654846191,
        "y": 5200.025684833527,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "779f95e4.f78a8c"
            ]
        ]
    },
    {
        "id": "5357cf02.932768",
        "type": "for",
        "name": "for each vnfc-ip-address",
        "xml": "<for silentFailure='true' index='address-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2444.666576385498,
        "y": 5266.691384315491,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "3c7bceb4.1549ba"
            ]
        ]
    },
    {
        "id": "779f95e4.f78a8c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2223.666736602783,
        "y": 5200.025141239166,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a3b35b4c.65bd08",
                "5357cf02.932768"
            ]
        ]
    },
    {
        "id": "a3b35b4c.65bd08",
        "type": "set",
        "name": "set tmp.address-family",
        "xml": "<set>\n<parameter name='tmp.address-family'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-address-family`' />\n",
        "comments": "",
        "x": 2443.667064666748,
        "y": 5120.025038719177,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "3c7bceb4.1549ba",
        "type": "switchNode",
        "name": "switch address family",
        "xml": "<switch test='`$tmp.address-family`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2683.6666679382324,
        "y": 5265.025206565857,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "3dbb3b5c.4b19bc",
                "5644f796.d8b738"
            ]
        ]
    },
    {
        "id": "3dbb3b5c.4b19bc",
        "type": "outcome",
        "name": "ipv4",
        "xml": "<outcome value='ipv4'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2880.809673309326,
        "y": 5168.596467018127,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "98a03a47.d1bb1"
            ]
        ]
    },
    {
        "id": "5644f796.d8b738",
        "type": "outcome",
        "name": "ipv6",
        "xml": "<outcome value='ipv6'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2878.4287452697754,
        "y": 5348.358498573303,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "831b99d7.14637"
            ]
        ]
    },
    {
        "id": "8eaadf17.3b8f38",
        "type": "comment",
        "name": "Fixed IPs",
        "info": "",
        "comments": "",
        "x": 1762.3336372375488,
        "y": 5162.692573547363,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "9054c457.8f5da",
        "type": "save",
        "name": "save l3-interface-ipv4-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-interface-ipv4-address-list\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv4-address-list.l3-interface-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\" >\n<parameter name=\"l3-interface-ipv4-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address`\" />\n<parameter name=\"l3-interface-ipv4-prefix-length\" value=\"32\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3324.1428031921387,
        "y": 5116.929546991985,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "2621f47c.ef48fc"
            ]
        ]
    },
    {
        "id": "98a03a47.d1bb1",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3030.809673309326,
        "y": 5168.59638563792,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "9054c457.8f5da",
                "cff14283.064d58"
            ]
        ]
    },
    {
        "id": "ef84b8c0.919f68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating l3-interface-ipv4-address-list object in AAI\" />\n",
        "comments": "",
        "x": 3907.4763221740723,
        "y": 5135.263206164043,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "74ceecc0.c34db4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3737.642677307129,
        "y": 5116.914039293926,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "ef84b8c0.919f68",
                "379792a1.9d134e"
            ]
        ]
    },
    {
        "id": "2621f47c.ef48fc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3580.8095626831055,
        "y": 5116.929709116619,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "74ceecc0.c34db4"
            ]
        ]
    },
    {
        "id": "cff14283.064d58",
        "type": "save",
        "name": "save l3-interface-ipv4-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"l3-interface-ipv4-address-list:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv4-address-list.l3-interface-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id +\n        '/subnets/subnet/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3319.1430473327637,
        "y": 5215.262965838116,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "298ae030.16817",
                "72d565c9.1fdcd4"
            ]
        ]
    },
    {
        "id": "6ca890e0.85d5d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating l3-interface-ipv4-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 3905.809429168701,
        "y": 5206.929637591045,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "5bb6eebc.15be48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating l3-interface-ipv4-address-list relationships\" />\n",
        "comments": "",
        "x": 3905.976291656494,
        "y": 5256.914095560711,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "602f85ca.3af6ec",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3739.309299468994,
        "y": 5186.914010683697,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "6ca890e0.85d5d",
                "379792a1.9d134e"
            ]
        ]
    },
    {
        "id": "671adf60.dbe2f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3739.3093757629395,
        "y": 5239.913769404095,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "5bb6eebc.15be48",
                "379792a1.9d134e"
            ]
        ]
    },
    {
        "id": "298ae030.16817",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3582.4761848449707,
        "y": 5186.92968050639,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "602f85ca.3af6ec"
            ]
        ]
    },
    {
        "id": "72d565c9.1fdcd4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3591.0477180480957,
        "y": 5239.548824946087,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "671adf60.dbe2f"
            ]
        ]
    },
    {
        "id": "13f0f3c7.903904",
        "type": "save",
        "name": "save l3-interface-ipv6-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-interface-ipv6-address-list\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv6-address-list.l3-interface-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\" >\n<parameter name=\"l3-interface-ipv6-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address`\" />\n<parameter name=\"l3-interface-ipv6-prefix-length\" value=\"128\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3322.9525413513184,
        "y": 5295.977602958679,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "cd295240.6fd0c"
            ]
        ]
    },
    {
        "id": "831b99d7.14637",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3029.619411468506,
        "y": 5347.644441604614,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "13f0f3c7.903904",
                "9e5eb4e4.990e68"
            ]
        ]
    },
    {
        "id": "91bc7464.bf1b48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating l3-interface-ipv6-address-list object in AAI\" />\n",
        "comments": "",
        "x": 3906.286060333252,
        "y": 5314.311262130737,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "2ba2dbf4.a9426c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3736.4524154663086,
        "y": 5295.96209526062,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "91bc7464.bf1b48",
                "379792a1.9d134e"
            ]
        ]
    },
    {
        "id": "cd295240.6fd0c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3579.619300842285,
        "y": 5295.977765083313,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "2ba2dbf4.a9426c"
            ]
        ]
    },
    {
        "id": "9e5eb4e4.990e68",
        "type": "save",
        "name": "save l3-interface-ipv6-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"l3-interface-ipv6-address-list:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv6-address-list.l3-interface-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id +\n        '/subnets/subnet/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3317.9527854919434,
        "y": 5394.31102180481,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "821e155.0c03768",
                "d1daf5a7.4e5038"
            ]
        ]
    },
    {
        "id": "702086e5.a87928",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating l3-interface-ipv6-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 3904.619167327881,
        "y": 5385.977693557739,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "810daf5d.d981a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating l3-interface-ipv6-address-list relationships\" />\n",
        "comments": "",
        "x": 3908.1193885803223,
        "y": 5432.628710031509,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "a387fb05.ace298",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3738.119037628174,
        "y": 5365.962066650391,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "702086e5.a87928",
                "379792a1.9d134e"
            ]
        ]
    },
    {
        "id": "2e5a57f5.b0c6d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3738.119113922119,
        "y": 5418.961825370789,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "810daf5d.d981a",
                "379792a1.9d134e"
            ]
        ]
    },
    {
        "id": "821e155.0c03768",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3581.2859230041504,
        "y": 5365.9777364730835,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a387fb05.ace298"
            ]
        ]
    },
    {
        "id": "d1daf5a7.4e5038",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3589.8574562072754,
        "y": 5418.596880912781,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "2e5a57f5.b0c6d"
            ]
        ]
    },
    {
        "id": "e3a4933c.85a3c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1044.3335914611816,
        "y": 6124.692138195038,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "977e1113.8ffe08",
                "98920223.9d1788",
                "4e4aa877.9d0b4",
                "509b4c19.fe40b4"
            ]
        ]
    },
    {
        "id": "41944760.d8c68",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1692.3337669372559,
        "y": 6247.025886058807,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "61dec192.4d7148"
            ]
        ]
    },
    {
        "id": "c022e9c3.807898",
        "type": "save",
        "name": "save vip-ipv4-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vip-ipv4-address-list\" \n\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\" >\n<parameter name=\"vip-ipv4-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]`\" />\n<parameter name=\"vip-ipv4-prefix-length\" value=\"32\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1775.3336219787598,
        "y": 6078.358897686005,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "7a0ce7a9.67d428",
                "8bc67e6d.794ba8"
            ]
        ]
    },
    {
        "id": "4e4aa877.9d0b4",
        "type": "for",
        "name": "for each floating ipv4 address",
        "xml": "<for silentFailure='true' index='ipv4-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1283.3336143493652,
        "y": 6136.358970165253,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "ad98d310.ff19b"
            ]
        ]
    },
    {
        "id": "ad98d310.ff19b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1509.3336143493652,
        "y": 6134.358970165253,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "c022e9c3.807898",
                "db158df8.1167b",
                "41944760.d8c68"
            ]
        ]
    },
    {
        "id": "7ef8032.ed11efc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vip-ipv4-address-list in AAI\" />\n",
        "comments": "",
        "x": 2337.3336219787598,
        "y": 6068.358897686005,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "e03d6e17.c3c688",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error saving vip-ipv4-address-list\" />\n",
        "comments": "",
        "x": 2337.5004844665527,
        "y": 6118.34335565567,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "fbbe1588.40205",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2170.8334922790527,
        "y": 6048.343270778656,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "7ef8032.ed11efc",
                "2e738df3.a266b2"
            ]
        ]
    },
    {
        "id": "2a573c62.740a54",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2170.833568572998,
        "y": 6101.343029499054,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "e03d6e17.c3c688",
                "2e738df3.a266b2"
            ]
        ]
    },
    {
        "id": "7a0ce7a9.67d428",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2014.0003776550293,
        "y": 6048.358940601349,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "fbbe1588.40205"
            ]
        ]
    },
    {
        "id": "8bc67e6d.794ba8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2022.5719108581543,
        "y": 6100.978085041046,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "2a573c62.740a54"
            ]
        ]
    },
    {
        "id": "4d116331.dbe40c",
        "type": "save",
        "name": "save vip-ipv4-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv4-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-id\n        + '/subnets/subnet/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv4-subnet-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vnfc\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2111.000217437744,
        "y": 6191.0255608558655,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "5c248e68.67eca8",
                "b00109fd.7018a"
            ]
        ]
    },
    {
        "id": "194ccbea.7b2314",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 2680.6666259765625,
        "y": 6183.025530397892,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "24399d85.a919ca",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationships\" />\n",
        "comments": "",
        "x": 2680.833595275879,
        "y": 6233.009704113007,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "215feb82.3c18c4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2514.1664962768555,
        "y": 6163.009903490543,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "194ccbea.7b2314",
                "2e738df3.a266b2"
            ]
        ]
    },
    {
        "id": "bd320fdf.1dd3",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2514.166572570801,
        "y": 6216.009662210941,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "24399d85.a919ca",
                "2e738df3.a266b2"
            ]
        ]
    },
    {
        "id": "5c248e68.67eca8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2357.333381652832,
        "y": 6163.025573313236,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "215feb82.3c18c4"
            ]
        ]
    },
    {
        "id": "b00109fd.7018a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2365.904914855957,
        "y": 6215.6447177529335,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "bd320fdf.1dd3"
            ]
        ]
    },
    {
        "id": "14908e4.0b7c572",
        "type": "save",
        "name": "save vip-ipv6-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vip-ipv6-address-list\" \n\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\" >\n<parameter name=\"vip-ipv6-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]`\" />\n<parameter name=\"vip-ipv6-prefix-length\" value=\"128\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1778.66695022583,
        "y": 6401.691581249237,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "5b0cff7c.4a4298",
                "31df6b80.4ae1ac"
            ]
        ]
    },
    {
        "id": "509b4c19.fe40b4",
        "type": "for",
        "name": "for each floating ipv6 address",
        "xml": "<for silentFailure='true' index='ipv6-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1286.6669425964355,
        "y": 6458.691653728485,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "3c84431b.8f327c"
            ]
        ]
    },
    {
        "id": "3c84431b.8f327c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1512.6669425964355,
        "y": 6457.691653728485,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "14908e4.0b7c572",
                "c9260312.daf868",
                "5aa22816.429f48"
            ]
        ]
    },
    {
        "id": "dd2eb416.73c908",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vip-ipv6-address-list in AAI\" />\n",
        "comments": "",
        "x": 2340.66695022583,
        "y": 6391.691581249237,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "10c3fbcd.513b94",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error saving vip-ipv6-address-list\" />\n",
        "comments": "",
        "x": 2340.833812713623,
        "y": 6441.676039218903,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "28179059.d61ef8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2174.166820526123,
        "y": 6371.675954341888,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "dd2eb416.73c908",
                "2e738df3.a266b2"
            ]
        ]
    },
    {
        "id": "35207268.e2e96e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2174.1668968200684,
        "y": 6424.675713062286,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "10c3fbcd.513b94",
                "2e738df3.a266b2"
            ]
        ]
    },
    {
        "id": "5b0cff7c.4a4298",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2017.3337059020996,
        "y": 6371.691624164581,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "28179059.d61ef8"
            ]
        ]
    },
    {
        "id": "31df6b80.4ae1ac",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2025.9052391052246,
        "y": 6424.310768604279,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "35207268.e2e96e"
            ]
        ]
    },
    {
        "id": "be05c61f.2a3f48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv6-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 2674.0002059936523,
        "y": 6504.6916318535805,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "4ddaaa06.7ec0e4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv6-address-list relationships\" />\n",
        "comments": "",
        "x": 2674.1670684814453,
        "y": 6554.676089823246,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "6169d8f1.0fca9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2507.5000762939453,
        "y": 6484.676004946232,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "be05c61f.2a3f48",
                "2e738df3.a266b2"
            ]
        ]
    },
    {
        "id": "104ad559.84aa1b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2507.5001525878906,
        "y": 6537.67576366663,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4ddaaa06.7ec0e4",
                "2e738df3.a266b2"
            ]
        ]
    },
    {
        "id": "3625278f.94f36",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2350.666961669922,
        "y": 6484.691674768925,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "6169d8f1.0fca9"
            ]
        ]
    },
    {
        "id": "dbaa45c3.a58ac8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2359.238494873047,
        "y": 6537.310819208622,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "104ad559.84aa1b"
            ]
        ]
    },
    {
        "id": "6bd05851.cda258",
        "type": "save",
        "name": "save vip-ipv6-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv6-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-id\n        + '/subnets/subnet/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv6-subnet-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vnfc\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2106.3338050842285,
        "y": 6513.358093738556,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "3625278f.94f36",
                "dbaa45c3.a58ac8"
            ]
        ]
    },
    {
        "id": "6f96a138.acc9c8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1162.3334770202637,
        "y": 4321.691486895084,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "3db10379.cadefc",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2327.0004234313965,
        "y": 4659.692221999168,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "b976bf80.a00868",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2035.6670036315918,
        "y": 5876.6920592188835,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "2e738df3.a266b2",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2984.667133331299,
        "y": 5995.691905498505,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "379792a1.9d134e",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4304.0001220703125,
        "y": 5043.357985436916,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "1fc575ba.ed4b2a",
        "type": "set",
        "name": "set created_flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].created_flag' value='true' />\n",
        "comments": "",
        "x": 1269.0002479553223,
        "y": 4760.691877782345,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "977e1113.8ffe08",
        "type": "set",
        "name": "set created-flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].created-flag' value='true' />\n",
        "comments": "",
        "x": 1239.6670036315918,
        "y": 6008.6920592188835,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "db158df8.1167b",
        "type": "set",
        "name": "set created-ipv4-flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.created-ipv4-flag' value='true' />\n",
        "comments": "",
        "x": 1712.6669692993164,
        "y": 6136.6921390891075,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "c9260312.daf868",
        "type": "set",
        "name": "set created-ipv6-flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.created-ipv6-flag' value='true' />\n",
        "comments": "",
        "x": 1718.0003051757812,
        "y": 6462.691742360592,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "c29ebd4.1b8af4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1819.0004234313965,
        "y": 4720.692116677761,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "e06eae25.746e28"
            ]
        ]
    },
    {
        "id": "c8b952a9.c78298",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-vlan-tagging-assign",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-vlan-tagging-assign' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 602.6667823791504,
        "y": 6800.691919803619,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "644ad1c5.87cc3"
            ]
        ]
    },
    {
        "id": "644ad1c5.87cc3",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 947.0001983642578,
        "y": 6800.025414943695,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "52273fde.82a9b"
            ]
        ]
    },
    {
        "id": "52273fde.82a9b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1102.000072479248,
        "y": 6800.025210857391,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "cf013b75.034798",
                "6bc578d2.be185",
                "d4d7a21f.792e98"
            ]
        ]
    },
    {
        "id": "cf013b75.034798",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1450.3333625793457,
        "y": 6745.025630712509,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "6bc578d2.be185",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n",
        "comments": "",
        "x": 1278.6668014526367,
        "y": 6843.358858704567,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "d4d7a21f.792e98",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vlantaggingfailure.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1273.6666984558105,
        "y": 6796.691714763641,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "b1406c81.923cc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 240.8928680419922,
        "y": 556.5714416503906,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "43097907.f1acb8",
                "6fdfcdf3.2ecd44",
                "c5b83baf.fcb2b8",
                "169ef671.ac8942",
                "58f29161.867a9",
                "3a7d1430.c71c54",
                "cfe429db.9ee878",
                "59c722cd.d5e3ac",
                "9ed32d4f.dbd058"
            ]
        ]
    },
    {
        "id": "cc91d00d.836b9",
        "type": "switchNode",
        "name": "switch from-preload",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.from-preload`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 531.904712677002,
        "y": 2612.1672048568726,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "dade25b1.c84ca",
                "947e2614.ca4708"
            ]
        ]
    },
    {
        "id": "dade25b1.c84ca",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 703.8094444274902,
        "y": 2589.548225402832,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a599121f.29119"
            ]
        ]
    },
    {
        "id": "947e2614.ca4708",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 705.4760971069336,
        "y": 2634.5480642318726,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "f0b8dd3.f8d9fa"
            ]
        ]
    },
    {
        "id": "a599121f.29119",
        "type": "set",
        "name": "set automated-assignment to true",
        "xml": "<set>\n<parameter name='automated-assignment' value='true' />\n",
        "comments": "",
        "x": 918.8094291687012,
        "y": 2587.88139629364,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "f0b8dd3.f8d9fa",
        "type": "set",
        "name": "set automated-assignment to false",
        "xml": "<set>\n<parameter name='automated-assignment' value='false' />\n",
        "comments": "",
        "x": 917.142749786377,
        "y": 2632.8813161849976,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "5aa22816.429f48",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1693.4288368225098,
        "y": 6561.572165966034,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "5e28153d.aad85c"
            ]
        ]
    },
    {
        "id": "375c5c4e.30f4cc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Test return\" />\n",
        "comments": "",
        "x": 158.00014877319336,
        "y": 7041.359684050083,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "e5e2fde7.2191d",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 510.66680908203125,
        "y": 3972.358087539673,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "d363401e.7355c"
            ]
        ]
    },
    {
        "id": "d363401e.7355c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 701.166877746582,
        "y": 3973.19132232666,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "e3fa98f1.b438d"
            ]
        ]
    },
    {
        "id": "e3fa98f1.b438d",
        "type": "for",
        "name": "for each vm-network",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 902.6668090820312,
        "y": 3972.358087539673,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "40b3e744.61964"
            ]
        ]
    },
    {
        "id": "40b3e744.61964",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1092.500129699707,
        "y": 3971.857526779175,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "e55f887a.2c28b8"
            ]
        ]
    },
    {
        "id": "e55f887a.2c28b8",
        "type": "get-resource",
        "name": "get-resource VFC_RELATED_NETWORK_ROLE",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VFC_RELATED_NETWORK_ROLE where vfc_customization_uuid = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].model-customization-uuid\n    and network_role = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role'\n  pfx='db.vnf-related-network-role[]'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1382.0001029968262,
        "y": 3970.358169555664,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "38728e09.f4cc2a",
                "61cfce62.115458"
            ]
        ]
    },
    {
        "id": "38728e09.f4cc2a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1653.00004196167,
        "y": 3875.024871826172,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "9486bfbc.c85ee"
            ]
        ]
    },
    {
        "id": "9486bfbc.c85ee",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1800.190559387207,
        "y": 3873.57288646698,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "ff352d2b.40694",
                "f46bd80d.b62c1"
            ]
        ]
    },
    {
        "id": "61cfce62.115458",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1641.333293914795,
        "y": 4094.691343307495,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a9e83864.3544c8"
            ]
        ]
    },
    {
        "id": "aeabd7d7.f9db5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2059.66654586792,
        "y": 4096.69109916687,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "777f849.576bdfc",
                "65c58e18.2c5ff",
                "de7a8e52.6c38f",
                "d8f45dd9.fffaa",
                "d55dcbe4.b448d8",
                "dd07d863.1ec54",
                "66d1505f.39733",
                "9bb872f6.753258"
            ]
        ]
    },
    {
        "id": "ff352d2b.40694",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VFC_RELATED_NETWORK_ROLE table\" />\n",
        "comments": "",
        "x": 1952.3334159851074,
        "y": 3870.358123779297,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "65c58e18.2c5ff",
        "type": "for",
        "name": "for each vnf network",
        "xml": "<for silentFailure='true' index='vnf-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2254.6666831970215,
        "y": 3964.0247554779053,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "287be929.0998de"
            ]
        ]
    },
    {
        "id": "777f849.576bdfc",
        "type": "set",
        "name": "set found-related-network to false",
        "xml": "<set>\n<parameter name='found-related-network' value='false' />\n",
        "comments": "",
        "x": 2294.666759490967,
        "y": 3905.6915321350098,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "8af8893c.0f1fc8",
        "type": "for",
        "name": "for each related network",
        "xml": "<for silentFailure='true' index='related-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].related-networks.related-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2653.666645050049,
        "y": 3940.6910190582275,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "7e43f742.984c4"
            ]
        ]
    },
    {
        "id": "287be929.0998de",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2442.6666831970215,
        "y": 3964.0247554779053,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "8af8893c.0f1fc8",
                "44f2cc37.a78364"
            ]
        ]
    },
    {
        "id": "7e43f742.984c4",
        "type": "switchNode",
        "name": "switch network-role matches",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].related-networks.related-network[$related-network-index].network-role\n  == $db.vnf-related-network-role[$db-related-network-index].related-network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2905.666561126709,
        "y": 3940.691095352173,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "13b580a4.638417"
            ]
        ]
    },
    {
        "id": "a9e83864.3544c8",
        "type": "for",
        "name": "for each db related-network",
        "xml": "<for index='db-related-network-index' start='0' end='`$db.vnf-related-network-role_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1845.6666679382324,
        "y": 4095.35809135437,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "aeabd7d7.f9db5"
            ]
        ]
    },
    {
        "id": "4c894758.36b448",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 326.6669120788574,
        "y": 7001.359684050083,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "13b580a4.638417",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3105.666561126709,
        "y": 3938.691095352173,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "32afed8d.51d1a2"
            ]
        ]
    },
    {
        "id": "32afed8d.51d1a2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3259.666561126709,
        "y": 3936.691095352173,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "f204e763.59bda8",
                "85e8b1c6.3df998",
                "334d9e50.554812"
            ]
        ]
    },
    {
        "id": "f204e763.59bda8",
        "type": "set",
        "name": "set found-related-network to true",
        "xml": "<set>\n<parameter name='found-related-network' value='true' />\n",
        "comments": "",
        "x": 3491.666721343994,
        "y": 3896.3576793670654,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "85e8b1c6.3df998",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 3414.999897003174,
        "y": 3983.024429321289,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "de7a8e52.6c38f",
        "type": "switchNode",
        "name": "switch found-related-network",
        "xml": "<switch test='`$found-related-network`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2277.6666145324707,
        "y": 4039.6912326812744,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "b21eb0fb.04ea08"
            ]
        ]
    },
    {
        "id": "b21eb0fb.04ea08",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2471.6666145324707,
        "y": 4037.6912326812744,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "86e33f55.12f7a"
            ]
        ]
    },
    {
        "id": "bc2b0b96.f1ccb",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find related network '\n      + $db.vnf-related-network-role[$db-related-network-index].related-network-role + ' in vnf-networks'`\" />\n",
        "comments": "",
        "x": 2749.6666145324707,
        "y": 4035.6912326812744,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "86e33f55.12f7a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2601.6666145324707,
        "y": 4037.6912326812744,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "bc2b0b96.f1ccb",
                "f46bd80d.b62c1"
            ]
        ]
    },
    {
        "id": "f46bd80d.b62c1",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2694.3334159851074,
        "y": 3800.358123779297,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "d8f45dd9.fffaa",
        "type": "set",
        "name": "set is-trunked and segmentation-id in vm-network",
        "xml": "<set>\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].is-trunked'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].is-trunked`' />\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].segmentation-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].segmentation-id`' />\n",
        "comments": "",
        "x": 2339.6666145324707,
        "y": 4087.6912326812744,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "dd07d863.1ec54",
        "type": "switchNode",
        "name": "switch rn-index",
        "xml": "<switch test='`$rn-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2227.6666145324707,
        "y": 4195.691232681274,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a5dcf4c4.8aa428"
            ]
        ]
    },
    {
        "id": "d55dcbe4.b448d8",
        "type": "set",
        "name": "set rn-index to related network length",
        "xml": "<set>\n<parameter name='rn-index' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length`' />\n",
        "comments": "",
        "x": 2299.6666145324707,
        "y": 4139.691232681274,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "a5dcf4c4.8aa428",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 2391.6666145324707,
        "y": 4195.691232681274,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "aaf887bc.8a7d1"
            ]
        ]
    },
    {
        "id": "aaf887bc.8a7d1",
        "type": "set",
        "name": "set rn-index to 0",
        "xml": "<set>\n<parameter name='rn-index' value='0' />\n",
        "comments": "",
        "x": 2551.6666145324707,
        "y": 4195.691232681274,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "66d1505f.39733",
        "type": "set",
        "name": "set related-network data",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].network-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].network-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].network-role'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].network-role`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.vlan-interface'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.vlan-interface`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.lower-tag-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.lower-tag-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.upper-tag-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.upper-tag-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.is-private'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.is-private`' />\n",
        "comments": "",
        "x": 2251.6666145324707,
        "y": 4247.691232681274,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "9bb872f6.753258",
        "type": "set",
        "name": "set new related network length",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length'\n  value='`$rn-index + 1`' />\n",
        "comments": "",
        "x": 2269.6666145324707,
        "y": 4299.691232681274,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "44f2cc37.a78364",
        "type": "switchNode",
        "name": "switch found-related-network",
        "xml": "<switch test='`$found-related-network`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2666.6666679382324,
        "y": 3988.357879638672,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "21303fe3.7cc7a8"
            ]
        ]
    },
    {
        "id": "21303fe3.7cc7a8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2863.3335304260254,
        "y": 3988.3582515716553,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "c3c23e6e.f406e8"
            ]
        ]
    },
    {
        "id": "c3c23e6e.f406e8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2993.3334159851074,
        "y": 3986.691375732422,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "334d9e50.554812",
        "type": "set",
        "name": "save indexes",
        "xml": "<set>\n<parameter name='saved-vnf-network-index' value='`$vnf-network-index`' />\n<parameter name='saved-related-network-index' value='`$related-network-index`' />\n",
        "comments": "",
        "x": 3433.3336296081543,
        "y": 3938.3582496643066,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "b8c9d127.4eec38",
        "type": "execute",
        "name": "generate cp-instance-id",
        "xml": "<execute plugin=\"org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils\" method=\"generateUUID\" >\n<parameter name=\"ctx-destination\" value=\"cp-instance-id\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1722.2381210327148,
        "y": 4967.882302761078,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "aaf32437.4cef88",
        "type": "save",
        "name": "save cp to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"cp\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\" >\n<parameter name=\"cp-instance-id\" value=\"`$cp-instance-id`\" />\n<parameter name=\"port-id\" value=\"0\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1703.90474319458,
        "y": 5034.5488085746765,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "45f81af2.00ca24",
                "cfdaff5f.4d6de8"
            ]
        ]
    },
    {
        "id": "45f81af2.00ca24",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1892.9047241210938,
        "y": 5010.215422093868,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "b0518f34.cac6c"
            ]
        ]
    },
    {
        "id": "b0518f34.cac6c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2060.0714721679688,
        "y": 5026.009855687618,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a5df6a1f.787e3",
                "3db10379.cadefc"
            ]
        ]
    },
    {
        "id": "cfdaff5f.4d6de8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1897.9047241210938,
        "y": 5059.881681859493,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "b0518f34.cac6c"
            ]
        ]
    },
    {
        "id": "a5df6a1f.787e3",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating cp object in AAI\" />\n",
        "comments": "",
        "x": 2225.5714836120605,
        "y": 5037.8820605278015,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "bc7e2484.e69228",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1498.714443206787,
        "y": 5237.167096614838,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "134d490c.25b81f",
                "502f6d13.ee70cc",
                "b8c9d127.4eec38",
                "aaf32437.4cef88",
                "9ac4ad9c.d842",
                "7ff418af.f0a608"
            ]
        ]
    },
    {
        "id": "134d490c.25b81f",
        "type": "set",
        "name": "set connection point data",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].connection-point.connection-point-id'\n  value='`$cp-instance-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].connection-point.port-id'\n  value='0' />\n",
        "comments": "",
        "x": 1734.2382850646973,
        "y": 5112.406378269196,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "16d827bf.761bd",
        "type": "comment",
        "name": "Floating IPs",
        "info": "",
        "comments": "",
        "x": 1295.0001029968262,
        "y": 6094.691496551037,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "9ac4ad9c.d842",
        "type": "for",
        "name": "for each vnf-network",
        "xml": "<for index='vnf-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1718.3332862854004,
        "y": 5508.691872119904,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "36b35f12.bc0638"
            ]
        ]
    },
    {
        "id": "a55f1caf.a65878",
        "type": "save",
        "name": "save cp relationship to l3-network",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"cp:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n     AND cp.cp-instance-id = $cp-instance-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2356.6667671203613,
        "y": 5508.358379840851,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "2783a294.d9970e",
                "26e2d614.94cbb2"
            ]
        ]
    },
    {
        "id": "fb9b2db7.a119f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2728.4998054504395,
        "y": 5481.6763281822205,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4f31fc68.c1e6b4",
                "31ec22c4.51ea5e"
            ]
        ]
    },
    {
        "id": "fff4f3ff.1947f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2728.4998817443848,
        "y": 5534.676086902618,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4f31fc68.c1e6b4",
                "15135e2c.b33e5a"
            ]
        ]
    },
    {
        "id": "2783a294.d9970e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2571.666690826416,
        "y": 5481.691998004913,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "fb9b2db7.a119f"
            ]
        ]
    },
    {
        "id": "26e2d614.94cbb2",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2580.238224029541,
        "y": 5534.311142444611,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "fff4f3ff.1947f8"
            ]
        ]
    },
    {
        "id": "31ec22c4.51ea5e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating cp relationship to l3-network in AAI\" />\n",
        "comments": "",
        "x": 2900.6666145324707,
        "y": 5504.3587040901175,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "15135e2c.b33e5a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating cp relationship to l3-network\" />\n",
        "comments": "",
        "x": 2895.833522796631,
        "y": 5556.009911060332,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "4f31fc68.c1e6b4",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3102.3333778381348,
        "y": 5454.35870218277,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "7ff418af.f0a608",
        "type": "for",
        "name": "for each vm-network",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1718.333438873291,
        "y": 5669.35822725296,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "77662062.8159c"
            ]
        ]
    },
    {
        "id": "fb03ccd9.dcf8d8",
        "type": "save",
        "name": "save cp relationship to l3-network and vlan-tag",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"cp:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n     AND cp.cp-instance-id = $cp-instance-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$related-network-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vlan-tag\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vlan-tags/vlan-tag/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$related-network-index].vlan-tags.vlan-interface`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2638.00044631958,
        "y": 5667.358222484589,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "3ba6953f.154e12",
                "dd2a018a.ddecf"
            ]
        ]
    },
    {
        "id": "25b1ce59.35b64a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3044.8334922790527,
        "y": 5640.67552137375,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "43ea6b39.724e64",
                "4f31fc68.c1e6b4"
            ]
        ]
    },
    {
        "id": "776418cc.650358",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3044.833568572998,
        "y": 5693.675280094148,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "177fa68d.607ac9",
                "4f31fc68.c1e6b4"
            ]
        ]
    },
    {
        "id": "3ba6953f.154e12",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2888.0003776550293,
        "y": 5640.691191196443,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "25b1ce59.35b64a"
            ]
        ]
    },
    {
        "id": "dd2a018a.ddecf",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2896.5719108581543,
        "y": 5693.31033563614,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "776418cc.650358"
            ]
        ]
    },
    {
        "id": "43ea6b39.724e64",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating cp relationship to l3-network and vlan-tag in AAI\" />\n",
        "comments": "",
        "x": 3217.000301361084,
        "y": 5663.357897281647,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "177fa68d.607ac9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating cp relationship to l3-network and vlan-tag\" />\n",
        "comments": "",
        "x": 3212.167209625244,
        "y": 5715.009104251862,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "f4be9dce.3fda3",
        "type": "for",
        "name": "for each related-network",
        "xml": "<for silentFailure='true' index='related-network-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2334.0002784729004,
        "y": 5667.358223438263,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "fb03ccd9.dcf8d8"
            ]
        ]
    },
    {
        "id": "8534c826.13da18",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-generate-heat-parameters",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-generate-heat-parameters' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 592.3335723876953,
        "y": 6910.358483910561,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "75790bd1.e8defc",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmoduleheat.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 413.6669006347656,
        "y": 6958.358586907387,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "c898fd55.fa0688",
        "type": "switchNode",
        "name": "switch input vf-module-name",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 565.0000038146973,
        "y": 2394.191044807434,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "ba4d5614.642188",
                "37d64c51.9cd974"
            ]
        ]
    },
    {
        "id": "ba4d5614.642188",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 764.9999961853027,
        "y": 2371.690947532654,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a37b13e8.33b938"
            ]
        ]
    },
    {
        "id": "37d64c51.9cd974",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 765.4285888671875,
        "y": 2421.81005859375,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "6529b298.61d4a4"
            ]
        ]
    },
    {
        "id": "6553babe.5f42ac",
        "type": "for",
        "name": "for each vnfc-subnet-role",
        "xml": "<for index='subnet-role-index' start='0'\n  end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1322.5001029968262,
        "y": 3189.190721511841,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "13b1a341.f7194d"
            ]
        ]
    },
    {
        "id": "13b1a341.f7194d",
        "type": "for",
        "name": "for each vnfc-address-family",
        "xml": "<for index='address-family-index' start='0'\n  end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1570.8333625793457,
        "y": 3189.190721511841,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a495cd13.ac3888"
            ]
        ]
    },
    {
        "id": "f1de476.813b738",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 528.3332786560059,
        "y": 2907.52405834198,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "5d8aed8b.1bdc24"
            ]
        ]
    },
    {
        "id": "5d8aed8b.1bdc24",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 710.000057220459,
        "y": 2906.191206932068,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "8556a0d3.b51ac"
            ]
        ]
    },
    {
        "id": "8556a0d3.b51ac",
        "type": "for",
        "name": "for each vnfc-network",
        "xml": "<for silentFailure='true' index='vnfc-network-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 911.1666297912598,
        "y": 2906.023896217346,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "6e901201.85a804"
            ]
        ]
    },
    {
        "id": "6e901201.85a804",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1123.3333015441895,
        "y": 2905.024256706238,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "914f0e01.802e08",
                "2226678b.986958",
                "26a1009d.f04208",
                "6553babe.5f42ac"
            ]
        ]
    },
    {
        "id": "914f0e01.802e08",
        "type": "set",
        "name": "set vnf-network-index to -1",
        "xml": "<set>\n<parameter name='vnf-network-index' value='-1' />\n",
        "comments": "",
        "x": 1335.0000190734863,
        "y": 2858.35747051239,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "2226678b.986958",
        "type": "for",
        "name": "for each vnf-network",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1316.6668090820312,
        "y": 2905.0242223739624,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "90d45d40.9fed1"
            ]
        ]
    },
    {
        "id": "90d45d40.9fed1",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$idx].network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1558.3332786560059,
        "y": 2903.357717514038,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "b1008fcb.57c808"
            ]
        ]
    },
    {
        "id": "b1008fcb.57c808",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1754.99995803833,
        "y": 2903.357636451721,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "c0752eeb.157cc"
            ]
        ]
    },
    {
        "id": "c0752eeb.157cc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1908.333179473877,
        "y": 2903.357508659363,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "aa9d4976.24874",
                "14a1e383.35ce54",
                "d1f1e28b.e998b"
            ]
        ]
    },
    {
        "id": "aa9d4976.24874",
        "type": "set",
        "name": "set vnf-network-index",
        "xml": "<set>\n<parameter name='vnf-network-index' value='`$idx`' />\n",
        "comments": "",
        "x": 2115.000011444092,
        "y": 2851.6908864974976,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "14a1e383.35ce54",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2069.999927520752,
        "y": 2941.6908073425293,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "26a1009d.f04208",
        "type": "switchNode",
        "name": "switch vnf-network-index",
        "xml": "<switch test='`$vnf-network-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1328.3333473205566,
        "y": 2965.024224281311,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "d0a470bb.1e44a8"
            ]
        ]
    },
    {
        "id": "d0a470bb.1e44a8",
        "type": "outcome",
        "name": "-1",
        "xml": "<outcome value='-1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1519.9999885559082,
        "y": 2965.024468421936,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "f884f987.8fb5f"
            ]
        ]
    },
    {
        "id": "f884f987.8fb5f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1668.333179473877,
        "y": 2963.357508659363,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "89311515.bf059",
                "d72a7284.bd122"
            ]
        ]
    },
    {
        "id": "89311515.bf059",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3196.6668128967285,
        "y": 2815.024085998535,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "d72a7284.bd122",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNFC network role '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-network-role\n      + ' is not found in VNF network list'\n      `\" />\n\n\n\n",
        "comments": "",
        "x": 1836.6665534973145,
        "y": 2981.690760612488,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "e074c1fb.288db",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2359.999897003174,
        "y": 3373.3573598861694,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "c84bee67.a01c",
                "7e827224.b98a54",
                "158ff27d.f681fe"
            ]
        ]
    },
    {
        "id": "c84bee67.a01c",
        "type": "for",
        "name": "for each subnet-data",
        "xml": "<for index='subnet-data-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2556.666648864746,
        "y": 3328.3572788238525,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "db92134e.c11958"
            ]
        ]
    },
    {
        "id": "db92134e.c11958",
        "type": "switchNode",
        "name": "address-families match?",
        "xml": "<switch test='`$tmp.address-family\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].ip-version`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2783.3332748413086,
        "y": 3328.3572788238525,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "664e2d50.db9864"
            ]
        ]
    },
    {
        "id": "664e2d50.db9864",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2963.333240509033,
        "y": 3328.3576850891113,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "86f838f7.8fb2d8"
            ]
        ]
    },
    {
        "id": "53f781b3.123d98",
        "type": "set",
        "name": "set tmp.address-family",
        "xml": "<set>\n<parameter name='tmp.address-family'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-address-family`' />\n",
        "comments": "",
        "x": 2388.3332328796387,
        "y": 3191.690773010254,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "a495cd13.ac3888",
        "type": "switchNode",
        "name": "switch vnfc-subnet-ip_length",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1833.3335762023926,
        "y": 3188.357808113098,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "39bb02f5.1a9bde",
                "1e32cfbf.18065",
                "c36c4aab.2dd96"
            ]
        ]
    },
    {
        "id": "39bb02f5.1a9bde",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 2035.000087738037,
        "y": 3088.3573513031006,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "6c7a9e2c.5ffe28"
            ]
        ]
    },
    {
        "id": "1e32cfbf.18065",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2031.4287185668945,
        "y": 3274.309642791748,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "cb710085.b13e"
            ]
        ]
    },
    {
        "id": "6c7a9e2c.5ffe28",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2166.6666374206543,
        "y": 3111.0240983963013,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "2ea4d244.10a91e",
        "type": "set",
        "name": "set subnet-id to -1",
        "xml": "<set>\n<parameter name='subnet-id' value='-1' />\n",
        "comments": "",
        "x": 3056.6671562194824,
        "y": 3490.0247650146484,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "cb710085.b13e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2185.0001335144043,
        "y": 3273.3572750091553,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "53f781b3.123d98",
                "e074c1fb.288db"
            ]
        ]
    },
    {
        "id": "fd601bae.1a1768",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4316.666753768921,
        "y": 3661.691241979599,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "3b599124.ddda26",
                "f1ce1b9b.c5713"
            ]
        ]
    },
    {
        "id": "f1ce1b9b.c5713",
        "type": "execute",
        "name": "execute isInSameSubnet",
        "xml": "<execute plugin=\"com.att.sdnctl.sli.plugin.ipAddressTools.IpAddressTool\" method=\"isInSameSubnet\">\n\t<parameter name=\"firstIPAddr\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].network-start-address`\" />\n\t<parameter name=\"secondIPAddr\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[0].vnfc-ip-address`\" />\n\t<parameter name=\"subnet\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].cidr-mask`\" />\n\t<parameter name=\"ipType\" value=\"`$ip-type`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4531.6667556762695,
        "y": 3711.690915822983,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "286c5f74.70fde"
            ]
        ]
    },
    {
        "id": "3b599124.ddda26",
        "type": "switchNode",
        "name": "switch tmp.address-family",
        "xml": "<switch test='`$tmp.address-family`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4533.333911895752,
        "y": 3618.357902288437,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "f9adff66.6ab258",
                "23a24dc2.1a7102"
            ]
        ]
    },
    {
        "id": "f9adff66.6ab258",
        "type": "outcome",
        "name": "ipv4",
        "xml": "<outcome value='ipv4'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4736.667174021402,
        "y": 3591.6911326249437,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "dc9baf82.fb366"
            ]
        ]
    },
    {
        "id": "23a24dc2.1a7102",
        "type": "outcome",
        "name": "ipv6",
        "xml": "<outcome value='ipv6'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4736.666847229004,
        "y": 3638.3576600551605,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "9777e060.2e3dc"
            ]
        ]
    },
    {
        "id": "dc9baf82.fb366",
        "type": "set",
        "name": "set ip-type parameter to IPv4",
        "xml": "<set>\n<parameter name='ip-type' value='IPv4' />\n",
        "comments": "",
        "x": 4933.333660125732,
        "y": 3590.0246064662933,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "9777e060.2e3dc",
        "type": "set",
        "name": "set ip-type parameter to IPv6",
        "xml": "<set>\n<parameter name='ip-type' value='IPv6' />\n",
        "comments": "",
        "x": 4938.33353805542,
        "y": 3638.357679128647,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "7c5bee11.1ed9d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4871.666786193848,
        "y": 3711.357679128647,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "b5ad4567.eb0b98",
                "3214e32a.ac2af4"
            ]
        ]
    },
    {
        "id": "b5ad4567.eb0b98",
        "type": "set",
        "name": "set subnet-id",
        "xml": "<set>\n<parameter name='subnet-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id`' />\n",
        "comments": "",
        "x": 5050.000106811523,
        "y": 3688.024165868759,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "3214e32a.ac2af4",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 5035.000110626221,
        "y": 3734.691159963608,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "2cb5307a.bb967",
        "type": "switchNode",
        "name": "switch subnet-id",
        "xml": "<switch test='`$subnet-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3048.3330307006836,
        "y": 3651.691499710083,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4eaebda7.88a464"
            ]
        ]
    },
    {
        "id": "4eaebda7.88a464",
        "type": "outcome",
        "name": "-1",
        "xml": "<outcome value='-1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3204.99959564209,
        "y": 3651.6914348602295,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "c969c7c1.3acfe8"
            ]
        ]
    },
    {
        "id": "c969c7c1.3acfe8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3353.3327865600586,
        "y": 3650.0244750976562,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "48e52ed2.21ebb",
                "89311515.bf059"
            ]
        ]
    },
    {
        "id": "48e52ed2.21ebb",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Not able to find VNF network subnet that contains address '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[0].vnfc-ip-address\n      `\" />\n\n\n\n",
        "comments": "",
        "x": 3521.666118621826,
        "y": 3666.6909503936768,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "5fd2a555.9c69d4",
        "type": "set",
        "name": "set subnet-id in vnfc-ip-assignments (temp variable)",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id' value='`$subnet-id`' />\n",
        "comments": "",
        "x": 3159.9996757507324,
        "y": 3728.3582706451416,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "709b1630.8dd8b8",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmodulec.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 513.3332710266113,
        "y": 3323.357508659363,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "286c5f74.70fde",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4718.333358764648,
        "y": 3711.691404104233,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "7c5bee11.1ed9d"
            ]
        ]
    },
    {
        "id": "d1f1e28b.e998b",
        "type": "set",
        "name": "set network-id",
        "xml": "<set>\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].network-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$idx].network-id`' />\n",
        "comments": "",
        "x": 2091.666515350342,
        "y": 2896.690969467163,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "6f6678f2.1bf2e",
        "type": "switchNode",
        "name": "switch nfc-naming-code",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1289.9999809265137,
        "y": 4511.690697193146,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "726b02e.fd1c97c",
                "21ecd530.fb8122"
            ]
        ]
    },
    {
        "id": "726b02e.fd1c97c",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 1474.999927520752,
        "y": 4486.690515995026,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "46b7d4f1.8d2604"
            ]
        ]
    },
    {
        "id": "21ecd530.fb8122",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1473.095199584961,
        "y": 4533.476343631744,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "7ea5f92e.d1edb8"
            ]
        ]
    },
    {
        "id": "46b7d4f1.8d2604",
        "type": "set",
        "name": "set tmp.nfc-naming-code to DEFAULT",
        "xml": "<set>\n<parameter name='tmp.nfc-naming-code' value='DEFAULT' />\n",
        "comments": "",
        "x": 1706.6666984558105,
        "y": 4485.023866176605,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "7ea5f92e.d1edb8",
        "type": "set",
        "name": "set tmp.nfc-naming-code",
        "xml": "<set>\n<parameter name='tmp.nfc-naming-code' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code`' />\n",
        "comments": "",
        "x": 1663.333209991455,
        "y": 4533.357364177704,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "c11e7bb7.050ab8",
        "type": "switchNode",
        "name": "switch nfc-function",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-function`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1278.3333129882812,
        "y": 4610.023870944977,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "2d809cc8.28629c",
                "48b0d022.df9368"
            ]
        ]
    },
    {
        "id": "2d809cc8.28629c",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 1474.9999198913574,
        "y": 4585.023668766022,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "c6205636.69c938"
            ]
        ]
    },
    {
        "id": "48b0d022.df9368",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1473.0951919555664,
        "y": 4631.8094964027405,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "6da6c28b.2af50c"
            ]
        ]
    },
    {
        "id": "c6205636.69c938",
        "type": "set",
        "name": "set tmp.nfc-function to DEFAULT",
        "xml": "<set>\n<parameter name='tmp.nfc-function' value='DEFAULT' />\n",
        "comments": "",
        "x": 1686.6667022705078,
        "y": 4583.3568778038025,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "6da6c28b.2af50c",
        "type": "set",
        "name": "set tmp.nfc-function",
        "xml": "<set>\n<parameter name='tmp.nfc-function' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-function`' />\n",
        "comments": "",
        "x": 1644.9998321533203,
        "y": 4631.690538883209,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "8bf1dfbc.51b108",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2918.3333015441895,
        "y": 2266.691004753113,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "5f9b54a9.c1cdd4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2824.9998054504395,
        "y": 2341.691004753113,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "c88feb78.b7ccd",
                "8bf1dfbc.51b108"
            ]
        ]
    },
    {
        "id": "f6f1c5d8.dc0ab",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2029.9998588562012,
        "y": 2401.6908683776855,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "7a69f1ed.4762a8",
                "8bf1dfbc.51b108"
            ]
        ]
    },
    {
        "id": "4331007b.e83998",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2291.666723251343,
        "y": 2456.691035270691,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "ff44880b.925a9",
                "8bf1dfbc.51b108"
            ]
        ]
    },
    {
        "id": "36b35f12.bc0638",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1951.6666297912598,
        "y": 5508.6908984184265,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "255ff0a6.4c3e5"
            ]
        ]
    },
    {
        "id": "255ff0a6.4c3e5",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2150.000099182129,
        "y": 5508.358053684235,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a55f1caf.a65878"
            ]
        ]
    },
    {
        "id": "77662062.8159c",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1954.9999732971191,
        "y": 5668.357346057892,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "ec6e0033.18078"
            ]
        ]
    },
    {
        "id": "ec6e0033.18078",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2153.3334426879883,
        "y": 5668.0245013237,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "f4be9dce.3fda3"
            ]
        ]
    },
    {
        "id": "61dec192.4d7148",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1858.3332557678223,
        "y": 6246.6907658576965,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4d116331.dbe40c",
                "31e79dcc.7e90fa"
            ]
        ]
    },
    {
        "id": "5e28153d.aad85c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1860.0000038146973,
        "y": 6561.690777301788,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "6bd05851.cda258",
                "214cc548.9d2312"
            ]
        ]
    },
    {
        "id": "31e79dcc.7e90fa",
        "type": "for",
        "name": "for each vnfc-network-role",
        "xml": "<for silentFailure='true' index='vnfc-network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2075.000202178955,
        "y": 6305.023936748505,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "730f1cc9.69fe4c"
            ]
        ]
    },
    {
        "id": "4d927385.1d80e4",
        "type": "save",
        "name": "save vip-ipv4-address-list relationship to cp",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv4-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"cp\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n        + '/cps/cp/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].connection-point.connection-point-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2750.0001258850098,
        "y": 6305.023775577545,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a12b08ff.872da8",
                "435faa21.8dd73c"
            ]
        ]
    },
    {
        "id": "b7ae4ee8.46c8f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationship to cp in AAI\" />\n",
        "comments": "",
        "x": 3308.3333473205566,
        "y": 6298.357183933258,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "29ab7ac1.d4eea6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationship to cp\" />\n",
        "comments": "",
        "x": 3308.500316619873,
        "y": 6348.341357648373,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "b1889d0.1a3afe",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3141.8332176208496,
        "y": 6278.341557025909,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "b7ae4ee8.46c8f8",
                "2e738df3.a266b2"
            ]
        ]
    },
    {
        "id": "84cd1c51.7c62c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3141.833293914795,
        "y": 6331.341315746307,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "29ab7ac1.d4eea6",
                "2e738df3.a266b2"
            ]
        ]
    },
    {
        "id": "a12b08ff.872da8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2985.000102996826,
        "y": 6278.357226848602,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "b1889d0.1a3afe"
            ]
        ]
    },
    {
        "id": "435faa21.8dd73c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2993.571636199951,
        "y": 6330.9763712883,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "84cd1c51.7c62c8"
            ]
        ]
    },
    {
        "id": "214cc548.9d2312",
        "type": "for",
        "name": "for each vnfc-network-role",
        "xml": "<for silentFailure='true' index='vnfc-network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2076.6665992736816,
        "y": 6628.357346057892,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "c3545be7.a08a58"
            ]
        ]
    },
    {
        "id": "8ae6c277.1259b8",
        "type": "save",
        "name": "save vip-ipv6-address-list relationship to cp",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv6-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"cp\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n        + '/cps/cp/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].connection-point.connection-point-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2746.6665534973145,
        "y": 6626.690128803253,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "5f1b56ef.56a3d",
                "4c3ccc6a.9008ac"
            ]
        ]
    },
    {
        "id": "d0696152.132c6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationship to cp in AAI\" />\n",
        "comments": "",
        "x": 3304.9997749328613,
        "y": 6620.023537158966,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "89aa2cd0.882d5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationship to cp\" />\n",
        "comments": "",
        "x": 3305.1667442321777,
        "y": 6670.007710874081,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "feaa3d1f.f068f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3138.4996452331543,
        "y": 6600.007910251617,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "d0696152.132c6"
            ]
        ]
    },
    {
        "id": "e2f260c.e83a22",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3138.4997215270996,
        "y": 6653.007668972015,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "89aa2cd0.882d5"
            ]
        ]
    },
    {
        "id": "5f1b56ef.56a3d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2981.666530609131,
        "y": 6600.02358007431,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "feaa3d1f.f068f8"
            ]
        ]
    },
    {
        "id": "4c3ccc6a.9008ac",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2990.238063812256,
        "y": 6652.642724514008,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "e2f260c.e83a22"
            ]
        ]
    },
    {
        "id": "730f1cc9.69fe4c",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].vnfc-network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2328.3332710266113,
        "y": 6305.023613452911,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "de7543a8.d36ff8"
            ]
        ]
    },
    {
        "id": "de7543a8.d36ff8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2515.000114440918,
        "y": 6305.024100780487,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4d927385.1d80e4"
            ]
        ]
    },
    {
        "id": "c3545be7.a08a58",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].vnfc-network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2324.9998512268066,
        "y": 6626.690353870392,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "ad4ca04.6f61ae"
            ]
        ]
    },
    {
        "id": "ad4ca04.6f61ae",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2511.6666946411133,
        "y": 6626.6908411979675,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "8ae6c277.1259b8"
            ]
        ]
    },
    {
        "id": "59928182.6a1818",
        "type": "comment",
        "name": "SELF-SERVE FORK",
        "info": "",
        "comments": "",
        "x": 694.7142944335938,
        "y": 915.0476245880127,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "4f63954f.60114c",
        "type": "call",
        "name": "call self-serve-vf-module-assign",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='self-serve-vf-module-assign' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1227.749439239502,
        "y": 959.964430809021,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "c903ef6e.5d9028"
            ]
        ]
    },
    {
        "id": "b3692a00.1ad058",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Failed to create self-serve assignment for vf-module with vf-module-id=' + $vf-module-topology-operation-input.vf-module-information.vf-module-id + ' with error: ' + $error-message`\" />\n",
        "comments": "",
        "x": 1611.820816040039,
        "y": 959.9643812179565,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "c903ef6e.5d9028",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1448.047019958496,
        "y": 959.4524621963501,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "b3692a00.1ad058"
            ]
        ]
    },
    {
        "id": "15551ef3.fbe519",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1174.6186828613281,
        "y": 1109.809350013733,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "f7ab153e.ede618",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss-vnfend.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1166.6662254333496,
        "y": 1064.3008937835693,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "58b9ddbd.c28154",
        "type": "set",
        "name": "set order-status to PendingCreate",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n",
        "comments": "",
        "x": 1237.3567428588867,
        "y": 1013.2617883682251,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "4c64ed.a697bb14",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 948.4521713256836,
        "y": 959.6425924301147,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4f63954f.60114c",
                "58b9ddbd.c28154",
                "f7ab153e.ede618",
                "15551ef3.fbe519"
            ]
        ]
    },
    {
        "id": "ca9d6671.e0234",
        "type": "comment",
        "name": "First, count the subnets for this address family",
        "info": "",
        "comments": "",
        "x": 2690.0004081726074,
        "y": 3237.9997692108154,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "43ee48f3.cff09",
        "type": "for",
        "name": "for each subnet-data",
        "xml": "<for index='subnet-data-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3063.333095550537,
        "y": 3533.0002727508545,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "c2367378.e6cd3"
            ]
        ]
    },
    {
        "id": "c2367378.e6cd3",
        "type": "switchNode",
        "name": "address-families match?",
        "xml": "<switch test='`$tmp.address-family\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].ip-version`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3289.9997215270996,
        "y": 3533.0002727508545,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a41d108.beda87"
            ]
        ]
    },
    {
        "id": "a41d108.beda87",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3469.999687194824,
        "y": 3533.0006790161133,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "bbd41071.5f5ca"
            ]
        ]
    },
    {
        "id": "7e827224.b98a54",
        "type": "set",
        "name": "set af-count to 0",
        "xml": "<set>\n<parameter name='af-count' value='0' />\n",
        "comments": "",
        "x": 2544.9999809265137,
        "y": 3279.6665210723877,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "f96f4d35.ea7948",
        "type": "set",
        "name": "increment af-count",
        "xml": "<set>\n<parameter name='af-count' value='`$af-count + 1`' />\n",
        "comments": "",
        "x": 3293.3333473205566,
        "y": 3346.3332710266113,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "86f838f7.8fb2d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3109.9997215270996,
        "y": 3327.9999561309814,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "f96f4d35.ea7948",
                "2d2924.bfe856dc"
            ]
        ]
    },
    {
        "id": "2d2924.bfe856dc",
        "type": "set",
        "name": "set subnet-id",
        "xml": "<set>\n<parameter name='subnet-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id`' />\n",
        "comments": "",
        "x": 3274.999767303467,
        "y": 3301.3332691192627,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "158ff27d.f681fe",
        "type": "switchNode",
        "name": "switch af-count",
        "xml": "<switch test='`$af-count`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2535.0003929138184,
        "y": 3516.3334379196167,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "a0b1648c.912158",
                "70cf3548.bbf294"
            ]
        ]
    },
    {
        "id": "a0b1648c.912158",
        "type": "outcome",
        "name": "1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2694.999912261963,
        "y": 3414.666606903076,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "ca4eb36c.b27be8"
            ]
        ]
    },
    {
        "id": "ca4eb36c.b27be8",
        "type": "set",
        "name": "set subnet-id in vnfc-ip-assignments (temp variable)",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id'\n  value='`$subnet-id`' />\n",
        "comments": "",
        "x": 2968.3332176208496,
        "y": 3412.9999561309814,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "70cf3548.bbf294",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2694.999828338623,
        "y": 3616.333526611328,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4f40f504.bc667c"
            ]
        ]
    },
    {
        "id": "4f40f504.bc667c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2851.6664695739746,
        "y": 3616.3332080841064,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "2ea4d244.10a91e",
                "43ee48f3.cff09",
                "2cb5307a.bb967",
                "5fd2a555.9c69d4"
            ]
        ]
    },
    {
        "id": "bbd41071.5f5ca",
        "type": "switchNode",
        "name": "switch network-start-address",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].network-start-address`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3664.9998664855957,
        "y": 3531.333522796631,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "eb9161e6.999df8",
                "e5973f29.60a6a8"
            ]
        ]
    },
    {
        "id": "eb9161e6.999df8",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 3861.6667137145996,
        "y": 3466.333133459091,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "9175dbd1.90db18"
            ]
        ]
    },
    {
        "id": "e5973f29.60a6a8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3854.7621116638184,
        "y": 3600.61904501915,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "f7225223.9cd0a"
            ]
        ]
    },
    {
        "id": "f7225223.9cd0a",
        "type": "switchNode",
        "name": "switch cidr-mask",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].cidr-mask`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4009.9999046325684,
        "y": 3599.666251897812,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "6dbe50b0.25663",
                "86c99244.02a7"
            ]
        ]
    },
    {
        "id": "6dbe50b0.25663",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 4164.999980926514,
        "y": 3529.6665513515472,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4ede313d.185d4"
            ]
        ]
    },
    {
        "id": "86c99244.02a7",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4168.095777511597,
        "y": 3662.2856385707855,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "fd601bae.1a1768"
            ]
        ]
    },
    {
        "id": "c36c4aab.2dd96",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>",
        "comments": "",
        "outputs": 1,
        "x": 2036.666591644287,
        "y": 3136.3332080841064,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "6c7a9e2c.5ffe28"
            ]
        ]
    },
    {
        "id": "1a5ed4ff.cd6413",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'SDNC subnet id '\n      + $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id\n      + ' does not have network-start-address populated'`\" />\n\n\n\n",
        "comments": "",
        "x": 4170.000217437744,
        "y": 3481.332970380783,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "9175dbd1.90db18",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4006.6666412353516,
        "y": 3466.332900762558,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "1a5ed4ff.cd6413",
                "89311515.bf059"
            ]
        ]
    },
    {
        "id": "f75c2653.dd05c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'SDNC subnet id '\n      + $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id\n      + ' does not have cidr-mask populated'`\" />\n\n\n\n",
        "comments": "",
        "x": 4475.000072479248,
        "y": 3542.9998376369476,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "4ede313d.185d4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4311.6664962768555,
        "y": 3527.9997680187225,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "f75c2653.dd05c",
                "89311515.bf059"
            ]
        ]
    },
    {
        "id": "8c5c11fb.d4aaf",
        "type": "comment",
        "name": "Ignore address families with no addresses",
        "info": "",
        "comments": "",
        "x": 2310.9999656677246,
        "y": 3066.6667041778564,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "dc86b143.7bc0f",
        "type": "switchNode",
        "name": "switch invariant-uuid",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].invariant-uuid`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1281.666805267334,
        "y": 4696.333082199097,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4ff032c9.ac47cc",
                "4f1d070c.cbefd8"
            ]
        ]
    },
    {
        "id": "4ff032c9.ac47cc",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 1463.3332176208496,
        "y": 4672.999711990356,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "9c0ccfc9.82e09"
            ]
        ]
    },
    {
        "id": "4f1d070c.cbefd8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1461.4284896850586,
        "y": 4719.785539627075,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "bf5629c7.b8c548"
            ]
        ]
    },
    {
        "id": "9c0ccfc9.82e09",
        "type": "save",
        "name": "save vnfc to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vnfc\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\" >\n<parameter name=\"vnfc-name\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n<parameter name=\"nfc-naming-code\" value=\"`$tmp.nfc-naming-code`\" />\n<parameter name=\"nfc-function\" value=\"`$tmp.nfc-function`\" />\n<parameter name=\"orchestration-status\" value=\"`PendingCreate`\" />\n<parameter name=\"in-maint\" value=\"true\" />\n<parameter name=\"prov-status\" value=\"`PREPROV`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1624.999843597412,
        "y": 4674.666704177856,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "57f9125a.f4f11c",
                "c29ebd4.1b8af4"
            ]
        ]
    },
    {
        "id": "cfe429db.9ee878",
        "type": "switchNode",
        "name": "switch input cloud-owner",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-request-input.cloud-owner`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 560.7141952514648,
        "y": 304.9047336578369,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "f0f44cd.5ed593",
                "311a0c57.6a3054"
            ]
        ]
    },
    {
        "id": "f0f44cd.5ed593",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 744.0475692749023,
        "y": 274.9047222137451,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "baeca66d.f8d568"
            ]
        ]
    },
    {
        "id": "311a0c57.6a3054",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 743.8094749450684,
        "y": 315.85721588134766,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "ecc33023.4b1938"
            ]
        ]
    },
    {
        "id": "baeca66d.f8d568",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 879.0475234985352,
        "y": 273.2380619049072,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "ecc33023.4b1938",
        "type": "set",
        "name": "set prop.cloud-region.cloud-owner",
        "xml": "<set>\n<parameter name='prop.cloud-region.cloud-owner' value='`$vf-module-topology-operation-input.vf-module-request-input.cloud-owner`' />\n",
        "comments": "",
        "x": 960.7141799926758,
        "y": 314.9047431945801,
        "z": "9167bcd1.0dd69",
        "wires": []
    },
    {
        "id": "59c722cd.d5e3ac",
        "type": "call",
        "name": "call self-serve-vf-module-forking-logic",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='self-serve-vf-module-forking-logic' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 592.3015670776367,
        "y": 856.2980642318726,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "9ed32d4f.dbd058",
        "type": "switchNode",
        "name": "switch ss.self-serve-flag",
        "xml": "<switch test=\"`$ss.self-serve-flag`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 550.4443054199219,
        "y": 1083.2981328964233,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "21546dae.57be42",
                "174b6de2.72fdb2"
            ]
        ]
    },
    {
        "id": "21546dae.57be42",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 771.158504486084,
        "y": 1200.869031906128,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "43e1e208.1c9204"
            ]
        ]
    },
    {
        "id": "174b6de2.72fdb2",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 771.7299575805664,
        "y": 959.7266693115234,
        "z": "9167bcd1.0dd69",
        "wires": [
            [
                "4c64ed.a697bb14"
            ]
        ]
    },
    {
        "id": "6f90d0a3.4f5888",
        "type": "call",
        "name": "call check for VNF-API-preload and copy",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='gw-vfmodule-update' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 501,
        "y": 7285,
        "z": "9167bcd1.0dd69",
        "wires": [
            []
        ]
    },
    {
        "id": "484ad130.562eb8",
        "type": "comment",
        "name": "'Old' version of DG, called for flows where SO does not expect async response (so-sdnc-adapter)",
        "info": "",
        "comments": "",
        "x": 433,
        "y": 88,
        "z": "9167bcd1.0dd69",
        "wires": []
    }
]
