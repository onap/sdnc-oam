[
    {
        "id": "c877a0eb.5697e",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 131,
        "y": 124,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "849c0a51.01f778"
            ]
        ]
    },
    {
        "id": "849c0a51.01f778",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 244.85713577270508,
        "y": 163.80953788757324,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "51a2fe38.a09ff"
            ]
        ]
    },
    {
        "id": "51a2fe38.a09ff",
        "type": "method",
        "name": "method vf-module-topology-operation-assign-sync",
        "xml": "<method rpc='vf-module-topology-operation-assign-sync' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 244.42862701416016,
        "y": 204,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "15e3fa8c.a15c5d"
            ]
        ]
    },
    {
        "id": "f22cabd3.7fcb48",
        "type": "comment",
        "name": "vf-module-topology-operation-assign-sync",
        "info": "",
        "comments": "",
        "x": 389.32110595703125,
        "y": 49.97569942474365,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "7b558787.9e8418",
        "type": "switchNode",
        "name": "switch request-action",
        "xml": "<switch test='`$vf-module-topology-operation-input.request-information.request-action`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 536.1905097961426,
        "y": 379.52382230758667,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "92fd2c34.9c8b88",
                "58cbe170.90e16"
            ]
        ]
    },
    {
        "id": "92fd2c34.9c8b88",
        "type": "outcome",
        "name": "CreateVfModuleInstance",
        "xml": "<outcome value='CreateVfModuleInstance'>\n",
        "comments": "",
        "outputs": 1,
        "x": 798.2381248474121,
        "y": 356.66670846939087,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "e198cf68.897fc"
            ]
        ]
    },
    {
        "id": "58cbe170.90e16",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 741.9047698974609,
        "y": 402.0476975440979,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "3ee3ba21.50bf96"
            ]
        ]
    },
    {
        "id": "e198cf68.897fc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 988.0952892303467,
        "y": 356.6667399406433,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "3ee3ba21.50bf96",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'assign' then request-action must be 'CreateVfModuleInstance'\" />\n",
        "comments": "",
        "x": 1006.9047775268555,
        "y": 402.381010055542,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "25bf4f65.65784",
        "type": "get-resource",
        "name": "get-resource VF_MODULE_MODEL",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODULE_MODEL WHERE customization_uuid = $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid'\n  pfx='db.vf-module-model'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 583.5237770080566,
        "y": 470.66677236557007,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "1f432bb6.ec650c",
                "a43d23b3.f55468"
            ]
        ]
    },
    {
        "id": "f24ee710.682568",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No model found for VF module customization UUID ' + $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`\" />\n",
        "comments": "",
        "x": 1024.9521980285645,
        "y": 495.09524488449097,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "1f432bb6.ec650c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 849.3094673156738,
        "y": 451.0476031303406,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "dff1190f.1faf3"
            ]
        ]
    },
    {
        "id": "a43d23b3.f55468",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 857.8808975219727,
        "y": 495.33331632614136,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f24ee710.682568"
            ]
        ]
    },
    {
        "id": "dff1190f.1faf3",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table\" />\n",
        "comments": "",
        "x": 1024.309398651123,
        "y": 450.1905035972595,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "1cfdc953.fe11d7",
        "type": "switchNode",
        "name": "switch service-data.vnfs.vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 578.6190414428711,
        "y": 679.2381076812744,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b52893b0.b33ff8",
                "7de9d23e.cc582c"
            ]
        ]
    },
    {
        "id": "b52893b0.b33ff8",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 819.3333129882812,
        "y": 656.3808479309082,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "50ed95c8.3fdd7c"
            ]
        ]
    },
    {
        "id": "7de9d23e.cc582c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 819.0951538085938,
        "y": 697.333366394043,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f97cb7ff.0ee1"
            ]
        ]
    },
    {
        "id": "ee122710.062968",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 157.19043731689453,
        "y": 3160.9050060510635,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "872d4f0b.67ac08",
                "7251a3eb.746efc",
                "f6506952.4d91a8",
                "cf8a262d.6a1b98",
                "5dadf717.992d3",
                "2d4c54b1.f20e84",
                "ea842add.52a4f",
                "b1dedce6.d26df8",
                "5739f7b7.7f647",
                "ce31f60.3d08188",
                "bab40dd2.055d98",
                "5dfed951.6aa498",
                "9ef3d185.c85ac8",
                "6463d505.bdf53c",
                "813cd148.f7ef6",
                "45d68c43.3c77cc",
                "ff8446dd.579c9",
                "118a9388.3f55dc",
                "f628c9f9.b42c68",
                "3167e7de.b7c22",
                "9091eb.50984e18",
                "b1851a15.11f7a",
                "3b9161e8.573c4e",
                "258b25e.e7e48da",
                "93cb37c9.f6be6",
                "e67f8b4b.7199c",
                "b428e901.f92c58",
                "3b469f6e.914af",
                "1852004a.12d698",
                "8afcf9dd.0fb538",
                "bdc53141.3922c"
            ]
        ]
    },
    {
        "id": "50ed95c8.3fdd7c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs defined in MD-SAL\" />\n",
        "comments": "",
        "x": 985.999927520752,
        "y": 655.6666030883789,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "f97cb7ff.0ee1",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 981.3332977294922,
        "y": 696.9999847412109,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "c35035d2.bf59a8"
            ]
        ]
    },
    {
        "id": "c35035d2.bf59a8",
        "type": "switchNode",
        "name": "switch service data vnf == input vnf",
        "xml": "<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1232.6665954589844,
        "y": 696.6667127609253,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "caf6e3e1.a21a38"
            ]
        ]
    },
    {
        "id": "caf6e3e1.a21a38",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1462.6666069030762,
        "y": 696.0000257492065,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "92feb56b.b7102"
            ]
        ]
    },
    {
        "id": "fee8b7c2.23d648",
        "type": "set",
        "name": "set vnf-index to -1",
        "xml": "<set>\n<parameter name='vnf-index' value='-1' />\n",
        "comments": "",
        "x": 527.6666641235352,
        "y": 610.6666069030762,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "42c7a20c.7f200c",
        "type": "set",
        "name": "set vnf-index to idx",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1784.3332443237305,
        "y": 666.9999837875366,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "615bc384.792384",
        "type": "switchNode",
        "name": "switch vnf-index",
        "xml": "<switch test='`$vnf-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 517.6666717529297,
        "y": 747.3333034515381,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "208620a9.3c27c"
            ]
        ]
    },
    {
        "id": "208620a9.3c27c",
        "type": "outcome",
        "name": "-1",
        "xml": "<outcome value='-1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 696.000057220459,
        "y": 746.6666793823242,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "fe744566.24497"
            ]
        ]
    },
    {
        "id": "fe744566.24497",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find VNF ID ' + $vf-module-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'`\" />\n",
        "comments": "",
        "x": 855.9999656677246,
        "y": 745.9999828338623,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "872d4f0b.67ac08",
        "type": "switchNode",
        "name": "switch vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 534.3333930969238,
        "y": 1377.3334999084473,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "c389ff19.961158",
                "802613ad.7f8d6"
            ]
        ]
    },
    {
        "id": "c389ff19.961158",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 791.7143478393555,
        "y": 1344.4762735366821,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "af64082e.e6a39"
            ]
        ]
    },
    {
        "id": "af64082e.e6a39",
        "type": "set",
        "name": "set vf-module-index=0",
        "xml": "<set>\n<parameter name='vf-module-index' value='0' />\n",
        "comments": "",
        "x": 979.3333854675293,
        "y": 1345.143048286438,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "802613ad.7f8d6",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 792.1428909301758,
        "y": 1408.762131690979,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "4299bfbb.1ba0e8"
            ]
        ]
    },
    {
        "id": "b90e0423.a8671",
        "type": "set",
        "name": "set vf-module-index = vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-index' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n",
        "comments": "",
        "x": 1177.3334312438965,
        "y": 1388.9525270462036,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "eef26645.095d08",
        "type": "for",
        "name": "for each existing VF module",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1136.428524017334,
        "y": 1433.0477571487427,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a7be2545.d5fa18"
            ]
        ]
    },
    {
        "id": "4299bfbb.1ba0e8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 928.8571701049805,
        "y": 1408.7620573043823,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b90e0423.a8671",
                "eef26645.095d08"
            ]
        ]
    },
    {
        "id": "a7be2545.d5fa18",
        "type": "switchNode",
        "name": "switch vf-module-information.vf-module-id == service-data.vnfs.vnf[].vf-modules.vf-module[].vf-module-id",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.vf-module-id == $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1640.0476264953613,
        "y": 1432.6191682815552,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "49a9bbfb.5628dc"
            ]
        ]
    },
    {
        "id": "49a9bbfb.5628dc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2082.666675567627,
        "y": 1432.190619468689,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "7fa4b193.8c347"
            ]
        ]
    },
    {
        "id": "7fa4b193.8c347",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VF module id ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id\n       + ' already exists, and status is ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.vf-module-level-oper-status.order-status`\" />\n",
        "comments": "",
        "x": 2234.5715560913086,
        "y": 1432.1906061172485,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "387d0282.126de6",
        "type": "comment",
        "name": "make sure this VF module doesn't exist already",
        "info": "",
        "comments": "",
        "x": 1666.4999732971191,
        "y": 1387.246660232544,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "7251a3eb.746efc",
        "type": "set",
        "name": "set new vf-module_length",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length' value='`$vf-module-index + 1`' />\n",
        "comments": "",
        "x": 544.9999732971191,
        "y": 1488.3333549499512,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "f6506952.4d91a8",
        "type": "set",
        "name": "set vf-module-topology data",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-id' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name' value='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-type' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-type`' />\n<parameter name='tmp.vf-module-topology.tenant' value='`$vf-module-topology-operation-input.vf-module-request-input.tenant`' />\n<parameter name='tmp.vf-module-topology.aic-cloud-region' value='`$vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`' />\n",
        "comments": "",
        "x": 551.4999923706055,
        "y": 1600.8334617614746,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "79b7c794.412ea8",
        "type": "set",
        "name": "set aic-clli",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli'\n   value='`$aai-uid-split[$aai-uid-split_length - 1]`' />\n",
        "comments": "",
        "x": 1312.4522514343262,
        "y": 1760.071388244629,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "cf8a262d.6a1b98",
        "type": "switchNode",
        "name": "switch aic-clli",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 511.4999122619629,
        "y": 1874.0237283706665,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "2709241b.91b5ec"
            ]
        ]
    },
    {
        "id": "2709241b.91b5ec",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 656.7856025695801,
        "y": 1874.0237970352173,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "6f28c309.780f04"
            ]
        ]
    },
    {
        "id": "6f28c309.780f04",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find aic-clli in AAI for aic-cloud-region ' + $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`\" />\n",
        "comments": "",
        "x": 803.9284629821777,
        "y": 1873.5952310562134,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "5dadf717.992d3",
        "type": "get-resource",
        "name": "get-resource cloud region",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"cloud-region\" \n\t\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner AND \n\t\t     cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\"\n        pfx='aai.cloud-region' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 550.3571281433105,
        "y": 1674.1669998168945,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d0ee8ee6.ef9a38",
                "7285b371.3c394c"
            ]
        ]
    },
    {
        "id": "7285b371.3c394c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 764.6033210754395,
        "y": 1692.317855834961,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "888dd45c.991a6"
            ]
        ]
    },
    {
        "id": "888dd45c.991a6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving cloud region from AAI\" />\n",
        "comments": "",
        "x": 939.6032943725586,
        "y": 1692.317892074585,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "d0ee8ee6.ef9a38",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 773.5319175720215,
        "y": 1650.6035890579224,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "fa6c7e2b.945348"
            ]
        ]
    },
    {
        "id": "fa6c7e2b.945348",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cloud region not found in AAI\" />\n",
        "comments": "",
        "x": 939.8811950683594,
        "y": 1649.9091663360596,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "92feb56b.b7102",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1611.0000686645508,
        "y": 694.9197244644165,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "42c7a20c.7f200c",
                "30228239.da740e"
            ]
        ]
    },
    {
        "id": "30228239.da740e",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 1746.0000343322754,
        "y": 716.5863103866577,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "49633bad.552a1c",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$db.vf-module-model.invariant-uuid`' />\n",
        "comments": "",
        "x": 925.833251953125,
        "y": 1915.4197216033936,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "2d4c54b1.f20e84",
        "type": "switchNode",
        "name": "switch input model-invariant-uuid",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 569.6903266906738,
        "y": 1938.2441654205322,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "6ebc40e4.0417d",
                "de49c5b8.03258"
            ]
        ]
    },
    {
        "id": "6ebc40e4.0417d",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 775.3569984436035,
        "y": 1915.387128829956,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "49633bad.552a1c"
            ]
        ]
    },
    {
        "id": "de49c5b8.03258",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 776.7855949401855,
        "y": 1959.6727199554443,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f40581d7.dccad"
            ]
        ]
    },
    {
        "id": "f40581d7.dccad",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`' />\n",
        "comments": "",
        "x": 931.0713310241699,
        "y": 1959.1012921333313,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "f1b745aa.bf5968",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$db.vf-module-model.uuid`' />\n",
        "comments": "",
        "x": 926.7855224609375,
        "y": 2003.9583978652954,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "ea842add.52a4f",
        "type": "switchNode",
        "name": "switch input model-uuid",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 542.3093452453613,
        "y": 2026.7829027175903,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "dd518896.f543b",
                "7da1b5f3.ea44c4"
            ]
        ]
    },
    {
        "id": "dd518896.f543b",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 776.3093185424805,
        "y": 2003.9258346557617,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f1b745aa.bf5968"
            ]
        ]
    },
    {
        "id": "7da1b5f3.ea44c4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 777.7379150390625,
        "y": 2048.21142578125,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "4d061fdf.d87b38"
            ]
        ]
    },
    {
        "id": "4d061fdf.d87b38",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`' />\n",
        "comments": "",
        "x": 932.0236511230469,
        "y": 2047.639997959137,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "cf24edcf.d87698",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$db.vf-module-model.version`' />\n",
        "comments": "",
        "x": 923.9284553527832,
        "y": 2092.815605163574,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "b1dedce6.d26df8",
        "type": "switchNode",
        "name": "switch input model-version",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 550.4522171020508,
        "y": 2115.640049934387,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "db83db50.08fb28",
                "9da6e282.9d0dd"
            ]
        ]
    },
    {
        "id": "db83db50.08fb28",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 773.4522018432617,
        "y": 2092.7830123901367,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "cf24edcf.d87698"
            ]
        ]
    },
    {
        "id": "9da6e282.9d0dd",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 774.8807983398438,
        "y": 2137.068603515625,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "9b268393.f2c8c"
            ]
        ]
    },
    {
        "id": "9b268393.f2c8c",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`' />\n",
        "comments": "",
        "x": 929.1665344238281,
        "y": 2136.497175693512,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "3d348000.1cb548",
        "type": "set",
        "name": "set from DB",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$db.vf-module-model.name`' />\n",
        "comments": "",
        "x": 923.9284553527832,
        "y": 2179.958427429199,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "5739f7b7.7f647",
        "type": "switchNode",
        "name": "switch input model-name",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 545.4522171020508,
        "y": 2202.782872200012,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "190652ce.b69c15",
                "1fde1adc.b7592d"
            ]
        ]
    },
    {
        "id": "190652ce.b69c15",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 773.4522018432617,
        "y": 2179.9258346557617,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "3d348000.1cb548"
            ]
        ]
    },
    {
        "id": "1fde1adc.b7592d",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 774.8807983398438,
        "y": 2224.21142578125,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "dd8482f1.45c3a"
            ]
        ]
    },
    {
        "id": "dd8482f1.45c3a",
        "type": "set",
        "name": "set from input",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`' />\n",
        "comments": "",
        "x": 929.1665344238281,
        "y": 2223.639997959137,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "ce31f60.3d08188",
        "type": "set",
        "name": "set model-customization-uuid",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-customization-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`' />\n",
        "comments": "",
        "x": 559.9045524597168,
        "y": 2275.2918615341187,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "bab40dd2.055d98",
        "type": "set",
        "name": "set vf-module-id",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id'\n   value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n",
        "comments": "",
        "x": 513.0951995849609,
        "y": 1544.015037536621,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "5dfed951.6aa498",
        "type": "for",
        "name": "for each cloud-region relationship",
        "xml": "<for index='idx' start='0' end='`$aai.cloud-region.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 572.6109428405762,
        "y": 1762.673683166504,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "8f988733.fc8608"
            ]
        ]
    },
    {
        "id": "8f988733.fc8608",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$aai.cloud-region.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 820.2894859313965,
        "y": 1762.4236125946045,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "e8d9e039.f97748"
            ]
        ]
    },
    {
        "id": "e8d9e039.f97748",
        "type": "outcome",
        "name": "complex",
        "xml": "<outcome value='complex'>\n",
        "comments": "",
        "outputs": 1,
        "x": 989.7538070678711,
        "y": 1761.8164348602295,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b22c686f.c34c98"
            ]
        ]
    },
    {
        "id": "be80dc26.fe8f4",
        "type": "execute",
        "name": "split related-link",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split'>\n   <parameter name='ctx_memory_result_key' value='aai-uid-split' />\n   <parameter name='original_string' value='`$aai.cloud-region.relationship-list.relationship[$idx].related-link`' />\n   <parameter name='regex' value='/' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1329.848964691162,
        "y": 1716.2450103759766,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "b22c686f.c34c98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1149.51566696167,
        "y": 1762.9117984771729,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "be80dc26.fe8f4",
                "26f57ce.cf48104",
                "79b7c794.412ea8"
            ]
        ]
    },
    {
        "id": "26f57ce.cf48104",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 1299.5156288146973,
        "y": 1806.2450952529907,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "1a4269cb.77ad9e",
        "type": "execute",
        "name": "execute PropertiesNode",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 580.047607421875,
        "y": 164.5238037109375,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "f628c9f9.b42c68",
        "type": "set",
        "name": "set order-status to PendingCreate",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n",
        "comments": "",
        "x": 455.2622375488281,
        "y": 7371.879996299744,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "9091eb.50984e18",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 394.8335418701172,
        "y": 7485.498326301575,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "118a9388.3f55dc",
        "type": "set",
        "name": "copy input data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.sdnc-request-header.'\n   value='$vf-module-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.request-information.'\n   value='$vf-module-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.service-information.'\n   value='$vf-module-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vnf-information.'\n   value='$vf-module-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.'\n   value='$vf-module-topology-operation-input.vf-module-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.'\n   value='$vf-module-topology-operation-input.vf-module-request-input.' />\n\n",
        "comments": "",
        "x": 411.11924743652344,
        "y": 7228.228453099728,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "ff8446dd.579c9",
        "type": "set",
        "name": "copy vf-module-topology data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.' value='tmp.vf-module-topology.' />\n",
        "comments": "",
        "x": 456.00025177001953,
        "y": 7180.013965070248,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "3167e7de.b7c22",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmodule.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 389.71449279785156,
        "y": 7437.728142738342,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "6463d505.bdf53c",
        "type": "save",
        "name": "update vf-module",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"vf-module-name\" value=\"`$tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name`\" />\n<parameter name=\"model-invariant-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-uuid`\" />\n<parameter name=\"model-customization-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-customization-uuid`\" />\n<parameter name=\"selflink\" value=\"`$vf-module-object-path`\" />\n<parameter name=\"automated-assignment\" value=\"`$automated-assignment`\" />",
        "comments": "",
        "outputs": 1,
        "x": 475.1429786682129,
        "y": 4382.015618920326,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a43cc3fa.5d6c98",
                "420d05f2.3231e4"
            ]
        ]
    },
    {
        "id": "84f89148.95de68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No vf-module found in AAI for vf module ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n",
        "comments": "",
        "x": 980.1906547546387,
        "y": 4416.777049601078,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "a43cc3fa.5d6c98",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 650.2146186828613,
        "y": 4350.396240830421,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "df65741a.761c58"
            ]
        ]
    },
    {
        "id": "420d05f2.3231e4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 658.7859916687012,
        "y": 4419.015330851078,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "74b88da7.a8c63c"
            ]
        ]
    },
    {
        "id": "a9bfdff8.321888",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module in AAI\" />\n",
        "comments": "",
        "x": 985.2145729064941,
        "y": 4368.53979742527,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "9ef3d185.c85ac8",
        "type": "set",
        "name": "set vf-module-object-path",
        "xml": "<set>\n<parameter name='vf-module-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $vf-module-topology-operation-input.vf-module-information.vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology/'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n",
        "comments": "",
        "x": 498.80978775024414,
        "y": 4257.539847970009,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "f707b900.ad90a",
        "type": "save",
        "name": "save vf-module relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module:relationship-list\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1268.8335342407227,
        "y": 5940.168013334274,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "23807b82.178e0c",
                "ad8e8eb6.465fc8"
            ]
        ]
    },
    {
        "id": "23807b82.178e0c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1488.666877746582,
        "y": 5911.039757490158,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a12ae831.d3142"
            ]
        ]
    },
    {
        "id": "ad8e8eb6.465fc8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1497.238410949707,
        "y": 5963.658901929855,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "9cddf42a.8a9e5"
            ]
        ]
    },
    {
        "id": "499d7773.1151f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module relationships in AAI\" />\n",
        "comments": "",
        "x": 1823.6670112609863,
        "y": 5930.849653959274,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "813cd148.f7ef6",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 448.50025939941406,
        "y": 5705.501566171646,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "5d0114d1.71c524"
            ]
        ]
    },
    {
        "id": "7db62dd2.7ae984",
        "type": "for",
        "name": "for each vm-network",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 845.5002708435059,
        "y": 6124.1683983802795,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "6512180a.bed4f"
            ]
        ]
    },
    {
        "id": "a5d9c7b6.9e7158",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No l3-network found in AAI for network ID '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id`\" />\n",
        "comments": "",
        "x": 1825.5003852844238,
        "y": 5980.834194898605,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "45d68c43.3c77cc",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 422.92879486083984,
        "y": 7072.547621667385,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "cd5f839f.ea6358"
            ]
        ]
    },
    {
        "id": "cd5f839f.ea6358",
        "type": "for",
        "name": "for each vm",
        "xml": "<for index='vm-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-count`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 617.928825378418,
        "y": 7071.880629479885,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "30f5c312.255d8c"
            ]
        ]
    },
    {
        "id": "e82d0d82.532c08",
        "type": "save",
        "name": "save VIPR_CONFIGURATION",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource\" resource=\"SQL\"\nkey=\"INSERT INTO VIPR_CONFIGURATION (vnf_id, vnf_name, ecomp_service_instance_id, vm_name, cloud_region_id, cloud_owner) VALUES ( $service-data.vnfs.vnf[$vnf-index].vnf-id , $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-name , $service-data.service-information.service-instance-id , $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index] , $tmp.vf-module-topology.aic-cloud-region , $prop.cloud-region.cloud-owner )\" >",
        "comments": "",
        "outputs": 1,
        "x": 1009.5955276489258,
        "y": 7094.548279702663,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "688665ad.2f9f3c"
            ]
        ]
    },
    {
        "id": "bf577cc.f0686",
        "type": "comment",
        "name": "Not a failure",
        "info": "",
        "comments": "",
        "x": 1529.5954284667969,
        "y": 7094.548284471035,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "688665ad.2f9f3c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1219.5955123901367,
        "y": 7094.548429429531,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "c53b6f89.1bf31"
            ]
        ]
    },
    {
        "id": "c53b6f89.1bf31",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1362.928955078125,
        "y": 7094.548267304897,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "4746d20.cbc1db",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1392.9290771484375,
        "y": 7045.87998098135,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "fb03641d.11d6a8"
            ]
        ]
    },
    {
        "id": "8220d076.4a69b",
        "type": "comment",
        "name": "Not a failure",
        "info": "",
        "comments": "",
        "x": 1716.2621307373047,
        "y": 7044.213803231716,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "fb03641d.11d6a8",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1538.929012298584,
        "y": 7045.880614221096,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "30f5c312.255d8c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 786.2622184753418,
        "y": 7070.8804740309715,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "87be3845.6c476",
                "e82d0d82.532c08"
            ]
        ]
    },
    {
        "id": "87be3845.6c476",
        "type": "delete",
        "name": "delete any pre-existing records in VIPR_CONFIGURATION",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='DELETE from VIPR_CONFIGURATION WHERE vnf_id = $service-data.vnfs.vnf[$vnf-index].vnf-id\n     AND ecomp_service_instance_id = $service-data.service-information.service-instance-id\n     AND vm_name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index]' >",
        "comments": "",
        "outputs": 1,
        "x": 1099.5955429077148,
        "y": 7046.214613854885,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "4746d20.cbc1db"
            ]
        ]
    },
    {
        "id": "df65741a.761c58",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 808.500186920166,
        "y": 4350.16691172123,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a9bfdff8.321888",
                "dbd8b9c4.328bf"
            ]
        ]
    },
    {
        "id": "74b88da7.a8c63c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 809.5001029968262,
        "y": 4416.833201944828,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "84f89148.95de68",
                "dbd8b9c4.328bf"
            ]
        ]
    },
    {
        "id": "a12ae831.d3142",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1657.1668815612793,
        "y": 5910.834027051926,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "499d7773.1151f8",
                "98b9903.adf487"
            ]
        ]
    },
    {
        "id": "9cddf42a.8a9e5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1652.1668815612793,
        "y": 5963.833869695663,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a5d9c7b6.9e7158",
                "98b9903.adf487"
            ]
        ]
    },
    {
        "id": "31b2e45a.c5cc34",
        "type": "execute",
        "name": "execute RestApiCallNode - get preload-list",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value=\"`$prop.controller.url + $prop.restapi.preloadinformation + $vf-module-topology-operation-input.vf-module-request-input.vf-module-name + '/vf-module'`\" />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-preload\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 994.3333778381348,
        "y": 2420.1672344207764,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "9d0f1de4.e8a7e",
                "3cbc2bc3.6bbde4"
            ]
        ]
    },
    {
        "id": "9d0f1de4.e8a7e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1257.6666933695474,
        "y": 2383.5004507700596,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b23dcce8.3ebd78"
            ]
        ]
    },
    {
        "id": "3cbc2bc3.6bbde4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1260.9999809265137,
        "y": 2458.50044631958,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "539e43f2.6c162c"
            ]
        ]
    },
    {
        "id": "b23dcce8.3ebd78",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1419.333381652832,
        "y": 2381.8337354660034,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "2760cb26.968df4"
            ]
        ]
    },
    {
        "id": "539e43f2.6c162c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1415.9999885559082,
        "y": 2458.5002880096436,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "e2d2aa25.1873d8"
            ]
        ]
    },
    {
        "id": "2760cb26.968df4",
        "type": "switchNode",
        "name": "switch mdsal-preload.response-code",
        "xml": "<switch test='`$mdsal-preload.response-code`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1647.6666831970215,
        "y": 2381.833776473999,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d94720a1.35e2b8",
                "be4441de.86a918"
            ]
        ]
    },
    {
        "id": "d94720a1.35e2b8",
        "type": "outcome",
        "name": "404 (not found)",
        "xml": "<outcome value='404'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1899.3334197998047,
        "y": 2345.1671504974365,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "4cd82d1e.0f6cb4"
            ]
        ]
    },
    {
        "id": "4cd82d1e.0f6cb4",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-operation-assign-no-preload",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-operation-assign-no-preload' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2295.9998893737793,
        "y": 2343.5002784729004,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a4c7d325.798778"
            ]
        ]
    },
    {
        "id": "a4c7d325.798778",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2666.0000381469727,
        "y": 2341.8338146209717,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "99f5ebf0.52d458"
            ]
        ]
    },
    {
        "id": "c929db89.f64588",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n",
        "comments": "",
        "x": 2974.3334159851074,
        "y": 2373.500551223755,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "be4441de.86a918",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1874.3334999084473,
        "y": 2401.833641052246,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "1c44b698.e89ca9"
            ]
        ]
    },
    {
        "id": "b2930715.b61298",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving preload-information\" />\n",
        "comments": "",
        "x": 2187.666404724121,
        "y": 2418.5000648498535,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "e2d2aa25.1873d8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-operation-assign-preload",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-operation-assign-preload' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1779.3332786560059,
        "y": 2460.1670360565186,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "ea46e820.5ff1"
            ]
        ]
    },
    {
        "id": "ea46e820.5ff1",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2135.000141143799,
        "y": 2458.500654220581,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "787c4f45.899ea"
            ]
        ]
    },
    {
        "id": "3affa095.73c9a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n",
        "comments": "",
        "x": 2443.333393096924,
        "y": 2480.167549133301,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "5d0114d1.71c524",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 639.0003280639648,
        "y": 5706.334800958633,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "7db62dd2.7ae984",
                "9a6f3bdc.d90ac8"
            ]
        ]
    },
    {
        "id": "9a6f3bdc.d90ac8",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 890.0003776550293,
        "y": 4911.000892162323,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "27e06da0.44b51a"
            ]
        ]
    },
    {
        "id": "d448096b.7f319",
        "type": "save",
        "name": "save vnfc to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vnfc\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\" >\n<parameter name=\"vnfc-name\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n<parameter name=\"nfc-naming-code\" value=\"`$tmp.nfc-naming-code`\" />\n<parameter name=\"nfc-function\" value=\"`$tmp.nfc-function`\" />\n<parameter name=\"model-invariant-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].uuid`\" />\n<parameter name=\"model-customization-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].model-customization-uuid`\" />\n<parameter name=\"orchestration-status\" value=\"`PendingCreate`\" />\n<parameter name=\"in-maint\" value=\"true\" />\n<parameter name=\"prov-status\" value=\"`PREPROV`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1616.00044631958,
        "y": 4719.334822654724,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "2ac13b6f.ca04e4",
                "d088fcf.548348"
            ]
        ]
    },
    {
        "id": "27e06da0.44b51a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1058.3336791992188,
        "y": 4911.667719364166,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d459b5c6.d3fed8",
                "808abc74.02d33",
                "72f7e36a.c2ef3c",
                "6d325d15.c2ae54",
                "eddbfba2.b4aa8",
                "2c961574.c5ec1a"
            ]
        ]
    },
    {
        "id": "2ac13b6f.ca04e4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1807.0004844665527,
        "y": 4671.66815662384,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "e3036af.4278218"
            ]
        ]
    },
    {
        "id": "f17f7f91.e8d57",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vnfc to AAI\" />\n",
        "comments": "",
        "x": 2146.0006370544434,
        "y": 4705.811412215233,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "e3036af.4278218",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1972.1671714782715,
        "y": 4685.79598993063,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f17f7f91.e8d57",
                "c5eedaf3.834a18"
            ]
        ]
    },
    {
        "id": "72f7e36a.c2ef3c",
        "type": "save",
        "name": "save vnfc relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vnfc:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"generic-vnf\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/generic-vnfs/generic-vnf/' +\n        $vf-module-topology-operation-input.vnf-information.vnf-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vf-module\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/generic-vnfs/generic-vnf/' +\n        $vf-module-topology-operation-input.vnf-information.vnf-id +\n        '/vf-modules/vf-module/' +\n        $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1282.9049644470215,
        "y": 4819.954054355621,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "3a820b1b.87aa8c",
                "643cce7e.7e7f78"
            ]
        ]
    },
    {
        "id": "b9825e6b.cce1d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vnfc relationships in AAI\" />\n",
        "comments": "",
        "x": 1792.904899597168,
        "y": 4811.620890140533,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "f19b94a5.32aa3",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vnfc relationships\" />\n",
        "comments": "",
        "x": 1788.0718078613281,
        "y": 4863.272097110748,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "623f233d.2c8f54",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1614.7381553649902,
        "y": 4793.271678447723,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b9825e6b.cce1d8",
                "c5eedaf3.834a18"
            ]
        ]
    },
    {
        "id": "c107991e.30f138",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1614.7382316589355,
        "y": 4846.271437168121,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f19b94a5.32aa3",
                "c5eedaf3.834a18"
            ]
        ]
    },
    {
        "id": "3a820b1b.87aa8c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1457.9050407409668,
        "y": 4793.287348270416,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "623f233d.2c8f54"
            ]
        ]
    },
    {
        "id": "643cce7e.7e7f78",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1466.4765739440918,
        "y": 4845.9064927101135,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "c107991e.30f138"
            ]
        ]
    },
    {
        "id": "d459b5c6.d3fed8",
        "type": "for",
        "name": "for each vnfc-network-role",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1280.3810844421387,
        "y": 5236.810462474823,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a1a1ecdf.c4a56"
            ]
        ]
    },
    {
        "id": "b1851a15.11f7a",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmoduleb.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 500.9999885559082,
        "y": 2544.7142844200134,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "b921c045.cf4a58",
        "type": "for",
        "name": "for each vnfc-subnetwork-role",
        "xml": "<for silentFailure='true' index='subnet-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1736.3336219787598,
        "y": 5200.00089597702,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "e09e4bf.8ceecb8"
            ]
        ]
    },
    {
        "id": "e09e4bf.8ceecb8",
        "type": "for",
        "name": "for each vnfc-address-family",
        "xml": "<for silentFailure='true' index='address-family-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2003.6669654846191,
        "y": 5199.00138425827,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "8b5aa711.e5efa8"
            ]
        ]
    },
    {
        "id": "f7e811cc.62e028",
        "type": "for",
        "name": "for each vnfc-ip-address",
        "xml": "<for silentFailure='true' index='address-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2435.666576385498,
        "y": 5265.667083740234,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b667dcac.e951d"
            ]
        ]
    },
    {
        "id": "8b5aa711.e5efa8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2214.666736602783,
        "y": 5199.00084066391,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b82436a1.d1d0b8",
                "f7e811cc.62e028"
            ]
        ]
    },
    {
        "id": "b82436a1.d1d0b8",
        "type": "set",
        "name": "set tmp.address-family",
        "xml": "<set>\n<parameter name='tmp.address-family'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-address-family`' />\n",
        "comments": "",
        "x": 2434.667064666748,
        "y": 5119.000738143921,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "b667dcac.e951d",
        "type": "switchNode",
        "name": "switch address family",
        "xml": "<switch test='`$tmp.address-family`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2674.6666679382324,
        "y": 5264.000905990601,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d01e09dd.45de2",
                "bfd74d51.0b32c"
            ]
        ]
    },
    {
        "id": "d01e09dd.45de2",
        "type": "outcome",
        "name": "ipv4",
        "xml": "<outcome value='ipv4'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2871.809673309326,
        "y": 5167.572166442871,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "e0c5621f.42b528"
            ]
        ]
    },
    {
        "id": "bfd74d51.0b32c",
        "type": "outcome",
        "name": "ipv6",
        "xml": "<outcome value='ipv6'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2869.4287452697754,
        "y": 5347.334197998047,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "adf4aed9.eae7d8"
            ]
        ]
    },
    {
        "id": "ff919892.4b5a68",
        "type": "comment",
        "name": "Fixed IPs",
        "info": "",
        "comments": "",
        "x": 1753.3336372375488,
        "y": 5161.668272972107,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "98c3d9a1.bae4f8",
        "type": "save",
        "name": "save l3-interface-ipv4-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-interface-ipv4-address-list\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv4-address-list.l3-interface-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\" >\n<parameter name=\"l3-interface-ipv4-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address`\" />\n<parameter name=\"l3-interface-ipv4-prefix-length\" value=\"32\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3315.1428031921387,
        "y": 5115.905246416729,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "aae769d8.c05068"
            ]
        ]
    },
    {
        "id": "e0c5621f.42b528",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3021.809673309326,
        "y": 5167.572085062664,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "98c3d9a1.bae4f8",
                "d9d7d1ed.e615b8"
            ]
        ]
    },
    {
        "id": "36b90cb1.45057c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating l3-interface-ipv4-address-list object in AAI\" />\n",
        "comments": "",
        "x": 3898.4763221740723,
        "y": 5134.238905588787,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "68bc12f0.3c5b14",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3728.642677307129,
        "y": 5115.88973871867,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "36b90cb1.45057c",
                "322f32ee.7655de"
            ]
        ]
    },
    {
        "id": "aae769d8.c05068",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3571.8095626831055,
        "y": 5115.905408541363,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "68bc12f0.3c5b14"
            ]
        ]
    },
    {
        "id": "d9d7d1ed.e615b8",
        "type": "save",
        "name": "save l3-interface-ipv4-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"l3-interface-ipv4-address-list:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv4-address-list.l3-interface-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id +\n        '/subnets/subnet/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3310.1430473327637,
        "y": 5214.238665262859,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "5a34a273.adff4c",
                "6d2c5483.1471fc"
            ]
        ]
    },
    {
        "id": "d5919b0b.9629f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating l3-interface-ipv4-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 3896.809429168701,
        "y": 5205.905337015789,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "af7bf9da.045718",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating l3-interface-ipv4-address-list relationships\" />\n",
        "comments": "",
        "x": 3896.976291656494,
        "y": 5255.8897949854545,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "57a6fc74.9ad124",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3730.309299468994,
        "y": 5185.88971010844,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d5919b0b.9629f",
                "322f32ee.7655de"
            ]
        ]
    },
    {
        "id": "8d09ec41.cd46f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3730.3093757629395,
        "y": 5238.889468828838,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "af7bf9da.045718",
                "322f32ee.7655de"
            ]
        ]
    },
    {
        "id": "5a34a273.adff4c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3573.4761848449707,
        "y": 5185.905379931133,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "57a6fc74.9ad124"
            ]
        ]
    },
    {
        "id": "6d2c5483.1471fc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3582.0477180480957,
        "y": 5238.5245243708305,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "8d09ec41.cd46f8"
            ]
        ]
    },
    {
        "id": "dc19e6a7.c6a198",
        "type": "save",
        "name": "save l3-interface-ipv6-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-interface-ipv6-address-list\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv6-address-list.l3-interface-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\" >\n<parameter name=\"l3-interface-ipv6-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address`\" />\n<parameter name=\"l3-interface-ipv6-prefix-length\" value=\"128\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3313.9525413513184,
        "y": 5294.953302383423,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "27dd2e82.fc8832"
            ]
        ]
    },
    {
        "id": "adf4aed9.eae7d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3020.619411468506,
        "y": 5346.620141029358,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "dc19e6a7.c6a198",
                "3e1d7fb9.ab1448"
            ]
        ]
    },
    {
        "id": "43295e51.da8e6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating l3-interface-ipv6-address-list object in AAI\" />\n",
        "comments": "",
        "x": 3897.286060333252,
        "y": 5313.286961555481,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "328f524c.0c4276",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3727.4524154663086,
        "y": 5294.937794685364,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "43295e51.da8e6",
                "322f32ee.7655de"
            ]
        ]
    },
    {
        "id": "27dd2e82.fc8832",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3570.619300842285,
        "y": 5294.953464508057,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "328f524c.0c4276"
            ]
        ]
    },
    {
        "id": "3e1d7fb9.ab1448",
        "type": "save",
        "name": "save l3-interface-ipv6-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"l3-interface-ipv6-address-list:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\n\t  AND l3-interface-ipv6-address-list.l3-interface-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id +\n        '/subnets/subnet/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3308.9527854919434,
        "y": 5393.286721229553,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "1b742665.3e134a",
                "337a8ef7.f2caea"
            ]
        ]
    },
    {
        "id": "57be65ce.aa72fc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating l3-interface-ipv6-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 3895.619167327881,
        "y": 5384.953392982483,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "cb8b2116.4726a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating l3-interface-ipv6-address-list relationships\" />\n",
        "comments": "",
        "x": 3899.1193885803223,
        "y": 5431.604409456253,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "4ade9fb8.44ec2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3729.119037628174,
        "y": 5364.937766075134,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "57be65ce.aa72fc",
                "322f32ee.7655de"
            ]
        ]
    },
    {
        "id": "ad9adaa.b9d5e28",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3729.119113922119,
        "y": 5417.937524795532,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "cb8b2116.4726a",
                "322f32ee.7655de"
            ]
        ]
    },
    {
        "id": "1b742665.3e134a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3572.2859230041504,
        "y": 5364.953435897827,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "4ade9fb8.44ec2"
            ]
        ]
    },
    {
        "id": "337a8ef7.f2caea",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3580.8574562072754,
        "y": 5417.572580337524,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "ad9adaa.b9d5e28"
            ]
        ]
    },
    {
        "id": "6512180a.bed4f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1035.3335914611816,
        "y": 6123.6678376197815,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d4803f5b.5f7b3",
                "f707b900.ad90a",
                "91d9c253.1d3af8",
                "247d6469.79c744"
            ]
        ]
    },
    {
        "id": "a6c3d01b.f3c068",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1683.3337669372559,
        "y": 6246.001585483551,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "e31c82d6.e28cd"
            ]
        ]
    },
    {
        "id": "3d5c2e74.6c25ca",
        "type": "save",
        "name": "save vip-ipv4-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vip-ipv4-address-list\" \n\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\" >\n<parameter name=\"vip-ipv4-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]`\" />\n<parameter name=\"vip-ipv4-prefix-length\" value=\"32\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1766.3336219787598,
        "y": 6077.334597110748,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "7abb2498.83bd04",
                "f821b324.5734f8"
            ]
        ]
    },
    {
        "id": "91d9c253.1d3af8",
        "type": "for",
        "name": "for each floating ipv4 address",
        "xml": "<for silentFailure='true' index='ipv4-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1274.3336143493652,
        "y": 6135.334669589996,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "fe045360.1a7658"
            ]
        ]
    },
    {
        "id": "fe045360.1a7658",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1500.3336143493652,
        "y": 6133.334669589996,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "3d5c2e74.6c25ca",
                "ff0b761.c9fa908",
                "a6c3d01b.f3c068"
            ]
        ]
    },
    {
        "id": "552d1a5b.b76ea4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vip-ipv4-address-list in AAI\" />\n",
        "comments": "",
        "x": 2328.3336219787598,
        "y": 6067.334597110748,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "8c52d60.c5c01a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error saving vip-ipv4-address-list\" />\n",
        "comments": "",
        "x": 2328.5004844665527,
        "y": 6117.319055080414,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "87981857.a2a0f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2161.8334922790527,
        "y": 6047.3189702034,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "552d1a5b.b76ea4",
                "bae19213.720998"
            ]
        ]
    },
    {
        "id": "cda5737d.6e27f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2161.833568572998,
        "y": 6100.318728923798,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "8c52d60.c5c01a8",
                "bae19213.720998"
            ]
        ]
    },
    {
        "id": "7abb2498.83bd04",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2005.0003776550293,
        "y": 6047.3346400260925,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "87981857.a2a0f"
            ]
        ]
    },
    {
        "id": "f821b324.5734f8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2013.5719108581543,
        "y": 6099.95378446579,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "cda5737d.6e27f"
            ]
        ]
    },
    {
        "id": "4125e5e4.ca4cf4",
        "type": "save",
        "name": "save vip-ipv4-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv4-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-id\n        + '/subnets/subnet/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv4-subnet-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vnfc\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2102.000217437744,
        "y": 6190.001260280609,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "cb2ae13b.fdd8b",
                "a48115e.15f92e8"
            ]
        ]
    },
    {
        "id": "b42e2ea1.09a42",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 2671.6666259765625,
        "y": 6182.001229822636,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "891bd81e.5b2778",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationships\" />\n",
        "comments": "",
        "x": 2671.833595275879,
        "y": 6231.98540353775,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "614f8bb6.cc274c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2505.1664962768555,
        "y": 6161.985602915287,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b42e2ea1.09a42",
                "bae19213.720998"
            ]
        ]
    },
    {
        "id": "6e5348c.0137fb8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2505.166572570801,
        "y": 6214.985361635685,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "891bd81e.5b2778",
                "bae19213.720998"
            ]
        ]
    },
    {
        "id": "cb2ae13b.fdd8b",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2348.333381652832,
        "y": 6162.00127273798,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "614f8bb6.cc274c"
            ]
        ]
    },
    {
        "id": "a48115e.15f92e8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2356.904914855957,
        "y": 6214.620417177677,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "6e5348c.0137fb8"
            ]
        ]
    },
    {
        "id": "9fd4388a.1c20f",
        "type": "save",
        "name": "save vip-ipv6-address-list object to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vip-ipv6-address-list\" \n\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\" >\n<parameter name=\"vip-ipv6-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]`\" />\n<parameter name=\"vip-ipv6-prefix-length\" value=\"128\" />\n<parameter name=\"is-floating\" value=\"false\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1769.66695022583,
        "y": 6400.667280673981,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "fa691f08.9e2f78",
                "6bb4e34b.12ff44"
            ]
        ]
    },
    {
        "id": "247d6469.79c744",
        "type": "for",
        "name": "for each floating ipv6 address",
        "xml": "<for silentFailure='true' index='ipv6-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1277.6669425964355,
        "y": 6457.667353153229,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "c703c6a9.630b2"
            ]
        ]
    },
    {
        "id": "c703c6a9.630b2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1503.6669425964355,
        "y": 6456.667353153229,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "9fd4388a.1c20f",
                "ec4b613e.160168",
                "d2a77bd7.aad668"
            ]
        ]
    },
    {
        "id": "d116de9b.861dc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vip-ipv6-address-list in AAI\" />\n",
        "comments": "",
        "x": 2331.66695022583,
        "y": 6390.667280673981,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "55faf177.7339f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error saving vip-ipv6-address-list\" />\n",
        "comments": "",
        "x": 2331.833812713623,
        "y": 6440.651738643646,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "d1a038ef.bae8d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2165.166820526123,
        "y": 6370.651653766632,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d116de9b.861dc8",
                "bae19213.720998"
            ]
        ]
    },
    {
        "id": "41754059.46283",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2165.1668968200684,
        "y": 6423.65141248703,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "55faf177.7339f",
                "bae19213.720998"
            ]
        ]
    },
    {
        "id": "fa691f08.9e2f78",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2008.3337059020996,
        "y": 6370.667323589325,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d1a038ef.bae8d"
            ]
        ]
    },
    {
        "id": "6bb4e34b.12ff44",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2016.9052391052246,
        "y": 6423.286468029022,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "41754059.46283"
            ]
        ]
    },
    {
        "id": "f5bef635.9d816",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv6-address-list relationships in AAI\" />\n",
        "comments": "",
        "x": 2665.0002059936523,
        "y": 6503.667331278324,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "f99d15b7.1efdb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv6-address-list relationships\" />\n",
        "comments": "",
        "x": 2665.1670684814453,
        "y": 6553.65178924799,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "e51d871a.eeada8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2498.5000762939453,
        "y": 6483.6517043709755,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f5bef635.9d816",
                "bae19213.720998"
            ]
        ]
    },
    {
        "id": "46811956.1b2428",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2498.5001525878906,
        "y": 6536.651463091373,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f99d15b7.1efdb8",
                "bae19213.720998"
            ]
        ]
    },
    {
        "id": "b7ea91cb.1fef7",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2341.666961669922,
        "y": 6483.667374193668,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "e51d871a.eeada8"
            ]
        ]
    },
    {
        "id": "436f8914.fc4668",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2350.238494873047,
        "y": 6536.286518633366,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "46811956.1b2428"
            ]
        ]
    },
    {
        "id": "a16e0517.bc234",
        "type": "save",
        "name": "save vip-ipv6-address-list relationships",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv6-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-id\n        + '/subnets/subnet/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv6-subnet-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vnfc\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2097.3338050842285,
        "y": 6512.3337931633,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b7ea91cb.1fef7",
                "436f8914.fc4668"
            ]
        ]
    },
    {
        "id": "dbd8b9c4.328bf",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1153.3334770202637,
        "y": 4320.667186319828,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "c5eedaf3.834a18",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2318.0004234313965,
        "y": 4658.667921423912,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "98b9903.adf487",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2026.6670036315918,
        "y": 5875.667758643627,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "bae19213.720998",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2975.667133331299,
        "y": 5994.667604923248,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "322f32ee.7655de",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4295.0001220703125,
        "y": 5042.33368486166,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "808abc74.02d33",
        "type": "set",
        "name": "set created_flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].created_flag' value='true' />\n",
        "comments": "",
        "x": 1260.0002479553223,
        "y": 4759.6675772070885,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "d4803f5b.5f7b3",
        "type": "set",
        "name": "set created-flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].created-flag' value='true' />\n",
        "comments": "",
        "x": 1230.6670036315918,
        "y": 6007.667758643627,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "ff0b761.c9fa908",
        "type": "set",
        "name": "set created-ipv4-flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.created-ipv4-flag' value='true' />\n",
        "comments": "",
        "x": 1703.6669692993164,
        "y": 6135.667838513851,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "ec4b613e.160168",
        "type": "set",
        "name": "set created-ipv6-flag",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.created-ipv6-flag' value='true' />\n",
        "comments": "",
        "x": 1709.0003051757812,
        "y": 6461.6674417853355,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "d088fcf.548348",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1810.0004234313965,
        "y": 4719.667816102505,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "e3036af.4278218"
            ]
        ]
    },
    {
        "id": "3b9161e8.573c4e",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-vlan-tagging-assign",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-vlan-tagging-assign' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 593.6667823791504,
        "y": 6799.667619228363,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "477e4251.781b0c"
            ]
        ]
    },
    {
        "id": "477e4251.781b0c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 938.0001983642578,
        "y": 6799.001114368439,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f7a9d52f.13d2b8"
            ]
        ]
    },
    {
        "id": "f7a9d52f.13d2b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1093.000072479248,
        "y": 6799.000910282135,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "78cd1dcc.03f844",
                "d913dea2.c3e2f8",
                "3cd42180.59b0ee"
            ]
        ]
    },
    {
        "id": "78cd1dcc.03f844",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1441.3333625793457,
        "y": 6744.001330137253,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "d913dea2.c3e2f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n",
        "comments": "",
        "x": 1269.6668014526367,
        "y": 6842.334558129311,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "3cd42180.59b0ee",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vlantaggingfailure.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1264.6666984558105,
        "y": 6795.667414188385,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "15e3fa8c.a15c5d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 231.8928680419922,
        "y": 555.5471410751343,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "1a4269cb.77ad9e",
                "7b558787.9e8418",
                "25bf4f65.65784",
                "fee8b7c2.23d648",
                "1cfdc953.fe11d7",
                "615bc384.792384",
                "9d2a5723.d819d",
                "99e9725e.469bc",
                "a4f9634d.81c668",
                "6a32df50.00a9e"
            ]
        ]
    },
    {
        "id": "1852004a.12d698",
        "type": "switchNode",
        "name": "switch from-preload",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.from-preload`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 522.904712677002,
        "y": 2611.142904281616,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "ca43648b.bb03a8",
                "1c651046.d44c7"
            ]
        ]
    },
    {
        "id": "ca43648b.bb03a8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 694.8094444274902,
        "y": 2588.5239248275757,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "1bec767f.fa534a"
            ]
        ]
    },
    {
        "id": "1c651046.d44c7",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 696.4760971069336,
        "y": 2633.523763656616,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "2af22b8d.9c3d6c"
            ]
        ]
    },
    {
        "id": "1bec767f.fa534a",
        "type": "set",
        "name": "set automated-assignment to true",
        "xml": "<set>\n<parameter name='automated-assignment' value='true' />\n",
        "comments": "",
        "x": 909.8094291687012,
        "y": 2586.857095718384,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "2af22b8d.9c3d6c",
        "type": "set",
        "name": "set automated-assignment to false",
        "xml": "<set>\n<parameter name='automated-assignment' value='false' />\n",
        "comments": "",
        "x": 908.142749786377,
        "y": 2631.857015609741,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "d2a77bd7.aad668",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1684.4288368225098,
        "y": 6560.547865390778,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a49f6373.34771"
            ]
        ]
    },
    {
        "id": "c1c0a5e1.d84e9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Test return\" />\n",
        "comments": "",
        "x": 149.00014877319336,
        "y": 7040.335383474827,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "258b25e.e7e48da",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 501.66680908203125,
        "y": 3971.3337869644165,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "520a36a0.bc4fe8"
            ]
        ]
    },
    {
        "id": "520a36a0.bc4fe8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 692.166877746582,
        "y": 3972.167021751404,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "7f05a6ce.f29068"
            ]
        ]
    },
    {
        "id": "7f05a6ce.f29068",
        "type": "for",
        "name": "for each vm-network",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 893.6668090820312,
        "y": 3971.3337869644165,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d948757f.17b148"
            ]
        ]
    },
    {
        "id": "d948757f.17b148",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1083.500129699707,
        "y": 3970.8332262039185,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f2567b66.34324"
            ]
        ]
    },
    {
        "id": "f2567b66.34324",
        "type": "get-resource",
        "name": "get-resource VFC_RELATED_NETWORK_ROLE",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VFC_RELATED_NETWORK_ROLE where vfc_customization_uuid = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].model-customization-uuid\n    and network_role = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role'\n  pfx='db.vnf-related-network-role[]'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1373.0001029968262,
        "y": 3969.3338689804077,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "574bc3b2.80dc04",
                "18c7a701.baad29"
            ]
        ]
    },
    {
        "id": "574bc3b2.80dc04",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1644.00004196167,
        "y": 3874.0005712509155,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "cd78ee33.a8d0b8"
            ]
        ]
    },
    {
        "id": "cd78ee33.a8d0b8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1791.190559387207,
        "y": 3872.5485858917236,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "dda1758d.f1b58",
                "c2e552ca.070a58"
            ]
        ]
    },
    {
        "id": "18c7a701.baad29",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1632.333293914795,
        "y": 4093.6670427322388,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "2cb67c41.31e8b4"
            ]
        ]
    },
    {
        "id": "76828f12.763db",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2050.66654586792,
        "y": 4095.6667985916138,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d61ddbd5.56fc48",
                "ecba1186.803d8",
                "717d2209.cd427c",
                "32ec3043.8c7a48",
                "7ec44754.6e3ce8",
                "82230b3.4e0eb78",
                "2015e74a.c5951",
                "8410c3bd.8615d8"
            ]
        ]
    },
    {
        "id": "dda1758d.f1b58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VFC_RELATED_NETWORK_ROLE table\" />\n",
        "comments": "",
        "x": 1943.3334159851074,
        "y": 3869.3338232040405,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "ecba1186.803d8",
        "type": "for",
        "name": "for each vnf network",
        "xml": "<for silentFailure='true' index='vnf-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2245.6666831970215,
        "y": 3963.000454902649,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d7888acb.1a68e"
            ]
        ]
    },
    {
        "id": "d61ddbd5.56fc48",
        "type": "set",
        "name": "set found-related-network to false",
        "xml": "<set>\n<parameter name='found-related-network' value='false' />\n",
        "comments": "",
        "x": 2285.666759490967,
        "y": 3904.6672315597534,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "b8bc2300.d8fc7",
        "type": "for",
        "name": "for each related network",
        "xml": "<for silentFailure='true' index='related-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].related-networks.related-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2644.666645050049,
        "y": 3939.666718482971,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "9f63b734.0e2738"
            ]
        ]
    },
    {
        "id": "d7888acb.1a68e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2433.6666831970215,
        "y": 3963.000454902649,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b8bc2300.d8fc7",
                "bc447980.e24dc8"
            ]
        ]
    },
    {
        "id": "9f63b734.0e2738",
        "type": "switchNode",
        "name": "switch network-role matches",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].related-networks.related-network[$related-network-index].network-role\n  == $db.vnf-related-network-role[$db-related-network-index].related-network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2896.666561126709,
        "y": 3939.6667947769165,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "20306c43.26273c"
            ]
        ]
    },
    {
        "id": "2cb67c41.31e8b4",
        "type": "for",
        "name": "for each db related-network",
        "xml": "<for index='db-related-network-index' start='0' end='`$db.vnf-related-network-role_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1836.6666679382324,
        "y": 4094.3337907791138,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "76828f12.763db"
            ]
        ]
    },
    {
        "id": "6b9ccdd2.ecfd3c",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 317.6669120788574,
        "y": 7000.335383474827,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "20306c43.26273c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3096.666561126709,
        "y": 3937.6667947769165,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "8acee0e7.e365f"
            ]
        ]
    },
    {
        "id": "8acee0e7.e365f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3250.666561126709,
        "y": 3935.6667947769165,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "4cb90caa.a7a78c",
                "72409261.a7c7f4",
                "d26523f4.9aab38"
            ]
        ]
    },
    {
        "id": "4cb90caa.a7a78c",
        "type": "set",
        "name": "set found-related-network to true",
        "xml": "<set>\n<parameter name='found-related-network' value='true' />\n",
        "comments": "",
        "x": 3482.666721343994,
        "y": 3895.333378791809,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "72409261.a7c7f4",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 3405.999897003174,
        "y": 3982.0001287460327,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "717d2209.cd427c",
        "type": "switchNode",
        "name": "switch found-related-network",
        "xml": "<switch test='`$found-related-network`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2268.6666145324707,
        "y": 4038.666932106018,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "30a57c9d.db44a4"
            ]
        ]
    },
    {
        "id": "30a57c9d.db44a4",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2462.6666145324707,
        "y": 4036.666932106018,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "3d0737b3.9ec1b8"
            ]
        ]
    },
    {
        "id": "bcd80885.38a53",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find related network '\n      + $db.vnf-related-network-role[$db-related-network-index].related-network-role + ' in vnf-networks'`\" />\n",
        "comments": "",
        "x": 2740.6666145324707,
        "y": 4034.666932106018,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "3d0737b3.9ec1b8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2592.6666145324707,
        "y": 4036.666932106018,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "bcd80885.38a53",
                "c2e552ca.070a58"
            ]
        ]
    },
    {
        "id": "c2e552ca.070a58",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2685.3334159851074,
        "y": 3799.3338232040405,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "32ec3043.8c7a48",
        "type": "set",
        "name": "set is-trunked and segmentation-id in vm-network",
        "xml": "<set>\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].is-trunked'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].is-trunked`' />\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].segmentation-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].segmentation-id`' />\n",
        "comments": "",
        "x": 2330.6666145324707,
        "y": 4086.666932106018,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "82230b3.4e0eb78",
        "type": "switchNode",
        "name": "switch rn-index",
        "xml": "<switch test='`$rn-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2218.6666145324707,
        "y": 4194.666932106018,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "1c308d18.6f180b"
            ]
        ]
    },
    {
        "id": "7ec44754.6e3ce8",
        "type": "set",
        "name": "set rn-index to related network length",
        "xml": "<set>\n<parameter name='rn-index' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length`' />\n",
        "comments": "",
        "x": 2290.6666145324707,
        "y": 4138.666932106018,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "1c308d18.6f180b",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 2382.6666145324707,
        "y": 4194.666932106018,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "c90d6626.2d16c8"
            ]
        ]
    },
    {
        "id": "c90d6626.2d16c8",
        "type": "set",
        "name": "set rn-index to 0",
        "xml": "<set>\n<parameter name='rn-index' value='0' />\n",
        "comments": "",
        "x": 2542.6666145324707,
        "y": 4194.666932106018,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "2015e74a.c5951",
        "type": "set",
        "name": "set related-network data",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].network-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].network-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].network-role'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].network-role`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.vlan-interface'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.vlan-interface`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.lower-tag-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.lower-tag-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.upper-tag-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.upper-tag-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$rn-index].vlan-tags.is-private'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$saved-vnf-network-index].related-networks.related-network[$saved-related-network-index].vlan-tags.is-private`' />\n",
        "comments": "",
        "x": 2242.6666145324707,
        "y": 4246.666932106018,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "8410c3bd.8615d8",
        "type": "set",
        "name": "set new related network length",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length'\n  value='`$rn-index + 1`' />\n",
        "comments": "",
        "x": 2260.6666145324707,
        "y": 4298.666932106018,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "bc447980.e24dc8",
        "type": "switchNode",
        "name": "switch found-related-network",
        "xml": "<switch test='`$found-related-network`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2657.6666679382324,
        "y": 3987.3335790634155,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d80e92e3.c10748"
            ]
        ]
    },
    {
        "id": "d80e92e3.c10748",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2854.3335304260254,
        "y": 3987.333950996399,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "5b959387.3d158c"
            ]
        ]
    },
    {
        "id": "5b959387.3d158c",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2984.3334159851074,
        "y": 3985.6670751571655,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "d26523f4.9aab38",
        "type": "set",
        "name": "save indexes",
        "xml": "<set>\n<parameter name='saved-vnf-network-index' value='`$vnf-network-index`' />\n<parameter name='saved-related-network-index' value='`$related-network-index`' />\n",
        "comments": "",
        "x": 3424.3336296081543,
        "y": 3937.3339490890503,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "b7e1aa61.e0c05",
        "type": "execute",
        "name": "generate cp-instance-id",
        "xml": "<execute plugin=\"org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils\" method=\"generateUUID\" >\n<parameter name=\"ctx-destination\" value=\"cp-instance-id\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1713.2381210327148,
        "y": 4966.8580021858215,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "de7b0fd2.8da4e",
        "type": "save",
        "name": "save cp to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"cp\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND cp.cp-instance-id = $cp-instance-id\" >\n<parameter name=\"cp-instance-id\" value=\"`$cp-instance-id`\" />\n<parameter name=\"port-id\" value=\"0\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1694.90474319458,
        "y": 5033.52450799942,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "358e3fe3.ddba5",
                "2d7525d9.39627a"
            ]
        ]
    },
    {
        "id": "358e3fe3.ddba5",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1883.9047241210938,
        "y": 5009.191121518612,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "72609dfd.3112fc"
            ]
        ]
    },
    {
        "id": "72609dfd.3112fc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2051.0714721679688,
        "y": 5024.985555112362,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "c7bc2a39.68fc08",
                "c5eedaf3.834a18"
            ]
        ]
    },
    {
        "id": "2d7525d9.39627a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1888.9047241210938,
        "y": 5058.857381284237,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "72609dfd.3112fc"
            ]
        ]
    },
    {
        "id": "c7bc2a39.68fc08",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating cp object in AAI\" />\n",
        "comments": "",
        "x": 2216.5714836120605,
        "y": 5036.857759952545,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "a1a1ecdf.c4a56",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1489.714443206787,
        "y": 5236.142796039581,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "7af42f40.8aef9",
                "b921c045.cf4a58",
                "b7e1aa61.e0c05",
                "de7b0fd2.8da4e",
                "924969d5.e24eb",
                "896e9ff3.5ddce8"
            ]
        ]
    },
    {
        "id": "7af42f40.8aef9",
        "type": "set",
        "name": "set connection point data",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].connection-point.connection-point-id'\n  value='`$cp-instance-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].connection-point.port-id'\n  value='0' />\n",
        "comments": "",
        "x": 1725.2382850646973,
        "y": 5111.382077693939,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "69b3a52f.ed302c",
        "type": "comment",
        "name": "Floating IPs",
        "info": "",
        "comments": "",
        "x": 1286.0001029968262,
        "y": 6093.6671959757805,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "924969d5.e24eb",
        "type": "for",
        "name": "for each vnf-network",
        "xml": "<for index='vnf-network-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1709.3332862854004,
        "y": 5507.667571544647,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "ed0595dc.89f0a"
            ]
        ]
    },
    {
        "id": "b30a7a0e.b1aeb8",
        "type": "save",
        "name": "save cp relationship to l3-network",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"cp:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n     AND cp.cp-instance-id = $cp-instance-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2347.6667671203613,
        "y": 5507.3340792655945,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f5b05c6b.1135f",
                "d2ef2736.dbe9f8"
            ]
        ]
    },
    {
        "id": "f83d4150.2164",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2719.4998054504395,
        "y": 5480.652027606964,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "1595f2ec.e2353d",
                "11c0ecc1.bd777b"
            ]
        ]
    },
    {
        "id": "543b0768.038458",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2719.4998817443848,
        "y": 5533.651786327362,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "1595f2ec.e2353d",
                "ca94a580.517c78"
            ]
        ]
    },
    {
        "id": "f5b05c6b.1135f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2562.666690826416,
        "y": 5480.667697429657,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f83d4150.2164"
            ]
        ]
    },
    {
        "id": "d2ef2736.dbe9f8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2571.238224029541,
        "y": 5533.286841869354,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "543b0768.038458"
            ]
        ]
    },
    {
        "id": "11c0ecc1.bd777b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating cp relationship to l3-network in AAI\" />\n",
        "comments": "",
        "x": 2891.6666145324707,
        "y": 5503.334403514861,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "ca94a580.517c78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating cp relationship to l3-network\" />\n",
        "comments": "",
        "x": 2886.833522796631,
        "y": 5554.985610485076,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "1595f2ec.e2353d",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3093.3333778381348,
        "y": 5453.334401607513,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "896e9ff3.5ddce8",
        "type": "for",
        "name": "for each vm-network",
        "xml": "<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1709.333438873291,
        "y": 5668.333926677704,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b4c09c6b.a5d53"
            ]
        ]
    },
    {
        "id": "db0f03f2.b2b0b8",
        "type": "save",
        "name": "save cp relationship to l3-network and vlan-tag",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"cp:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n     AND cp.cp-instance-id = $cp-instance-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$related-network-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vlan-tag\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vlan-tags/vlan-tag/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network[$related-network-index].vlan-tags.vlan-interface`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2629.00044631958,
        "y": 5666.333921909332,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "158a961a.68ca5a",
                "6c0ed6bc.bf0f38"
            ]
        ]
    },
    {
        "id": "4bb4f404.9b76c4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3035.8334922790527,
        "y": 5639.651220798493,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "605085ed.956acc",
                "1595f2ec.e2353d"
            ]
        ]
    },
    {
        "id": "6b7f2e87.9344c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3035.833568572998,
        "y": 5692.650979518891,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "560ad601.e54da8",
                "1595f2ec.e2353d"
            ]
        ]
    },
    {
        "id": "158a961a.68ca5a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2879.0003776550293,
        "y": 5639.666890621186,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "4bb4f404.9b76c4"
            ]
        ]
    },
    {
        "id": "6c0ed6bc.bf0f38",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2887.5719108581543,
        "y": 5692.2860350608835,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "6b7f2e87.9344c8"
            ]
        ]
    },
    {
        "id": "605085ed.956acc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating cp relationship to l3-network and vlan-tag in AAI\" />\n",
        "comments": "",
        "x": 3208.000301361084,
        "y": 5662.33359670639,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "560ad601.e54da8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating cp relationship to l3-network and vlan-tag\" />\n",
        "comments": "",
        "x": 3203.167209625244,
        "y": 5713.984803676605,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "ea750957.b97f48",
        "type": "for",
        "name": "for each related-network",
        "xml": "<for silentFailure='true' index='related-network-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].related-networks.related-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2325.0002784729004,
        "y": 5666.333922863007,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "db0f03f2.b2b0b8"
            ]
        ]
    },
    {
        "id": "93cb37c9.f6be6",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-generate-heat-parameters",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-generate-heat-parameters' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 583.3335723876953,
        "y": 6909.334183335304,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "e67f8b4b.7199c",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmoduleheat.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 404.6669006347656,
        "y": 6957.33428633213,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "b428e901.f92c58",
        "type": "switchNode",
        "name": "switch input vf-module-name",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 556.0000038146973,
        "y": 2393.1667442321777,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "31a899fc.438686",
                "fca3dbdd.0b394"
            ]
        ]
    },
    {
        "id": "31a899fc.438686",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 755.9999961853027,
        "y": 2370.6666469573975,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "4cd82d1e.0f6cb4"
            ]
        ]
    },
    {
        "id": "fca3dbdd.0b394",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 756.4285888671875,
        "y": 2420.7857580184937,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "31b2e45a.c5cc34"
            ]
        ]
    },
    {
        "id": "cda61c6b.2c9fa",
        "type": "for",
        "name": "for each vnfc-subnet-role",
        "xml": "<for index='subnet-role-index' start='0'\n  end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1313.5001029968262,
        "y": 3188.1664209365845,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "c56cb396.bed0a8"
            ]
        ]
    },
    {
        "id": "c56cb396.bed0a8",
        "type": "for",
        "name": "for each vnfc-address-family",
        "xml": "<for index='address-family-index' start='0'\n  end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1561.8333625793457,
        "y": 3188.1664209365845,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "e6767a86.f4eac8"
            ]
        ]
    },
    {
        "id": "3b469f6e.914af",
        "type": "for",
        "name": "for each vm-type",
        "xml": "<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 519.3332786560059,
        "y": 2906.4997577667236,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "2869aaeb.194e3e"
            ]
        ]
    },
    {
        "id": "2869aaeb.194e3e",
        "type": "for",
        "name": "for each vnfc",
        "xml": "<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 701.000057220459,
        "y": 2905.1669063568115,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a857d0dd.1c29"
            ]
        ]
    },
    {
        "id": "a857d0dd.1c29",
        "type": "for",
        "name": "for each vnfc-network",
        "xml": "<for silentFailure='true' index='vnfc-network-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 902.1666297912598,
        "y": 2904.99959564209,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "ee1b44fe.2f2cd"
            ]
        ]
    },
    {
        "id": "ee1b44fe.2f2cd",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1114.3333015441895,
        "y": 2903.9999561309814,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a23f26c0.f90488",
                "381d0bf0.f39a04",
                "6a4917ea.efeac",
                "cda61c6b.2c9fa"
            ]
        ]
    },
    {
        "id": "a23f26c0.f90488",
        "type": "set",
        "name": "set vnf-network-index to -1",
        "xml": "<set>\n<parameter name='vnf-network-index' value='-1' />\n",
        "comments": "",
        "x": 1326.0000190734863,
        "y": 2857.333169937134,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "381d0bf0.f39a04",
        "type": "for",
        "name": "for each vnf-network",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1307.6668090820312,
        "y": 2903.999921798706,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b54d32d2.4fb658"
            ]
        ]
    },
    {
        "id": "b54d32d2.4fb658",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$idx].network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1549.3332786560059,
        "y": 2902.3334169387817,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "76e801c5.051cb"
            ]
        ]
    },
    {
        "id": "76e801c5.051cb",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1745.99995803833,
        "y": 2902.333335876465,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "47f17403.c07b5c"
            ]
        ]
    },
    {
        "id": "47f17403.c07b5c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1899.333179473877,
        "y": 2902.3332080841064,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "bb2e965d.d565",
                "d5928948.b091e",
                "83b033a8.562b68"
            ]
        ]
    },
    {
        "id": "bb2e965d.d565",
        "type": "set",
        "name": "set vnf-network-index",
        "xml": "<set>\n<parameter name='vnf-network-index' value='`$idx`' />\n",
        "comments": "",
        "x": 2106.000011444092,
        "y": 2850.666585922241,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "d5928948.b091e",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2060.999927520752,
        "y": 2940.666506767273,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "6a4917ea.efeac",
        "type": "switchNode",
        "name": "switch vnf-network-index",
        "xml": "<switch test='`$vnf-network-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1319.3333473205566,
        "y": 2963.9999237060547,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "3969f231.fbb176"
            ]
        ]
    },
    {
        "id": "3969f231.fbb176",
        "type": "outcome",
        "name": "-1",
        "xml": "<outcome value='-1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1510.9999885559082,
        "y": 2964.0001678466797,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "38d15f23.40cc68"
            ]
        ]
    },
    {
        "id": "38d15f23.40cc68",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1659.333179473877,
        "y": 2962.3332080841064,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "18028b3c.126add",
                "6f410330.9a4ffc"
            ]
        ]
    },
    {
        "id": "18028b3c.126add",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3187.6668128967285,
        "y": 2813.999785423279,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "6f410330.9a4ffc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNFC network role '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-network-role\n      + ' is not found in VNF network list'\n      `\" />\n\n\n\n",
        "comments": "",
        "x": 1827.6665534973145,
        "y": 2980.6664600372314,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "fb18cc52.6a898",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2350.999897003174,
        "y": 3372.333059310913,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f442db83.334788",
                "7cefe9a2.96f3b8",
                "469af57c.e6a11c"
            ]
        ]
    },
    {
        "id": "f442db83.334788",
        "type": "for",
        "name": "for each subnet-data",
        "xml": "<for index='subnet-data-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2547.666648864746,
        "y": 3327.332978248596,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "e01cbe64.94b3f8"
            ]
        ]
    },
    {
        "id": "e01cbe64.94b3f8",
        "type": "switchNode",
        "name": "address-families match?",
        "xml": "<switch test='`$tmp.address-family\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].ip-version`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2774.3332748413086,
        "y": 3327.332978248596,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "2b0b58b5.c4c3d"
            ]
        ]
    },
    {
        "id": "2b0b58b5.c4c3d",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2954.333240509033,
        "y": 3327.333384513855,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b762cdaa.7b7d58"
            ]
        ]
    },
    {
        "id": "7aa6fa22.b229ec",
        "type": "set",
        "name": "set tmp.address-family",
        "xml": "<set>\n<parameter name='tmp.address-family'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-address-family`' />\n",
        "comments": "",
        "x": 2379.3332328796387,
        "y": 3190.6664724349976,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "e6767a86.f4eac8",
        "type": "switchNode",
        "name": "switch vnfc-subnet-ip_length",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1824.3335762023926,
        "y": 3187.333507537842,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "7a092954.09eeb8",
                "573b2641.6dfb5",
                "666a44.9ddafdbc"
            ]
        ]
    },
    {
        "id": "7a092954.09eeb8",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 2026.000087738037,
        "y": 3087.3330507278442,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "81be8469.f372c8"
            ]
        ]
    },
    {
        "id": "573b2641.6dfb5",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2022.4287185668945,
        "y": 3273.2853422164917,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "45bc659a.98c224"
            ]
        ]
    },
    {
        "id": "81be8469.f372c8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2157.6666374206543,
        "y": 3109.999797821045,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "a4d39f7.368bae",
        "type": "set",
        "name": "set subnet-id to -1",
        "xml": "<set>\n<parameter name='subnet-id' value='-1' />\n",
        "comments": "",
        "x": 3047.6671562194824,
        "y": 3489.000464439392,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "45bc659a.98c224",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2176.0001335144043,
        "y": 3272.332974433899,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "7aa6fa22.b229ec",
                "fb18cc52.6a898"
            ]
        ]
    },
    {
        "id": "3a30b58a.8b1902",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4307.666753768921,
        "y": 3660.6669414043427,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "5a41500f.0912c",
                "c75bdac0.608e28"
            ]
        ]
    },
    {
        "id": "c75bdac0.608e28",
        "type": "execute",
        "name": "execute isInSameSubnet",
        "xml": "<execute plugin=\"com.att.sdnctl.sli.plugin.ipAddressTools.IpAddressTool\" method=\"isInSameSubnet\">\n\t<parameter name=\"firstIPAddr\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].network-start-address`\" />\n\t<parameter name=\"secondIPAddr\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[0].vnfc-ip-address`\" />\n\t<parameter name=\"subnet\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].cidr-mask`\" />\n\t<parameter name=\"ipType\" value=\"`$ip-type`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4522.6667556762695,
        "y": 3710.6666152477264,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "fc9daa2d.49bff8"
            ]
        ]
    },
    {
        "id": "5a41500f.0912c",
        "type": "switchNode",
        "name": "switch tmp.address-family",
        "xml": "<switch test='`$tmp.address-family`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4524.333911895752,
        "y": 3617.3336017131805,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f4be8ccd.be009",
                "72c72361.a8d7c4"
            ]
        ]
    },
    {
        "id": "f4be8ccd.be009",
        "type": "outcome",
        "name": "ipv4",
        "xml": "<outcome value='ipv4'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4727.667174021402,
        "y": 3590.6668320496874,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f7079d9a.5ed3b8"
            ]
        ]
    },
    {
        "id": "72c72361.a8d7c4",
        "type": "outcome",
        "name": "ipv6",
        "xml": "<outcome value='ipv6'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4727.666847229004,
        "y": 3637.333359479904,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b4668c70.4d6068"
            ]
        ]
    },
    {
        "id": "f7079d9a.5ed3b8",
        "type": "set",
        "name": "set ip-type parameter to IPv4",
        "xml": "<set>\n<parameter name='ip-type' value='IPv4' />\n",
        "comments": "",
        "x": 4924.333660125732,
        "y": 3589.000305891037,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "b4668c70.4d6068",
        "type": "set",
        "name": "set ip-type parameter to IPv6",
        "xml": "<set>\n<parameter name='ip-type' value='IPv6' />\n",
        "comments": "",
        "x": 4929.33353805542,
        "y": 3637.3333785533905,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "ca9a9a07.3149c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4862.666786193848,
        "y": 3710.3333785533905,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "5fb0668c.094638",
                "8f15b60d.4ff8e"
            ]
        ]
    },
    {
        "id": "5fb0668c.094638",
        "type": "set",
        "name": "set subnet-id",
        "xml": "<set>\n<parameter name='subnet-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id`' />\n",
        "comments": "",
        "x": 5041.000106811523,
        "y": 3686.999865293503,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "8f15b60d.4ff8e",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 5026.000110626221,
        "y": 3733.6668593883514,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "eca4a7bd.43cf98",
        "type": "switchNode",
        "name": "switch subnet-id",
        "xml": "<switch test='`$subnet-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3039.3330307006836,
        "y": 3650.6671991348267,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "614b5d7f.185d74"
            ]
        ]
    },
    {
        "id": "614b5d7f.185d74",
        "type": "outcome",
        "name": "-1",
        "xml": "<outcome value='-1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3195.99959564209,
        "y": 3650.667134284973,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "596acc40.1235c4"
            ]
        ]
    },
    {
        "id": "596acc40.1235c4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3344.3327865600586,
        "y": 3649.0001745224,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "4d1c0603.affe18",
                "18028b3c.126add"
            ]
        ]
    },
    {
        "id": "4d1c0603.affe18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Not able to find VNF network subnet that contains address '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[0].vnfc-ip-address\n      `\" />\n\n\n\n",
        "comments": "",
        "x": 3512.666118621826,
        "y": 3665.6666498184204,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "d396f76b.f6fde8",
        "type": "set",
        "name": "set subnet-id in vnfc-ip-assignments (temp variable)",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id' value='`$subnet-id`' />\n",
        "comments": "",
        "x": 3150.9996757507324,
        "y": 3727.3339700698853,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "8afcf9dd.0fb538",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmodulec.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 504.3332710266113,
        "y": 3322.3332080841064,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "fc9daa2d.49bff8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4709.333358764648,
        "y": 3710.6671035289764,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "ca9a9a07.3149c"
            ]
        ]
    },
    {
        "id": "83b033a8.562b68",
        "type": "set",
        "name": "set network-id",
        "xml": "<set>\n<parameter name='$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].network-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$idx].network-id`' />\n",
        "comments": "",
        "x": 2082.666515350342,
        "y": 2895.6666688919067,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "6d325d15.c2ae54",
        "type": "switchNode",
        "name": "switch nfc-naming-code",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1280.9999809265137,
        "y": 4510.666396617889,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "bd6a1053.3a3fe8",
                "3b2aa00a.ecb358"
            ]
        ]
    },
    {
        "id": "bd6a1053.3a3fe8",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 1465.999927520752,
        "y": 4485.666215419769,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "c50ef3bf.9484b"
            ]
        ]
    },
    {
        "id": "3b2aa00a.ecb358",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1464.095199584961,
        "y": 4532.452043056488,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "904c7fdd.6daae"
            ]
        ]
    },
    {
        "id": "c50ef3bf.9484b",
        "type": "set",
        "name": "set tmp.nfc-naming-code to DEFAULT",
        "xml": "<set>\n<parameter name='tmp.nfc-naming-code' value='DEFAULT' />\n",
        "comments": "",
        "x": 1697.6666984558105,
        "y": 4483.999565601349,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "904c7fdd.6daae",
        "type": "set",
        "name": "set tmp.nfc-naming-code",
        "xml": "<set>\n<parameter name='tmp.nfc-naming-code' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code`' />\n",
        "comments": "",
        "x": 1654.333209991455,
        "y": 4532.3330636024475,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "eddbfba2.b4aa8",
        "type": "switchNode",
        "name": "switch nfc-function",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-function`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1269.3333129882812,
        "y": 4608.9995703697205,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "6f2143a3.f2d48c",
                "72d6bfbf.d4f6c"
            ]
        ]
    },
    {
        "id": "6f2143a3.f2d48c",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 1465.9999198913574,
        "y": 4583.999368190765,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d43d7c3f.7b5fa"
            ]
        ]
    },
    {
        "id": "72d6bfbf.d4f6c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1464.0951919555664,
        "y": 4630.785195827484,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "416cc3a3.aabf9c"
            ]
        ]
    },
    {
        "id": "d43d7c3f.7b5fa",
        "type": "set",
        "name": "set tmp.nfc-function to DEFAULT",
        "xml": "<set>\n<parameter name='tmp.nfc-function' value='DEFAULT' />\n",
        "comments": "",
        "x": 1677.6667022705078,
        "y": 4582.332577228546,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "416cc3a3.aabf9c",
        "type": "set",
        "name": "set tmp.nfc-function",
        "xml": "<set>\n<parameter name='tmp.nfc-function' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-function`' />\n",
        "comments": "",
        "x": 1635.9998321533203,
        "y": 4630.666238307953,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "8d80e821.1693b",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2909.3333015441895,
        "y": 2265.6667041778564,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "99f5ebf0.52d458",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2815.9998054504395,
        "y": 2340.6667041778564,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "c929db89.f64588",
                "8d80e821.1693b"
            ]
        ]
    },
    {
        "id": "1c44b698.e89ca9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2020.9998588562012,
        "y": 2400.666567802429,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b2930715.b61298",
                "8d80e821.1693b"
            ]
        ]
    },
    {
        "id": "787c4f45.899ea",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2282.666723251343,
        "y": 2455.6667346954346,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "3affa095.73c9a8",
                "8d80e821.1693b"
            ]
        ]
    },
    {
        "id": "ed0595dc.89f0a",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1942.6666297912598,
        "y": 5507.66659784317,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b1fb0c1d.4ee28"
            ]
        ]
    },
    {
        "id": "b1fb0c1d.4ee28",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2141.000099182129,
        "y": 5507.333753108978,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b30a7a0e.b1aeb8"
            ]
        ]
    },
    {
        "id": "b4c09c6b.a5d53",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1945.9999732971191,
        "y": 5667.3330454826355,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "5022bc61.1498b4"
            ]
        ]
    },
    {
        "id": "5022bc61.1498b4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2144.3334426879883,
        "y": 5667.000200748444,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "ea750957.b97f48"
            ]
        ]
    },
    {
        "id": "e31c82d6.e28cd",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1849.3332557678223,
        "y": 6245.66646528244,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "4125e5e4.ca4cf4",
                "a86f60b4.2ada88"
            ]
        ]
    },
    {
        "id": "a49f6373.34771",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1851.0000038146973,
        "y": 6560.666476726532,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a16e0517.bc234",
                "e2626f7a.eedc7"
            ]
        ]
    },
    {
        "id": "a86f60b4.2ada88",
        "type": "for",
        "name": "for each vnfc-network-role",
        "xml": "<for silentFailure='true' index='vnfc-network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2066.000202178955,
        "y": 6303.999636173248,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a3e353a8.a8379"
            ]
        ]
    },
    {
        "id": "59f7d408.092d6c",
        "type": "save",
        "name": "save vip-ipv4-address-list relationship to cp",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv4-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"cp\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n        + '/cps/cp/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].connection-point.connection-point-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2741.0001258850098,
        "y": 6303.999475002289,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "e084dac8.dfbdf",
                "5d9fdeb8.d5ca9"
            ]
        ]
    },
    {
        "id": "4c450de3.be612c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationship to cp in AAI\" />\n",
        "comments": "",
        "x": 3299.3333473205566,
        "y": 6297.332883358002,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "c9f9384.5dcd4c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationship to cp\" />\n",
        "comments": "",
        "x": 3299.500316619873,
        "y": 6347.317057073116,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "eff96122.a5127",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3132.8332176208496,
        "y": 6277.317256450653,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "4c450de3.be612c",
                "bae19213.720998"
            ]
        ]
    },
    {
        "id": "222a4a49.d01296",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3132.833293914795,
        "y": 6330.317015171051,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "c9f9384.5dcd4c8",
                "bae19213.720998"
            ]
        ]
    },
    {
        "id": "e084dac8.dfbdf",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2976.000102996826,
        "y": 6277.332926273346,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "eff96122.a5127"
            ]
        ]
    },
    {
        "id": "5d9fdeb8.d5ca9",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2984.571636199951,
        "y": 6329.952070713043,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "222a4a49.d01296"
            ]
        ]
    },
    {
        "id": "e2626f7a.eedc7",
        "type": "for",
        "name": "for each vnfc-network-role",
        "xml": "<for silentFailure='true' index='vnfc-network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2067.6665992736816,
        "y": 6627.3330454826355,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "32334e7a.14ca4a"
            ]
        ]
    },
    {
        "id": "ea51feef.b43a1",
        "type": "save",
        "name": "save vip-ipv6-address-list relationship to cp",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv6-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"cp\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n        + '/cps/cp/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].connection-point.connection-point-id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2737.6665534973145,
        "y": 6625.665828227997,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a62ed769.c34ee8",
                "9748d166.6ea508"
            ]
        ]
    },
    {
        "id": "3e1e7879.92a6c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationship to cp in AAI\" />\n",
        "comments": "",
        "x": 3295.9997749328613,
        "y": 6618.99923658371,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "db667135.e3d55",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationship to cp\" />\n",
        "comments": "",
        "x": 3296.1667442321777,
        "y": 6668.983410298824,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "dcea6cb0.ca0e08",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3129.4996452331543,
        "y": 6598.983609676361,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "3e1e7879.92a6c8"
            ]
        ]
    },
    {
        "id": "aa17394f.c1a61",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3129.4997215270996,
        "y": 6651.983368396759,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "db667135.e3d55"
            ]
        ]
    },
    {
        "id": "a62ed769.c34ee8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2972.666530609131,
        "y": 6598.999279499054,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "dcea6cb0.ca0e08"
            ]
        ]
    },
    {
        "id": "9748d166.6ea508",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2981.238063812256,
        "y": 6651.618423938751,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "aa17394f.c1a61"
            ]
        ]
    },
    {
        "id": "a3e353a8.a8379",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].vnfc-network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2319.3332710266113,
        "y": 6303.999312877655,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a18f0cd9.bb53e"
            ]
        ]
    },
    {
        "id": "a18f0cd9.bb53e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2506.000114440918,
        "y": 6303.999800205231,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "59f7d408.092d6c"
            ]
        ]
    },
    {
        "id": "32334e7a.14ca4a",
        "type": "switchNode",
        "name": "switch network-roles match?",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-role\n  == $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-role-index].vnfc-network-role`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2315.9998512268066,
        "y": 6625.6660532951355,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "2cdc10b2.c72a3"
            ]
        ]
    },
    {
        "id": "2cdc10b2.c72a3",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2502.6666946411133,
        "y": 6625.666540622711,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "ea51feef.b43a1"
            ]
        ]
    },
    {
        "id": "361e3fc9.a48b4",
        "type": "comment",
        "name": "SELF-SERVE FORK",
        "info": "",
        "comments": "",
        "x": 685.7142944335938,
        "y": 914.0233240127563,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "117e3b62.5aa8bd",
        "type": "call",
        "name": "call self-serve-vf-module-assign",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='self-serve-vf-module-assign' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1218.749439239502,
        "y": 958.9401302337646,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "f89a1649.a4f67"
            ]
        ]
    },
    {
        "id": "b9fc745a.c1ac08",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Failed to create self-serve assignment for vf-module with vf-module-id=' + $vf-module-topology-operation-input.vf-module-information.vf-module-id + ' with error: ' + $error-message`\" />\n",
        "comments": "",
        "x": 1602.820816040039,
        "y": 958.9400806427002,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "f89a1649.a4f67",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1439.047019958496,
        "y": 958.4281616210938,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "b9fc745a.c1ac08"
            ]
        ]
    },
    {
        "id": "4829771.8ea3908",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1165.6186828613281,
        "y": 1108.7850494384766,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "31590b24.d5632c",
        "type": "execute",
        "name": "printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss-vnfend.log' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1157.6662254333496,
        "y": 1063.276593208313,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "d49a2e80.f4059",
        "type": "set",
        "name": "set order-status to PendingCreate",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n",
        "comments": "",
        "x": 1228.3567428588867,
        "y": 1012.2374877929688,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "34a13450.3aef24",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 939.4521713256836,
        "y": 958.6182918548584,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "117e3b62.5aa8bd",
                "d49a2e80.f4059",
                "31590b24.d5632c",
                "4829771.8ea3908"
            ]
        ]
    },
    {
        "id": "a27acd22.6efdb8",
        "type": "comment",
        "name": "First, count the subnets for this address family",
        "info": "",
        "comments": "",
        "x": 2681.0004081726074,
        "y": 3236.975468635559,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "85a579b6.2acd18",
        "type": "for",
        "name": "for each subnet-data",
        "xml": "<for index='subnet-data-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3054.333095550537,
        "y": 3531.975972175598,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "34d4efe9.60711"
            ]
        ]
    },
    {
        "id": "34d4efe9.60711",
        "type": "switchNode",
        "name": "address-families match?",
        "xml": "<switch test='`$tmp.address-family\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].ip-version`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3280.9997215270996,
        "y": 3531.975972175598,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "4e8b5d8b.27f9b4"
            ]
        ]
    },
    {
        "id": "4e8b5d8b.27f9b4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3460.999687194824,
        "y": 3531.976378440857,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "fb12a312.b0bf58"
            ]
        ]
    },
    {
        "id": "7cefe9a2.96f3b8",
        "type": "set",
        "name": "set af-count to 0",
        "xml": "<set>\n<parameter name='af-count' value='0' />\n",
        "comments": "",
        "x": 2535.9999809265137,
        "y": 3278.6422204971313,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "63e338b8.cffcf",
        "type": "set",
        "name": "increment af-count",
        "xml": "<set>\n<parameter name='af-count' value='`$af-count + 1`' />\n",
        "comments": "",
        "x": 3284.3333473205566,
        "y": 3345.308970451355,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "b762cdaa.7b7d58",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3100.9997215270996,
        "y": 3326.975655555725,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "63e338b8.cffcf",
                "e6ae56c7.b49d98"
            ]
        ]
    },
    {
        "id": "e6ae56c7.b49d98",
        "type": "set",
        "name": "set subnet-id",
        "xml": "<set>\n<parameter name='subnet-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id`' />\n",
        "comments": "",
        "x": 3265.999767303467,
        "y": 3300.3089685440063,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "469af57c.e6a11c",
        "type": "switchNode",
        "name": "switch af-count",
        "xml": "<switch test='`$af-count`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2526.0003929138184,
        "y": 3515.3091373443604,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "cc9bdb1d.8c92f8",
                "e411192b.cfae58"
            ]
        ]
    },
    {
        "id": "cc9bdb1d.8c92f8",
        "type": "outcome",
        "name": "1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2685.999912261963,
        "y": 3413.64230632782,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "42b952fa.0595bc"
            ]
        ]
    },
    {
        "id": "42b952fa.0595bc",
        "type": "set",
        "name": "set subnet-id in vnfc-ip-assignments (temp variable)",
        "xml": "<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$vnfc-network-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id'\n  value='`$subnet-id`' />\n",
        "comments": "",
        "x": 2959.3332176208496,
        "y": 3411.975655555725,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "e411192b.cfae58",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2685.999828338623,
        "y": 3615.309226036072,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "24cdf0e5.0fb17"
            ]
        ]
    },
    {
        "id": "24cdf0e5.0fb17",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2842.6664695739746,
        "y": 3615.30890750885,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a4d39f7.368bae",
                "85a579b6.2acd18",
                "eca4a7bd.43cf98",
                "d396f76b.f6fde8"
            ]
        ]
    },
    {
        "id": "fb12a312.b0bf58",
        "type": "switchNode",
        "name": "switch network-start-address",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].network-start-address`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3655.9998664855957,
        "y": 3530.3092222213745,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "4221cd8b.4f0b04",
                "bc495346.51b6d8"
            ]
        ]
    },
    {
        "id": "4221cd8b.4f0b04",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 3852.6667137145996,
        "y": 3465.308832883835,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d4991242.2d931"
            ]
        ]
    },
    {
        "id": "bc495346.51b6d8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3845.7621116638184,
        "y": 3599.5947444438934,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "3509543d.e4d524"
            ]
        ]
    },
    {
        "id": "3509543d.e4d524",
        "type": "switchNode",
        "name": "switch cidr-mask",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].cidr-mask`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4000.9999046325684,
        "y": 3598.6419513225555,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "1bf5f237.4533c6",
                "835cbe2.56d1ec"
            ]
        ]
    },
    {
        "id": "1bf5f237.4533c6",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 4155.999980926514,
        "y": 3528.642250776291,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "76ca0881.17599"
            ]
        ]
    },
    {
        "id": "835cbe2.56d1ec",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4159.095777511597,
        "y": 3661.261337995529,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "3a30b58a.8b1902"
            ]
        ]
    },
    {
        "id": "666a44.9ddafdbc",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>",
        "comments": "",
        "outputs": 1,
        "x": 2027.666591644287,
        "y": 3135.30890750885,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "81be8469.f372c8"
            ]
        ]
    },
    {
        "id": "6e4873d.062f90c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'SDNC subnet id '\n      + $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id\n      + ' does not have network-start-address populated'`\" />\n\n\n\n",
        "comments": "",
        "x": 4161.000217437744,
        "y": 3480.3086698055267,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "d4991242.2d931",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3997.6666412353516,
        "y": 3465.3086001873016,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "6e4873d.062f90c",
                "18028b3c.126add"
            ]
        ]
    },
    {
        "id": "6bfa1431.19e884",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'SDNC subnet id '\n      + $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$subnet-data-index].sdnc-subnet-id\n      + ' does not have cidr-mask populated'`\" />\n\n\n\n",
        "comments": "",
        "x": 4466.000072479248,
        "y": 3541.9755370616913,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "76ca0881.17599",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4302.6664962768555,
        "y": 3526.975467443466,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "6bfa1431.19e884",
                "18028b3c.126add"
            ]
        ]
    },
    {
        "id": "e24c051b.e7045",
        "type": "comment",
        "name": "Ignore address families with no addresses",
        "info": "",
        "comments": "",
        "x": 2301.9999656677246,
        "y": 3065.6424036026,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "2c961574.c5ec1a",
        "type": "switchNode",
        "name": "switch invariant-uuid",
        "xml": "<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].invariant-uuid`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1272.666805267334,
        "y": 4695.30878162384,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d449ed1a.d1b6b8",
                "5ea67781.f484e"
            ]
        ]
    },
    {
        "id": "d449ed1a.d1b6b8",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 1454.3332176208496,
        "y": 4671.9754114151,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "3e0f229f.9582c6"
            ]
        ]
    },
    {
        "id": "5ea67781.f484e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1452.4284896850586,
        "y": 4718.761239051819,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d448096b.7f319"
            ]
        ]
    },
    {
        "id": "3e0f229f.9582c6",
        "type": "save",
        "name": "save vnfc to A&AI",
        "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vnfc\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\" >\n<parameter name=\"vnfc-name\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n<parameter name=\"nfc-naming-code\" value=\"`$tmp.nfc-naming-code`\" />\n<parameter name=\"nfc-function\" value=\"`$tmp.nfc-function`\" />\n<parameter name=\"orchestration-status\" value=\"`PendingCreate`\" />\n<parameter name=\"in-maint\" value=\"true\" />\n<parameter name=\"prov-status\" value=\"`PREPROV`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1615.999843597412,
        "y": 4673.6424036026,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "2ac13b6f.ca04e4",
                "d088fcf.548348"
            ]
        ]
    },
    {
        "id": "9d2a5723.d819d",
        "type": "switchNode",
        "name": "switch input cloud-owner",
        "xml": "<switch test='`$vf-module-topology-operation-input.vf-module-request-input.cloud-owner`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 551.7141952514648,
        "y": 303.88043308258057,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "9010034f.2a04f8",
                "7c5c0efc.48ff6"
            ]
        ]
    },
    {
        "id": "9010034f.2a04f8",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 735.0475692749023,
        "y": 273.88042163848877,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "43671eb8.cf01d8"
            ]
        ]
    },
    {
        "id": "7c5c0efc.48ff6",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 734.8094749450684,
        "y": 314.8329153060913,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "42643d54.edd34c"
            ]
        ]
    },
    {
        "id": "43671eb8.cf01d8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 870.0475234985352,
        "y": 272.2137613296509,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "42643d54.edd34c",
        "type": "set",
        "name": "set prop.cloud-region.cloud-owner",
        "xml": "<set>\n<parameter name='prop.cloud-region.cloud-owner' value='`$vf-module-topology-operation-input.vf-module-request-input.cloud-owner`' />\n",
        "comments": "",
        "x": 951.7141799926758,
        "y": 313.88044261932373,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "99e9725e.469bc",
        "type": "call",
        "name": "call self-serve-vf-module-forking-logic",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='self-serve-vf-module-forking-logic' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 583.3015670776367,
        "y": 855.2737636566162,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "a4f9634d.81c668",
        "type": "switchNode",
        "name": "switch ss.self-serve-flag",
        "xml": "<switch test=\"`$ss.self-serve-flag`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 541.4443054199219,
        "y": 1082.273832321167,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "d955356d.0947d",
                "1ccb924f.f2cc3e"
            ]
        ]
    },
    {
        "id": "d955356d.0947d",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 762.158504486084,
        "y": 1199.8447313308716,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "ee122710.062968"
            ]
        ]
    },
    {
        "id": "1ccb924f.f2cc3e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 762.7299575805664,
        "y": 958.7023687362671,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "34a13450.3aef24"
            ]
        ]
    },
    {
        "id": "bdc53141.3922c",
        "type": "call",
        "name": "call check for VNF-API-preload and copy",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='gw-vfmodule-update' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 492,
        "y": 7283.975699424744,
        "z": "b48a4925.44f81",
        "wires": [
            []
        ]
    },
    {
        "id": "47e92b02.3a9bec",
        "type": "comment",
        "name": "'Old' version of DG, called for flows where SO does not expect async response (so-sdnc-adapter)",
        "info": "",
        "comments": "",
        "x": 424,
        "y": 86.97569942474365,
        "z": "b48a4925.44f81",
        "wires": []
    },
    {
        "id": "6a32df50.00a9e",
        "type": "switchNode",
        "name": "switch input.vf-module-request-input.cloud-owner not null",
        "xml": "<switch test=\"`$input.vf-module-request-input.cloud-owner != ''`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 662,
        "y": 212,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "a1755561.b2dfb"
            ]
        ]
    },
    {
        "id": "a1755561.b2dfb",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 959,
        "y": 212,
        "z": "b48a4925.44f81",
        "wires": [
            [
                "9dbb9eea.1640f8"
            ]
        ]
    },
    {
        "id": "9dbb9eea.1640f8",
        "type": "set",
        "name": "set prop.cloud-region.cloud-owner to input.vf-module-request-input.cloud-owner",
        "xml": "<set>\n<parameter name='prop.cloud-region.cloud-owner' value='`$input.vf-module-request-input.cloud-owner`' />\n",
        "comments": "",
        "x": 1330,
        "y": 208,
        "z": "b48a4925.44f81",
        "wires": []
    }
]