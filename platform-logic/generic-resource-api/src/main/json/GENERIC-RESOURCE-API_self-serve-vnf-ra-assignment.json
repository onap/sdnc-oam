[{"id":"3501e5a2.675aea","type":"dgstart","name":"DGSTART","outputs":1,"x":91,"y":33.5,"z":"8334cfbf.1dbfc","wires":[["b5f22dfe.6e31"]]},{"id":"b5f22dfe.6e31","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":367,"y":34.5,"z":"8334cfbf.1dbfc","wires":[["547f0019.d0fa3"]]},{"id":"547f0019.d0fa3","type":"method","name":"self-serve-vnf-ra-assignment","xml":"<method rpc='self-serve-vnf-ra-assignment' mode='sync'>\n","comments":"","outputs":1,"x":210.07144165039062,"y":91.46428775787354,"z":"8334cfbf.1dbfc","wires":[["2e63ff2b.561f1"]]},{"id":"2e63ff2b.561f1","type":"block","name":"block atomic","xml":"<block atomic=\"true\">\n","atomic":"false","comments":"","outputs":1,"x":204.4523468017578,"y":158.04761695861816,"z":"8334cfbf.1dbfc","wires":[["96155f36.4dee","ecd8ee9b.c02a9","1f066148.408b8f","694896b0.6ae8c8","bc33905f.8bba6","9226252e.e39d18","16b37854.35c298","1c416f3d.add001","8bd3a596.34f178","be4e75b8.3ec5d8","7ff74048.c7318","6a301448.38917c","5d4647a7.c772e8","363fca1c.bf8736","e7b4ac15.b3f62"]]},{"id":"ecd8ee9b.c02a9","type":"set","name":"set","xml":"<set>\n   <parameter name=\"cds\" value=\"execution-service_process.\"/>\n   <parameter name=\"`$cds + 'commonHeader.requestId'`\" value=\"`$tmp.return.generate.vnf-se-serv-uuid`\"/>\n   <parameter name=\"resource-type\" value=\"`$vnf-topology-operation-input.vnf-information.vnf-type`\" />  \n   <parameter name=\"`$cds + 'commonHeader.subRequestId'`\" value=\"`$vnf-topology-operation-input.vnf-information.vnf-id`\" />   \n   <parameter name=\"`$cds + 'actionIdentifiers.actionName'`\" value=\"resource-assignment\"/> \n   <parameter name=\"responsePrefix\" value=\"raAssign\" />\n   <parameter name=\"`$cds + 'isNonAppend'`\" value=\"true\"/>\n   <parameter name=\"`$cds + 'commonHeader.originatorId'`\" value=\"SDNC_DG\"/>\n   <parameter name=\"`$cds + 'actionIdentifiers.mode'`\" value=\"sync\"/>\n","comments":"","x":385.2023696899414,"y":226.5476131439209,"z":"8334cfbf.1dbfc","wires":[]},{"id":"eba7814c.4e099","type":"get-resource","name":"get-resource VF_MODEL","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODEL WHERE customization_uuid = $vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid'\n  pfx='db1.vf-model'>\n  \n\n","comments":"","outputs":1,"x":943.8173675537109,"y":689.611005783081,"z":"8334cfbf.1dbfc","wires":[["c763b60b.7a9018","40f3797c.5f4068","93c98739.415188"]]},{"id":"c763b60b.7a9018","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1188.8174667358398,"y":638.8967294692993,"z":"8334cfbf.1dbfc","wires":[["c002a60.b907d58"]]},{"id":"c002a60.b907d58","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table\" />\n","comments":"","x":1361.8174667358398,"y":638.8967294692993,"z":"8334cfbf.1dbfc","wires":[]},{"id":"cc998536.46b198","type":"set","name":"set tmp.sdnc-model-name, tmp.sdnc-model-version, tmp.sdnc-artifact-name","xml":"<set>\n<parameter name='tmp.sdnc-model-name' value='`$db1.vf-model.sdnc-model-name`' />\n<parameter name='tmp.sdnc-model-version' value='`$db1.vf-model.sdnc-model-version`' />\n<parameter name='tmp.sdnc-artifact-name' value='`$db1.vf-model.sdnc-artifact-name`' />\n\n\n\n\n","comments":"","x":1587.2459678649902,"y":739.0395336151123,"z":"8334cfbf.1dbfc","wires":[]},{"id":"357da513.c5218a","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table\" />\n","comments":"","x":1371.8174667358398,"y":687.8967294692993,"z":"8334cfbf.1dbfc","wires":[]},{"id":"bc33905f.8bba6","type":"switchNode","name":"switch: model info == NULL","xml":"<switch test=\"`$tmp.sdnc-model-name == '' or $tmp.sdnc-model-version == '' or $tmp.sdnc-artifact-name == ''`\">\n","comments":"","outputs":1,"x":461.81736755371094,"y":690.611005783081,"z":"8334cfbf.1dbfc","wires":[["ffaf5b0c.1fedc8"]]},{"id":"40f3797c.5f4068","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1194.8174667358398,"y":687.8967294692993,"z":"8334cfbf.1dbfc","wires":[["357da513.c5218a"]]},{"id":"ffaf5b0c.1fedc8","type":"outcome","name":"true","xml":"<outcome value='true'>","comments":"","outputs":1,"x":713.8173675537109,"y":690.611005783081,"z":"8334cfbf.1dbfc","wires":[["eba7814c.4e099"]]},{"id":"694896b0.6ae8c8","type":"for","name":"for vnf-topology-operation-input","xml":"<for silentFailure='true' index='i' start='0' end='`$vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.param_length`' >","comments":"","outputs":1,"x":473.4523468017578,"y":476.29761695861816,"z":"8334cfbf.1dbfc","wires":[["f14b9f13.ca1ba"]]},{"id":"f14b9f13.ca1ba","type":"block","name":"block atomic","xml":"<block atomic=\"true\">","atomic":"false","comments":"","outputs":1,"x":734.4523468017578,"y":476.29761695861816,"z":"8334cfbf.1dbfc","wires":[["38dc7b1c.057fc4"]]},{"id":"a24519d6.9da8a8","type":"set","name":"set tmp.sdnc-model-name","xml":"<set>\n<parameter name='tmp.sdnc-model-name' value='`$vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.param[$i].value`' />\n","comments":"","x":1383.4523468017578,"y":398.29761695861816,"z":"8334cfbf.1dbfc","wires":[]},{"id":"8c31b1c4.f2bee","type":"outcome","name":"sdnc_model_name","xml":"<outcome value='sdnc_model_name'>\n","comments":"","outputs":1,"x":1129.4523468017578,"y":398.29761695861816,"z":"8334cfbf.1dbfc","wires":[["a24519d6.9da8a8"]]},{"id":"38dc7b1c.057fc4","type":"switchNode","name":"switch","xml":"<switch test='`$vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.param[$i].name`'>\n\n","comments":"","outputs":1,"x":908.4523468017578,"y":476.29761695861816,"z":"8334cfbf.1dbfc","wires":[["8c31b1c4.f2bee","6ab00d80.fca704","a9ef8550.572b88","8245db44.d86468"]]},{"id":"6ab00d80.fca704","type":"outcome","name":"sdnc_model_version","xml":"<outcome value='sdnc_model_version'>\n","comments":"","outputs":1,"x":1132.4523468017578,"y":444.29761695861816,"z":"8334cfbf.1dbfc","wires":[["8358a2cb.5dc06"]]},{"id":"a9ef8550.572b88","type":"outcome","name":"sdnc_artifact_name","xml":"<outcome value='sdnc_artifact_name'>\n","comments":"","outputs":1,"x":1131.4523468017578,"y":493.29761695861816,"z":"8334cfbf.1dbfc","wires":[["a9c04e60.ef2f8"]]},{"id":"8358a2cb.5dc06","type":"set","name":"set tmp.sdnc-model-version","xml":"<set>\n<parameter name='tmp.sdnc-model-version' value='`$vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.param[$i].value`' />\n\n","comments":"","x":1387.4523468017578,"y":444.29761695861816,"z":"8334cfbf.1dbfc","wires":[]},{"id":"a9c04e60.ef2f8","type":"set","name":"set tmp.sdnc-artifact-name","xml":"<set>\n<parameter name='tmp.sdnc-artifact-name' value='`$vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.param[$i].value`' />\n\n","comments":"","x":1383.4523468017578,"y":493.29761695861816,"z":"8334cfbf.1dbfc","wires":[]},{"id":"86fadb38.c81f38","type":"set","name":"set name-value other JsonString","xml":"<set>\n<parameter name=\"tmp.config-name-value-other-payload\" value=\"`$tmp.config-name-value-other-payload + '&quot;' + $vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.param[$i].name + '&quot;:&quot;' + $vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.param[$i].value + '&quot;,'`\"/>\n\n","comments":"","x":1399.4523468017578,"y":542.2976169586182,"z":"8334cfbf.1dbfc","wires":[]},{"id":"8245db44.d86468","type":"outcome","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1091.4523544311523,"y":542.8690376281738,"z":"8334cfbf.1dbfc","wires":[["86fadb38.c81f38"]]},{"id":"9226252e.e39d18","type":"set","name":"set configAssignment JsonString","xml":"<set>\n<parameter name=\"tmp.config-name-value-payload4\" value=\"`$tmp.config-name-value-other-payload + '&quot;service-instance-id&quot;:&quot;' + $vnf-topology-operation-input.service-information.service-instance-id   + '&quot;,'`\"/>\n<parameter name=\"tmp.config-name-value-payload5\" value=\"`$tmp.config-name-value-payload4 + '&quot;vnf-model-customization-uuid&quot;:&quot;' + $vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid + '&quot;,'`\"/>\n<parameter name=\"tmp.config-name-value-payload6\" value=\"`$tmp.config-name-value-payload5 + '&quot;vnf-id&quot;:&quot;' + $vnf-topology-operation-input.vnf-information.vnf-id + '&quot;,'`\"/>\n<parameter name=\"tmp.config-name-value-payload7\" value=\"`$tmp.config-name-value-payload6 + '&quot;aic-cloud-region&quot;:&quot;' + $vnf-topology-operation-input.vnf-request-input.aic-cloud-region + '&quot;'`\"/>\n","comments":"","x":475.0079040527344,"y":749.9920196533203,"z":"8334cfbf.1dbfc","wires":[]},{"id":"16b37854.35c298","type":"execute","name":"execute BlueprintProcessingClient","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restconfapicall.RestconfApiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value=\"`$prop.cds.url + '/api/v1/execution-service/process'`\" />\n    <parameter name='restapiUser' value='`$prop.cds.user`' />\n    <parameter name='restapiPassword' value='`$prop.cds.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='POST' />\n    <parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n    <parameter name=\"responsePrefix\" value=\"`$responsePrefix`\" />","comments":"","outputs":1,"x":477.8968048095703,"y":968.4364633560181,"z":"8334cfbf.1dbfc","wires":[["dd7f5eae.cd01d","f7ecbf9b.1b1ca"]]},{"id":"dd7f5eae.cd01d","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":717.8968048095703,"y":942.4364633560181,"z":"8334cfbf.1dbfc","wires":[["11e08758.03b3a9"]]},{"id":"11e08758.03b3a9","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error from ConfigAssignmentNode\" />\n","comments":"","x":899.8968048095703,"y":963.4364633560181,"z":"8334cfbf.1dbfc","wires":[]},{"id":"96155f36.4dee","type":"execute","name":"execute generateUUID","xml":" <execute plugin=\"org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils\" method=\"generateUUID\" > \n <parameter name=\"ctx-destination\" value=\"tmp.return.generate.vnf-se-serv-uuid\" /> \n ","comments":"","outputs":1,"x":441.9523468017578,"y":158.04761695861816,"z":"8334cfbf.1dbfc","wires":[["42941485.41dd1c"]]},{"id":"42941485.41dd1c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":653.9523468017578,"y":157.04761695861816,"z":"8334cfbf.1dbfc","wires":[["44726b34.9c6614"]]},{"id":"44726b34.9c6614","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"generateUUID is failed\" />\n","comments":"","x":829.9523468017578,"y":157.04761695861816,"z":"8334cfbf.1dbfc","wires":[]},{"id":"1f066148.408b8f","type":"switchNode","name":"switch vnf-parameters-data.param_length","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param_length`'>\n","comments":"","outputs":1,"x":510.2023468017578,"y":304.79764461517334,"z":"8334cfbf.1dbfc","wires":[["7aad0ce7.e8e6c4","35092a50.a68416"]]},{"id":"7aad0ce7.e8e6c4","type":"outcome","name":"null","xml":"<outcome value=''>","comments":"","outputs":1,"x":777.2023468017578,"y":272.79764461517334,"z":"8334cfbf.1dbfc","wires":[["5d9fd2c5.25f81c"]]},{"id":"35092a50.a68416","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":776.2023468017578,"y":336.79764461517334,"z":"8334cfbf.1dbfc","wires":[["848e04b8.ce3208"]]},{"id":"5d9fd2c5.25f81c","type":"set","name":"set pre service param len as 0","xml":"<set>\n   <parameter name='highnum' value='0' />\n   <parameter name='prehighnum' value='0'/>\n","comments":"","x":990.2023468017578,"y":272.79764461517334,"z":"8334cfbf.1dbfc","wires":[]},{"id":"848e04b8.ce3208","type":"set","name":"set pre service param len","xml":"<set>\n   <parameter name='highnum' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param_length`' />\n   <parameter name='prehighnum' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param_length`' />","comments":"","x":975.2023468017578,"y":336.79764461517334,"z":"8334cfbf.1dbfc","wires":[]},{"id":"f7ecbf9b.1b1ca","type":"failure","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":722.8968048095703,"y":1004.4364633560181,"z":"8334cfbf.1dbfc","wires":[["11e08758.03b3a9"]]},{"id":"93c98739.415188","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1190.9602699279785,"y":738.8967018127441,"z":"8334cfbf.1dbfc","wires":[["cc998536.46b198"]]},{"id":"1c416f3d.add001","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"BEFORE BlueprintProcessingClient\"/>\n\n","comments":"","outputs":1,"x":381.67456436157227,"y":894.2143058776855,"z":"8334cfbf.1dbfc","wires":[[]]},{"id":"8bd3a596.34f178","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"AFTER BlueprintProcessingClient\"/>\n\n","comments":"","outputs":1,"x":383.8968200683594,"y":1078.1031112670898,"z":"8334cfbf.1dbfc","wires":[[]]},{"id":"be4e75b8.3ec5d8","type":"set","name":"set updateJsonPayload","xml":"<set>\n<parameter name=\"tmp.json-payload\" value=\"`'{' + $tmp.config-name-value-payload7 + '}'`\" />\n<parameter name=\"`$cds + 'actionIdentifiers.blueprintName'`\" value='`$tmp.sdnc-model-name`' />\n<parameter name=\"`$cds + 'actionIdentifiers.blueprintVersion'`\" value='`$tmp.sdnc-model-version`' />\n<parameter name=\"`$cds + 'payload.resource-assignment-request.template-prefix[0]'`\" value='`$tmp.sdnc-artifact-name`' />\n<parameter name=\"`$cds + 'payload.resource-assignment-request.resource-assignment-properties'`\" value='`$tmp.json-payload`' />","comments":"","x":440.4523468017578,"y":822.2143030166626,"z":"8334cfbf.1dbfc","wires":[]},{"id":"7ff74048.c7318","type":"execute","name":"execute jsonStringToCtx","xml":"<execute plugin=\"org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils\" method=\"jsonStringToCtx\">\n\t<parameter name=\"source\" value=\"`'raAssign.payload.resource-assignment-response.meshed-template.' + $tmp.sdnc-artifact-name`\" />\n\t<parameter name=\"outputPath\" value=\"jsonContextPrefix\" />\n\t<parameter name=\"isEscaped\" value=\"false\" />\n\n","comments":"","outputs":1,"x":443.8888702392578,"y":1143.3332748413086,"z":"8334cfbf.1dbfc","wires":[[]]},{"id":"6a301448.38917c","type":"switchNode","name":"switch: jsonContextPrefix.resource-accumulator-resolved-data_length","xml":"<switch test=\"`$jsonContextPrefix.resource-accumulator-resolved-data_length`\">\n","comments":"","outputs":1,"x":601.8888854980469,"y":1233.3332777023315,"z":"8334cfbf.1dbfc","wires":[["cd8908db.761938","251a76.7423158a"]]},{"id":"cd8908db.761938","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":969.6666259765625,"y":1208.8887939453125,"z":"8334cfbf.1dbfc","wires":[["2fd0fd65.b23da2"]]},{"id":"f8ea61ad.0fe5b","type":"call","name":"Call self-serve-process-vnf-template-ra-response","xml":"<call module='GENERIC-RESOURCE-API' rpc='self-serve-process-vnf-template-ra-response' mode='sync' >\n","comments":"","outputs":1,"x":1262.6666412353516,"y":1262.7776165008545,"z":"8334cfbf.1dbfc","wires":[[]]},{"id":"2fd0fd65.b23da2","type":"call","name":"Call self-serve-process-vnf-mapping-ra-response","xml":"<call module='GENERIC-RESOURCE-API' rpc='self-serve-process-vnf-mapping-ra-response' mode='sync' >\n","comments":"","outputs":1,"x":1263.000015258789,"y":1208.8888187408447,"z":"8334cfbf.1dbfc","wires":[[]]},{"id":"251a76.7423158a","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":968.6666107177734,"y":1262.2221927642822,"z":"8334cfbf.1dbfc","wires":[["f8ea61ad.0fe5b"]]},{"id":"e7b4ac15.b3f62","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='`$pathname`' />\n","comments":"","outputs":1,"x":397.5,"y":1432.5,"z":"8334cfbf.1dbfc","wires":[[]]},{"id":"363fca1c.bf8736","type":"set","name":"set pathname","xml":"<set>\n<parameter name='pathname' \n\tvalue=\"`'/var/tmp/ss-vnf-ra-assignment-' + \n\t$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-information.vnf-id + '.log'`\" />\n","comments":"","x":402.75,"y":1379.9999980926514,"z":"8334cfbf.1dbfc","wires":[]},{"id":"5d4647a7.c772e8","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"DONE: self-serve-vnf-ra-assignment\"/>\n\n","comments":"","outputs":1,"x":378.24999618530273,"y":1329.7499980926514,"z":"8334cfbf.1dbfc","wires":[[]]}]