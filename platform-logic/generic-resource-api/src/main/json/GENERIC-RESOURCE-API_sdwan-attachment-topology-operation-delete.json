[
  {
    "id": "de2bb8e4.c4dbd8",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 89,
    "y": 38,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "4df3844d.66920c"
      ]
    ]
  },
  {
    "id": "4df3844d.66920c",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 301.00000381469727,
    "y": 110.0000171661377,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "defa06c2.08a958"
      ]
    ]
  },
  {
    "id": "defa06c2.08a958",
    "type": "method",
    "name": "sdwan-attachment-topology-operation-delete",
    "xml": "<method rpc='sdwan-attachment-topology-operation-delete' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 289.0001220703125,
    "y": 198,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "6f0fe5c1.42509c"
      ]
    ]
  },
  {
    "id": "6f0fe5c1.42509c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 305.0001220703125,
    "y": 753.0002446174622,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "d4b618b3.e243f8",
        "daa2fd1c.e15f9",
        "98a0548f.d105b8",
        "4086ba28.5e7fb4",
        "3a054970.ddb4f6",
        "6a9e6940.dc60c8",
        "1dcc043a.41212c",
        "cfbf99ba.e9ea08",
        "a788afc2.3b764",
        "9bec45ba.823fc8",
        "295f039a.2c737c",
        "2676412c.7c20ee",
        "8b527b2a.81e648",
        "e2838697.661268",
        "d9f8d014.bcccd"
      ]
    ]
  },
  {
    "id": "d4b618b3.e243f8",
    "type": "set",
    "name": "set tmp.ar.allotted-resource-id,etc",
    "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
    "comments": "",
    "x": 701.9935607910156,
    "y": 151.9934868812561,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "2548027c.9fde3e",
    "type": "comment",
    "name": "set tmp ar-id to fetch resource from MDSAL",
    "info": "",
    "comments": "",
    "x": 730.9538726806641,
    "y": 116.02528285980225,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "daa2fd1c.e15f9",
    "type": "set",
    "name": "set tmp.ar.self-link",
    "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:connection-attachment-allotted-resources/connection-attachment-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/connection-attachment-topology/'` \" />\n\n",
    "comments": "",
    "x": 655.9934997558594,
    "y": 244.99349212646484,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "3a054970.ddb4f6",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 662.2553901672363,
    "y": 332.6602210998535,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      []
    ]
  },
  {
    "id": "98a0548f.d105b8",
    "type": "execute",
    "name": "generate allotted-resource url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 694.2554168701172,
    "y": 420.66020250320435,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      []
    ]
  },
  {
    "id": "7276eff0.df0a8",
    "type": "comment",
    "name": "Used for setting output to API Handler",
    "info": "",
    "comments": "",
    "x": 709.9935302734375,
    "y": 211.993501663208,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "e3eaa523.b8fec8",
    "type": "comment",
    "name": "Obtain different URL, template location etc",
    "info": "For saving resource information to MDSAL & for AAI",
    "comments": "",
    "x": 727.9934959411621,
    "y": 297.8823823928833,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "94cc654b.383a58",
    "type": "comment",
    "name": "Used to Get AR by id to MDSAL, same as self-link",
    "info": "",
    "comments": "",
    "x": 753.9935150146484,
    "y": 384.8823413848877,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "860c0bbd.079788",
    "type": "comment",
    "name": "GET parent-service-data from mdsal to check existence of other End point",
    "info": "",
    "comments": "",
    "x": 821.0003280639648,
    "y": 839.5316228866577,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "1bc8c1a0.e4996e",
    "type": "for",
    "name": "for pidx..mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[]",
    "xml": "<for index='pidx' start='0' end='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1649.1849365234375,
    "y": 1073.00425863266,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "389840a4.f6186"
      ]
    ]
  },
  {
    "id": "4086ba28.5e7fb4",
    "type": "switchNode",
    "name": "switch mdsal-psd.service-data.provided-allotted-resources_length",
    "xml": "<switch test='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 800.1842956542969,
    "y": 1079.718041419983,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "6019a57.13f705c",
        "4a21aa00.3b1ac8"
      ]
    ]
  },
  {
    "id": "30a78dd9.3c8b22",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1250.4544582366943,
    "y": 1119.7015271186829,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "1bc8c1a0.e4996e",
        "e9fadefb.0c149"
      ]
    ]
  },
  {
    "id": "389840a4.f6186",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$pidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2099.296142578125,
    "y": 1071.0041165351868,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "87f0a9d.62cd658"
      ]
    ]
  },
  {
    "id": "6a9e6940.dc60c8",
    "type": "set",
    "name": "set tmp.ar.parent-service-instance-id",
    "xml": "<set>\n<parameter name='tmp.ar.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n\n",
    "comments": "",
    "x": 711.9687118530273,
    "y": 875.0000677108765,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "9c6dc3c.897554",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1091.968994140625,
    "y": 953.0001826286316,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "1e4f6a7c.485c96"
      ]
    ]
  },
  {
    "id": "f96c62b7.b194",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1083.8207969665527,
    "y": 988.066267490387,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "ecfe720a.b902e"
      ]
    ]
  },
  {
    "id": "ecfe720a.b902e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 1258.969482421875,
    "y": 984.3336176872253,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "1e4f6a7c.485c96",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1242.968994140625,
    "y": 951.0001826286316,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      []
    ]
  },
  {
    "id": "5fa2362a.75f678",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 945.7307624816895,
    "y": 1268.952815413475,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "3cb41c0b.eae2b4"
      ]
    ]
  },
  {
    "id": "3cb41c0b.eae2b4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments": "",
    "x": 1112.2546424865723,
    "y": 1280.57188642025,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "144dae97.c82161",
    "type": "failure",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 952.8260498046875,
    "y": 1301.7147830724716,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "3cb41c0b.eae2b4"
      ]
    ]
  },
  {
    "id": "2d8a7679.e4417a",
    "type": "comment",
    "name": "TODO: Rework after confirmation from AAI",
    "info": "",
    "comments": "",
    "x": 1077.1374282836914,
    "y": 1219.8732151985168,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "1dcc043a.41212c",
    "type": "set",
    "name": "set output to api handler",
    "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='connection-attachment-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $connection-attachment-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments": "",
    "x": 678.5461502075195,
    "y": 1232.8276824951172,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "cfbf99ba.e9ea08",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 647.9592666625977,
    "y": 1339.4435625076294,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "a788afc2.3b764",
    "type": "execute",
    "name": "execute RestApiCallNode - PUT AR by id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='Delete' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 727.6666641235352,
    "y": 509.3333625793457,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "694caf54.7b798",
        "ae592dd1.c9cc1",
        "f4c65729.068fc8"
      ]
    ]
  },
  {
    "id": "694caf54.7b798",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 967.3081665039062,
    "y": 549.6649107933044,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "cccfb0fc.4d54b"
      ]
    ]
  },
  {
    "id": "ae592dd1.c9cc1",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 964.3081665039062,
    "y": 506.16490840911865,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "cccfb0fc.4d54b"
      ]
    ]
  },
  {
    "id": "f4c65729.068fc8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 971.0582466125488,
    "y": 465.5220036506653,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "f5848024.451b6"
      ]
    ]
  },
  {
    "id": "cccfb0fc.4d54b",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
    "comments": "",
    "x": 1123.058334350586,
    "y": 527.9149088859558,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "f5848024.451b6",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1108.7141780853271,
    "y": 465.7141833305359,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      []
    ]
  },
  {
    "id": "ace0db7.0de1828",
    "type": "comment",
    "name": "Delete Allotted Resource",
    "info": "",
    "comments": "",
    "x": 675.0000457763672,
    "y": 478.0000286102295,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "8845d317.b4499",
    "type": "for",
    "name": "for cidx..service-data.consumed-allotted-resources.consumed-allotted-resource[]",
    "xml": "<for index='cidx' start='0' end='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1625.00390625,
    "y": 715.00390625,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "f7e8e6c4.e21498"
      ]
    ]
  },
  {
    "id": "9bec45ba.823fc8",
    "type": "switchNode",
    "name": "switch service-data.consumed-allotted-resources_length",
    "xml": "<switch test='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 778.0032920837402,
    "y": 675.71790766716,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "105cf808.d9fc58",
        "5f964ad4.a47694"
      ]
    ]
  },
  {
    "id": "105cf808.d9fc58",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1102.1461563110352,
    "y": 658.5753421783447,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "c721eaa0.d90778"
      ]
    ]
  },
  {
    "id": "5f964ad4.a47694",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1088.1461791992188,
    "y": 721.5753309726715,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "d487336b.5c21"
      ]
    ]
  },
  {
    "id": "d487336b.5c21",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1248.2732696533203,
    "y": 719.7013075351715,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "8845d317.b4499",
        "2a5719f4.0daa06"
      ]
    ]
  },
  {
    "id": "295f039a.2c737c",
    "type": "set",
    "name": "set consumed allotted resources for deletion",
    "xml": "<set>\n<parameter name=\"service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].\" value=\"\" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource_length' value='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length - 1`' />\n\n",
    "comments": "",
    "x": 734.8606262207031,
    "y": 746.28955078125,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "f7e8e6c4.e21498",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2063.1155166625977,
    "y": 711.0040283203125,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "129a19f.57049e6"
      ]
    ]
  },
  {
    "id": "129a19f.57049e6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2258.925338745117,
    "y": 710.4683527946472,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "e64da982.d670b8"
      ]
    ]
  },
  {
    "id": "a61544d0.afeca8",
    "type": "set",
    "name": "set tmp.cidx",
    "xml": "<set>\n<parameter name='tmp.cidx' value='`$cidx`' />\n",
    "comments": "",
    "x": 2574.2618713378906,
    "y": 711.2246108055115,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "77efab9.9957c54",
    "type": "comment",
    "name": "Delete consumed service consumed-allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 789.0045623779297,
    "y": 608.0038724095793,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "78d83bc7.d44d54",
    "type": "comment",
    "name": "This set resource will be deleted in MDSAL by provider code",
    "info": "",
    "comments": "",
    "x": 779.337345123291,
    "y": 712.781964302063,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "a9f71f74.85a1",
    "type": "comment",
    "name": "Obtain the index of conusumed AR",
    "info": "",
    "comments": "",
    "x": 701.7817535400391,
    "y": 639.8927326202393,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "c721eaa0.d90778",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Resource to be deleted doesn't exist in MDSAL.\" />\n",
    "comments": "",
    "x": 1264.00390625,
    "y": 659.00390625,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "e64da982.d670b8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2408.003936767578,
    "y": 711.2539558410645,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "a61544d0.afeca8"
      ]
    ]
  },
  {
    "id": "15284a02.c01676",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"resource to be deleted is not available in mdsal\" />\n",
    "comments": "",
    "x": 1718.25390625,
    "y": 768.25390625,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "3056effb.bf63e",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1580.75390625,
    "y": 768.25390625,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "15284a02.c01676"
      ]
    ]
  },
  {
    "id": "2a5719f4.0daa06",
    "type": "switchNode",
    "name": "switch tmp.cidx ",
    "xml": "<switch test=\"`$tmp.cidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1426.75390625,
    "y": 768.25390625,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "3056effb.bf63e"
      ]
    ]
  },
  {
    "id": "7516e2f4.527d0c",
    "type": "comment",
    "name": "Delete provided service provided-allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 775.5039215087891,
    "y": 804.00390625,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "4a21aa00.3b1ac8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1103.5041770935059,
    "y": 1118.7540984153748,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "30a78dd9.3c8b22"
      ]
    ]
  },
  {
    "id": "6019a57.13f705c",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1120.5040969848633,
    "y": 1030.7539324760437,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "949446a8.12d2b8"
      ]
    ]
  },
  {
    "id": "949446a8.12d2b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Resource to be deleted doesn't exist in MDSAL.\" />\n",
    "comments": "",
    "x": 1284.3616943359375,
    "y": 1031.1824774742126,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "f670e307.a2a7a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"resource to be deleted is not available in mdsal\" />\n",
    "comments": "",
    "x": 1715.7539501190186,
    "y": 1148.753936290741,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "66a217ce.0565f8",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1578.2539501190186,
    "y": 1148.753936290741,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "f670e307.a2a7a"
      ]
    ]
  },
  {
    "id": "e9fadefb.0c149",
    "type": "switchNode",
    "name": "switch tmp.pidx ",
    "xml": "<switch test=\"`$tmp.pidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1424.2539501190186,
    "y": 1148.753936290741,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "66a217ce.0565f8"
      ]
    ]
  },
  {
    "id": "87f0a9d.62cd658",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2288.504367828369,
    "y": 1068.7540946006775,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "9a3770db.667c5"
      ]
    ]
  },
  {
    "id": "30ce9227.a6174e",
    "type": "set",
    "name": "set tmp.pidx",
    "xml": "<set>\n<parameter name='tmp.pidx' value='`$pidx`' />\n",
    "comments": "",
    "x": 2356.8404846191406,
    "y": 1203.5101914405823,
    "z": "5256b6fe.7fc0a8",
    "wires": []
  },
  {
    "id": "9a3770db.667c5",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2348.582820892334,
    "y": 1139.539580821991,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "30ce9227.a6174e"
      ]
    ]
  },
  {
    "id": "d9f8d014.bcccd",
    "type": "update",
    "name": "update AAI allotted-resource",
    "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource='allotted-resource'  \n\t\tkey=\"customer.global-customer-id = $connection-attachment-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $connection-attachment-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\">\n",
    "comments": "",
    "outputs": 1,
    "x": 691.2227554321289,
    "y": 1288.754346370697,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "5fa2362a.75f678",
        "144dae97.c82161"
      ]
    ]
  },
  {
    "id": "8b527b2a.81e648",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource parent service data",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-psd`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-psd\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 781.3334197998047,
    "y": 974.333366394043,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      [
        "9c6dc3c.897554",
        "f96c62b7.b194"
      ]
    ]
  },
  {
    "id": "2676412c.7c20ee",
    "type": "execute",
    "name": "get parent-service-data tmp.ar-url-psd",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-psd\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.parent-service-instance-id`\"/>",
    "comments": "",
    "outputs": 1,
    "x": 715.3333587646484,
    "y": 932.3332056999207,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      []
    ]
  },
  {
    "id": "e2838697.661268",
    "type": "execute",
    "name": "execute RestApiCallNode - delete-resource parent service data",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value=\"`$prop.controller.url + $tmp.ar-url-psd + '/provided-allotted-resources/provided-allotted-resource/' + $tmp.ar.allotted-resource-id`\" />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='DELETE' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-psd-delete\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 797.00390625,
    "y": 1179.00390625,
    "z": "5256b6fe.7fc0a8",
    "wires": [
      []
    ]
  }
]
