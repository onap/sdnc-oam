[{"id":"48d7038a.89fa6c","type":"dgstart","name":"DGSTART","outputs":1,"x":98.33332824707031,"y":81.66666412353516,"z":"ebe2868a.85eee8","wires":[["821f927a.f956f"]]},{"id":"821f927a.f956f","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":210.7618865966797,"y":121.90477466583252,"z":"ebe2868a.85eee8","wires":[["f54d568d.4df778"]]},{"id":"f54d568d.4df778","type":"method","name":"method service-topology-operation-assign","xml":"<method rpc='service-topology-operation-assign' mode='sync'>\n","comments":"","outputs":1,"x":198.47623443603516,"y":161.66666221618652,"z":"ebe2868a.85eee8","wires":[["b4c70111.26fd7"]]},{"id":"30d39e8f.d388b2","type":"comment","name":"service-topology-operation-assign","info":"","comments":"","x":492.67818450927734,"y":29.253007888793945,"z":"ebe2868a.85eee8","wires":[]},{"id":"b4c70111.26fd7","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":215.1904525756836,"y":752.4286098480225,"z":"ebe2868a.85eee8","wires":[["1bbbcd4e.edbd53","4178d17e.f80d1","82451742.a65738","cf9e49d9.5b29e8","3c979684.03ab2a","5e16b29c.f2ec6c","15eab240.68e6de","3b07b638.c82b0a","efb95a00.74c4b8","9d88bb51.187fd8"]]},{"id":"1bbbcd4e.edbd53","type":"switchNode","name":"switch request-action","xml":"<switch test='`$service-topology-operation-input.request-information.request-action`'>\n","comments":"","outputs":1,"x":497.5714416503906,"y":263.38095569610596,"z":"ebe2868a.85eee8","wires":[["af594697.953af8","4dbe5995.686188"]]},{"id":"af594697.953af8","type":"outcome","name":"CreateServiceInstance","xml":"<outcome value='CreateServiceInstance'>\n","comments":"","outputs":1,"x":734.7142562866211,"y":237.66666412353516,"z":"ebe2868a.85eee8","wires":[["9a984e80.8224d"]]},{"id":"4dbe5995.686188","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":684.7142791748047,"y":281.7143030166626,"z":"ebe2868a.85eee8","wires":[["2127913d.c931de"]]},{"id":"9a984e80.8224d","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":913.2857131958008,"y":237.66669940948486,"z":"ebe2868a.85eee8","wires":[[]]},{"id":"2127913d.c931de","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'assign' then request-action must be 'CreateServiceInstance'\" />\n","comments":"","x":892.0952262878418,"y":281.7143144607544,"z":"ebe2868a.85eee8","wires":[]},{"id":"4178d17e.f80d1","type":"get-resource","name":"get-resource SERVICE_MODEL","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from SERVICE_MODEL WHERE service_uuid = $service-topology-operation-input.service-information.onap-model-information.model-uuid'\n  pfx='db.service-model'>\n\n","comments":"","outputs":1,"x":534.1189575195312,"y":486.4762439727783,"z":"ebe2868a.85eee8","wires":[["d2d99a22.cad358","4f6a3bf6.18eea4"]]},{"id":"a476bcf3.f840c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No model found for service UUID ' + $service-topology-operation-input.service-information.onap-model-information.model-uuid`\" />\n","comments":"","x":924.1189079284668,"y":509.9047431945801,"z":"ebe2868a.85eee8","wires":[]},{"id":"82451742.a65738","type":"switchNode","name":"switch input service-instance-name","xml":"<switch test='`$service-topology-operation-input.service-request-input.service-instance-name`'>\n","comments":"","outputs":1,"x":530.0951309204102,"y":885.6428337097168,"z":"ebe2868a.85eee8","wires":[["3af1c941.ecd6e6","f722dda8.bee11"]]},{"id":"3af1c941.ecd6e6","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":764.1187896728516,"y":698.1428155899048,"z":"ebe2868a.85eee8","wires":[["71a4277c.6ca058"]]},{"id":"8c034d58.afc52","type":"switchNode","name":"switch ecomp-naming","xml":"<switch test='`$db.service-model.ecomp-naming`'>\n","comments":"","outputs":1,"x":1141.9763107299805,"y":600.5239019393921,"z":"ebe2868a.85eee8","wires":[["31db353b.a6c6aa","2702477f.8a86c8","d9c0071c.74ef28"]]},{"id":"71a4277c.6ca058","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":909.8332901000977,"y":698.1429328918457,"z":"ebe2868a.85eee8","wires":[["8c034d58.afc52","d1369b1.c587768"]]},{"id":"2702477f.8a86c8","type":"outcome","name":"N","xml":"<outcome value='N'>","comments":"","outputs":1,"x":1328.404697418213,"y":601.0000286102295,"z":"ebe2868a.85eee8","wires":[["d34de23f.273bd"]]},{"id":"d34de23f.273bd","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"No service-instance-name was received but ecomp-naming is not Y\" />\n","comments":"","x":1482.6904830932617,"y":619.5714731216431,"z":"ebe2868a.85eee8","wires":[]},{"id":"31db353b.a6c6aa","type":"outcome","name":"Y","xml":"<outcome value='Y'>","comments":"","outputs":1,"x":1328.4046897888184,"y":559.5714826583862,"z":"ebe2868a.85eee8","wires":[["b85f4be3.a655f8"]]},{"id":"d9c0071c.74ef28","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1328.4046363830566,"y":643.8571605682373,"z":"ebe2868a.85eee8","wires":[["d34de23f.273bd"]]},{"id":"b85f4be3.a655f8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1465.547607421875,"y":559.7143497467041,"z":"ebe2868a.85eee8","wires":[[]]},{"id":"f722dda8.bee11","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":746.6904945373535,"y":1094.4285430908203,"z":"ebe2868a.85eee8","wires":[["34ba3c40.2762b4"]]},{"id":"b5f5bce5.efe6f","type":"set","name":"set tmp.service-instance-name","xml":"<set>\n<parameter name='tmp.service-instance-name' value=\"`$service-topology-operation-input.service-request-input.service-instance-name`\" />\n","comments":"","x":1699.833351135254,"y":1143.2857637405396,"z":"ebe2868a.85eee8","wires":[]},{"id":"cf9e49d9.5b29e8","type":"update","name":"update AAI service instance","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"service-instance\" \n\t\tkey=\"customer.global-customer-id = $service-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $service-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $service-topology-operation-input.service-information.service-instance-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"service-instance-name\" value=\"`$tmp.service-instance-name`\" />\n\t<parameter name=\"selflink\" value=\"`$service-object-path`\" />\n","comments":"","outputs":1,"x":508.6429138183594,"y":1350.6190338134766,"z":"ebe2868a.85eee8","wires":[["d0222796.822478","947675a0.058ae8"]]},{"id":"d0222796.822478","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":720.4047813415527,"y":1325.8571882247925,"z":"ebe2868a.85eee8","wires":[["f540264c.07c8a8"]]},{"id":"bbe08f80.8031","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Failure calling AAI to update the service instance\" />\n","comments":"","x":1067.5475769042969,"y":1324.428689956665,"z":"ebe2868a.85eee8","wires":[]},{"id":"efb95a00.74c4b8","type":"set","name":"set service-level-oper-status to Created","xml":"<set>\n<parameter name='service-data.service-level-oper-status.order-status' value='Created' />\n<parameter name='service-data.service-level-oper-status.last-rpc-action' value='assign' />\n<parameter name='service-data.service-level-oper-status.last-action' value='CreateServiceInstance' />\n","comments":"","x":542.5000076293945,"y":1632.166540145874,"z":"ebe2868a.85eee8","wires":[]},{"id":"3b07b638.c82b0a","type":"set","name":"set service-object-path","xml":"<set>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $service-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n","comments":"","x":494.5950698852539,"y":1186.571291923523,"z":"ebe2868a.85eee8","wires":[]},{"id":"a0e38671.0ee498","type":"switchNode","name":"switch order-status","xml":"<switch test='`$service-data.service-level-oper-status.order-status`'>\n","comments":"","outputs":1,"x":490.71423721313477,"y":374.3334274291992,"z":"ebe2868a.85eee8","wires":[["5f238609.cb2698","b1e821c3.fff61","8b68e1fe.49372"]]},{"id":"5f238609.cb2698","type":"outcome","name":"Created","xml":"<outcome value='Created'>\n","comments":"","outputs":1,"x":686.6666870117188,"y":374.0000238418579,"z":"ebe2868a.85eee8","wires":[["592e7d47.60d174"]]},{"id":"592e7d47.60d174","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"The requested service already exists\" />\n","comments":"","x":888.8095169067383,"y":373.5715579986572,"z":"ebe2868a.85eee8","wires":[]},{"id":"3c979684.03ab2a","type":"set","name":"set service-topology identifiers","xml":"<set>\n<parameter name='service-data.service-topology.service-topology-identifier.service-instance-id'\n  value='`$service-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='service-data.service-topology.service-topology-identifier.service-type'\n  value='`$service-topology-operation-input.service-information.subscription-service-type`' />\n<parameter name='service-data.service-topology.service-topology-identifier.service-instance-name'\n  value='`$tmp.service-instance-name`' />\n<parameter name='service-data.service-topology.service-topology-identifier.global-customer-id'\n  value='`$service-topology-operation-input.service-information.global-customer-id`' />\n","comments":"","x":515.6191291809082,"y":1443.2379140853882,"z":"ebe2868a.85eee8","wires":[]},{"id":"2677ae59.acd1b2","type":"for","name":"for each service-input-parameters","xml":"<for index='idx' start='0' end='`$service-topology-operation-input.service-request-input.service-input-parameters.param_length`' >\n","comments":"","outputs":1,"x":948.2856636047363,"y":1589.9049215316772,"z":"ebe2868a.85eee8","wires":[["12ccc853.423468"]]},{"id":"12ccc853.423468","type":"set","name":"set parameter name/value","xml":"<set>\n<parameter name='service-data.service-topology.service-parameters[$idx].service-parameter-name'\n  value='`$service-topology-operation-input.service-request-input.service-input-parameters.param[$idx].name`' />\n<parameter name='service-data.service-topology.service-parameters[$idx].service-parameter-value'\n  value='`$service-topology-operation-input.service-request-input.service-input-parameters.param[$idx].value`' />\n","comments":"","x":1229.714126586914,"y":1589.9048681259155,"z":"ebe2868a.85eee8","wires":[]},{"id":"5e16b29c.f2ec6c","type":"switchNode","name":"switch input parameter length","xml":"<switch test='`$service-topology-operation-input.service-request-input.service-input-parameters.param_length`'>\n","comments":"","outputs":1,"x":513.0952377319336,"y":1562.285641670227,"z":"ebe2868a.85eee8","wires":[["b9b15c97.16bb5","57702727.6373f8"]]},{"id":"b9b15c97.16bb5","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":725.9998168945312,"y":1538.4762754440308,"z":"ebe2868a.85eee8","wires":[["e514c906.f7d1e8"]]},{"id":"e514c906.f7d1e8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":864.5712089538574,"y":1538.476258277893,"z":"ebe2868a.85eee8","wires":[[]]},{"id":"57702727.6373f8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":724.5712280273438,"y":1589.9048643112183,"z":"ebe2868a.85eee8","wires":[["2677ae59.acd1b2"]]},{"id":"15eab240.68e6de","type":"set","name":"set service-topology onap-model-information","xml":"<set>\n<parameter name='service-data.service-topology.onap-model-information.'\n  value='`$service-topology-operation-input.service-information.onap-model-information.`' />\n","comments":"","x":558.4762496948242,"y":1491.8093242645264,"z":"ebe2868a.85eee8","wires":[]},{"id":"947675a0.058ae8","type":"failure","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":726.7142105102539,"y":1374.4286060333252,"z":"ebe2868a.85eee8","wires":[["4a03445e.27b53c"]]},{"id":"3da7d74d.b454f8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"The service instance does not exist in AAI\" />\n","comments":"","x":1065.7617378234863,"y":1372.904920578003,"z":"ebe2868a.85eee8","wires":[]},{"id":"1d844ee1.34f781","type":"call","name":"call GENERIC-RESOURCE-API:generate-unique-name","xml":"<call module='GENERIC-RESOURCE-API' rpc='generate-unique-name' mode='sync' >\n","comments":"","outputs":1,"x":1800.3808898925781,"y":749.5714020729065,"z":"ebe2868a.85eee8","wires":[["cd3579c9.2e2df8","7e0fe584.530c6c"]]},{"id":"cd3579c9.2e2df8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2077.523693084717,"y":723.1429352760315,"z":"ebe2868a.85eee8","wires":[["7cfc5fa4.12d2c"]]},{"id":"7e0fe584.530c6c","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2082.2854385375977,"y":768.5238461494446,"z":"ebe2868a.85eee8","wires":[["210c1a12.0179d6"]]},{"id":"972ca6c6.f6a738","type":"set","name":"set variables for generating unique name","xml":"<set>\n<parameter name='generate-unique-name-input.action' value='ASSIGN' />\n<parameter name='generate-unique-name-input.context-id' value='`$service-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='generate-unique-name-input.index-table-name' value='SERVICE_INSTANCE_NAME_INDEX' />\n<parameter name='generate-unique-name-input.index-table-prefix-column' value='service_instance_name_prefix' />\n<parameter name='generate-unique-name-input.name-table-type' value='SERVICE_INSTANCE' />\n<parameter name='generate-unique-name-input.prefix' value=\"`$db.service-model.service-instance-name-prefix + '_'`\" />\n","comments":"","x":1755.3811416625977,"y":700.6667218208313,"z":"ebe2868a.85eee8","wires":[]},{"id":"210c1a12.0179d6","type":"set","name":"set tmp.service-instance-name to generated name","xml":"<set>\n<parameter name='tmp.service-instance-name' value='`$generate-unique-name-output.generated-name`' />\n","comments":"","x":2349.1898345947266,"y":768.9999213218689,"z":"ebe2868a.85eee8","wires":[]},{"id":"7cfc5fa4.12d2c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`$generate-unique-name-output.error-message`\" />\n","comments":"","x":2231.0951538085938,"y":722.5714449882507,"z":"ebe2868a.85eee8","wires":[]},{"id":"34ba3c40.2762b4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":894.6190223693848,"y":1093.095230102539,"z":"ebe2868a.85eee8","wires":[["9765eea9.7d266","aa6ace31.cbe73"]]},{"id":"aa6ace31.cbe73","type":"call","name":"call GENERIC-RESOURCE-API:generate-unique-name","xml":"<call module='GENERIC-RESOURCE-API' rpc='generate-unique-name' mode='sync' >\n","comments":"","outputs":1,"x":1194.6191101074219,"y":1117.7618789672852,"z":"ebe2868a.85eee8","wires":[["b7fb4481.878e28","9f7950b2.7e5e5"]]},{"id":"b7fb4481.878e28","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1476.0475807189941,"y":1092.5238637924194,"z":"ebe2868a.85eee8","wires":[["7fc1e719.7af628"]]},{"id":"9f7950b2.7e5e5","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1479.09521484375,"y":1144.190673828125,"z":"ebe2868a.85eee8","wires":[["b5f5bce5.efe6f"]]},{"id":"9765eea9.7d266","type":"set","name":"set variables for generating unique name","xml":"<set>\n<parameter name='generate-unique-name-input.name-table-type' value='SERVICE_INSTANCE' />\n<parameter name='generate-unique-name-input.supplied-name' value='`$service-topology-operation-input.service-request-input.service-instance-name`' />\n","comments":"","x":1152.9524841308594,"y":1069.4285850524902,"z":"ebe2868a.85eee8","wires":[]},{"id":"7fc1e719.7af628","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`$generate-unique-name-output.error-message`\" />\n","comments":"","x":1643.9046936035156,"y":1091.9523754119873,"z":"ebe2868a.85eee8","wires":[]},{"id":"d2d99a22.cad358","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":750.6189422607422,"y":466.4285583496094,"z":"ebe2868a.85eee8","wires":[["250281ba.ad450e"]]},{"id":"4f6a3bf6.18eea4","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":759.190372467041,"y":509.71427154541016,"z":"ebe2868a.85eee8","wires":[["a476bcf3.f840c"]]},{"id":"250281ba.ad450e","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading SERVICE_MODEL table\" />\n","comments":"","x":923.4761085510254,"y":465.00000190734863,"z":"ebe2868a.85eee8","wires":[]},{"id":"b1e821c3.fff61","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":684.6666107177734,"y":329.333345413208,"z":"ebe2868a.85eee8","wires":[["241a1eaf.f84722"]]},{"id":"8b68e1fe.49372","type":"other","name":"PendingDelete","xml":"<outcome value='PendingDelete'>\n","comments":"","outputs":1,"x":707.3333396911621,"y":418.00000381469727,"z":"ebe2868a.85eee8","wires":[["2ba8aea0.61ef72"]]},{"id":"2ba8aea0.61ef72","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"The requested service is pending deletion\" />\n","comments":"","x":889.6666374206543,"y":418.00001430511475,"z":"ebe2868a.85eee8","wires":[]},{"id":"241a1eaf.f84722","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":871.3333206176758,"y":328.33336448669434,"z":"ebe2868a.85eee8","wires":[[]]},{"id":"d1369b1.c587768","type":"switchNode","name":"switch naming-policy","xml":"<switch test='`$db.service-model.naming-policy`'>\n","comments":"","outputs":1,"x":1141.1903610229492,"y":795.9523792266846,"z":"ebe2868a.85eee8","wires":[["b05283b4.d77c8","e6ad7e36.240e"]]},{"id":"b05283b4.d77c8","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1329.7618255615234,"y":730.238073348999,"z":"ebe2868a.85eee8","wires":[["6e33da8d.29b254"]]},{"id":"e6ad7e36.240e","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1329.7619953155518,"y":861.6667251586914,"z":"ebe2868a.85eee8","wires":[["32bd4b8d.890d24"]]},{"id":"9d88bb51.187fd8","type":"set","name":"set tmp.service-instance-name to NULL","xml":"<set>\n<parameter name='tmp.service-instance-name' value='' />\n","comments":"","x":554.0476226806641,"y":597.3809223175049,"z":"ebe2868a.85eee8","wires":[]},{"id":"6e33da8d.29b254","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1482.6190948486328,"y":728.8095397949219,"z":"ebe2868a.85eee8","wires":[["972ca6c6.f6a738","1d844ee1.34f781"]]},{"id":"e0265226.af816","type":"call","name":"call GENERIC-RESOURCE-API:naming-policy-generate-name","xml":"<call module='GENERIC-RESOURCE-API' rpc='naming-policy-generate-name' mode='sync' >\n","comments":"","outputs":1,"x":1818.3336029052734,"y":901.6668066978455,"z":"ebe2868a.85eee8","wires":[["b1f21349.e89a2","abf0d275.5d5d7"]]},{"id":"32bd4b8d.890d24","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1482.6191177368164,"y":861.6667423248291,"z":"ebe2868a.85eee8","wires":[["daa02d3c.1bde5","e0265226.af816","7298a83a.1d0fe8"]]},{"id":"daa02d3c.1bde5","type":"set","name":"set variables for generating name","xml":"<set>\n<parameter name='naming-policy-generate-name-input.policy-instance-name' value='`$db.service-model.naming-policy`' />\n<parameter name='naming-policy-generate-name-input.naming-type' value='SERVICE' />\n<parameter name='naming-policy-generate-name-input.context-id' value='`$service-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='naming-policy-generate-name-input.query-parameter' value='`$db.service-model.service-uuid`' />\n<parameter name='naming-policy-generate-name-input.action' value='ASSIGN' />\n","comments":"","x":1728.3335189819336,"y":855.9524607658386,"z":"ebe2868a.85eee8","wires":[]},{"id":"15e76921.f8bad7","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Unable to generate service name\" />\n","comments":"","x":2276.904594966343,"y":877.5237165178571,"z":"ebe2868a.85eee8","wires":[]},{"id":"a2f31308.70f7e","type":"set","name":"set tmp.service-instance-name to generated name","xml":"<set>\n<parameter name='tmp.service-instance-name' value='`$naming-policy-generate-name-output.service-name`' />\n","comments":"","x":2392.761957168579,"y":924.6665439605713,"z":"ebe2868a.85eee8","wires":[]},{"id":"7298a83a.1d0fe8","type":"set","name":"set generated-via-policy to true","xml":"<set>\n<parameter name='generated-via-policy' value='true' />\n","comments":"","x":1719.7621002197266,"y":810.2381148338318,"z":"ebe2868a.85eee8","wires":[]},{"id":"941dbd7.75af94","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1072.6190948486328,"y":1256.523838043213,"z":"ebe2868a.85eee8","wires":[["d60970c6.ad39b","bfa2c057.12d04"]]},{"id":"bfa2c057.12d04","type":"call","name":"call GENERIC-RESOURCE-API:naming-policy-generate-name","xml":"<call module='GENERIC-RESOURCE-API' rpc='naming-policy-generate-name' mode='sync' >\n","comments":"","outputs":1,"x":1396.904800415039,"y":1283.0953693389893,"z":"ebe2868a.85eee8","wires":[[]]},{"id":"d60970c6.ad39b","type":"set","name":"set variables for deleting name","xml":"<set>\n<parameter name='naming-policy-generate-name-input.naming-type' value='SERVICE' />\n<parameter name='naming-policy-generate-name-input.context-id' value='`$service-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='naming-policy-generate-name-input.action' value='DELETE' />\n","comments":"","x":1298.3334197998047,"y":1235.9524402618408,"z":"ebe2868a.85eee8","wires":[]},{"id":"f540264c.07c8a8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":879.7619094848633,"y":1325.95237159729,"z":"ebe2868a.85eee8","wires":[["bbe08f80.8031","941dbd7.75af94"]]},{"id":"4a03445e.27b53c","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":878.3333206176758,"y":1374.523754119873,"z":"ebe2868a.85eee8","wires":[["3da7d74d.b454f8","941dbd7.75af94"]]},{"id":"b1f21349.e89a2","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2122.142961502075,"y":924.9999656677246,"z":"ebe2868a.85eee8","wires":[["a2f31308.70f7e"]]},{"id":"abf0d275.5d5d7","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2119.2854347229004,"y":877.4285659790039,"z":"ebe2868a.85eee8","wires":[["15e76921.f8bad7"]]},{"id":"652bca2b.d4b364","type":"comment","name":"check removed with US622450","info":"","comments":"","x":369.99999999999994,"y":326.66666666666663,"z":"ebe2868a.85eee8","wires":[]}]