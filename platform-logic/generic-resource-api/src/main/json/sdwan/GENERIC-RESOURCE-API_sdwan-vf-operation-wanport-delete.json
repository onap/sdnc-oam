[
    {
        "id": "4c9b7636.16d1a8",
        "type": "method",
        "name": "method sdwan-vf-operation-wanport-delete",
        "xml": "<method rpc='sdwan-vf-operation-wanport-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 227.01040649414062,
        "y": 192.58634161949158,
        "z": "fa825249.678d7",
        "wires": [
            [
                "ef9a78fa.b0f5b8"
            ]
        ]
    },
    {
        "id": "ae863831.900868",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 215.29611206054688,
        "y": 98.23810935020447,
        "z": "fa825249.678d7",
        "wires": [
            [
                "4c9b7636.16d1a8"
            ]
        ]
    },
    {
        "id": "3c4c41bd.66b0ee",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 136.01040649414062,
        "y": 35.99999976158142,
        "z": "fa825249.678d7",
        "wires": [
            [
                "ae863831.900868"
            ]
        ]
    },
    {
        "id": "ef9a78fa.b0f5b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 246.67710876464844,
        "y": 459.66673517227173,
        "z": "fa825249.678d7",
        "wires": [
            [
                "73502c25.0501b4",
                "8ef64cba.b142",
                "e7c6e1f4.291c4",
                "5b7d49e0.41f2f8",
                "8b01c2d1.84cd3",
                "27503470.8bf84c",
                "dce00f39.1d9f7",
                "9d21b2cd.86c73",
                "827a72ac.9aabf",
                "67cd24d6.a0f83c",
                "a35824b0.8bb6e8"
            ]
        ]
    },
    {
        "id": "8ef64cba.b142",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 559.0417709350586,
        "y": 272.269140958786,
        "z": "fa825249.678d7",
        "wires": [
            [
                "11c14e91.a941a1"
            ]
        ]
    },
    {
        "id": "73502c25.0501b4",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 564.010425567627,
        "y": 211.0000102519989,
        "z": "fa825249.678d7",
        "wires": [
            [
                "45acbb70.cf9d84"
            ]
        ]
    },
    {
        "id": "45acbb70.cf9d84",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 744.0104064941406,
        "y": 209.99999976158142,
        "z": "fa825249.678d7",
        "wires": [
            [
                "1c305856.7d7878"
            ]
        ]
    },
    {
        "id": "1c305856.7d7878",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 893.4391326904297,
        "y": 211.14291739463806,
        "z": "fa825249.678d7",
        "wires": []
    },
    {
        "id": "11c14e91.a941a1",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`\">    \n",
        "comments": "",
        "outputs": 1,
        "x": 782.0104217529297,
        "y": 273.0000059604645,
        "z": "fa825249.678d7",
        "wires": [
            [
                "4a09a290.a75bbc"
            ]
        ]
    },
    {
        "id": "4a09a290.a75bbc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 997.0104064941406,
        "y": 270.9999997615814,
        "z": "fa825249.678d7",
        "wires": [
            [
                "57c73c18.c834a4"
            ]
        ]
    },
    {
        "id": "57c73c18.c834a4",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1161.0104064941406,
        "y": 265.9999997615814,
        "z": "fa825249.678d7",
        "wires": []
    },
    {
        "id": "e7c6e1f4.291c4",
        "type": "switchNode",
        "name": "switch vf-modules.vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 630.010440826416,
        "y": 349.00002455711365,
        "z": "fa825249.678d7",
        "wires": [
            [
                "8cdd0772.dbdbf8",
                "d22fa0c4.8a1a8",
                "b6f26649.6b92a8"
            ]
        ]
    },
    {
        "id": "d22fa0c4.8a1a8",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 852.0104331970215,
        "y": 383.0000340938568,
        "z": "fa825249.678d7",
        "wires": [
            [
                "1ebe6a81.7b0665"
            ]
        ]
    },
    {
        "id": "8cdd0772.dbdbf8",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 857.0104293823242,
        "y": 330.0000331401825,
        "z": "fa825249.678d7",
        "wires": [
            [
                "1ebe6a81.7b0665"
            ]
        ]
    },
    {
        "id": "1ebe6a81.7b0665",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1015.0104331970215,
        "y": 343.0000340938568,
        "z": "fa825249.678d7",
        "wires": []
    },
    {
        "id": "b6f26649.6b92a8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 852.0104331970215,
        "y": 444.0000340938568,
        "z": "fa825249.678d7",
        "wires": [
            [
                "5d0462e8.482a9c"
            ]
        ]
    },
    {
        "id": "98248461.3994b8",
        "type": "set",
        "name": "set vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-length' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n\n",
        "comments": "",
        "x": 1206.0104484558105,
        "y": 442.0000480413437,
        "z": "fa825249.678d7",
        "wires": []
    },
    {
        "id": "5d0462e8.482a9c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1013.0104789733887,
        "y": 441.00002551078796,
        "z": "fa825249.678d7",
        "wires": [
            [
                "98248461.3994b8",
                "bb5716e5.5eb1d8"
            ]
        ]
    },
    {
        "id": "bb5716e5.5eb1d8",
        "type": "for",
        "name": "for each existing vf-index",
        "xml": "<for index='idx' start='0' end='`$vf-module-length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1225.0104179382324,
        "y": 495.00002455711365,
        "z": "fa825249.678d7",
        "wires": [
            [
                "56d74cea.fe48b4"
            ]
        ]
    },
    {
        "id": "56d74cea.fe48b4",
        "type": "switchNode",
        "name": "switch vf-module-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1468.0104331970215,
        "y": 490.0000340938568,
        "z": "fa825249.678d7",
        "wires": [
            [
                "2f21e786.1474c8"
            ]
        ]
    },
    {
        "id": "2f21e786.1474c8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1709.0105609893799,
        "y": 483.00003123283386,
        "z": "fa825249.678d7",
        "wires": [
            [
                "935557d5.b42b38"
            ]
        ]
    },
    {
        "id": "935557d5.b42b38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1861.0105323791504,
        "y": 485.00002455711365,
        "z": "fa825249.678d7",
        "wires": [
            [
                "b801dc09.3262a",
                "fd33c1ac.d18c2",
                "49806a1a.1b29c4"
            ]
        ]
    },
    {
        "id": "b801dc09.3262a",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$idx`' />\n<parameter name='ctx.vf-module-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.`' />\n",
        "comments": "",
        "x": 2083.0105323791504,
        "y": 481.00002455711365,
        "z": "fa825249.678d7",
        "wires": []
    },
    {
        "id": "fd33c1ac.d18c2",
        "type": "set",
        "name": "set vf-module-request-input.",
        "xml": "<set>\n<parameter name='vf-module-request-input.' value='`$ctx.vf-module-data.vf-module-request-input.`' />\n\n",
        "comments": "",
        "x": 2089.0105323791504,
        "y": 530.0000245571136,
        "z": "fa825249.678d7",
        "wires": []
    },
    {
        "id": "49806a1a.1b29c4",
        "type": "call",
        "name": "call sdwan-get-vf-module-device-param",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-vf-module-device-param' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2117.010753631592,
        "y": 578.0000302791595,
        "z": "fa825249.678d7",
        "wires": [
            []
        ]
    },
    {
        "id": "5b7d49e0.41f2f8",
        "type": "switchNode",
        "name": "switch tmp.vidx ",
        "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 569.0416526794434,
        "y": 522.0161073207855,
        "z": "fa825249.678d7",
        "wires": [
            [
                "93788503.77e6c8"
            ]
        ]
    },
    {
        "id": "93788503.77e6c8",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 716.4702949523926,
        "y": 521.5875174999237,
        "z": "fa825249.678d7",
        "wires": [
            [
                "70fed172.85f44"
            ]
        ]
    },
    {
        "id": "70fed172.85f44",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 865.8990211486816,
        "y": 522.7304351329803,
        "z": "fa825249.678d7",
        "wires": []
    },
    {
        "id": "8b01c2d1.84cd3",
        "type": "switchNode",
        "name": "switch vf-module-oper-status",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.order-status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 613.3398132324219,
        "y": 592.3333127498627,
        "z": "fa825249.678d7",
        "wires": [
            [
                "223c17b4.64b778",
                "e9d52081.e76dc"
            ]
        ]
    },
    {
        "id": "223c17b4.64b778",
        "type": "outcome",
        "name": "outcome PendingDelete",
        "xml": "<outcome value='PendingDelete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 904.1730804443359,
        "y": 596.4444358348846,
        "z": "fa825249.678d7",
        "wires": [
            [
                "814b2c34.1fd7f"
            ]
        ]
    },
    {
        "id": "e9d52081.e76dc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 871.1732177734375,
        "y": 648.4444885253906,
        "z": "fa825249.678d7",
        "wires": [
            [
                "714ed175.ddb84"
            ]
        ]
    },
    {
        "id": "714ed175.ddb84",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
        "comments": "",
        "x": 1030.6729850769043,
        "y": 651.4444875717163,
        "z": "fa825249.678d7",
        "wires": []
    },
    {
        "id": "814b2c34.1fd7f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1101.4794807434082,
        "y": 606.769590139389,
        "z": "fa825249.678d7",
        "wires": [
            []
        ]
    },
    {
        "id": "67cd24d6.a0f83c",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 562.031307220459,
        "y": 966.0313129425049,
        "z": "fa825249.678d7",
        "wires": []
    },
    {
        "id": "27503470.8bf84c",
        "type": "for",
        "name": "for lidx..service-data.vf-modules.vf-module[]",
        "xml": "<for index='lidx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 644.1178894042969,
        "y": 712.1424579620361,
        "z": "fa825249.678d7",
        "wires": [
            [
                "666e6c4f.f97484"
            ]
        ]
    },
    {
        "id": "dce00f39.1d9f7",
        "type": "set",
        "name": "set new vnf length",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length\" value='`$prop.vnfidxLen`'/>\n\n\t\n",
        "comments": "",
        "x": 568.2192611694336,
        "y": 764.9466757774353,
        "z": "fa825249.678d7",
        "wires": []
    },
    {
        "id": "9d21b2cd.86c73",
        "type": "set",
        "name": "Remove vnf from ServiceData",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$prop.vnfidxLen].\" value=\"\"/>\n",
        "comments": "",
        "x": 605.1179351806641,
        "y": 815.1424608230591,
        "z": "fa825249.678d7",
        "wires": []
    },
    {
        "id": "666e6c4f.f97484",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 904.1178798675537,
        "y": 719.1423177719116,
        "z": "fa825249.678d7",
        "wires": [
            [
                "46998b08.18a904"
            ]
        ]
    },
    {
        "id": "a35824b0.8bb6e8",
        "type": "delete",
        "name": "delete wanport vf instance configuration in AAI",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource='site-resource' \n        key='site-resource.site-resource-id = $vf-module-topology-operation-input.vf-module-information.vf-module-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 654.1183090209961,
        "y": 906.4041156768799,
        "z": "fa825249.678d7",
        "wires": [
            []
        ]
    },
    {
        "id": "46998b08.18a904",
        "type": "switchNode",
        "name": "switch vnf-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$lidx].vf-module-data.vf-module-information.vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1090.1179466247559,
        "y": 719.1424784660339,
        "z": "fa825249.678d7",
        "wires": [
            [
                "52431b6f.b34934"
            ]
        ]
    },
    {
        "id": "52431b6f.b34934",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1259.1179542541504,
        "y": 718.142315864563,
        "z": "fa825249.678d7",
        "wires": [
            [
                "2b619a80.4a9f36"
            ]
        ]
    },
    {
        "id": "2b619a80.4a9f36",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1413.117793083191,
        "y": 710.1423168182373,
        "z": "fa825249.678d7",
        "wires": [
            [
                "466caa7f.55c334",
                "921821fe.9836b"
            ]
        ]
    },
    {
        "id": "466caa7f.55c334",
        "type": "set",
        "name": "set  vnf data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$prop.vnfidxLen].vnf-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[lidx].vf-module-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$prop.vnfidxLen].vnf-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[lidx].vf-module-data.`' />\n",
        "comments": "",
        "x": 1578.1178884506226,
        "y": 685.1424722671509,
        "z": "fa825249.678d7",
        "wires": []
    },
    {
        "id": "921821fe.9836b",
        "type": "set",
        "name": "set prop.vnfNewidx",
        "xml": "<set>\n<parameter name='prop.vnfidxLen' value='`$prop.vnfidxLen + 1`' />\n",
        "comments": "",
        "x": 1600.1178884506226,
        "y": 741.1424360275269,
        "z": "fa825249.678d7",
        "wires": []
    },
    {
        "id": "827a72ac.9aabf",
        "type": "set",
        "name": "set vf-module-object-path",
        "xml": "<set>\n<parameter name='vf-module-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $vf-module-topology-operation-input.vf-module-information.vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology/'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n",
        "comments": "",
        "x": 591.9201431274414,
        "y": 860.4757957458496,
        "z": "fa825249.678d7",
        "wires": []
    }
]