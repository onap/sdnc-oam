[
  {
    "id": "b8581db5.dbca7",
    "type": "get-resource",
    "name": "get-resource service-subscription",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"service-subscription\" \n        key= 'service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type \n        AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id'\n      force=\"true\" pfx=\"tmp.AnAI-data-tenant\">\n      \n",
    "comments": "",
    "outputs": 1,
    "x": 597,
    "y": 418.09522092342377,
    "z": "a703782b.2992b8",
    "wires": [
      [
        "1a771e75.f79d12",
        "ac62029.181ce"
      ]
    ]
  },
  {
    "id": "5d45ba87.92c374",
    "type": "switchNode",
    "name": "switch temp-ub-sub-account-id",
    "xml": "<switch test='`$tmp.AnAI-data-tenant.temp-ub-sub-account-id`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1009.0000915527344,
    "y": 382.84530198574066,
    "z": "a703782b.2992b8",
    "wires": [
      [
        "5358b5db.d1e49c",
        "28c300d9.7fa36"
      ]
    ]
  },
  {
    "id": "5358b5db.d1e49c",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>",
    "comments": "",
    "outputs": 1,
    "x": 1201.714542388916,
    "y": 356.84534299373627,
    "z": "a703782b.2992b8",
    "wires": [
      [
        "831b80bb.e08e8"
      ]
    ]
  },
  {
    "id": "28c300d9.7fa36",
    "type": "other",
    "name": "Other",
    "xml": "<outcome value='Other'>",
    "comments": "",
    "outputs": 1,
    "x": 1202.0001068115234,
    "y": 411.8453058004379,
    "z": "a703782b.2992b8",
    "wires": [
      [
        "e1a74ece.52f65"
      ]
    ]
  },
  {
    "id": "1a771e75.f79d12",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 807.4998626708984,
    "y": 390.84127938747406,
    "z": "a703782b.2992b8",
    "wires": [
      [
        "5d45ba87.92c374"
      ]
    ]
  },
  {
    "id": "ac62029.181ce",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 801.1784515380859,
    "y": 443.0555909872055,
    "z": "a703782b.2992b8",
    "wires": [
      [
        "f81e2009.7dbd5"
      ]
    ]
  },
  {
    "id": "f81e2009.7dbd5",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
    "comments": "",
    "x": 953.9284515380859,
    "y": 442.80565202236176,
    "z": "a703782b.2992b8",
    "wires": []
  },
  {
    "id": "4bd31b43.411d14",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 177,
    "y": 145.23810708522797,
    "z": "a703782b.2992b8",
    "wires": [
      [
        "d79d2c6f.11854"
      ]
    ]
  },
  {
    "id": "c863bd10.503ce",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 97.71429443359375,
    "y": 82.99999749660492,
    "z": "a703782b.2992b8",
    "wires": [
      [
        "4bd31b43.411d14"
      ]
    ]
  },
  {
    "id": "5dc11f37.9dd37",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 330.95240020751953,
    "y": 381.8095315694809,
    "z": "a703782b.2992b8",
    "wires": [
      [
        "b8581db5.dbca7",
        "c8c0bf77.157a7"
      ]
    ]
  },
  {
    "id": "d79d2c6f.11854",
    "type": "method",
    "name": "method sdwan-get-tenant-auth",
    "xml": "<method rpc='sdwan-get-tenant-auth' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 188.71429443359375,
    "y": 239.58633935451508,
    "z": "a703782b.2992b8",
    "wires": [
      [
        "5dc11f37.9dd37"
      ]
    ]
  },
  {
    "id": "e1a74ece.52f65",
    "type": "set",
    "name": "set prop.tenant-id",
    "xml": "<set>\n<parameter name='prop.tenant-id' value='`$tmp.AnAI-data-tenant.temp-ub-sub-account-id`' />\n",
    "comments": "",
    "x": 1379.857177734375,
    "y": 410.9523614645004,
    "z": "a703782b.2992b8",
    "wires": []
  },
  {
    "id": "c8c0bf77.157a7",
    "type": "execute",
    "name": "execute RestApiCallNode Create tenant auth",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/baseservice/tenants/authorization/' + $prop.tenant-id`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"tenant-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 624.5000305175781,
    "y": 520.9880307912827,
    "z": "a703782b.2992b8",
    "wires": [
      []
    ]
  },
  {
    "id": "831b80bb.e08e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
    "comments": "",
    "x": 1384.1427841186523,
    "y": 356.6666520833969,
    "z": "a703782b.2992b8",
    "wires": []
  }
]
