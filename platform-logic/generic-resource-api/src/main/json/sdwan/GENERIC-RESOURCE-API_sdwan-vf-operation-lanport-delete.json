[
    {
        "id": "a54d86da.b0b4c8",
        "type": "method",
        "name": "method sdwan-vf-operation-lanport-delete",
        "xml": "<method rpc='sdwan-vf-operation-lanport-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 234.00000762939453,
        "y": 230.00012350082397,
        "z": "1f04287d.306418",
        "wires": [
            [
                "4d4d77e8.c38938"
            ]
        ]
    },
    {
        "id": "db831233.33e69",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 222.28571319580078,
        "y": 130.65188121795654,
        "z": "1f04287d.306418",
        "wires": [
            [
                "a54d86da.b0b4c8"
            ]
        ]
    },
    {
        "id": "62c65238.af2cac",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 143.00000762939453,
        "y": 68.4137716293335,
        "z": "1f04287d.306418",
        "wires": [
            [
                "db831233.33e69"
            ]
        ]
    },
    {
        "id": "4d4d77e8.c38938",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 250.66670989990234,
        "y": 459.080491065979,
        "z": "1f04287d.306418",
        "wires": [
            [
                "26d66719.d43da8",
                "e7e6cf90.f4145",
                "2040df5d.c513d",
                "58084a37.394334",
                "8cf55d8b.9b86e",
                "6f98bfc7.8211a",
                "b57e1a43.a54548",
                "9d1a9cea.dd56",
                "49881624.abb0c8",
                "c5683ab4.530598",
                "d5b959e7.7e0cc8",
                "d3e08866.ee2d18"
            ]
        ]
    },
    {
        "id": "e7e6cf90.f4145",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 566.0313720703125,
        "y": 304.6829128265381,
        "z": "1f04287d.306418",
        "wires": [
            [
                "7275fe1.35167"
            ]
        ]
    },
    {
        "id": "26d66719.d43da8",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 571.0000267028809,
        "y": 243.41378211975098,
        "z": "1f04287d.306418",
        "wires": [
            [
                "4f7f751d.4ffa8c"
            ]
        ]
    },
    {
        "id": "4f7f751d.4ffa8c",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 751.0000076293945,
        "y": 242.4137716293335,
        "z": "1f04287d.306418",
        "wires": [
            [
                "b8464fa4.268c7"
            ]
        ]
    },
    {
        "id": "b8464fa4.268c7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 900.4287338256836,
        "y": 243.55668926239014,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "7275fe1.35167",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`\">    \n",
        "comments": "",
        "outputs": 1,
        "x": 789.0000228881836,
        "y": 305.41377782821655,
        "z": "1f04287d.306418",
        "wires": [
            [
                "2f21af21.529ff"
            ]
        ]
    },
    {
        "id": "2f21af21.529ff",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1004.0000076293945,
        "y": 303.4137716293335,
        "z": "1f04287d.306418",
        "wires": [
            [
                "a1139d12.89e01"
            ]
        ]
    },
    {
        "id": "a1139d12.89e01",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1168.0000076293945,
        "y": 298.4137716293335,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "2040df5d.c513d",
        "type": "switchNode",
        "name": "switch vf-modules.vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 637.0000419616699,
        "y": 381.4137964248657,
        "z": "1f04287d.306418",
        "wires": [
            [
                "6da138cf.958678",
                "2a607157.3c86fe",
                "9b455cd1.ad8b9"
            ]
        ]
    },
    {
        "id": "2a607157.3c86fe",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 859.0000343322754,
        "y": 415.4138059616089,
        "z": "1f04287d.306418",
        "wires": [
            [
                "9e4075b3.63ff28"
            ]
        ]
    },
    {
        "id": "6da138cf.958678",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 864.0000305175781,
        "y": 362.41380500793457,
        "z": "1f04287d.306418",
        "wires": [
            [
                "9e4075b3.63ff28"
            ]
        ]
    },
    {
        "id": "9e4075b3.63ff28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1022.0000343322754,
        "y": 375.4138059616089,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "9b455cd1.ad8b9",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 859.0000343322754,
        "y": 476.4138059616089,
        "z": "1f04287d.306418",
        "wires": [
            [
                "76d683a5.eebfec"
            ]
        ]
    },
    {
        "id": "3f214675.09ba1a",
        "type": "set",
        "name": "set vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-length' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n\n",
        "comments": "",
        "x": 1213.0000495910645,
        "y": 474.41381990909576,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "76d683a5.eebfec",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1020.0000801086426,
        "y": 473.41379737854004,
        "z": "1f04287d.306418",
        "wires": [
            [
                "3f214675.09ba1a",
                "42fcda16.d37964"
            ]
        ]
    },
    {
        "id": "42fcda16.d37964",
        "type": "for",
        "name": "for each existing vf-index",
        "xml": "<for index='idx' start='0' end='`$vf-module-length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1232.0000190734863,
        "y": 527.4137964248657,
        "z": "1f04287d.306418",
        "wires": [
            [
                "9de7c553.fd25f8"
            ]
        ]
    },
    {
        "id": "9de7c553.fd25f8",
        "type": "switchNode",
        "name": "switch vf-module-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1503.0000381469727,
        "y": 528.4138336181641,
        "z": "1f04287d.306418",
        "wires": [
            [
                "f61f0e52.12de6"
            ]
        ]
    },
    {
        "id": "f61f0e52.12de6",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1716.0001621246338,
        "y": 515.4138031005859,
        "z": "1f04287d.306418",
        "wires": [
            [
                "cf9e9748.fd3478"
            ]
        ]
    },
    {
        "id": "cf9e9748.fd3478",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1868.0001335144043,
        "y": 517.4137964248657,
        "z": "1f04287d.306418",
        "wires": [
            [
                "1f23fa4e.25db46",
                "5446fb0a.a3b5a4",
                "71d1f1bd.544fb"
            ]
        ]
    },
    {
        "id": "1f23fa4e.25db46",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$idx`' />\n<parameter name='ctx.vf-module-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.`' />\n",
        "comments": "",
        "x": 2090.0001335144043,
        "y": 513.4137964248657,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "5446fb0a.a3b5a4",
        "type": "set",
        "name": "set vf-module-request-input.",
        "xml": "<set>\n<parameter name='vf-module-request-input.' value='`$ctx.vf-module-data.vf-module-request-input.`' />\n\n",
        "comments": "",
        "x": 2096.0001335144043,
        "y": 562.4137964248657,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "71d1f1bd.544fb",
        "type": "call",
        "name": "call sdwan-get-vf-module-lan-param",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-vf-module-lan-param' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2124.0003547668457,
        "y": 610.4138021469116,
        "z": "1f04287d.306418",
        "wires": [
            []
        ]
    },
    {
        "id": "58084a37.394334",
        "type": "switchNode",
        "name": "switch tmp.vidx ",
        "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 576.0312538146973,
        "y": 554.4298791885376,
        "z": "1f04287d.306418",
        "wires": [
            [
                "a8fd4f02.a0c39"
            ]
        ]
    },
    {
        "id": "a8fd4f02.a0c39",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 723.4598960876465,
        "y": 554.0012893676758,
        "z": "1f04287d.306418",
        "wires": [
            [
                "e19c0822.f14e78"
            ]
        ]
    },
    {
        "id": "e19c0822.f14e78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 872.8886222839355,
        "y": 555.1442070007324,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "8cf55d8b.9b86e",
        "type": "switchNode",
        "name": "switch vf-module-oper-status",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.order-status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 620.3294143676758,
        "y": 624.7470846176147,
        "z": "1f04287d.306418",
        "wires": [
            [
                "56dc0c78.140284",
                "7bad1343.8cb25c"
            ]
        ]
    },
    {
        "id": "56dc0c78.140284",
        "type": "outcome",
        "name": "outcome PendingDelete",
        "xml": "<outcome value='PendingDelete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 911.1626815795898,
        "y": 628.8582077026367,
        "z": "1f04287d.306418",
        "wires": [
            [
                "27edf28.129770e"
            ]
        ]
    },
    {
        "id": "7bad1343.8cb25c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 878.1628189086914,
        "y": 680.8582603931427,
        "z": "1f04287d.306418",
        "wires": [
            [
                "ea590f8e.65b32"
            ]
        ]
    },
    {
        "id": "ea590f8e.65b32",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
        "comments": "",
        "x": 1037.6625862121582,
        "y": 683.8582594394684,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "27edf28.129770e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1108.469081878662,
        "y": 639.1833620071411,
        "z": "1f04287d.306418",
        "wires": [
            []
        ]
    },
    {
        "id": "9d1a9cea.dd56",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 591.4406318664551,
        "y": 1071.635935306549,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "c5683ab4.530598",
        "type": "set",
        "name": "set prop.vnfNewidx",
        "xml": "<set>\n<parameter name='prop.vnfidxLen' value='`0`' />\n",
        "comments": "",
        "x": 598.5272789001465,
        "y": 695.7472534179688,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "49881624.abb0c8",
        "type": "for",
        "name": "for lidx..service-data.vf-modules.vf-module[]",
        "xml": "<for index='lidx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 674.5271987915039,
        "y": 749.7471284866333,
        "z": "1f04287d.306418",
        "wires": [
            [
                "3538a71e.fcff88"
            ]
        ]
    },
    {
        "id": "6f98bfc7.8211a",
        "type": "set",
        "name": "set new vnf length",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length\" value='`$prop.vnfidxLen`'/>\n\n\t\n",
        "comments": "",
        "x": 598.6285705566406,
        "y": 802.5513463020325,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "d5b959e7.7e0cc8",
        "type": "set",
        "name": "Remove vnf from ServiceData",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$prop.vnfidxLen].\" value=\"\"/>\n",
        "comments": "",
        "x": 639.5272369384766,
        "y": 849.7472591400146,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "3538a71e.fcff88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 934.5271892547607,
        "y": 756.7469882965088,
        "z": "1f04287d.306418",
        "wires": [
            [
                "10631fee.66247"
            ]
        ]
    },
    {
        "id": "d3e08866.ee2d18",
        "type": "delete",
        "name": "delete lanport vf instance configuration in AAI",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource='lan-port-config' \n        key='site-resource.site-resource-id = $vf-module-topology-operation-input.vf-module-information.vf-module-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 673.5276069641113,
        "y": 1019.008641242981,
        "z": "1f04287d.306418",
        "wires": [
            []
        ]
    },
    {
        "id": "10631fee.66247",
        "type": "switchNode",
        "name": "switch vnf-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$lidx].vf-module-data.vf-module-information.vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1120.527256011963,
        "y": 756.7471489906311,
        "z": "1f04287d.306418",
        "wires": [
            [
                "5f2f4339.fa3b9c"
            ]
        ]
    },
    {
        "id": "5f2f4339.fa3b9c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1289.5272636413574,
        "y": 755.7469863891602,
        "z": "1f04287d.306418",
        "wires": [
            [
                "282bbccf.a76394"
            ]
        ]
    },
    {
        "id": "282bbccf.a76394",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1443.527102470398,
        "y": 747.7469873428345,
        "z": "1f04287d.306418",
        "wires": [
            [
                "15dd9ec6.9cd7d1",
                "810eaf7a.70186"
            ]
        ]
    },
    {
        "id": "15dd9ec6.9cd7d1",
        "type": "set",
        "name": "set  vnf data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$prop.vnfidxLen].vnf-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[lidx].vf-module-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$prop.vnfidxLen].vnf-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[lidx].vf-module-data.`' />\n",
        "comments": "",
        "x": 1608.5271978378296,
        "y": 722.747142791748,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "810eaf7a.70186",
        "type": "set",
        "name": "set prop.vnfNewidx",
        "xml": "<set>\n<parameter name='prop.vnfidxLen' value='`$prop.vnfidxLen + 1`' />\n",
        "comments": "",
        "x": 1630.5271978378296,
        "y": 778.747106552124,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "b57e1a43.a54548",
        "type": "set",
        "name": "set vf-module-object-path",
        "xml": "<set>\n<parameter name='vf-module-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $vf-module-topology-operation-input.vf-module-information.vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology/'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n",
        "comments": "",
        "x": 615.3294677734375,
        "y": 966.0804300308228,
        "z": "1f04287d.306418",
        "wires": []
    },
    {
        "id": "eeeb55b5.4909d8",
        "type": "set",
        "name": "Remove vnf from ServiceData",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].\" value=\"\"/>\n",
        "comments": "",
        "x": 629.3333129882812,
        "y": 900,
        "z": "1f04287d.306418",
        "wires": []
    }
]