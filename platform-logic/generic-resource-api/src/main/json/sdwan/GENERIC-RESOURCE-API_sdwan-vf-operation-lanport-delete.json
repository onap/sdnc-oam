[
    {
        "id": "5b377527.318dfc",
        "type": "method",
        "name": "method sdwan-vf-operation-lanport-delete",
        "xml": "<method rpc='sdwan-vf-operation-lanport-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 289.00390625,
        "y": 239.5863505601883,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "b6ef6d6.088219"
            ]
        ]
    },
    {
        "id": "5fa9c4d6.4ec86c",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 277.28961181640625,
        "y": 140.23810827732086,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "5b377527.318dfc"
            ]
        ]
    },
    {
        "id": "3e4efa76.6244b6",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 198.00390625,
        "y": 77.99999868869781,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "5fa9c4d6.4ec86c"
            ]
        ]
    },
    {
        "id": "b6ef6d6.088219",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 305.6706085205078,
        "y": 468.6667181253433,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "71f387b9.003178",
                "a6a43527.61a1e8",
                "4d09affd.63ec7",
                "158609f4.fc8936",
                "7132f9a1.7bd008",
                "379a2e2e.3a8382",
                "6e5f86e6.881a38",
                "13d12ad9.b40a25",
                "50901066.93c6f",
                "71b32013.3584b",
                "c59a5d45.5b06a",
                "4315ff0e.d57d4",
                "cd89e451.16b298"
            ]
        ]
    },
    {
        "id": "a6a43527.61a1e8",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 640.0352554321289,
        "y": 249.26914072036743,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "5c4cd934.c95538"
            ]
        ]
    },
    {
        "id": "71f387b9.003178",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 645.0039100646973,
        "y": 188.00001001358032,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "ec17d276.93fee"
            ]
        ]
    },
    {
        "id": "ec17d276.93fee",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 825.0038909912109,
        "y": 186.99999952316284,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "2a49b970.30fb16"
            ]
        ]
    },
    {
        "id": "2a49b970.30fb16",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 974.4326171875,
        "y": 188.14291715621948,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "5c4cd934.c95538",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`\">    \n",
        "comments": "",
        "outputs": 1,
        "x": 863.00390625,
        "y": 250.0000057220459,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "2a4d20b9.66aac"
            ]
        ]
    },
    {
        "id": "2a4d20b9.66aac",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1078.003890991211,
        "y": 247.99999952316284,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "991cadde.a1c2"
            ]
        ]
    },
    {
        "id": "991cadde.a1c2",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1242.003890991211,
        "y": 242.99999952316284,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "4d09affd.63ec7",
        "type": "switchNode",
        "name": "switch vf-modules.vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 692.0039405822754,
        "y": 391.00002348423004,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "7db8009f.80aa9",
                "7fce8758.381048",
                "58a4a3cc.ac1abc"
            ]
        ]
    },
    {
        "id": "7fce8758.381048",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 914.0039329528809,
        "y": 425.0000330209732,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "c31ea383.0d2c3"
            ]
        ]
    },
    {
        "id": "7db8009f.80aa9",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 919.0039291381836,
        "y": 372.0000320672989,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "c31ea383.0d2c3"
            ]
        ]
    },
    {
        "id": "c31ea383.0d2c3",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1077.0039329528809,
        "y": 385.0000330209732,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "58a4a3cc.ac1abc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 914.0039329528809,
        "y": 486.0000330209732,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "d3465076.36c57"
            ]
        ]
    },
    {
        "id": "b0e78257.0ab82",
        "type": "set",
        "name": "set vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-length' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n\n",
        "comments": "",
        "x": 1268.00394821167,
        "y": 484.0000469684601,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "d3465076.36c57",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1075.003978729248,
        "y": 483.00002443790436,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "b0e78257.0ab82",
                "d9692dd.614b9d"
            ]
        ]
    },
    {
        "id": "d9692dd.614b9d",
        "type": "for",
        "name": "for each existing vf-index",
        "xml": "<for index='idx' start='0' end='`$vf-module-length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1287.0039176940918,
        "y": 537.00002348423,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "45a4bb37.a28924"
            ]
        ]
    },
    {
        "id": "45a4bb37.a28924",
        "type": "switchNode",
        "name": "switch vf-module-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1558.0039367675781,
        "y": 538.0000606775284,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "a0aa45d1.8fe618"
            ]
        ]
    },
    {
        "id": "a0aa45d1.8fe618",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1771.0040607452393,
        "y": 525.0000301599503,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "e8f5881c.0d1318"
            ]
        ]
    },
    {
        "id": "e8f5881c.0d1318",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1923.0040321350098,
        "y": 527.00002348423,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "f7c8637f.374ce",
                "c9be57ad.3da878",
                "26312e31.67daa2"
            ]
        ]
    },
    {
        "id": "f7c8637f.374ce",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$idx`' />\n<parameter name='ctx.vf-module-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.`' />\n",
        "comments": "",
        "x": 2145.0040321350098,
        "y": 523.00002348423,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "c9be57ad.3da878",
        "type": "set",
        "name": "set vf-module-request-input.",
        "xml": "<set>\n<parameter name='vf-module-request-input.' value='`$ctx.vf-module-data.vf-module-request-input.`' />\n\n",
        "comments": "",
        "x": 2151.0040321350098,
        "y": 572.00002348423,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "26312e31.67daa2",
        "type": "call",
        "name": "call sdwan-get-vf-module-lan-param",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-vf-module-lan-param' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2179.004253387451,
        "y": 620.0000292062759,
        "z": "6e499246.1345bc",
        "wires": [
            []
        ]
    },
    {
        "id": "158609f4.fc8936",
        "type": "switchNode",
        "name": "switch tmp.vidx ",
        "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 631.0351524353027,
        "y": 564.0161062479019,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "cbb03bf0.425b98"
            ]
        ]
    },
    {
        "id": "cbb03bf0.425b98",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 778.463794708252,
        "y": 563.5875164270401,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "6af4136a.19a86c"
            ]
        ]
    },
    {
        "id": "6af4136a.19a86c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 927.892520904541,
        "y": 564.7304340600967,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "7132f9a1.7bd008",
        "type": "switchNode",
        "name": "switch vf-module-oper-status",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.order-status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 675.3333129882812,
        "y": 634.3333116769791,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "32ea7a53.265046",
                "d6d3b52a.3f5ab8"
            ]
        ]
    },
    {
        "id": "32ea7a53.265046",
        "type": "outcome",
        "name": "outcome PendingDelete",
        "xml": "<outcome value='PendingDelete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 966.1665802001953,
        "y": 638.444434762001,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "6b31ad53.5727b4"
            ]
        ]
    },
    {
        "id": "d6d3b52a.3f5ab8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 933.1667175292969,
        "y": 690.444487452507,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "148355e2.614e0a"
            ]
        ]
    },
    {
        "id": "148355e2.614e0a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
        "comments": "",
        "x": 1092.6664848327637,
        "y": 693.4444864988327,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "6b31ad53.5727b4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1163.4729804992676,
        "y": 648.7695890665054,
        "z": "6e499246.1345bc",
        "wires": [
            []
        ]
    },
    {
        "id": "13d12ad9.b40a25",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 646.4445304870605,
        "y": 1081.2221623659134,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "71b32013.3584b",
        "type": "set",
        "name": "set prop.vnfNewidx",
        "xml": "<set>\n<parameter name='prop.vnfidxLen' value='`0`' />\n",
        "comments": "",
        "x": 653.531177520752,
        "y": 705.3334804773331,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "50901066.93c6f",
        "type": "for",
        "name": "for lidx..service-data.vf-modules.vf-module[]",
        "xml": "<for index='lidx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 729.5310974121094,
        "y": 759.3333555459976,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "18389e8.0583e62"
            ]
        ]
    },
    {
        "id": "379a2e2e.3a8382",
        "type": "set",
        "name": "set new vnf length",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length\" value='`$prop.vnfidxLen`'/>\n\n\t\n",
        "comments": "",
        "x": 653.6324691772461,
        "y": 812.1375733613968,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "c59a5d45.5b06a",
        "type": "set",
        "name": "Remove vnf from ServiceData",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$prop.vnfidxLen].\" value=\"\"/>\n",
        "comments": "",
        "x": 694.531135559082,
        "y": 859.333486199379,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "18389e8.0583e62",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 989.5310878753662,
        "y": 766.3332153558731,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "a366647e.22aaf8"
            ]
        ]
    },
    {
        "id": "4315ff0e.d57d4",
        "type": "delete",
        "name": "delete lanport vf instance configuration in AAI",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource='lan-port-config' \n        key='lan-port-config.lan-port-config-id = $vf-module-topology-operation-input.vf-module-information.vf-module-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 728.5315055847168,
        "y": 1028.5948683023453,
        "z": "6e499246.1345bc",
        "wires": [
            []
        ]
    },
    {
        "id": "a366647e.22aaf8",
        "type": "switchNode",
        "name": "switch vnf-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$lidx].vf-module-data.vf-module-information.vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1175.5311546325684,
        "y": 766.3333760499954,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "c7c20dda.52c1b"
            ]
        ]
    },
    {
        "id": "c7c20dda.52c1b",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1344.531162261963,
        "y": 765.3332134485245,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "72fa222d.49f9ac"
            ]
        ]
    },
    {
        "id": "72fa222d.49f9ac",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1498.5310010910034,
        "y": 757.3332144021988,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "ed2c94b0.3c96e8",
                "f18820dc.cc2b"
            ]
        ]
    },
    {
        "id": "ed2c94b0.3c96e8",
        "type": "set",
        "name": "set  vnf data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$prop.vnfidxLen].vnf-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[lidx].vf-module-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$prop.vnfidxLen].vnf-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[lidx].vf-module-data.`' />\n",
        "comments": "",
        "x": 1663.531096458435,
        "y": 732.3333698511124,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "f18820dc.cc2b",
        "type": "set",
        "name": "set prop.vnfNewidx",
        "xml": "<set>\n<parameter name='prop.vnfidxLen' value='`$prop.vnfidxLen + 1`' />\n",
        "comments": "",
        "x": 1685.531096458435,
        "y": 788.3333336114883,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "6e5f86e6.881a38",
        "type": "set",
        "name": "set vf-module-object-path",
        "xml": "<set>\n<parameter name='vf-module-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $vf-module-topology-operation-input.vf-module-information.vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology/'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n",
        "comments": "",
        "x": 670.333366394043,
        "y": 975.6666570901871,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "8ba40e29.5c2bb",
        "type": "set",
        "name": "Remove vnf from ServiceData",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].\" value=\"\"/>\n",
        "comments": "",
        "x": 684.3372116088867,
        "y": 909.5862270593643,
        "z": "6e499246.1345bc",
        "wires": []
    },
    {
        "id": "cd89e451.16b298",
        "type": "switchNode",
        "name": "switch vnf-index",
        "xml": "<switch test='`$vnf-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 649.00390625,
        "y": 314.00390625,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "ccd2db16.3151b8"
            ]
        ]
    },
    {
        "id": "ccd2db16.3151b8",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 811.0039520263672,
        "y": 313.0039052963257,
        "z": "6e499246.1345bc",
        "wires": [
            [
                "2eb95e60.9609a2"
            ]
        ]
    },
    {
        "id": "2eb95e60.9609a2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf id not found in service-data\" />\n",
        "comments": "",
        "x": 960.2540435791016,
        "y": 310.78178310394287,
        "z": "6e499246.1345bc",
        "wires": []
    }
]