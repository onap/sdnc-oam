[
    {
        "id": "3eaead5d.8a50e2",
        "type": "method",
        "name": "method sdwan-vf-operation-lanport-deactivate",
        "xml": "<method rpc='sdwan-vf-operation-lanport-deactivate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 252,
        "y": 208,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "de2de50e.7db098"
            ]
        ]
    },
    {
        "id": "ba6ca55d.d04268",
        "type": "switchNode",
        "name": "switch vf-modules.vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 634.0000076293945,
        "y": 359.4136486053467,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "96bd0da6.6b228",
                "d7d04d79.b116e",
                "bcfd0c5e.e6103"
            ]
        ]
    },
    {
        "id": "996651b.9ec83b",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 171.00000381469727,
        "y": 50.413658142089844,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "509643c7.891eac"
            ]
        ]
    },
    {
        "id": "509643c7.891eac",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 240.28570556640625,
        "y": 113.65176773071289,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "3eaead5d.8a50e2"
            ]
        ]
    },
    {
        "id": "de2de50e.7db098",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 252.6666717529297,
        "y": 464.08036708831787,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "cd5d97be.4098b8",
                "cc768085.ce4bc",
                "ba6ca55d.d04268",
                "582a5dfb.dfaf24",
                "6331828e.70aa2c",
                "60ca269e.96d878",
                "ba5b2145.40753",
                "d3ab3217.7d57a",
                "58afb0e4.ba7df",
                "2ee3209f.a1bb9",
                "bfac8597.a517f8",
                "b282b047.e838d",
                "89ba2ad0.277798",
                "e99d476c.3f3ac8",
                "81163bc0.74e178",
                "e8785c39.cc512",
                "86da8112.f0417",
                "2b5c8466.72828c",
                "6c0bf23f.5303ac",
                "16e6f83a.5e7ff8"
            ]
        ]
    },
    {
        "id": "cc768085.ce4bc",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 578.0313873291016,
        "y": 287.6828079223633,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "9776f320.0567"
            ]
        ]
    },
    {
        "id": "cd5d97be.4098b8",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 589.0000190734863,
        "y": 226.41366863250732,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "2debc059.5aa7"
            ]
        ]
    },
    {
        "id": "2debc059.5aa7",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 769,
        "y": 225.41365814208984,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "355351ee.f9153e"
            ]
        ]
    },
    {
        "id": "355351ee.f9153e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 918.4287261962891,
        "y": 226.55657577514648,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "9776f320.0567",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`\">    \n",
        "comments": "",
        "outputs": 1,
        "x": 807.0000152587891,
        "y": 288.4136643409729,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "f97986b6.bf7158"
            ]
        ]
    },
    {
        "id": "f97986b6.bf7158",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1022,
        "y": 286.41365814208984,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "926d8df9.33314"
            ]
        ]
    },
    {
        "id": "926d8df9.33314",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1186,
        "y": 281.41365814208984,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "d7d04d79.b116e",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 856,
        "y": 393.41365814208984,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "511ce89.f44bb18"
            ]
        ]
    },
    {
        "id": "96bd0da6.6b228",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 860.9999961853027,
        "y": 340.4136571884155,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "511ce89.f44bb18"
            ]
        ]
    },
    {
        "id": "511ce89.f44bb18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1019,
        "y": 353.41365814208984,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "bcfd0c5e.e6103",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 856,
        "y": 454.41365814208984,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "b8a34756.728a58"
            ]
        ]
    },
    {
        "id": "af4bd42d.9f4868",
        "type": "set",
        "name": "set vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-length' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n\n",
        "comments": "",
        "x": 1210.000015258789,
        "y": 452.4136720895767,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "b8a34756.728a58",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1017.0000457763672,
        "y": 451.413649559021,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "af4bd42d.9f4868",
                "69a184fd.28972c"
            ]
        ]
    },
    {
        "id": "69a184fd.28972c",
        "type": "for",
        "name": "for each existing vf-index",
        "xml": "<for index='idx' start='0' end='`$vf-module-length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1229.0000305175781,
        "y": 501.41367053985596,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "72e39d48.4f8944"
            ]
        ]
    },
    {
        "id": "72e39d48.4f8944",
        "type": "switchNode",
        "name": "switch vf-module-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1472,
        "y": 500.41365814208984,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "5f38c3e.5d3ce3c"
            ]
        ]
    },
    {
        "id": "5f38c3e.5d3ce3c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1670.0000286102295,
        "y": 487.41366481781006,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "92d909cb.ff6d68"
            ]
        ]
    },
    {
        "id": "92d909cb.ff6d68",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1822,
        "y": 489.41365814208984,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "4dec85b6.3eab5c",
                "e85d666e.e8adc8",
                "15a9af4c.a7f031"
            ]
        ]
    },
    {
        "id": "4dec85b6.3eab5c",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$idx`' />\n<parameter name='ctx.vf-module-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.`' />\n",
        "comments": "",
        "x": 2050.000114440918,
        "y": 431.4136619567871,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "e85d666e.e8adc8",
        "type": "set",
        "name": "set vf-module-request-input.",
        "xml": "<set>\n<parameter name='vf-module-request-input.' value='`$ctx.vf-module-data.vf-module-request-input.`' />\n\n",
        "comments": "",
        "x": 2054.000114440918,
        "y": 485.4136619567871,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "582a5dfb.dfaf24",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 553.0002136230469,
        "y": 1926.9149341583252,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "15a9af4c.a7f031",
        "type": "call",
        "name": "call sdwan-get-vf-module-lanport-param",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-vf-module-lanport-param' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2084.4551391601562,
        "y": 536.4241542816162,
        "z": "2a0755d2.04892a",
        "wires": [
            []
        ]
    },
    {
        "id": "1adddcaf.a133d3",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='vfidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 891.2540740966797,
        "y": 541.4176807403564,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "8d8ac8b6.f23b18"
            ]
        ]
    },
    {
        "id": "cc689d86.6d6b1",
        "type": "switchNode",
        "name": "switch this deviceName == vf-input",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value == '$prop.lan.deviceName'`\">\n    \n",
        "comments": "",
        "outputs": 1,
        "x": 1164.2543182373047,
        "y": 627.417786359787,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "ec201f5b.98b55"
            ]
        ]
    },
    {
        "id": "8d8ac8b6.f23b18",
        "type": "for",
        "name": "for vf-module-input-param length",
        "xml": "<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1189.2539901733398,
        "y": 544.4177227020264,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "cc689d86.6d6b1"
            ]
        ]
    },
    {
        "id": "ec201f5b.98b55",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1378.2541313171387,
        "y": 624.4177711009979,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "137ad5db.05e33a"
            ]
        ]
    },
    {
        "id": "42b7ec46.f75e94",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1767.254322052002,
        "y": 621.4179258346558,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "6fa7e982.f0f398"
            ]
        ]
    },
    {
        "id": "6fa7e982.f0f398",
        "type": "switchNode",
        "name": "switch deviceId == input vf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'deviceId'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2059.2542114257812,
        "y": 622.4178848266602,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "a93d7d08.b19f3"
            ]
        ]
    },
    {
        "id": "a93d7d08.b19f3",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2258.254379272461,
        "y": 620.4178848266602,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "8ce50095.7309f"
            ]
        ]
    },
    {
        "id": "8ce50095.7309f",
        "type": "set",
        "name": "set prop.lan.deviceId",
        "xml": "<set>\n<parameter name='prop.lan.deviceId' value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value`' />\n",
        "comments": "",
        "x": 2431.254383087158,
        "y": 620.4179258346558,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "6331828e.70aa2c",
        "type": "for",
        "name": "for service-data.vnfs.vnf_length",
        "xml": "<for index='vnfidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 637.2539215087891,
        "y": 476.4176778793335,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "1adddcaf.a133d3"
            ]
        ]
    },
    {
        "id": "125425fb.ef4bfa",
        "type": "switchNode",
        "name": "switch ActivateSDWANSiteInstance",
        "xml": "<!--switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.request-information.request-action == 'ActivateSDWANSiteInstance'`\"-->\n<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.request-information.request-action == 'ActivateSiteInstance'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1232.0042877197266,
        "y": 748.417646408081,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "7336ac27.633e24"
            ]
        ]
    },
    {
        "id": "38f21693.f6208a",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='vfidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 765.0041732788086,
        "y": 819.4176635742188,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "e28cdf4a.09f99"
            ]
        ]
    },
    {
        "id": "58afb0e4.ba7df",
        "type": "for",
        "name": "for service-data.vnfs.vnf_length",
        "xml": "<for index='vnfidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 629.0039825439453,
        "y": 646.4175662994385,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "74d2892.3a20c78"
            ]
        ]
    },
    {
        "id": "7336ac27.633e24",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1454.0042037963867,
        "y": 748.4177279472351,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "6d31748d.e3c9bc"
            ]
        ]
    },
    {
        "id": "6d31748d.e3c9bc",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1535.2542114257812,
        "y": 822.9177293777466,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "7cb6a87.6e3f758"
            ]
        ]
    },
    {
        "id": "1008121d.0f833e",
        "type": "switchNode",
        "name": "switch siteId",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'siteId'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1918.2545700073242,
        "y": 829.9178366661072,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "7c572003.6098f"
            ]
        ]
    },
    {
        "id": "7c572003.6098f",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2095.2545890808105,
        "y": 832.9176769256592,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "8daf5324.de268"
            ]
        ]
    },
    {
        "id": "63cd961f.c156c8",
        "type": "set",
        "name": "set prop.attach.siteId",
        "xml": "<set>\n<parameter name='prop.attach.siteId' value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value`' />\n",
        "comments": "",
        "x": 2479.255096435547,
        "y": 806.9177284240723,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "8daf5324.de268",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2254.504779815674,
        "y": 828.4177169799805,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "63cd961f.c156c8",
                "4f58a0f5.56037",
                "975b7faf.1862a"
            ]
        ]
    },
    {
        "id": "89ba2ad0.277798",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = SDWANController AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 590.0039291381836,
        "y": 965.9176549911499,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "2d233c53.3f6be4",
                "f1938aaa.240958",
                "46bd4734.d48208"
            ]
        ]
    },
    {
        "id": "2d233c53.3f6be4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 834.0039901733398,
        "y": 929.9176549911499,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "157032ce.bbb88d"
            ]
        ]
    },
    {
        "id": "f1938aaa.240958",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 836.494873046875,
        "y": 965.4916915893555,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "4af9366b.00d608"
            ]
        ]
    },
    {
        "id": "46bd4734.d48208",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 831.827880859375,
        "y": 1001.8250503540039,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "3961a91d.651c56"
            ]
        ]
    },
    {
        "id": "3961a91d.651c56",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 985.6003723144531,
        "y": 999.2641372680664,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "4af9366b.00d608",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 982.0662689208984,
        "y": 963.7773790359497,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "157032ce.bbb88d",
        "type": "set",
        "name": "set controller data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
        "comments": "",
        "x": 994.5041007995605,
        "y": 927.917594909668,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "e99d476c.3f3ac8",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 603.9421615600586,
        "y": 1069.03874874115,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "e801e029.f1d5a",
                "8d93013.82561"
            ]
        ]
    },
    {
        "id": "e801e029.f1d5a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 838.9422874450684,
        "y": 1055.038737297058,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "aaae6df9.4c056"
            ]
        ]
    },
    {
        "id": "8d93013.82561",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 838.1922874450684,
        "y": 1090.6816444396973,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "5e0c2f7e.4b122"
            ]
        ]
    },
    {
        "id": "5e0c2f7e.4b122",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
        "comments": "",
        "x": 986.9422950744629,
        "y": 1091.4317264556885,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "aaae6df9.4c056",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 980.9422950744629,
        "y": 1054.0387382507324,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "e8785c39.cc512",
        "type": "execute",
        "name": "execute RestApiCallNode device port delete",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdlan-port-del.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/ports/action/batch-delete'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"portResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 630.0312576293945,
        "y": 1220.4918870925903,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "552b4230.a57a2c",
                "a21ab43e.f1ce68"
            ]
        ]
    },
    {
        "id": "552b4230.a57a2c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 879.0313167572021,
        "y": 1234.4920930862427,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "d1a4e04e.60501"
            ]
        ]
    },
    {
        "id": "a21ab43e.f1ce68",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 879.0313167572021,
        "y": 1196.491928577423,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "54a6d547.da0aec"
            ]
        ]
    },
    {
        "id": "54a6d547.da0aec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create device port rest api\" />\n",
        "comments": "",
        "x": 1023.0316505432129,
        "y": 1195.491928100586,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "d1a4e04e.60501",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1026.031328201294,
        "y": 1235.4919319152832,
        "z": "2a0755d2.04892a",
        "wires": [
            []
        ]
    },
    {
        "id": "c5c8c91e.ca8b48",
        "type": "comment",
        "name": "Delete port",
        "info": "",
        "comments": "",
        "x": 531.6971969604492,
        "y": 1186.9359111785889,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "81163bc0.74e178",
        "type": "call",
        "name": "call sdwan-get-tenant-auth",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-tenant-auth' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 578.6971969604492,
        "y": 1135.6023473739624,
        "z": "2a0755d2.04892a",
        "wires": [
            []
        ]
    },
    {
        "id": "a939bddc.25a0a",
        "type": "execute",
        "name": "execute RestApiCallNode bridge domain create",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdlan-bridge-domain.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/bridge-domains'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"bridgeDomainResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1052.6815071105957,
        "y": 1315.6025159358978,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "991e6562.cad008",
                "a675752c.fef5c8"
            ]
        ]
    },
    {
        "id": "991e6562.cad008",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1373.6815338134766,
        "y": 1332.6028363704681,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "fb3cfb9f.764a18"
            ]
        ]
    },
    {
        "id": "a675752c.fef5c8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1376.6815605163574,
        "y": 1297.6026179790497,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "92f1575b.a1bfb8"
            ]
        ]
    },
    {
        "id": "92f1575b.a1bfb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create bridge domain rest api\" />\n",
        "comments": "",
        "x": 1579.6819496154785,
        "y": 1293.6027252674103,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "fb3cfb9f.764a18",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1580.6815147399902,
        "y": 1328.602591753006,
        "z": "2a0755d2.04892a",
        "wires": [
            []
        ]
    },
    {
        "id": "d50d1b79.abf9a8",
        "type": "comment",
        "name": "Create bridge domain",
        "info": "",
        "comments": "",
        "x": 996.3474006652832,
        "y": 1282.0467417240143,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "60ca269e.96d878",
        "type": "switchNode",
        "name": "switch portSwitch",
        "xml": "<switch test=\"`$prop.lan.portSwitch == 'layer2-port'`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 561.4590759277344,
        "y": 1331.2692050933838,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "13b85938.8b9cd7"
            ]
        ]
    },
    {
        "id": "13b85938.8b9cd7",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 749.4590034484863,
        "y": 1329.3805322647095,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "a939bddc.25a0a"
            ]
        ]
    },
    {
        "id": "ba5b2145.40753",
        "type": "execute",
        "name": "execute split ip and mask",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$prop.lan.ipAddress`'/>\n<parameter name=\"regex\" value=\"/\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"ipandMask\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 577.0039672851562,
        "y": 1417.1676979064941,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "575235a2.fb9bbc",
                "3c20212c.49fade"
            ]
        ]
    },
    {
        "id": "3c20212c.49fade",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 778.0039863586426,
        "y": 1395.1676893234253,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "bdf015ad.4678f8"
            ]
        ]
    },
    {
        "id": "575235a2.fb9bbc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 778.0039901733398,
        "y": 1436.1676931381226,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "133c89f4.2a7c76"
            ]
        ]
    },
    {
        "id": "bdf015ad.4678f8",
        "type": "set",
        "name": "set ipAddress prefixLength",
        "xml": "<set>\n<parameter name='prop.lan.ip-address' value='`$ipandMask[0]`' />\n<parameter name='prop.lan.prefixLength' value='`$ipandMask[1]`' />",
        "comments": "",
        "x": 975.0040054321289,
        "y": 1393.1676893234253,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "133c89f4.2a7c76",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 933.0039978027344,
        "y": 1433.1676921844482,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "372eb63a.83ff6a",
        "type": "comment",
        "name": "TODO: split ip/mask",
        "info": "",
        "comments": "",
        "x": 974.0136375427246,
        "y": 1355.3479614257812,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "86da8112.f0417",
        "type": "execute",
        "name": "execute RestApiCallNode IPSubnets delete",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdlan-ip-subnets-del.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/ip-subnets/action/batch-delete'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"lanPortResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 635.7753372192383,
        "y": 1493.2885875701904,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "15bd3770.c63fa9",
                "248a192b.d86396"
            ]
        ]
    },
    {
        "id": "248a192b.d86396",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 904.7753677368164,
        "y": 1480.2885599136353,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "616ee6f.3d9a718"
            ]
        ]
    },
    {
        "id": "15bd3770.c63fa9",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 901.7753410339355,
        "y": 1515.2887783050537,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "40c5dea7.9b57"
            ]
        ]
    },
    {
        "id": "616ee6f.3d9a718",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create device port rest api\" />\n",
        "comments": "",
        "x": 1057.775749206543,
        "y": 1476.2887859344482,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "40c5dea7.9b57",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1048.7753219604492,
        "y": 1516.2885341644287,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "339192eb.51711e"
            ]
        ]
    },
    {
        "id": "339192eb.51711e",
        "type": "set",
        "name": "set prop.lan.lanPortId",
        "xml": "<set>\n<parameter name='prop.lan.lanPortId' value='`lanPortResp.success[0].id`' />\n",
        "comments": "",
        "x": 1255.6644248962402,
        "y": 1518.622000694275,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "6c0bf23f.5303ac",
        "type": "execute",
        "name": "execute RestApiCallNode create vpn topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-vpn-topology.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/' + $prop.vpn1Id + '/topology'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 652.2857360839844,
        "y": 1651.7474851608276,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "6503000e.7fe09",
                "f95d774d.951318"
            ]
        ]
    },
    {
        "id": "f95d774d.951318",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 898.2856712341309,
        "y": 1687.7468357086182,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "1f602715.4e71b9"
            ]
        ]
    },
    {
        "id": "1f602715.4e71b9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1070.2856121063232,
        "y": 1701.7468520402908,
        "z": "2a0755d2.04892a",
        "wires": [
            []
        ]
    },
    {
        "id": "7c916735.dbf778",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn topology failed\" />\n",
        "comments": "",
        "x": 1070.2857341766357,
        "y": 1657.7468520402908,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "6503000e.7fe09",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 902.2855892181396,
        "y": 1645.7468347549438,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "7c916735.dbf778"
            ]
        ]
    },
    {
        "id": "2b5c8466.72828c",
        "type": "execute",
        "name": "execute RestApiCallNode create vpn ",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-vpn.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/vpn'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 619.2841186523438,
        "y": 1585.246587753296,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "593d6e8d.d4036",
                "22423ed9.18f8e2"
            ]
        ]
    },
    {
        "id": "22423ed9.18f8e2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 844.2840175628662,
        "y": 1605.246500134468,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "b88f4563.6b6768"
            ]
        ]
    },
    {
        "id": "b88f4563.6b6768",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1014.28395652771,
        "y": 1608.246500134468,
        "z": "2a0755d2.04892a",
        "wires": [
            []
        ]
    },
    {
        "id": "a724847c.2c4088",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn failed\" />\n",
        "comments": "",
        "x": 1014.2840785980225,
        "y": 1564.246500134468,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "593d6e8d.d4036",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 847.28395652771,
        "y": 1564.246500134468,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "a724847c.2c4088"
            ]
        ]
    },
    {
        "id": "1f47d1c3.9d407e",
        "type": "switchNode",
        "name": "switch ActivateSDWANVpnInstance",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.request-information.request-action == 'ActivateSDWANVpnInstance'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1210.2859420776367,
        "y": 869.7469148635864,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "6200b940.359218"
            ]
        ]
    },
    {
        "id": "e28cdf4a.09f99",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 967.6190452575684,
        "y": 798.746994972229,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "125425fb.ef4bfa",
                "1f47d1c3.9d407e",
                "712ec051.8d2a6"
            ]
        ]
    },
    {
        "id": "6200b940.359218",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1305.9524536132812,
        "y": 943.7469959259033,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "309bb160.fe92de"
            ]
        ]
    },
    {
        "id": "309bb160.fe92de",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1520.2023391723633,
        "y": 945.2469725608826,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "1ac88e91.8c9681"
            ]
        ]
    },
    {
        "id": "1ac88e91.8c9681",
        "type": "switchNode",
        "name": "switch vpn-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'vpn-id'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1767.202377319336,
        "y": 940.2470555305481,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "3a5e3420.dfdfbc"
            ]
        ]
    },
    {
        "id": "3a5e3420.dfdfbc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1917.9523315429688,
        "y": 941.7469711303711,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "f542060.75c12f8"
            ]
        ]
    },
    {
        "id": "f542060.75c12f8",
        "type": "set",
        "name": "set prop.vpn1Id",
        "xml": "<set>\n<parameter name='prop.vpn1Id' value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value`' />\n",
        "comments": "",
        "x": 2091.953079223633,
        "y": 941.747029542923,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "4f58a0f5.56037",
        "type": "set",
        "name": "Add sites to list and update length",
        "xml": "<set>\n<parameter name='prop.siteIds[$prop.siteIds_length]' value='`$prop.attach.siteId`' />\n<parameter name='prop.siteIds_length' value='`$prop.siteIds_length + 1`' />\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "x": 2522.2864532470703,
        "y": 847.747029542923,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "975b7faf.1862a",
        "type": "set",
        "name": "Add site attachement to list and update length",
        "xml": "<set>\n<parameter name='prop.siteAttachements[$prop.siteAttachements_length].siteId' value='`$prop.attach.siteId`' />\n<parameter name='prop.siteAttachements[$prop.siteAttachements_length].roles[0]' value='`$prop.role`' />\n<parameter name='prop.siteAttachements[$prop.siteAttachements_length].roles_length' value='1' />\n<parameter name='prop.siteAttachements_length' value='`$prop.siteAttachements_length + 1`' />\n\n\n\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "x": 2553.286346435547,
        "y": 890.7469959259033,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "d3ab3217.7d57a",
        "type": "set",
        "name": "set prop.siteAttachement_length=0",
        "xml": "<set>\n<parameter name='prop.siteAttachements_length' value='0' />\n<parameter name='prop.siteIds_length' value='0' />\n\n\n\n",
        "comments": "",
        "x": 639.2857208251953,
        "y": 595.7469882965088,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "7cb6a87.6e3f758",
        "type": "block",
        "name": "block atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1752.6193771362305,
        "y": 823.7469940185547,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "1008121d.0f833e",
                "38f1f3d9.ea90fc",
                "65c7e0ab.e924d"
            ]
        ]
    },
    {
        "id": "38f1f3d9.ea90fc",
        "type": "switchNode",
        "name": "switch role",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'role'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1914.9523086547852,
        "y": 754.7469930648804,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "e4b2cfb7.2be02"
            ]
        ]
    },
    {
        "id": "e4b2cfb7.2be02",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2077.9523124694824,
        "y": 749.7469940185547,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "cbd09e2f.5bc81"
            ]
        ]
    },
    {
        "id": "cbd09e2f.5bc81",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2245.9523544311523,
        "y": 743.746992111206,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "3c601cb.4b2f2e4",
                "2d319605.7a6e9a"
            ]
        ]
    },
    {
        "id": "2d319605.7a6e9a",
        "type": "switchNode",
        "name": "switch sd-wan-edge",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value == 'sd-wan-edge'`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2440.9524841308594,
        "y": 704.7469835281372,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "bb6dcfdd.128fa"
            ]
        ]
    },
    {
        "id": "3c601cb.4b2f2e4",
        "type": "switchNode",
        "name": "switch dsvpn-hub",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'dsvpn-hub'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2437.952590942383,
        "y": 759.7469990253448,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "b131819c.daa97"
            ]
        ]
    },
    {
        "id": "91128780.38fd08",
        "type": "set",
        "name": "set spoke role",
        "xml": "<set>\n<parameter name='prop.role' value=\"spoke\" />\n",
        "comments": "",
        "x": 2770.952606201172,
        "y": 698.7470293045044,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "c4199cad.d68d",
        "type": "set",
        "name": "set hub role",
        "xml": "<set>\n<parameter name='prop.role' value=\"hub\" />\n",
        "comments": "",
        "x": 2769.952365875244,
        "y": 753.747013092041,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "bb6dcfdd.128fa",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2610.9524536132812,
        "y": 700.4136581420898,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "91128780.38fd08"
            ]
        ]
    },
    {
        "id": "b131819c.daa97",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2614.9524536132812,
        "y": 755.4136581420898,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "c4199cad.d68d"
            ]
        ]
    },
    {
        "id": "16e6f83a.5e7ff8",
        "type": "update",
        "name": "update SDWAN VPN status to AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='lan-port-config' \n      key='sdwan-vpn.sdwan-vpn-id = $vf-module-topology-operation-input.vf-module-information.vf-module-id' >\n<parameter name='sdwan-vpn-id' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='operational-status' value='PendingDelete' />\n<parameter name='lan-port-config-id' value='`$prop.lan-port-config-id`' />",
        "comments": "",
        "outputs": 1,
        "x": 617.3170700073242,
        "y": 1867.4452047348022,
        "z": "2a0755d2.04892a",
        "wires": [
            []
        ]
    },
    {
        "id": "65c7e0ab.e924d",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic23.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"param-name\"/>\n<parameter name=\"field3\" value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name`'/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1910.3169555664062,
        "y": 698.9449081420898,
        "z": "2a0755d2.04892a",
        "wires": [
            []
        ]
    },
    {
        "id": "712ec051.8d2a6",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic24.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"request-action\"/>\n<parameter name=\"field3\" value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.request-information.request-action`'/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1153.3171730041504,
        "y": 699.9450273513794,
        "z": "2a0755d2.04892a",
        "wires": [
            []
        ]
    },
    {
        "id": "500d4c8a.78bee4",
        "type": "comment",
        "name": "**revert the changes",
        "info": "",
        "comments": "",
        "x": 1311.316982269287,
        "y": 704.4449405670166,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "137ad5db.05e33a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1536.3333740234375,
        "y": 621.6667051315308,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "42b7ec46.f75e94",
                "5c976c54.43c564"
            ]
        ]
    },
    {
        "id": "5c976c54.43c564",
        "type": "set",
        "name": "set prop.vnf-id",
        "xml": "<set>\n<parameter name='prop.vnf-id' value='`$service-data.vnfs.vnf[$vnfidx].vnf-id`' />\n\n",
        "comments": "",
        "x": 1728.0000495910645,
        "y": 551.6666831970215,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "74d2892.3a20c78",
        "type": "switchNode",
        "name": "switch prop.vnf-id match",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-id == $prop.vnf-id`\">",
        "comments": "",
        "outputs": 1,
        "x": 886.0003509521484,
        "y": 673.0000200271606,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "cfdd9f28.400e6"
            ]
        ]
    },
    {
        "id": "cfdd9f28.400e6",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 674.0005035400391,
        "y": 748.0000233650208,
        "z": "2a0755d2.04892a",
        "wires": [
            [
                "38f21693.f6208a"
            ]
        ]
    },
    {
        "id": "fef5106c.cc924",
        "type": "comment",
        "name": "if device-name match with the incomming device-name,  sites in this service vnf should not be included",
        "info": "",
        "comments": "",
        "x": 749.0000915527344,
        "y": 845.0000410079956,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "2ee3209f.a1bb9",
        "type": "set",
        "name": "copy input data to service data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.sdnc-request-header.' value='`$vf-module-topology-operation-input.sdnc-request-header.`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.request-information.' value='`$vf-module-topology-operation-input.request-information.`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.service-information.' value='`$vf-module-topology-operation-input.service-information.`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-information.' value='`$vf-module-topology-operation-input.vf-module-information.`' />\n",
        "comments": "",
        "x": 605.0000915527344,
        "y": 1719.6667194366455,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "bfac8597.a517f8",
        "type": "set",
        "name": "set vf-module-id and vf-module-object-path",
        "xml": "<set>\n<parameter name='vf-module-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $vf-module-topology-operation-input.vf-module-information.vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology/'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n",
        "comments": "",
        "x": 639.3032913208008,
        "y": 1763.4698286056519,
        "z": "2a0755d2.04892a",
        "wires": []
    },
    {
        "id": "b282b047.e838d",
        "type": "set",
        "name": "set vf-module-level-oper-status",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.order-status'  value='PendingDelete' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.last-rpc-action'  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.last-action'  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />",
        "comments": "",
        "x": 606.3033180236816,
        "y": 1816.4698705673218,
        "z": "2a0755d2.04892a",
        "wires": []
    }
]