[
    {
        "id": "5903e495.687e5c",
        "type": "method",
        "name": "method sdwan-vf-operation-lanport-deactivate",
        "xml": "<method rpc='sdwan-vf-operation-lanport-deactivate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 240.00390625,
        "y": 212.58634185791016,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "4f6607f2.8abb38"
            ]
        ]
    },
    {
        "id": "16a24c83.115633",
        "type": "switchNode",
        "name": "switch vf-modules.vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 622.0039138793945,
        "y": 363.99999046325684,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "38ac049b.8f28ac",
                "918c4288.cf32",
                "e4bed2ad.0f579"
            ]
        ]
    },
    {
        "id": "a6d98bd3.492e98",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 159.00391006469727,
        "y": 55,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "1152c743.415d39"
            ]
        ]
    },
    {
        "id": "1152c743.415d39",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 228.28961181640625,
        "y": 118.23810958862305,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "5903e495.687e5c"
            ]
        ]
    },
    {
        "id": "4f6607f2.8abb38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 240.6705780029297,
        "y": 468.666708946228,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "ee96d694.8e7de8",
                "ebce096c.09ff98",
                "16a24c83.115633",
                "8d9ec798.9077a8",
                "1c23a104.8b10df",
                "ea24678.936eb98",
                "1a442450.4a365c",
                "76875429.7977ec",
                "c0a9943e.0b6a78",
                "728a6387.ded5dc",
                "d768a494.487678",
                "24c5eb03.2a37b4",
                "37a0c49e.52f2ec",
                "88d74976.c878b8",
                "7eaf7940.931d68",
                "b028cd6d.5db14",
                "b07d774b.c67f18",
                "c2a2820.4e02d8",
                "6e845a3.14ef3a4",
                "715f7228.db42ac",
                "b36b6e5f.5d733"
            ]
        ]
    },
    {
        "id": "ebce096c.09ff98",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 582.0352668762207,
        "y": 221.26913261413574,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "906e6ab4.d1bf48"
            ]
        ]
    },
    {
        "id": "ee96d694.8e7de8",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 593.0038986206055,
        "y": 159.99999332427979,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "88ebf11b.dd6cf"
            ]
        ]
    },
    {
        "id": "88ebf11b.dd6cf",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 773.0038795471191,
        "y": 158.9999828338623,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "42b4e84a.5144c8"
            ]
        ]
    },
    {
        "id": "42b4e84a.5144c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 922.4326057434082,
        "y": 160.14290046691895,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "906e6ab4.d1bf48",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`\">    \n",
        "comments": "",
        "outputs": 1,
        "x": 811.0038948059082,
        "y": 221.99998903274536,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "31ffe1c7.1814fe"
            ]
        ]
    },
    {
        "id": "31ffe1c7.1814fe",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1026.0038795471191,
        "y": 219.9999828338623,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "e443968b.c056d8"
            ]
        ]
    },
    {
        "id": "e443968b.c056d8",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1190.0038795471191,
        "y": 214.9999828338623,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "918c4288.cf32",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 844.00390625,
        "y": 398,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "8a688447.06c508"
            ]
        ]
    },
    {
        "id": "38ac049b.8f28ac",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 849.0039024353027,
        "y": 344.9999990463257,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "8a688447.06c508"
            ]
        ]
    },
    {
        "id": "8a688447.06c508",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1007.00390625,
        "y": 358,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "e4bed2ad.0f579",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 844.00390625,
        "y": 459,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "4a56c78a.01ddc8"
            ]
        ]
    },
    {
        "id": "6a4e4809.c60518",
        "type": "set",
        "name": "set vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-length' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n\n",
        "comments": "",
        "x": 1198.003921508789,
        "y": 457.0000139474869,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "4a56c78a.01ddc8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1005.0039520263672,
        "y": 455.99999141693115,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "6a4e4809.c60518",
                "bc83d339.7a157"
            ]
        ]
    },
    {
        "id": "bc83d339.7a157",
        "type": "for",
        "name": "for each existing vf-index",
        "xml": "<for index='idx' start='0' end='`$vf-module-length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1217.0039367675781,
        "y": 506.0000123977661,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "f6f67e00.4f2d6"
            ]
        ]
    },
    {
        "id": "f6f67e00.4f2d6",
        "type": "switchNode",
        "name": "switch vf-module-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1460.00390625,
        "y": 505,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "dd4f952e.96ea88"
            ]
        ]
    },
    {
        "id": "dd4f952e.96ea88",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1658.0039348602295,
        "y": 492.0000066757202,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "daa971e2.4674d"
            ]
        ]
    },
    {
        "id": "daa971e2.4674d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1810.00390625,
        "y": 494,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "b77c5961.7e0078",
                "f6edb536.7a6928",
                "29517aa5.1b19a6"
            ]
        ]
    },
    {
        "id": "b77c5961.7e0078",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$idx`' />\n<parameter name='ctx.vf-module-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.`' />\n",
        "comments": "",
        "x": 2038.004020690918,
        "y": 436.00000381469727,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "f6edb536.7a6928",
        "type": "set",
        "name": "set vf-module-request-input.",
        "xml": "<set>\n<parameter name='vf-module-request-input.' value='`$ctx.vf-module-data.vf-module-request-input.`' />\n\n",
        "comments": "",
        "x": 2042.004020690918,
        "y": 490.00000381469727,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "8d9ec798.9077a8",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 541.0041198730469,
        "y": 1931.5012760162354,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "29517aa5.1b19a6",
        "type": "call",
        "name": "call sdwan-get-vf-module-lanport-param",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-vf-module-lanport-param' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2072.4590454101562,
        "y": 541.0104961395264,
        "z": "eb27f9f.1aaf508",
        "wires": [
            []
        ]
    },
    {
        "id": "cc302ad2.335ad8",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='vfidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 879.2579803466797,
        "y": 546.0040225982666,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "58d4b8d7.026f28"
            ]
        ]
    },
    {
        "id": "ffc92a35.504858",
        "type": "switchNode",
        "name": "switch this deviceName == vf-input",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value == $prop.lan.deviceName`\">\n    \n",
        "comments": "",
        "outputs": 1,
        "x": 1152.2582244873047,
        "y": 632.0041282176971,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "753161a4.e4105"
            ]
        ]
    },
    {
        "id": "58d4b8d7.026f28",
        "type": "for",
        "name": "for vf-module-input-param length",
        "xml": "<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1177.2578964233398,
        "y": 549.0040645599365,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "ffc92a35.504858"
            ]
        ]
    },
    {
        "id": "753161a4.e4105",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1366.2580375671387,
        "y": 629.0041129589081,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "530b71d0.67585"
            ]
        ]
    },
    {
        "id": "db40c5ed.6ed418",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1755.258228302002,
        "y": 626.0042676925659,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "e3d2d09b.6274e"
            ]
        ]
    },
    {
        "id": "e3d2d09b.6274e",
        "type": "switchNode",
        "name": "switch deviceId == input vf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'deviceId'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2047.2581176757812,
        "y": 627.0042266845703,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "9b1b7b47.77c908"
            ]
        ]
    },
    {
        "id": "9b1b7b47.77c908",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2246.258285522461,
        "y": 625.0042266845703,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "6eb0efd.3e47b1"
            ]
        ]
    },
    {
        "id": "6eb0efd.3e47b1",
        "type": "set",
        "name": "set prop.lan.deviceId",
        "xml": "<set>\n<parameter name='prop.lan.deviceId' value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value`' />\n",
        "comments": "",
        "x": 2419.258289337158,
        "y": 625.0042676925659,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "1c23a104.8b10df",
        "type": "for",
        "name": "for service-data.vnfs.vnf_length",
        "xml": "<for index='vnfidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 625.2578277587891,
        "y": 481.00401973724365,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "cc302ad2.335ad8"
            ]
        ]
    },
    {
        "id": "427eb2b2.29a19c",
        "type": "switchNode",
        "name": "switch ActivateSDWANSiteInstance",
        "xml": "<!--switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.request-information.request-action == 'ActivateSDWANSiteInstance'`\"-->\n<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.request-information.request-action == 'ActivateSiteInstance'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1220.0081939697266,
        "y": 753.0039882659912,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "d5fc4f12.f3715"
            ]
        ]
    },
    {
        "id": "9c314385.3cccd",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='vfidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 753.0080795288086,
        "y": 824.0040054321289,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "f0f279f1.f5aee8"
            ]
        ]
    },
    {
        "id": "c0a9943e.0b6a78",
        "type": "for",
        "name": "for service-data.vnfs.vnf_length",
        "xml": "<for index='vnfidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 617.0078887939453,
        "y": 651.0039081573486,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "a69a253a.e8e958"
            ]
        ]
    },
    {
        "id": "d5fc4f12.f3715",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1442.0081100463867,
        "y": 753.0040698051453,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "41fe08aa.15b428"
            ]
        ]
    },
    {
        "id": "41fe08aa.15b428",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1523.2581176757812,
        "y": 827.5040712356567,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "687fd9fe.041c58"
            ]
        ]
    },
    {
        "id": "703289c8.f0d638",
        "type": "switchNode",
        "name": "switch siteId",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'siteId'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1906.2584762573242,
        "y": 834.5041785240173,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "b38ab304.d8ca8"
            ]
        ]
    },
    {
        "id": "b38ab304.d8ca8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2083.2584953308105,
        "y": 837.5040187835693,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "3a704ef2.91c232"
            ]
        ]
    },
    {
        "id": "97126ca9.bd5cb",
        "type": "set",
        "name": "set prop.attach.siteId",
        "xml": "<set>\n<parameter name='prop.attach.siteId' value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value`' />\n",
        "comments": "",
        "x": 2467.259002685547,
        "y": 811.5040702819824,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "3a704ef2.91c232",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2242.508686065674,
        "y": 833.0040588378906,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "97126ca9.bd5cb",
                "82be127b.4ba08",
                "e04e88b3.6b7888"
            ]
        ]
    },
    {
        "id": "37a0c49e.52f2ec",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = SDWANController AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 578.0078353881836,
        "y": 970.5039968490601,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "737a26fd.e1dab8",
                "dacb633c.487af",
                "48a17fc2.d83c5"
            ]
        ]
    },
    {
        "id": "737a26fd.e1dab8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 822.0078964233398,
        "y": 934.5039968490601,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "e7e7ee2.fc0eb1"
            ]
        ]
    },
    {
        "id": "dacb633c.487af",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 824.498779296875,
        "y": 970.0780334472656,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "3d818670.7778da"
            ]
        ]
    },
    {
        "id": "48a17fc2.d83c5",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 819.831787109375,
        "y": 1006.4113922119141,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "42fa81a1.deae7"
            ]
        ]
    },
    {
        "id": "42fa81a1.deae7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 973.6042785644531,
        "y": 1003.8504791259766,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "3d818670.7778da",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 970.0701751708984,
        "y": 968.3637208938599,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "e7e7ee2.fc0eb1",
        "type": "set",
        "name": "set controller data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
        "comments": "",
        "x": 982.5080070495605,
        "y": 932.5039367675781,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "88d74976.c878b8",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 591.9460678100586,
        "y": 1073.62509059906,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "76d84be1.6ba5b4",
                "93f8c0dc.5b81e"
            ]
        ]
    },
    {
        "id": "76d84be1.6ba5b4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 826.9461936950684,
        "y": 1059.6250791549683,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "f2b8e32a.bae75"
            ]
        ]
    },
    {
        "id": "93f8c0dc.5b81e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 826.1961936950684,
        "y": 1095.2679862976074,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "f416c022.785c9"
            ]
        ]
    },
    {
        "id": "f416c022.785c9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
        "comments": "",
        "x": 974.9462013244629,
        "y": 1096.0180683135986,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "f2b8e32a.bae75",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 968.9462013244629,
        "y": 1058.6250801086426,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "b028cd6d.5db14",
        "type": "execute",
        "name": "execute RestApiCallNode device port delete",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdlan-port-del.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/ports/action/batch-delete'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"portResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 618.0351638793945,
        "y": 1225.0782289505005,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "fb8d6372.3f4b4",
                "48c81a07.925bc4"
            ]
        ]
    },
    {
        "id": "fb8d6372.3f4b4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 867.0352230072021,
        "y": 1239.0784349441528,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "a8972b96.6e4798"
            ]
        ]
    },
    {
        "id": "48c81a07.925bc4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 867.0352230072021,
        "y": 1201.0782704353333,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "2b546f30.f74b7"
            ]
        ]
    },
    {
        "id": "2b546f30.f74b7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create device port rest api\" />\n",
        "comments": "",
        "x": 1011.0355567932129,
        "y": 1200.078269958496,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "a8972b96.6e4798",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1014.035234451294,
        "y": 1240.0782737731934,
        "z": "eb27f9f.1aaf508",
        "wires": [
            []
        ]
    },
    {
        "id": "7630dbec.718c24",
        "type": "comment",
        "name": "Delete port",
        "info": "",
        "comments": "",
        "x": 519.7011032104492,
        "y": 1191.522253036499,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "7eaf7940.931d68",
        "type": "call",
        "name": "call sdwan-get-tenant-auth",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-tenant-auth' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 566.7011032104492,
        "y": 1140.1886892318726,
        "z": "eb27f9f.1aaf508",
        "wires": [
            []
        ]
    },
    {
        "id": "ea684fc6.056a2",
        "type": "execute",
        "name": "execute RestApiCallNode bridge domain create",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdlan-bridge-domain.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/bridge-domains'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"bridgeDomainResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1040.6854133605957,
        "y": 1320.188857793808,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "3b59cd60.020932",
                "c2414827.1f0308"
            ]
        ]
    },
    {
        "id": "3b59cd60.020932",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1361.6854400634766,
        "y": 1337.1891782283783,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "ce1097ce.dee208"
            ]
        ]
    },
    {
        "id": "c2414827.1f0308",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1364.6854667663574,
        "y": 1302.1889598369598,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "eb07b224.53901"
            ]
        ]
    },
    {
        "id": "eb07b224.53901",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create bridge domain rest api\" />\n",
        "comments": "",
        "x": 1567.6858558654785,
        "y": 1298.1890671253204,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "ce1097ce.dee208",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1568.6854209899902,
        "y": 1333.1889336109161,
        "z": "eb27f9f.1aaf508",
        "wires": [
            []
        ]
    },
    {
        "id": "fb63c3bc.ee861",
        "type": "comment",
        "name": "Create bridge domain",
        "info": "",
        "comments": "",
        "x": 984.3513069152832,
        "y": 1286.6330835819244,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "ea24678.936eb98",
        "type": "switchNode",
        "name": "switch portSwitch",
        "xml": "<switch test=\"`$prop.lan.portSwitch == 'layer2-port'`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 549.4629821777344,
        "y": 1335.855546951294,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "3354418d.f828fe"
            ]
        ]
    },
    {
        "id": "3354418d.f828fe",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 737.4629096984863,
        "y": 1333.9668741226196,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "ea684fc6.056a2"
            ]
        ]
    },
    {
        "id": "1a442450.4a365c",
        "type": "execute",
        "name": "execute split ip and mask",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$prop.lan.ipAddress`'/>\n<parameter name=\"regex\" value=\"/\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"ipandMask\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 565.0078735351562,
        "y": 1421.7540397644043,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "9d1d8447.931768",
                "a4c1e51b.fe66b8"
            ]
        ]
    },
    {
        "id": "a4c1e51b.fe66b8",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 766.0078926086426,
        "y": 1399.7540311813354,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "1daa2649.cf0d8a"
            ]
        ]
    },
    {
        "id": "9d1d8447.931768",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 766.0078964233398,
        "y": 1440.7540349960327,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "77f9f3ef.24297c"
            ]
        ]
    },
    {
        "id": "1daa2649.cf0d8a",
        "type": "set",
        "name": "set ipAddress prefixLength",
        "xml": "<set>\n<parameter name='prop.lan.ip-address' value='`$ipandMask[0]`' />\n<parameter name='prop.lan.prefixLength' value='`$ipandMask[1]`' />",
        "comments": "",
        "x": 963.0079116821289,
        "y": 1397.7540311813354,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "77f9f3ef.24297c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 921.0079040527344,
        "y": 1437.7540340423584,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "623ff011.75e11",
        "type": "comment",
        "name": "TODO: split ip/mask",
        "info": "",
        "comments": "",
        "x": 962.0175437927246,
        "y": 1359.9343032836914,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "b07d774b.c67f18",
        "type": "execute",
        "name": "execute RestApiCallNode IPSubnets delete",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdlan-ip-subnets-del.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/ip-subnets/action/batch-delete'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"lanPortResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 623.7792434692383,
        "y": 1497.8749294281006,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "fb6426f0.aef3a8",
                "334c3bc2.ea5ee4"
            ]
        ]
    },
    {
        "id": "334c3bc2.ea5ee4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 892.7792739868164,
        "y": 1484.8749017715454,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "1de305ac.79165a"
            ]
        ]
    },
    {
        "id": "fb6426f0.aef3a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 889.7792472839355,
        "y": 1519.8751201629639,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "e16c200f.f574"
            ]
        ]
    },
    {
        "id": "1de305ac.79165a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create device port rest api\" />\n",
        "comments": "",
        "x": 1045.779655456543,
        "y": 1480.8751277923584,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "e16c200f.f574",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1036.7792282104492,
        "y": 1520.8748760223389,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "3689e594.d6f2aa"
            ]
        ]
    },
    {
        "id": "3689e594.d6f2aa",
        "type": "set",
        "name": "set prop.lan.lanPortId",
        "xml": "<set>\n<parameter name='prop.lan.lanPortId' value='`lanPortResp.success[0].id`' />\n",
        "comments": "",
        "x": 1243.6683311462402,
        "y": 1523.208342552185,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "6e845a3.14ef3a4",
        "type": "execute",
        "name": "execute RestApiCallNode create vpn topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-vpn-topology.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/' + $prop.vpn1Id + '/topology'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 640.2896423339844,
        "y": 1656.3338270187378,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "f2309f9f.30389",
                "436824e6.cfd19c"
            ]
        ]
    },
    {
        "id": "436824e6.cfd19c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 886.2895774841309,
        "y": 1692.3331775665283,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "cc161513.6096e8"
            ]
        ]
    },
    {
        "id": "cc161513.6096e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1058.2895183563232,
        "y": 1706.333193898201,
        "z": "eb27f9f.1aaf508",
        "wires": [
            []
        ]
    },
    {
        "id": "f1b7a0fd.a1f56",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn topology failed\" />\n",
        "comments": "",
        "x": 1058.2896404266357,
        "y": 1662.333193898201,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "f2309f9f.30389",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 890.2894954681396,
        "y": 1650.333176612854,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "f1b7a0fd.a1f56"
            ]
        ]
    },
    {
        "id": "c2a2820.4e02d8",
        "type": "execute",
        "name": "execute RestApiCallNode create vpn ",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-vpn.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/vpn'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 607.2880249023438,
        "y": 1589.832929611206,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "5dca5344.cc070c",
                "f5dbcc17.8c2d6"
            ]
        ]
    },
    {
        "id": "f5dbcc17.8c2d6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 832.2879238128662,
        "y": 1609.8328419923782,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "ffd8c00c.52d8c"
            ]
        ]
    },
    {
        "id": "ffd8c00c.52d8c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1002.28786277771,
        "y": 1612.8328419923782,
        "z": "eb27f9f.1aaf508",
        "wires": [
            []
        ]
    },
    {
        "id": "60415.0a145bec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn failed\" />\n",
        "comments": "",
        "x": 1002.2879848480225,
        "y": 1568.8328419923782,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "5dca5344.cc070c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 835.28786277771,
        "y": 1568.8328419923782,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "60415.0a145bec"
            ]
        ]
    },
    {
        "id": "55cb7e10.b843e",
        "type": "switchNode",
        "name": "switch ActivateSDWANVpnInstance",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.request-information.request-action == 'ActivateSDWANVpnInstance'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1198.2898483276367,
        "y": 874.3332567214966,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "35e81d22.6ca8a2"
            ]
        ]
    },
    {
        "id": "f0f279f1.f5aee8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 955.6229515075684,
        "y": 803.3333368301392,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "427eb2b2.29a19c",
                "55cb7e10.b843e",
                "ee6738c4.de8eb8"
            ]
        ]
    },
    {
        "id": "35e81d22.6ca8a2",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1293.9563598632812,
        "y": 948.3333377838135,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "50c0c92c.64de28"
            ]
        ]
    },
    {
        "id": "50c0c92c.64de28",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1508.2062454223633,
        "y": 949.8333144187927,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "759cda21.f2dc74"
            ]
        ]
    },
    {
        "id": "759cda21.f2dc74",
        "type": "switchNode",
        "name": "switch vpn-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'vpn-id'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1755.206283569336,
        "y": 944.8333973884583,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "848c4744.1c01a8"
            ]
        ]
    },
    {
        "id": "848c4744.1c01a8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1905.9562377929688,
        "y": 946.3333129882812,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "3b552595.502b8a"
            ]
        ]
    },
    {
        "id": "3b552595.502b8a",
        "type": "set",
        "name": "set prop.vpn1Id",
        "xml": "<set>\n<parameter name='prop.vpn1Id' value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value`' />\n",
        "comments": "",
        "x": 2079.956985473633,
        "y": 946.3333714008331,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "82be127b.4ba08",
        "type": "set",
        "name": "Add sites to list and update length",
        "xml": "<set>\n<parameter name='prop.siteIds[$prop.siteIds_length]' value='`$prop.attach.siteId`' />\n<parameter name='prop.siteIds_length' value='`$prop.siteIds_length + 1`' />\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "x": 2510.2903594970703,
        "y": 852.3333714008331,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "e04e88b3.6b7888",
        "type": "set",
        "name": "Add site attachement to list and update length",
        "xml": "<set>\n<parameter name='prop.siteAttachements[$prop.siteAttachements_length].siteId' value='`$prop.attach.siteId`' />\n<parameter name='prop.siteAttachements[$prop.siteAttachements_length].roles[0]' value='`$prop.role`' />\n<parameter name='prop.siteAttachements[$prop.siteAttachements_length].roles_length' value='1' />\n<parameter name='prop.siteAttachements_length' value='`$prop.siteAttachements_length + 1`' />\n\n\n\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "x": 2541.290252685547,
        "y": 895.3333377838135,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "76875429.7977ec",
        "type": "set",
        "name": "set prop.siteAttachement_length=0",
        "xml": "<set>\n<parameter name='prop.siteAttachements_length' value='0' />\n<parameter name='prop.siteIds_length' value='0' />\n\n\n\n",
        "comments": "",
        "x": 627.2896270751953,
        "y": 600.333330154419,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "687fd9fe.041c58",
        "type": "block",
        "name": "block atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1740.6232833862305,
        "y": 828.3333358764648,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "703289c8.f0d638",
                "7c3e64c6.118e7c",
                "fd5e762b.9175c8"
            ]
        ]
    },
    {
        "id": "7c3e64c6.118e7c",
        "type": "switchNode",
        "name": "switch role",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'role'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1902.9562149047852,
        "y": 759.3333349227905,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "9d3d23c.1af69e"
            ]
        ]
    },
    {
        "id": "9d3d23c.1af69e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2065.9562187194824,
        "y": 754.3333358764648,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "b50c3782.0e6ad8"
            ]
        ]
    },
    {
        "id": "b50c3782.0e6ad8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2233.9562606811523,
        "y": 748.3333339691162,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "1dffa18.8cf065f",
                "4b307f30.7cc1"
            ]
        ]
    },
    {
        "id": "4b307f30.7cc1",
        "type": "switchNode",
        "name": "switch sd-wan-edge",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value == 'sd-wan-edge'`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2428.9563903808594,
        "y": 709.3333253860474,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "fcbf0bd1.06d8d8"
            ]
        ]
    },
    {
        "id": "1dffa18.8cf065f",
        "type": "switchNode",
        "name": "switch dsvpn-hub",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'dsvpn-hub'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2425.956497192383,
        "y": 764.333340883255,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "99c61a76.666788"
            ]
        ]
    },
    {
        "id": "4a479c02.0630f4",
        "type": "set",
        "name": "set spoke role",
        "xml": "<set>\n<parameter name='prop.role' value=\"spoke\" />\n",
        "comments": "",
        "x": 2758.956512451172,
        "y": 703.3333711624146,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "5e79562c.63b268",
        "type": "set",
        "name": "set hub role",
        "xml": "<set>\n<parameter name='prop.role' value=\"hub\" />\n",
        "comments": "",
        "x": 2757.956272125244,
        "y": 758.3333549499512,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "fcbf0bd1.06d8d8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2598.9563598632812,
        "y": 705,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "4a479c02.0630f4"
            ]
        ]
    },
    {
        "id": "99c61a76.666788",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2602.9563598632812,
        "y": 760,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "5e79562c.63b268"
            ]
        ]
    },
    {
        "id": "715f7228.db42ac",
        "type": "update",
        "name": "update SDWAN VPN status to AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='lan-port-config' \n      key='sdwan-vpn.sdwan-vpn-id = $vf-module-topology-operation-input.vf-module-information.vf-module-id' >\n<parameter name='sdwan-vpn-id' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='operational-status' value='PendingDelete' />\n<parameter name='lan-port-config-id' value='`$prop.lan-port-config-id`' />",
        "comments": "",
        "outputs": 1,
        "x": 605.3209762573242,
        "y": 1872.0315465927124,
        "z": "eb27f9f.1aaf508",
        "wires": [
            []
        ]
    },
    {
        "id": "fd5e762b.9175c8",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic23.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"param-name\"/>\n<parameter name=\"field3\" value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name`'/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1898.3208618164062,
        "y": 703.53125,
        "z": "eb27f9f.1aaf508",
        "wires": [
            []
        ]
    },
    {
        "id": "ee6738c4.de8eb8",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic24.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"request-action\"/>\n<parameter name=\"field3\" value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.request-information.request-action`'/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1141.3210792541504,
        "y": 704.5313692092896,
        "z": "eb27f9f.1aaf508",
        "wires": [
            []
        ]
    },
    {
        "id": "5ab12293.b61a8c",
        "type": "comment",
        "name": "**revert the changes",
        "info": "",
        "comments": "",
        "x": 1299.320888519287,
        "y": 709.0312824249268,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "530b71d0.67585",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1524.3372802734375,
        "y": 626.2530469894409,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "db40c5ed.6ed418",
                "68d688c3.70e818"
            ]
        ]
    },
    {
        "id": "68d688c3.70e818",
        "type": "set",
        "name": "set prop.vnf-id",
        "xml": "<set>\n<parameter name='prop.vnf-id' value='`$service-data.vnfs.vnf[$vnfidx].vnf-id`' />\n\n",
        "comments": "",
        "x": 1716.0039558410645,
        "y": 556.2530250549316,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "a69a253a.e8e958",
        "type": "switchNode",
        "name": "switch prop.vnf-id match",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-id == $prop.vnf-id`\">",
        "comments": "",
        "outputs": 1,
        "x": 874.0042572021484,
        "y": 677.5863618850708,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "5ecfed21.a77fb4"
            ]
        ]
    },
    {
        "id": "5ecfed21.a77fb4",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 662.0044097900391,
        "y": 752.5863652229309,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "9c314385.3cccd"
            ]
        ]
    },
    {
        "id": "efed662f.81b6a8",
        "type": "comment",
        "name": "if device-name match with the incomming device-name,  sites in this service vnf should not be included",
        "info": "",
        "comments": "",
        "x": 737.0039978027344,
        "y": 849.5863828659058,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "728a6387.ded5dc",
        "type": "set",
        "name": "copy input data to service data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.sdnc-request-header.' value='`$vf-module-topology-operation-input.sdnc-request-header.`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.request-information.' value='`$vf-module-topology-operation-input.request-information.`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.service-information.' value='`$vf-module-topology-operation-input.service-information.`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-information.' value='`$vf-module-topology-operation-input.vf-module-information.`' />\n",
        "comments": "",
        "x": 593.0039978027344,
        "y": 1724.2530612945557,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "d768a494.487678",
        "type": "set",
        "name": "set vf-module-id and vf-module-object-path",
        "xml": "<set>\n<parameter name='vf-module-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $vf-module-topology-operation-input.vf-module-information.vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology/'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n",
        "comments": "",
        "x": 627.3071975708008,
        "y": 1768.056170463562,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "24c5eb03.2a37b4",
        "type": "set",
        "name": "set vf-module-level-oper-status",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.order-status'  value='PendingDelete' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.last-rpc-action'  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.last-action'  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />",
        "comments": "",
        "x": 594.3072242736816,
        "y": 1821.056212425232,
        "z": "eb27f9f.1aaf508",
        "wires": []
    },
    {
        "id": "b36b6e5f.5d733",
        "type": "switchNode",
        "name": "switch vnf-index",
        "xml": "<switch test='`$vnf-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 596.00390625,
        "y": 287.00390625,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "eab1927d.01f0a"
            ]
        ]
    },
    {
        "id": "eab1927d.01f0a",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 758.0039520263672,
        "y": 286.0039052963257,
        "z": "eb27f9f.1aaf508",
        "wires": [
            [
                "a638e200.1e293"
            ]
        ]
    },
    {
        "id": "a638e200.1e293",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf id not found in service-data\" />\n",
        "comments": "",
        "x": 907.2540435791016,
        "y": 283.78178310394287,
        "z": "eb27f9f.1aaf508",
        "wires": []
    }
]