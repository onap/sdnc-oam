[
    {
        "id": "187aa613.a5839a",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 235.00390625,
        "y": 121.23810815811157,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "582fdd43.f9c334"
            ]
        ]
    },
    {
        "id": "582fdd43.f9c334",
        "type": "method",
        "name": "method sdwan-vf-operation-site-delete",
        "xml": "<method rpc='sdwan-vf-operation-site-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 246.71820068359375,
        "y": 215.58634042739868,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "5b1517bd.e6d538"
            ]
        ]
    },
    {
        "id": "dd9a7d3b.c0b22",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 155.71820068359375,
        "y": 58.999998569488525,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "187aa613.a5839a"
            ]
        ]
    },
    {
        "id": "5b1517bd.e6d538",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 263.38490295410156,
        "y": 449.66671800613403,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "9241d723.4c1768",
                "583bedbe.114ce4",
                "530fc00e.364a7",
                "6080131a.3dc0dc",
                "e87fa266.b6e36",
                "809305f5.00af78",
                "35360c23.e7bca4",
                "f2c5088e.cdf1f8",
                "8e537e93.b1e07",
                "c5084158.dcae4",
                "a42b62f1.2ca2"
            ]
        ]
    },
    {
        "id": "583bedbe.114ce4",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 578.7495651245117,
        "y": 295.2691397666931,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "54d8e288.9c571c"
            ]
        ]
    },
    {
        "id": "9241d723.4c1768",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 583.7182197570801,
        "y": 234.000009059906,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "deee2c29.49f92"
            ]
        ]
    },
    {
        "id": "deee2c29.49f92",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 763.7182006835938,
        "y": 232.99999856948853,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "c9ce5d0a.f9326"
            ]
        ]
    },
    {
        "id": "c9ce5d0a.f9326",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 913.1469268798828,
        "y": 234.14291620254517,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "54d8e288.9c571c",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`\">    \n",
        "comments": "",
        "outputs": 1,
        "x": 801.7182159423828,
        "y": 296.0000047683716,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "60ddf1fc.3523e"
            ]
        ]
    },
    {
        "id": "60ddf1fc.3523e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1016.7182006835938,
        "y": 293.9999985694885,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "3516b602.f2680a"
            ]
        ]
    },
    {
        "id": "3516b602.f2680a",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1180.7182006835938,
        "y": 288.9999985694885,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "530fc00e.364a7",
        "type": "switchNode",
        "name": "switch vf-modules.vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 649.7182350158691,
        "y": 372.00002336502075,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "8726f5fa.6a9e18",
                "28d1ea9e.688d26",
                "8ffcd1cb.2fcee"
            ]
        ]
    },
    {
        "id": "28d1ea9e.688d26",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 871.7182273864746,
        "y": 406.0000329017639,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "ed85f484.f7f278"
            ]
        ]
    },
    {
        "id": "8726f5fa.6a9e18",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 876.7182235717773,
        "y": 353.0000319480896,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "ed85f484.f7f278"
            ]
        ]
    },
    {
        "id": "ed85f484.f7f278",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 1034.7182273864746,
        "y": 366.0000329017639,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "8ffcd1cb.2fcee",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 871.7182273864746,
        "y": 467.0000329017639,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "340e8678.09189a"
            ]
        ]
    },
    {
        "id": "806cc3c4.ab426",
        "type": "set",
        "name": "set vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-length' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n\n",
        "comments": "",
        "x": 1225.7182426452637,
        "y": 465.0000468492508,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "340e8678.09189a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1032.7182731628418,
        "y": 464.00002431869507,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "806cc3c4.ab426",
                "f59f2884.04cee8"
            ]
        ]
    },
    {
        "id": "f59f2884.04cee8",
        "type": "for",
        "name": "for each existing vf-index",
        "xml": "<for index='idx' start='0' end='`$vf-module-length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1244.7182121276855,
        "y": 518.0000233650208,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "2f51cfde.50b1e"
            ]
        ]
    },
    {
        "id": "2f51cfde.50b1e",
        "type": "switchNode",
        "name": "switch vf-module-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1487.7182273864746,
        "y": 513.0000329017639,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "b1049a4.b276d68"
            ]
        ]
    },
    {
        "id": "b1049a4.b276d68",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1728.718355178833,
        "y": 506.00003004074097,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "30dc082a.0a5cd8"
            ]
        ]
    },
    {
        "id": "30dc082a.0a5cd8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1880.7183265686035,
        "y": 508.00002336502075,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "68ce9aa6.9cbee4",
                "6fd91070.2784d",
                "83965509.802248"
            ]
        ]
    },
    {
        "id": "68ce9aa6.9cbee4",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$idx`' />\n<parameter name='ctx.vf-module-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.`' />\n",
        "comments": "",
        "x": 2102.7183265686035,
        "y": 504.00002336502075,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "6fd91070.2784d",
        "type": "set",
        "name": "set vf-module-request-input.",
        "xml": "<set>\n<parameter name='vf-module-request-input.' value='`$ctx.vf-module-data.vf-module-request-input.`' />\n\n",
        "comments": "",
        "x": 2108.7183265686035,
        "y": 553.0000233650208,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "83965509.802248",
        "type": "call",
        "name": "call sdwan-get-vf-module-device-param",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-vf-module-device-param' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2136.718547821045,
        "y": 601.0000290870667,
        "z": "e1fdfe1b.e244a",
        "wires": [
            []
        ]
    },
    {
        "id": "6080131a.3dc0dc",
        "type": "switchNode",
        "name": "switch tmp.vidx ",
        "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 588.7494468688965,
        "y": 545.0161061286926,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "73f1e922.5bcb58"
            ]
        ]
    },
    {
        "id": "73f1e922.5bcb58",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 736.1780891418457,
        "y": 544.5875163078308,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "a8c19777.b80838"
            ]
        ]
    },
    {
        "id": "a8c19777.b80838",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 885.6068153381348,
        "y": 545.7304339408875,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "e87fa266.b6e36",
        "type": "switchNode",
        "name": "switch vf-module-oper-status",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.order-status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 633.047607421875,
        "y": 615.3333115577698,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "f563296b.c51508",
                "5df5c282.7498ac"
            ]
        ]
    },
    {
        "id": "f563296b.c51508",
        "type": "outcome",
        "name": "outcome PendingDelete",
        "xml": "<outcome value='PendingDelete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 923.8808746337891,
        "y": 619.4444346427917,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "def8fb03.8e15e8"
            ]
        ]
    },
    {
        "id": "5df5c282.7498ac",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 890.8810119628906,
        "y": 671.4444873332977,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "2bb9155.57a22ea"
            ]
        ]
    },
    {
        "id": "2bb9155.57a22ea",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
        "comments": "",
        "x": 1050.3807792663574,
        "y": 674.4444863796234,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "def8fb03.8e15e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1121.1872749328613,
        "y": 629.7695889472961,
        "z": "e1fdfe1b.e244a",
        "wires": [
            []
        ]
    },
    {
        "id": "a42b62f1.2ca2",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 611.1588096618652,
        "y": 994.2221984863281,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "809305f5.00af78",
        "type": "set",
        "name": "set prop.vnfNewidx",
        "xml": "<set>\n<parameter name='prop.vnfidxLen' value='`0`' />\n",
        "comments": "",
        "x": 607.2454776763916,
        "y": 689.3333535194397,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "35360c23.e7bca4",
        "type": "for",
        "name": "for lidx..service-data.vf-modules.vf-module[]",
        "xml": "<for index='lidx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 687.2453918457031,
        "y": 740.3333554267883,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "37a5b897.303c08"
            ]
        ]
    },
    {
        "id": "f2c5088e.cdf1f8",
        "type": "set",
        "name": "set new vnf length",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length\" value='`$prop.vnfidxLen`'/>\n\n\t\n",
        "comments": "",
        "x": 611.3467636108398,
        "y": 793.1375732421875,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "8e537e93.b1e07",
        "type": "set",
        "name": "Remove vnf from ServiceData",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$prop.vnfidxLen].\" value=\"\"/>\n",
        "comments": "",
        "x": 648.2454376220703,
        "y": 843.3333582878113,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "37a5b897.303c08",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 947.24538230896,
        "y": 747.3332152366638,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "28df8155.45a17e"
            ]
        ]
    },
    {
        "id": "b54d3819.c1f898",
        "type": "delete",
        "name": "delete site vf instance configuration in AAI",
        "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource='site-resource' \n        key='site-resource.site-resource-id = $vf-module-topology-operation-input.vf-module-information.vf-module-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 693.2457847595215,
        "y": 941.59490442276,
        "z": "e1fdfe1b.e244a",
        "wires": [
            []
        ]
    },
    {
        "id": "28df8155.45a17e",
        "type": "switchNode",
        "name": "switch vnf-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$lidx].vf-module-data.vf-module-information.vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1133.245449066162,
        "y": 747.3333759307861,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "b11e0659.68c598"
            ]
        ]
    },
    {
        "id": "b11e0659.68c598",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1302.2454566955566,
        "y": 746.3332133293152,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "8c9a4a2b.2a6988"
            ]
        ]
    },
    {
        "id": "8c9a4a2b.2a6988",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1456.2452955245972,
        "y": 738.3332142829895,
        "z": "e1fdfe1b.e244a",
        "wires": [
            [
                "9c4fcf43.faebd",
                "f51761cb.90c27"
            ]
        ]
    },
    {
        "id": "9c4fcf43.faebd",
        "type": "set",
        "name": "set  vnf data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$prop.vnfidxLen].vnf-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[lidx].vf-module-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$prop.vnfidxLen].vnf-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[lidx].vf-module-data.`' />\n",
        "comments": "",
        "x": 1621.2453908920288,
        "y": 713.3333697319031,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "f51761cb.90c27",
        "type": "set",
        "name": "set prop.vnfNewidx",
        "xml": "<set>\n<parameter name='prop.vnfidxLen' value='`$prop.vnfidxLen + 1`' />\n",
        "comments": "",
        "x": 1643.2453908920288,
        "y": 769.333333492279,
        "z": "e1fdfe1b.e244a",
        "wires": []
    },
    {
        "id": "c5084158.dcae4",
        "type": "set",
        "name": "set vf-module-object-path",
        "xml": "<set>\n<parameter name='vf-module-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $vf-module-topology-operation-input.vf-module-information.vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology/'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n",
        "comments": "",
        "x": 635.0476455688477,
        "y": 888.6666932106018,
        "z": "e1fdfe1b.e244a",
        "wires": []
    }
]