[
    {
        "id": "cea6a9f1.279478",
        "type": "switchNode",
        "name": "switch vf-modules.vf-module_length",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 570.7143020629883,
        "y": 337.99999046325684,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "4a89ecf7.049034",
                "2a09fa32.63fc36",
                "c2f1098d.e8bd38"
            ]
        ]
    },
    {
        "id": "1833f3f4.1b830c",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 107.71429824829102,
        "y": 29,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "181dc2fc.e539bd"
            ]
        ]
    },
    {
        "id": "181dc2fc.e539bd",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 177,
        "y": 92.23810958862305,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "25791551.06845a"
            ]
        ]
    },
    {
        "id": "25791551.06845a",
        "type": "method",
        "name": "method sdwan-vf-operation-lanport-activate",
        "xml": "<method rpc='sdwan-vf-operation-lanport-activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 188.71429443359375,
        "y": 186.58634185791016,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "419d7afa.b1ca54"
            ]
        ]
    },
    {
        "id": "419d7afa.b1ca54",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 189.38096618652344,
        "y": 442.666708946228,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "f5110085.4f487",
                "f62e0d25.9e73c",
                "cea6a9f1.279478",
                "76df47d2.f28eb8",
                "3a550152.acb95e",
                "bad651b2.12a17",
                "a66a0a0e.fef0c8",
                "f2a2fd31.6afea",
                "11a6133a.d1ed1d",
                "6bb3e148.a2b06",
                "233d7734.c6ad18",
                "ec89c38e.b0db3",
                "cfe4c928.772628",
                "307480f2.c3f12",
                "83adcbda.9cab18",
                "41a8aff.133475",
                "bf4ca0a0.f719b",
                "14cdbea6.6ff3c1",
                "96f47da7.f3275",
                "7299f238.fa9f1c",
                "e4f03070.b443a",
                "1e3434c6.db511b",
                "56401cb0.1f0164"
            ]
        ]
    },
    {
        "id": "f62e0d25.9e73c",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 520.7456588745117,
        "y": 266.2691411972046,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "b7bf67d0.4c13b8"
            ]
        ]
    },
    {
        "id": "f5110085.4f487",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 525.7143135070801,
        "y": 205.00001049041748,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "61a8d0c5.ce10b"
            ]
        ]
    },
    {
        "id": "61a8d0c5.ce10b",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 705.7142944335938,
        "y": 204,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "3e167156.21c02e"
            ]
        ]
    },
    {
        "id": "3e167156.21c02e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 855.1430206298828,
        "y": 205.14291763305664,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "b7bf67d0.4c13b8",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`\">    \n",
        "comments": "",
        "outputs": 1,
        "x": 743.7143096923828,
        "y": 267.00000619888306,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "29696342.56f90c"
            ]
        ]
    },
    {
        "id": "29696342.56f90c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 958.7142944335938,
        "y": 265,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "1ba7830b.c7ea6d"
            ]
        ]
    },
    {
        "id": "1ba7830b.c7ea6d",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1122.7142944335938,
        "y": 260,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "2a09fa32.63fc36",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 792.7142944335938,
        "y": 372,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "4ead305d.0b806"
            ]
        ]
    },
    {
        "id": "4a89ecf7.049034",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 797.7142906188965,
        "y": 318.9999990463257,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "4ead305d.0b806"
            ]
        ]
    },
    {
        "id": "4ead305d.0b806",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
        "comments": "",
        "x": 955.7142944335938,
        "y": 332,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "c2f1098d.e8bd38",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 792.7142944335938,
        "y": 433,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "2458c219.d10e1e"
            ]
        ]
    },
    {
        "id": "ead36ccd.33529",
        "type": "set",
        "name": "set vf-module_length",
        "xml": "<set>\n<parameter name='vf-module-length' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n\n",
        "comments": "",
        "x": 1146.7143096923828,
        "y": 431.0000139474869,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "2458c219.d10e1e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 953.7143402099609,
        "y": 429.99999141693115,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "ead36ccd.33529",
                "386f97ee.904d48"
            ]
        ]
    },
    {
        "id": "386f97ee.904d48",
        "type": "for",
        "name": "for each existing vf-index",
        "xml": "<for index='idx' start='0' end='`$vf-module-length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1165.7142791748047,
        "y": 483.99999046325684,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "593c39.dc7673c8"
            ]
        ]
    },
    {
        "id": "593c39.dc7673c8",
        "type": "switchNode",
        "name": "switch vf-module-id found",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1408.7142944335938,
        "y": 479,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "1efda74.b0eb959"
            ]
        ]
    },
    {
        "id": "1efda74.b0eb959",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1606.7143230438232,
        "y": 466.0000066757202,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "d0b5f3a2.35747"
            ]
        ]
    },
    {
        "id": "d0b5f3a2.35747",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1758.7142944335938,
        "y": 468,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "1fc6559e.18634a",
                "802dea9f.3c2848",
                "9329a8cc.23d418"
            ]
        ]
    },
    {
        "id": "1fc6559e.18634a",
        "type": "set",
        "name": "set tmp.vidx and ctx.vnf-data",
        "xml": "<set>\n<parameter name='tmp.vidx' value='`$idx`' />\n<parameter name='ctx.vf-module-data.' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.`' />\n",
        "comments": "",
        "x": 1986.7144088745117,
        "y": 410.00000381469727,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "802dea9f.3c2848",
        "type": "set",
        "name": "set vf-module-request-input.",
        "xml": "<set>\n<parameter name='vf-module-request-input.' value='`$ctx.vf-module-data.vf-module-request-input.`' />\n\n",
        "comments": "",
        "x": 1990.7144088745117,
        "y": 464.00000381469727,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "76df47d2.f28eb8",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 504.714412689209,
        "y": 2079.501151561737,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "9329a8cc.23d418",
        "type": "call",
        "name": "call sdwan-get-vf-module-lanport-param",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-vf-module-lanport-param' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2021.16943359375,
        "y": 515.0104961395264,
        "z": "2f0cf160.dc107e",
        "wires": [
            []
        ]
    },
    {
        "id": "b2d390ae.97474",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='vfidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 827.9683685302734,
        "y": 520.0040225982666,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "7dff73e1.0243cc"
            ]
        ]
    },
    {
        "id": "3f6c843d.edec8c",
        "type": "switchNode",
        "name": "switch this deviceName == vf-input",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value == '$prop.lan.deviceName'`\">\n    \n",
        "comments": "",
        "outputs": 1,
        "x": 1100.9686126708984,
        "y": 606.0041282176971,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "cb455713.e1bdd8"
            ]
        ]
    },
    {
        "id": "7dff73e1.0243cc",
        "type": "for",
        "name": "for vf-module-input-param length",
        "xml": "<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1125.9682846069336,
        "y": 523.0040645599365,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "3f6c843d.edec8c"
            ]
        ]
    },
    {
        "id": "cb455713.e1bdd8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1314.9684257507324,
        "y": 603.0041129589081,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "8c1ad275.b541"
            ]
        ]
    },
    {
        "id": "8c1ad275.b541",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1528.9684677124023,
        "y": 599.0040664672852,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "6aaf6a5c.76e9f4"
            ]
        ]
    },
    {
        "id": "6aaf6a5c.76e9f4",
        "type": "switchNode",
        "name": "switch deviceId == input vf-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'deviceId'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1843.9685440063477,
        "y": 598.0040471553802,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "85841cc6.de2b3"
            ]
        ]
    },
    {
        "id": "85841cc6.de2b3",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2045.9686737060547,
        "y": 596.0040481090546,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "1722d3f0.fc82dc"
            ]
        ]
    },
    {
        "id": "1722d3f0.fc82dc",
        "type": "set",
        "name": "set prop.lan.deviceId",
        "xml": "<set>\n<parameter name='prop.lan.deviceId' value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value`' />\n",
        "comments": "",
        "x": 2220.9685668945312,
        "y": 596.004228591919,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "3a550152.acb95e",
        "type": "for",
        "name": "for service-data.vnfs.vnf_length",
        "xml": "<for index='vnfidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 573.9682159423828,
        "y": 455.00401973724365,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "b2d390ae.97474"
            ]
        ]
    },
    {
        "id": "566234f6.d57f8c",
        "type": "switchNode",
        "name": "switch ActivateSDWANSiteInstance",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.request-information.request-action == 'ActivateSDWANSiteInstance'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1168.7185821533203,
        "y": 727.0039882659912,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "d08758a.8a9d4a8"
            ]
        ]
    },
    {
        "id": "4a6e0872.754c78",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='vfidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 814.7184219360352,
        "y": 694.0040283203125,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "2141a4d0.4ed0ac"
            ]
        ]
    },
    {
        "id": "83adcbda.9cab18",
        "type": "for",
        "name": "for service-data.vnfs.vnf_length",
        "xml": "<for index='vnfidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 565.7182769775391,
        "y": 625.0039081573486,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "4a6e0872.754c78"
            ]
        ]
    },
    {
        "id": "d08758a.8a9d4a8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1390.7184982299805,
        "y": 727.0040698051453,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "5c9349a5.10cdf8"
            ]
        ]
    },
    {
        "id": "5c9349a5.10cdf8",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1471.968505859375,
        "y": 801.5040712356567,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "78c531f9.c452d"
            ]
        ]
    },
    {
        "id": "78502254.1e1d1c",
        "type": "switchNode",
        "name": "switch siteId",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'siteId'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1854.968864440918,
        "y": 808.5041785240173,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "cef8d9d4.a847d8"
            ]
        ]
    },
    {
        "id": "cef8d9d4.a847d8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2031.9688835144043,
        "y": 811.5040187835693,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "57774070.165c4"
            ]
        ]
    },
    {
        "id": "26765522.97752a",
        "type": "set",
        "name": "set prop.attach.siteId",
        "xml": "<set>\n<parameter name='prop.attach.siteId' value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value`' />\n",
        "comments": "",
        "x": 2415.9693908691406,
        "y": 785.5040702819824,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "57774070.165c4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2191.2190742492676,
        "y": 807.0040588378906,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "26765522.97752a",
                "18aa70c2.f51f1f",
                "95fdece9.83f56",
                "13d1a87e.cc7dd8"
            ]
        ]
    },
    {
        "id": "41a8aff.133475",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = SDWANController AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 526.7182235717773,
        "y": 944.5039968490601,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "9e1e759b.490ef8",
                "587c1d85.98e364",
                "1fecffb3.fdfc1"
            ]
        ]
    },
    {
        "id": "9e1e759b.490ef8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 770.7182846069336,
        "y": 908.5039968490601,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "1eeec00d.ea37e"
            ]
        ]
    },
    {
        "id": "587c1d85.98e364",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 773.2091674804688,
        "y": 944.0780334472656,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "f1f9240f.1bbe98"
            ]
        ]
    },
    {
        "id": "1fecffb3.fdfc1",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 768.5421752929688,
        "y": 980.4113922119141,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "e9937b5c.1de1c8"
            ]
        ]
    },
    {
        "id": "e9937b5c.1de1c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 922.3146667480469,
        "y": 977.8504791259766,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "f1f9240f.1bbe98",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 918.7805633544922,
        "y": 942.3637208938599,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "1eeec00d.ea37e",
        "type": "set",
        "name": "set controller data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
        "comments": "",
        "x": 931.2183952331543,
        "y": 906.5039367675781,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "bf4ca0a0.f719b",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 540.6564559936523,
        "y": 1047.62509059906,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "d05110e4.15f05",
                "623a881a.ebe538"
            ]
        ]
    },
    {
        "id": "d05110e4.15f05",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 775.6565818786621,
        "y": 1033.6250791549683,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "adf2584e.694ce8"
            ]
        ]
    },
    {
        "id": "623a881a.ebe538",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 774.9065818786621,
        "y": 1069.2679862976074,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "e8c30ab5.68d3b8"
            ]
        ]
    },
    {
        "id": "e8c30ab5.68d3b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
        "comments": "",
        "x": 923.6565895080566,
        "y": 1070.0180683135986,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "adf2584e.694ce8",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 917.6565895080566,
        "y": 1032.6250801086426,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "96f47da7.f3275",
        "type": "execute",
        "name": "execute RestApiCallNode device port create",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdlan-port.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/ports'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"portResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 566.7455520629883,
        "y": 1199.0782289505005,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "50af67d.1491698",
                "bef4965a.55b458"
            ]
        ]
    },
    {
        "id": "50af67d.1491698",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 815.7456111907959,
        "y": 1213.0784349441528,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "b4a513b9.d44d6"
            ]
        ]
    },
    {
        "id": "bef4965a.55b458",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 815.7456111907959,
        "y": 1175.0782704353333,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "d695c8db.015488"
            ]
        ]
    },
    {
        "id": "d695c8db.015488",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create device port rest api\" />\n",
        "comments": "",
        "x": 959.7459449768066,
        "y": 1174.078269958496,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "b4a513b9.d44d6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 962.7456226348877,
        "y": 1214.0782737731934,
        "z": "2f0cf160.dc107e",
        "wires": [
            []
        ]
    },
    {
        "id": "bad651b2.12a17",
        "type": "set",
        "name": "set prop.lan.devicePortId",
        "xml": "<set>\n<parameter name='prop.lan.devicePortId' value='`$portResp.success[0].id`' />\n",
        "comments": "",
        "x": 509.4028129577637,
        "y": 1252.1794338226318,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "1d5fca27.3bbea6",
        "type": "comment",
        "name": "Create port",
        "info": "",
        "comments": "",
        "x": 468.41149139404297,
        "y": 1165.522253036499,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "14cdbea6.6ff3c1",
        "type": "call",
        "name": "call sdwan-get-tenant-auth",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-tenant-auth' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 515.411491394043,
        "y": 1114.1886892318726,
        "z": "2f0cf160.dc107e",
        "wires": [
            []
        ]
    },
    {
        "id": "f52cabac.abeb68",
        "type": "execute",
        "name": "execute RestApiCallNode bridge domain create",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdlan-bridge-domain.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/bridge-domains'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"bridgeDomainResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 989.3958015441895,
        "y": 1294.188857793808,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "441eed4c.baf224",
                "fa3f1c96.1fc6d"
            ]
        ]
    },
    {
        "id": "441eed4c.baf224",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1310.3958282470703,
        "y": 1311.1891782283783,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "a63cb83c.98c9e8"
            ]
        ]
    },
    {
        "id": "fa3f1c96.1fc6d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1313.3958549499512,
        "y": 1276.1889598369598,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "421c7bf9.398d94"
            ]
        ]
    },
    {
        "id": "421c7bf9.398d94",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create bridge domain rest api\" />\n",
        "comments": "",
        "x": 1516.3962440490723,
        "y": 1272.1890671253204,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "a63cb83c.98c9e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1517.395809173584,
        "y": 1307.1889336109161,
        "z": "2f0cf160.dc107e",
        "wires": [
            []
        ]
    },
    {
        "id": "7044fc7.42f8204",
        "type": "comment",
        "name": "Create bridge domain",
        "info": "",
        "comments": "",
        "x": 933.061695098877,
        "y": 1260.6330835819244,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "a66a0a0e.fef0c8",
        "type": "switchNode",
        "name": "switch portSwitch",
        "xml": "<switch test=\"`$prop.lan.portSwitch == 'layer2-port'`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 489.17326736450195,
        "y": 1295.855489730835,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "cc6612da.43a9"
            ]
        ]
    },
    {
        "id": "cc6612da.43a9",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 668.1732978820801,
        "y": 1295.966812133789,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "f52cabac.abeb68"
            ]
        ]
    },
    {
        "id": "f2a2fd31.6afea",
        "type": "execute",
        "name": "execute split ip and mask",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$prop.lan.ipAddress`'/>\n<parameter name=\"regex\" value=\"/\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"ipandMask\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 513.71826171875,
        "y": 1395.7540397644043,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "c87ddd20.90349",
                "aaf35528.c457d8"
            ]
        ]
    },
    {
        "id": "aaf35528.c457d8",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 714.7182807922363,
        "y": 1373.7540311813354,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "f3c46122.a1ec5"
            ]
        ]
    },
    {
        "id": "c87ddd20.90349",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 714.7182846069336,
        "y": 1414.7540349960327,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "3701541a.3aea9c"
            ]
        ]
    },
    {
        "id": "f3c46122.a1ec5",
        "type": "set",
        "name": "set ipAddress prefixLength",
        "xml": "<set>\n<parameter name='prop.lan.ip-address' value='`$ipandMask[0]`' />\n<parameter name='prop.lan.prefixLength' value='`$ipandMask[1]`' />",
        "comments": "",
        "x": 911.7182998657227,
        "y": 1371.7540311813354,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "3701541a.3aea9c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 869.7182922363281,
        "y": 1411.7540340423584,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "6cdf4550.c744bc",
        "type": "comment",
        "name": "Create wan port",
        "info": "",
        "comments": "",
        "x": 486.7281379699707,
        "y": 1348.7640895843506,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "2701cb4.59cff34",
        "type": "comment",
        "name": "TODO: split ip/mask",
        "info": "",
        "comments": "",
        "x": 910.7279319763184,
        "y": 1333.9343032836914,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "7299f238.fa9f1c",
        "type": "execute",
        "name": "execute RestApiCallNode IPSubnets create",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdlan-ip-subnets.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/ip-subnets'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"lanPortResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 572.489631652832,
        "y": 1471.8749294281006,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "fe753b01.7a4008",
                "c50acfa.66a383"
            ]
        ]
    },
    {
        "id": "c50acfa.66a383",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 841.4896621704102,
        "y": 1458.8749017715454,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "da685c50.c0fca"
            ]
        ]
    },
    {
        "id": "fe753b01.7a4008",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 838.4896354675293,
        "y": 1493.8751201629639,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "7c874cb1.b7ec64"
            ]
        ]
    },
    {
        "id": "da685c50.c0fca",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create device port rest api\" />\n",
        "comments": "",
        "x": 994.4900436401367,
        "y": 1454.8751277923584,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "7c874cb1.b7ec64",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 985.489616394043,
        "y": 1494.8748760223389,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "220d830a.a3737c"
            ]
        ]
    },
    {
        "id": "220d830a.a3737c",
        "type": "set",
        "name": "set prop.lan.lanPortId",
        "xml": "<set>\n<parameter name='prop.lan.lanPortId' value='`lanPortResp.success[0].id`' />\n",
        "comments": "",
        "x": 1192.378719329834,
        "y": 1497.208342552185,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "1e3434c6.db511b",
        "type": "execute",
        "name": "execute RestApiCallNode create vpn topology",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-vpn-topology.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/' + $prop.vpn1Id + '/topology'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 598.0000534057617,
        "y": 1630.333706855774,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "dad634fb.8374a8",
                "222fdfc3.31cbd"
            ]
        ]
    },
    {
        "id": "222fdfc3.31cbd",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 836.9999675750732,
        "y": 1677.333193898201,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "a113b13a.6f74c"
            ]
        ]
    },
    {
        "id": "a113b13a.6f74c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1006.999906539917,
        "y": 1680.333193898201,
        "z": "2f0cf160.dc107e",
        "wires": [
            []
        ]
    },
    {
        "id": "66af30b.a74d8d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn topology failed\" />\n",
        "comments": "",
        "x": 1007.0000286102295,
        "y": 1636.333193898201,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "dad634fb.8374a8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 839.999906539917,
        "y": 1636.333193898201,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "66af30b.a74d8d"
            ]
        ]
    },
    {
        "id": "e4f03070.b443a",
        "type": "execute",
        "name": "execute RestApiCallNode create vpn ",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-vpn.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/vpn'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 559.9984092712402,
        "y": 1561.8328762054443,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "93f9856d.ae6458",
                "98bd094d.9d68c8"
            ]
        ]
    },
    {
        "id": "98bd094d.9d68c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 780.99831199646,
        "y": 1583.8328419923782,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "54c36251.c8076c"
            ]
        ]
    },
    {
        "id": "54c36251.c8076c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 950.9982509613037,
        "y": 1586.8328419923782,
        "z": "2f0cf160.dc107e",
        "wires": [
            []
        ]
    },
    {
        "id": "719bdb7c.5a10b4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn failed\" />\n",
        "comments": "",
        "x": 950.9983730316162,
        "y": 1542.8328419923782,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "93f9856d.ae6458",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 783.9982509613037,
        "y": 1542.8328419923782,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "719bdb7c.5a10b4"
            ]
        ]
    },
    {
        "id": "cdd2e071.957e3",
        "type": "switchNode",
        "name": "switch ActivateSDWANVpnInstance",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.request-information.request-action == 'ActivateSDWANVpnInstance'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 1147.0002365112305,
        "y": 848.3332567214966,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "f5335833.4ba238"
            ]
        ]
    },
    {
        "id": "2141a4d0.4ed0ac",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 904.3333396911621,
        "y": 777.3333368301392,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "566234f6.d57f8c",
                "cdd2e071.957e3",
                "785db3d8.98fb5c"
            ]
        ]
    },
    {
        "id": "f5335833.4ba238",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1242.666748046875,
        "y": 922.3333377838135,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "deda6015.73137"
            ]
        ]
    },
    {
        "id": "deda6015.73137",
        "type": "for",
        "name": "for vf-modules.vf-module_length",
        "xml": "<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1456.916633605957,
        "y": 923.8333144187927,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "6ef0c48a.c4e20c"
            ]
        ]
    },
    {
        "id": "6ef0c48a.c4e20c",
        "type": "switchNode",
        "name": "switch vpn-id",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'vpn-id'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1703.9166717529297,
        "y": 918.8333973884583,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "45631feb.4e63d"
            ]
        ]
    },
    {
        "id": "45631feb.4e63d",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1854.6666259765625,
        "y": 920.3333129882812,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "4fe0c915.7019d8"
            ]
        ]
    },
    {
        "id": "4fe0c915.7019d8",
        "type": "set",
        "name": "set prop.vpn1Id",
        "xml": "<set>\n<parameter name='prop.vpn1Id' value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value`' />\n",
        "comments": "",
        "x": 2028.6673736572266,
        "y": 920.3333714008331,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "18aa70c2.f51f1f",
        "type": "set",
        "name": "Add sites to list and update length",
        "xml": "<set>\n<parameter name='prop.siteIds[$prop.siteIds_length]' value='`$prop.attach.siteId`' />\n<parameter name='prop.siteIds_length' value='`$prop.siteIds_length + 1`' />\n\n\n\n\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "x": 2459.000747680664,
        "y": 826.3333714008331,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "95fdece9.83f56",
        "type": "set",
        "name": "Add site attachement to list and update length",
        "xml": "<set>\n<parameter name='prop.siteAttachements[$prop.siteAttachements_length].siteId' value='`$prop.attach.siteId`' />\n<parameter name='prop.siteAttachements[$prop.siteAttachements_length].roles[0]' value='`$prop.role`' />\n<parameter name='prop.siteAttachements[$prop.siteAttachements_length].roles_length' value='1' />\n<parameter name='prop.siteAttachements_length' value='`$prop.siteAttachements_length + 1`' />\n\n\n\n\n\n\n\n\n\n\n\n\n",
        "comments": "",
        "x": 2490.0006408691406,
        "y": 869.3333377838135,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "11a6133a.d1ed1d",
        "type": "set",
        "name": "set prop.siteAttachement_length=0",
        "xml": "<set>\n<parameter name='prop.siteAttachements_length' value='0' />\n<parameter name='prop.siteIds_length' value='0' />\n\n\n\n",
        "comments": "",
        "x": 576.0000152587891,
        "y": 574.333330154419,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "78c531f9.c452d",
        "type": "block",
        "name": "block atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1689.3336715698242,
        "y": 802.3333358764648,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "78502254.1e1d1c",
                "63d66e16.071a8",
                "5671530f.b2ba5c"
            ]
        ]
    },
    {
        "id": "63d66e16.071a8",
        "type": "switchNode",
        "name": "switch role",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'role'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1851.666603088379,
        "y": 733.3333349227905,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "5896f487.b2b6fc"
            ]
        ]
    },
    {
        "id": "5896f487.b2b6fc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2014.6666069030762,
        "y": 728.3333358764648,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "21c68e35.ea4b92"
            ]
        ]
    },
    {
        "id": "21c68e35.ea4b92",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2182.666648864746,
        "y": 722.3333339691162,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "c62b7f98.336c5",
                "2c113cab.56e434",
                "c2240666.9ee948"
            ]
        ]
    },
    {
        "id": "2c113cab.56e434",
        "type": "switchNode",
        "name": "switch sd-wan-edge",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].value == 'sd-wan-edge'`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2377.666778564453,
        "y": 683.3333253860474,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "ba2b297.cd792d8"
            ]
        ]
    },
    {
        "id": "c62b7f98.336c5",
        "type": "switchNode",
        "name": "switch dsvpn-hub",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name == 'dsvpn-hub'`\">\n    \n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2374.6668853759766,
        "y": 738.333340883255,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "f4f54567.510e38"
            ]
        ]
    },
    {
        "id": "8ed96cca.37dc4",
        "type": "set",
        "name": "set spoke role",
        "xml": "<set>\n<parameter name='prop.role' value=\"spoke\" />\n",
        "comments": "",
        "x": 2707.6669006347656,
        "y": 677.3333711624146,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "4cf4d59c.e1707c",
        "type": "set",
        "name": "set hub role",
        "xml": "<set>\n<parameter name='prop.role' value=\"hub\" />\n",
        "comments": "",
        "x": 2706.666660308838,
        "y": 732.3333549499512,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "ba2b297.cd792d8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2547.666748046875,
        "y": 679,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "8ed96cca.37dc4"
            ]
        ]
    },
    {
        "id": "f4f54567.510e38",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2551.666748046875,
        "y": 734,
        "z": "2f0cf160.dc107e",
        "wires": [
            [
                "4cf4d59c.e1707c"
            ]
        ]
    },
    {
        "id": "56401cb0.1f0164",
        "type": "update",
        "name": "update SDWAN VPN status to AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='lan-port-config' \n      key='sdwan-vpn.sdwan-vpn-id = $vf-module-topology-operation-input.vf-module-information.vf-module-id' >\n<parameter name='sdwan-vpn-id' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='operational-status' value='Active' />\n<parameter name='lan-port-config-id' value='`$prop.lan-port-config-id`' />",
        "comments": "",
        "outputs": 1,
        "x": 560.0312843322754,
        "y": 1998.031280040741,
        "z": "2f0cf160.dc107e",
        "wires": [
            []
        ]
    },
    {
        "id": "ec89c38e.b0db3",
        "type": "set",
        "name": "set vf-module-level-oper-status",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.order-status'  value='Active' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.last-rpc-action'  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-level-oper-status.last-action'  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />",
        "comments": "",
        "x": 556.6663017272949,
        "y": 1941.1261107651517,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "233d7734.c6ad18",
        "type": "set",
        "name": "set vf-module-id and vf-module-object-path",
        "xml": "<set>\n<parameter name='vf-module-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $vf-module-topology-operation-input.vf-module-information.vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n<parameter name='vnf-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vnf-topology/'`\"/>\n<parameter name='service-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vf-module-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n",
        "comments": "",
        "x": 590.6663017272949,
        "y": 1892.6261098114774,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "6bb3e148.a2b06",
        "type": "set",
        "name": "copy input data in service-data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.sdnc-request-header.' value='`$vf-module-topology-operation-input.sdnc-request-header.`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.request-information.' value='`$vf-module-topology-operation-input.request-information.`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.service-information.' value='`$vf-module-topology-operation-input.service-information.`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-information.' value='`$vf-module-topology-operation-input.vf-module-information.`' />\n",
        "comments": "",
        "x": 554.6662559509277,
        "y": 1844.876064300537,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "307480f2.c3f12",
        "type": "set",
        "name": "set device PortId to service data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length].name' value='devicePortId' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length].value' value='`$prop.lan.devicePortId`' />\n",
        "comments": "",
        "x": 561.031322479248,
        "y": 1738.0314636230469,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "cfe4c928.772628",
        "type": "set",
        "name": "set lan PortId to service data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length].name' value='lanPortId' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$tmp.vidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param_length].value' value='`$prop.lan.lanPortId`' />\n",
        "comments": "",
        "x": 547.0312461853027,
        "y": 1792.0312767028809,
        "z": "2f0cf160.dc107e",
        "wires": []
    },
    {
        "id": "13d1a87e.cc7dd8",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic21.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"prop.attach.siteId\"/>\n<parameter name=\"field3\" value='`$prop.attach.siteId`'/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2384.0313873291016,
        "y": 914.5312805175781,
        "z": "2f0cf160.dc107e",
        "wires": [
            []
        ]
    },
    {
        "id": "c2240666.9ee948",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic22.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"set spoke role\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2353.0313987731934,
        "y": 645.531247138977,
        "z": "2f0cf160.dc107e",
        "wires": [
            []
        ]
    },
    {
        "id": "5671530f.b2ba5c",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic23.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"param-name\"/>\n<parameter name=\"field3\" value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.vf-module-request-input.vf-module-input-parameters.param[$pidx].name`'/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1847.03125,
        "y": 677.53125,
        "z": "2f0cf160.dc107e",
        "wires": [
            []
        ]
    },
    {
        "id": "785db3d8.98fb5c",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic24.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"request-action\"/>\n<parameter name=\"field3\" value='`$service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfidx].vf-module-data.request-information.request-action`'/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1096.03125,
        "y": 686.53125,
        "z": "2f0cf160.dc107e",
        "wires": [
            []
        ]
    },
    {
        "id": "bacdcf2a.07a41",
        "type": "comment",
        "name": "**revert the changes",
        "info": "",
        "comments": "",
        "x": 1248.0312767028809,
        "y": 683.0312824249268,
        "z": "2f0cf160.dc107e",
        "wires": []
    }
]