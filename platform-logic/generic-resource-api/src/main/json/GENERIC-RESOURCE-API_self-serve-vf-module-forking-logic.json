[{"id":"e165f010.244d3","type":"dgstart","name":"DGSTART","outputs":1,"x":130,"y":62.85714340209961,"z":"e620a365.4a257","wires":[["4deb4c65.576eb4"]]},{"id":"4deb4c65.576eb4","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":244.28570556640625,"y":103.09525489807129,"z":"e620a365.4a257","wires":[["aa880087.e2472"]]},{"id":"aa880087.e2472","type":"method","name":"method self-serve-vf-module-forking-logic","xml":"<method rpc='self-serve-vf-module-forking-logic' mode='sync'>\n","comments":"","outputs":1,"x":267.85719299316406,"y":151.42857551574707,"z":"e620a365.4a257","wires":[["d3462033.237df"]]},{"id":"c11380d2.2767f","type":"switchNode","name":"switch: param[].name","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.param[$p].name`\">\n","comments":"","outputs":1,"x":787.5833282470703,"y":408,"z":"e620a365.4a257","wires":[["b8195917.3db608","df581beb.247948"]]},{"id":"86ff4916.e930e8","type":"for","name":"for p in vf-module-input-parameters.param[]","xml":"<for silentFailure='true' index='p' start='0' end='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.param_length`' >\n","comments":"","outputs":1,"x":493.6904754638672,"y":408.50003242492676,"z":"e620a365.4a257","wires":[["c11380d2.2767f"]]},{"id":"c8a0fdfa.fd72b","type":"set","name":"set tmp.exist.vf_module_label = true","xml":"<set>\n<parameter name='tmp.exist.vf_module_label' value='true' />","comments":"","x":1329.4762573242188,"y":456.85717010498047,"z":"e620a365.4a257","wires":[]},{"id":"b371231d.f6d19","type":"set","name":"set tmp.exist.sdnc-model-name = true","xml":"<set>\n<parameter name='tmp.exist.sdnc-model-name' value='true' />\n","comments":"","x":1332.1903648376465,"y":407.85718536376953,"z":"e620a365.4a257","wires":[]},{"id":"d3462033.237df","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":173,"y":302.809513092041,"z":"e620a365.4a257","wires":[["86ff4916.e930e8","72d0f5dc.50ef7c","75ac533a.ce71cc","db5f2cda.e500e"]]},{"id":"b8195917.3db608","type":"outcome","name":"sdnc_model_name","xml":"<outcome value='sdnc_model_name'>\n","comments":"","outputs":1,"x":1043.7619040352956,"y":407.9047944205147,"z":"e620a365.4a257","wires":[["b371231d.f6d19"]]},{"id":"df581beb.247948","type":"outcome","name":"vf_module_label","xml":"<outcome value='vf_module_label'>\n","comments":"","outputs":1,"x":1046.619026184082,"y":457.33336639404297,"z":"e620a365.4a257","wires":[["c8a0fdfa.fd72b"]]},{"id":"8b2508c1.bc86a8","type":"get-resource","name":"get VF_MODEL.sdnc_model_name","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT sdnc_model_name from VF_MODEL \n  \tWHERE customization_uuid = $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-information.onap-model-information.model-customization-uuid \n  \tAND sdnc_model_name is not null'\n  pfx='db.vf-model-name'>\n\n","comments":"","outputs":1,"x":1199.8572235107422,"y":689.1187467575073,"z":"e620a365.4a257","wires":[["af18ec02.f7299","8e3154c6.67b2b8","4cedd1e8.5cfed"]]},{"id":"af18ec02.f7299","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1450.2143478393555,"y":599.4996871948242,"z":"e620a365.4a257","wires":[["52ada15a.6e3a4"]]},{"id":"8e3154c6.67b2b8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1455.928596496582,"y":786.642599105835,"z":"e620a365.4a257","wires":[["8672ba0c.2720a8"]]},{"id":"52ada15a.6e3a4","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODEL table to determine self-serve forking criteria\" />\n","comments":"","x":1631.2143287658691,"y":599.6425943374634,"z":"e620a365.4a257","wires":[]},{"id":"4d4baf34.251d7","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":951.7026138305664,"y":689.3090238571167,"z":"e620a365.4a257","wires":[["8b2508c1.bc86a8"]]},{"id":"db5f2cda.e500e","type":"switchNode","name":"switch: tmp.exist.sdnc-model-name && tmp.exist.vf_module_label == true","xml":"<switch test=\"`$tmp.exist.sdnc-model-name == 'true' and $tmp.exist.vf_module_label == 'true'`\">\n","comments":"","outputs":1,"x":582.0594329833984,"y":602.571252822876,"z":"e620a365.4a257","wires":[["4d4baf34.251d7","aa171664.89cd08"]]},{"id":"aa171664.89cd08","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":954.6668395996094,"y":522.9283447265625,"z":"e620a365.4a257","wires":[["c7aef73a.253c28"]]},{"id":"fbd180e.095ed8","type":"get-resource","name":"get VF_MODULE_MODEL.vf-module-label","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT vf_module_label from VF_MODULE_MODEL \n  \tWHERE vf_customization_uuid = $vf-module-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid\n  \tAND vf_module_label is not null '\n  pfx='db.vf-module-label'>\n\n","comments":"","outputs":1,"x":1728.0953903198242,"y":689.3570070266724,"z":"e620a365.4a257","wires":[["e361309f.659c5","49207b1f.4607b4","c961fc85.cf2a1"]]},{"id":"e361309f.659c5","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2003.4526138305664,"y":689.4521379470825,"z":"e620a365.4a257","wires":[["5894d7f0.070508"]]},{"id":"49207b1f.4607b4","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2014.0239715576172,"y":737.1664037704468,"z":"e620a365.4a257","wires":[["3bf1408b.9009b"]]},{"id":"5894d7f0.070508","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table to determine self-serve forking criteria\" />\n","comments":"","x":2177.5951232910156,"y":690.0235834121704,"z":"e620a365.4a257","wires":[]},{"id":"c961fc85.cf2a1","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2007.809684753418,"y":640.3570623397827,"z":"e620a365.4a257","wires":[["67e5bedb.4b89e"]]},{"id":"4cedd1e8.5cfed","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1453.8691101074219,"y":689.1188116073608,"z":"e620a365.4a257","wires":[["fbd180e.095ed8"]]},{"id":"72d0f5dc.50ef7c","type":"set","name":"initialize tmp.exist.sdnc-model-name && tmp.exist.vf_module_label = false","xml":"<set>\n<parameter name='tmp.exist.sdnc-model-name' value='false' />\n<parameter name='tmp.exist.vf_module_label' value='false' />\n","comments":"","x":585.5833053588867,"y":303.08317470550537,"z":"e620a365.4a257","wires":[]},{"id":"75ac533a.ce71cc","type":"switchNode","name":"switch: vf-module-input-parameters.param_length","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.param_length`\">\n","comments":"","outputs":1,"x":513.4404830932617,"y":351.559458732605,"z":"e620a365.4a257","wires":[["5f717077.c3f3c"]]},{"id":"5f717077.c3f3c","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":777.0119018554688,"y":351.8451986312866,"z":"e620a365.4a257","wires":[["ddeb321c.3bad4"]]},{"id":"ddeb321c.3bad4","type":"set","name":"set vf-module-input-parameters.param_length = 0","xml":"<set>\n<parameter name='vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.param_length' value='0' />\n","comments":"","x":1050.7261428833008,"y":351.70236015319824,"z":"e620a365.4a257","wires":[]},{"id":"3bf1408b.9009b","type":"set","name":"set ss.self-serve-flag = false","xml":"<set>\n<parameter name='ss.self-serve-flag' value='false' />\n","comments":"","x":2229.999801635742,"y":737.1428709030151,"z":"e620a365.4a257","wires":[]},{"id":"c7aef73a.253c28","type":"set","name":"set ss.self-serve-flag = true","xml":"<set>\n<parameter name='ss.self-serve-flag' value='true' />\n","comments":"","x":1166.0001373291016,"y":522.428596496582,"z":"e620a365.4a257","wires":[]},{"id":"8672ba0c.2720a8","type":"set","name":"set ss.self-serve-flag = false","xml":"<set>\n<parameter name='ss.self-serve-flag' value='false' />\n","comments":"","x":1682.857192993164,"y":786.1428442001343,"z":"e620a365.4a257","wires":[]},{"id":"67e5bedb.4b89e","type":"set","name":"set ss.self-serve-flag = true","xml":"<set>\n<parameter name='ss.self-serve-flag' value='true' />\n","comments":"","x":2218.571548461914,"y":640.1428442001343,"z":"e620a365.4a257","wires":[]}]