[{"id":"da992f0d.44b67","type":"dgstart","name":"DGSTART","outputs":1,"x":107.14286041259766,"y":82.41365623474121,"z":"2ba0710a.b44d9e","wires":[["29e9e0f0.ab074"]]},{"id":"29e9e0f0.ab074","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":220.4285659790039,"y":122.65176773071289,"z":"2ba0710a.b44d9e","wires":[["dd50fd26.cc415"]]},{"id":"dd50fd26.cc415","type":"method","name":"method vf-module-topology-operation-changeassign","xml":"<method rpc='vf-module-topology-operation-changeassign' mode='sync'>\n","comments":"","outputs":1,"x":238.5714874267578,"y":162.4136562347412,"z":"2ba0710a.b44d9e","wires":[["79c3b148.07a3b"]]},{"id":"84faf9e0.06e608","type":"comment","name":"vf-module-topology-operation-changeassign","info":"","comments":"","x":501.4877166748047,"y":30,"z":"2ba0710a.b44d9e","wires":[]},{"id":"aa720c01.4c6e7","type":"switchNode","name":"switch request-action","xml":"<switch test='`$vf-module-topology-operation-input.request-information.request-action`'>\n","comments":"","outputs":1,"x":510.6666717529297,"y":261.2707939147949,"z":"2ba0710a.b44d9e","wires":[["3b4345f8.88f5da","9b9ac81b.174ef8"]]},{"id":"3b4345f8.88f5da","type":"outcome","name":"CreateVfModuleInstance","xml":"<outcome value='CreateVfModuleInstance'>\n","comments":"","outputs":1,"x":761.7142868041992,"y":238.41368007659912,"z":"2ba0710a.b44d9e","wires":[["ccd84558.5e15b8"]]},{"id":"9b9ac81b.174ef8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":705.380931854248,"y":283.79466915130615,"z":"2ba0710a.b44d9e","wires":[["a167f526.deb558"]]},{"id":"ccd84558.5e15b8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":951.5714511871338,"y":238.41371154785156,"z":"2ba0710a.b44d9e","wires":[[]]},{"id":"a167f526.deb558","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'changeassign' then request-action must be 'CreateVfModuleInstance'\" />\n","comments":"","x":970.3809394836426,"y":284.12798166275024,"z":"2ba0710a.b44d9e","wires":[]},{"id":"79c3b148.07a3b","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":168.80953979492188,"y":567.4135789871216,"z":"2ba0710a.b44d9e","wires":[["aa720c01.4c6e7","90150697.a2a2c8","ddad7416.ec53f8","7481a399.651aec","789b525a.90b4fc","1f5309e4.307236","330bb03c.c4cdb","1c2f9838.87e268","3b1e9078.a68f7","337b1a6d.584e26","314a3525.aeef7a"]]},{"id":"ddad7416.ec53f8","type":"switchNode","name":"switch service-data.vnfs.vnf_length","xml":"<switch test='`$service-data.vnfs.vnf_length`'>\n","comments":"","outputs":1,"x":555.476188659668,"y":392.4136209487915,"z":"2ba0710a.b44d9e","wires":[["3fc75bd8.6f4574","1f664b90.09cc14"]]},{"id":"3fc75bd8.6f4574","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":796.1904602050781,"y":369.5563611984253,"z":"2ba0710a.b44d9e","wires":[["949ad32b.c8c7f"]]},{"id":"1f664b90.09cc14","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":795.9523010253906,"y":410.50887966156006,"z":"2ba0710a.b44d9e","wires":[["668a21d8.a0d4c"]]},{"id":"949ad32b.c8c7f","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs defined in MD-SAL\" />\n","comments":"","x":962.8570747375488,"y":368.842116355896,"z":"2ba0710a.b44d9e","wires":[]},{"id":"668a21d8.a0d4c","type":"for","name":"for each vnf","xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n","comments":"","outputs":1,"x":958.1904449462891,"y":410.175498008728,"z":"2ba0710a.b44d9e","wires":[["14976276.b78b0e"]]},{"id":"14976276.b78b0e","type":"switchNode","name":"switch service data vnf == input vnf","xml":"<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`'>\n","comments":"","outputs":1,"x":1209.5236625671387,"y":409.8421850204468,"z":"2ba0710a.b44d9e","wires":[["523c9343.8fbaac"]]},{"id":"523c9343.8fbaac","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1439.523754119873,"y":409.17553901672363,"z":"2ba0710a.b44d9e","wires":[["f5a35f00.3f44e"]]},{"id":"90150697.a2a2c8","type":"set","name":"set vnf-index to -1","xml":"<set>\n<parameter name='vnf-index' value='-1' />\n","comments":"","x":499.52378845214844,"y":330.50879287719727,"z":"2ba0710a.b44d9e","wires":[]},{"id":"ac73b0ea.21603","type":"set","name":"set vnf-index to idx","xml":"<set>\n<parameter name='vnf-index' value='`$idx`' />\n","comments":"","x":1761.1903915405273,"y":380.1754970550537,"z":"2ba0710a.b44d9e","wires":[]},{"id":"7481a399.651aec","type":"switchNode","name":"switch vnf-index","xml":"<switch test='`$vnf-index`'>\n","comments":"","outputs":1,"x":491.1904716491699,"y":457.1754951477051,"z":"2ba0710a.b44d9e","wires":[["a2c7110a.b07f3"]]},{"id":"a2c7110a.b07f3","type":"outcome","name":"-1","xml":"<outcome value='-1'>\n","comments":"","outputs":1,"x":669.5238571166992,"y":456.5088710784912,"z":"2ba0710a.b44d9e","wires":[["14c1d831.ad77d8"]]},{"id":"14c1d831.ad77d8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find VNF ID ' + $vf-module-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'`\" />\n","comments":"","x":829.5237655639648,"y":455.8421745300293,"z":"2ba0710a.b44d9e","wires":[]},{"id":"f5a35f00.3f44e","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1587.8572158813477,"y":408.0952377319336,"z":"2ba0710a.b44d9e","wires":[["ac73b0ea.21603","27cfdd4f.df7ab2"]]},{"id":"27cfdd4f.df7ab2","type":"break","name":"break","xml":"<break>\n","comments":"","x":1722.8571815490723,"y":429.7618236541748,"z":"2ba0710a.b44d9e","wires":[]},{"id":"1f5309e4.307236","type":"switchNode","name":"switch service-data...vf-module_length","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n","comments":"","outputs":1,"x":563.8095016479492,"y":555.746992111206,"z":"2ba0710a.b44d9e","wires":[["80e850ee.91cd9","9214dd99.21076"]]},{"id":"80e850ee.91cd9","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":814.523811340332,"y":534.5563955307007,"z":"2ba0710a.b44d9e","wires":[["eec0405.a5d16c"]]},{"id":"9214dd99.21076","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":814.2856521606445,"y":575.5089139938354,"z":"2ba0710a.b44d9e","wires":[["f33c6312.8a8e1"]]},{"id":"eec0405.a5d16c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'There are no VF modules defined in MD-SAL for VNF ' + $vf-module-topology-operation-input.vnf-information.vnf-id`\" />\n","comments":"","x":981.1904258728027,"y":533.8421506881714,"z":"2ba0710a.b44d9e","wires":[]},{"id":"f33c6312.8a8e1","type":"for","name":"for each vf-module","xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n","comments":"","outputs":1,"x":976.523796081543,"y":575.1755323410034,"z":"2ba0710a.b44d9e","wires":[["ff8c25ec.120d28"]]},{"id":"ff8c25ec.120d28","type":"switchNode","name":"switch service data vf-module == input vf-module","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id == $vf-module-topology-operation-input.vf-module-information.vf-module-id`'>\n","comments":"","outputs":1,"x":1282.8569564819336,"y":574.8422679901123,"z":"2ba0710a.b44d9e","wires":[["6d5e6d3d.3851f4"]]},{"id":"6d5e6d3d.3851f4","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1552.8570098876953,"y":572.5088729858398,"z":"2ba0710a.b44d9e","wires":[["7503373e.1a2f08"]]},{"id":"789b525a.90b4fc","type":"set","name":"set vf-module-index to -1","xml":"<set>\n<parameter name='vf-module-index' value='-1' />\n","comments":"","x":519.5237731933594,"y":505.5088310241699,"z":"2ba0710a.b44d9e","wires":[]},{"id":"46be91f0.a8549","type":"set","name":"set vf-module-index to idx","xml":"<set>\n<parameter name='vf-module-index' value='`$idx`' />\n","comments":"","x":1882.8571014404297,"y":543.5088520050049,"z":"2ba0710a.b44d9e","wires":[]},{"id":"330bb03c.c4cdb","type":"switchNode","name":"switch vf-module-index","xml":"<switch test='`$vf-module-index`'>\n","comments":"","outputs":1,"x":516.1904754638672,"y":623.8422508239746,"z":"2ba0710a.b44d9e","wires":[["557bb4da.8e9aec"]]},{"id":"557bb4da.8e9aec","type":"outcome","name":"-1","xml":"<outcome value='-1'>\n","comments":"","outputs":1,"x":694.5238609313965,"y":623.1756267547607,"z":"2ba0710a.b44d9e","wires":[["6bf84696.1d93b8"]]},{"id":"6bf84696.1d93b8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find VF module ID ' + $vf-module-topology-operation-input.vf-module-information.vf-module-id + ' in MD-SAL'`\" />\n","comments":"","x":854.5237693786621,"y":622.5089302062988,"z":"2ba0710a.b44d9e","wires":[]},{"id":"7503373e.1a2f08","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1686.1905517578125,"y":571.4286127090454,"z":"2ba0710a.b44d9e","wires":[["46be91f0.a8549","b1e36853.28a4e8"]]},{"id":"b1e36853.28a4e8","type":"break","name":"break","xml":"<break>\n","comments":"","x":1821.190517425537,"y":593.0951986312866,"z":"2ba0710a.b44d9e","wires":[]},{"id":"1c2f9838.87e268","type":"set","name":"set order-status to Created","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='Created' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n","comments":"","x":525.4762001037598,"y":909.0803050994873,"z":"2ba0710a.b44d9e","wires":[]},{"id":"6832f202.dc2d6c","type":"switchNode","name":"switch order-status","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status`'>\n","comments":"","outputs":1,"x":507.14281463623047,"y":714.7469882965088,"z":"2ba0710a.b44d9e","wires":[["758b5b66.face94","1f6160f.207619f"]]},{"id":"758b5b66.face94","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":679.1429100036621,"y":733.4613170623779,"z":"2ba0710a.b44d9e","wires":[["4fcc550b.db322c"]]},{"id":"4ebc5b7f.a7cbb4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":850.333366394043,"y":685.7470607757568,"z":"2ba0710a.b44d9e","wires":[[]]},{"id":"4fcc550b.db322c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Order status is ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status + ' instead of PendingDelete'`\" />\n","comments":"","x":864.8095664978027,"y":733.4613580703735,"z":"2ba0710a.b44d9e","wires":[]},{"id":"3b1e9078.a68f7","type":"set","name":"copy ONAP model information","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.onap-model-information.'\n   value='$vf-module-topology-operation-input.vf-module-information.onap-model-information.' />\n\n","comments":"","x":537.142822265625,"y":862.4136772155762,"z":"2ba0710a.b44d9e","wires":[]},{"id":"337b1a6d.584e26","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n","comments":"","x":485.4761085510254,"y":957.4136009216309,"z":"2ba0710a.b44d9e","wires":[]},{"id":"1f6160f.207619f","type":"outcome","name":"PendingDelete","xml":"<outcome value='PendingDelete'>\n","comments":"","outputs":1,"x":703.8095397949219,"y":684.9999704360962,"z":"2ba0710a.b44d9e","wires":[["4ebc5b7f.a7cbb4"]]},{"id":"314a3525.aeef7a","type":"get-resource","name":"get-resource VF_MODULE_MODEL","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODULE_MODEL WHERE customization_uuid = $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid'\n  pfx='db.vf-module-model'>\n\n","comments":"","outputs":1,"x":558.8095092773438,"y":795.7469310760498,"z":"2ba0710a.b44d9e","wires":[["decf8bc6.2dd9f8","aad15991.71cb48"]]},{"id":"ec18997a.e36f68","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No model found for VF module customization UUID ' + $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`\" />\n","comments":"","x":1000.2379302978516,"y":820.1754035949707,"z":"2ba0710a.b44d9e","wires":[]},{"id":"decf8bc6.2dd9f8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":824.5951995849609,"y":776.1277618408203,"z":"2ba0710a.b44d9e","wires":[["3537c70d.082bb8"]]},{"id":"aad15991.71cb48","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":833.1666297912598,"y":820.4134750366211,"z":"2ba0710a.b44d9e","wires":[["ec18997a.e36f68"]]},{"id":"3537c70d.082bb8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table\" />\n","comments":"","x":999.5951309204102,"y":775.2706623077393,"z":"2ba0710a.b44d9e","wires":[]},{"id":"f3e2ca2e.68db28","type":"comment","name":"check removed with US622450","info":"","comments":"","x":462.8571472167969,"y":675.7142944335938,"z":"2ba0710a.b44d9e","wires":[]}]