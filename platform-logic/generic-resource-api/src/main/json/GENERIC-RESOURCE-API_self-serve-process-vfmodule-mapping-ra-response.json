[{"id":"79a754d7.03267c","type":"dgstart","name":"DGSTART","outputs":1,"x":138.57142639160156,"y":61.42857360839844,"z":"1823fdbd.4322b2","wires":[["5f07514.3329cb"]]},{"id":"5f07514.3329cb","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":414.57142639160156,"y":62.42857360839844,"z":"1823fdbd.4322b2","wires":[["ab2e4dba.2286e"]]},{"id":"ab2e4dba.2286e","type":"method","name":"self-serve-process-vfmodule-mapping-ra-response","xml":"<method rpc='self-serve-process-vfmodule-mapping-ra-response' mode='sync'>\n","comments":"","outputs":1,"x":304.0714416503906,"y":116.17857551574707,"z":"1823fdbd.4322b2","wires":[["553fad5c.980e24"]]},{"id":"553fad5c.980e24","type":"block","name":"block atomic","xml":"<block atomic=\"true\">\n","atomic":"false","comments":"","outputs":1,"x":197.83727264404297,"y":187.04762268066406,"z":"1823fdbd.4322b2","wires":[["fe513761.0453c8","46e20dec.d3b074","41663779.ca9db8","269dfcc8.a905a4"]]},{"id":"fe513761.0453c8","type":"switchNode","name":"switch resolution-summary_length","xml":"<switch test='`$jsonContextPrefix.resolution-summary_length`'>\n","comments":"","outputs":1,"x":489.6229705810547,"y":230.41666984558105,"z":"1823fdbd.4322b2","wires":[["2b5ec4f9.cbde6c"]]},{"id":"2b5ec4f9.cbde6c","type":"not-found","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":798.1943817138672,"y":229.84525871276855,"z":"1823fdbd.4322b2","wires":[["9b918b20.342278"]]},{"id":"9b918b20.342278","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"resolution-summary_length is null\" />\n","comments":"","x":969.1944198608398,"y":230.41666793823242,"z":"1823fdbd.4322b2","wires":[]},{"id":"46e20dec.d3b074","type":"for","name":"for resolution-summary[]","xml":"<for silentFailure='true'  index='vdns-index' start='0' end='`$jsonContextPrefix.resolution-summary_length`' >\n","comments":"","outputs":1,"x":455.8333282470703,"y":440.4166946411133,"z":"1823fdbd.4322b2","wires":[["954f452d.486a28"]]},{"id":"938b4d93.409c3","type":"set","name":" ADD resolution-summary[].name/value to param[]","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$highnum].name' \n\tvalue='`$jsonContextPrefix.resolution-summary[$vdns-index].name`'/>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$highnum].value' \n\tvalue='`$jsonContextPrefix.resolution-summary[$vdns-index].value`'/>","comments":"","x":1687.3333129882812,"y":522.666711807251,"z":"1823fdbd.4322b2","wires":[]},{"id":"3ef76de7.5dfde2","type":"for","name":"for vf-module-parameters.param[]","xml":"<for silentFailure='true' index='param-index' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`' >\n","comments":"","outputs":1,"x":1359.0833358764648,"y":439.41670989990234,"z":"1823fdbd.4322b2","wires":[["f75c0cc1.c0d76"]]},{"id":"954f452d.486a28","type":"block","name":"block atomic","xml":"<block atomic=\"true\">","atomic":"false","comments":"","outputs":1,"x":683.833309173584,"y":440.16671085357666,"z":"1823fdbd.4322b2","wires":[["94a79fec.a4fc6","636f16f7.c04838","267a31a7.235fee"]]},{"id":"f75c0cc1.c0d76","type":"switchNode","name":"switch param[].name == resolution-summary[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$param-index].name == $jsonContextPrefix.resolution-summary[$vdns-index].name`'>","comments":"","outputs":1,"x":1755.0833358764648,"y":439.41670989990234,"z":"1823fdbd.4322b2","wires":[["fca48735.1564f8"]]},{"id":"fca48735.1564f8","type":"not-found","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2075.083335876465,"y":439.41670989990234,"z":"1823fdbd.4322b2","wires":[["57f68d23.7bf1d4"]]},{"id":"b76edb5a.1c05a8","type":"set","name":"set param[].value = resolution-summary[].value","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$param-index].value' \n\tvalue='`$jsonContextPrefix.resolution-summary[$vdns-index].value`'/>\n","comments":"","x":2500.08345413208,"y":407.66670989990234,"z":"1823fdbd.4322b2","wires":[]},{"id":"267a31a7.235fee","type":"switchNode","name":"switch tmp.mso.param.found","xml":"<switch test='`$tmp.mso.param.found`'>\n","comments":"","outputs":1,"x":929.8333129882812,"y":522.166711807251,"z":"1823fdbd.4322b2","wires":[["bdf7df62.8888c"]]},{"id":"bdf7df62.8888c","type":"not-found","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1157.3333129882812,"y":521.666711807251,"z":"1823fdbd.4322b2","wires":[["50cf521c.43565c"]]},{"id":"94a79fec.a4fc6","type":"set","name":"set tmp.mso.param.found = false","xml":"<set>\n<parameter name='tmp.mso.param.found' value='false' />\n","comments":"","x":945.8332977294922,"y":362.4167232513428,"z":"1823fdbd.4322b2","wires":[]},{"id":"636f16f7.c04838","type":"switchNode","name":"switch prehighnum > 0","xml":"<switch test='`$prehighnum &gt; 0`'>\n","comments":"","outputs":1,"x":910.333309173584,"y":440.16671085357666,"z":"1823fdbd.4322b2","wires":[["c66e2a0d.6fd948"]]},{"id":"c66e2a0d.6fd948","type":"not-found","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1124.8689613342285,"y":439.9881534576416,"z":"1823fdbd.4322b2","wires":[["3ef76de7.5dfde2"]]},{"id":"50cf521c.43565c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1334.3333129882812,"y":521.666711807251,"z":"1823fdbd.4322b2","wires":[["938b4d93.409c3","5e3df1a4.6ec2c","17be5cec.c2a0e3","f55a1ca5.c81d9","c092e803.425f58","b53942f9.6835c"]]},{"id":"5e3df1a4.6ec2c","type":"set","name":"highnum++","xml":"<set>\n\t<parameter name='highnum' value='`$highnum + 1`' />\n","comments":"","x":1547.158576965332,"y":846.9484558105469,"z":"1823fdbd.4322b2","wires":[]},{"id":"17fdac5b.a35a14","type":"comment","name":"vdns-index","info":"","comments":"","x":487.5595016479492,"y":399.65477752685547,"z":"1823fdbd.4322b2","wires":[]},{"id":"36736ef5.d25a72","type":"comment","name":"param-index","info":"","comments":"","x":1396.3095245361328,"y":398.65477657318115,"z":"1823fdbd.4322b2","wires":[]},{"id":"b59f84a4.fbb0f8","type":"set","name":"set tmp.mso.param.found = true","xml":"<set>\n<parameter name='tmp.mso.param.found' value='true' />\n","comments":"","x":2441.309524536133,"y":471.90478134155273,"z":"1823fdbd.4322b2","wires":[]},{"id":"57f68d23.7bf1d4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2213.309524536133,"y":438.9047794342041,"z":"1823fdbd.4322b2","wires":[["b76edb5a.1c05a8","b59f84a4.fbb0f8"]]},{"id":"17be5cec.c2a0e3","type":"switchNode","name":"switch dictionary-source","xml":"<switch test='`$jsonContextPrefix.resolution-summary[$vdns-index].dictionary-source`'>\n","comments":"","outputs":1,"x":1587.559497833252,"y":605.9047651290894,"z":"1823fdbd.4322b2","wires":[["4a257f5c.6e8cc"]]},{"id":"4a257f5c.6e8cc","type":"other","name":"sdnc","xml":"<outcome value='sdnc'>\n","comments":"","outputs":1,"x":1800.0595054626465,"y":605.904764175415,"z":"1823fdbd.4322b2","wires":[["c6b4f5b9.5551d8"]]},{"id":"f3cd0176.72782","type":"comment","name":"capability","info":"","comments":"","x":1818.8095092773438,"y":569.6547622680664,"z":"1823fdbd.4322b2","wires":[]},{"id":"c6b4f5b9.5551d8","type":"for","name":"for key-identifiers[]","xml":"<for silentFailure='true'  index='kid-index' start='0' end='`$jsonContextPrefix.resolution-summary[$vdns-index].key-identifiers_length`' >\n","comments":"","outputs":1,"x":1991.3094787597656,"y":605.9047546386719,"z":"1823fdbd.4322b2","wires":[["6e3cdabe.e05b74"]]},{"id":"6e3cdabe.e05b74","type":"set","name":"set resource-key[] to key-identifiers[] ","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$highnum].resource-resolution-data.resource-key[$kid-index].name' \n\tvalue='`$jsonContextPrefix.resolution-summary[$vdns-index].key-identifiers[$kid-index].name`'/>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$highnum].resource-resolution-data.resource-key[$kid-index].value' \n\tvalue='`$jsonContextPrefix.resolution-summary[$vdns-index].key-identifiers[$kid-index].value`'/>\n","comments":"","x":2289.0595092773438,"y":606.154764175415,"z":"1823fdbd.4322b2","wires":[]},{"id":"f55a1ca5.c81d9","type":"set","name":"set request-payload","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$highnum].resource-resolution-data.payload' \n\tvalue='`$jsonContextPrefix.resolution-summary[$vdns-index].request-payload`'/>\n\n","comments":"","x":1574.420539855957,"y":733.7936515808105,"z":"1823fdbd.4322b2","wires":[]},{"id":"ba13b3a1.e2577","type":"comment","name":"Overwrite MSO input with RA response","info":"","comments":"","x":2136.8095092773438,"y":379.6547603607178,"z":"1823fdbd.4322b2","wires":[]},{"id":"c092e803.425f58","type":"set","name":"set param[].status and capability-name","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$highnum].resource-resolution-data.capability-name' \n\tvalue='RA Resolved'/>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$highnum].resource-resolution-data.status' \n\tvalue='`$jsonContextPrefix.resolution-summary[$vdns-index].status`'/>","comments":"","x":1642.6705474853516,"y":793.7936534881592,"z":"1823fdbd.4322b2","wires":[]},{"id":"f4090c21.3d36a","type":"comment","name":"NEW param from RA response","info":"","comments":"","x":1226.3094940185547,"y":488.4047622680664,"z":"1823fdbd.4322b2","wires":[]},{"id":"b53942f9.6835c","type":"set","name":"set resource-resolution-data.resource-key_length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$highnum].resource-resolution-data.resource-key_length' \n\tvalue='`$jsonContextPrefix.resolution-summary[$vdns-index].key-identifiers_length`' />\n","comments":"","x":1675.5555267333984,"y":674.4444303512573,"z":"1823fdbd.4322b2","wires":[]},{"id":"269dfcc8.a905a4","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"DONE: self-serve-process-vfmodule-mapping-ra-response\"/>\n\n","comments":"","outputs":1,"x":384.08330154418945,"y":968.3610124588013,"z":"1823fdbd.4322b2","wires":[[]]},{"id":"41663779.ca9db8","type":"set","name":"set service-data...param_length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length' \n\tvalue='`$highnum`'/>\n","comments":"","x":473.2975425720215,"y":915.2181148529053,"z":"1823fdbd.4322b2","wires":[]}]