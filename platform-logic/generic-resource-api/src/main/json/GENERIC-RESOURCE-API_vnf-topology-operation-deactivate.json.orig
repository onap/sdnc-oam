[
    {
        "id": "704d0b14.d5c684",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 98.33332824707031,
        "y": 90.74698829650879,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "72e4c75c.02dbd8"
            ]
        ]
    },
    {
        "id": "72e4c75c.02dbd8",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 173.61903381347656,
        "y": 130.98509979248047,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "cf8e6aa3.702178"
            ]
        ]
    },
    {
        "id": "cf8e6aa3.702178",
        "type": "method",
        "name": "method vnf-topology-operation-deactivate",
        "xml": "<method rpc='vnf-topology-operation-deactivate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 200.76195526123047,
        "y": 170.7469882965088,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "cb96d310.99dca"
            ]
        ]
    },
    {
        "id": "95de4493.48a0c8",
        "type": "comment",
        "name": "vnf-topology-operation-deactivate",
        "info": "",
        "comments": "",
        "x": 492.67818450927734,
        "y": 38.33333206176758,
        "z": "31f1f0b7.be812",
        "wires": []
    },
    {
        "id": "163c9760.9a9a79",
        "type": "switchNode",
        "name": "switch request-action",
        "xml": "<switch test='`$vnf-topology-operation-input.request-information.request-action`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 501.85713958740234,
        "y": 269.6041259765625,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "80b90203.c142f",
                "3890f05d.c33f7"
            ]
        ]
    },
    {
        "id": "80b90203.c142f",
        "type": "outcome",
        "name": "DeleteVnfInstance",
        "xml": "<outcome value='DeleteVnfInstance'>\n",
        "comments": "",
        "outputs": 1,
        "x": 728.5714149475098,
        "y": 245.08034229278564,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "df5429cb.487c88"
            ]
        ]
    },
    {
        "id": "3890f05d.c33f7",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 692.5713806152344,
        "y": 290.79467010498047,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "d4e21439.6c2c68"
            ]
        ]
    },
    {
        "id": "df5429cb.487c88",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 915.4285430908203,
        "y": 245.08037185668945,
        "z": "31f1f0b7.be812",
        "wires": [
            []
        ]
    },
    {
        "id": "d4e21439.6c2c68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'deactivate' then request-action must be 'DeleteVnfInstance'\" />\n",
        "comments": "",
        "x": 932.5713882446289,
        "y": 290.79462814331055,
        "z": "31f1f0b7.be812",
        "wires": []
    },
    {
        "id": "cb96d310.99dca",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 174.99999237060547,
        "y": 392.4136600494385,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "163c9760.9a9a79",
                "791aad2d.6402d4",
                "5fe470c0.6326b",
                "314e05bd.fd765a",
                "2ee980dc.3023e",
                "c5ae4e0b.ba491",
                "2cdd37b1.513c28",
                "b687fc0c.6ee0d"
            ]
        ]
    },
    {
        "id": "791aad2d.6402d4",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 488.33331298828125,
        "y": 339.0803518295288,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "69686a76.3c1234"
            ]
        ]
    },
    {
        "id": "69686a76.3c1234",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 674.9999923706055,
        "y": 338.413649559021,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "6713d6bd.53f838"
            ]
        ]
    },
    {
        "id": "6713d6bd.53f838",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs in MD-SAL\" />\n",
        "comments": "",
        "x": 856.666618347168,
        "y": 338.413649559021,
        "z": "31f1f0b7.be812",
        "wires": []
    },
    {
        "id": "5fe470c0.6326b",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 469.99999237060547,
        "y": 387.41366958618164,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "813eeeef.71253"
            ]
        ]
    },
    {
        "id": "813eeeef.71253",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 725.0000801086426,
        "y": 386.08033752441406,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "3f5d6dbd.824612"
            ]
        ]
    },
    {
        "id": "3f5d6dbd.824612",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 963.333366394043,
        "y": 385.0803155899048,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "92e2ba42.5870e8"
            ]
        ]
    },
    {
        "id": "92e2ba42.5870e8",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1131.666561126709,
        "y": 385.08033752441406,
        "z": "31f1f0b7.be812",
        "wires": []
    },
    {
        "id": "314e05bd.fd765a",
        "type": "switchNode",
        "name": "switch vnf-index",
        "xml": "<switch test='`$vnf-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 481.6666488647461,
        "y": 434.08033895492554,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "dc4d0087.64549"
            ]
        ]
    },
    {
        "id": "dc4d0087.64549",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 663.3332748413086,
        "y": 433.41366958618164,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "815b45d5.3c6cc8"
            ]
        ]
    },
    {
        "id": "815b45d5.3c6cc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"'Could not find VNF ' + $vnf-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'\" />\n",
        "comments": "",
        "x": 829.9999618530273,
        "y": 433.08029556274414,
        "z": "31f1f0b7.be812",
        "wires": []
    },
    {
        "id": "2ee980dc.3023e",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 474.9999771118164,
        "y": 654.0803279876709,
        "z": "31f1f0b7.be812",
        "wires": []
    },
    {
        "id": "c5ae4e0b.ba491",
        "type": "set",
        "name": "set vnf-level-oper-status to PendingDelete",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status' value='PendingDelete' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />\n",
        "comments": "",
        "x": 562.4800567626953,
        "y": 609.7507572174072,
        "z": "31f1f0b7.be812",
        "wires": []
    },
    {
        "id": "2cdd37b1.513c28",
        "type": "set",
        "name": "copy input data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.sdnc-request-header.' value='$vnf-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.request-information.' value='$vnf-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.' value='$vnf-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-information.' value='$vnf-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-request-input.' value='$vnf-topology-operation-input.vnf-request-input.' />\n\n",
        "comments": "",
        "x": 476.6665573120117,
        "y": 567.4136371612549,
        "z": "31f1f0b7.be812",
        "wires": []
    },
    {
        "id": "4fa6056b.b7de5c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No generic-vnf found in AAI for vnf ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-id`\" />\n",
        "comments": "",
        "x": 1028.3332710266113,
        "y": 520.0000114440918,
        "z": "31f1f0b7.be812",
        "wires": []
    },
    {
        "id": "142a1a7a.ff7cd6",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 859.3571701049805,
        "y": 476.28582286834717,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "ec70e2bc.1d824"
            ]
        ]
    },
    {
        "id": "20247378.f063bc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 867.9286003112793,
        "y": 520.571536064148,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "4fa6056b.b7de5c"
            ]
        ]
    },
    {
        "id": "ec70e2bc.1d824",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating generic-vnf in AAI\" />\n",
        "comments": "",
        "x": 1031.0238647460938,
        "y": 476.76221656799316,
        "z": "31f1f0b7.be812",
        "wires": []
    },
    {
        "id": "b687fc0c.6ee0d",
        "type": "save",
        "name": "update generic-vnf orch-status to PendingDelete",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"generic-vnf\"\n   key=\"generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"orchestration-status\" value=\"PendingDelete\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 583.3332366943359,
        "y": 496.00005054473877,
        "z": "31f1f0b7.be812",
        "wires": [
            [
                "142a1a7a.ff7cd6",
                "20247378.f063bc"
            ]
        ]
    }
]
