[
  {
    "id": "503a78f7.47ca18",
    "type": "switchNode",
    "name": "switch service-data.vnfs.vnf_length",
    "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 657.0634536743164,
    "y": 392,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "77aa4ba.68c1bb4",
        "4952201a.7d4c8"
      ]
    ]
  },
  {
    "id": "1a9196c0.4e6769",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 118.96875,
    "y": 156.73882961273193,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "902e1c94.66f24"
      ]
    ]
  },
  {
    "id": "902e1c94.66f24",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 194.25445556640625,
    "y": 196.9769411087036,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "a3cff3f0.d5beb"
      ]
    ]
  },
  {
    "id": "2648545f.a0239c",
    "type": "comment",
    "name": "wan port-vnf-topology-operation-delete",
    "info": "",
    "comments": "",
    "x": 568.3136672973633,
    "y": 230.32522869110107,
    "z": "944c3ee1.29b9e",
    "wires": []
  },
  {
    "id": "cb66206e.4a85e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 195.63541412353516,
    "y": 458.4055013656616,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "99c3b58a.28fe68",
        "41864004.a59f8",
        "7d0a1f82.5f016",
        "60ff59e4.f2b988",
        "335cedb5.736ac2",
        "503a78f7.47ca18",
        "ee257c77.ce85f",
        "b68bb604.af2598",
        "55b1fa8a.f95f74"
      ]
    ]
  },
  {
    "id": "77aa4ba.68c1bb4",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 921.7857666015625,
    "y": 374.5556221008301,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "5f41004a.301df"
      ]
    ]
  },
  {
    "id": "5f41004a.301df",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1102.7856369018555,
    "y": 369.5555000305176,
    "z": "944c3ee1.29b9e",
    "wires": []
  },
  {
    "id": "4952201a.7d4c8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 907.2857666015625,
    "y": 426.55558490753174,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "dcbc4218.194a6"
      ]
    ]
  },
  {
    "id": "dcbc4218.194a6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1079.285472869873,
    "y": 426.5555830001831,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "b8b4f7cf.20f728",
        "f6b988cf.3ccc88",
        "a936ae5c.480e"
      ]
    ]
  },
  {
    "id": "f6b988cf.3ccc88",
    "type": "switchNode",
    "name": "switch tmp.vidx ",
    "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1254.28564453125,
    "y": 445.55550479888916,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "2be170a7.d1fc4"
      ]
    ]
  },
  {
    "id": "335cedb5.736ac2",
    "type": "switchNode",
    "name": "switch vnf-level-oper-status",
    "xml": "<switch test='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 627.4524536132812,
    "y": 466.4444637298584,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "2a3d41e1.8aa8ce",
        "c521841a.091868"
      ]
    ]
  },
  {
    "id": "2a3d41e1.8aa8ce",
    "type": "outcome",
    "name": "outcome PendingDelete",
    "xml": "<outcome value='PendingDelete'>\n",
    "comments": "",
    "outputs": 1,
    "x": 918.2857208251953,
    "y": 470.55558681488037,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "edb94879.c47ed8"
      ]
    ]
  },
  {
    "id": "c521841a.091868",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 864.2857818603516,
    "y": 517.5555906295776,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "8d57a7f4.cb78b8"
      ]
    ]
  },
  {
    "id": "8d57a7f4.cb78b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VNF is not in appropriate state for activate. Current state is ' + $service-data.vnfs.vnf[$tmp.nidx].vnf-data.vnf-level-oper-status.order-status`\" />",
    "comments": "",
    "x": 1023.7855491638184,
    "y": 520.5555896759033,
    "z": "944c3ee1.29b9e",
    "wires": []
  },
  {
    "id": "ee257c77.ce85f",
    "type": "switchNode",
    "name": "switch vnf-id",
    "xml": "<switch test=\"`$vnf-topology-operation-input.vnf-information.vnf-id`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 593.2857704162598,
    "y": 347.5555934906006,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "d82c9312.151d9"
      ]
    ]
  },
  {
    "id": "d82c9312.151d9",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>",
    "comments": "",
    "outputs": 1,
    "x": 791.2858352661133,
    "y": 337.5556058883667,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "a3bf6d80.2d0f6"
      ]
    ]
  },
  {
    "id": "a3bf6d80.2d0f6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-request-input.vnf-input-parameters.name is a required input\" />\n",
    "comments": "",
    "x": 957.7857208251953,
    "y": 334.5556001663208,
    "z": "944c3ee1.29b9e",
    "wires": []
  },
  {
    "id": "b8b4f7cf.20f728",
    "type": "for",
    "name": "for vidx..service-data.vnfs.vnf[]",
    "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1314.7856483459473,
    "y": 381.5555009841919,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "ba14948d.015c78"
      ]
    ]
  },
  {
    "id": "ba14948d.015c78",
    "type": "switchNode",
    "name": "switch vnf-id found",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1570.7856674194336,
    "y": 381.5555009841919,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "b53ab16b.22442"
      ]
    ]
  },
  {
    "id": "b53ab16b.22442",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1747.2857208251953,
    "y": 384.5555009841919,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "c9311851.f90738"
      ]
    ]
  },
  {
    "id": "c9311851.f90738",
    "type": "set",
    "name": "set tmp.vidx and ctx.vnf-data",
    "xml": "<set>\n<parameter name='tmp.vidx' value='`$vidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vidx].vnf-data.`' />\n",
    "comments": "",
    "x": 1914.2857360839844,
    "y": 445.5555009841919,
    "z": "944c3ee1.29b9e",
    "wires": []
  },
  {
    "id": "6ec9cdbe.844104",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1559.785659790039,
    "y": 445.55550479888916,
    "z": "944c3ee1.29b9e",
    "wires": []
  },
  {
    "id": "2be170a7.d1fc4",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1422.285659790039,
    "y": 445.55550479888916,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "6ec9cdbe.844104"
      ]
    ]
  },
  {
    "id": "7d0a1f82.5f016",
    "type": "set",
    "name": "set vnfId and vnf-object-path",
    "xml": "<set>\n<parameter name='vnfId' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name='vnf-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $vnf-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'` \" />",
    "comments": "",
    "x": 605.3021850585938,
    "y": 642.0722465515137,
    "z": "944c3ee1.29b9e",
    "wires": []
  },
  {
    "id": "60ff59e4.f2b988",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 554.4133453369141,
    "y": 767.6276769638062,
    "z": "944c3ee1.29b9e",
    "wires": []
  },
  {
    "id": "99c3b58a.28fe68",
    "type": "set",
    "name": "set new vnf length",
    "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf_length\" value=\"`$service-data.vnfs.vnf_length - 1`\"/>\n\n\t\n",
    "comments": "",
    "x": 585.9347686767578,
    "y": 539.5431041717529,
    "z": "944c3ee1.29b9e",
    "wires": []
  },
  {
    "id": "41864004.a59f8",
    "type": "set",
    "name": "Remove vnf from ServiceData",
    "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$tmp.vidx].\" value=\"\"/>\n\n",
    "comments": "",
    "x": 621.5589599609375,
    "y": 583.5110712051392,
    "z": "944c3ee1.29b9e",
    "wires": []
  },
  {
    "id": "edb94879.c47ed8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1115.5921211242676,
    "y": 480.88074111938477,
    "z": "944c3ee1.29b9e",
    "wires": [
      []
    ]
  },
  {
    "id": "a3cff3f0.d5beb",
    "type": "method",
    "name": "method sdwan-vnf-topology-operation-wanport-delete",
    "xml": "<method rpc='sdwan-vnf-topology-operation-wanport-delete' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 199.5,
    "y": 313,
    "z": "944c3ee1.29b9e",
    "wires": [
      [
        "cb66206e.4a85e"
      ]
    ]
  },
  {
    "id": "b68bb604.af2598",
    "type": "execute",
    "name": "execute requiredParameters",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='requiredParameters' >\n<parameter name=\"vnf-topology-operation-input.vnf-information.vnf-id\" value=\"$vnf-topology-operation-input.vnf-information.vnf-id\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 650.7858276367188,
    "y": 287.55559253692627,
    "z": "944c3ee1.29b9e",
    "wires": [
      []
    ]
  },
  {
    "id": "55b1fa8a.f95f74",
    "type": "delete",
    "name": "delete wan port instance configuration in AAI",
    "xml": "<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" resource='wan-port-config' \n        key='wan-port-config.id = $vnf-topology-operation-input.vnf-information.vnf-id'>\n",
    "comments": "",
    "outputs": 1,
    "x": 657.5,
    "y": 704,
    "z": "944c3ee1.29b9e",
    "wires": [
      []
    ]
  },
  {
    "id": "a936ae5c.480e",
    "type": "record",
    "name": "record",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"tmp.vidx1234555\"/>\n<parameter name=\"field3\" value='`$tmp.vidx`'/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1303.5001373291016,
    "y": 500.0000123977661,
    "z": "944c3ee1.29b9e",
    "wires": [
      []
    ]
  }
]
