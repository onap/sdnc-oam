[{"id":"6c77e0ff.812608","type":"dgstart","name":"DGSTART","outputs":1,"x":115,"y":68,"z":"3d31b783.83364","wires":[["eeca2dac.71c38"]]},{"id":"eeca2dac.71c38","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"Reserve/release VNI","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":298,"y":157,"z":"3d31b783.83364","wires":[["5622528.2d1752c"]]},{"id":"5622528.2d1752c","type":"method","name":"manage-ipaddr-assignment","xml":"<method rpc='manage-ipaddr-assignment' mode='sync'>\n","comments":"","outputs":1,"x":400,"y":229,"z":"3d31b783.83364","wires":[["928c2075.c1ea38"]]},{"id":"6b987445.22932c","type":"switchNode","name":"switch $tmp.manageIpaddr.action","xml":"<switch test='`$tmp.manageIpaddr.action`'>\n","comments":"","outputs":1,"x":874,"y":262,"z":"3d31b783.83364","wires":[["c7842702.edc6a8","bdab292c.3fb228"]]},{"id":"c7842702.edc6a8","type":"outcome","name":"reserve","xml":"<outcome value='reserve'>\n","comments":"","outputs":1,"x":1156,"y":261,"z":"3d31b783.83364","wires":[["fe238eec.5c8f68"]]},{"id":"fe238eec.5c8f68","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1328,"y":263,"z":"3d31b783.83364","wires":[["b640d0c8.5d0da8"]]},{"id":"b640d0c8.5d0da8","type":"get-resource","name":"get-resource IPADDR from IPV4_ADDRESS_POOL","xml":"<get-resource plugin='`$tmp.sql.plugin`' resource='VNI' key=\"SELECT min(ipv4_addr) ip from IPV4_ADDRESS_POOL where universe = $tmp.manageIpaddr.pool and status='AVAILABLE'\" pfx=\"tmp.manageIpaddr\" >\n","comments":"","outputs":1,"x":1609,"y":264,"z":"3d31b783.83364","wires":[["834dd8d3.47713"]]},{"id":"928c2075.c1ea38","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":632,"y":228,"z":"3d31b783.83364","wires":[["faee9c.6ff1d968","6b987445.22932c"]]},{"id":"faee9c.6ff1d968","type":"set","name":"set sql plugin name","xml":"<set>\n<parameter name='tmp.sql.plugin' value='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' />\n","comments":"","x":839,"y":187,"z":"3d31b783.83364","wires":[]},{"id":"834dd8d3.47713","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1881,"y":262,"z":"3d31b783.83364","wires":[["c03409b6.2bb5d"]]},{"id":"c03409b6.2bb5d","type":"save","name":"Mark ip address reserved","xml":"<save plugin='`$tmp.sql.plugin`' resource='IPADDR' key=\"UPDATE IPV4_ADDRESS_POOL set status='RESERVED' where universe='VGW' and ipv4_addr = $tmp.manageIpaddr.ip\" force='false'>\n\n","comments":"","outputs":1,"x":2098,"y":264,"z":"3d31b783.83364","wires":[[]]},{"id":"bdab292c.3fb228","type":"outcome","name":"release","xml":"<outcome value='release'>\n","comments":"","outputs":1,"x":1154,"y":328,"z":"3d31b783.83364","wires":[["22501595.859f1a"]]},{"id":"22501595.859f1a","type":"save","name":"Mark ipaddress available","xml":"<save plugin='`$tmp.sql.plugin`' resource='IPADDR' key=\"UPDATE IPV4_ADDRESS_POOL set status='AVAILABLE' where universe='VGW' and ipv4_addr = $tmp.manageIpaddr.ip\" force='false'>\n\n","comments":"","outputs":1,"x":1340,"y":331,"z":"3d31b783.83364","wires":[[]]}]