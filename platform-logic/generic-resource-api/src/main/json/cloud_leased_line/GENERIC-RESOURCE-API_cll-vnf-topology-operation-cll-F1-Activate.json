[
    {
        "id": "6467c9b6.3ea7b",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 415.8833312988281,
        "y": 377,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "1c0c6fa0.017178",
                "ec984d7b.605098",
                "25450eba.0fd99a"
            ]
        ]
    },
    {
        "id": "1c0c6fa0.017178",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 603.8833312988281,
        "y": 390,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "fcdf737f.3ba08"
            ]
        ]
    },
    {
        "id": "ec984d7b.605098",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 611.374267578125,
        "y": 432.57403564453125,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "25450eba.0fd99a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 601.8833312988281,
        "y": 479,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "f645589d.ed3d98"
            ]
        ]
    },
    {
        "id": "fcdf737f.3ba08",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 776.8833312988281,
        "y": 388,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "6641b1bb.011df8"
            ]
        ]
    },
    {
        "id": "6641b1bb.011df8",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1005.8833312988281,
        "y": 389,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "42fd94e4.9f459c"
            ]
        ]
    },
    {
        "id": "42fd94e4.9f459c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1220.8833312988281,
        "y": 390,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "341f3db4.7e268a"
            ]
        ]
    },
    {
        "id": "802e937a.3ac",
        "type": "switchNode",
        "name": "switch vpnuuid is for this slice",
        "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1474.8833312988281,
        "y": 312,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "ccfe4ade.41ae98",
                "912c0faa.e5e1c8"
            ]
        ]
    },
    {
        "id": "ccfe4ade.41ae98",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1691.8833312988281,
        "y": 291,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "341f3db4.7e268a"
            ]
        ]
    },
    {
        "id": "912c0faa.e5e1c8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1691.8833312988281,
        "y": 340,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "341f3db4.7e268a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1875.8833312988281,
        "y": 377,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "b1ca96f9.f78f38",
                "2c3b3231.83c2be",
                "4660bf61.473a18"
            ]
        ]
    },
    {
        "id": "377c3031.0fc7c",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 234.88333129882812,
        "y": 118,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "8b8ba227.5e7638"
            ]
        ]
    },
    {
        "id": "8b8ba227.5e7638",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 519.1690216064453,
        "y": 179.23810863494873,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "6c55ded0.30c498"
            ]
        ]
    },
    {
        "id": "6c55ded0.30c498",
        "type": "method",
        "name": "method cll-vnf-topology-operation-cll-F1-Activate",
        "xml": "<method rpc='cll-vnf-topology-operation-cll-F1-Activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 525.3119354248047,
        "y": 264.0000305175781,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "b63c19cf.5911b8"
            ]
        ]
    },
    {
        "id": "b63c19cf.5911b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 835.1213684082031,
        "y": 255.66668701171875,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "6467c9b6.3ea7b",
                "7714415.bcb45c",
                "2cf2ff05.5ecb98",
                "ff64d6f0.1d24e",
                "c19ef147.be92d8"
            ]
        ]
    },
    {
        "id": "b1ca96f9.f78f38",
        "type": "set",
        "name": "set tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
        "comments": "",
        "x": 2092.883331298828,
        "y": 315,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "f11c1dac.45c748",
        "type": "set",
        "name": "set attachment_param for OTN A",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingA.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingA.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingA.customer-vpn-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingA.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-src-domain' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingA.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingA.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingA.access-topology-id`' />\n",
        "comments": "",
        "x": 4261.883331298828,
        "y": 201,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "c95c33ef.381fa8",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-src-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4342.883331298828,
        "y": 516,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "89c7efd5.cb6558",
                "d5cfec9d.5347f8"
            ]
        ]
    },
    {
        "id": "89c7efd5.cb6558",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4652.383331298828,
        "y": 485,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "beffe966.8b1b08"
            ]
        ]
    },
    {
        "id": "d5cfec9d.5347f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4657.383331298828,
        "y": 550,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "18fce568.1c292b"
            ]
        ]
    },
    {
        "id": "beffe966.8b1b08",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4828.383331298828,
        "y": 485,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "18fce568.1c292b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4823.883331298828,
        "y": 550,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "64fdffc9.427678",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityA.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityA.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityA.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />\n",
        "comments": "",
        "x": 4207.383331298828,
        "y": 770,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "c0e95206.343c2",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4361.383331298828,
        "y": 818,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "7a1edf39.b6a0f8",
                "b605ddae.9f2b2"
            ]
        ]
    },
    {
        "id": "7a1edf39.b6a0f8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4706.883331298828,
        "y": 799,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "db29824f.2b664"
            ]
        ]
    },
    {
        "id": "b605ddae.9f2b2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4710.883331298828,
        "y": 839,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "10ebb808.22b9d8"
            ]
        ]
    },
    {
        "id": "db29824f.2b664",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 4864.883331298828,
        "y": 799,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "10ebb808.22b9d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4868.383331298828,
        "y": 839,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "6d35eb39.2fe42c",
                "b62c3c22.2cb09"
            ]
        ]
    },
    {
        "id": "6d35eb39.2fe42c",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5198.883331298828,
        "y": 804,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "3f34bcf0.b30eb4",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 5062.883331298828,
        "y": 763,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "b62c3c22.2cb09",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityA.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5125.883331298828,
        "y": 850,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "dc51dde.504a12",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingA.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingA.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingA.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingA.src-access-node-id`\" />\n",
        "comments": "",
        "x": 4199.883331298828,
        "y": 249,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "25f0cbb9.ff400c",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4225.883331298828,
        "y": 366,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "26af6a64.84f75e",
                "dfaad5e6.3e7388",
                "d4f19086.9e394"
            ]
        ]
    },
    {
        "id": "26af6a64.84f75e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4421.383453369141,
        "y": 318,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "825f4729.b63ee8"
            ]
        ]
    },
    {
        "id": "dfaad5e6.3e7388",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4413.383453369141,
        "y": 373,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "92b1984a.bc8b"
            ]
        ]
    },
    {
        "id": "825f4729.b63ee8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4565.765777587891,
        "y": 317.6556701660156,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "415768e6.6651f8"
            ]
        ]
    },
    {
        "id": "a6a2d3e2.2e526",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5147.883331298828,
        "y": 320,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "e243a570.71b51"
            ]
        ]
    },
    {
        "id": "415768e6.6651f8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4749.883331298828,
        "y": 316,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "ab4dd1f4.04e1f"
            ]
        ]
    },
    {
        "id": "ab4dd1f4.04e1f",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4944.883331298828,
        "y": 316,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "a6a2d3e2.2e526"
            ]
        ]
    },
    {
        "id": "d4f19086.9e394",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4418.383453369141,
        "y": 430,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "28f88c03.cb5e5c"
            ]
        ]
    },
    {
        "id": "28f88c03.cb5e5c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4570.383453369141,
        "y": 431,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "92b1984a.bc8b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4581.383453369141,
        "y": 374,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "677439f1.5f7ed",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5532.883331298828,
        "y": 333,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "e7fd97d3.bbcd08",
                "38bba5b7.de41b2",
                "6bf961e8.c56a58"
            ]
        ]
    },
    {
        "id": "e243a570.71b51",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5326.883331298828,
        "y": 320,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "857cacb0.81444",
                "677439f1.5f7ed"
            ]
        ]
    },
    {
        "id": "857cacb0.81444",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5562.883331298828,
        "y": 281,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "e7fd97d3.bbcd08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5742.883331298828,
        "y": 324,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "60a50433.d26434"
            ]
        ]
    },
    {
        "id": "38bba5b7.de41b2",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5734.883331298828,
        "y": 379,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "d9350787.861f1"
            ]
        ]
    },
    {
        "id": "6bf961e8.c56a58",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5739.883331298828,
        "y": 436,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "1afc54ba.8ed313"
            ]
        ]
    },
    {
        "id": "1afc54ba.8ed313",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5891.883331298828,
        "y": 437,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "d9350787.861f1",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5902.883331298828,
        "y": 382,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "60a50433.d26434",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5887.265655517578,
        "y": 321.6556701660156,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "8367dac2.ac8b98"
            ]
        ]
    },
    {
        "id": "8367dac2.ac8b98",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6101.883331298828,
        "y": 318,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "aa2473a.12d4d9",
        "type": "set",
        "name": "set attachment_param for OTN B",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingB.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingB.dst-access-node-id`' />\n<!--<parameter name='src-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingB.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingB.src-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-dst-domain' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingB.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingB.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingB.access-topology-id`' />\n",
        "comments": "",
        "x": 3668.883331298828,
        "y": 1658,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "28a663c6.7433b4",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-dst-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3731.883331298828,
        "y": 1987,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "422a3196.0fb7d",
                "371e9e8f.f6f942"
            ]
        ]
    },
    {
        "id": "422a3196.0fb7d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4027.383331298828,
        "y": 1954,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "c3084137.121c7"
            ]
        ]
    },
    {
        "id": "371e9e8f.f6f942",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4032.383331298828,
        "y": 2019,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "c6676165.ac5c"
            ]
        ]
    },
    {
        "id": "c3084137.121c7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4195.383331298828,
        "y": 1954,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "c6676165.ac5c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4205.883331298828,
        "y": 2019,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "dfee532c.a1419",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingB.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingB.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingB.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingB.dst-access-node-id`\" />\n",
        "comments": "",
        "x": 3607.883331298828,
        "y": 1715,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "e52702af.314718",
        "type": "get-resource",
        "name": "get-resource dst pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3627.883331298828,
        "y": 1812,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "9ca1c561.5c796",
                "9cf5cab4.99d6e",
                "5d5762eb.724c64"
            ]
        ]
    },
    {
        "id": "9ca1c561.5c796",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3830.3834533691406,
        "y": 1765,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "502f683e.00cf7"
            ]
        ]
    },
    {
        "id": "9cf5cab4.99d6e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3822.3834533691406,
        "y": 1820,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "9587c00d.994eb"
            ]
        ]
    },
    {
        "id": "502f683e.00cf7",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3974.7657775878906,
        "y": 1762.6556701660156,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "39b96666.82062a"
            ]
        ]
    },
    {
        "id": "39b96666.82062a",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4158.883331298828,
        "y": 1777,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "94ae9a5d.e5d56"
            ]
        ]
    },
    {
        "id": "5d5762eb.724c64",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3827.3834533691406,
        "y": 1877,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "7a00ac4a.8d918c"
            ]
        ]
    },
    {
        "id": "7a00ac4a.8d918c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3979.3834533691406,
        "y": 1878,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "9587c00d.994eb",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3990.3834533691406,
        "y": 1823,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "f1540d0.014217",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4556.883331298828,
        "y": 1781,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "c932c6af.938f38"
            ]
        ]
    },
    {
        "id": "94ae9a5d.e5d56",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4353.883331298828,
        "y": 1777,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "f1540d0.014217"
            ]
        ]
    },
    {
        "id": "2ff151e7.182fee",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4941.883331298828,
        "y": 1780,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "40d3a7a.4400bd8",
                "353377f9.20c718",
                "f8f22501.0020d8"
            ]
        ]
    },
    {
        "id": "c932c6af.938f38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4733.883331298828,
        "y": 1773,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "53fc3a7e.05d404",
                "2ff151e7.182fee"
            ]
        ]
    },
    {
        "id": "53fc3a7e.05d404",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4971.883331298828,
        "y": 1728,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "d551b07b.11f68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5300.883331298828,
        "y": 1884,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "c19bb319.e0e2b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5311.883331298828,
        "y": 1829,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "2dbaf595.6cfed2",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5296.265655517578,
        "y": 1768.6556701660156,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "eaeaf1b8.196fc"
            ]
        ]
    },
    {
        "id": "eaeaf1b8.196fc",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5510.883331298828,
        "y": 1765,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "40d3a7a.4400bd8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5151.883331298828,
        "y": 1771,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "2dbaf595.6cfed2"
            ]
        ]
    },
    {
        "id": "353377f9.20c718",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5143.883331298828,
        "y": 1826,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "c19bb319.e0e2b8"
            ]
        ]
    },
    {
        "id": "f8f22501.0020d8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5148.883331298828,
        "y": 1883,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "d551b07b.11f68"
            ]
        ]
    },
    {
        "id": "c7d66e95.fb47e",
        "type": "switchNode",
        "name": "switch vpn-binding has dst-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.dst-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3182.883331298828,
        "y": 729,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "4d8bbec2.c0db6",
                "507d82bd.8807cc"
            ]
        ]
    },
    {
        "id": "4d8bbec2.c0db6",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3396.883331298828,
        "y": 766,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "6524452d.4a2f94"
            ]
        ]
    },
    {
        "id": "507d82bd.8807cc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3398.883331298828,
        "y": 704,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "4b590d33.c81684"
            ]
        ]
    },
    {
        "id": "6524452d.4a2f94",
        "type": "switchNode",
        "name": "switch vpn-binding has src-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2976.883331298828,
        "y": 2009,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "75800cfe.e64b04",
                "28895848.af5c18"
            ]
        ]
    },
    {
        "id": "75800cfe.e64b04",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3229.883331298828,
        "y": 2043,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "34389e65.7f3f0a"
            ]
        ]
    },
    {
        "id": "28895848.af5c18",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3229.883331298828,
        "y": 1987,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "4c94a377.c6d4e4"
            ]
        ]
    },
    {
        "id": "34389e65.7f3f0a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3380.883331298828,
        "y": 2043,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "ff717106.1f6f7",
        "type": "set",
        "name": "set vpn-bindingA and connectivityA",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingA.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityA.' value=\"`$tmp.aai.connectivity.`\" />\n",
        "comments": "",
        "x": 4256.883331298828,
        "y": 141,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "98bc8f5e.55646",
        "type": "set",
        "name": "set vpn-bindingB and connectivityB",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingB.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityB.' value=\"`$tmp.aai.connectivity.`\" />\n\n",
        "comments": "",
        "x": 3664.883331298828,
        "y": 1600,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "1901ad68.6869bb",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3947.883331298828,
        "y": 398,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "ff717106.1f6f7",
                "f11c1dac.45c748",
                "dc51dde.504a12",
                "25f0cbb9.ff400c",
                "c95c33ef.381fa8",
                "7a0ef184.deb28",
                "dd4c3392.e1b02",
                "2a6ffb7c.8797f4"
            ]
        ]
    },
    {
        "id": "4c94a377.c6d4e4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3380.883331298828,
        "y": 1986,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "98bc8f5e.55646",
                "aa2473a.12d4d9",
                "dfee532c.a1419",
                "e52702af.314718",
                "28a663c6.7433b4",
                "c984548c.2e537",
                "88e8f378.a2b808",
                "1fda4b4a.2131e5"
            ]
        ]
    },
    {
        "id": "d79079df.baf578",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityB.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityB.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityB.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityB.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityB.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityB.cvlan`' />\n\n",
        "comments": "",
        "x": 3618.883331298828,
        "y": 2285,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "45ccc628.f5551",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3772.883331298828,
        "y": 2333,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "6173b4db.203ce4",
                "7f21396.e7ee248"
            ]
        ]
    },
    {
        "id": "6173b4db.203ce4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4118.383331298828,
        "y": 2314,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "2b5ddf83.e8a168"
            ]
        ]
    },
    {
        "id": "7f21396.e7ee248",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4122.383331298828,
        "y": 2354,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "9fc151.f9cc46b"
            ]
        ]
    },
    {
        "id": "2b5ddf83.e8a168",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 4276.383331298828,
        "y": 2314,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "9fc151.f9cc46b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4279.883331298828,
        "y": 2354,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "ec406c4.a093b1",
                "ba32c60f.0ec53"
            ]
        ]
    },
    {
        "id": "ec406c4.a093b1",
        "type": "save",
        "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingB.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingB.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4619.883331298828,
        "y": 2353,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "650aeaf3.da502c",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 4477.883331298828,
        "y": 2311,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "ba32c60f.0ec53",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityB.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4548.883331298828,
        "y": 2402,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "c8295377.ff6158",
        "type": "set",
        "name": "set attachment_param (gfp-n) for OTN",
        "xml": "<set>\n<parameter name='gfp-n' value='`$tmp.aai.vpn-binding.route-distinguisher`' />\n",
        "comments": "",
        "x": 3173.883331298828,
        "y": 669,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "17d3b71c.0a74f9",
        "type": "comment",
        "name": "only dst ttp exists. No src",
        "info": "",
        "comments": "",
        "x": 3768.883331298828,
        "y": 355,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "12dd212a.e5931f",
        "type": "comment",
        "name": "only src ttp exists. No dst",
        "info": "",
        "comments": "",
        "x": 3325.883331298828,
        "y": 1933,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "4b590d33.c81684",
        "type": "switchNode",
        "name": "switch vpn-binding has src-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3504.883331298828,
        "y": 517,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "e68f7957.57ea98",
                "90c8120e.55a8c8"
            ]
        ]
    },
    {
        "id": "90c8120e.55a8c8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3746.883331298828,
        "y": 1106,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "5f92c041.e2a22"
            ]
        ]
    },
    {
        "id": "e68f7957.57ea98",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3740.883331298828,
        "y": 397,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "1901ad68.6869bb"
            ]
        ]
    },
    {
        "id": "5f92c041.e2a22",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3904.883331298828,
        "y": 1105,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "eb5cd95b.b46698",
                "bcb9498.a9205b8",
                "24e13fd8.afe2d8",
                "57e5431f.63be4c",
                "8b688219.8ed198",
                "9c0b0957.1e6c48"
            ]
        ]
    },
    {
        "id": "bcb9498.a9205b8",
        "type": "set",
        "name": "set attachment_param for OTN G",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingG.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingG.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingG.src-access-ltp-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingG.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-domainG' value='`$tmp.aai.vpn-bindingG.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingG.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingG.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingG.access-topology-id`' />\n",
        "comments": "",
        "x": 4168.883331298828,
        "y": 988,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "8b688219.8ed198",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-domainG-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4249.883331298828,
        "y": 1303,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "4ea88210.ceec44",
                "cd5b1128.4dbb9"
            ]
        ]
    },
    {
        "id": "4ea88210.ceec44",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4559.383331298828,
        "y": 1272,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "9646de5b.fe3c7"
            ]
        ]
    },
    {
        "id": "cd5b1128.4dbb9",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4564.383331298828,
        "y": 1337,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "55735b11.27f424"
            ]
        ]
    },
    {
        "id": "9646de5b.fe3c7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4735.383331298828,
        "y": 1272,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "55735b11.27f424",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4730.883331298828,
        "y": 1337,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "24e13fd8.afe2d8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domainG.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingG.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingG.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingG.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingG.src-access-node-id`\" />\n",
        "comments": "",
        "x": 4106.883331298828,
        "y": 1036,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "57e5431f.63be4c",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domainG.pnf-name\"\n        pfx='tmp.aai.domainG-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4132.883331298828,
        "y": 1153,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "1d187a80.e65b15",
                "370c15e3.9b5fca",
                "703dc49a.960884"
            ]
        ]
    },
    {
        "id": "1d187a80.e65b15",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4328.383453369141,
        "y": 1105,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "5c6509dd.e3a81"
            ]
        ]
    },
    {
        "id": "370c15e3.9b5fca",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4320.383453369141,
        "y": 1160,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "ccfe239.f2e7de"
            ]
        ]
    },
    {
        "id": "5c6509dd.e3a81",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4472.765777587891,
        "y": 1104.6556701660156,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "35d4ca24.cf236e"
            ]
        ]
    },
    {
        "id": "35d4ca24.cf236e",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.domainG-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4656.883331298828,
        "y": 1103,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "c8705d75.001f7"
            ]
        ]
    },
    {
        "id": "c8705d75.001f7",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4851.883331298828,
        "y": 1103,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "b9376422.2a71"
            ]
        ]
    },
    {
        "id": "703dc49a.960884",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4325.383453369141,
        "y": 1217,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "ece92d94.dd0ac"
            ]
        ]
    },
    {
        "id": "ece92d94.dd0ac",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4477.383453369141,
        "y": 1218,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "ccfe239.f2e7de",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4488.383453369141,
        "y": 1161,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "eb5cd95b.b46698",
        "type": "set",
        "name": "set vpn-bindingG and connectivityG",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingG.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityG.' value=\"`$tmp.aai.connectivity.`\" />\n",
        "comments": "",
        "x": 4163.883331298828,
        "y": 928,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "b9376422.2a71",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5054.883331298828,
        "y": 1107,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "d2480516.2fc378"
            ]
        ]
    },
    {
        "id": "9cb817ae.cef538",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5439.883331298828,
        "y": 1120,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "a79825bb.dff1f8",
                "1395d5f.298062a",
                "7903ca2c.aa5cc4"
            ]
        ]
    },
    {
        "id": "d2480516.2fc378",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5233.883331298828,
        "y": 1107,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "fbf9e6b6.15b5c",
                "9cb817ae.cef538"
            ]
        ]
    },
    {
        "id": "fbf9e6b6.15b5c",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5469.883331298828,
        "y": 1068,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "a79825bb.dff1f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5649.883331298828,
        "y": 1111,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "c7dce557.6dded"
            ]
        ]
    },
    {
        "id": "1395d5f.298062a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5641.883331298828,
        "y": 1166,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "598e647b.5837b4"
            ]
        ]
    },
    {
        "id": "7903ca2c.aa5cc4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5646.883331298828,
        "y": 1223,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "e6c7a6e7.b2f038"
            ]
        ]
    },
    {
        "id": "e6c7a6e7.b2f038",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5798.883331298828,
        "y": 1224,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "598e647b.5837b4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5809.883331298828,
        "y": 1169,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "c7dce557.6dded",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5794.265655517578,
        "y": 1108.6556701660156,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "2cfbc0b6.6ae748"
            ]
        ]
    },
    {
        "id": "2cfbc0b6.6ae748",
        "type": "set",
        "name": "set controller domainG data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6008.883331298828,
        "y": 1105,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "fca9cd7.3028eb",
        "type": "comment",
        "name": "both src and dst exist",
        "info": "",
        "comments": "",
        "x": 3782.883331298828,
        "y": 1046,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "2c3b3231.83c2be",
        "type": "switchNode",
        "name": "switch vpn-binding is not already Activated (i.e. is either Created or Modified)",
        "xml": "<switch test=\"`$tmp.aai.vpn-binding.operational-status != 'Activated' `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2344.883331298828,
        "y": 773,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "81a947d8.a13a68",
                "b480f4ae.d59fb8"
            ]
        ]
    },
    {
        "id": "b480f4ae.d59fb8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2751.883331298828,
        "y": 791,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "23d2aee5.d5b2fa"
            ]
        ]
    },
    {
        "id": "81a947d8.a13a68",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2751.883331298828,
        "y": 736,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "773948cf.a686e8"
            ]
        ]
    },
    {
        "id": "773948cf.a686e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2907.883331298828,
        "y": 734,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "c8295377.ff6158",
                "c7d66e95.fb47e"
            ]
        ]
    },
    {
        "id": "23d2aee5.d5b2fa",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2884.883331298828,
        "y": 792,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "7714415.bcb45c",
        "type": "set",
        "name": "unset tmp.aai.all-vpn-bindings",
        "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value=\"\" />\n",
        "comments": "",
        "x": 1061.8833312988281,
        "y": 208,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "79981366.647454",
        "type": "comment",
        "name": "CLL new",
        "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
        "comments": "",
        "x": 4178.883331298828,
        "y": 626,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "7a0ef184.deb28",
        "type": "set",
        "name": "set leaf-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`leaf-tunnels-list[$leaftunsidx].tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`leaf-tunnels-list[$leaftunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`leaf-tunnels-list_length`' value='`$leaftunsidx + 1`' />\n",
        "comments": "",
        "x": 4238.883331298828,
        "y": 665,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "2cf2ff05.5ecb98",
        "type": "set",
        "name": "unset leaf-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`leaf-tunnels-list.`' value='' />\n<parameter name='`leaf-tunnels-list_length`' value='0' />\n<parameter name='`leaftunsidx`' value='0' />\n",
        "comments": "",
        "x": 1054.8833312988281,
        "y": 116,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "7871357e.92d2f4",
        "type": "comment",
        "name": "CLL new",
        "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
        "comments": "",
        "x": 3590.883331298828,
        "y": 2142,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "c984548c.2e537",
        "type": "set",
        "name": "set root-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`root-tunnels-list[$roottunsidx].tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`root-tunnels-list[$roottunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`root-tunnels-list_length`' value='`$roottunsidx + 1`' />\n",
        "comments": "",
        "x": 3646.883331298828,
        "y": 2191,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "efee660.b5b7f18",
        "type": "set",
        "name": "unset root-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`root-tunnels-list.`' value='' />\n<parameter name='`root-tunnels-list_length`' value='0' />\n<parameter name='`roottunsidx`' value='0' />\n",
        "comments": "",
        "x": 1054.8833312988281,
        "y": 155,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "ff64d6f0.1d24e",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1085.8833312988281,
        "y": 256,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "c19ef147.be92d8",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--$vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 295.8833312988281,
        "y": 731,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "4acbe821.0c1ff8",
                "63a107d4.a006c8",
                "4bb92513.9b1ebc"
            ]
        ]
    },
    {
        "id": "4acbe821.0c1ff8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 514.8833312988281,
        "y": 669,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "d6a121aa.ecf888"
            ]
        ]
    },
    {
        "id": "63a107d4.a006c8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 524.3742980957031,
        "y": 711.5740356445312,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "4bb92513.9b1ebc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 512.8833312988281,
        "y": 758,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "f58f94a6.d7fb9"
            ]
        ]
    },
    {
        "id": "d6a121aa.ecf888",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 711.8833312988281,
        "y": 665,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "46606d75.f5af5c"
            ]
        ]
    },
    {
        "id": "f58f94a6.d7fb9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 681.8833312988281,
        "y": 759,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "46606d75.f5af5c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 935.2168273925781,
        "y": 664.9999389648438,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "1dffeedd.2e39d1"
            ]
        ]
    },
    {
        "id": "1dffeedd.2e39d1",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1135.8834648132324,
        "y": 666.000020980835,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "5eeac4ab.784bec"
            ]
        ]
    },
    {
        "id": "5eeac4ab.784bec",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 265.8833312988281,
        "y": 928,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "93ffca07.c36c6",
                "a6155e5c.4a2e4",
                "edf3ae2.0898ad"
            ]
        ]
    },
    {
        "id": "93ffca07.c36c6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 473.8833312988281,
        "y": 892,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "41f16b19.4ea28c"
            ]
        ]
    },
    {
        "id": "a6155e5c.4a2e4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 474.3742980957031,
        "y": 937.5740356445312,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "edf3ae2.0898ad",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 471.8833312988281,
        "y": 981,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "77488207.b4a2f4"
            ]
        ]
    },
    {
        "id": "77488207.b4a2f4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 640.8833312988281,
        "y": 982,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "1853bc71.11bc54",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 612.8833312988281,
        "y": 1476,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "aa99b60e.a0ae8"
            ]
        ]
    },
    {
        "id": "aa99b60e.a0ae8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 815.8833312988281,
        "y": 1488,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "6b5b67d6.d9cff8"
            ]
        ]
    },
    {
        "id": "6b5b67d6.d9cff8",
        "type": "outcome",
        "name": "UNI",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 981.8833312988281,
        "y": 1485,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "c9be5883.2f43"
            ]
        ]
    },
    {
        "id": "c9be5883.2f43",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1142.8833312988281,
        "y": 1482,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "8328946b.83ccf",
                "70436354.fbd2a4",
                "71db6bb7.f92dd4",
                "a3af61e2.8efbd8",
                "1dbcecbe.b5c9a3"
            ]
        ]
    },
    {
        "id": "70436354.fbd2a4",
        "type": "set",
        "name": "unset tmp.aai.uni",
        "xml": "<set>\n<parameter name='tmp.aai.uni.' value='' />\n",
        "comments": "",
        "x": 1346.8833312988281,
        "y": 1440,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "8328946b.83ccf",
        "type": "save",
        "name": "get uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.uni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1343.8833312988281,
        "y": 1485,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "95cc35e2.dbd57",
                "6243e8b2.6e7d68",
                "ea238384.cd0de8"
            ]
        ]
    },
    {
        "id": "6243e8b2.6e7d68",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1539.3742980957031,
        "y": 1458.573974609375,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "60cc7ad4.175214"
            ]
        ]
    },
    {
        "id": "ea238384.cd0de8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1534.8833312988281,
        "y": 1502.9999389648438,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "33a586e8.574ea2"
            ]
        ]
    },
    {
        "id": "60cc7ad4.175214",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1701.9458312988281,
        "y": 1457.8596801757812,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "33a586e8.574ea2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1702.8833312988281,
        "y": 1502.9999389648438,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "3ed2826e.143bbe",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1704.8833312988281,
        "y": 1549.9999389648438,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "95cc35e2.dbd57",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1535.8833312988281,
        "y": 1549.9999389648438,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "3ed2826e.143bbe"
            ]
        ]
    },
    {
        "id": "a3b35ff6.7d4a88",
        "type": "switchNode",
        "name": "switch conn type",
        "xml": "<switch test=\"`$tmp.aai.connectivity.vpn-type`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 225.38333129882812,
        "y": 1147,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "53e42336.cf6874",
                "64e5ac9.b8c59d4",
                "29d673d9.3ef8bc"
            ]
        ]
    },
    {
        "id": "fdb5b362.28d2e8",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 336.3833312988281,
        "y": 1503,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "53e42336.cf6874",
        "type": "outcome",
        "name": "leaf",
        "xml": "<outcome value='leaf'>\n",
        "comments": "",
        "outputs": 1,
        "x": 211.38333129882812,
        "y": 1393,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "2d911faf.b625f"
            ]
        ]
    },
    {
        "id": "64e5ac9.b8c59d4",
        "type": "outcome",
        "name": "root",
        "xml": "<outcome value='root'>\n",
        "comments": "",
        "outputs": 1,
        "x": 212.38333129882812,
        "y": 1451,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "c8a49fba.48732"
            ]
        ]
    },
    {
        "id": "29d673d9.3ef8bc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 214.38333129882812,
        "y": 1505,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "fdb5b362.28d2e8"
            ]
        ]
    },
    {
        "id": "893647bf.8d35f8",
        "type": "comment",
        "name": "CLL new",
        "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
        "comments": "",
        "x": 1319.8833312988281,
        "y": 1713,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "71db6bb7.f92dd4",
        "type": "set",
        "name": "set ethernet-srv-end-points-list array",
        "xml": "<set>\n<!--<parameter name='`ethernet-srv-end-points-list[$epidx].ethernet-end-point-name`' value='`$tmp.aai.connectivity.connectivity-id`' />-->\n<parameter name='`ethernet-srv-end-points-list[$epidx].ethernet-end-point-name`' value='`$tmp.aai.uni.id`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].index-number`' value='0' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].eth-node-id`' value='`$tmp.uni-node-id-short`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].eth-node-tp-id`' value='`$tmp.aai.uni.tp-id`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].leafOrRootAccess`' value='`$leafOrRootAccess`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].cvlan`' value='`$tmp.aai.connectivity.cvlan`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].CIR`' value='`$tmp.aai.uni.data-source * 1000000`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].EIR`' value='`$tmp.aai.uni.data-source * 1000000`' />\n\n<parameter name='`ethernet-srv-end-points-list_length`' value='`$epidx + 1`' />\n",
        "comments": "",
        "x": 1410.8833312988281,
        "y": 1767,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "c8a49fba.48732",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 328.3833312988281,
        "y": 1447,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "c9ed31d4.2a59a",
                "1853bc71.11bc54",
                "e2c4a442.f42cf",
                "7b94a56a.0cc0c4",
                "14d69ea3.c37079",
                "e39ba7bd.aed5d8",
                "9e9fd2d9.fce4a8",
                "3e44ba6b.3875e6",
                "de368aef.16cb",
                "61a182f0.95ec2c",
                "fae7aeca.a940b8",
                "f92bafd0.7c69c8"
            ]
        ]
    },
    {
        "id": "2d911faf.b625f",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 341.3833312988281,
        "y": 1389,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "1853bc71.11bc54",
                "30a75a3e.13e116",
                "878444f9.a47b7",
                "7b94a56a.0cc0c4",
                "14d69ea3.c37079",
                "e39ba7bd.aed5d8",
                "9e9fd2d9.fce4a8",
                "3e44ba6b.3875e6",
                "de368aef.16cb",
                "61a182f0.95ec2c",
                "fae7aeca.a940b8",
                "f92bafd0.7c69c8"
            ]
        ]
    },
    {
        "id": "30a75a3e.13e116",
        "type": "set",
        "name": "unset ethernet-srv-end-points-list",
        "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
        "comments": "",
        "x": 632.3833312988281,
        "y": 1269,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "c9ed31d4.2a59a",
        "type": "set",
        "name": "unset ethernet-srv-end-points-list",
        "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
        "comments": "",
        "x": 649.3833312988281,
        "y": 1363,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "7b94a56a.0cc0c4",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 575.8833312988281,
        "y": 1732,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "bd67d795.2e839"
            ]
        ]
    },
    {
        "id": "bd67d795.2e839",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 807.8833312988281,
        "y": 1731,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "148b77ab.48b7a"
            ]
        ]
    },
    {
        "id": "148b77ab.48b7a",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1019.8833312988281,
        "y": 1732,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "90ccd6ae.a26198"
            ]
        ]
    },
    {
        "id": "90ccd6ae.a26198",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 275.8833312988281,
        "y": 1888,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "8f4c1c14.35a72",
                "c6a7aee9.6724"
            ]
        ]
    },
    {
        "id": "c6a7aee9.6724",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
        "comments": "",
        "x": 510.8833312988281,
        "y": 1875,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "8f4c1c14.35a72",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 500.8833312988281,
        "y": 1936,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "2e648939.1db066",
                "6fc34533.3f02e4",
                "f4ca0a98.2172d"
            ]
        ]
    },
    {
        "id": "6fc34533.3f02e4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 714.3742980957031,
        "y": 1920.5740356445312,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "24a8c225.12e4ae"
            ]
        ]
    },
    {
        "id": "f4ca0a98.2172d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 709.8833312988281,
        "y": 1965,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "a2a9b29c.7bdb18"
            ]
        ]
    },
    {
        "id": "2e648939.1db066",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 711.8833312988281,
        "y": 2025,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "6e035263.0ab9c4"
            ]
        ]
    },
    {
        "id": "24a8c225.12e4ae",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 876.9458312988281,
        "y": 1919.8597412109375,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "a2a9b29c.7bdb18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 877.8833312988281,
        "y": 1965,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "6e035263.0ab9c4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 880.8833312988281,
        "y": 2024,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "fc704734.f5a92",
                "534cefd0.094168"
            ]
        ]
    },
    {
        "id": "9e9fd2d9.fce4a8",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivity.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivity.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivity.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivity.access-topology-id`' />\n<!--<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />-->\n<!--<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<!--<parameter name='index-number' value='0' />-->\n<!--<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />-->\n<!--<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />-->\n<!--<parameter name='CIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />-->\n<!--<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />-->\n",
        "comments": "",
        "x": 279.8833312988281,
        "y": 2523,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "3e44ba6b.3875e6",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-ethernet-service-loop.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 422.8833312988281,
        "y": 2583,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "b4c4bd8d.d5bdc",
                "c813638c.89d0f"
            ]
        ]
    },
    {
        "id": "b4c4bd8d.d5bdc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 735.3833312988281,
        "y": 2560,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "c813638c.89d0f",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 739.3833312988281,
        "y": 2600,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "3e668730.81c5e8"
            ]
        ]
    },
    {
        "id": "1c6aee6c.a3a53a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 915.3833312988281,
        "y": 2564,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "3e668730.81c5e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 930.8833312988281,
        "y": 2618,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "e6168d7c.f871d"
            ]
        ]
    },
    {
        "id": "59cef6d7.b8a21",
        "type": "save",
        "name": "update vpn-binding resource (aka. OTN ) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1226.3833312988281,
        "y": 2587,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "b5303ab1.d78928",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 2693.383331298828,
        "y": 1938,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "e6168d7c.f871d",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1188.3833312988281,
        "y": 2629,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "878444f9.a47b7",
        "type": "set",
        "name": "set leafOrRootAccess",
        "xml": "<set>\n<parameter name='`leafOrRootAccess`' value='ietf-eth-tran-types:leaf-access' />\n",
        "comments": "",
        "x": 598.3833312988281,
        "y": 1307,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "e2c4a442.f42cf",
        "type": "set",
        "name": "set leafOrRootAccess",
        "xml": "<set>\n<parameter name='`leafOrRootAccess`' value='ietf-eth-tran-types:root-primary' />\n",
        "comments": "",
        "x": 611.3833312988281,
        "y": 1403,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "dd4c3392.e1b02",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4347.883331298828,
        "y": 579,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "9c0b0957.1e6c48",
        "type": "save",
        "name": "update vpn-binding G resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingG.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingG.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingG.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4250.883331298828,
        "y": 1398,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "88e8f378.a2b808",
        "type": "save",
        "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingB.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingB.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3744.883331298828,
        "y": 2070,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "41f16b19.4ea28c",
        "type": "switchNode",
        "name": "switch connectivity is not already Activated (i.e. is either Created or Modified)",
        "xml": "<switch test=\"`$tmp.aai.connectivity.operational-status != 'Activated' `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 845.8833312988281,
        "y": 878,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "7bf4aa70.c75d74",
                "a798281b.2c68d8"
            ]
        ]
    },
    {
        "id": "7bf4aa70.c75d74",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1208.8833312988281,
        "y": 901,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "e5a55559.f1ecf"
            ]
        ]
    },
    {
        "id": "a798281b.2c68d8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1208.8833312988281,
        "y": 850,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "486913c4.08fb54"
            ]
        ]
    },
    {
        "id": "e5a55559.f1ecf",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1364.8833312988281,
        "y": 899,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "a3b35ff6.7d4a88"
            ]
        ]
    },
    {
        "id": "486913c4.08fb54",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1341.8833312988281,
        "y": 851,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "4660bf61.473a18",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value=\"\" />\n",
        "comments": "",
        "x": 2101.883331298828,
        "y": 249,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "1fda4b4a.2131e5",
        "type": "set",
        "name": "set root-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`roottunsidx`' value='`$roottunsidx + 1`' />\n",
        "comments": "",
        "x": 3643.883331298828,
        "y": 2230,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "2a6ffb7c.8797f4",
        "type": "set",
        "name": "set leaf-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`leaftunsidx`' value='`$leaftunsidx + 1`' />\n",
        "comments": "",
        "x": 4233.883331298828,
        "y": 703,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "a3af61e2.8efbd8",
        "type": "set",
        "name": "set ethernet-srv-end-points-list array",
        "xml": "<set>\n<parameter name='`epidx`' value='`$epidx + 1`' />\n",
        "comments": "",
        "x": 1407.8833312988281,
        "y": 1809,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "14d69ea3.c37079",
        "type": "set",
        "name": "set filename",
        "xml": "<set>\n<parameter name='filenameclleths' value=\"`$leafOrRootAccess + $tmp.aai.connectivity.access-node-id`\" />",
        "comments": "",
        "x": 586.8833312988281,
        "y": 1543,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "e39ba7bd.aed5d8",
        "type": "execute",
        "name": "execute printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenameclleths`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 617.8833312988281,
        "y": 1583,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "fc704734.f5a92",
        "type": "set",
        "name": "set otn-tunnels-name-list array",
        "xml": "<set>\n<parameter name='`otn-tunnels-name-list[$otntunsidx].otn-tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`otn-tunnels-name-list[$otntunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`otn-tunnels-name-list_length`' value='`$otntunsidx + 1`' />\n",
        "comments": "",
        "x": 1165.8833312988281,
        "y": 1991,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "534cefd0.094168",
        "type": "set",
        "name": "set otn-tunnels-name-list array",
        "xml": "<set>\n<parameter name='`otntunsidx`' value='`$otntunsidx + 1`' />\n",
        "comments": "",
        "x": 1168.8833312988281,
        "y": 2033,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "de368aef.16cb",
        "type": "set",
        "name": "unset otn-tunnels-name-list array",
        "xml": "<set>\n<parameter name='`otn-tunnels-name-list.`' value='' />\n<parameter name='`otn-tunnels-name-list_length`' value='0' />\n<parameter name='`otntunsidx`' value='0' />\n",
        "comments": "",
        "x": 611.8833312988281,
        "y": 1673,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "61a182f0.95ec2c",
        "type": "set",
        "name": "set filename",
        "xml": "<set>\n<parameter name='filenamecllotns' value=\"`leafrootOTNtunnelnames`\" />",
        "comments": "",
        "x": 366.8833312988281,
        "y": 2052,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "fae7aeca.a940b8",
        "type": "execute",
        "name": "execute printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenamecllotns`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 374.8833312988281,
        "y": 2109,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            []
        ]
    },
    {
        "id": "1dbcecbe.b5c9a3",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.uni.id`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-uni\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1385.8833312988281,
        "y": 1658,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "2facd73.aebb428",
                "7c34f1f3.22e088"
            ]
        ]
    },
    {
        "id": "7c34f1f3.22e088",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1608.8833312988281,
        "y": 1613,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "7e28ac3f.b53f7c"
            ]
        ]
    },
    {
        "id": "2facd73.aebb428",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1610.8833312988281,
        "y": 1677,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "c1661a7d.0e642"
            ]
        ]
    },
    {
        "id": "7e28ac3f.b53f7c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1773.8833312988281,
        "y": 1610,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "a55c6cbe.f3cef"
            ]
        ]
    },
    {
        "id": "c1661a7d.0e642",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 1772.8833312988281,
        "y": 1673,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "a55c6cbe.f3cef",
        "type": "set",
        "name": "set tmp.uni-node-id-short",
        "xml": "<set>\n<parameter name='tmp.uni-node-id-short' value='`$param-prefix-uni[$param-prefix-uni_length -3]`' />\n",
        "comments": "",
        "x": 1993.8833312988281,
        "y": 1624,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "a3eb9377.85c18",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1538.8833312988281,
        "y": 2349,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "fcb0361d.62eb48"
            ]
        ]
    },
    {
        "id": "dcd8db20.d12b7",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainConn.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainConn.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 1923.8833312988281,
        "y": 2362,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "62f93408.d79154",
                "c38cc9d8.7f1bc",
                "576ffe09.c4abd8"
            ]
        ]
    },
    {
        "id": "fcb0361d.62eb48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1717.8833312988281,
        "y": 2349,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "90857791.e16908",
                "dcd8db20.d12b7"
            ]
        ]
    },
    {
        "id": "90857791.e16908",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainConn id",
        "xml": "<set>\n<parameter name='tmp.domainConn.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 1953.8833312988281,
        "y": 2310,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "62f93408.d79154",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2133.883331298828,
        "y": 2353,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "2c548a06.655d4e"
            ]
        ]
    },
    {
        "id": "c38cc9d8.7f1bc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2125.883331298828,
        "y": 2408,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "99196e80.99674"
            ]
        ]
    },
    {
        "id": "576ffe09.c4abd8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2130.883331298828,
        "y": 2465,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "ea704904.f61c3"
            ]
        ]
    },
    {
        "id": "ea704904.f61c3",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2282.883331298828,
        "y": 2466,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "99196e80.99674",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2293.883331298828,
        "y": 2411,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "2c548a06.655d4e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2278.265655517578,
        "y": 2350.6556701660156,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "55de506e.ab2138"
            ]
        ]
    },
    {
        "id": "55de506e.ab2138",
        "type": "set",
        "name": "set controller domainConn data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.url' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.user' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.password' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 2492.883331298828,
        "y": 2347,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "2eeb0084.f61b88",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.pnf-name-forUrl\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 616.8833312988281,
        "y": 2395,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "21d8f2c9.3cd2be",
                "32ff82a0.3bb24e",
                "21eb3441.66cbb4"
            ]
        ]
    },
    {
        "id": "21d8f2c9.3cd2be",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 812.3834533691406,
        "y": 2347,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "2571d7b1.c4fb5"
            ]
        ]
    },
    {
        "id": "32ff82a0.3bb24e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 804.3834533691406,
        "y": 2402,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "b0a2917a.ecde4"
            ]
        ]
    },
    {
        "id": "2571d7b1.c4fb5",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 956.7657775878906,
        "y": 2346.6556701660156,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "a50320.52c78ce"
            ]
        ]
    },
    {
        "id": "a50320.52c78ce",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1140.8833312988281,
        "y": 2345,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "b3deb273.cebb88"
            ]
        ]
    },
    {
        "id": "b3deb273.cebb88",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1335.8833312988281,
        "y": 2345,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "a3eb9377.85c18"
            ]
        ]
    },
    {
        "id": "21eb3441.66cbb4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 809.3834533691406,
        "y": 2459,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "f2a9e7b0.6a4ff8"
            ]
        ]
    },
    {
        "id": "f2a9e7b0.6a4ff8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 961.3834533691406,
        "y": 2460,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "b0a2917a.ecde4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 972.3834533691406,
        "y": 2403,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "e821cf32.5b22f",
        "type": "set",
        "name": "set tmp.pnf-name-forUrl",
        "xml": "<set>\n\n<parameter name='tmp.pnf-name-forUrl' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.connectivity.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.connectivity.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.connectivity.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.connectivity.access-node-id`\" />\n",
        "comments": "",
        "x": 606.8833312988281,
        "y": 2307,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "f92bafd0.7c69c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 351.8833312988281,
        "y": 2438,
        "z": "3f6a2e0f.b66c8a",
        "wires": [
            [
                "e821cf32.5b22f",
                "2eeb0084.f61b88"
            ]
        ]
    },
    {
        "id": "a832f3b6.8874e",
        "type": "comment",
        "name": "Temporary skipping this check - to support multiple instances in one slice",
        "info": "",
        "comments": "",
        "x": 1566.8500061035156,
        "y": 255.88333129882812,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    },
    {
        "id": "f645589d.ed3d98",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 768.8833312988281,
        "y": 478,
        "z": "3f6a2e0f.b66c8a",
        "wires": []
    }
]