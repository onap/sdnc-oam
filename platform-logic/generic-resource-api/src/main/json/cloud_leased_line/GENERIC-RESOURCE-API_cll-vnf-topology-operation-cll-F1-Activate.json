[
    {
        "id": "190659b8.bcae0e",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 353.566650390625,
        "y": 335,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "b2e66c4e.a3d2f8",
                "35dfe125.6c620e",
                "69d67799.ffee68"
            ]
        ]
    },
    {
        "id": "b2e66c4e.a3d2f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 541.566650390625,
        "y": 348,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "a7669132.5699f8"
            ]
        ]
    },
    {
        "id": "35dfe125.6c620e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 549.0575866699219,
        "y": 390.57403564453125,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "69d67799.ffee68",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 539.566650390625,
        "y": 437,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "7627d017.e729d8"
            ]
        ]
    },
    {
        "id": "a7669132.5699f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 714.566650390625,
        "y": 346,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "efea1cd6.23d6f8"
            ]
        ]
    },
    {
        "id": "efea1cd6.23d6f8",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 943.566650390625,
        "y": 347,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "afe63db8.26dbd8"
            ]
        ]
    },
    {
        "id": "afe63db8.26dbd8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1158.566650390625,
        "y": 348,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "46ace79f.7f246"
            ]
        ]
    },
    {
        "id": "356939c7.7d339e",
        "type": "switchNode",
        "name": "switch vpnuuid is for this slice",
        "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1412.566650390625,
        "y": 270,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "a076eac6.b4101",
                "488c763c.46cdf"
            ]
        ]
    },
    {
        "id": "a076eac6.b4101",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1629.566650390625,
        "y": 249,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "46ace79f.7f246"
            ]
        ]
    },
    {
        "id": "488c763c.46cdf",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1629.566650390625,
        "y": 298,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "46ace79f.7f246",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1813.566650390625,
        "y": 335,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "5d0d530d.21fb2c",
                "d6a4c941.f116b8",
                "84203861.d12558"
            ]
        ]
    },
    {
        "id": "578597dc.f76518",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 172.566650390625,
        "y": 76,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "3273c1f.6d67d3e"
            ]
        ]
    },
    {
        "id": "3273c1f.6d67d3e",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 456.8523406982422,
        "y": 137.23810863494873,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "bc88585a.07ae"
            ]
        ]
    },
    {
        "id": "bc88585a.07ae",
        "type": "method",
        "name": "method cll-vnf-topology-operation-cll-F1-Activate",
        "xml": "<method rpc='cll-vnf-topology-operation-cll-F1-Activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 462.99525451660156,
        "y": 222.00003051757812,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "c722c351.6c9218"
            ]
        ]
    },
    {
        "id": "c722c351.6c9218",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 772.8046875,
        "y": 213.66668701171875,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "190659b8.bcae0e",
                "faef4429.aa2c8",
                "54215ea2.f0c928",
                "8ba173b9.e36f",
                "e82defb9.e02d8"
            ]
        ]
    },
    {
        "id": "5d0d530d.21fb2c",
        "type": "set",
        "name": "set tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
        "comments": "",
        "x": 2030.566650390625,
        "y": 273,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "6fabd371.f1d30c",
        "type": "set",
        "name": "set attachment_param for OTN A",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingA.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingA.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingA.customer-vpn-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingA.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-src-domain' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingA.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingA.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingA.access-topology-id`' />\n",
        "comments": "",
        "x": 4199.566650390625,
        "y": 159,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "aa17cc43.b708b",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-src-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4280.566650390625,
        "y": 474,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "709fb1ba.ca1bd",
                "a7a19ece.dc1ae"
            ]
        ]
    },
    {
        "id": "709fb1ba.ca1bd",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4590.066650390625,
        "y": 443,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "5cd036bd.ebcf28"
            ]
        ]
    },
    {
        "id": "a7a19ece.dc1ae",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4595.066650390625,
        "y": 508,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "fddf1c47.d3871"
            ]
        ]
    },
    {
        "id": "5cd036bd.ebcf28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4766.066650390625,
        "y": 443,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "fddf1c47.d3871",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4761.566650390625,
        "y": 508,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "41b8dfa5.7b07b8",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityA.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityA.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityA.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />\n",
        "comments": "",
        "x": 4145.066650390625,
        "y": 728,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "a2bed09b.bd073",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4299.066650390625,
        "y": 776,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "8f1feb66.a203a8",
                "bdea130f.d138e8"
            ]
        ]
    },
    {
        "id": "8f1feb66.a203a8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4644.566650390625,
        "y": 757,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "2db058d.5e37da8"
            ]
        ]
    },
    {
        "id": "bdea130f.d138e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4648.566650390625,
        "y": 797,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "bfbb3301.3c3"
            ]
        ]
    },
    {
        "id": "2db058d.5e37da8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 4802.566650390625,
        "y": 757,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "bfbb3301.3c3",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4806.066650390625,
        "y": 797,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "737d402b.600cc",
                "9643556e.80a7d8"
            ]
        ]
    },
    {
        "id": "737d402b.600cc",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5136.566650390625,
        "y": 762,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "340d03c1.bc10a4",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 5000.566650390625,
        "y": 721,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "9643556e.80a7d8",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityA.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5063.566650390625,
        "y": 808,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "3e996a09.c24c1e",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingA.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingA.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingA.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingA.src-access-node-id`\" />\n",
        "comments": "",
        "x": 4137.566650390625,
        "y": 207,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "73cd2276.fc690c",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4163.566650390625,
        "y": 324,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "2ce54c47.fa0e34",
                "f2bf065e.86763",
                "a6105f6e.dd58c"
            ]
        ]
    },
    {
        "id": "2ce54c47.fa0e34",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4359.0667724609375,
        "y": 276,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "ed0df0d0.842f2"
            ]
        ]
    },
    {
        "id": "f2bf065e.86763",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4351.0667724609375,
        "y": 331,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "40cafd9.39fe684"
            ]
        ]
    },
    {
        "id": "ed0df0d0.842f2",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4503.4490966796875,
        "y": 275.6556701660156,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "404c86f.cf51c78"
            ]
        ]
    },
    {
        "id": "4841f833.0282b8",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5085.566650390625,
        "y": 278,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "13a4c0ae.89b21f"
            ]
        ]
    },
    {
        "id": "404c86f.cf51c78",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4687.566650390625,
        "y": 274,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "b62cc523.462948"
            ]
        ]
    },
    {
        "id": "b62cc523.462948",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4882.566650390625,
        "y": 274,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "4841f833.0282b8"
            ]
        ]
    },
    {
        "id": "a6105f6e.dd58c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4356.0667724609375,
        "y": 388,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "62b98530.ba575c"
            ]
        ]
    },
    {
        "id": "62b98530.ba575c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4508.0667724609375,
        "y": 389,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "40cafd9.39fe684",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4519.0667724609375,
        "y": 332,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "ac0364e.0ddc498",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5470.566650390625,
        "y": 291,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "52afc77f.66ed58",
                "690d4481.5a01f4",
                "561d9e01.bb6af8"
            ]
        ]
    },
    {
        "id": "13a4c0ae.89b21f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5264.566650390625,
        "y": 278,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "3f0e652f.aee95a",
                "ac0364e.0ddc498"
            ]
        ]
    },
    {
        "id": "3f0e652f.aee95a",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5500.566650390625,
        "y": 239,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "52afc77f.66ed58",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5680.566650390625,
        "y": 282,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "2a8d9ba9.4de844"
            ]
        ]
    },
    {
        "id": "690d4481.5a01f4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5672.566650390625,
        "y": 337,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "54eb498f.c93a58"
            ]
        ]
    },
    {
        "id": "561d9e01.bb6af8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5677.566650390625,
        "y": 394,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "ab202d02.2d5188"
            ]
        ]
    },
    {
        "id": "ab202d02.2d5188",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5829.566650390625,
        "y": 395,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "54eb498f.c93a58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5840.566650390625,
        "y": 340,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "2a8d9ba9.4de844",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5824.948974609375,
        "y": 279.6556701660156,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "fdb43e15.dd2458"
            ]
        ]
    },
    {
        "id": "fdb43e15.dd2458",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6039.566650390625,
        "y": 276,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "ad465d2.36cfe2",
        "type": "set",
        "name": "set attachment_param for OTN B",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingB.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingB.dst-access-node-id`' />\n<!--<parameter name='src-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingB.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingB.src-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-dst-domain' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingB.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingB.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingB.access-topology-id`' />\n",
        "comments": "",
        "x": 3606.566650390625,
        "y": 1616,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "1622f07d.ae60d",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-dst-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3669.566650390625,
        "y": 1945,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "e470471b.4d3ef",
                "8ee5f8b0.1b5738"
            ]
        ]
    },
    {
        "id": "e470471b.4d3ef",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3965.066650390625,
        "y": 1912,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "fbda4868.d5b3c"
            ]
        ]
    },
    {
        "id": "8ee5f8b0.1b5738",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3970.066650390625,
        "y": 1977,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "13ccd918.a15e2f"
            ]
        ]
    },
    {
        "id": "fbda4868.d5b3c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4133.066650390625,
        "y": 1912,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "13ccd918.a15e2f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4143.566650390625,
        "y": 1977,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "6aa679a5.fc13d8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingB.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingB.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingB.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingB.dst-access-node-id`\" />\n",
        "comments": "",
        "x": 3545.566650390625,
        "y": 1673,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "63f314c3.d2093c",
        "type": "get-resource",
        "name": "get-resource dst pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3565.566650390625,
        "y": 1770,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "cb2cd4ea.b10f5",
                "da2dd809.2eaba8",
                "b7e5de7f.bd9438"
            ]
        ]
    },
    {
        "id": "cb2cd4ea.b10f5",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3768.0667724609375,
        "y": 1723,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "92ce9c5d.eb149"
            ]
        ]
    },
    {
        "id": "da2dd809.2eaba8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3760.0667724609375,
        "y": 1778,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "d2833ad2.c8fbd8"
            ]
        ]
    },
    {
        "id": "92ce9c5d.eb149",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3912.4490966796875,
        "y": 1720.6556701660156,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "7c59c7e4.737078"
            ]
        ]
    },
    {
        "id": "7c59c7e4.737078",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4096.566650390625,
        "y": 1735,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "4a60b77a.b003e"
            ]
        ]
    },
    {
        "id": "b7e5de7f.bd9438",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3765.0667724609375,
        "y": 1835,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "482f9215.08666c"
            ]
        ]
    },
    {
        "id": "482f9215.08666c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3917.0667724609375,
        "y": 1836,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "d2833ad2.c8fbd8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3928.0667724609375,
        "y": 1781,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "8251a2fe.8b6a98",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4494.566650390625,
        "y": 1739,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "3fea75ef.6caa7a"
            ]
        ]
    },
    {
        "id": "4a60b77a.b003e",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4291.566650390625,
        "y": 1735,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "8251a2fe.8b6a98"
            ]
        ]
    },
    {
        "id": "49b53839.01783",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4879.566650390625,
        "y": 1738,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "b2b3032.264fd8",
                "373b81c5.683f3e",
                "869370b9.925f48"
            ]
        ]
    },
    {
        "id": "3fea75ef.6caa7a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4671.566650390625,
        "y": 1731,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "dd88623a.123e",
                "49b53839.01783"
            ]
        ]
    },
    {
        "id": "dd88623a.123e",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4909.566650390625,
        "y": 1686,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "8fb4dcc3.25c568",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5238.566650390625,
        "y": 1842,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "95a386c5.a58638",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5249.566650390625,
        "y": 1787,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "738801a1.4d047",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5233.948974609375,
        "y": 1726.6556701660156,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "710bce1a.dc395"
            ]
        ]
    },
    {
        "id": "710bce1a.dc395",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5448.566650390625,
        "y": 1723,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "b2b3032.264fd8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5089.566650390625,
        "y": 1729,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "738801a1.4d047"
            ]
        ]
    },
    {
        "id": "373b81c5.683f3e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5081.566650390625,
        "y": 1784,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "95a386c5.a58638"
            ]
        ]
    },
    {
        "id": "869370b9.925f48",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5086.566650390625,
        "y": 1841,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "8fb4dcc3.25c568"
            ]
        ]
    },
    {
        "id": "60036337.4eba24",
        "type": "switchNode",
        "name": "switch vpn-binding has dst-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.dst-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3120.566650390625,
        "y": 687,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "3dc5eab6.536eee",
                "c84ae496.428be8"
            ]
        ]
    },
    {
        "id": "3dc5eab6.536eee",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3334.566650390625,
        "y": 724,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "20d6afb2.5423d"
            ]
        ]
    },
    {
        "id": "c84ae496.428be8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3336.566650390625,
        "y": 662,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "c6c4710b.3b446"
            ]
        ]
    },
    {
        "id": "20d6afb2.5423d",
        "type": "switchNode",
        "name": "switch vpn-binding has src-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2914.566650390625,
        "y": 1967,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "f7e1076.b120ff8",
                "38975d3e.e2ea2a"
            ]
        ]
    },
    {
        "id": "f7e1076.b120ff8",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3167.566650390625,
        "y": 2001,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "6af8dbb6.a59b4c"
            ]
        ]
    },
    {
        "id": "38975d3e.e2ea2a",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3167.566650390625,
        "y": 1945,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "2e5f8334.fd5e8c"
            ]
        ]
    },
    {
        "id": "6af8dbb6.a59b4c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3318.566650390625,
        "y": 2001,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "d2d4d90e.2fae",
        "type": "set",
        "name": "set vpn-bindingA and connectivityA",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingA.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityA.' value=\"`$tmp.aai.connectivity.`\" />\n",
        "comments": "",
        "x": 4194.566650390625,
        "y": 99,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "33cb0d0f.4dfe6a",
        "type": "set",
        "name": "set vpn-bindingB and connectivityB",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingB.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityB.' value=\"`$tmp.aai.connectivity.`\" />\n\n",
        "comments": "",
        "x": 3602.566650390625,
        "y": 1558,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "d855f72b.7e86a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3885.566650390625,
        "y": 356,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "d2d4d90e.2fae",
                "6fabd371.f1d30c",
                "3e996a09.c24c1e",
                "73cd2276.fc690c",
                "aa17cc43.b708b",
                "2774aa91.aa9f06",
                "8954306d.3c458",
                "d41278c1.0e8268"
            ]
        ]
    },
    {
        "id": "2e5f8334.fd5e8c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3318.566650390625,
        "y": 1944,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "33cb0d0f.4dfe6a",
                "ad465d2.36cfe2",
                "6aa679a5.fc13d8",
                "63f314c3.d2093c",
                "1622f07d.ae60d",
                "2d0bf44f.d7a87c",
                "745353ea.a7c82c",
                "a43e9ba4.30fe8"
            ]
        ]
    },
    {
        "id": "ea6929ec.54f7c8",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityB.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityB.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityB.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityB.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityB.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityB.cvlan`' />\n\n",
        "comments": "",
        "x": 3556.566650390625,
        "y": 2243,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "5471fe10.85fa48",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3710.566650390625,
        "y": 2291,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "709844dc.12b89c",
                "36a6ddd8.c214a2"
            ]
        ]
    },
    {
        "id": "709844dc.12b89c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4056.066650390625,
        "y": 2272,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "b6a9b933.1ec16"
            ]
        ]
    },
    {
        "id": "36a6ddd8.c214a2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4060.066650390625,
        "y": 2312,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "ef6de723.b6fb38"
            ]
        ]
    },
    {
        "id": "b6a9b933.1ec16",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 4214.066650390625,
        "y": 2272,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "ef6de723.b6fb38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4217.566650390625,
        "y": 2312,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "dffbfe56.944988",
                "8e76351f.3450b"
            ]
        ]
    },
    {
        "id": "dffbfe56.944988",
        "type": "save",
        "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingB.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingB.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4557.566650390625,
        "y": 2311,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "a2006b0c.836e18",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 4415.566650390625,
        "y": 2269,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "8e76351f.3450b",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityB.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4486.566650390625,
        "y": 2360,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "43b4f3be.c07abc",
        "type": "set",
        "name": "set attachment_param (gfp-n) for OTN",
        "xml": "<set>\n<parameter name='gfp-n' value='`$tmp.aai.vpn-binding.route-distinguisher`' />\n",
        "comments": "",
        "x": 3111.566650390625,
        "y": 627,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "a5929ea4.d560e8",
        "type": "comment",
        "name": "only dst ttp exists. No src",
        "info": "",
        "comments": "",
        "x": 3706.566650390625,
        "y": 313,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "40338a80.0ff774",
        "type": "comment",
        "name": "only src ttp exists. No dst",
        "info": "",
        "comments": "",
        "x": 3263.566650390625,
        "y": 1891,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "c6c4710b.3b446",
        "type": "switchNode",
        "name": "switch vpn-binding has src-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3442.566650390625,
        "y": 475,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "8c077d56.2d05a8",
                "47f9e9e4.4ae948"
            ]
        ]
    },
    {
        "id": "47f9e9e4.4ae948",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3684.566650390625,
        "y": 1064,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "32d70917.41b9b6"
            ]
        ]
    },
    {
        "id": "8c077d56.2d05a8",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3678.566650390625,
        "y": 355,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "d855f72b.7e86a8"
            ]
        ]
    },
    {
        "id": "32d70917.41b9b6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3842.566650390625,
        "y": 1063,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "ab9c9477.87e1",
                "16a44de.db79032",
                "42cda8d6.66eab8",
                "aab7a1d7.f682c8",
                "43e0f21e.8328e4",
                "173252a4.3c7835"
            ]
        ]
    },
    {
        "id": "16a44de.db79032",
        "type": "set",
        "name": "set attachment_param for OTN G",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingG.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingG.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingG.src-access-ltp-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingG.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-domainG' value='`$tmp.aai.vpn-bindingG.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingG.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingG.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingG.access-topology-id`' />\n",
        "comments": "",
        "x": 4106.566650390625,
        "y": 946,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "43e0f21e.8328e4",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-domainG-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4187.566650390625,
        "y": 1261,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "ecdb1dc3.601aa",
                "9e4afd98.6cdb48"
            ]
        ]
    },
    {
        "id": "ecdb1dc3.601aa",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4497.066650390625,
        "y": 1230,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "111350dc.469227"
            ]
        ]
    },
    {
        "id": "9e4afd98.6cdb48",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4502.066650390625,
        "y": 1295,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "c6b74dac.622de"
            ]
        ]
    },
    {
        "id": "111350dc.469227",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4673.066650390625,
        "y": 1230,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "c6b74dac.622de",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4668.566650390625,
        "y": 1295,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "42cda8d6.66eab8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domainG.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingG.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingG.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingG.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingG.src-access-node-id`\" />\n",
        "comments": "",
        "x": 4044.566650390625,
        "y": 994,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "aab7a1d7.f682c8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domainG.pnf-name\"\n        pfx='tmp.aai.domainG-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4070.566650390625,
        "y": 1111,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "fc77fdb3.27d7c",
                "3d52c0ff.052c58",
                "d66dde94.6fdfd8"
            ]
        ]
    },
    {
        "id": "fc77fdb3.27d7c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4266.0667724609375,
        "y": 1063,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "6a6dadc5.106a64"
            ]
        ]
    },
    {
        "id": "3d52c0ff.052c58",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4258.0667724609375,
        "y": 1118,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "6a18bc26.5dd68c"
            ]
        ]
    },
    {
        "id": "6a6dadc5.106a64",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4410.4490966796875,
        "y": 1062.6556701660156,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "abd6aa97.319628"
            ]
        ]
    },
    {
        "id": "abd6aa97.319628",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.domainG-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4594.566650390625,
        "y": 1061,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "d45837ad.7cfdd"
            ]
        ]
    },
    {
        "id": "d45837ad.7cfdd",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4789.566650390625,
        "y": 1061,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "56faad34.523464"
            ]
        ]
    },
    {
        "id": "d66dde94.6fdfd8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4263.0667724609375,
        "y": 1175,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "da706f47.bc937"
            ]
        ]
    },
    {
        "id": "da706f47.bc937",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4415.0667724609375,
        "y": 1176,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "6a18bc26.5dd68c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4426.0667724609375,
        "y": 1119,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "ab9c9477.87e1",
        "type": "set",
        "name": "set vpn-bindingG and connectivityG",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingG.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityG.' value=\"`$tmp.aai.connectivity.`\" />\n",
        "comments": "",
        "x": 4101.566650390625,
        "y": 886,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "56faad34.523464",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4992.566650390625,
        "y": 1065,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "30b949db.4c7a16"
            ]
        ]
    },
    {
        "id": "df7b95f6.393d48",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5377.566650390625,
        "y": 1078,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "166f182a.55dd48",
                "e1871eda.62c8a8",
                "b691673d.bc8c3"
            ]
        ]
    },
    {
        "id": "30b949db.4c7a16",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5171.566650390625,
        "y": 1065,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "5671583d.41ed78",
                "df7b95f6.393d48"
            ]
        ]
    },
    {
        "id": "5671583d.41ed78",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5407.566650390625,
        "y": 1026,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "166f182a.55dd48",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5587.566650390625,
        "y": 1069,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "61f2e54a.d8bfcc"
            ]
        ]
    },
    {
        "id": "e1871eda.62c8a8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5579.566650390625,
        "y": 1124,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "95391466.b0fdc8"
            ]
        ]
    },
    {
        "id": "b691673d.bc8c3",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5584.566650390625,
        "y": 1181,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "eaaeed8c.dbf45"
            ]
        ]
    },
    {
        "id": "eaaeed8c.dbf45",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5736.566650390625,
        "y": 1182,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "95391466.b0fdc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5747.566650390625,
        "y": 1127,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "61f2e54a.d8bfcc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5731.948974609375,
        "y": 1066.6556701660156,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "573ef3d8.3e7cf4"
            ]
        ]
    },
    {
        "id": "573ef3d8.3e7cf4",
        "type": "set",
        "name": "set controller domainG data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5946.566650390625,
        "y": 1063,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "2171f884.ea7ea8",
        "type": "comment",
        "name": "both src and dst exist",
        "info": "",
        "comments": "",
        "x": 3720.566650390625,
        "y": 1004,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "d6a4c941.f116b8",
        "type": "switchNode",
        "name": "switch vpn-binding is not already Activated (i.e. is either Created or Modified)",
        "xml": "<switch test=\"`$tmp.aai.vpn-binding.operational-status != 'Activated' `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2282.566650390625,
        "y": 731,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "49267234.da4bac",
                "c034393e.41c88"
            ]
        ]
    },
    {
        "id": "c034393e.41c88",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2689.566650390625,
        "y": 749,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "bc6b2cdd.907e6"
            ]
        ]
    },
    {
        "id": "49267234.da4bac",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2689.566650390625,
        "y": 694,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "1c258f4d.ef4741"
            ]
        ]
    },
    {
        "id": "1c258f4d.ef4741",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2845.566650390625,
        "y": 692,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "43b4f3be.c07abc",
                "60036337.4eba24"
            ]
        ]
    },
    {
        "id": "bc6b2cdd.907e6",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2822.566650390625,
        "y": 750,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "faef4429.aa2c8",
        "type": "set",
        "name": "unset tmp.aai.all-vpn-bindings",
        "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value=\"\" />\n",
        "comments": "",
        "x": 999.566650390625,
        "y": 166,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "cda219ec.f988b",
        "type": "comment",
        "name": "CLL new",
        "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
        "comments": "",
        "x": 4116.566650390625,
        "y": 584,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "2774aa91.aa9f06",
        "type": "set",
        "name": "set leaf-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`leaf-tunnels-list[$leaftunsidx].tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`leaf-tunnels-list[$leaftunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`leaf-tunnels-list_length`' value='`$leaftunsidx + 1`' />\n",
        "comments": "",
        "x": 4176.566650390625,
        "y": 623,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "54215ea2.f0c928",
        "type": "set",
        "name": "unset leaf-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`leaf-tunnels-list.`' value='' />\n<parameter name='`leaf-tunnels-list_length`' value='0' />\n<parameter name='`leaftunsidx`' value='0' />\n",
        "comments": "",
        "x": 992.566650390625,
        "y": 74,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "96b9a282.e630c",
        "type": "comment",
        "name": "CLL new",
        "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
        "comments": "",
        "x": 3528.566650390625,
        "y": 2100,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "2d0bf44f.d7a87c",
        "type": "set",
        "name": "set root-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`root-tunnels-list[$roottunsidx].tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`root-tunnels-list[$roottunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`root-tunnels-list_length`' value='`$roottunsidx + 1`' />\n",
        "comments": "",
        "x": 3584.566650390625,
        "y": 2149,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "5152a0e6.713128",
        "type": "set",
        "name": "unset root-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`root-tunnels-list.`' value='' />\n<parameter name='`root-tunnels-list_length`' value='0' />\n<parameter name='`roottunsidx`' value='0' />\n",
        "comments": "",
        "x": 992.566650390625,
        "y": 113,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "8ba173b9.e36f",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1023.566650390625,
        "y": 214,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "e82defb9.e02d8",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--$vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 233.566650390625,
        "y": 689,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "2d5a1d5b.838492",
                "889991f3.032d8",
                "b5db494f.57cef8"
            ]
        ]
    },
    {
        "id": "2d5a1d5b.838492",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 452.566650390625,
        "y": 627,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "438119f5.89426"
            ]
        ]
    },
    {
        "id": "889991f3.032d8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 462.0576171875,
        "y": 669.5740356445312,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "b5db494f.57cef8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 450.566650390625,
        "y": 716,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "debce4b9.8571d"
            ]
        ]
    },
    {
        "id": "438119f5.89426",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 649.566650390625,
        "y": 623,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "e1b02bed.ab2ac8"
            ]
        ]
    },
    {
        "id": "debce4b9.8571d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 619.566650390625,
        "y": 717,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "e1b02bed.ab2ac8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 872.900146484375,
        "y": 622.9999389648438,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "e03ee0c1.da854"
            ]
        ]
    },
    {
        "id": "e03ee0c1.da854",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1073.5667839050293,
        "y": 624.000020980835,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "c4a6ee39.d82118"
            ]
        ]
    },
    {
        "id": "c4a6ee39.d82118",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 203.566650390625,
        "y": 886,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "7634ec98.e6038c",
                "916099a4.9dccf",
                "c850e0b6.e35a68"
            ]
        ]
    },
    {
        "id": "7634ec98.e6038c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 411.566650390625,
        "y": 850,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "33f1fe4a.c9d6f2"
            ]
        ]
    },
    {
        "id": "916099a4.9dccf",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 412.0576171875,
        "y": 895.5740356445312,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "c850e0b6.e35a68",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 409.566650390625,
        "y": 939,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "76c84cf.6c8b334"
            ]
        ]
    },
    {
        "id": "76c84cf.6c8b334",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 578.566650390625,
        "y": 940,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "d82baf7f.56b2f",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 550.566650390625,
        "y": 1434,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "3c41a0c0.d2817"
            ]
        ]
    },
    {
        "id": "3c41a0c0.d2817",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 753.566650390625,
        "y": 1446,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "24edffac.eaf52"
            ]
        ]
    },
    {
        "id": "24edffac.eaf52",
        "type": "outcome",
        "name": "UNI",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 919.566650390625,
        "y": 1443,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "8767ddb8.be5188"
            ]
        ]
    },
    {
        "id": "8767ddb8.be5188",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1080.566650390625,
        "y": 1440,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "acad8b74.fa56d8",
                "31574f1b.e35268",
                "9a0e95d9.2f80c",
                "559bb9d.67d2e48",
                "d55a6f33.2c1388",
                "bc764283.2e9fd8"
            ]
        ]
    },
    {
        "id": "31574f1b.e35268",
        "type": "set",
        "name": "unset tmp.aai.uni",
        "xml": "<set>\n<parameter name='tmp.aai.uni.' value='' />\n",
        "comments": "",
        "x": 1286.566650390625,
        "y": 1039.9999389648438,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "acad8b74.fa56d8",
        "type": "save",
        "name": "get uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.uni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1283.566650390625,
        "y": 1084.9999389648438,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "1904c12b.d430cf",
                "4ab95198.c6613",
                "5a08d5cf.278d24"
            ]
        ]
    },
    {
        "id": "4ab95198.c6613",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1479.0576171875,
        "y": 1058.5739135742188,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "ba7aa021.45bdf8"
            ]
        ]
    },
    {
        "id": "5a08d5cf.278d24",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1474.566650390625,
        "y": 1102.9998779296875,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "785f1788.92249"
            ]
        ]
    },
    {
        "id": "ba7aa021.45bdf8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1641.629150390625,
        "y": 1057.859619140625,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "785f1788.92249",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1642.566650390625,
        "y": 1102.9998779296875,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "cc679883.b7f1b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1644.566650390625,
        "y": 1149.9998779296875,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "1904c12b.d430cf",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1475.566650390625,
        "y": 1149.9998779296875,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "cc679883.b7f1b8"
            ]
        ]
    },
    {
        "id": "1a421455.86d86c",
        "type": "comment",
        "name": "CLL new",
        "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
        "comments": "",
        "x": 1257.566650390625,
        "y": 1671,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "9a0e95d9.2f80c",
        "type": "set",
        "name": "set ethernet-srv-end-points-list array",
        "xml": "<set>\n<!--<parameter name='`ethernet-srv-end-points-list[$epidx].ethernet-end-point-name`' value='`$tmp.aai.connectivity.connectivity-id`' />-->\n<parameter name='`ethernet-srv-end-points-list[$epidx].ethernet-end-point-name`' value='`$tmp.aai.uni.id`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].index-number`' value='0' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].eth-node-id`' value='`$tmp.uni-node-id-short`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].eth-node-tp-id`' value='`$tmp.aai.uni.tp-id`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].leafOrRootAccess`' value='`$leafOrRootAccess`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].cvlan`' value='`$tmp.aai.connectivity.cvlan`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].CIR`' value='`$tmp.aai.uni.data-source * 1000000`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].EIR`' value='`$tmp.aai.uni.data-source * 1000000`' />\n\n<parameter name='`ethernet-srv-end-points-list_length`' value='`$epidx + 1`' />\n",
        "comments": "",
        "x": 1348.566650390625,
        "y": 1725,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "62fb7c08.30d35c",
        "type": "set",
        "name": "unset ethernet-srv-end-points-list",
        "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
        "comments": "",
        "x": 2025.066650390625,
        "y": 1138,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "b56049ef.636ab",
        "type": "set",
        "name": "unset ethernet-srv-end-points-list",
        "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
        "comments": "",
        "x": 2030.066650390625,
        "y": 1240,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "513cbd5b.994ffc",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 513.566650390625,
        "y": 1690,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "a14556b2.428608"
            ]
        ]
    },
    {
        "id": "a14556b2.428608",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 745.566650390625,
        "y": 1689,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "e5395881.3f95e"
            ]
        ]
    },
    {
        "id": "e5395881.3f95e",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 957.566650390625,
        "y": 1690,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "ee871fda.29052"
            ]
        ]
    },
    {
        "id": "ee871fda.29052",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 213.566650390625,
        "y": 1846,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "d07450f8.7cfbd8",
                "c80ac602.107b6"
            ]
        ]
    },
    {
        "id": "c80ac602.107b6",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
        "comments": "",
        "x": 448.566650390625,
        "y": 1833,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "d07450f8.7cfbd8",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 438.566650390625,
        "y": 1894,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "3c9f89f1.b2d72e",
                "7eb3712.5c8929",
                "ab93aafa.12aed"
            ]
        ]
    },
    {
        "id": "7eb3712.5c8929",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 652.0576171875,
        "y": 1878.5740356445312,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "abd0cdd.d934eb"
            ]
        ]
    },
    {
        "id": "ab93aafa.12aed",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 647.566650390625,
        "y": 1923,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "b79502c7.acaad8"
            ]
        ]
    },
    {
        "id": "3c9f89f1.b2d72e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 649.566650390625,
        "y": 1983,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "509a448f.bd538c"
            ]
        ]
    },
    {
        "id": "abd0cdd.d934eb",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 814.629150390625,
        "y": 1877.8597412109375,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "b79502c7.acaad8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 815.566650390625,
        "y": 1923,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "509a448f.bd538c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 818.566650390625,
        "y": 1982,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "fd6f29b3.e5c99",
                "f26de900.3c25f8"
            ]
        ]
    },
    {
        "id": "3501776f.2dad38",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivity.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivity.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivity.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivity.access-topology-id`' />\n<parameter name='service-instance-id-or-cll-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<!--<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />-->\n<!--<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<!--<parameter name='index-number' value='0' />-->\n<!--<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />-->\n<!--<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />-->\n<!--<parameter name='CIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />-->\n<!--<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />-->\n",
        "comments": "",
        "x": 238.566650390625,
        "y": 2484,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "ae9e098e.f50fb",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-ethernet-service-loop.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 360.566650390625,
        "y": 2541,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "be334cda.e25598",
                "43d4ffc9.f69dc"
            ]
        ]
    },
    {
        "id": "be334cda.e25598",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 673.066650390625,
        "y": 2518,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "43d4ffc9.f69dc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 677.066650390625,
        "y": 2558,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "f38c34e4.0af87"
            ]
        ]
    },
    {
        "id": "1415cbe4.3643cc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 853.066650390625,
        "y": 2522,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "f38c34e4.0af87",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 868.566650390625,
        "y": 2576,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "38f98e31.2df7c2",
                "2709d484.f39df4",
                "708149ff.3b7b8",
                "40e18201.7f31fc"
            ]
        ]
    },
    {
        "id": "4fb2f1f7.44fff8",
        "type": "save",
        "name": "update vpn-binding resource (aka. OTN ) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1164.066650390625,
        "y": 2545,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "8d799ed5.7c896",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 2631.066650390625,
        "y": 1896,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "38f98e31.2df7c2",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1126.066650390625,
        "y": 2587,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "421d14d0.8fa8dc",
        "type": "set",
        "name": "set leafOrRootAccess",
        "xml": "<set>\n<parameter name='`leafOrRootAccess`' value='ietf-eth-tran-types:leaf-access' />\n",
        "comments": "",
        "x": 1991.066650390625,
        "y": 1176,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "f196d566.5b274",
        "type": "set",
        "name": "set leafOrRootAccess",
        "xml": "<set>\n<parameter name='`leafOrRootAccess`' value='ietf-eth-tran-types:root-primary' />\n",
        "comments": "",
        "x": 1992.066650390625,
        "y": 1280,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "8954306d.3c458",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4285.566650390625,
        "y": 537,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "173252a4.3c7835",
        "type": "save",
        "name": "update vpn-binding G resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingG.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingG.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingG.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4188.566650390625,
        "y": 1356,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "745353ea.a7c82c",
        "type": "save",
        "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingB.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingB.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3682.566650390625,
        "y": 2028,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "33f1fe4a.c9d6f2",
        "type": "switchNode",
        "name": "switch connectivity is not already Activated (i.e. is either Created or Modified)",
        "xml": "<switch test=\"`$tmp.aai.connectivity.operational-status != 'Activated' `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 783.566650390625,
        "y": 836,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "c7ca69b2.c33e8",
                "dbefa186.4d7f68"
            ]
        ]
    },
    {
        "id": "c7ca69b2.c33e8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1146.566650390625,
        "y": 859,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "100503a.a2b7efc"
            ]
        ]
    },
    {
        "id": "dbefa186.4d7f68",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1146.566650390625,
        "y": 808,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "5ea3a0fe.77a12"
            ]
        ]
    },
    {
        "id": "100503a.a2b7efc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1302.566650390625,
        "y": 857,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "8fcbaf21.052888"
            ]
        ]
    },
    {
        "id": "5ea3a0fe.77a12",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1279.566650390625,
        "y": 809,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "84203861.d12558",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value=\"\" />\n",
        "comments": "",
        "x": 2039.566650390625,
        "y": 207,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "a43e9ba4.30fe8",
        "type": "set",
        "name": "set root-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`roottunsidx`' value='`$roottunsidx + 1`' />\n",
        "comments": "",
        "x": 3581.566650390625,
        "y": 2188,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "d41278c1.0e8268",
        "type": "set",
        "name": "set leaf-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`leaftunsidx`' value='`$leaftunsidx + 1`' />\n",
        "comments": "",
        "x": 4171.566650390625,
        "y": 661,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "559bb9d.67d2e48",
        "type": "set",
        "name": "set ethernet-srv-end-points-list array",
        "xml": "<set>\n<parameter name='`epidx`' value='`$epidx + 1`' />\n",
        "comments": "",
        "x": 1345.566650390625,
        "y": 1767,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "11998164.d0953f",
        "type": "set",
        "name": "set filename",
        "xml": "<set>\n<parameter name='filenameclleths' value=\"`$leafOrRootAccess + $tmp.aai.connectivity.access-node-id`\" />",
        "comments": "",
        "x": 524.566650390625,
        "y": 1501,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "3fbbcb97.f97994",
        "type": "execute",
        "name": "execute printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenameclleths`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 555.566650390625,
        "y": 1541,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "fd6f29b3.e5c99",
        "type": "set",
        "name": "set otn-tunnels-name-list array",
        "xml": "<set>\n<parameter name='`otn-tunnels-name-list[$otntunsidx].otn-tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`otn-tunnels-name-list[$otntunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`otn-tunnels-name-list_length`' value='`$otntunsidx + 1`' />\n",
        "comments": "",
        "x": 1103.566650390625,
        "y": 1949,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "f26de900.3c25f8",
        "type": "set",
        "name": "set otn-tunnels-name-list array",
        "xml": "<set>\n<parameter name='`otntunsidx`' value='`$otntunsidx + 1`' />\n",
        "comments": "",
        "x": 1106.566650390625,
        "y": 1991,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "10dd7514.d835b3",
        "type": "set",
        "name": "unset otn-tunnels-name-list array",
        "xml": "<set>\n<parameter name='`otn-tunnels-name-list.`' value='' />\n<parameter name='`otn-tunnels-name-list_length`' value='0' />\n<parameter name='`otntunsidx`' value='0' />\n",
        "comments": "",
        "x": 549.566650390625,
        "y": 1631,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "9cbc66e4.acef28",
        "type": "set",
        "name": "set filename",
        "xml": "<set>\n<parameter name='filenamecllotns' value=\"`leafrootOTNtunnelnames`\" />",
        "comments": "",
        "x": 304.566650390625,
        "y": 2010,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "2ee73d5.0d9a4c2",
        "type": "execute",
        "name": "execute printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenamecllotns`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 312.566650390625,
        "y": 2067,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "d55a6f33.2c1388",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.uni.id`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-uni\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1323.566650390625,
        "y": 1616,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "9cf30931.2c59c8",
                "da4af294.46477"
            ]
        ]
    },
    {
        "id": "da4af294.46477",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1546.566650390625,
        "y": 1571,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "66fe36a9.5f3c98"
            ]
        ]
    },
    {
        "id": "9cf30931.2c59c8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1548.566650390625,
        "y": 1635,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "204d74d2.252cac"
            ]
        ]
    },
    {
        "id": "66fe36a9.5f3c98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1711.566650390625,
        "y": 1568,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "4c93c317.b90e14"
            ]
        ]
    },
    {
        "id": "204d74d2.252cac",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 1710.566650390625,
        "y": 1631,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "4c93c317.b90e14",
        "type": "set",
        "name": "set tmp.uni-node-id-short",
        "xml": "<set>\n<parameter name='tmp.uni-node-id-short' value='`$param-prefix-uni[$param-prefix-uni_length -4]`' />\n",
        "comments": "",
        "x": 1931.566650390625,
        "y": 1582,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "83593740.e4ddd",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1476.566650390625,
        "y": 2307,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "bc0ef8cb.38db18"
            ]
        ]
    },
    {
        "id": "a1ab9a32.41426",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainConn.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainConn.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 1861.566650390625,
        "y": 2320,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "eafaddf4.4288",
                "a1c53fdc.e94408",
                "b9669b07.a51828"
            ]
        ]
    },
    {
        "id": "bc0ef8cb.38db18",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1655.566650390625,
        "y": 2307,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "2580690.f3eb118",
                "a1ab9a32.41426"
            ]
        ]
    },
    {
        "id": "2580690.f3eb118",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainConn id",
        "xml": "<set>\n<parameter name='tmp.domainConn.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 1891.566650390625,
        "y": 2268,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "eafaddf4.4288",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2071.566650390625,
        "y": 2311,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "13cd3d1.ffcccc3"
            ]
        ]
    },
    {
        "id": "a1c53fdc.e94408",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2063.566650390625,
        "y": 2366,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "7da7ccee.d6972c"
            ]
        ]
    },
    {
        "id": "b9669b07.a51828",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2068.566650390625,
        "y": 2423,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "2930329b.329efe"
            ]
        ]
    },
    {
        "id": "2930329b.329efe",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2220.566650390625,
        "y": 2424,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "7da7ccee.d6972c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2231.566650390625,
        "y": 2369,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "13cd3d1.ffcccc3",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2215.948974609375,
        "y": 2308.6556701660156,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "febf727.ffe5c9"
            ]
        ]
    },
    {
        "id": "febf727.ffe5c9",
        "type": "set",
        "name": "set controller domainConn data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.url' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.user' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.password' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 2430.566650390625,
        "y": 2305,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "2716544d.2e4214",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.pnf-name-forUrl\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 554.566650390625,
        "y": 2353,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "a2a1891d.4d5168",
                "9cd28e00.2567d",
                "a8c6a166.3984e"
            ]
        ]
    },
    {
        "id": "a2a1891d.4d5168",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 750.0667724609375,
        "y": 2305,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "6cfc839f.58b674"
            ]
        ]
    },
    {
        "id": "9cd28e00.2567d",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 742.0667724609375,
        "y": 2360,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "7eb3886b.0a9b58"
            ]
        ]
    },
    {
        "id": "6cfc839f.58b674",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 894.4490966796875,
        "y": 2304.6556701660156,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "cd8dae32.8ecf2"
            ]
        ]
    },
    {
        "id": "cd8dae32.8ecf2",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1078.566650390625,
        "y": 2303,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "2f1b8cbe.c629a4"
            ]
        ]
    },
    {
        "id": "2f1b8cbe.c629a4",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1273.566650390625,
        "y": 2303,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "83593740.e4ddd"
            ]
        ]
    },
    {
        "id": "a8c6a166.3984e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 747.0667724609375,
        "y": 2417,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "1a3f5fd3.7d7ca8"
            ]
        ]
    },
    {
        "id": "1a3f5fd3.7d7ca8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 899.0667724609375,
        "y": 2418,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "7eb3886b.0a9b58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 910.0667724609375,
        "y": 2361,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "7c9a9ea1.e0f0b",
        "type": "set",
        "name": "set tmp.pnf-name-forUrl",
        "xml": "<set>\n\n<parameter name='tmp.pnf-name-forUrl' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.connectivity.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.connectivity.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.connectivity.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.connectivity.access-node-id`\" />\n",
        "comments": "",
        "x": 544.566650390625,
        "y": 2265,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "c2f9529c.5f262",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 289.566650390625,
        "y": 2396,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "7c9a9ea1.e0f0b",
                "2716544d.2e4214"
            ]
        ]
    },
    {
        "id": "57a26dc0.1ee23c",
        "type": "comment",
        "name": "Temporary skipping this check - to support multiple instances in one slice",
        "info": "",
        "comments": "",
        "x": 1504.5333251953125,
        "y": 213.88333129882812,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "7627d017.e729d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 706.566650390625,
        "y": 436,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "40266792.930ff8",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 266.066650390625,
        "y": 1405,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "d82baf7f.56b2f",
                "513cbd5b.994ffc",
                "11998164.d0953f",
                "3fbbcb97.f97994",
                "3501776f.2dad38",
                "ae9e098e.f50fb",
                "10dd7514.d835b3",
                "9cbc66e4.acef28",
                "2ee73d5.0d9a4c2",
                "c2f9529c.5f262",
                "cf851282.1a25c8"
            ]
        ]
    },
    {
        "id": "bc764283.2e9fd8",
        "type": "switchNode",
        "name": "switch uni type",
        "xml": "<switch test=\"`$tmp.aai.uni.type`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1296.566650390625,
        "y": 1243,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "4133a5fe.bd0afc",
                "cb7bb63e.a271e8",
                "9b203a87.8531b",
                "86f7d9c6.6cceb8"
            ]
        ]
    },
    {
        "id": "4133a5fe.bd0afc",
        "type": "outcome",
        "name": "leaf",
        "xml": "<outcome value='leaf'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1461.566650390625,
        "y": 1225,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "34effc93.508fc4"
            ]
        ]
    },
    {
        "id": "cb7bb63e.a271e8",
        "type": "outcome",
        "name": "root",
        "xml": "<outcome value='root'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1464.566650390625,
        "y": 1264,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "ceed6ba9.27c0d"
            ]
        ]
    },
    {
        "id": "86f7d9c6.6cceb8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1458.566650390625,
        "y": 1342,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "971b0d55.da5e"
            ]
        ]
    },
    {
        "id": "9b203a87.8531b",
        "type": "outcome",
        "name": "root-secondary",
        "xml": "<outcome value='root-secondary'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1481.566650390625,
        "y": 1305,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "f1880c82.5bc33"
            ]
        ]
    },
    {
        "id": "f85814f1.078ec8",
        "type": "set",
        "name": "unset ethernet-srv-end-points-list",
        "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
        "comments": "",
        "x": 2027.566650390625,
        "y": 1338,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "17372550.7b802b",
        "type": "set",
        "name": "set leafOrRootAccess",
        "xml": "<set>\n<parameter name='`leafOrRootAccess`' value='ietf-eth-tran-types:root-secondary' />\n",
        "comments": "",
        "x": 1989.566650390625,
        "y": 1378,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "971b0d55.da5e",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1610.566650390625,
        "y": 1363,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "2709d484.f39df4",
        "type": "execute",
        "name": "execute RestApiCallNode Create Performance Monitoring Data",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-create-pm-data.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/data/ietf-service-pm:performance-monitoring'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1200.1500244140625,
        "y": 2662.3336181640625,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "34effc93.508fc4",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1596.4832763671875,
        "y": 1221.333251953125,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "421d14d0.8fa8dc"
            ]
        ]
    },
    {
        "id": "ceed6ba9.27c0d",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1598.4832763671875,
        "y": 1259.333251953125,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "f196d566.5b274"
            ]
        ]
    },
    {
        "id": "f1880c82.5bc33",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1641.4832763671875,
        "y": 1306.333251953125,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "17372550.7b802b"
            ]
        ]
    },
    {
        "id": "708149ff.3b7b8",
        "type": "execute",
        "name": "execute RestconfDiscoveryNode establishSubscription",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='establishSubscriptionOnly' >\n<parameter name=\"subscriberId\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url`\" />\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-subscribe-notification.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/operations/ietf-subscribed-notifications:establish-subscription'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<!--<parameter name=\"deviceIp\" value=\"192.168.198.6\" />-->\n<!--<parameter name=\"devicePort\" value=\"18181\" />-->\n<parameter name=\"sseConnectURL\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/streams/yang-push-json'`\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"post\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"X-ACCESS-TOKEN=x-ik2ps4ikvzupbx0486ft1ebzs7rt85futh9ho6eofy3wjsap7wqktemlqm4bbsmnar3vrtbyrzukbv5itd6m1cftldpjarnyle3sdcqq9hftc4lebz464b5ffxmlbvg9\" />\n<parameter name=\"module\" value=\"GENERIC-RESOURCE-API\" />\n<parameter name=\"rpc\" value=\"cll-vnf-topology-operation-cll-callbackdg-notification\" />\n<parameter name=\"version\" value=\"777\" />\n<parameter name=\"mode\" value=\"sync\" />\n<!--<parameter name=\"version\" value=\"sync\" />-->\n<!--<parameter name=\"mode\" value=\"777\" />-->\n<parameter name=\"responsePrefix\" value=\"restapi-result\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1168.1500244140625,
        "y": 2734.33349609375,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "40e18201.7f31fc",
        "type": "execute",
        "name": "execute RestconfDiscoveryNode establishPersistentConnection",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='establishPersistentSseConnection' >\n<parameter name=\"subscriberId\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url`\" />\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-subscribe-notification.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/operations/ietf-subscribed-notifications:establish-subscription'`\" />\n<parameter name=\"sseConnectURL\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/streams/yang-push-json'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"get\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"X-ACCESS-TOKEN=x-ik2ps4ikvzupbx0486ft1ebzs7rt85futh9ho6eofy3wjsap7wqktemlqm4bbsmnar3vrtbyrzukbv5itd6m1cftldpjarnyle3sdcqq9hftc4lebz464b5ffxmlbvg9\" />\n<parameter name=\"module\" value=\"GENERIC-RESOURCE-API\" />\n<parameter name=\"rpc\" value=\"cll-vnf-topology-operation-cll-callbackdg-notification\" />\n<parameter name=\"version\" value=\"777\" />\n<parameter name=\"mode\" value=\"sync\" />\n<!--<parameter name=\"version\" value=\"sync\" />-->\n<!--<parameter name=\"mode\" value=\"777\" />-->\n<parameter name=\"responsePrefix\" value=\"notification-get-result\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1198.1500244140625,
        "y": 2796.33349609375,
        "z": "8603b63b.c1c358",
        "wires": [
            []
        ]
    },
    {
        "id": "cf851282.1a25c8",
        "type": "set",
        "name": "unset ethernet-srv-end-points-list",
        "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
        "comments": "",
        "x": 591.566650390625,
        "y": 1343.166748046875,
        "z": "8603b63b.c1c358",
        "wires": []
    },
    {
        "id": "8fcbaf21.052888",
        "type": "switchNode",
        "name": "switch conn type",
        "xml": "<switch test=\"`$tmp.aai.connectivity.vpn-type`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 132.56666564941406,
        "y": 1054.1666259765625,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "5e5b0dce.955fb4",
                "7fcb1378.0439ec"
            ]
        ]
    },
    {
        "id": "7fcb1378.0439ec",
        "type": "outcome",
        "name": "root",
        "xml": "<outcome value='root'>\n",
        "comments": "",
        "outputs": 1,
        "x": 317.566650390625,
        "y": 1228.1666259765625,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "40266792.930ff8"
            ]
        ]
    },
    {
        "id": "5e5b0dce.955fb4",
        "type": "outcome",
        "name": "leaf",
        "xml": "<outcome value='leaf'>\n",
        "comments": "",
        "outputs": 1,
        "x": 320.566650390625,
        "y": 1183.1666259765625,
        "z": "8603b63b.c1c358",
        "wires": [
            [
                "40266792.930ff8"
            ]
        ]
    }
]