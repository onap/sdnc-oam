[
    {
        "id": "2395bbe0.4b8ec4",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 361,
        "y": 348,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "7a4b4c32.339f0c",
                "476b558f.0cf4e4",
                "c5f863d4.faa76"
            ]
        ]
    },
    {
        "id": "7a4b4c32.339f0c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 549,
        "y": 361,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "477b4d49.40f0ec"
            ]
        ]
    },
    {
        "id": "476b558f.0cf4e4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 549.490966796875,
        "y": 406.57403564453125,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "9391f816.87a258"
            ]
        ]
    },
    {
        "id": "c5f863d4.faa76",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 547,
        "y": 450,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "7e716c79.c4ee54"
            ]
        ]
    },
    {
        "id": "477b4d49.40f0ec",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 722,
        "y": 359,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "de48ad25.e4a568"
            ]
        ]
    },
    {
        "id": "9391f816.87a258",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 712.0623779296875,
        "y": 406.8597717285156,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "7e716c79.c4ee54",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 714,
        "y": 449,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "de48ad25.e4a568",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 951,
        "y": 360,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "1fd8993c.e83297"
            ]
        ]
    },
    {
        "id": "1fd8993c.e83297",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1166,
        "y": 361,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "33755ee2.127952"
            ]
        ]
    },
    {
        "id": "edb565df.2fd588",
        "type": "switchNode",
        "name": "switch vpnuuid is for this slice",
        "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1420,
        "y": 283,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "d9f77b89.2576a8",
                "d1a41641.7e8658"
            ]
        ]
    },
    {
        "id": "d9f77b89.2576a8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1637,
        "y": 262,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "33755ee2.127952"
            ]
        ]
    },
    {
        "id": "d1a41641.7e8658",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1637,
        "y": 311,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "33755ee2.127952",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1821,
        "y": 348,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "9647ef19.c8c25",
                "b3842f71.731b38",
                "ca01ca51.23bb98"
            ]
        ]
    },
    {
        "id": "48081245.456c3c",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 180,
        "y": 89,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "226f6982.562f5e"
            ]
        ]
    },
    {
        "id": "226f6982.562f5e",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 464.2856903076172,
        "y": 150.23810863494873,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "f533e2ec.f849f"
            ]
        ]
    },
    {
        "id": "f533e2ec.f849f",
        "type": "method",
        "name": "method cll-vnf-topology-operation-cll-F1-Activate",
        "xml": "<method rpc='cll-vnf-topology-operation-cll-F1-Activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 470.42860412597656,
        "y": 235.00003051757812,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "15848be5.af4ba4"
            ]
        ]
    },
    {
        "id": "15848be5.af4ba4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 780.238037109375,
        "y": 226.66668701171875,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "2395bbe0.4b8ec4",
                "5c62cbf5.952894",
                "4957906b.cb3908",
                "25a3d5e5.55ea62",
                "624a734b.81957c"
            ]
        ]
    },
    {
        "id": "9647ef19.c8c25",
        "type": "set",
        "name": "set tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
        "comments": "",
        "x": 2038,
        "y": 286,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "927e2807.47e1",
        "type": "set",
        "name": "set attachment_param for OTN A",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingA.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingA.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingA.customer-vpn-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingA.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-src-domain' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingA.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingA.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingA.access-topology-id`' />\n",
        "comments": "",
        "x": 4207,
        "y": 172,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "71f8cbde.7b70ec",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-src-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4288,
        "y": 487,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "dca0592f.f2f0f8",
                "7abf945b.d3630c"
            ]
        ]
    },
    {
        "id": "dca0592f.f2f0f8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4597.5,
        "y": 456,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "4d6d008.1dd328"
            ]
        ]
    },
    {
        "id": "7abf945b.d3630c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4602.5,
        "y": 521,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "6ddc3bc2.826894"
            ]
        ]
    },
    {
        "id": "4d6d008.1dd328",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4773.5,
        "y": 456,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "6ddc3bc2.826894",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4769,
        "y": 521,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "639d74a6.1d8f04",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityA.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityA.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityA.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />\n",
        "comments": "",
        "x": 4152.5,
        "y": 741,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "d9456183.6b2d68",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4306.5,
        "y": 789,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "3efbdf9b.54682",
                "243cc169.72316e"
            ]
        ]
    },
    {
        "id": "3efbdf9b.54682",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4652,
        "y": 770,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "ba970949.4ab53"
            ]
        ]
    },
    {
        "id": "243cc169.72316e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4656,
        "y": 810,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "4891a43f.02e58c"
            ]
        ]
    },
    {
        "id": "ba970949.4ab53",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 4810,
        "y": 770,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "4891a43f.02e58c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4813.5,
        "y": 810,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "388beb56.7c7234",
                "eb334e0f.b54c3"
            ]
        ]
    },
    {
        "id": "388beb56.7c7234",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5144,
        "y": 775,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "d196af8c.f36ae8",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 5008,
        "y": 734,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "eb334e0f.b54c3",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityA.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5071,
        "y": 821,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "51361643.15e97",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingA.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingA.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingA.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingA.src-access-node-id`\" />\n",
        "comments": "",
        "x": 4145,
        "y": 220,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "7074e291.428a74",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4171,
        "y": 337,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "fd9f25cd.b6ab9",
                "13f82e43.b47822",
                "a1ba843c.92fa78"
            ]
        ]
    },
    {
        "id": "fd9f25cd.b6ab9",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4366.5001220703125,
        "y": 289,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "10d11922.59185f"
            ]
        ]
    },
    {
        "id": "13f82e43.b47822",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4358.5001220703125,
        "y": 344,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "19650434.8dad4c"
            ]
        ]
    },
    {
        "id": "10d11922.59185f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4510.8824462890625,
        "y": 288.6556701660156,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "777ae9c7.6a278"
            ]
        ]
    },
    {
        "id": "391ce87d.ba3df8",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5093,
        "y": 291,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "65b820ac.17e0d"
            ]
        ]
    },
    {
        "id": "777ae9c7.6a278",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4695,
        "y": 287,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "f4f1a808.b22bc"
            ]
        ]
    },
    {
        "id": "f4f1a808.b22bc",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4890,
        "y": 287,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "391ce87d.ba3df8"
            ]
        ]
    },
    {
        "id": "a1ba843c.92fa78",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4363.5001220703125,
        "y": 401,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "a6d9e4b5.ea0fd8"
            ]
        ]
    },
    {
        "id": "a6d9e4b5.ea0fd8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4515.5001220703125,
        "y": 402,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "19650434.8dad4c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4526.5001220703125,
        "y": 345,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "5d042a1f.c8fb44",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5478,
        "y": 304,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "8c0f87c1.0cfa88",
                "96b96977.b4fed8",
                "6ce026da.737ea"
            ]
        ]
    },
    {
        "id": "65b820ac.17e0d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5272,
        "y": 291,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "1918c44c.117ae4",
                "5d042a1f.c8fb44"
            ]
        ]
    },
    {
        "id": "1918c44c.117ae4",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5508,
        "y": 252,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "8c0f87c1.0cfa88",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5688,
        "y": 295,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "e1aae278.d9aab"
            ]
        ]
    },
    {
        "id": "96b96977.b4fed8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5680,
        "y": 350,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "a74826f7.daef6"
            ]
        ]
    },
    {
        "id": "6ce026da.737ea",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5685,
        "y": 407,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "80c7718d.f0881"
            ]
        ]
    },
    {
        "id": "80c7718d.f0881",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5837,
        "y": 408,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "a74826f7.daef6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5848,
        "y": 353,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "e1aae278.d9aab",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5832.38232421875,
        "y": 292.6556701660156,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "b6fb5857.56d2c"
            ]
        ]
    },
    {
        "id": "b6fb5857.56d2c",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6047,
        "y": 289,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "881ac3d.2b73cc",
        "type": "set",
        "name": "set attachment_param for OTN B",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingB.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingB.dst-access-node-id`' />\n<!--<parameter name='src-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingB.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingB.src-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-dst-domain' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingB.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingB.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingB.access-topology-id`' />\n",
        "comments": "",
        "x": 3614,
        "y": 1629,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "f942fe34.857118",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-dst-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3677,
        "y": 1958,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "d6aba815.0c0b98",
                "fb15fc4f.27732"
            ]
        ]
    },
    {
        "id": "d6aba815.0c0b98",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3972.5,
        "y": 1925,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "f7e9b7f6.cb6cf8"
            ]
        ]
    },
    {
        "id": "fb15fc4f.27732",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3977.5,
        "y": 1990,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "e7e93f9f.05e6f8"
            ]
        ]
    },
    {
        "id": "f7e9b7f6.cb6cf8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4140.5,
        "y": 1925,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "e7e93f9f.05e6f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4151,
        "y": 1990,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "c6f7c9bc.a78ea8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingB.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingB.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingB.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingB.dst-access-node-id`\" />\n",
        "comments": "",
        "x": 3553,
        "y": 1686,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "8f243ad6.97dd38",
        "type": "get-resource",
        "name": "get-resource dst pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3573,
        "y": 1783,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "a8e6c84d.0f237",
                "3ee8ddc2.b7378a",
                "311698c.6883b68"
            ]
        ]
    },
    {
        "id": "a8e6c84d.0f237",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3775.5001220703125,
        "y": 1736,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "6ef9124f.c91bc4"
            ]
        ]
    },
    {
        "id": "3ee8ddc2.b7378a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3767.5001220703125,
        "y": 1791,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "9b01e4a.2bf7598"
            ]
        ]
    },
    {
        "id": "6ef9124f.c91bc4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3919.8824462890625,
        "y": 1733.6556701660156,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "8bd570a1.9b5908"
            ]
        ]
    },
    {
        "id": "8bd570a1.9b5908",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4104,
        "y": 1748,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "5951fb7a.778dbc"
            ]
        ]
    },
    {
        "id": "311698c.6883b68",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3772.5001220703125,
        "y": 1848,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "25fe1469.5e13bc"
            ]
        ]
    },
    {
        "id": "25fe1469.5e13bc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3924.5001220703125,
        "y": 1849,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "9b01e4a.2bf7598",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3935.5001220703125,
        "y": 1794,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "a9a3100d.7e9a38",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4502,
        "y": 1752,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "15a6f6cf.b80121"
            ]
        ]
    },
    {
        "id": "5951fb7a.778dbc",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4299,
        "y": 1748,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "a9a3100d.7e9a38"
            ]
        ]
    },
    {
        "id": "b462757e.f97cf",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4887,
        "y": 1751,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "f548cd5f.cf97e8",
                "7bf2c309.936484",
                "37200156.6e45ae"
            ]
        ]
    },
    {
        "id": "15a6f6cf.b80121",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4679,
        "y": 1744,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "24625031.3ccbb",
                "b462757e.f97cf"
            ]
        ]
    },
    {
        "id": "24625031.3ccbb",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4917,
        "y": 1699,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "3717e4c0.7e91fc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5246,
        "y": 1855,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "ebaf4cad.7f7ac",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5257,
        "y": 1800,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "95133e26.a5c4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5241.38232421875,
        "y": 1739.6556701660156,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "74fa69d9.12322"
            ]
        ]
    },
    {
        "id": "74fa69d9.12322",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5456,
        "y": 1736,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "f548cd5f.cf97e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5097,
        "y": 1742,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "95133e26.a5c4"
            ]
        ]
    },
    {
        "id": "7bf2c309.936484",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5089,
        "y": 1797,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "ebaf4cad.7f7ac"
            ]
        ]
    },
    {
        "id": "37200156.6e45ae",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5094,
        "y": 1854,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "3717e4c0.7e91fc"
            ]
        ]
    },
    {
        "id": "4573661e.19551",
        "type": "switchNode",
        "name": "switch vpn-binding has dst-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.dst-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3128,
        "y": 700,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "e3a931ba.d41978",
                "cce98769.66d2f"
            ]
        ]
    },
    {
        "id": "e3a931ba.d41978",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3342,
        "y": 737,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "83f7a2a0.47e4a"
            ]
        ]
    },
    {
        "id": "cce98769.66d2f",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3344,
        "y": 675,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "a3a1c771.fa4dc8"
            ]
        ]
    },
    {
        "id": "83f7a2a0.47e4a",
        "type": "switchNode",
        "name": "switch vpn-binding has src-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2922,
        "y": 1980,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "b17cf12.c5b4e9",
                "375f750c.523c3a"
            ]
        ]
    },
    {
        "id": "b17cf12.c5b4e9",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3175,
        "y": 2014,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "b574ded7.ea26d"
            ]
        ]
    },
    {
        "id": "375f750c.523c3a",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3175,
        "y": 1958,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "3eeb971b.8e101"
            ]
        ]
    },
    {
        "id": "b574ded7.ea26d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3326,
        "y": 2014,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "27c7cf1.51adcb",
        "type": "set",
        "name": "set vpn-bindingA and connectivityA",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingA.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityA.' value=\"`$tmp.aai.connectivity.`\" />\n",
        "comments": "",
        "x": 4202,
        "y": 112,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "e24e0a9e.a7db8",
        "type": "set",
        "name": "set vpn-bindingB and connectivityB",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingB.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityB.' value=\"`$tmp.aai.connectivity.`\" />\n\n",
        "comments": "",
        "x": 3610,
        "y": 1571,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "6b14e6ca.05c05",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3893,
        "y": 369,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "27c7cf1.51adcb",
                "927e2807.47e1",
                "51361643.15e97",
                "7074e291.428a74",
                "71f8cbde.7b70ec",
                "41c50446.37f104",
                "e5881b35.2a2bf8",
                "ceaa1f2c.697ad"
            ]
        ]
    },
    {
        "id": "3eeb971b.8e101",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3326,
        "y": 1957,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "e24e0a9e.a7db8",
                "881ac3d.2b73cc",
                "c6f7c9bc.a78ea8",
                "8f243ad6.97dd38",
                "f942fe34.857118",
                "51d22e16.357968",
                "8caebf31.dc028",
                "6ccc1a6d.d89cd4"
            ]
        ]
    },
    {
        "id": "f87bcfd0.50c8c",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityB.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityB.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityB.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityB.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityB.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityB.cvlan`' />\n\n",
        "comments": "",
        "x": 3564,
        "y": 2256,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "ab6e58b.3c55528",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3718,
        "y": 2304,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "eff9a19.776a7e",
                "ddb717fb.d9a6d8"
            ]
        ]
    },
    {
        "id": "eff9a19.776a7e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4063.5,
        "y": 2285,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "59a2ea1f.0d3f14"
            ]
        ]
    },
    {
        "id": "ddb717fb.d9a6d8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4067.5,
        "y": 2325,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "81b55fda.fb8e98"
            ]
        ]
    },
    {
        "id": "59a2ea1f.0d3f14",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 4221.5,
        "y": 2285,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "81b55fda.fb8e98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4225,
        "y": 2325,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "1bcc30a0.546397",
                "1eaaa262.028326"
            ]
        ]
    },
    {
        "id": "1bcc30a0.546397",
        "type": "save",
        "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingB.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingB.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4565,
        "y": 2324,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "68a7db89.5a89fc",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 4423,
        "y": 2282,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "1eaaa262.028326",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityB.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4494,
        "y": 2373,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "71f36947.989c9",
        "type": "set",
        "name": "set attachment_param (gfp-n) for OTN",
        "xml": "<set>\n<parameter name='gfp-n' value='`$tmp.aai.vpn-binding.route-distinguisher`' />\n",
        "comments": "",
        "x": 3119,
        "y": 640,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "24508e5.8723172",
        "type": "comment",
        "name": "only dst ttp exists. No src",
        "info": "",
        "comments": "",
        "x": 3714,
        "y": 326,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "f3eaab4d.9a827",
        "type": "comment",
        "name": "only src ttp exists. No dst",
        "info": "",
        "comments": "",
        "x": 3271,
        "y": 1904,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "a3a1c771.fa4dc8",
        "type": "switchNode",
        "name": "switch vpn-binding has src-access-ltp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3450,
        "y": 488,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "6921df6d.0bad7",
                "5859006e.3869c8"
            ]
        ]
    },
    {
        "id": "5859006e.3869c8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3692,
        "y": 1077,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "6a1db5bd.d7e224"
            ]
        ]
    },
    {
        "id": "6921df6d.0bad7",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3686,
        "y": 368,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "6b14e6ca.05c05"
            ]
        ]
    },
    {
        "id": "6a1db5bd.d7e224",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3850,
        "y": 1076,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "e8ac2c73.115cc",
                "de077050.d3ab3",
                "d36a1b80.8692c8",
                "73f78d36.ab931c",
                "8ec0e69e.0bdfb8",
                "4004366.ff0b5c8"
            ]
        ]
    },
    {
        "id": "de077050.d3ab3",
        "type": "set",
        "name": "set attachment_param for OTN G",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingG.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingG.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingG.src-access-ltp-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingG.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-domainG' value='`$tmp.aai.vpn-bindingG.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingG.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingG.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingG.access-topology-id`' />\n",
        "comments": "",
        "x": 4114,
        "y": 959,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "8ec0e69e.0bdfb8",
        "type": "execute",
        "name": "execute RestApiCallNode Create OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-domainG-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4195,
        "y": 1274,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "a8d20b89.8deb88",
                "ebe8f709.819288"
            ]
        ]
    },
    {
        "id": "a8d20b89.8deb88",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4504.5,
        "y": 1243,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "f56a0e73.901ac"
            ]
        ]
    },
    {
        "id": "ebe8f709.819288",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4509.5,
        "y": 1308,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "8bcbb353.d66038"
            ]
        ]
    },
    {
        "id": "f56a0e73.901ac",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4680.5,
        "y": 1243,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "8bcbb353.d66038",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4676,
        "y": 1308,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "d36a1b80.8692c8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domainG.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingG.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingG.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingG.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingG.src-access-node-id`\" />\n",
        "comments": "",
        "x": 4052,
        "y": 1007,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "73f78d36.ab931c",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domainG.pnf-name\"\n        pfx='tmp.aai.domainG-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4078,
        "y": 1124,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "e0243648.484bc",
                "e14aa09.d5d416",
                "5447b1d0.03a8b"
            ]
        ]
    },
    {
        "id": "e0243648.484bc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4273.5001220703125,
        "y": 1076,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "94135ed.07ea02"
            ]
        ]
    },
    {
        "id": "e14aa09.d5d416",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4265.5001220703125,
        "y": 1131,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "1628394b.83cd8f"
            ]
        ]
    },
    {
        "id": "94135ed.07ea02",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4417.8824462890625,
        "y": 1075.6556701660156,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "fdedf72e.2dd36"
            ]
        ]
    },
    {
        "id": "fdedf72e.2dd36",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.domainG-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4602,
        "y": 1074,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "f99d2e19.85b668"
            ]
        ]
    },
    {
        "id": "f99d2e19.85b668",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4797,
        "y": 1074,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "ff4cc7a8.15eb18"
            ]
        ]
    },
    {
        "id": "5447b1d0.03a8b",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4270.5001220703125,
        "y": 1188,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "74603a77.be9d34"
            ]
        ]
    },
    {
        "id": "74603a77.be9d34",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4422.5001220703125,
        "y": 1189,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "1628394b.83cd8f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4433.5001220703125,
        "y": 1132,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "e8ac2c73.115cc",
        "type": "set",
        "name": "set vpn-bindingG and connectivityG",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingG.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityG.' value=\"`$tmp.aai.connectivity.`\" />\n",
        "comments": "",
        "x": 4109,
        "y": 899,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "ff4cc7a8.15eb18",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5000,
        "y": 1078,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "8469558b.e4d748"
            ]
        ]
    },
    {
        "id": "cf8a4c78.37fe58",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5385,
        "y": 1091,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "44cef850.3e64a",
                "9337c3a8.6f7408",
                "6a44b1b.7cb45d"
            ]
        ]
    },
    {
        "id": "8469558b.e4d748",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5179,
        "y": 1078,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "82428162.54c128",
                "cf8a4c78.37fe58"
            ]
        ]
    },
    {
        "id": "82428162.54c128",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5415,
        "y": 1039,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "44cef850.3e64a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5595,
        "y": 1082,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "ffb7eeb1.dda348"
            ]
        ]
    },
    {
        "id": "9337c3a8.6f7408",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5587,
        "y": 1137,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "28235dd8.9620aa"
            ]
        ]
    },
    {
        "id": "6a44b1b.7cb45d",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5592,
        "y": 1194,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "a95b4d04.8ebfb"
            ]
        ]
    },
    {
        "id": "a95b4d04.8ebfb",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5744,
        "y": 1195,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "28235dd8.9620aa",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5755,
        "y": 1140,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "ffb7eeb1.dda348",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5739.38232421875,
        "y": 1079.6556701660156,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "eb1ea22e.dc12c"
            ]
        ]
    },
    {
        "id": "eb1ea22e.dc12c",
        "type": "set",
        "name": "set controller domainG data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5954,
        "y": 1076,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "47e1e7c7.6cadf",
        "type": "comment",
        "name": "both src and dst exist",
        "info": "",
        "comments": "",
        "x": 3728,
        "y": 1017,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "b3842f71.731b38",
        "type": "switchNode",
        "name": "switch vpn-binding is not already Activated (i.e. is either Created or Modified)",
        "xml": "<switch test=\"`$tmp.aai.vpn-binding.operational-status != 'Activated' `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2290,
        "y": 744,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "fe4cd4cf.21da1",
                "8d3265c3.ddab38"
            ]
        ]
    },
    {
        "id": "8d3265c3.ddab38",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2697,
        "y": 762,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "418df61.fe2be08"
            ]
        ]
    },
    {
        "id": "fe4cd4cf.21da1",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2697,
        "y": 707,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "8b0dea0b.e78e98"
            ]
        ]
    },
    {
        "id": "8b0dea0b.e78e98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2853,
        "y": 705,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "71f36947.989c9",
                "4573661e.19551"
            ]
        ]
    },
    {
        "id": "418df61.fe2be08",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2830,
        "y": 763,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "5c62cbf5.952894",
        "type": "set",
        "name": "unset tmp.aai.all-vpn-bindings",
        "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value=\"\" />\n",
        "comments": "",
        "x": 1007,
        "y": 179,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "a7fd19a0.011a5",
        "type": "comment",
        "name": "CLL new",
        "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
        "comments": "",
        "x": 4124,
        "y": 597,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "41c50446.37f104",
        "type": "set",
        "name": "set leaf-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`leaf-tunnels-list[$leaftunsidx].tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`leaf-tunnels-list[$leaftunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`leaf-tunnels-list_length`' value='`$leaftunsidx + 1`' />\n",
        "comments": "",
        "x": 4184,
        "y": 636,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "4957906b.cb3908",
        "type": "set",
        "name": "unset leaf-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`leaf-tunnels-list.`' value='' />\n<parameter name='`leaf-tunnels-list_length`' value='0' />\n<parameter name='`leaftunsidx`' value='0' />\n",
        "comments": "",
        "x": 1000,
        "y": 87,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "5277b309.13aef4",
        "type": "comment",
        "name": "CLL new",
        "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
        "comments": "",
        "x": 3536,
        "y": 2113,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "51d22e16.357968",
        "type": "set",
        "name": "set root-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`root-tunnels-list[$roottunsidx].tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`root-tunnels-list[$roottunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`root-tunnels-list_length`' value='`$roottunsidx + 1`' />\n",
        "comments": "",
        "x": 3592,
        "y": 2162,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "8191f581.e3e888",
        "type": "set",
        "name": "unset root-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`root-tunnels-list.`' value='' />\n<parameter name='`root-tunnels-list_length`' value='0' />\n<parameter name='`roottunsidx`' value='0' />\n",
        "comments": "",
        "x": 1000,
        "y": 126,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "25a3d5e5.55ea62",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1031,
        "y": 227,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "624a734b.81957c",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--$vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 241,
        "y": 702,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "2ff4bd45.763852",
                "237ce68a.9b5a2a",
                "86bae4d8.c51f3"
            ]
        ]
    },
    {
        "id": "2ff4bd45.763852",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 460,
        "y": 640,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "2f347c57.a92144"
            ]
        ]
    },
    {
        "id": "237ce68a.9b5a2a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 469.490966796875,
        "y": 682.5740356445312,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "196b18f9.87f4a7"
            ]
        ]
    },
    {
        "id": "86bae4d8.c51f3",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 458,
        "y": 729,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "d6f02bd7.9f988"
            ]
        ]
    },
    {
        "id": "2f347c57.a92144",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 657,
        "y": 636,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "408bfafb.b2f244"
            ]
        ]
    },
    {
        "id": "196b18f9.87f4a7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 623.0623779296875,
        "y": 685.8597717285156,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "d6f02bd7.9f988",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 627,
        "y": 730,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "408bfafb.b2f244",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 880.33349609375,
        "y": 635.9999389648438,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "7d8f8b2e.4aa30c"
            ]
        ]
    },
    {
        "id": "7d8f8b2e.4aa30c",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1081.0001335144043,
        "y": 637.000020980835,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "bd2be559.7e491"
            ]
        ]
    },
    {
        "id": "bd2be559.7e491",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 211,
        "y": 899,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "97323d62.80248",
                "afdba634.5389a8",
                "c784d901.2500c8"
            ]
        ]
    },
    {
        "id": "97323d62.80248",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 419,
        "y": 863,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "dc950dad.bba8c8"
            ]
        ]
    },
    {
        "id": "afdba634.5389a8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 419.490966796875,
        "y": 908.5740356445312,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "f09199a5.a037f"
            ]
        ]
    },
    {
        "id": "c784d901.2500c8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 417,
        "y": 952,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "a903bba8.c7f45"
            ]
        ]
    },
    {
        "id": "f09199a5.a037f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 582.0623779296875,
        "y": 908.8597717285156,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "a903bba8.c7f45",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 586,
        "y": 953,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "c4e5acdc.5eea4",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 558,
        "y": 1447,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "f2e2cc22.a529f"
            ]
        ]
    },
    {
        "id": "f2e2cc22.a529f",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 761,
        "y": 1459,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "c09b72f6.aeae98"
            ]
        ]
    },
    {
        "id": "c09b72f6.aeae98",
        "type": "outcome",
        "name": "UNI",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 927,
        "y": 1456,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "bfe2cfaf.5416a"
            ]
        ]
    },
    {
        "id": "bfe2cfaf.5416a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1088,
        "y": 1453,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "ed44bd0b.bb6278",
                "85af841c.633c5",
                "785dd3f1.f249ac",
                "b8d52cff.f0dcb",
                "4915b2e4.5fd2dc"
            ]
        ]
    },
    {
        "id": "85af841c.633c5",
        "type": "set",
        "name": "unset tmp.aai.uni",
        "xml": "<set>\n<parameter name='tmp.aai.uni.' value='' />\n",
        "comments": "",
        "x": 1292,
        "y": 1411,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "ed44bd0b.bb6278",
        "type": "save",
        "name": "get uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.uni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1289,
        "y": 1456,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "6b32d7eb.72211",
                "7343128c.f923b4",
                "b9b05d3.e5ae12"
            ]
        ]
    },
    {
        "id": "7343128c.f923b4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1484.490966796875,
        "y": 1429.573974609375,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "5dcee0f6.9162a8"
            ]
        ]
    },
    {
        "id": "b9b05d3.e5ae12",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1480,
        "y": 1473.9999389648438,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "b7ed6a74.25237"
            ]
        ]
    },
    {
        "id": "5dcee0f6.9162a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1647.0625,
        "y": 1428.8596801757812,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "b7ed6a74.25237",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1648,
        "y": 1473.9999389648438,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "dfdfa822.c47e1",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1650,
        "y": 1520.9999389648438,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "6b32d7eb.72211",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1481,
        "y": 1520.9999389648438,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "dfdfa822.c47e1"
            ]
        ]
    },
    {
        "id": "9ed7a6be.5472c",
        "type": "switchNode",
        "name": "switch conn type",
        "xml": "<switch test=\"`$tmp.aai.connectivity.vpn-type`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 170.5,
        "y": 1118,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "3e9a846b.aac024",
                "fd2eac9f.aa3be8",
                "81d85b97.ec18c"
            ]
        ]
    },
    {
        "id": "3d4d11fc.e19976",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 281.5,
        "y": 1474,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "3e9a846b.aac024",
        "type": "outcome",
        "name": "leaf",
        "xml": "<outcome value='leaf'>\n",
        "comments": "",
        "outputs": 1,
        "x": 156.5,
        "y": 1364,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "186f4361.0093b5"
            ]
        ]
    },
    {
        "id": "fd2eac9f.aa3be8",
        "type": "outcome",
        "name": "root",
        "xml": "<outcome value='root'>\n",
        "comments": "",
        "outputs": 1,
        "x": 157.5,
        "y": 1422,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "a8f57470.dafb1"
            ]
        ]
    },
    {
        "id": "81d85b97.ec18c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 159.5,
        "y": 1476,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "3d4d11fc.e19976"
            ]
        ]
    },
    {
        "id": "17f45567.72d3f3",
        "type": "comment",
        "name": "CLL new",
        "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
        "comments": "",
        "x": 1265,
        "y": 1684,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "785dd3f1.f249ac",
        "type": "set",
        "name": "set ethernet-srv-end-points-list array",
        "xml": "<set>\n<!--<parameter name='`ethernet-srv-end-points-list[$epidx].ethernet-end-point-name`' value='`$tmp.aai.connectivity.connectivity-id`' />-->\n<parameter name='`ethernet-srv-end-points-list[$epidx].ethernet-end-point-name`' value='`$tmp.aai.uni.id`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].index-number`' value='0' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].eth-node-id`' value='`$tmp.uni-node-id-short`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].eth-node-tp-id`' value='`$tmp.aai.uni.tp-id`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].leafOrRootAccess`' value='`$leafOrRootAccess`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].cvlan`' value='`$tmp.aai.connectivity.cvlan`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].CIR`' value='`$tmp.aai.uni.data-source * 1000000`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].EIR`' value='`$tmp.aai.uni.data-source * 1000000`' />\n\n<parameter name='`ethernet-srv-end-points-list_length`' value='`$epidx + 1`' />\n",
        "comments": "",
        "x": 1356,
        "y": 1738,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "a8f57470.dafb1",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 273.5,
        "y": 1418,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "6d0b5941.55c8f8",
                "c4e5acdc.5eea4",
                "3e47dbd3.f7afc4",
                "c378a6a3.2e4c8",
                "901c32b.8d67fd",
                "d142c0f2.700e98",
                "b2e88ff.3380b7",
                "3026fc23.0fd5f4",
                "f24a5646.1c02c8",
                "db09832f.86c758",
                "3c14b8ea.b96268",
                "c7cb304b.f39168"
            ]
        ]
    },
    {
        "id": "186f4361.0093b5",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 286.5,
        "y": 1360,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "c4e5acdc.5eea4",
                "b5d90017.45ce98",
                "913d2a70.ccfd3",
                "c378a6a3.2e4c8",
                "901c32b.8d67fd",
                "d142c0f2.700e98",
                "b2e88ff.3380b7",
                "3026fc23.0fd5f4",
                "f24a5646.1c02c8",
                "db09832f.86c758",
                "3c14b8ea.b96268",
                "c7cb304b.f39168"
            ]
        ]
    },
    {
        "id": "b5d90017.45ce98",
        "type": "set",
        "name": "unset ethernet-srv-end-points-list",
        "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
        "comments": "",
        "x": 577.5,
        "y": 1240,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "6d0b5941.55c8f8",
        "type": "set",
        "name": "unset ethernet-srv-end-points-list",
        "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
        "comments": "",
        "x": 594.5,
        "y": 1334,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "c378a6a3.2e4c8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 521,
        "y": 1703,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "3613e1a4.3cd206"
            ]
        ]
    },
    {
        "id": "3613e1a4.3cd206",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 753,
        "y": 1702,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "c46d21fc.7c5088"
            ]
        ]
    },
    {
        "id": "c46d21fc.7c5088",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 965,
        "y": 1703,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "41d3d62e.c810a8"
            ]
        ]
    },
    {
        "id": "41d3d62e.c810a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 221,
        "y": 1859,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "24bb38a6.cf0a88",
                "80203aa0.6c8a6"
            ]
        ]
    },
    {
        "id": "80203aa0.6c8a6",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
        "comments": "",
        "x": 456,
        "y": 1846,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "24bb38a6.cf0a88",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 446,
        "y": 1907,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "e7df9a86.a02dd8",
                "d754cb82.42f37",
                "80509f91.59bce8"
            ]
        ]
    },
    {
        "id": "d754cb82.42f37",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 659.490966796875,
        "y": 1891.5740356445312,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "31b91fbf.39fff8"
            ]
        ]
    },
    {
        "id": "80509f91.59bce8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 655,
        "y": 1936,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "312541a.87b29be"
            ]
        ]
    },
    {
        "id": "e7df9a86.a02dd8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 657,
        "y": 1996,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "f19203b2.563a88"
            ]
        ]
    },
    {
        "id": "31b91fbf.39fff8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 822.0625,
        "y": 1890.8597412109375,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "312541a.87b29be",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 823,
        "y": 1936,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "f19203b2.563a88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 826,
        "y": 1995,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "70164d90.2f08c4",
                "27824a25.86f05e"
            ]
        ]
    },
    {
        "id": "b2e88ff.3380b7",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivity.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivity.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivity.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivity.access-topology-id`' />\n<!--<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />-->\n<!--<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<!--<parameter name='index-number' value='0' />-->\n<!--<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />-->\n<!--<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />-->\n<!--<parameter name='CIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />-->\n<!--<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />-->\n",
        "comments": "",
        "x": 225,
        "y": 2494,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "3026fc23.0fd5f4",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-ethernet-service-loop.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 368,
        "y": 2554,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "a9d1707f.7a88c8",
                "8ab460b7.633638"
            ]
        ]
    },
    {
        "id": "a9d1707f.7a88c8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 680.5,
        "y": 2531,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "8ab460b7.633638",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 684.5,
        "y": 2571,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "7ddc0654.bb96f8"
            ]
        ]
    },
    {
        "id": "a1d8045c.1b61e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 860.5,
        "y": 2535,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "7ddc0654.bb96f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 876,
        "y": 2589,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "1eddd66c.da478a"
            ]
        ]
    },
    {
        "id": "cee3e55d.189dc",
        "type": "save",
        "name": "update vpn-binding resource (aka. OTN ) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1171.5,
        "y": 2558,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "bb915427.f0582",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
        "comments": "",
        "x": 2638.5,
        "y": 1909,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "1eddd66c.da478a",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1133.5,
        "y": 2600,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "913d2a70.ccfd3",
        "type": "set",
        "name": "set leafOrRootAccess",
        "xml": "<set>\n<parameter name='`leafOrRootAccess`' value='ietf-eth-tran-types:leaf-access' />\n",
        "comments": "",
        "x": 543.5,
        "y": 1278,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "3e47dbd3.f7afc4",
        "type": "set",
        "name": "set leafOrRootAccess",
        "xml": "<set>\n<parameter name='`leafOrRootAccess`' value='ietf-eth-tran-types:root-primary' />\n",
        "comments": "",
        "x": 556.5,
        "y": 1374,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "e5881b35.2a2bf8",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4293,
        "y": 550,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "4004366.ff0b5c8",
        "type": "save",
        "name": "update vpn-binding G resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingG.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingG.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingG.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4196,
        "y": 1369,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "8caebf31.dc028",
        "type": "save",
        "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingB.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingB.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3690,
        "y": 2041,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "dc950dad.bba8c8",
        "type": "switchNode",
        "name": "switch connectivity is not already Activated (i.e. is either Created or Modified)",
        "xml": "<switch test=\"`$tmp.aai.connectivity.operational-status != 'Activated' `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 791,
        "y": 849,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "28d7875f.122df",
                "47ffeb93.7b808c"
            ]
        ]
    },
    {
        "id": "28d7875f.122df",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1154,
        "y": 872,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "f3fb6a94.133bb"
            ]
        ]
    },
    {
        "id": "47ffeb93.7b808c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1154,
        "y": 821,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "3da0dc2.736e6a4"
            ]
        ]
    },
    {
        "id": "f3fb6a94.133bb",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1310,
        "y": 870,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "9ed7a6be.5472c"
            ]
        ]
    },
    {
        "id": "3da0dc2.736e6a4",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1287,
        "y": 822,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "ca01ca51.23bb98",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value=\"\" />\n",
        "comments": "",
        "x": 2047,
        "y": 220,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "6ccc1a6d.d89cd4",
        "type": "set",
        "name": "set root-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`roottunsidx`' value='`$roottunsidx + 1`' />\n",
        "comments": "",
        "x": 3589,
        "y": 2201,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "ceaa1f2c.697ad",
        "type": "set",
        "name": "set leaf-otn-tunnels-list array",
        "xml": "<set>\n<parameter name='`leaftunsidx`' value='`$leaftunsidx + 1`' />\n",
        "comments": "",
        "x": 4179,
        "y": 674,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "b8d52cff.f0dcb",
        "type": "set",
        "name": "set ethernet-srv-end-points-list array",
        "xml": "<set>\n<parameter name='`epidx`' value='`$epidx + 1`' />\n",
        "comments": "",
        "x": 1353,
        "y": 1780,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "901c32b.8d67fd",
        "type": "set",
        "name": "set filename",
        "xml": "<set>\n<parameter name='filenameclleths' value=\"`$leafOrRootAccess + $tmp.aai.connectivity.access-node-id`\" />",
        "comments": "",
        "x": 532,
        "y": 1514,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "d142c0f2.700e98",
        "type": "execute",
        "name": "execute printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenameclleths`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 563,
        "y": 1554,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "70164d90.2f08c4",
        "type": "set",
        "name": "set otn-tunnels-name-list array",
        "xml": "<set>\n<parameter name='`otn-tunnels-name-list[$otntunsidx].otn-tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`otn-tunnels-name-list[$otntunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`otn-tunnels-name-list_length`' value='`$otntunsidx + 1`' />\n",
        "comments": "",
        "x": 1111,
        "y": 1962,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "27824a25.86f05e",
        "type": "set",
        "name": "set otn-tunnels-name-list array",
        "xml": "<set>\n<parameter name='`otntunsidx`' value='`$otntunsidx + 1`' />\n",
        "comments": "",
        "x": 1114,
        "y": 2004,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "f24a5646.1c02c8",
        "type": "set",
        "name": "unset otn-tunnels-name-list array",
        "xml": "<set>\n<parameter name='`otn-tunnels-name-list.`' value='' />\n<parameter name='`otn-tunnels-name-list_length`' value='0' />\n<parameter name='`otntunsidx`' value='0' />\n",
        "comments": "",
        "x": 557,
        "y": 1644,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "db09832f.86c758",
        "type": "set",
        "name": "set filename",
        "xml": "<set>\n<parameter name='filenamecllotns' value=\"`leafrootOTNtunnelnames`\" />",
        "comments": "",
        "x": 312,
        "y": 2023,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "3c14b8ea.b96268",
        "type": "execute",
        "name": "execute printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenamecllotns`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 320,
        "y": 2080,
        "z": "ed7c1675.7a56b",
        "wires": [
            []
        ]
    },
    {
        "id": "4915b2e4.5fd2dc",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.uni.id`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-uni\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1331,
        "y": 1629,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "bfcf3bba.b5daa",
                "9b18409e.c203c8"
            ]
        ]
    },
    {
        "id": "9b18409e.c203c8",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1554,
        "y": 1584,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "5afaf397.e20c3c"
            ]
        ]
    },
    {
        "id": "bfcf3bba.b5daa",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1556,
        "y": 1648,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "f7de9867.a0fd38"
            ]
        ]
    },
    {
        "id": "5afaf397.e20c3c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1719,
        "y": 1581,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "cdcfe3c8.962368"
            ]
        ]
    },
    {
        "id": "f7de9867.a0fd38",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 1718,
        "y": 1644,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "cdcfe3c8.962368",
        "type": "set",
        "name": "set tmp.uni-node-id-short",
        "xml": "<set>\n<parameter name='tmp.uni-node-id-short' value='`$param-prefix-uni[$param-prefix-uni_length -3]`' />\n",
        "comments": "",
        "x": 1939,
        "y": 1595,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "6d07bcb7.ffff34",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1484,
        "y": 2320,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "9547fb43.8165f"
            ]
        ]
    },
    {
        "id": "261f721d.19cda6",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainConn.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainConn.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 1869,
        "y": 2333,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "a4fad359.d63e7",
                "d7202a06.97a2a8",
                "d2a1d22e.b2ed6"
            ]
        ]
    },
    {
        "id": "9547fb43.8165f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1663,
        "y": 2320,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "9b0cdae9.5834e8",
                "261f721d.19cda6"
            ]
        ]
    },
    {
        "id": "9b0cdae9.5834e8",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainConn id",
        "xml": "<set>\n<parameter name='tmp.domainConn.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 1899,
        "y": 2281,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "a4fad359.d63e7",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2079,
        "y": 2324,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "ce2ed097.248ac"
            ]
        ]
    },
    {
        "id": "d7202a06.97a2a8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2071,
        "y": 2379,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "15f2754c.6e5b2b"
            ]
        ]
    },
    {
        "id": "d2a1d22e.b2ed6",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2076,
        "y": 2436,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "fe7bb44f.f58b7"
            ]
        ]
    },
    {
        "id": "fe7bb44f.f58b7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2228,
        "y": 2437,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "15f2754c.6e5b2b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2239,
        "y": 2382,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "ce2ed097.248ac",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2223.38232421875,
        "y": 2321.6556701660156,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "1c2a2a5a.6d8256"
            ]
        ]
    },
    {
        "id": "1c2a2a5a.6d8256",
        "type": "set",
        "name": "set controller domainConn data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.url' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.user' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.password' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 2438,
        "y": 2318,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "9710382e.112c58",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.pnf-name-forUrl\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 562,
        "y": 2366,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "afc311a9.64a498",
                "1b364ee.7270531",
                "aa64b78b.7ab17"
            ]
        ]
    },
    {
        "id": "afc311a9.64a498",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 757.5001220703125,
        "y": 2318,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "7cd619d5.a4e8c"
            ]
        ]
    },
    {
        "id": "1b364ee.7270531",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 749.5001220703125,
        "y": 2373,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "7127ee10.2a0b4"
            ]
        ]
    },
    {
        "id": "7cd619d5.a4e8c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 901.8824462890625,
        "y": 2317.6556701660156,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "fd5a5a0.ad9b128"
            ]
        ]
    },
    {
        "id": "fd5a5a0.ad9b128",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1086,
        "y": 2316,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "8c513405.b809e8"
            ]
        ]
    },
    {
        "id": "8c513405.b809e8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1281,
        "y": 2316,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "6d07bcb7.ffff34"
            ]
        ]
    },
    {
        "id": "aa64b78b.7ab17",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 754.5001220703125,
        "y": 2430,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "22a641d1.a7babe"
            ]
        ]
    },
    {
        "id": "22a641d1.a7babe",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 906.5001220703125,
        "y": 2431,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "7127ee10.2a0b4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 917.5001220703125,
        "y": 2374,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "41c682cf.a83f2c",
        "type": "set",
        "name": "set tmp.pnf-name-forUrl",
        "xml": "<set>\n\n<parameter name='tmp.pnf-name-forUrl' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.connectivity.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.connectivity.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.connectivity.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.connectivity.access-node-id`\" />\n",
        "comments": "",
        "x": 552,
        "y": 2278,
        "z": "ed7c1675.7a56b",
        "wires": []
    },
    {
        "id": "c7cb304b.f39168",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 297,
        "y": 2409,
        "z": "ed7c1675.7a56b",
        "wires": [
            [
                "41c682cf.a83f2c",
                "9710382e.112c58"
            ]
        ]
    },
    {
        "id": "d390d070.3dc4c",
        "type": "comment",
        "name": "Temporary skipping this check - to support multiple instances in one slice",
        "info": "",
        "comments": "",
        "x": 1511.9666748046875,
        "y": 226.88333129882812,
        "z": "ed7c1675.7a56b",
        "wires": []
    }
]