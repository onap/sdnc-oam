[
    {
        "id": "917062ba.849008",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 218,
        "y": 53,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "1c89f912.b4a1a7"
            ]
        ]
    },
    {
        "id": "1c89f912.b4a1a7",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 502.2856903076172,
        "y": 114.23810863494873,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "79c37e31.b46698"
            ]
        ]
    },
    {
        "id": "79c37e31.b46698",
        "type": "method",
        "name": "method cll-vnf-topology-operation-cll-F1",
        "xml": "<method rpc='cll-vnf-topology-operation-cll-F1' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 418.4285888671875,
        "y": 192.00003051757812,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "e40aa944.361218"
            ]
        ]
    },
    {
        "id": "e40aa944.361218",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 152.238037109375,
        "y": 695.6666870117188,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "91449a53.15abc8",
                "52206559.265cbc",
                "dc5388ea.7452c",
                "cd1cf50b.3447d",
                "36cc6c32.a7a5bc",
                "ef8123f7.a43b88",
                "349f069b.2d098a"
            ]
        ]
    },
    {
        "id": "91449a53.15abc8",
        "type": "set",
        "name": "set query_param",
        "xml": "<set>\n<parameter name='prop.ethsrvType' value='`$network-route-A`' />\n\n",
        "comments": "",
        "x": 425,
        "y": 650,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "52206559.265cbc",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 646,
        "y": 718,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "dc5388ea.7452c",
        "type": "execute",
        "name": "execute printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenamemm`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 436,
        "y": 764,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "349f069b.2d098a",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 629,
        "y": 828,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "cd1cf50b.3447d",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='otnidx' start='0' end='`$tmp.otninfo_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 456,
        "y": 984,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "4719cb7a.a9766c"
            ]
        ]
    },
    {
        "id": "4719cb7a.a9766c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 725,
        "y": 984,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "ffc8e265.c8aca8",
                "13f1d395.eb898c",
                "b91b98db.dabfa",
                "66797943.9e353",
                "c2e19c98.abbc4",
                "11040b46.8e035d",
                "130409d7.ba1cfe",
                "3e17d72f.d352d",
                "1ea79a81.da9f1d",
                "f0ca8ca2.d5c31"
            ]
        ]
    },
    {
        "id": "ffc8e265.c8aca8",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding $otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1618,
        "y": 798,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "13f1d395.eb898c",
        "type": "switchNode",
        "name": "switch dstPort == NULL",
        "xml": "<switch test=\"`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id == ''`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1332,
        "y": 888,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "467187d6.5cb93",
                "dac264a6.6c03c8"
            ]
        ]
    },
    {
        "id": "467187d6.5cb93",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1698,
        "y": 849,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "6cf7a6e6.d655a8"
            ]
        ]
    },
    {
        "id": "dac264a6.6c03c8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1699,
        "y": 895,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "5ca74bf6.9d33ac"
            ]
        ]
    },
    {
        "id": "6cf7a6e6.d655a8",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n",
        "comments": "",
        "x": 1912,
        "y": 848,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "5ca74bf6.9d33ac",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />\n",
        "comments": "",
        "x": 1910,
        "y": 893,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "b91b98db.dabfa",
        "type": "set",
        "name": "set srcdstpnf-name",
        "xml": "<set>\n<parameter name='tmp.srcdstpnf-name' value=\"`'networkId-providerId-' + \n                                             $tmp.access-provider-id + '-clientId-' +\n                                             $tmp.access-client-id + '-topologyId-' + \n                                             $tmp.access-topology-id + '-nodeId-' + \n                                             $tmp.srcdstpnf-id`\" />\n\n",
        "comments": "",
        "x": 1508,
        "y": 962,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "66797943.9e353",
        "type": "get-resource",
        "name": "get-resource tmp.srcdstpnf-name",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.srcdstpnf-name\"\n        pfx='tmp.aai.srcdst-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1552,
        "y": 1010,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "2fed2218.d10326",
                "6a522d09.043e1c",
                "4f95b3dd.ef9534"
            ]
        ]
    },
    {
        "id": "2fed2218.d10326",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1764.5,
        "y": 957,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "66f51b5e.6158fc"
            ]
        ]
    },
    {
        "id": "6a522d09.043e1c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1776.5,
        "y": 1007,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "8e681ebe.696e48"
            ]
        ]
    },
    {
        "id": "4f95b3dd.ef9534",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1767.5,
        "y": 1062,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "6977d582.14091c"
            ]
        ]
    },
    {
        "id": "6977d582.14091c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1912.5,
        "y": 1061,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "8e681ebe.696e48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1923.5,
        "y": 1004,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "66f51b5e.6158fc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1889.8824462890625,
        "y": 950.6556701660156,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "3a1d3f10.5d9028"
            ]
        ]
    },
    {
        "id": "3a1d3f10.5d9028",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.srcdst-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2051,
        "y": 965,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "c1512230.2580e"
            ]
        ]
    },
    {
        "id": "c1512230.2580e",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2246,
        "y": 965,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "b1b8c338.420ea"
            ]
        ]
    },
    {
        "id": "fd7930d3.be8638",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2626,
        "y": 961,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "ac1612ad.b61828",
                "27939c6a.4866bc"
            ]
        ]
    },
    {
        "id": "27939c6a.4866bc",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 2834,
        "y": 968,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "b52d7285.57757",
                "3657321a.c3ba86",
                "c044af78.310578"
            ]
        ]
    },
    {
        "id": "ac1612ad.b61828",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 2864,
        "y": 916,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "b52d7285.57757",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3044,
        "y": 959,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "cbaaba15.349bc8"
            ]
        ]
    },
    {
        "id": "3657321a.c3ba86",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3036,
        "y": 1014,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "f52e6392.eb1be8"
            ]
        ]
    },
    {
        "id": "c044af78.310578",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3041,
        "y": 1071,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "7b6a4d1e.bd1e74"
            ]
        ]
    },
    {
        "id": "7b6a4d1e.bd1e74",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3193,
        "y": 1072,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "f52e6392.eb1be8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3204,
        "y": 1017,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "cbaaba15.349bc8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3188.38232421875,
        "y": 956.6556701660156,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "37241585.bf56ba"
            ]
        ]
    },
    {
        "id": "b1b8c338.420ea",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2449,
        "y": 969,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "fd7930d3.be8638"
            ]
        ]
    },
    {
        "id": "37241585.bf56ba",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3403,
        "y": 953,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "5bdba13b.1ae3d",
        "type": "save",
        "name": "save vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-otnidx-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<!--<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />-->\n<parameter name='customer-vpn-id' value='`($maxtpn + $gfp)`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$tmp.access-provider-id`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$tmp.access-client-id`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$tmp.access-topology-id`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.domainG-src-access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.domainG-dst-access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<!--<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />-->\n<parameter name='slice-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='ops-note' value='`$tmp.srcTtpOtnLayer`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1562,
        "y": 2859,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "2982a228.f40e1e"
            ]
        ]
    },
    {
        "id": "e79aedfa.249",
        "type": "save",
        "name": "save connectivity-A relationship to vpn-binding-A, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2134.5,
        "y": 2963,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "2982a228.f40e1e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1868,
        "y": 2858,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "3d256a26.ef6a26"
            ]
        ]
    },
    {
        "id": "3d256a26.ef6a26",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2077.5,
        "y": 2858.25390625,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "7e7c0247.8ba9f4",
        "type": "switchNode",
        "name": "switch otnidx == 0",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1471,
        "y": 2976,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "2d5f380b.a9d4d8",
                "4f3979ad.4a4e48"
            ]
        ]
    },
    {
        "id": "2d5f380b.a9d4d8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1654,
        "y": 2976,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "ffef74e0.d4b7c"
            ]
        ]
    },
    {
        "id": "4f3979ad.4a4e48",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1479,
        "y": 3123,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "a4296e1e.d8981"
            ]
        ]
    },
    {
        "id": "1a4f2a93.c11d2d",
        "type": "switchNode",
        "name": "switch otnidx == last",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1820,
        "y": 3204,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "b3a20bdf.7738d8",
                "b291bad0.bdbf18"
            ]
        ]
    },
    {
        "id": "b3a20bdf.7738d8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1996,
        "y": 3205,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "6075d4e4.60740c"
            ]
        ]
    },
    {
        "id": "c49019c0.e84e08",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n\n",
        "comments": "",
        "x": 2059,
        "y": 3020,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "ffef74e0.d4b7c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1795,
        "y": 2966,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "e79aedfa.249",
                "c49019c0.e84e08",
                "733089d7.e1acb"
            ]
        ]
    },
    {
        "id": "5a6ce6ad.7fc7a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2701,
        "y": 3155,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "424b4783.7d233"
            ]
        ]
    },
    {
        "id": "cc1f97b8.8c6ce8",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='testingvalue' value='$tmp.otninfo_length -1' />\n",
        "comments": "",
        "x": 1768,
        "y": 3155,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "a4296e1e.d8981",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1603,
        "y": 3130,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "cc1f97b8.8c6ce8",
                "1a4f2a93.c11d2d"
            ]
        ]
    },
    {
        "id": "c2e19c98.abbc4",
        "type": "switchNode",
        "name": "switch dmnsidx == 0 (domainA)",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1522,
        "y": 1179,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "11383ee6.e1d7d9",
                "6fa9ae0c.501d18"
            ]
        ]
    },
    {
        "id": "11383ee6.e1d7d9",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1723,
        "y": 1177,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "b4854ac4.e47338"
            ]
        ]
    },
    {
        "id": "e2b0b006.cad94",
        "type": "set",
        "name": "set pce-src-node",
        "xml": "<set>\n<parameter name='tmp.pce-src-node' value='`$tmp.srcdstpnf-name`' />",
        "comments": "",
        "x": 2004,
        "y": 1127,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "5b58456d.2aa8c4",
        "type": "switchNode",
        "name": "switch dmnsidx == last (domainB)",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1940,
        "y": 1228,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "7d1f463f.75db48",
                "1703470e.535939"
            ]
        ]
    },
    {
        "id": "7d1f463f.75db48",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2170,
        "y": 1224,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "1c45c1ae.cc5246"
            ]
        ]
    },
    {
        "id": "6fa9ae0c.501d18",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1723,
        "y": 1226,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "5b58456d.2aa8c4"
            ]
        ]
    },
    {
        "id": "1703470e.535939",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2171,
        "y": 1270,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "9a461e80.88ba58"
            ]
        ]
    },
    {
        "id": "9a461e80.88ba58",
        "type": "set",
        "name": "set attachment_param domain G",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 2385,
        "y": 1270,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "d9594ef.146e23",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 2059,
        "y": 1174,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "b4854ac4.e47338",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1847,
        "y": 1168,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "d9594ef.146e23"
            ]
        ]
    },
    {
        "id": "1c45c1ae.cc5246",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2303,
        "y": 1200,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "c5fb0dfd.a15ba"
            ]
        ]
    },
    {
        "id": "ca07a786.2d259",
        "type": "set",
        "name": "set pce-src-node",
        "xml": "<set>\n<parameter name='tmp.pce-dst-node' value='`$tmp.srcdstpnf-name`' />",
        "comments": "",
        "x": 2459,
        "y": 1216,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "c5fb0dfd.a15ba",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />",
        "comments": "",
        "x": 2507,
        "y": 1168,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "b291bad0.bdbf18",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2024,
        "y": 3471,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "62a1848.f7c8bfc"
            ]
        ]
    },
    {
        "id": "ec243f0e.e78df8",
        "type": "execute",
        "name": "execute UUID generator for connectivity domain otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2499,
        "y": 3456,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "b5d0d456.d5e17",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-otnidx-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-otnidx-uuid`' />\n<!--<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />-->\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<!--<parameter name='access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<!--<parameter name='access-ltp-id' value='``' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->\n\n<!--<parameter name='bandwidth-profile-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='dummy' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<!--<parameter name='cbs' value='`$prop.sotn.cbs`' />-->\n<!--<parameter name='ebs' value='`$prop.sotn.ebs`' />-->\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2437,
        "y": 3506,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "1472c185.25ef66",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 2574,
        "y": 3605,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "937a1753.6c2cd",
        "type": "comment",
        "name": "connectivity has not been created for middle domains, so we have to create one",
        "info": "",
        "comments": "",
        "x": 2577,
        "y": 3397,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "3fb48dac.724cba",
        "type": "save",
        "name": "save connectivity-otnidx relationship to vpn-binding-otnidx, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2542,
        "y": 3664,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "62a1848.f7c8bfc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2181,
        "y": 3472,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "ec243f0e.e78df8",
                "b5d0d456.d5e17",
                "1472c185.25ef66",
                "3fb48dac.724cba",
                "d9f949c2.b1be88",
                "d2c94e3.4db213"
            ]
        ]
    },
    {
        "id": "d9f949c2.b1be88",
        "type": "set",
        "name": "set attachment_param domain otnidx",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 2456,
        "y": 3724,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "ef8123f7.a43b88",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='domain-A.tunnel-tp-id' value='' />\n<parameter name='domain-A.node-id' value='' />\n<parameter name='domain-A.network-id' value=\"\" />\n<parameter name='domain-A.provider-id' value=\"\" />\n<parameter name='domain-A.client-id' value=\"\" />\n<parameter name='domain-A.te-topo-id' value=\"\" />\n<parameter name='domain-A.network-type' value=\"\" />\n<parameter name='domain-A.ltpId' value=\"\" />\n<parameter name='tmp.domain-A.network-id' value=\"\" />\n<parameter name='tmp.domain-A.ttp-id' value=\"\" />\n<parameter name='network-route-A' value=\"\" />\n<!--<parameter name='domain-A.' value=\"\" />-->\n\n<parameter name='request-id' value='' />\n<parameter name='otn-source-node' value='' />\n<parameter name='otn-dest-node' value='' />\n<parameter name='bw-odu' value=\"\" />\n<parameter name='src-ttp-id' value='' />\n<parameter name='dst-ttp-id' value='' />\n\n<parameter name='domain-B.tunnel-tp-id' value='' />\n<parameter name='domain-B.node-id' value='' />\n<parameter name='domain-B.network-id' value=\"\" />\n<parameter name='domain-B.provider-id' value=\"\" />\n<parameter name='domain-B.client-id' value=\"\" />\n<parameter name='domain-B.te-topo-id' value=\"\" />\n<parameter name='domain-B.network-type' value=\"\" />\n<parameter name='domain-B.ltpId' value=\"\" />\n<parameter name='tmp.domain-B.network-id' value=\"\" />\n<parameter name='tmp.domain-B.ttp-id' value=\"\" />\n<parameter name='network-route-B' value=\"\" />\n<!--<parameter name='domain-B.' value=\"\" />-->\n\n\n\n\n\n",
        "comments": "",
        "x": 392,
        "y": 2894,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "36cc6c32.a7a5bc",
        "type": "set",
        "name": "set srcTtp OTN layer",
        "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
        "comments": "",
        "x": 433,
        "y": 906,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "424b4783.7d233",
        "type": "save",
        "name": "save middle-man-conn relationship to connectivity-B, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3025,
        "y": 3155,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "733089d7.e1acb",
        "type": "save",
        "name": "save middle-man-conn relationship to connectivity-A, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2139,
        "y": 2911,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "d2c94e3.4db213",
        "type": "save",
        "name": "save middle-man-conn relationship to connectivity-otnidx, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2538,
        "y": 3551,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "a7261999.9881d8",
        "type": "switchNode",
        "name": "switch found-middle-man?",
        "xml": "<switch test='`$found-middle-man`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2357,
        "y": 3155,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "2bb32459.fcac64"
            ]
        ]
    },
    {
        "id": "2bb32459.fcac64",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2544,
        "y": 3155,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "5a6ce6ad.7fc7a"
            ]
        ]
    },
    {
        "id": "6075d4e4.60740c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2139,
        "y": 3205,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "7c7e82f.b5a9efc",
                "383da81a.536a28",
                "a7261999.9881d8"
            ]
        ]
    },
    {
        "id": "7c7e82f.b5a9efc",
        "type": "save",
        "name": "save connectivity-B relationship to vpn-binding-B, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2455,
        "y": 3253,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "383da81a.536a28",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "x": 2382,
        "y": 3313,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "cddff981.827d58",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v21/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 443,
        "y": 3913,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "2d49e0b.d9e87a",
                "73d650d6.cd1c1",
                "77ce79ba.222c68"
            ]
        ]
    },
    {
        "id": "2d49e0b.d9e87a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 631,
        "y": 3926,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "886559d2.9d2008"
            ]
        ]
    },
    {
        "id": "73d650d6.cd1c1",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 631.490966796875,
        "y": 3971.5740356445312,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "22427bb5.1c0494"
            ]
        ]
    },
    {
        "id": "77ce79ba.222c68",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 629,
        "y": 4015,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "8183af0e.979c3"
            ]
        ]
    },
    {
        "id": "886559d2.9d2008",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 804,
        "y": 3924,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "5d380762.82e9"
            ]
        ]
    },
    {
        "id": "22427bb5.1c0494",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 794.0623779296875,
        "y": 3971.8597717285156,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "8183af0e.979c3",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 796,
        "y": 4014,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "7aad5876.b17588",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='dmnsidx' start='0' end='`$otn-tunnel-slice_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 432,
        "y": 4104,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "d9d281f0.871208"
            ]
        ]
    },
    {
        "id": "7032c836.ea98e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1242,
        "y": 4104,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "bcf06c77.b9d56"
            ]
        ]
    },
    {
        "id": "d6fa6f89.c5ed98",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='stunidx' start='0' end='`$otn-tunnel-slice[$dmnsidx].list_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1014,
        "y": 4104,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "7032c836.ea98e"
            ]
        ]
    },
    {
        "id": "5d380762.82e9",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1033,
        "y": 3925,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "4b806fec.cf791"
            ]
        ]
    },
    {
        "id": "4b806fec.cf791",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1248,
        "y": 3926,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "5269aed8.1067"
            ]
        ]
    },
    {
        "id": "bcf06c77.b9d56",
        "type": "set",
        "name": "set attachment_param sliceG",
        "xml": "<set>\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].request-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].request-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-source-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-source-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-dest-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-dest-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].bw-odu`' value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].bw-odu`\" />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].src-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].src-ttp-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].dst-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].dst-ttp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='otn-tunnel-sliceG-list_length' value='`$stunidx + 1`' />\n\n\n<parameter name=\"tmp.domainG.restapiUrl\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainurl`\" />\n<parameter name=\"tmp.domainG.restapiUser\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainuser`\" />\n<parameter name=\"tmp.domainG.restapiPassword\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainpassword`\" />",
        "comments": "",
        "x": 1495,
        "y": 4102,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "678bb9be.2e7528",
        "type": "execute",
        "name": "execute RestApiCallNode sliceG creation domainG",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-sliceG-list-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$tmp.domainG.restapiUrl + '/restconf/operations/ietf-optical-slice:create-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$tmp.domainG.restapiUser`\" />\n<parameter name=\"restapiPassword\" value=\"`tmp.domainG.restapiPassword`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1080,
        "y": 4210,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "273fc863.468be8",
                "6eaa45ca.9bba14"
            ]
        ]
    },
    {
        "id": "6eaa45ca.9bba14",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1363,
        "y": 4190,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "562a3e0b.c715a8"
            ]
        ]
    },
    {
        "id": "273fc863.468be8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1364.0002136230469,
        "y": 4240.99990940094,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "3cb4038b.3f740c"
            ]
        ]
    },
    {
        "id": "562a3e0b.c715a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing slice creation api for domain A\" />\n",
        "comments": "",
        "x": 1503.0002479553223,
        "y": 4190.000000953674,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "3cb4038b.3f740c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1509.0272598266602,
        "y": 4238.745394706726,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "d9d281f0.871208",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 664,
        "y": 4102,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "d6fa6f89.c5ed98",
                "678bb9be.2e7528"
            ]
        ]
    },
    {
        "id": "5269aed8.1067",
        "type": "switchNode",
        "name": "switch vpnuuid is for this slice",
        "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1492,
        "y": 3925,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "ff386dcd.32782",
                "224e1e2e.4d20a2"
            ]
        ]
    },
    {
        "id": "502add97.5e708c",
        "type": "set",
        "name": "set providerValue",
        "xml": "<set>\n<parameter name='providerValue' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].access-provider-id`' />\n<parameter name='found' value='false' />\n\n\n",
        "comments": "",
        "x": 2134,
        "y": 3871,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "521605a6.12e2d4",
        "type": "switchNode",
        "name": "switch $tmp.arr_length != 0",
        "xml": "<switch test='`$tmp.arr_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2167,
        "y": 3926,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "b6840948.dcaf28",
                "16f9a591.80cc1a"
            ]
        ]
    },
    {
        "id": "b6840948.dcaf28",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2363,
        "y": 3896,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "d20ee31a.4da818"
            ]
        ]
    },
    {
        "id": "16f9a591.80cc1a",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2364,
        "y": 3967,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "932a25a5.21db58"
            ]
        ]
    },
    {
        "id": "ff386dcd.32782",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1709,
        "y": 3904,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "fa5ee789.0417f8"
            ]
        ]
    },
    {
        "id": "224e1e2e.4d20a2",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1709,
        "y": 3953,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "fa5ee789.0417f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1877,
        "y": 3904,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "502add97.5e708c",
                "521605a6.12e2d4"
            ]
        ]
    },
    {
        "id": "d20ee31a.4da818",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2514,
        "y": 3894,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "4f6df904.ee87c",
                "66254394.195084"
            ]
        ]
    },
    {
        "id": "932a25a5.21db58",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2516,
        "y": 3967,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "de1fa04c.85c2d",
                "2aeb6e74.e24be2"
            ]
        ]
    },
    {
        "id": "4f6df904.ee87c",
        "type": "for",
        "name": "for arridx in tmp.arr",
        "xml": "<for index='arridx' start='0' end='`$tmp.arr_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2701,
        "y": 3846,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "e9ecc81b.49bbd"
            ]
        ]
    },
    {
        "id": "e9ecc81b.49bbd",
        "type": "switchNode",
        "name": "switch tmp.arr[$arridx] == $providerValue",
        "xml": "<switch test='`$tmp.arr[$arridx] == $providerValue`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2992,
        "y": 3846,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "42d5ed25.b49c94",
                "c705b865.d0eb4"
            ]
        ]
    },
    {
        "id": "42d5ed25.b49c94",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3267,
        "y": 3815,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "5660632c.265cdc"
            ]
        ]
    },
    {
        "id": "c705b865.d0eb4",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3268,
        "y": 3886,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "a7a2aba3.cd08b8"
            ]
        ]
    },
    {
        "id": "5660632c.265cdc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3418,
        "y": 3813,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "99e18478.d4208",
                "c48a358e.19c528",
                "23bf4d27.c1b37a",
                "85bd9e57.66c34",
                "747fe7dc.036f4"
            ]
        ]
    },
    {
        "id": "de1fa04c.85c2d",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='0' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2771,
        "y": 3960,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "2aeb6e74.e24be2",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='tmp.arr[0]' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='1' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[0].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='1' />\n<parameter name='otn-tunnel-slice[0].list_length' value='1' />\n\n",
        "comments": "",
        "x": 2699,
        "y": 4007,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "66254394.195084",
        "type": "switchNode",
        "name": "switch found?",
        "xml": "<switch test='`$found`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2692,
        "y": 3891,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "6f0ec490.03677c",
                "bc11802a.75d5c8"
            ]
        ]
    },
    {
        "id": "6f0ec490.03677c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2852,
        "y": 3883,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "843f963d.3c00d"
            ]
        ]
    },
    {
        "id": "bc11802a.75d5c8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2850,
        "y": 3920,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "f82ccccf.a16c6"
            ]
        ]
    },
    {
        "id": "843f963d.3c00d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2977,
        "y": 3883,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "dc11c549.4cf3f",
        "type": "save",
        "name": "store $arridx+1 somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx + 1`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3284,
        "y": 3941,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "f82ccccf.a16c6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3010,
        "y": 3928,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "dc11c549.4cf3f",
                "3879ac46.8861b4"
            ]
        ]
    },
    {
        "id": "3879ac46.8861b4",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list_length`' value='1' />\n\n",
        "comments": "",
        "x": 3201,
        "y": 3987,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "a7a2aba3.cd08b8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3401,
        "y": 3885,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "99e18478.d4208",
        "type": "set",
        "name": "set found to true",
        "xml": "<set>\n<parameter name='found' value='true' />\n\n\n",
        "comments": "",
        "x": 3606,
        "y": 3773,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "c48a358e.19c528",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3678,
        "y": 3818,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "747fe7dc.036f4",
        "type": "set",
        "name": "set twoD arr",
        "xml": "<set>\n\n<!--<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />-->\n<!--<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />-->\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<!--<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />-->\n<parameter name='`otn-tunnel-slice[$arridx].list_length`' value='`$sizeOfSliceList + 1`' />\n\n",
        "comments": "",
        "x": 3593,
        "y": 3945,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "85bd9e57.66c34",
        "type": "set",
        "name": "set sizeOfSliceList",
        "xml": "<set>\n<parameter name='sizeOfSliceList' value='`$otn-tunnel-slice[$arridx].list_length`' />\n\n\n",
        "comments": "",
        "x": 3614,
        "y": 3881,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "23bf4d27.c1b37a",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 3572,
        "y": 4012,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "c99e01d1.0f1de8",
        "type": "comment",
        "name": "Important Comment",
        "info": "When we are in F1, it means that, either:\nno-middle-man found\nor\nmiddle-man was found but PCE is needed.\n\nNo matter which scenario brings us to F1, vpn-binding-B is a \nnew vpn-binding so it needs to be attached to the:\nmiddle-man && connectivityB",
        "comments": "",
        "x": 2352,
        "y": 3202,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "11040b46.8e035d",
        "type": "set",
        "name": "set srcTtp+dstTtp pair",
        "xml": "<set>\n<parameter name='tmp.srcTtpdstTtpPair' value=\"`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id + ',' +\n                                               $tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`\" />\n\n\n",
        "comments": "",
        "x": 1498,
        "y": 1259,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "3e17d72f.d352d",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1691,
        "y": 1356,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "130409d7.ba1cfe",
        "type": "set",
        "name": "set current-provider-id and current-cvlan-id",
        "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$tmp.access-provider-id`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n",
        "comments": "",
        "x": 1562,
        "y": 1310,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "1ea79a81.da9f1d",
        "type": "switchNode",
        "name": "switch found-connectivity?",
        "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1371,
        "y": 1511,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "1956e28a.ad4365",
                "404765c9.b1c294"
            ]
        ]
    },
    {
        "id": "1956e28a.ad4365",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1657,
        "y": 2330,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "cd58f3fe.5b5bd"
            ]
        ]
    },
    {
        "id": "e6504cf8.a4c5e",
        "type": "comment",
        "name": "call string.contains to check if the cache has srcTtpdstTtpPair",
        "info": "if it had: then no new otn/vpn-binding is needed\n           ==> find the otn. ==>look into the relationships of this connectivity and find the one that has same srcTtp and dstTtp\n           ==> increase the bw\nif not, create a new vpn-binding, attach this vpn-binding into the founded connectivity, and attach it to the middle-man-conn as well.",
        "comments": "",
        "x": 2083,
        "y": 2275,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "8c480e3.f82397",
        "type": "comment",
        "name": "create a new connectivity",
        "info": "(this should not be for LEAF side or ROOT side, otherwise error)\n\ncreate a new vpn-binding (done here)\ncreate a new connectivity (done below)\nadd srcTtpdstTtpPair into the cache in this connectivity\nattach the vpn-binding into the connectivity relationship\nattach this connectivity into the middle man\nattach this connectivity into the service-instance",
        "comments": "",
        "x": 1894,
        "y": 1487,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "b5847157.d9e138",
        "type": "save",
        "name": "save vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-otnidx-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<!--<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />-->\n<!--<parameter name='customer-vpn-id' value='`($maxtpn + $gfp)`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$tmp.access-provider-id`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$tmp.access-client-id`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$tmp.access-topology-id`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.domainG-src-access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.domainG-dst-access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<!--<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />-->\n<parameter name='slice-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='ops-note' value='`$tmp.srcTtpOtnLayer`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1997,
        "y": 1523,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "dff931e6.5a9578"
            ]
        ]
    },
    {
        "id": "dff931e6.5a9578",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2285,
        "y": 1524,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "bf3d635b.09f94"
            ]
        ]
    },
    {
        "id": "bf3d635b.09f94",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2468.5,
        "y": 1522.25390625,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "6cbdac8a.378604",
        "type": "execute",
        "name": "execute string.contains srcTtpdstTtpPair",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='contains' >\n<parameter name=\"source\" value='`$tmp.the-connectivity.coupling-flag`'/>\n<parameter name=\"target\" value=\"`$tmp.srcTtpdstTtpPair`\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2071,
        "y": 2327,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "1b949e6d.080772",
                "e453c4d5.ba435"
            ]
        ]
    },
    {
        "id": "1b949e6d.080772",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2244,
        "y": 2175,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "e453c4d5.ba435",
        "type": "outcomeFalse",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2276,
        "y": 2434,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "80b2f89e.8a165"
            ]
        ]
    },
    {
        "id": "7dc11394.4d1084",
        "type": "save",
        "name": "save vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-otnidx-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<!--<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />-->\n<!--<parameter name='customer-vpn-id' value='`($maxtpn + $gfp)`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$tmp.access-provider-id`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$tmp.access-client-id`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$tmp.access-topology-id`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.domainG-src-access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.domainG-dst-access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<!--<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />-->\n<parameter name='slice-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='ops-note' value='`$tmp.srcTtpOtnLayer`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2683,
        "y": 1965,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "22dcb38b.c85a54"
            ]
        ]
    },
    {
        "id": "22dcb38b.c85a54",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2987,
        "y": 1962,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "708eeb6a.f5aefc"
            ]
        ]
    },
    {
        "id": "708eeb6a.f5aefc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3137.5,
        "y": 1969.25390625,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "74407b46.6458d4",
        "type": "execute",
        "name": "execute UUID generator for connectivity domain otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1977,
        "y": 1578,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "3919fe25.6022b2",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-otnidx-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-otnidx-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<!--<parameter name='access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<!--<parameter name='access-ltp-id' value='``' />-->\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='coupling-flag' value='`$srcTtpdstTtpPair`' />\n\n<!--<parameter name='bandwidth-profile-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='dummy' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<!--<parameter name='cbs' value='`$prop.sotn.cbs`' />-->\n<!--<parameter name='ebs' value='`$prop.sotn.ebs`' />-->\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1915,
        "y": 1628,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "7aa6415.034e74",
        "type": "save",
        "name": "save middle-man-conn relationship to connectivity-otnidx, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2016,
        "y": 1673,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "e6bc04b6.f68c7",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 2052,
        "y": 1727,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "b2ea866b.5e679",
        "type": "save",
        "name": "save connectivity-otnidx relationship to vpn-binding-otnidx, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2020,
        "y": 1786,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "e878616a.51fa2",
        "type": "comment",
        "name": "find middle-man's eth-srv-name",
        "info": "",
        "comments": "",
        "x": 1478,
        "y": 1402,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "f0ca8ca2.d5c31",
        "type": "set",
        "name": "set prop.ethernet-service-name",
        "xml": "<set>\n<parameter name='prop.ethernet-service-name' value='`$middle-man-conn.etht-svc-name`' />\n\n",
        "comments": "",
        "x": 1500,
        "y": 1446,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "55a4c230.fd03fc",
        "type": "save",
        "name": "save middle-man-conn relationship to tmp.the-connectivity, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2707,
        "y": 2182,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "8a76ccc1.2cd108",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 2738,
        "y": 2221,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "1837f35e.96c455",
        "type": "save",
        "name": "save tmp.the-connectivity relationship to vpn-binding-otnidx, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2709,
        "y": 2294,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "f94cb118.7c3c88",
        "type": "comment",
        "name": "update the founded connectivity to have a new coupling-flag",
        "info": "",
        "comments": "",
        "x": 2679,
        "y": 2010,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "12e95810.e72c78",
        "type": "set",
        "name": "set newFlag",
        "xml": "<set>\n<parameter name='tmp.newFlag' value=\"`$tmp.the-connectivity.coupling-flag + '-' +\n                                               $tmp.srcTtpdstTtpPair`\" />\n\n\n",
        "comments": "",
        "x": 2565,
        "y": 2049,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "33021018.a90398",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Modified' />\n<parameter name='coupling-flag' value='`$tmp.newFlag`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 2629,
        "y": 2094,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    },
    {
        "id": "75b8be3d.85a8b8",
        "type": "comment",
        "name": "the following two relationships should have already been there; if not => error",
        "info": "",
        "comments": "",
        "x": 2721,
        "y": 2144,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "158258b6.b1e20f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1707,
        "y": 1511,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "b5847157.d9e138",
                "74407b46.6458d4",
                "3919fe25.6022b2",
                "7aa6415.034e74",
                "e6bc04b6.f68c7",
                "b2ea866b.5e679"
            ]
        ]
    },
    {
        "id": "404765c9.b1c294",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1569,
        "y": 1507,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "158258b6.b1e20f"
            ]
        ]
    },
    {
        "id": "cd58f3fe.5b5bd",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2367,
        "y": 1974,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "7dc11394.4d1084",
                "12e95810.e72c78",
                "33021018.a90398",
                "1837f35e.96c455"
            ]
        ]
    },
    {
        "id": "af6449ff.709108",
        "type": "comment",
        "name": "loop through the relationships of this founded connectivity, then",
        "info": "then find the vpn-binding that has same src ttp and dst ttp as this one",
        "comments": "",
        "x": 2372,
        "y": 2399,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "e1d6f3c3.08e8e8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='tcridx' start='0' end='`$tmp.the-connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2714,
        "y": 2435,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "32ed93c7.c50234"
            ]
        ]
    },
    {
        "id": "32ed93c7.c50234",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.the-connectivity.relationship-list.relationship[$tcridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2926,
        "y": 2433,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "6fea52d2.2a0434"
            ]
        ]
    },
    {
        "id": "6fea52d2.2a0434",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3110,
        "y": 2431,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "37563c96.a6fb74"
            ]
        ]
    },
    {
        "id": "37563c96.a6fb74",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3289,
        "y": 2436,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "91050f7b.03c5c",
                "30dac6e0.2f0b42"
            ]
        ]
    },
    {
        "id": "30dac6e0.2f0b42",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
        "comments": "",
        "x": 3506,
        "y": 2367,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "91050f7b.03c5c",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.the-connectivity.relationship-list.relationship[$tcridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3499,
        "y": 2453,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "f42d3c95.007658",
                "d20958c8.44b1d",
                "dc1061ac.3194b8"
            ]
        ]
    },
    {
        "id": "d20958c8.44b1d",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3712.490966796875,
        "y": 2437.5740356445312,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "266b5e5.4c2c022"
            ]
        ]
    },
    {
        "id": "266b5e5.4c2c022",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3875.0625,
        "y": 2436.8597412109375,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "ce39d5ca.3eb7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3876,
        "y": 2482,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "dc1061ac.3194b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3708,
        "y": 2482,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "ce39d5ca.3eb7"
            ]
        ]
    },
    {
        "id": "f42d3c95.007658",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3710,
        "y": 2542,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "2eba9c97.d9e8d4"
            ]
        ]
    },
    {
        "id": "2eba9c97.d9e8d4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3879,
        "y": 2541,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "7126e3c.be80d9c"
            ]
        ]
    },
    {
        "id": "80b2f89e.8a165",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2503,
        "y": 2433,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "e1d6f3c3.08e8e8",
                "13b057e7.5ede5",
                "8583f674.cce2c"
            ]
        ]
    },
    {
        "id": "7126e3c.be80d9c",
        "type": "switchNode",
        "name": "switch srcTtp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id == $tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4078,
        "y": 2542,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "379157c3.0db038"
            ]
        ]
    },
    {
        "id": "379157c3.0db038",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4241,
        "y": 2540,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "45526f50.00e348"
            ]
        ]
    },
    {
        "id": "45526f50.00e348",
        "type": "switchNode",
        "name": "switch dstTtp",
        "xml": "<switch test='`$tmp.aai.vpn-binding.dst-access-ltp-id == $tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4422,
        "y": 2540,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "2e6d0f9b.a0852"
            ]
        ]
    },
    {
        "id": "2e6d0f9b.a0852",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4585,
        "y": 2538,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "6b6a34b7.0f115c"
            ]
        ]
    },
    {
        "id": "22e286e0.93668a",
        "type": "set",
        "name": "set tmp.the-vpn-binding",
        "xml": "<set>\n<parameter name='tmp.the-vpn-binding.' value='`$tmp.aai.vpn-binding.`' />\n",
        "comments": "",
        "x": 4942,
        "y": 2545,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "6b6a34b7.0f115c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4724,
        "y": 2537,
        "z": "a911d5ff.5ac84",
        "wires": [
            [
                "22e286e0.93668a",
                "db1e7b85.850cb8"
            ]
        ]
    },
    {
        "id": "db1e7b85.850cb8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4888,
        "y": 2589,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "13b057e7.5ede5",
        "type": "set",
        "name": "unset tmp.the-vpn-binding",
        "xml": "<set>\n<parameter name='tmp.the-vpn-binding.' value='' />\n",
        "comments": "",
        "x": 2724,
        "y": 2396,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "8d0325f2.b257c",
        "type": "comment",
        "name": "increase the bw of the-vpn-binding and change status to modified",
        "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
        "comments": "",
        "x": 2813,
        "y": 2570,
        "z": "a911d5ff.5ac84",
        "wires": []
    },
    {
        "id": "8583f674.cce2c",
        "type": "save",
        "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.the-vpn-binding.vpn-id`' />\n<!--<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />-->\n<!--<parameter name='customer-vpn-id' value='`($maxtpn + $gfp)`' />-->\n<parameter name='customer-vpn-id' value='`($tmp.the-vpn-binding.customer-vpn-id + $gfp)`' />\n\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Modified' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2783,
        "y": 2630,
        "z": "a911d5ff.5ac84",
        "wires": [
            []
        ]
    }
]