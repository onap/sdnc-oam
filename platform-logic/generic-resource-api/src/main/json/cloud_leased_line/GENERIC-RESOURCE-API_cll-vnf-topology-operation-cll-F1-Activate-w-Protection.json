[
  {
    "id": "2c2eaaa6.595c6e",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 533.3333129882812,
    "y": 388.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "b93bc255.06d818",
        "e7d58f90.50f7a",
        "d44dcc0c.074358"
      ]
    ]
  },
  {
    "id": "b93bc255.06d818",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 721.3333129882812,
    "y": 401.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "351735cd.d4c382"
      ]
    ]
  },
  {
    "id": "e7d58f90.50f7a",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 728.8242492675781,
    "y": 443.5740432739258,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "d44dcc0c.074358",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 719.3333129882812,
    "y": 490.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "9f7438aa.cfa3f8"
      ]
    ]
  },
  {
    "id": "351735cd.d4c382",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 894.3333129882812,
    "y": 399.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "6797a33f.6e9ecc"
      ]
    ]
  },
  {
    "id": "6797a33f.6e9ecc",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1123.3333129882812,
    "y": 400.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "181a770b.23d341"
      ]
    ]
  },
  {
    "id": "181a770b.23d341",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1338.3333129882812,
    "y": 401.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "96414042.e1f2c8"
      ]
    ]
  },
  {
    "id": "e5c5abf.467ec58",
    "type": "switchNode",
    "name": "switch vpnuuid is for this slice",
    "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1592.3333129882812,
    "y": 323.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "71905208.3f5ca4",
        "3be6bf3.b82124"
      ]
    ]
  },
  {
    "id": "71905208.3f5ca4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1809.3333129882812,
    "y": 302.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "96414042.e1f2c8"
      ]
    ]
  },
  {
    "id": "3be6bf3.b82124",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1809.3333129882812,
    "y": 351.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "96414042.e1f2c8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1993.3333129882812,
    "y": 388.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "95dd5e61.027198",
        "877d8b16.d3994",
        "b3333886.2341"
      ]
    ]
  },
  {
    "id": "884050d1.040518",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 352.33331298828125,
    "y": 129.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "d4acd14e.d29f88"
      ]
    ]
  },
  {
    "id": "d4acd14e.d29f88",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 636.6190032958984,
    "y": 190.23811626434326,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "659111a0.43dcc"
      ]
    ]
  },
  {
    "id": "659111a0.43dcc",
    "type": "method",
    "name": "method cll-vnf-topology-operation-cll-F1-Activate-w-Protection",
    "xml": "<method rpc='cll-vnf-topology-operation-cll-F1-Activate-w-Protection' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 642.7619171142578,
    "y": 275.00003814697266,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "27f31a3d.0f29d6"
      ]
    ]
  },
  {
    "id": "27f31a3d.0f29d6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 952.5713500976562,
    "y": 266.6666946411133,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "2c2eaaa6.595c6e",
        "cef7b9ce.1b3ba8",
        "306cc859.5059d",
        "5f84eccb.714dcc",
        "3014f91f.87a3fe"
      ]
    ]
  },
  {
    "id": "95dd5e61.027198",
    "type": "set",
    "name": "set tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 2210.3333129882812,
    "y": 326.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "e5ef1dc.853e7e",
    "type": "set",
    "name": "set attachment_param for OTN A",
    "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingA.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingA.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingA.customer-vpn-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingA.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-src-domain' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingA.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingA.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingA.access-topology-id`' />\n",
    "comments": "",
    "x": 4379.333312988281,
    "y": 212.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "28eb1f3b.b8157",
    "type": "execute",
    "name": "execute RestApiCallNode Create OTN tunnel with token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-src-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4460.333312988281,
    "y": 527.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "1f9f84d9.8d553b",
        "99de3b6c.89af8"
      ]
    ]
  },
  {
    "id": "1f9f84d9.8d553b",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4769.833312988281,
    "y": 496.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "d7492135.ad5fc8"
      ]
    ]
  },
  {
    "id": "99de3b6c.89af8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4774.833312988281,
    "y": 561.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "76880ad0.6601a4"
      ]
    ]
  },
  {
    "id": "d7492135.ad5fc8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
    "comments": "",
    "x": 4945.833312988281,
    "y": 496.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "76880ad0.6601a4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4941.333312988281,
    "y": 561.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "faa33d4e.9e9608",
    "type": "set",
    "name": "set sotn_value",
    "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityA.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityA.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityA.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />\n",
    "comments": "",
    "x": 4324.833312988281,
    "y": 781.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "2bce125e.cf653e",
    "type": "execute",
    "name": "execute RestApiCallNode Create ethernet Service without token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4478.833312988281,
    "y": 829.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "ca07acfa.a5fa68",
        "90e419cc.31d64"
      ]
    ]
  },
  {
    "id": "ca07acfa.a5fa68",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4824.333312988281,
    "y": 810.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "4bb3503a.663a88"
      ]
    ]
  },
  {
    "id": "90e419cc.31d64",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4828.333312988281,
    "y": 850.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "d3e50925.f867c"
      ]
    ]
  },
  {
    "id": "4bb3503a.663a88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
    "comments": "",
    "x": 4982.333312988281,
    "y": 810.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "d3e50925.f867c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4985.833312988281,
    "y": 850.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "a6019d0e.791c3",
        "1200fd09.b183c3"
      ]
    ]
  },
  {
    "id": "a6019d0e.791c3",
    "type": "save",
    "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5316.333312988281,
    "y": 815.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "409f8a00.232b48",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
    "comments": "",
    "x": 5180.333312988281,
    "y": 774.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "1200fd09.b183c3",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityA.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5243.333312988281,
    "y": 861.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "d18efeb6.7196c8",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingA.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingA.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingA.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingA.src-access-node-id`\" />\n",
    "comments": "",
    "x": 4317.333312988281,
    "y": 260.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "3a9d4ff0.831a9",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 4343.333312988281,
    "y": 377.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "9519eb20.e7bb98",
        "5232e91a.5e69a",
        "d4898e73.a749e8"
      ]
    ]
  },
  {
    "id": "9519eb20.e7bb98",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4538.833435058594,
    "y": 329.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "4b08f17b.aadf2"
      ]
    ]
  },
  {
    "id": "5232e91a.5e69a",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4530.833435058594,
    "y": 384.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "b87b6903.ae28e"
      ]
    ]
  },
  {
    "id": "4b08f17b.aadf2",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4683.215759277344,
    "y": 328.65567779541016,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "797a34c3.7e821c"
      ]
    ]
  },
  {
    "id": "85c5906d.e6a79",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5265.333312988281,
    "y": 331.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "937745a8.a82728"
      ]
    ]
  },
  {
    "id": "797a34c3.7e821c",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4867.333312988281,
    "y": 327.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "bb125276.4bcb68"
      ]
    ]
  },
  {
    "id": "bb125276.4bcb68",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5062.333312988281,
    "y": 327.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "85c5906d.e6a79"
      ]
    ]
  },
  {
    "id": "d4898e73.a749e8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4535.833435058594,
    "y": 441.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "54ed711f.a7d8c8"
      ]
    ]
  },
  {
    "id": "54ed711f.a7d8c8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4687.833435058594,
    "y": 442.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "b87b6903.ae28e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4698.833435058594,
    "y": 385.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "d6320d33.cae9b",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5650.333312988281,
    "y": 344.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "bdc01a41.5b11d",
        "19bd6ca2.3b24bb",
        "3d79a005.c3b89"
      ]
    ]
  },
  {
    "id": "937745a8.a82728",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5444.333312988281,
    "y": 331.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "624c597d.18779",
        "d6320d33.cae9b"
      ]
    ]
  },
  {
    "id": "624c597d.18779",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainA id",
    "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5680.333312988281,
    "y": 292.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "bdc01a41.5b11d",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5860.333312988281,
    "y": 335.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "c6702adf.a8a4e8"
      ]
    ]
  },
  {
    "id": "19bd6ca2.3b24bb",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5852.333312988281,
    "y": 390.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "14b63752.13b4e1"
      ]
    ]
  },
  {
    "id": "3d79a005.c3b89",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5857.333312988281,
    "y": 447.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "52bfc859.8923c8"
      ]
    ]
  },
  {
    "id": "52bfc859.8923c8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 6009.333312988281,
    "y": 448.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "14b63752.13b4e1",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 6020.333312988281,
    "y": 393.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "c6702adf.a8a4e8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6004.715637207031,
    "y": 332.65567779541016,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "d92f12f8.15c348"
      ]
    ]
  },
  {
    "id": "d92f12f8.15c348",
    "type": "set",
    "name": "set controller domainA data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 6219.333312988281,
    "y": 329.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "60926b96.be818c",
    "type": "set",
    "name": "set attachment_param for OTN B",
    "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingB.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingB.dst-access-node-id`' />\n<!--<parameter name='src-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingB.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingB.src-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-dst-domain' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingB.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingB.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingB.access-topology-id`' />\n",
    "comments": "",
    "x": 3786.3333129882812,
    "y": 1669.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "c947459e.872f3",
    "type": "execute",
    "name": "execute RestApiCallNode Create OTN tunnel with token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-dst-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3849.3333129882812,
    "y": 1998.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "a1124e38.08b2b8",
        "626f4392.b77cf4"
      ]
    ]
  },
  {
    "id": "a1124e38.08b2b8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4144.833312988281,
    "y": 1965.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "9662ab69.840d68"
      ]
    ]
  },
  {
    "id": "626f4392.b77cf4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4149.833312988281,
    "y": 2030.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "dc33d36b.4bb068"
      ]
    ]
  },
  {
    "id": "9662ab69.840d68",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
    "comments": "",
    "x": 4312.833312988281,
    "y": 1965.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "dc33d36b.4bb068",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4323.333312988281,
    "y": 2030.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "785f8bef.d4b92c",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingB.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingB.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingB.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingB.dst-access-node-id`\" />\n",
    "comments": "",
    "x": 3725.3333129882812,
    "y": 1726.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "d7561682.896a3",
    "type": "get-resource",
    "name": "get-resource dst pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3745.3333129882812,
    "y": 1823.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "585f4a29.5a089c",
        "beb39570.8572c",
        "251a4de6.33c8aa"
      ]
    ]
  },
  {
    "id": "585f4a29.5a089c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3947.8334350585938,
    "y": 1776.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "52dfa280.06ea3c"
      ]
    ]
  },
  {
    "id": "beb39570.8572c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3939.8334350585938,
    "y": 1831.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "d9bfad39.7bd668"
      ]
    ]
  },
  {
    "id": "52dfa280.06ea3c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4092.2157592773438,
    "y": 1773.6556777954102,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "3ad5a325.5b1584"
      ]
    ]
  },
  {
    "id": "3ad5a325.5b1584",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4276.333312988281,
    "y": 1788.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "66e3a12c.e2e618"
      ]
    ]
  },
  {
    "id": "251a4de6.33c8aa",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3944.8334350585938,
    "y": 1888.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "56e3abe.0b3e154"
      ]
    ]
  },
  {
    "id": "56e3abe.0b3e154",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4096.833435058594,
    "y": 1889.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "d9bfad39.7bd668",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4107.833435058594,
    "y": 1834.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "b422b9dc.94e76",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4674.333312988281,
    "y": 1792.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "79873b94.5791e4"
      ]
    ]
  },
  {
    "id": "66e3a12c.e2e618",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4471.333312988281,
    "y": 1788.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "b422b9dc.94e76"
      ]
    ]
  },
  {
    "id": "8c738542.45973",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5059.333312988281,
    "y": 1791.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "bed842bc.70d158",
        "9fccfde7.5bd058",
        "42496faf.cc3318"
      ]
    ]
  },
  {
    "id": "79873b94.5791e4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4851.333312988281,
    "y": 1784.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "4d8f65c6.26fcac",
        "8c738542.45973"
      ]
    ]
  },
  {
    "id": "4d8f65c6.26fcac",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainB id",
    "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5089.333312988281,
    "y": 1739.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "8a854ad6.1d148",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5418.333312988281,
    "y": 1895.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "9b1912ba.26a3f8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5429.333312988281,
    "y": 1840.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "e79aefeb.ae2d8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5413.715637207031,
    "y": 1779.6556777954102,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "9fa1b8fd.2344f"
      ]
    ]
  },
  {
    "id": "9fa1b8fd.2344f",
    "type": "set",
    "name": "set controller domainB data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5628.333312988281,
    "y": 1776.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "bed842bc.70d158",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5269.333312988281,
    "y": 1782.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "e79aefeb.ae2d8"
      ]
    ]
  },
  {
    "id": "9fccfde7.5bd058",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5261.333312988281,
    "y": 1837.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "9b1912ba.26a3f8"
      ]
    ]
  },
  {
    "id": "42496faf.cc3318",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5266.333312988281,
    "y": 1894.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "8a854ad6.1d148"
      ]
    ]
  },
  {
    "id": "afc78578.3291",
    "type": "switchNode",
    "name": "switch vpn-binding has dst-access-ltp",
    "xml": "<switch test='`$tmp.aai.vpn-binding.dst-access-ltp-id`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3300.3333129882812,
    "y": 740.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "44cf1bd6.cdf99c",
        "619a5ca0.cdbc04"
      ]
    ]
  },
  {
    "id": "44cf1bd6.cdf99c",
    "type": "outcome",
    "name": "Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 3514.3333129882812,
    "y": 777.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "357cc1f0.bc9fae"
      ]
    ]
  },
  {
    "id": "619a5ca0.cdbc04",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3516.3333129882812,
    "y": 715.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "582aaedf.79cf78"
      ]
    ]
  },
  {
    "id": "357cc1f0.bc9fae",
    "type": "switchNode",
    "name": "switch vpn-binding has src-access-ltp",
    "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3094.3333129882812,
    "y": 2020.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "234b26f6.c2476a",
        "5654d12.c509b3"
      ]
    ]
  },
  {
    "id": "234b26f6.c2476a",
    "type": "outcome",
    "name": "Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 3347.3333129882812,
    "y": 2054.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "77779b01.5bda2c"
      ]
    ]
  },
  {
    "id": "5654d12.c509b3",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3347.3333129882812,
    "y": 1998.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "49e07205.df1904"
      ]
    ]
  },
  {
    "id": "77779b01.5bda2c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3498.3333129882812,
    "y": 2054.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "fc88d512.b039f8",
    "type": "set",
    "name": "set vpn-bindingA and connectivityA",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingA.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityA.' value=\"`$tmp.aai.connectivity.`\" />\n",
    "comments": "",
    "x": 4374.333312988281,
    "y": 152.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "6082a62.95d37d8",
    "type": "set",
    "name": "set vpn-bindingB and connectivityB",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingB.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityB.' value=\"`$tmp.aai.connectivity.`\" />\n\n",
    "comments": "",
    "x": 3782.3333129882812,
    "y": 1611.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "7f468ae0.55d61c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4065.3333129882812,
    "y": 409.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "fc88d512.b039f8",
        "e5ef1dc.853e7e",
        "d18efeb6.7196c8",
        "3a9d4ff0.831a9",
        "28eb1f3b.b8157",
        "20794036.3e0d98",
        "5a5b3fd3.939fa",
        "eb39e6d9.695df8"
      ]
    ]
  },
  {
    "id": "49e07205.df1904",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3498.3333129882812,
    "y": 1997.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "6082a62.95d37d8",
        "60926b96.be818c",
        "785f8bef.d4b92c",
        "d7561682.896a3",
        "c947459e.872f3",
        "33be6bd8.7ec864",
        "7832f278.b4880c",
        "cc8c0809.c4ad6"
      ]
    ]
  },
  {
    "id": "3bec7c9e.0c31a4",
    "type": "set",
    "name": "set sotn_value",
    "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityB.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityB.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityB.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityB.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityB.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityB.cvlan`' />\n\n",
    "comments": "",
    "x": 3736.3333129882812,
    "y": 2296.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "66e73857.3d0e78",
    "type": "execute",
    "name": "execute RestApiCallNode Create ethernet Service without token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3890.3333129882812,
    "y": 2344.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "9ba2be1f.f4daf",
        "1b19ccdb.027f4b"
      ]
    ]
  },
  {
    "id": "9ba2be1f.f4daf",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4235.833312988281,
    "y": 2325.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "9032db4e.fba99"
      ]
    ]
  },
  {
    "id": "1b19ccdb.027f4b",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4239.833312988281,
    "y": 2365.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "2bcc0072.d2bc6"
      ]
    ]
  },
  {
    "id": "9032db4e.fba99",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
    "comments": "",
    "x": 4393.833312988281,
    "y": 2325.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "2bcc0072.d2bc6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4397.333312988281,
    "y": 2365.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "45d30eee.bf1db8",
        "a53e3184.87caf8"
      ]
    ]
  },
  {
    "id": "45d30eee.bf1db8",
    "type": "save",
    "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingB.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingB.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4737.333312988281,
    "y": 2364.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "63d5aebc.7e418",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "use proper vpn-binding id and connectivity\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
    "comments": "",
    "x": 4595.333312988281,
    "y": 2322.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "a53e3184.87caf8",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityB.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4666.333312988281,
    "y": 2413.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "27db8b21.23f75c",
    "type": "set",
    "name": "set attachment_param (gfp-n) for OTN",
    "xml": "<set>\n<parameter name='gfp-n' value='`$tmp.aai.vpn-binding.route-distinguisher`' />\n",
    "comments": "",
    "x": 3291.3333129882812,
    "y": 680.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "c22368e1.6b1058",
    "type": "comment",
    "name": "only dst ttp exists. No src",
    "info": "",
    "comments": "",
    "x": 3886.3333129882812,
    "y": 366.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "87e2c89e.c92dc",
    "type": "comment",
    "name": "only src ttp exists. No dst",
    "info": "",
    "comments": "",
    "x": 3443.3333129882812,
    "y": 1944.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "582aaedf.79cf78",
    "type": "switchNode",
    "name": "switch vpn-binding has src-access-ltp",
    "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3622.3333129882812,
    "y": 528.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "16dc47d9.553a58",
        "e13eb694.152348"
      ]
    ]
  },
  {
    "id": "e13eb694.152348",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3864.3333129882812,
    "y": 1117.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "7db46487.9eca7c"
      ]
    ]
  },
  {
    "id": "16dc47d9.553a58",
    "type": "outcome",
    "name": "Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 3858.3333129882812,
    "y": 408.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "7f468ae0.55d61c"
      ]
    ]
  },
  {
    "id": "7db46487.9eca7c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4022.3333129882812,
    "y": 1116.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "27bc6cfd.f882bc",
        "798042fa.f28ecc",
        "44029581.1e0294",
        "2e2e336b.2a2684",
        "c0302985.1bc5d8",
        "3bfb4fd1.bca51"
      ]
    ]
  },
  {
    "id": "798042fa.f28ecc",
    "type": "set",
    "name": "set attachment_param for OTN G",
    "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingG.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingG.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingG.src-access-ltp-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingG.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-domainG' value='`$tmp.aai.vpn-bindingG.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingG.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingG.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingG.access-topology-id`' />\n",
    "comments": "",
    "x": 4286.333312988281,
    "y": 999.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "c0302985.1bc5d8",
    "type": "execute",
    "name": "execute RestApiCallNode Create OTN tunnel with token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-domainG-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4367.333312988281,
    "y": 1314.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "cb1eb04b.0a8a5",
        "c9a4895f.79f59"
      ]
    ]
  },
  {
    "id": "cb1eb04b.0a8a5",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4676.833312988281,
    "y": 1283.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "5c0ad877.d4666"
      ]
    ]
  },
  {
    "id": "c9a4895f.79f59",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4681.833312988281,
    "y": 1348.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "647a8c60.745274"
      ]
    ]
  },
  {
    "id": "5c0ad877.d4666",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
    "comments": "",
    "x": 4852.833312988281,
    "y": 1283.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "647a8c60.745274",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4848.333312988281,
    "y": 1348.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "44029581.1e0294",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.domainG.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingG.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingG.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingG.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingG.src-access-node-id`\" />\n",
    "comments": "",
    "x": 4224.333312988281,
    "y": 1047.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "2e2e336b.2a2684",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domainG.pnf-name\"\n        pfx='tmp.aai.domainG-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 4250.333312988281,
    "y": 1164.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "aa3dc68a.e420e",
        "2fd5a39c.e4d124",
        "be0fb969.9df28"
      ]
    ]
  },
  {
    "id": "aa3dc68a.e420e",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4445.833435058594,
    "y": 1116.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "bee191ec.52168"
      ]
    ]
  },
  {
    "id": "2fd5a39c.e4d124",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4437.833435058594,
    "y": 1171.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "53b0c593.b44354"
      ]
    ]
  },
  {
    "id": "bee191ec.52168",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4590.215759277344,
    "y": 1115.6556777954102,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "41b89aec.8f3b84"
      ]
    ]
  },
  {
    "id": "41b89aec.8f3b84",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.domainG-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4774.333312988281,
    "y": 1114.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "860e8326.494828"
      ]
    ]
  },
  {
    "id": "860e8326.494828",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4969.333312988281,
    "y": 1114.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "95d294a2.519858"
      ]
    ]
  },
  {
    "id": "be0fb969.9df28",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4442.833435058594,
    "y": 1228.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "a6d3daf4.4de778"
      ]
    ]
  },
  {
    "id": "a6d3daf4.4de778",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4594.833435058594,
    "y": 1229.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "53b0c593.b44354",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4605.833435058594,
    "y": 1172.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "27bc6cfd.f882bc",
    "type": "set",
    "name": "set vpn-bindingG and connectivityG",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingG.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityG.' value=\"`$tmp.aai.connectivity.`\" />\n",
    "comments": "",
    "x": 4281.333312988281,
    "y": 939.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "95d294a2.519858",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5172.333312988281,
    "y": 1118.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "280af449.de2e3c"
      ]
    ]
  },
  {
    "id": "ef3f04cf.8bb518",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5557.333312988281,
    "y": 1131.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "31456949.0bd6c6",
        "ae6ce682.b30c68",
        "e0e5a782.5ecb88"
      ]
    ]
  },
  {
    "id": "280af449.de2e3c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5351.333312988281,
    "y": 1118.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "7f6c4201.ca3284",
        "ef3f04cf.8bb518"
      ]
    ]
  },
  {
    "id": "7f6c4201.ca3284",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainG id",
    "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5587.333312988281,
    "y": 1079.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "31456949.0bd6c6",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5767.333312988281,
    "y": 1122.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "37e04a2.a327336"
      ]
    ]
  },
  {
    "id": "ae6ce682.b30c68",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5759.333312988281,
    "y": 1177.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "536ede72.dab3b"
      ]
    ]
  },
  {
    "id": "e0e5a782.5ecb88",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5764.333312988281,
    "y": 1234.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "f46537ce.c9aaa8"
      ]
    ]
  },
  {
    "id": "f46537ce.c9aaa8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5916.333312988281,
    "y": 1235.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "536ede72.dab3b",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5927.333312988281,
    "y": 1180.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "37e04a2.a327336",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5911.715637207031,
    "y": 1119.6556777954102,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "77189bba.da3f4c"
      ]
    ]
  },
  {
    "id": "77189bba.da3f4c",
    "type": "set",
    "name": "set controller domainG data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 6126.333312988281,
    "y": 1116.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "217a8eaf.b5afda",
    "type": "comment",
    "name": "both src and dst exist",
    "info": "",
    "comments": "",
    "x": 3900.3333129882812,
    "y": 1057.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "877d8b16.d3994",
    "type": "switchNode",
    "name": "switch vpn-binding is not already Activated (i.e. is either Created or Modified)",
    "xml": "<switch test=\"`$tmp.aai.vpn-binding.operational-status != 'Activated' `\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2462.3333129882812,
    "y": 784.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "df6e125e.14274",
        "fd236e9d.746de"
      ]
    ]
  },
  {
    "id": "fd236e9d.746de",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2869.3333129882812,
    "y": 802.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "a1b579c2.6ca69"
      ]
    ]
  },
  {
    "id": "df6e125e.14274",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2869.3333129882812,
    "y": 747.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "51a6a8ff.40f098"
      ]
    ]
  },
  {
    "id": "51a6a8ff.40f098",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3025.3333129882812,
    "y": 745.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "27db8b21.23f75c",
        "afc78578.3291"
      ]
    ]
  },
  {
    "id": "a1b579c2.6ca69",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3002.3333129882812,
    "y": 803.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "cef7b9ce.1b3ba8",
    "type": "set",
    "name": "unset tmp.aai.all-vpn-bindings",
    "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value=\"\" />\n",
    "comments": "",
    "x": 1179.3333129882812,
    "y": 219.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "bdafe4d.0bce798",
    "type": "comment",
    "name": "CLL new",
    "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
    "comments": "",
    "x": 4296.333312988281,
    "y": 637.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "20794036.3e0d98",
    "type": "set",
    "name": "set leaf-otn-tunnels-list array",
    "xml": "<set>\n<parameter name='`leaf-tunnels-list[$leaftunsidx].tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`leaf-tunnels-list[$leaftunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`leaf-tunnels-list_length`' value='`$leaftunsidx + 1`' />\n",
    "comments": "",
    "x": 4356.333312988281,
    "y": 676.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "306cc859.5059d",
    "type": "set",
    "name": "unset leaf-otn-tunnels-list array",
    "xml": "<set>\n<parameter name='`leaf-tunnels-list.`' value='' />\n<parameter name='`leaf-tunnels-list_length`' value='0' />\n<parameter name='`leaftunsidx`' value='0' />\n",
    "comments": "",
    "x": 1172.3333129882812,
    "y": 127.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "3258d8ff.e890f",
    "type": "comment",
    "name": "CLL new",
    "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
    "comments": "",
    "x": 3708.3333129882812,
    "y": 2153.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "33be6bd8.7ec864",
    "type": "set",
    "name": "set root-otn-tunnels-list array",
    "xml": "<set>\n<parameter name='`root-tunnels-list[$roottunsidx].tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`root-tunnels-list[$roottunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`root-tunnels-list_length`' value='`$roottunsidx + 1`' />\n",
    "comments": "",
    "x": 3764.3333129882812,
    "y": 2202.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "7f9af85d.c9b1a",
    "type": "set",
    "name": "unset root-otn-tunnels-list array",
    "xml": "<set>\n<parameter name='`root-tunnels-list.`' value='' />\n<parameter name='`root-tunnels-list_length`' value='0' />\n<parameter name='`roottunsidx`' value='0' />\n",
    "comments": "",
    "x": 1172.3333129882812,
    "y": 166.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "5f84eccb.714dcc",
    "type": "execute",
    "name": "execute properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
    "comments": "",
    "outputs": 1,
    "x": 1203.3333129882812,
    "y": 267.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "3014f91f.87a3fe",
    "type": "save",
    "name": "get service-instance from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--$vnf-topology-operation-input.service-information.service-instance-id-->",
    "comments": "",
    "outputs": 1,
    "x": 413.33331298828125,
    "y": 742.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "ad3a20d5.f6589",
        "e51813a.1cc197",
        "ca637d1.24786"
      ]
    ]
  },
  {
    "id": "ad3a20d5.f6589",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 632.3333129882812,
    "y": 680.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "5ade52fc.bbf09c"
      ]
    ]
  },
  {
    "id": "e51813a.1cc197",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 641.8242797851562,
    "y": 722.5740432739258,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "ca637d1.24786",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 630.3333129882812,
    "y": 769.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "67b4863e.f31f1"
      ]
    ]
  },
  {
    "id": "5ade52fc.bbf09c",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 829.3333129882812,
    "y": 676.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "805608ab.1113d"
      ]
    ]
  },
  {
    "id": "67b4863e.f31f1",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 799.3333129882812,
    "y": 770.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "805608ab.1113d",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1052.6668090820312,
    "y": 675.9999465942383,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "fce88b79.ad9ea"
      ]
    ]
  },
  {
    "id": "fce88b79.ad9ea",
    "type": "outcome",
    "name": "connectivity",
    "xml": "<outcome value='connectivity'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1253.3334465026855,
    "y": 677.0000286102295,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "324a4f4a.beb9"
      ]
    ]
  },
  {
    "id": "324a4f4a.beb9",
    "type": "save",
    "name": "get connectivity from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 383.33331298828125,
    "y": 939.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "5a7cd799.dd504",
        "c46ba437.0993",
        "3526445b.eeea9c"
      ]
    ]
  },
  {
    "id": "5a7cd799.dd504",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 591.3333129882812,
    "y": 903.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "63b8bbd2.15c994"
      ]
    ]
  },
  {
    "id": "c46ba437.0993",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 591.8242797851562,
    "y": 948.5740432739258,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "3526445b.eeea9c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 589.3333129882812,
    "y": 992.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "c4b232cc.80b998"
      ]
    ]
  },
  {
    "id": "c4b232cc.80b998",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 758.3333129882812,
    "y": 993.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "bd0ad7c2.1f4f3",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 730.3333129882812,
    "y": 1487.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "fb10f5a.4414808"
      ]
    ]
  },
  {
    "id": "fb10f5a.4414808",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 933.3333129882812,
    "y": 1499.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "31b4d2c5.66c72e"
      ]
    ]
  },
  {
    "id": "31b4d2c5.66c72e",
    "type": "outcome",
    "name": "UNI",
    "xml": "<outcome value='uni'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1099.3333129882812,
    "y": 1496.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "d62a4bb8.975ae8"
      ]
    ]
  },
  {
    "id": "d62a4bb8.975ae8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1260.3333129882812,
    "y": 1493.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "46f537c9.1c8be8",
        "f8fe77e2.d43ff8",
        "6a183fad.35ec3",
        "f7155528.92cd7",
        "65c7779e.8d1a88",
        "cccd2695.c600b"
      ]
    ]
  },
  {
    "id": "f8fe77e2.d43ff8",
    "type": "set",
    "name": "unset tmp.aai.uni",
    "xml": "<set>\n<parameter name='tmp.aai.uni.' value='' />\n",
    "comments": "",
    "x": 1466.3333129882812,
    "y": 1092.9999465942383,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "46f537c9.1c8be8",
    "type": "save",
    "name": "get uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.uni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 1463.3333129882812,
    "y": 1137.9999465942383,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "4e769c0f.1938ec",
        "3dc6fc35.d186bc",
        "90b11589.d4f84"
      ]
    ]
  },
  {
    "id": "3dc6fc35.d186bc",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1658.8242797851562,
    "y": 1111.5739212036133,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "6d117931.940098"
      ]
    ]
  },
  {
    "id": "90b11589.d4f84",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1654.3333129882812,
    "y": 1155.999885559082,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "f48b55b8.ea1ca8"
      ]
    ]
  },
  {
    "id": "6d117931.940098",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1821.3958129882812,
    "y": 1110.8596267700195,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "f48b55b8.ea1ca8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1822.3333129882812,
    "y": 1155.999885559082,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "e35ee523.d065b8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1824.3333129882812,
    "y": 1202.999885559082,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "4e769c0f.1938ec",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1655.3333129882812,
    "y": 1202.999885559082,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "e35ee523.d065b8"
      ]
    ]
  },
  {
    "id": "bf815f65.ee4c28",
    "type": "comment",
    "name": "CLL new",
    "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
    "comments": "",
    "x": 1437.3333129882812,
    "y": 1724.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "6a183fad.35ec3",
    "type": "set",
    "name": "set ethernet-srv-end-points-list array",
    "xml": "<set>\n<!--<parameter name='`ethernet-srv-end-points-list[$epidx].ethernet-end-point-name`' value='`$tmp.aai.connectivity.connectivity-id`' />-->\n<parameter name='`ethernet-srv-end-points-list[$epidx].ethernet-end-point-name`' value='`$tmp.aai.uni.id`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].index-number`' value='0' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].eth-node-id`' value='`$tmp.uni-node-id-short`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].eth-node-tp-id`' value='`$tmp.aai.uni.tp-id`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].leafOrRootAccess`' value='`$leafOrRootAccess`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].cvlan`' value='`$tmp.aai.connectivity.cvlan`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].CIR`' value='`$tmp.aai.uni.data-source * 1000000`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].EIR`' value='`$tmp.aai.uni.data-source * 1000000`' />\n\n<parameter name='`ethernet-srv-end-points-list_length`' value='`$epidx + 1`' />\n",
    "comments": "",
    "x": 1528.3333129882812,
    "y": 1778.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "1ef1fe95.45b2b9",
    "type": "set",
    "name": "unset ethernet-srv-end-points-list",
    "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
    "comments": "",
    "x": 2204.8333129882812,
    "y": 1191.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "dbeb188c.810cc",
    "type": "set",
    "name": "unset ethernet-srv-end-points-list",
    "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
    "comments": "",
    "x": 2209.8333129882812,
    "y": 1293.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "f8c77435.00d858",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 693.3333129882812,
    "y": 1743.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "e5d4675a.166ce"
      ]
    ]
  },
  {
    "id": "e5d4675a.166ce",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 925.3333129882812,
    "y": 1742.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "a4b4e62.0b9bb18"
      ]
    ]
  },
  {
    "id": "a4b4e62.0b9bb18",
    "type": "outcome",
    "name": "vpn-binding",
    "xml": "<outcome value='vpn-binding'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1137.3333129882812,
    "y": 1743.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "79b56211.8303fc"
      ]
    ]
  },
  {
    "id": "79b56211.8303fc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 393.33331298828125,
    "y": 1899.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "5e413ae2.fc139c",
        "a0eb6cf6.129b98"
      ]
    ]
  },
  {
    "id": "a0eb6cf6.129b98",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
    "comments": "",
    "x": 628.3333129882812,
    "y": 1886.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "5e413ae2.fc139c",
    "type": "save",
    "name": "get vpn-binding from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 618.3333129882812,
    "y": 1947.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "5d519b04.edc364",
        "44e78fc4.a8de9",
        "77b9ca42.e1131c"
      ]
    ]
  },
  {
    "id": "44e78fc4.a8de9",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 831.8242797851562,
    "y": 1931.5740432739258,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "93fe98b.5489068"
      ]
    ]
  },
  {
    "id": "77b9ca42.e1131c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 827.3333129882812,
    "y": 1976.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "376a9d2f.bd1f52"
      ]
    ]
  },
  {
    "id": "5d519b04.edc364",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 829.3333129882812,
    "y": 2036.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "fa4146f3.54f198"
      ]
    ]
  },
  {
    "id": "93fe98b.5489068",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 994.3958129882812,
    "y": 1930.859748840332,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "376a9d2f.bd1f52",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 995.3333129882812,
    "y": 1976.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "fa4146f3.54f198",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 998.3333129882812,
    "y": 2035.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "ef75e4e3.1f8138",
        "e2966b29.fc5b38"
      ]
    ]
  },
  {
    "id": "572a8f36.0443a",
    "type": "set",
    "name": "set sotn_value",
    "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivity.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivity.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivity.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivity.access-topology-id`' />\n<!--<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />-->\n<!--<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<!--<parameter name='index-number' value='0' />-->\n<!--<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />-->\n<!--<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />-->\n<!--<parameter name='CIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />-->\n<!--<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />-->\n",
    "comments": "",
    "x": 397.33331298828125,
    "y": 2534.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "944da194.59bcd",
    "type": "execute",
    "name": "execute RestApiCallNode Create ethernet Service without token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-ethernet-service-loop-protection.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 540.3333129882812,
    "y": 2594.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "d840ad4b.1282a",
        "89a7b87.1e553c8"
      ]
    ]
  },
  {
    "id": "d840ad4b.1282a",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 852.8333129882812,
    "y": 2571.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "89a7b87.1e553c8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 856.8333129882812,
    "y": 2611.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "5d5378bf.137d"
      ]
    ]
  },
  {
    "id": "9a01795a.7ab4e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
    "comments": "",
    "x": 1032.8333129882812,
    "y": 2575.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "5d5378bf.137d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1048.3333129882812,
    "y": 2629.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "6dbe844a.8a9554",
        "63370d02.a0670c",
        "1ca90fe2.261db8",
        "2ecfa879.64974"
      ]
    ]
  },
  {
    "id": "ef77bece.8a7928",
    "type": "save",
    "name": "update vpn-binding resource (aka. OTN ) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 1343.8333129882812,
    "y": 2598.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "33e96132.6ee886",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
    "comments": "",
    "x": 2810.8333129882812,
    "y": 1949.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "6dbe844a.8a9554",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 1305.8333129882812,
    "y": 2640.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "c08ad06c.488d4",
    "type": "set",
    "name": "set leafOrRootAccess",
    "xml": "<set>\n<parameter name='`leafOrRootAccess`' value='ietf-eth-tran-types:leaf-access' />\n",
    "comments": "",
    "x": 2170.8333129882812,
    "y": 1229.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "2ee2b867.995c6",
    "type": "set",
    "name": "set leafOrRootAccess",
    "xml": "<set>\n<parameter name='`leafOrRootAccess`' value='ietf-eth-tran-types:root-primary' />\n",
    "comments": "",
    "x": 2171.8333129882812,
    "y": 1333.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "5a5b3fd3.939fa",
    "type": "save",
    "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4465.333312988281,
    "y": 590.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "3bfb4fd1.bca51",
    "type": "save",
    "name": "update vpn-binding G resource (aka. OTN domainA) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingG.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingG.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingG.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4368.333312988281,
    "y": 1409.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "7832f278.b4880c",
    "type": "save",
    "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingB.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingB.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3862.3333129882812,
    "y": 2081.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "63b8bbd2.15c994",
    "type": "switchNode",
    "name": "switch connectivity is not already Activated (i.e. is either Created or Modified)",
    "xml": "<switch test=\"`$tmp.aai.connectivity.operational-status != 'Activated' `\">\n",
    "comments": "",
    "outputs": 1,
    "x": 963.3333129882812,
    "y": 889.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "a66053fc.e972e8",
        "286bc10d.0b75fe"
      ]
    ]
  },
  {
    "id": "a66053fc.e972e8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1326.3333129882812,
    "y": 912.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "6f304f3b.74dcb"
      ]
    ]
  },
  {
    "id": "286bc10d.0b75fe",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1326.3333129882812,
    "y": 861.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "bf68aa32.2da6d"
      ]
    ]
  },
  {
    "id": "6f304f3b.74dcb",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1482.3333129882812,
    "y": 910.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "9b8bc380.4fea78"
      ]
    ]
  },
  {
    "id": "bf68aa32.2da6d",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1459.3333129882812,
    "y": 862.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "b3333886.2341",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 2219.3333129882812,
    "y": 260.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "cc8c0809.c4ad6",
    "type": "set",
    "name": "set root-otn-tunnels-list array",
    "xml": "<set>\n<parameter name='`roottunsidx`' value='`$roottunsidx + 1`' />\n",
    "comments": "",
    "x": 3761.3333129882812,
    "y": 2241.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "eb39e6d9.695df8",
    "type": "set",
    "name": "set leaf-otn-tunnels-list array",
    "xml": "<set>\n<parameter name='`leaftunsidx`' value='`$leaftunsidx + 1`' />\n",
    "comments": "",
    "x": 4351.333312988281,
    "y": 714.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "f7155528.92cd7",
    "type": "set",
    "name": "set ethernet-srv-end-points-list array",
    "xml": "<set>\n<parameter name='`epidx`' value='`$epidx + 1`' />\n",
    "comments": "",
    "x": 1525.3333129882812,
    "y": 1820.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "7ad9431e.95fd94",
    "type": "set",
    "name": "set filename",
    "xml": "<set>\n<parameter name='filenameclleths' value=\"`$leafOrRootAccess + $tmp.aai.connectivity.access-node-id`\" />",
    "comments": "",
    "x": 704.3333129882812,
    "y": 1554.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "da906021.6570a8",
    "type": "execute",
    "name": "execute printContext",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenameclleths`\" />\n",
    "comments": "",
    "outputs": 1,
    "x": 735.3333129882812,
    "y": 1594.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "ef75e4e3.1f8138",
    "type": "set",
    "name": "set otn-tunnels-name-list array",
    "xml": "<set>\n<parameter name='`otn-tunnels-name-list[$otntunsidx].otn-tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`otn-tunnels-name-list[$otntunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`otn-tunnels-name-list_length`' value='`$otntunsidx + 1`' />\n",
    "comments": "",
    "x": 1283.3333129882812,
    "y": 2002.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "e2966b29.fc5b38",
    "type": "set",
    "name": "set otn-tunnels-name-list array",
    "xml": "<set>\n<parameter name='`otntunsidx`' value='`$otntunsidx + 1`' />\n",
    "comments": "",
    "x": 1286.3333129882812,
    "y": 2044.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "64010c53.9fe67c",
    "type": "set",
    "name": "unset otn-tunnels-name-list array",
    "xml": "<set>\n<parameter name='`otn-tunnels-name-list.`' value='' />\n<parameter name='`otn-tunnels-name-list_length`' value='0' />\n<parameter name='`otntunsidx`' value='0' />\n",
    "comments": "",
    "x": 729.3333129882812,
    "y": 1684.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "d5a25879.5481b8",
    "type": "set",
    "name": "set filename",
    "xml": "<set>\n<parameter name='filenamecllotns' value=\"`leafrootOTNtunnelnames`\" />",
    "comments": "",
    "x": 484.33331298828125,
    "y": 2063.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "7aac81ec.ba7cc8",
    "type": "execute",
    "name": "execute printContext",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenamecllotns`\" />\n",
    "comments": "",
    "outputs": 1,
    "x": 492.33331298828125,
    "y": 2120.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "65c7779e.8d1a88",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.uni.id`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-uni\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1503.3333129882812,
    "y": 1669.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "2c5e4010.43e508",
        "e3644437.55d698"
      ]
    ]
  },
  {
    "id": "e3644437.55d698",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1726.3333129882812,
    "y": 1624.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "63f336a7.fff6b"
      ]
    ]
  },
  {
    "id": "2c5e4010.43e508",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1728.3333129882812,
    "y": 1688.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "2fd3ce09.17bf12"
      ]
    ]
  },
  {
    "id": "63f336a7.fff6b",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1891.3333129882812,
    "y": 1621.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "185277bc.64228"
      ]
    ]
  },
  {
    "id": "2fd3ce09.17bf12",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 1890.3333129882812,
    "y": 1684.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "185277bc.64228",
    "type": "set",
    "name": "set tmp.uni-node-id-short",
    "xml": "<set>\n<parameter name='tmp.uni-node-id-short' value='`$param-prefix-uni[$param-prefix-uni_length -4]`' />\n",
    "comments": "",
    "x": 2111.3333129882812,
    "y": 1635.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "f4fd995d.61939",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1656.3333129882812,
    "y": 2360.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "3bd70d03.1cae1a"
      ]
    ]
  },
  {
    "id": "fea4d7d8.17bf48",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainConn.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainConn.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 2041.3333129882812,
    "y": 2373.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "753e6379.2f2664",
        "3a690bb3.5501f4",
        "105362f3.9957cd"
      ]
    ]
  },
  {
    "id": "3bd70d03.1cae1a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1835.3333129882812,
    "y": 2360.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "3086e43a.76dc2c",
        "fea4d7d8.17bf48"
      ]
    ]
  },
  {
    "id": "3086e43a.76dc2c",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainConn id",
    "xml": "<set>\n<parameter name='tmp.domainConn.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 2071.3333129882812,
    "y": 2321.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "753e6379.2f2664",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2251.3333129882812,
    "y": 2364.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "57e3082b.ec85c"
      ]
    ]
  },
  {
    "id": "3a690bb3.5501f4",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2243.3333129882812,
    "y": 2419.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "e1967348.adb6a"
      ]
    ]
  },
  {
    "id": "105362f3.9957cd",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2248.3333129882812,
    "y": 2476.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "9b464363.d7abc"
      ]
    ]
  },
  {
    "id": "9b464363.d7abc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 2400.3333129882812,
    "y": 2477.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "e1967348.adb6a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 2411.3333129882812,
    "y": 2422.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "57e3082b.ec85c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2395.7156372070312,
    "y": 2361.65567779541,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "a2d4cc4c.5835f"
      ]
    ]
  },
  {
    "id": "a2d4cc4c.5835f",
    "type": "set",
    "name": "set controller domainConn data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.url' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.user' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.password' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 2610.3333129882812,
    "y": 2358.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "77651854.67a228",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.pnf-name-forUrl\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 734.3333129882812,
    "y": 2406.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "8b371429.94e21",
        "ddb97aef.ff9618",
        "6bdf8533.ac0744"
      ]
    ]
  },
  {
    "id": "8b371429.94e21",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 929.8334350585938,
    "y": 2358.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "86408567.50b5f8"
      ]
    ]
  },
  {
    "id": "ddb97aef.ff9618",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 921.8334350585938,
    "y": 2413.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "83d0fe92.92a8c"
      ]
    ]
  },
  {
    "id": "86408567.50b5f8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1074.2157592773438,
    "y": 2357.65567779541,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "206c1f26.03baa8"
      ]
    ]
  },
  {
    "id": "206c1f26.03baa8",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1258.3333129882812,
    "y": 2356.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "604358eb.cf3bc"
      ]
    ]
  },
  {
    "id": "604358eb.cf3bc",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1453.3333129882812,
    "y": 2356.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "f4fd995d.61939"
      ]
    ]
  },
  {
    "id": "6bdf8533.ac0744",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 926.8334350585938,
    "y": 2470.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "843f6d1c.7ee9c"
      ]
    ]
  },
  {
    "id": "843f6d1c.7ee9c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 1078.8334350585938,
    "y": 2471.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "83d0fe92.92a8c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 1089.8334350585938,
    "y": 2414.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "7e37f686.4b31c8",
    "type": "set",
    "name": "set tmp.pnf-name-forUrl",
    "xml": "<set>\n\n<parameter name='tmp.pnf-name-forUrl' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.connectivity.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.connectivity.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.connectivity.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.connectivity.access-node-id`\" />\n",
    "comments": "",
    "x": 724.3333129882812,
    "y": 2318.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "c0f06a3d.8ad7f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 469.33331298828125,
    "y": 2449.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "7e37f686.4b31c8",
        "77651854.67a228"
      ]
    ]
  },
  {
    "id": "7e8f5942.82fe9",
    "type": "comment",
    "name": "Temporary skipping this check - to support multiple instances in one slice",
    "info": "",
    "comments": "",
    "x": 1684.2999877929688,
    "y": 266.88333892822266,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "9f7438aa.cfa3f8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 886.3333129882812,
    "y": 489.00000762939453,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "4162fe05.2b911",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 445.83331298828125,
    "y": 1458.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "bd0ad7c2.1f4f3",
        "f8c77435.00d858",
        "7ad9431e.95fd94",
        "da906021.6570a8",
        "572a8f36.0443a",
        "944da194.59bcd",
        "64010c53.9fe67c",
        "d5a25879.5481b8",
        "7aac81ec.ba7cc8",
        "c0f06a3d.8ad7f8",
        "ad8e54c3.d3fe18"
      ]
    ]
  },
  {
    "id": "cccd2695.c600b",
    "type": "switchNode",
    "name": "switch uni type",
    "xml": "<switch test=\"`$tmp.aai.uni.type`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1476.3333129882812,
    "y": 1296.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "8f7bce65.961b18",
        "17cc18e5.7d037f",
        "302ecb9b.5a47dc",
        "c6b9b74d.1c7d78"
      ]
    ]
  },
  {
    "id": "8f7bce65.961b18",
    "type": "outcome",
    "name": "leaf",
    "xml": "<outcome value='leaf'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1641.3333129882812,
    "y": 1278.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "3943aa6e.c88a36"
      ]
    ]
  },
  {
    "id": "17cc18e5.7d037f",
    "type": "outcome",
    "name": "root",
    "xml": "<outcome value='root'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1644.3333129882812,
    "y": 1317.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "47637f28.c69c6"
      ]
    ]
  },
  {
    "id": "c6b9b74d.1c7d78",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1638.3333129882812,
    "y": 1395.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "656a466a.445c98"
      ]
    ]
  },
  {
    "id": "302ecb9b.5a47dc",
    "type": "outcome",
    "name": "secondary-root",
    "xml": "<outcome value='secondary-root'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1661.3333129882812,
    "y": 1358.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "6a61eaa3.28143c"
      ]
    ]
  },
  {
    "id": "a2fb1650.227e28",
    "type": "set",
    "name": "unset ethernet-srv-end-points-list",
    "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
    "comments": "",
    "x": 2207.3333129882812,
    "y": 1391.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "e35c4fb2.169e68",
    "type": "set",
    "name": "set leafOrRootAccess",
    "xml": "<set>\n<parameter name='`leafOrRootAccess`' value='ietf-eth-tran-types:root-backup' />\n",
    "comments": "",
    "x": 2169.3333129882812,
    "y": 1431.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "656a466a.445c98",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1806.3333129882812,
    "y": 1395.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "3943aa6e.c88a36",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1802.3333129882812,
    "y": 1274.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "c08ad06c.488d4"
      ]
    ]
  },
  {
    "id": "47637f28.c69c6",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1809.3333129882812,
    "y": 1319.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "2ee2b867.995c6"
      ]
    ]
  },
  {
    "id": "6a61eaa3.28143c",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1808.3333129882812,
    "y": 1359.0000076293945,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "e35c4fb2.169e68"
      ]
    ]
  },
  {
    "id": "9b8bc380.4fea78",
    "type": "switchNode",
    "name": "switch conn type != mdsc",
    "xml": "<switch test=\"`$tmp.aai.connectivity.vpn-type != 'mdsc' `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 442.8999786376953,
    "y": 1218.9333572387695,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "77dc380.c063d48"
      ]
    ]
  },
  {
    "id": "77dc380.c063d48",
    "type": "outcome",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 624.8999633789062,
    "y": 1219.9333572387695,
    "z": "88b99be5.091bf8",
    "wires": [
      [
        "4162fe05.2b911"
      ]
    ]
  },
  {
    "id": "ad8e54c3.d3fe18",
    "type": "set",
    "name": "unset ethernet-srv-end-points-list",
    "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
    "comments": "",
    "x": 760.8999633789062,
    "y": 1396.966682434082,
    "z": "88b99be5.091bf8",
    "wires": []
  },
  {
    "id": "63370d02.a0670c",
    "type": "execute",
    "name": "execute RestApiCallNode Create Performance Monitoring Data",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-create-pm-data.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/data'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1386.3333740234375,
    "y": 2738.33349609375,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "1ca90fe2.261db8",
    "type": "execute",
    "name": "execute RestconfDiscoveryNode establishSubscription",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='establishSubscriptionOnly' >\n<parameter name=\"subscriberId\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url`\" />\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-subscribe-notification.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/operations/ietf-subscribed-notifications:establish-subscription'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<!--<parameter name=\"deviceIp\" value=\"192.168.198.6\" />-->\n<!--<parameter name=\"devicePort\" value=\"18181\" />-->\n<parameter name=\"sseConnectURL\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/streams/yang-push-json'`\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"post\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"X-ACCESS-TOKEN=x-ik2ps4ikvzupbx0486ft1ebzs7rt85futh9ho6eofy3wjsap7wqktemlqm4bbsmnar3vrtbyrzukbv5itd6m1cftldpjarnyle3sdcqq9hftc4lebz464b5ffxmlbvg9\" />\n<parameter name=\"module\" value=\"GENERIC-RESOURCE-API\" />\n<parameter name=\"rpc\" value=\"cll-vnf-topology-operation-cll-callbackdg-notification\" />\n<parameter name=\"version\" value=\"`$project.version`\" />\n<parameter name=\"mode\" value=\"sync\" />\n<parameter name=\"responsePrefix\" value=\"restapi-result\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1354.3333740234375,
    "y": 2810.3333740234375,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  },
  {
    "id": "2ecfa879.64974",
    "type": "execute",
    "name": "execute RestconfDiscoveryNode establishPersistentConnection",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='establishPersistentSseConnection' >\n<parameter name=\"subscriberId\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url`\" />\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-subscribe-notification.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/operations/ietf-subscribed-notifications:establish-subscription'`\" />\n<parameter name=\"sseConnectURL\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/streams/yang-push-json'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"get\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"X-ACCESS-TOKEN=x-ik2ps4ikvzupbx0486ft1ebzs7rt85futh9ho6eofy3wjsap7wqktemlqm4bbsmnar3vrtbyrzukbv5itd6m1cftldpjarnyle3sdcqq9hftc4lebz464b5ffxmlbvg9\" />\n<parameter name=\"module\" value=\"GENERIC-RESOURCE-API\" />\n<parameter name=\"rpc\" value=\"cll-vnf-topology-operation-cll-callbackdg-notification\" />\n<parameter name=\"version\" value=\"`$project.version`\" />\n<parameter name=\"mode\" value=\"sync\" />\n<parameter name=\"responsePrefix\" value=\"notification-get-result\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1384.3333740234375,
    "y": 2872.3333740234375,
    "z": "88b99be5.091bf8",
    "wires": [
      []
    ]
  }
]