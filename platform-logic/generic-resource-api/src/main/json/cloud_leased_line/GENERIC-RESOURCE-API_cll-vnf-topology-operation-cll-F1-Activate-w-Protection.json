[
  {
    "id": "10a422cf.1eeed5",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 676,
    "y": 287,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "b0a990da.c03088",
        "b7ea05a6.0fe86",
        "2c56ab13.0959e4"
      ]
    ]
  },
  {
    "id": "b0a990da.c03088",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 864,
    "y": 300,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "455891ac.f0409"
      ]
    ]
  },
  {
    "id": "b7ea05a6.0fe86",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 871.4909362792969,
    "y": 342.57403564453125,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "2c56ab13.0959e4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 862,
    "y": 389,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "630bfd04.7da00c"
      ]
    ]
  },
  {
    "id": "455891ac.f0409",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1037,
    "y": 298,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "7e5b0143.2c92a8"
      ]
    ]
  },
  {
    "id": "7e5b0143.2c92a8",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1266,
    "y": 299,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "62dd4d08.7a116c"
      ]
    ]
  },
  {
    "id": "62dd4d08.7a116c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1481,
    "y": 300,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "7caf5b45.f9ab04"
      ]
    ]
  },
  {
    "id": "76f6230c.40e14c",
    "type": "switchNode",
    "name": "switch vpnuuid is for this slice",
    "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1735,
    "y": 222,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "a035fb12.104f38",
        "a471cecf.79d2"
      ]
    ]
  },
  {
    "id": "a035fb12.104f38",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1952,
    "y": 201,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "7caf5b45.f9ab04"
      ]
    ]
  },
  {
    "id": "a471cecf.79d2",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1952,
    "y": 250,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "7caf5b45.f9ab04",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 2136,
    "y": 287,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "9e3d4f1.ef044b",
        "1812ba90.3bec25",
        "cefb7e41.dee868"
      ]
    ]
  },
  {
    "id": "82ff7ac2.5ab12",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 495,
    "y": 28,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "60b5aea2.21792"
      ]
    ]
  },
  {
    "id": "60b5aea2.21792",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 779.2856903076172,
    "y": 89.23810863494873,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "414f5c44.935264"
      ]
    ]
  },
  {
    "id": "414f5c44.935264",
    "type": "method",
    "name": "method cll-vnf-topology-operation-cll-F1-Activate-w-Protection",
    "xml": "<method rpc='cll-vnf-topology-operation-cll-F1-Activate-w-Protection' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 785.4286041259766,
    "y": 174.00003051757812,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "90230fbe.1f78e8"
      ]
    ]
  },
  {
    "id": "90230fbe.1f78e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1095.238037109375,
    "y": 165.66668701171875,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "10a422cf.1eeed5",
        "c82b1b5b.8e5c4",
        "476ddcd6.ba7404",
        "cf6ce2f3.f820a",
        "a8ba69c5.3110b8"
      ]
    ]
  },
  {
    "id": "9e3d4f1.ef044b",
    "type": "set",
    "name": "set tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 2353,
    "y": 225,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "9b274b59.c02fc",
    "type": "set",
    "name": "set attachment_param for OTN A",
    "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingA.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingA.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingA.customer-vpn-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingA.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-src-domain' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingA.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingA.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingA.access-topology-id`' />\n",
    "comments": "",
    "x": 4522,
    "y": 111,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "73b1b71.91a29c8",
    "type": "execute",
    "name": "execute RestApiCallNode Create OTN tunnel with token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-src-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4603,
    "y": 426,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "bf94869d.abe8c",
        "7e872687.f361d8"
      ]
    ]
  },
  {
    "id": "bf94869d.abe8c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4912.5,
    "y": 395,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "70666b8b.cebd9c"
      ]
    ]
  },
  {
    "id": "7e872687.f361d8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4917.5,
    "y": 460,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "2f157928.a7cc26"
      ]
    ]
  },
  {
    "id": "70666b8b.cebd9c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
    "comments": "",
    "x": 5088.5,
    "y": 395,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "2f157928.a7cc26",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5084,
    "y": 460,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "2c68de8.698fe22",
    "type": "set",
    "name": "set sotn_value",
    "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityA.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityA.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityA.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />\n",
    "comments": "",
    "x": 4467.5,
    "y": 680,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "432e6fef.6bc3f",
    "type": "execute",
    "name": "execute RestApiCallNode Create ethernet Service without token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4621.5,
    "y": 728,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "4c8de07f.a04f7",
        "1618ec6.a46fa94"
      ]
    ]
  },
  {
    "id": "4c8de07f.a04f7",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4967,
    "y": 709,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "74c74a6e.6269c4"
      ]
    ]
  },
  {
    "id": "1618ec6.a46fa94",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4971,
    "y": 749,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "1da4485d.51ad6"
      ]
    ]
  },
  {
    "id": "74c74a6e.6269c4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
    "comments": "",
    "x": 5125,
    "y": 709,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "1da4485d.51ad6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5128.5,
    "y": 749,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "ee6915f8.624f38",
        "90214377.544788"
      ]
    ]
  },
  {
    "id": "ee6915f8.624f38",
    "type": "save",
    "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5459,
    "y": 714,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "838cdc3e.4f58e",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
    "comments": "",
    "x": 5323,
    "y": 673,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "90214377.544788",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityA.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5386,
    "y": 760,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "aa46b84e.3356a",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingA.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingA.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingA.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingA.src-access-node-id`\" />\n",
    "comments": "",
    "x": 4460,
    "y": 159,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "d57f31e9.bb9eb",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 4486,
    "y": 276,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "33a92b4f.9380e4",
        "f049b484.8a771",
        "3592f024.f5a328"
      ]
    ]
  },
  {
    "id": "33a92b4f.9380e4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4681.5001220703125,
    "y": 228,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "14379d7c.41191b"
      ]
    ]
  },
  {
    "id": "f049b484.8a771",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4673.5001220703125,
    "y": 283,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "53127e40.7f1108"
      ]
    ]
  },
  {
    "id": "14379d7c.41191b",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4825.8824462890625,
    "y": 227.65567016601562,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "88ec362d.bac6c"
      ]
    ]
  },
  {
    "id": "5831eff3.ba3a08",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5408,
    "y": 230,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "ea688f7c.199be"
      ]
    ]
  },
  {
    "id": "88ec362d.bac6c",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5010,
    "y": 226,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "280d7047.234eb8"
      ]
    ]
  },
  {
    "id": "280d7047.234eb8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5205,
    "y": 226,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "5831eff3.ba3a08"
      ]
    ]
  },
  {
    "id": "3592f024.f5a328",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4678.5001220703125,
    "y": 340,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "5b037f74.b971e"
      ]
    ]
  },
  {
    "id": "5b037f74.b971e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4830.5001220703125,
    "y": 341,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "53127e40.7f1108",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4841.5001220703125,
    "y": 284,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "9d5c763c.8825a8",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5793,
    "y": 243,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "14eb5ad.a3dc725",
        "4c145e69.4439a8",
        "6146c55d.b50c7c"
      ]
    ]
  },
  {
    "id": "ea688f7c.199be",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5587,
    "y": 230,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "2ce20510.f1ea8a",
        "9d5c763c.8825a8"
      ]
    ]
  },
  {
    "id": "2ce20510.f1ea8a",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainA id",
    "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5823,
    "y": 191,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "14eb5ad.a3dc725",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6003,
    "y": 234,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "95245b22.847e1"
      ]
    ]
  },
  {
    "id": "4c145e69.4439a8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5995,
    "y": 289,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "8e4747a4.d218e8"
      ]
    ]
  },
  {
    "id": "6146c55d.b50c7c",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6000,
    "y": 346,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "6067fdf7.24ee8c"
      ]
    ]
  },
  {
    "id": "6067fdf7.24ee8c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 6152,
    "y": 347,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "8e4747a4.d218e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 6163,
    "y": 292,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "95245b22.847e1",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6147.38232421875,
    "y": 231.65567016601562,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "37f78c4b.9778a4"
      ]
    ]
  },
  {
    "id": "37f78c4b.9778a4",
    "type": "set",
    "name": "set controller domainA data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 6362,
    "y": 228,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "105d488e.a9be97",
    "type": "set",
    "name": "set attachment_param for OTN B",
    "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingB.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingB.dst-access-node-id`' />\n<!--<parameter name='src-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingB.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingB.src-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-dst-domain' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingB.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingB.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingB.access-topology-id`' />\n",
    "comments": "",
    "x": 3929,
    "y": 1568,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "f1912cb6.f277c8",
    "type": "execute",
    "name": "execute RestApiCallNode Create OTN tunnel with token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-dst-domain-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3992,
    "y": 1897,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "97bce09c.8125c",
        "5d55eda4.32d174"
      ]
    ]
  },
  {
    "id": "97bce09c.8125c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4287.5,
    "y": 1864,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "f47c0fd1.452808"
      ]
    ]
  },
  {
    "id": "5d55eda4.32d174",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4292.5,
    "y": 1929,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "acffe827.dd3a1"
      ]
    ]
  },
  {
    "id": "f47c0fd1.452808",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
    "comments": "",
    "x": 4455.5,
    "y": 1864,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "acffe827.dd3a1",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4466,
    "y": 1929,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "b25ffa4f.8d40a",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingB.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingB.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingB.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingB.dst-access-node-id`\" />\n",
    "comments": "",
    "x": 3868,
    "y": 1625,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "cf848b89.db6cc",
    "type": "get-resource",
    "name": "get-resource dst pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3888,
    "y": 1722,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "3599c19a.ddebee",
        "34a9c77d.fd737",
        "5dbb4cb9.edac8c"
      ]
    ]
  },
  {
    "id": "3599c19a.ddebee",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4090.5001220703125,
    "y": 1675,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "cbdb928e.2f6908"
      ]
    ]
  },
  {
    "id": "34a9c77d.fd737",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4082.5001220703125,
    "y": 1730,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "aab7df57.177ae"
      ]
    ]
  },
  {
    "id": "cbdb928e.2f6908",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4234.8824462890625,
    "y": 1672.6556701660156,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "5b70bc96.d9f024"
      ]
    ]
  },
  {
    "id": "5b70bc96.d9f024",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4419,
    "y": 1687,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "4020371.e4e7d48"
      ]
    ]
  },
  {
    "id": "5dbb4cb9.edac8c",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4087.5001220703125,
    "y": 1787,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "cb2099e3.7f1de"
      ]
    ]
  },
  {
    "id": "cb2099e3.7f1de",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4239.5001220703125,
    "y": 1788,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "aab7df57.177ae",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4250.5001220703125,
    "y": 1733,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "b4cfde0a.4da658",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4817,
    "y": 1691,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "f4ed5c16.5bfe98"
      ]
    ]
  },
  {
    "id": "4020371.e4e7d48",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4614,
    "y": 1687,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "b4cfde0a.4da658"
      ]
    ]
  },
  {
    "id": "5139fea9.434dc8",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5202,
    "y": 1690,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "d7e660a5.61d688",
        "5cb5ba76.7f8a6c",
        "f188d950.fea538"
      ]
    ]
  },
  {
    "id": "f4ed5c16.5bfe98",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4994,
    "y": 1683,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "5d010c90.067a14",
        "5139fea9.434dc8"
      ]
    ]
  },
  {
    "id": "5d010c90.067a14",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainB id",
    "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5232,
    "y": 1638,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "9b19cdfe.3fc3d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5561,
    "y": 1794,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "c60dd4d0.e8d36",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5572,
    "y": 1739,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "285fdf09.377c58",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5556.38232421875,
    "y": 1678.6556701660156,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "98960d3c.5507d"
      ]
    ]
  },
  {
    "id": "98960d3c.5507d",
    "type": "set",
    "name": "set controller domainB data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5771,
    "y": 1675,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "d7e660a5.61d688",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5412,
    "y": 1681,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "285fdf09.377c58"
      ]
    ]
  },
  {
    "id": "5cb5ba76.7f8a6c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5404,
    "y": 1736,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "c60dd4d0.e8d36"
      ]
    ]
  },
  {
    "id": "f188d950.fea538",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5409,
    "y": 1793,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "9b19cdfe.3fc3d8"
      ]
    ]
  },
  {
    "id": "4f2225d8.9c49ec",
    "type": "switchNode",
    "name": "switch vpn-binding has dst-access-ltp",
    "xml": "<switch test='`$tmp.aai.vpn-binding.dst-access-ltp-id`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3443,
    "y": 639,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "d58501ac.39534",
        "2fb4f475.808574"
      ]
    ]
  },
  {
    "id": "d58501ac.39534",
    "type": "outcome",
    "name": "Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 3657,
    "y": 676,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "41d82fae.a5867"
      ]
    ]
  },
  {
    "id": "2fb4f475.808574",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3659,
    "y": 614,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "918c203c.df9608"
      ]
    ]
  },
  {
    "id": "41d82fae.a5867",
    "type": "switchNode",
    "name": "switch vpn-binding has src-access-ltp",
    "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3237,
    "y": 1919,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "5075f0ba.d591f8",
        "d426d492.2d277"
      ]
    ]
  },
  {
    "id": "5075f0ba.d591f8",
    "type": "outcome",
    "name": "Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 3490,
    "y": 1953,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "e38a9aed.8397b"
      ]
    ]
  },
  {
    "id": "d426d492.2d277",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3490,
    "y": 1897,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "16742fe3.bdb1e8"
      ]
    ]
  },
  {
    "id": "e38a9aed.8397b",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3641,
    "y": 1953,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "5d106c04.0c1bfc",
    "type": "set",
    "name": "set vpn-bindingA and connectivityA",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingA.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityA.' value=\"`$tmp.aai.connectivity.`\" />\n",
    "comments": "",
    "x": 4517,
    "y": 51,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "ff76ad24.0c9b6",
    "type": "set",
    "name": "set vpn-bindingB and connectivityB",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingB.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityB.' value=\"`$tmp.aai.connectivity.`\" />\n\n",
    "comments": "",
    "x": 3925,
    "y": 1510,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "a35804af.f7d858",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4208,
    "y": 308,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "5d106c04.0c1bfc",
        "9b274b59.c02fc",
        "aa46b84e.3356a",
        "d57f31e9.bb9eb",
        "73b1b71.91a29c8",
        "8951fa6a.a6da3",
        "46bfac70.a8d9fc",
        "d22b47c.48051b8"
      ]
    ]
  },
  {
    "id": "16742fe3.bdb1e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3641,
    "y": 1896,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "ff76ad24.0c9b6",
        "105d488e.a9be97",
        "b25ffa4f.8d40a",
        "cf848b89.db6cc",
        "f1912cb6.f277c8",
        "7bb669b7.d54818",
        "bfef7878.c9996",
        "fc2523d9.c5b768"
      ]
    ]
  },
  {
    "id": "b91faaf4.9b239",
    "type": "set",
    "name": "set sotn_value",
    "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityB.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityB.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityB.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityB.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityB.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityB.access-ltp-id`' />\n<parameter name='CIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='EIR' value='`$tmp.aai.vpn-bindingB.route-distinguisher *1000000`' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityB.cvlan`' />\n\n",
    "comments": "",
    "x": 3879,
    "y": 2195,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "332b3c8d.6566fc",
    "type": "execute",
    "name": "execute RestApiCallNode Create ethernet Service without token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-ethernet-service.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4033,
    "y": 2243,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "f1ea3ac9.246e38",
        "629d98b3.63b55"
      ]
    ]
  },
  {
    "id": "f1ea3ac9.246e38",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4378.5,
    "y": 2224,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "d4e7ca44.3afb58"
      ]
    ]
  },
  {
    "id": "629d98b3.63b55",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4382.5,
    "y": 2264,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "cda78bf5.1aa53"
      ]
    ]
  },
  {
    "id": "d4e7ca44.3afb58",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
    "comments": "",
    "x": 4536.5,
    "y": 2224,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "cda78bf5.1aa53",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4540,
    "y": 2264,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "d94da46.8513a58",
        "80579be4.10d908"
      ]
    ]
  },
  {
    "id": "d94da46.8513a58",
    "type": "save",
    "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingB.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingB.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4880,
    "y": 2263,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "3ac4cfaa.a33bf8",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "use proper vpn-binding id and connectivity\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
    "comments": "",
    "x": 4738,
    "y": 2221,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "80579be4.10d908",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityB.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityB.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4809,
    "y": 2312,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "59ca2fb3.db456",
    "type": "set",
    "name": "set attachment_param (gfp-n) for OTN",
    "xml": "<set>\n<parameter name='gfp-n' value='`$tmp.aai.vpn-binding.route-distinguisher`' />\n",
    "comments": "",
    "x": 3434,
    "y": 579,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "e8c1824d.c7b678",
    "type": "comment",
    "name": "only dst ttp exists. No src",
    "info": "",
    "comments": "",
    "x": 4029,
    "y": 265,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "6594c17a.b17458",
    "type": "comment",
    "name": "only src ttp exists. No dst",
    "info": "",
    "comments": "",
    "x": 3586,
    "y": 1843,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "918c203c.df9608",
    "type": "switchNode",
    "name": "switch vpn-binding has src-access-ltp",
    "xml": "<switch test='`$tmp.aai.vpn-binding.src-access-ltp-id`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3765,
    "y": 427,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "bfcf03d4.3ffba",
        "71ba846a.64e1d4"
      ]
    ]
  },
  {
    "id": "71ba846a.64e1d4",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4007,
    "y": 1016,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "98c2d638.1715f8"
      ]
    ]
  },
  {
    "id": "bfcf03d4.3ffba",
    "type": "outcome",
    "name": "Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 4001,
    "y": 307,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "a35804af.f7d858"
      ]
    ]
  },
  {
    "id": "98c2d638.1715f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4165,
    "y": 1015,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "d3cd38dd.2ebd58",
        "ad06e711.5b1538",
        "8a91f9fb.3806c",
        "162c1530.673073",
        "7140d593.b05bc4",
        "baf6ec9f.d24be"
      ]
    ]
  },
  {
    "id": "ad06e711.5b1538",
    "type": "set",
    "name": "set attachment_param for OTN G",
    "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingG.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingG.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='src-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingG.customer-vpn-id`' />\n<parameter name='src-ttp-id' value='`$tmp.aai.vpn-bindingG.src-access-ltp-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingG.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-domainG' value='`$tmp.aai.vpn-bindingG.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingG.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingG.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingG.access-topology-id`' />\n",
    "comments": "",
    "x": 4429,
    "y": 898,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "7140d593.b05bc4",
    "type": "execute",
    "name": "execute RestApiCallNode Create OTN tunnel with token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-otn-domainG-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainG.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4510,
    "y": 1213,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "3f3f2221.846d2e",
        "8610f4b1.bab488"
      ]
    ]
  },
  {
    "id": "3f3f2221.846d2e",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4819.5,
    "y": 1182,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "1759fa75.7439f6"
      ]
    ]
  },
  {
    "id": "8610f4b1.bab488",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4824.5,
    "y": 1247,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "ea3b42ee.d3dc2"
      ]
    ]
  },
  {
    "id": "1759fa75.7439f6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create OTN tunnel rest api\" />\n",
    "comments": "",
    "x": 4995.5,
    "y": 1182,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "ea3b42ee.d3dc2",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4991,
    "y": 1247,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "8a91f9fb.3806c",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.domainG.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingG.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingG.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingG.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingG.src-access-node-id`\" />\n",
    "comments": "",
    "x": 4367,
    "y": 946,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "162c1530.673073",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domainG.pnf-name\"\n        pfx='tmp.aai.domainG-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 4393,
    "y": 1063,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "8b8f3e33.0b8288",
        "bbf641fc.079918",
        "aed8a0af.bcb0e8"
      ]
    ]
  },
  {
    "id": "8b8f3e33.0b8288",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4588.5001220703125,
    "y": 1015,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "175bae6d.5d0f5a"
      ]
    ]
  },
  {
    "id": "bbf641fc.079918",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4580.5001220703125,
    "y": 1070,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "fdde9a8e.52abd"
      ]
    ]
  },
  {
    "id": "175bae6d.5d0f5a",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4732.8824462890625,
    "y": 1014.6556701660156,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "719f0fb2.9b4ea"
      ]
    ]
  },
  {
    "id": "719f0fb2.9b4ea",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.domainG-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4917,
    "y": 1013,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "776708d.aaadf78"
      ]
    ]
  },
  {
    "id": "776708d.aaadf78",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5112,
    "y": 1013,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "2f8639e1.f5b81e"
      ]
    ]
  },
  {
    "id": "aed8a0af.bcb0e8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4585.5001220703125,
    "y": 1127,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "16ba7b0.a295705"
      ]
    ]
  },
  {
    "id": "16ba7b0.a295705",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4737.5001220703125,
    "y": 1128,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "fdde9a8e.52abd",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4748.5001220703125,
    "y": 1071,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "d3cd38dd.2ebd58",
    "type": "set",
    "name": "set vpn-bindingG and connectivityG",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingG.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityG.' value=\"`$tmp.aai.connectivity.`\" />\n",
    "comments": "",
    "x": 4424,
    "y": 838,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "2f8639e1.f5b81e",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5315,
    "y": 1017,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "4e6eba09.52f61c"
      ]
    ]
  },
  {
    "id": "d0ebf00f.416c5",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5700,
    "y": 1030,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "504e55c8.8a8984",
        "eddcd7ad.fdc98",
        "17833a87.15b8f5"
      ]
    ]
  },
  {
    "id": "4e6eba09.52f61c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5494,
    "y": 1017,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "951ffcc3.fc60c8",
        "d0ebf00f.416c5"
      ]
    ]
  },
  {
    "id": "951ffcc3.fc60c8",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainG id",
    "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.domainG-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5730,
    "y": 978,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "504e55c8.8a8984",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5910,
    "y": 1021,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "8e64943.8a64ae8"
      ]
    ]
  },
  {
    "id": "eddcd7ad.fdc98",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5902,
    "y": 1076,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "6bb74cc0.02d7dc"
      ]
    ]
  },
  {
    "id": "17833a87.15b8f5",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5907,
    "y": 1133,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "43c2b842.215f48"
      ]
    ]
  },
  {
    "id": "43c2b842.215f48",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 6059,
    "y": 1134,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "6bb74cc0.02d7dc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 6070,
    "y": 1079,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "8e64943.8a64ae8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6054.38232421875,
    "y": 1018.6556701660156,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "fb3f7d81.a9fad8"
      ]
    ]
  },
  {
    "id": "fb3f7d81.a9fad8",
    "type": "set",
    "name": "set controller domainG data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 6269,
    "y": 1015,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "534dacd3.c0ac9c",
    "type": "comment",
    "name": "both src and dst exist",
    "info": "",
    "comments": "",
    "x": 4043,
    "y": 956,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "1812ba90.3bec25",
    "type": "switchNode",
    "name": "switch vpn-binding is not already Activated (i.e. is either Created or Modified)",
    "xml": "<switch test=\"`$tmp.aai.vpn-binding.operational-status != 'Activated' `\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2605,
    "y": 683,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "1c061163.c474df",
        "695afc2e.f3ca34"
      ]
    ]
  },
  {
    "id": "695afc2e.f3ca34",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3012,
    "y": 701,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "fdf83271.37011"
      ]
    ]
  },
  {
    "id": "1c061163.c474df",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3012,
    "y": 646,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "ca8832e9.e2e2f8"
      ]
    ]
  },
  {
    "id": "ca8832e9.e2e2f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3168,
    "y": 644,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "59ca2fb3.db456",
        "4f2225d8.9c49ec"
      ]
    ]
  },
  {
    "id": "fdf83271.37011",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3145,
    "y": 702,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "c82b1b5b.8e5c4",
    "type": "set",
    "name": "unset tmp.aai.all-vpn-bindings",
    "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value=\"\" />\n",
    "comments": "",
    "x": 1322,
    "y": 118,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "411de79.b4b0f18",
    "type": "comment",
    "name": "CLL new",
    "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
    "comments": "",
    "x": 4439,
    "y": 536,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "8951fa6a.a6da3",
    "type": "set",
    "name": "set leaf-otn-tunnels-list array",
    "xml": "<set>\n<parameter name='`leaf-tunnels-list[$leaftunsidx].tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`leaf-tunnels-list[$leaftunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`leaf-tunnels-list_length`' value='`$leaftunsidx + 1`' />\n",
    "comments": "",
    "x": 4499,
    "y": 575,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "476ddcd6.ba7404",
    "type": "set",
    "name": "unset leaf-otn-tunnels-list array",
    "xml": "<set>\n<parameter name='`leaf-tunnels-list.`' value='' />\n<parameter name='`leaf-tunnels-list_length`' value='0' />\n<parameter name='`leaftunsidx`' value='0' />\n",
    "comments": "",
    "x": 1315,
    "y": 26,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "1bf6340f.f5f2ec",
    "type": "comment",
    "name": "CLL new",
    "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
    "comments": "",
    "x": 3851,
    "y": 2052,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "7bb669b7.d54818",
    "type": "set",
    "name": "set root-otn-tunnels-list array",
    "xml": "<set>\n<parameter name='`root-tunnels-list[$roottunsidx].tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`root-tunnels-list[$roottunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`root-tunnels-list_length`' value='`$roottunsidx + 1`' />\n",
    "comments": "",
    "x": 3907,
    "y": 2101,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "6657df85.d2b128",
    "type": "set",
    "name": "unset root-otn-tunnels-list array",
    "xml": "<set>\n<parameter name='`root-tunnels-list.`' value='' />\n<parameter name='`root-tunnels-list_length`' value='0' />\n<parameter name='`roottunsidx`' value='0' />\n",
    "comments": "",
    "x": 1315,
    "y": 65,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "cf6ce2f3.f820a",
    "type": "execute",
    "name": "execute properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
    "comments": "",
    "outputs": 1,
    "x": 1346,
    "y": 166,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "a8ba69c5.3110b8",
    "type": "save",
    "name": "get service-instance from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--$vnf-topology-operation-input.service-information.service-instance-id-->",
    "comments": "",
    "outputs": 1,
    "x": 556,
    "y": 641,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "502e9c54.45eb3c",
        "889f52ba.eeef7",
        "28d7625.1c6aa1e"
      ]
    ]
  },
  {
    "id": "502e9c54.45eb3c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 775,
    "y": 579,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "1f16072d.60be49"
      ]
    ]
  },
  {
    "id": "889f52ba.eeef7",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 784.490966796875,
    "y": 621.5740356445312,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "28d7625.1c6aa1e",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 773,
    "y": 668,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "ccd7626e.e5286"
      ]
    ]
  },
  {
    "id": "1f16072d.60be49",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 972,
    "y": 575,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "839ea221.6a3238"
      ]
    ]
  },
  {
    "id": "ccd7626e.e5286",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 942,
    "y": 669,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "839ea221.6a3238",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1195.33349609375,
    "y": 574.9999389648438,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "8ba544cb.07a21"
      ]
    ]
  },
  {
    "id": "8ba544cb.07a21",
    "type": "outcome",
    "name": "connectivity",
    "xml": "<outcome value='connectivity'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1396.0001335144043,
    "y": 576.000020980835,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "f797d924.6d542"
      ]
    ]
  },
  {
    "id": "f797d924.6d542",
    "type": "save",
    "name": "get connectivity from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 526,
    "y": 838,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "55f1b492.85099c",
        "efb1ebef.255b68",
        "f3e73178.97a2a"
      ]
    ]
  },
  {
    "id": "55f1b492.85099c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 734,
    "y": 802,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "b45da909.27452"
      ]
    ]
  },
  {
    "id": "efb1ebef.255b68",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 734.490966796875,
    "y": 847.5740356445312,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "f3e73178.97a2a",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 732,
    "y": 891,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "e06cb3b.90f78d"
      ]
    ]
  },
  {
    "id": "e06cb3b.90f78d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 901,
    "y": 892,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "58a3e896.b9ca7",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 873,
    "y": 1386,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "ed8e0c4d.c624f8"
      ]
    ]
  },
  {
    "id": "ed8e0c4d.c624f8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1076,
    "y": 1398,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "31bb3da4.3ce832"
      ]
    ]
  },
  {
    "id": "31bb3da4.3ce832",
    "type": "outcome",
    "name": "UNI",
    "xml": "<outcome value='uni'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1242,
    "y": 1395,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "7ad884e0.ebf21c"
      ]
    ]
  },
  {
    "id": "7ad884e0.ebf21c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1403,
    "y": 1392,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "319b90ba.5fa548",
        "5d60f478.58b2dc",
        "478f42b4.faa2d4",
        "573af6c.7f50588",
        "1b5d7c99.3bb563",
        "a7cc4e14.f32b08"
      ]
    ]
  },
  {
    "id": "5d60f478.58b2dc",
    "type": "set",
    "name": "unset tmp.aai.uni",
    "xml": "<set>\n<parameter name='tmp.aai.uni.' value='' />\n",
    "comments": "",
    "x": 1609,
    "y": 991.9999389648438,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "319b90ba.5fa548",
    "type": "save",
    "name": "get uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.uni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 1606,
    "y": 1036.9999389648438,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "be8d977b.6062b8",
        "2f61d10e.8f5e3e",
        "9e1188e1.cf8b3"
      ]
    ]
  },
  {
    "id": "2f61d10e.8f5e3e",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1801.490966796875,
    "y": 1010.5739135742188,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "771eefb0.aeb88"
      ]
    ]
  },
  {
    "id": "9e1188e1.cf8b3",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1797,
    "y": 1054.9998779296875,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "47c4b052.107038"
      ]
    ]
  },
  {
    "id": "771eefb0.aeb88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1964.0625,
    "y": 1009.859619140625,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "47c4b052.107038",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1965,
    "y": 1054.9998779296875,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "2be34ba3.ed43bc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1967,
    "y": 1101.9998779296875,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "be8d977b.6062b8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1798,
    "y": 1101.9998779296875,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "2be34ba3.ed43bc"
      ]
    ]
  },
  {
    "id": "41b34545.fd0234",
    "type": "comment",
    "name": "CLL new",
    "info": "construct two array structures like these:\n\n${otn-tunnels-name-list[${1}].otn-tunnel-name}\n\n----------------\n${ethernet-srv-end-points-list[${1}].ethernet-end-point-name}\n${ethernet-srv-end-points-list[${1}].index-number},\n${ethernet-srv-end-points-list[${1}].eth-node-id},\n${ethernet-srv-end-points-list[${1}].eth-node-tp-id},\n${ethernet-srv-end-points-list[${1}].leafOrRootAccess}\n${ethernet-srv-end-points-list[${1}].cvlan}\n${ethernet-srv-end-points-list[${1}].CIR}\n${ethernet-srv-end-points-list[${1}].EIR}",
    "comments": "",
    "x": 1580,
    "y": 1623,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "478f42b4.faa2d4",
    "type": "set",
    "name": "set ethernet-srv-end-points-list array",
    "xml": "<set>\n<!--<parameter name='`ethernet-srv-end-points-list[$epidx].ethernet-end-point-name`' value='`$tmp.aai.connectivity.connectivity-id`' />-->\n<parameter name='`ethernet-srv-end-points-list[$epidx].ethernet-end-point-name`' value='`$tmp.aai.uni.id`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].index-number`' value='0' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].eth-node-id`' value='`$tmp.uni-node-id-short`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].eth-node-tp-id`' value='`$tmp.aai.uni.tp-id`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].leafOrRootAccess`' value='`$leafOrRootAccess`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].cvlan`' value='`$tmp.aai.connectivity.cvlan`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].CIR`' value='`$tmp.aai.uni.data-source * 1000000`' />\n<parameter name='`ethernet-srv-end-points-list[$epidx].EIR`' value='`$tmp.aai.uni.data-source * 1000000`' />\n<!--<parameter name='`ethernet-srv-end-points-list[$epidx].service-instance-id-or-cll-id`' value='`$tmp.aai.service-instance.service-instance-id`' />-->\n<parameter name='`ethernet-srv-end-points-list[$epidx].service-instance-id-or-cll-id`' value='`$tmp.aai.uni.data-owner`' />\n\n<parameter name='`ethernet-srv-end-points-list_length`' value='`$epidx + 1`' />\n",
    "comments": "",
    "x": 1671,
    "y": 1677,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "651de255.0b2e64",
    "type": "set",
    "name": "unset ethernet-srv-end-points-list",
    "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
    "comments": "",
    "x": 2347.5,
    "y": 1090,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "d6d9ebdf.e9fb3",
    "type": "set",
    "name": "unset ethernet-srv-end-points-list",
    "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
    "comments": "",
    "x": 2352.5,
    "y": 1192,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "19b7b815.a2da88",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 836,
    "y": 1642,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "326b550a.9db58a"
      ]
    ]
  },
  {
    "id": "326b550a.9db58a",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1068,
    "y": 1641,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "ee715cec.70103"
      ]
    ]
  },
  {
    "id": "ee715cec.70103",
    "type": "outcome",
    "name": "vpn-binding",
    "xml": "<outcome value='vpn-binding'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1280,
    "y": 1642,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "43195eb9.e8bde"
      ]
    ]
  },
  {
    "id": "43195eb9.e8bde",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 536,
    "y": 1798,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "1e409cd.23bb4e3",
        "e0ab136c.d8395"
      ]
    ]
  },
  {
    "id": "e0ab136c.d8395",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
    "comments": "",
    "x": 771,
    "y": 1785,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "1e409cd.23bb4e3",
    "type": "save",
    "name": "get vpn-binding from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 761,
    "y": 1846,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "1385ba51.9ab07e",
        "5c95ef7e.18572",
        "b238e66d.1cae98"
      ]
    ]
  },
  {
    "id": "5c95ef7e.18572",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 974.490966796875,
    "y": 1830.5740356445312,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "a28f4f7.3d20fb"
      ]
    ]
  },
  {
    "id": "b238e66d.1cae98",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 970,
    "y": 1875,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "20e3dbdd.0ffc3c"
      ]
    ]
  },
  {
    "id": "1385ba51.9ab07e",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 972,
    "y": 1935,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "dcbbe04b.ec00a"
      ]
    ]
  },
  {
    "id": "a28f4f7.3d20fb",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1137.0625,
    "y": 1829.8597412109375,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "20e3dbdd.0ffc3c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1138,
    "y": 1875,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "dcbbe04b.ec00a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1141,
    "y": 1934,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "5f788739.44bc78",
        "7a2f8c3.df4e4f4"
      ]
    ]
  },
  {
    "id": "968f8b65.0f9e28",
    "type": "set",
    "name": "set sotn_value",
    "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivity.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivity.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivity.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivity.access-topology-id`' />\n<!--<parameter name='service-instance-id-or-cll-id' value='`$tmp.aai.service-instance.service-instance-id`' />-->\n<!--<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />-->\n<!--<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<!--<parameter name='index-number' value='0' />-->\n<!--<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />-->\n<!--<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />-->\n<!--<parameter name='CIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />-->\n<!--<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />-->\n",
    "comments": "",
    "x": 540,
    "y": 2433,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "d784554f.a0db1",
    "type": "execute",
    "name": "execute RestApiCallNode Create ethernet Service without token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-ethernet-service-loop-protection.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 683,
    "y": 2493,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "d0e8b7bc.b13c",
        "92d47971.6e56"
      ]
    ]
  },
  {
    "id": "d0e8b7bc.b13c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 995.5,
    "y": 2470,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "92d47971.6e56",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 999.5,
    "y": 2510,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "d5b32099.fe43f"
      ]
    ]
  },
  {
    "id": "1ff5a710.b4bb29",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
    "comments": "",
    "x": 1175.5,
    "y": 2474,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "d5b32099.fe43f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1191,
    "y": 2528,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "ca571afb.4a46e8",
        "1210758a.a607e2",
        "9f2557cf.e0f36",
        "c6235f90.04d29"
      ]
    ]
  },
  {
    "id": "7f59e1a7.53806",
    "type": "save",
    "name": "update vpn-binding resource (aka. OTN ) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 1486.5,
    "y": 2497,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "5a3937e0.a5f138",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "use proper vpn-binding id and connectivity id\n\nAlso, does CCSDK support \"update\" operation for vpn-binding and connectivity?",
    "comments": "",
    "x": 2953.5,
    "y": 1848,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "ca571afb.4a46e8",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 1448.5,
    "y": 2539,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "5eba1f1e.c5c1c",
    "type": "set",
    "name": "set leafOrRootAccess",
    "xml": "<set>\n<parameter name='`leafOrRootAccess`' value='ietf-eth-tran-types:leaf-access' />\n",
    "comments": "",
    "x": 2313.5,
    "y": 1128,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "14e15bd9.f573a4",
    "type": "set",
    "name": "set leafOrRootAccess",
    "xml": "<set>\n<parameter name='`leafOrRootAccess`' value='ietf-eth-tran-types:root-primary' />\n",
    "comments": "",
    "x": 2314.5,
    "y": 1232,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "46bfac70.a8d9fc",
    "type": "save",
    "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4608,
    "y": 489,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "baf6ec9f.d24be",
    "type": "save",
    "name": "update vpn-binding G resource (aka. OTN domainA) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingG.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingG.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingG.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4511,
    "y": 1308,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "bfef7878.c9996",
    "type": "save",
    "name": "update vpn-binding B resource (aka. OTN domainB) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingB.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingB.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingB.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4005,
    "y": 1980,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "b45da909.27452",
    "type": "switchNode",
    "name": "switch connectivity is not already Activated (i.e. is either Created or Modified)",
    "xml": "<switch test=\"`$tmp.aai.connectivity.operational-status != 'Activated' `\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1106,
    "y": 788,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "b0133784.5a4a",
        "99418662.5bc768"
      ]
    ]
  },
  {
    "id": "b0133784.5a4a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1469,
    "y": 811,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "288f63da.bd0d24"
      ]
    ]
  },
  {
    "id": "99418662.5bc768",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1469,
    "y": 760,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "e20160a5.497008"
      ]
    ]
  },
  {
    "id": "288f63da.bd0d24",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1625,
    "y": 809,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "45fa8d37.dd8774"
      ]
    ]
  },
  {
    "id": "e20160a5.497008",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1602,
    "y": 761,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "cefb7e41.dee868",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 2362,
    "y": 159,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "fc2523d9.c5b768",
    "type": "set",
    "name": "set root-otn-tunnels-list array",
    "xml": "<set>\n<parameter name='`roottunsidx`' value='`$roottunsidx + 1`' />\n",
    "comments": "",
    "x": 3904,
    "y": 2140,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "d22b47c.48051b8",
    "type": "set",
    "name": "set leaf-otn-tunnels-list array",
    "xml": "<set>\n<parameter name='`leaftunsidx`' value='`$leaftunsidx + 1`' />\n",
    "comments": "",
    "x": 4494,
    "y": 613,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "573af6c.7f50588",
    "type": "set",
    "name": "set ethernet-srv-end-points-list array",
    "xml": "<set>\n<parameter name='`epidx`' value='`$epidx + 1`' />\n",
    "comments": "",
    "x": 1668,
    "y": 1719,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "b8cd961f.31b1e",
    "type": "set",
    "name": "set filename",
    "xml": "<set>\n<parameter name='filenameclleths' value=\"`$leafOrRootAccess + $tmp.aai.connectivity.access-node-id`\" />",
    "comments": "",
    "x": 847,
    "y": 1453,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "e61f86e7.4b844",
    "type": "execute",
    "name": "execute printContext",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenameclleths`\" />\n",
    "comments": "",
    "outputs": 1,
    "x": 878,
    "y": 1493,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "5f788739.44bc78",
    "type": "set",
    "name": "set otn-tunnels-name-list array",
    "xml": "<set>\n<parameter name='`otn-tunnels-name-list[$otntunsidx].otn-tunnel-name`' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='`otn-tunnels-name-list[$otntunsidx].vpn-id`' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='`otn-tunnels-name-list_length`' value='`$otntunsidx + 1`' />\n",
    "comments": "",
    "x": 1426,
    "y": 1901,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "7a2f8c3.df4e4f4",
    "type": "set",
    "name": "set otn-tunnels-name-list array",
    "xml": "<set>\n<parameter name='`otntunsidx`' value='`$otntunsidx + 1`' />\n",
    "comments": "",
    "x": 1429,
    "y": 1943,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "faabf01d.19b578",
    "type": "set",
    "name": "unset otn-tunnels-name-list array",
    "xml": "<set>\n<parameter name='`otn-tunnels-name-list.`' value='' />\n<parameter name='`otn-tunnels-name-list_length`' value='0' />\n<parameter name='`otntunsidx`' value='0' />\n",
    "comments": "",
    "x": 872,
    "y": 1583,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "9608fe0d.afb518",
    "type": "set",
    "name": "set filename",
    "xml": "<set>\n<parameter name='filenamecllotns' value=\"`leafrootOTNtunnelnames`\" />",
    "comments": "",
    "x": 627,
    "y": 1962,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "a9b8ee61.6ebf68",
    "type": "execute",
    "name": "execute printContext",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenamecllotns`\" />\n",
    "comments": "",
    "outputs": 1,
    "x": 635,
    "y": 2019,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "1b5d7c99.3bb563",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.uni.id`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-uni\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1646,
    "y": 1568,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "7979c8cd.b373d",
        "23095b34.b6c794"
      ]
    ]
  },
  {
    "id": "23095b34.b6c794",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1869,
    "y": 1523,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "b9f88a30.b1b1"
      ]
    ]
  },
  {
    "id": "7979c8cd.b373d",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1871,
    "y": 1587,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "4c2d0979.5cdfa"
      ]
    ]
  },
  {
    "id": "b9f88a30.b1b1",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2034,
    "y": 1520,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "a93541e2.34e668"
      ]
    ]
  },
  {
    "id": "4c2d0979.5cdfa",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 2033,
    "y": 1583,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "a93541e2.34e668",
    "type": "set",
    "name": "set tmp.uni-node-id-short",
    "xml": "<set>\n<parameter name='tmp.uni-node-id-short' value='`$param-prefix-uni[$param-prefix-uni_length -4]`' />\n",
    "comments": "",
    "x": 2254,
    "y": 1534,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "2126128b.9ba956",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1799,
    "y": 2259,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "62735f15.7b8b4"
      ]
    ]
  },
  {
    "id": "47d236a4.c5327",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainConn.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainConn.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 2184,
    "y": 2272,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "fd91a13a.7b2ed",
        "dc7a52c4.792ff8",
        "81cf7ce4.5be808"
      ]
    ]
  },
  {
    "id": "62735f15.7b8b4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1978,
    "y": 2259,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "fb54c20.839104",
        "47d236a4.c5327"
      ]
    ]
  },
  {
    "id": "fb54c20.839104",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainConn id",
    "xml": "<set>\n<parameter name='tmp.domainConn.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 2214,
    "y": 2220,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "fd91a13a.7b2ed",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2394,
    "y": 2263,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "66b9462d.a94c6"
      ]
    ]
  },
  {
    "id": "dc7a52c4.792ff8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2386,
    "y": 2318,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "4ff23f6c.d7f718"
      ]
    ]
  },
  {
    "id": "81cf7ce4.5be808",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2391,
    "y": 2375,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "45252a0c.1579ec"
      ]
    ]
  },
  {
    "id": "45252a0c.1579ec",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 2543,
    "y": 2376,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "4ff23f6c.d7f718",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 2554,
    "y": 2321,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "66b9462d.a94c6",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2538.38232421875,
    "y": 2260.6556701660156,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "d426c7f3.a4f758"
      ]
    ]
  },
  {
    "id": "d426c7f3.a4f758",
    "type": "set",
    "name": "set controller domainConn data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.url' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.user' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainConn.password' value=\"`$tmp.aai.domainConn.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 2753,
    "y": 2257,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "9097bb51.35f598",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.pnf-name-forUrl\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 877,
    "y": 2305,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "c5c9c64c.e5b6a",
        "fbc95d65.751dd8",
        "a12f5414.7f7f38"
      ]
    ]
  },
  {
    "id": "c5c9c64c.e5b6a",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1072.5001220703125,
    "y": 2257,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "cd1789e.857e878"
      ]
    ]
  },
  {
    "id": "fbc95d65.751dd8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1064.5001220703125,
    "y": 2312,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "641a2f60.3e56f"
      ]
    ]
  },
  {
    "id": "cd1789e.857e878",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1216.8824462890625,
    "y": 2256.6556701660156,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "40024900.22ab5"
      ]
    ]
  },
  {
    "id": "40024900.22ab5",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1401,
    "y": 2255,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "61575a21.5f4624"
      ]
    ]
  },
  {
    "id": "61575a21.5f4624",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1596,
    "y": 2255,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "2126128b.9ba956"
      ]
    ]
  },
  {
    "id": "a12f5414.7f7f38",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1069.5001220703125,
    "y": 2369,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "73357d18.309cec"
      ]
    ]
  },
  {
    "id": "73357d18.309cec",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 1221.5001220703125,
    "y": 2370,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "641a2f60.3e56f",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 1232.5001220703125,
    "y": 2313,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "1f9570cc.1dec3f",
    "type": "set",
    "name": "set tmp.pnf-name-forUrl",
    "xml": "<set>\n\n<parameter name='tmp.pnf-name-forUrl' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.connectivity.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.connectivity.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.connectivity.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.connectivity.access-node-id`\" />\n",
    "comments": "",
    "x": 867,
    "y": 2217,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "8c27b84f.305088",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 612,
    "y": 2348,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "1f9570cc.1dec3f",
        "9097bb51.35f598"
      ]
    ]
  },
  {
    "id": "518c62b.9bc109c",
    "type": "comment",
    "name": "Temporary skipping this check - to support multiple instances in one slice",
    "info": "",
    "comments": "",
    "x": 1826.9666748046875,
    "y": 165.88333129882812,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "630bfd04.7da00c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1029,
    "y": 388,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "87edee65.85ae28",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 588.5,
    "y": 1357,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "58a3e896.b9ca7",
        "19b7b815.a2da88",
        "b8cd961f.31b1e",
        "e61f86e7.4b844",
        "968f8b65.0f9e28",
        "d784554f.a0db1",
        "faabf01d.19b578",
        "9608fe0d.afb518",
        "a9b8ee61.6ebf68",
        "8c27b84f.305088",
        "d6d125c6.7c1ef"
      ]
    ]
  },
  {
    "id": "a7cc4e14.f32b08",
    "type": "switchNode",
    "name": "switch uni type",
    "xml": "<switch test=\"`$tmp.aai.uni.type`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1619,
    "y": 1195,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "b16fe4e0.6f4fa8",
        "2186f280.8edb0e",
        "ddeb0896.cc0458",
        "c02b45cf.aa9298"
      ]
    ]
  },
  {
    "id": "b16fe4e0.6f4fa8",
    "type": "outcome",
    "name": "leaf",
    "xml": "<outcome value='leaf'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1784,
    "y": 1177,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "58f42d60.f5c1ac"
      ]
    ]
  },
  {
    "id": "2186f280.8edb0e",
    "type": "outcome",
    "name": "root",
    "xml": "<outcome value='root'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1787,
    "y": 1216,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "2233c963.7160de"
      ]
    ]
  },
  {
    "id": "c02b45cf.aa9298",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1781,
    "y": 1294,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "7ed44e10.cd8f4"
      ]
    ]
  },
  {
    "id": "ddeb0896.cc0458",
    "type": "outcome",
    "name": "secondary-root",
    "xml": "<outcome value='secondary-root'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1804,
    "y": 1257,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "17bdedbb.6d9ba2"
      ]
    ]
  },
  {
    "id": "35f2d4d7.ba6b9c",
    "type": "set",
    "name": "unset ethernet-srv-end-points-list",
    "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
    "comments": "",
    "x": 2350,
    "y": 1290,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "1bdb940e.a70dfc",
    "type": "set",
    "name": "set leafOrRootAccess",
    "xml": "<set>\n<parameter name='`leafOrRootAccess`' value='ietf-eth-tran-types:root-backup' />\n",
    "comments": "",
    "x": 2312,
    "y": 1330,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "7ed44e10.cd8f4",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1949,
    "y": 1294,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "58f42d60.f5c1ac",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1945,
    "y": 1173,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "5eba1f1e.c5c1c"
      ]
    ]
  },
  {
    "id": "2233c963.7160de",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1952,
    "y": 1218,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "14e15bd9.f573a4"
      ]
    ]
  },
  {
    "id": "17bdedbb.6d9ba2",
    "type": "block",
    "name": "block",
    "xml": "<block>",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1951,
    "y": 1258,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "1bdb940e.a70dfc"
      ]
    ]
  },
  {
    "id": "45fa8d37.dd8774",
    "type": "switchNode",
    "name": "switch conn type != mdsc",
    "xml": "<switch test=\"`$tmp.aai.connectivity.vpn-type != 'mdsc' `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 585.5666656494141,
    "y": 1117.933349609375,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "4985dcd9.148044"
      ]
    ]
  },
  {
    "id": "4985dcd9.148044",
    "type": "outcome",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 767.566650390625,
    "y": 1118.933349609375,
    "z": "fbffbb46.f6ea5",
    "wires": [
      [
        "87edee65.85ae28"
      ]
    ]
  },
  {
    "id": "d6d125c6.7c1ef",
    "type": "set",
    "name": "unset ethernet-srv-end-points-list",
    "xml": "<set>\n<parameter name='`ethernet-srv-end-points-list.`' value='' />\n<parameter name='`ethernet-srv-end-points-list_length`' value='0' />\n<parameter name='`epidx`' value='0' />",
    "comments": "",
    "x": 903.566650390625,
    "y": 1295.9666748046875,
    "z": "fbffbb46.f6ea5",
    "wires": []
  },
  {
    "id": "1210758a.a607e2",
    "type": "execute",
    "name": "execute RestApiCallNode Create Performance Monitoring Data",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-create-pm-data.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/data'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1529.0000610351562,
    "y": 2637.3334884643555,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "9f2557cf.e0f36",
    "type": "execute",
    "name": "execute RestconfDiscoveryNode establishSubscription",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='establishSubscriptionOnly' >\n<parameter name=\"subscriberId\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url`\" />\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-subscribe-notification.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/operations/ietf-subscribed-notifications:establish-subscription'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<!--<parameter name=\"deviceIp\" value=\"192.168.198.6\" />-->\n<!--<parameter name=\"devicePort\" value=\"18181\" />-->\n<parameter name=\"sseConnectURL\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/streams/yang-push-json'`\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"post\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"X-ACCESS-TOKEN=x-ik2ps4ikvzupbx0486ft1ebzs7rt85futh9ho6eofy3wjsap7wqktemlqm4bbsmnar3vrtbyrzukbv5itd6m1cftldpjarnyle3sdcqq9hftc4lebz464b5ffxmlbvg9\" />\n<parameter name=\"module\" value=\"GENERIC-RESOURCE-API\" />\n<parameter name=\"rpc\" value=\"cll-vnf-topology-operation-cll-callbackdg-notification\" />\n<parameter name=\"version\" value=\"`$project.version`\" />\n<parameter name=\"mode\" value=\"sync\" />\n<parameter name=\"responsePrefix\" value=\"restapi-result\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1497.0000610351562,
    "y": 2709.333366394043,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  },
  {
    "id": "c6235f90.04d29",
    "type": "execute",
    "name": "execute RestconfDiscoveryNode establishPersistentConnection",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='establishPersistentSseConnection' >\n<parameter name=\"subscriberId\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url`\" />\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-subscribe-notification.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/operations/ietf-subscribed-notifications:establish-subscription'`\" />\n<parameter name=\"sseConnectURL\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.url + '/restconf/streams/yang-push-json'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"get\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"X-ACCESS-TOKEN=x-ik2ps4ikvzupbx0486ft1ebzs7rt85futh9ho6eofy3wjsap7wqktemlqm4bbsmnar3vrtbyrzukbv5itd6m1cftldpjarnyle3sdcqq9hftc4lebz464b5ffxmlbvg9\" />\n<parameter name=\"module\" value=\"GENERIC-RESOURCE-API\" />\n<parameter name=\"rpc\" value=\"cll-vnf-topology-operation-cll-callbackdg-notification\" />\n<parameter name=\"version\" value=\"`$project.version`\" />\n<parameter name=\"mode\" value=\"sync\" />\n<parameter name=\"responsePrefix\" value=\"notification-get-result\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1527.0000610351562,
    "y": 2771.333366394043,
    "z": "fbffbb46.f6ea5",
    "wires": [
      []
    ]
  }
]