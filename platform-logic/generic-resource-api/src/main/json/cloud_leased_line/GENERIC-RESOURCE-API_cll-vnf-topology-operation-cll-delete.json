[
    {
        "id": "d6c73c0b.0d5f48",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 157.88330078125,
        "y": 156.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d49f5b5f.8b9338"
            ]
        ]
    },
    {
        "id": "d49f5b5f.8b9338",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 456.1690216064453,
        "y": 212.52387523651123,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "3720330.25593ce"
            ]
        ]
    },
    {
        "id": "3720330.25593ce",
        "type": "method",
        "name": "method cll-vnf-topology-operation-cll-delete",
        "xml": "<method rpc='cll-vnf-topology-operation-cll-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 462.3119354248047,
        "y": 297.2857971191406,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "7f694928.267bb8"
            ]
        ]
    },
    {
        "id": "7f694928.267bb8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 811.8833312988281,
        "y": 356.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "14360151.1c2e2f",
                "2b05d42f.ff48b4",
                "b833ca08.643e2"
            ]
        ]
    },
    {
        "id": "14360151.1c2e2f",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1113.2168273925781,
        "y": 627.216064453125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "2b05d42f.ff48b4",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1134.6452941894531,
        "y": 329.61907958984375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "41fb5683.e713a",
                "80e71c24.60d2d",
                "fe4111b5.f2228"
            ]
        ]
    },
    {
        "id": "41fb5683.e713a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1359.6452941894531,
        "y": 187.61907958984375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "41abc238.ea1884"
            ]
        ]
    },
    {
        "id": "80e71c24.60d2d",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1355.1362609863281,
        "y": 257.193115234375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "844c0ad5.c095b"
            ]
        ]
    },
    {
        "id": "fe4111b5.f2228",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1343.6452941894531,
        "y": 303.61907958984375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1e9cd9f4.55835e"
            ]
        ]
    },
    {
        "id": "692bc437.51a034",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1113.6452941894531,
        "y": 217.61907958984375,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "b833ca08.643e2",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1101.6452941894531,
        "y": 269.61907958984375,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "41abc238.ea1884",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1599.8833312988281,
        "y": 184.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "edbcfce1.4d552",
                "d741e3bd.0b6788"
            ]
        ]
    },
    {
        "id": "844c0ad5.c095b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1509.9457092285156,
        "y": 260.1455383300781,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1e9cd9f4.55835e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1513.8833312988281,
        "y": 304.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "edbcfce1.4d552",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1804.8833312988281,
        "y": 221.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "589ae77f.807888"
            ]
        ]
    },
    {
        "id": "d741e3bd.0b6788",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1814.8833312988281,
        "y": 148.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "589ae77f.807888",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1797.8833312988281,
        "y": 296.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "10bd96f7.8fa059",
                "cb92da4c.da1bb",
                "cbe49015.ae0dd",
                "6c495f2.f763aa",
                "4304e2aa.cc073c"
            ]
        ]
    },
    {
        "id": "5f06cb70.adae8c",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2283.883331298828,
        "y": 347.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c68fbf4e.5d82c",
                "2146d17e.d0a56e",
                "f04a7ec7.eb68d"
            ]
        ]
    },
    {
        "id": "c68fbf4e.5d82c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2499.883331298828,
        "y": 414.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "cbd25b41.5a644"
            ]
        ]
    },
    {
        "id": "2146d17e.d0a56e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2500.374298095703,
        "y": 313.8597412109375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d020f647.b48948"
            ]
        ]
    },
    {
        "id": "f04a7ec7.eb68d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2495.883331298828,
        "y": 363.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "bf60182e.46d6e"
            ]
        ]
    },
    {
        "id": "10bd96f7.8fa059",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2000.8833312988281,
        "y": 328.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9d7e7b42.ef2a18",
                "5f06cb70.adae8c",
                "b4f5dada.48378",
                "5db562b1.71111c"
            ]
        ]
    },
    {
        "id": "9d7e7b42.ef2a18",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2280.883331298828,
        "y": 266.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "6c495f2.f763aa",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
        "comments": "",
        "x": 1974.8833312988281,
        "y": 278.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "cb92da4c.da1bb",
        "type": "get-resource",
        "name": "get-resource pnfs-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/pnfs?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
        "comments": "",
        "outputs": 1,
        "x": 2017.8833312988281,
        "y": 137.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "cbe49015.ae0dd",
        "type": "get-resource",
        "name": "get-resource logical-links",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
        "comments": "",
        "outputs": 1,
        "x": 2029.8833312988281,
        "y": 178.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "f6d3e50c.b329e8",
        "type": "comment",
        "name": "The following two nodes are for PCE",
        "info": "",
        "comments": "",
        "x": 2054.883331298828,
        "y": 90.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "300ce0be.29882",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
        "comments": "",
        "x": 1974.8833312988281,
        "y": 224.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "d020f647.b48948",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2678.883331298828,
        "y": 316.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "bf60182e.46d6e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2678.820831298828,
        "y": 365.426025390625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "cbd25b41.5a644",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2680.820831298828,
        "y": 416.426025390625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "365e9f97.d4a028"
            ]
        ]
    },
    {
        "id": "365e9f97.d4a028",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2973.820831298828,
        "y": 363.426025390625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6e92372c.3a07f8",
                "c96fb012.9bb888",
                "95b7cbb5.ac06c8"
            ]
        ]
    },
    {
        "id": "c96fb012.9bb888",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3277.311767578125,
        "y": 20,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "58ab1443.358994"
            ]
        ]
    },
    {
        "id": "58ab1443.358994",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3454.88330078125,
        "y": 20.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "95b7cbb5.ac06c8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3272.82080078125,
        "y": 69.426025390625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1f97dde6.30f20a"
            ]
        ]
    },
    {
        "id": "1f97dde6.30f20a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3454.82080078125,
        "y": 69.426025390625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "6e92372c.3a07f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3276.82080078125,
        "y": 120.426025390625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "7a25dc67.63046c"
            ]
        ]
    },
    {
        "id": "7a25dc67.63046c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3456.82080078125,
        "y": 120.426025390625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "742cdaa9.4808c4"
            ]
        ]
    },
    {
        "id": "742cdaa9.4808c4",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2992.883331298828,
        "y": 491.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9afa3e4f.f2f2c8",
                "ce58b166.b2448"
            ]
        ]
    },
    {
        "id": "ce58b166.b2448",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3332.88330078125,
        "y": 262.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "9afa3e4f.f2f2c8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3331.88330078125,
        "y": 316.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "aba0f7b5.b64ec8"
            ]
        ]
    },
    {
        "id": "50f7604e.0c4dc8",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4076.88330078125,
        "y": 270.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e079a6c2.9c941"
            ]
        ]
    },
    {
        "id": "e079a6c2.9c941",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4253.8831787109375,
        "y": 263.28564453125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "83280d27.4bae7",
                "92c6fb1f.05a328"
            ]
        ]
    },
    {
        "id": "aba0f7b5.b64ec8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3495.88330078125,
        "y": 242.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a8c08369.0aef78",
                "98755b5f.40e4a"
            ]
        ]
    },
    {
        "id": "a8c08369.0aef78",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3776.88330078125,
        "y": 198.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "64ebbb1e.14821c"
            ]
        ]
    },
    {
        "id": "64ebbb1e.14821c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4038.88330078125,
        "y": 198.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "50f7604e.0c4dc8"
            ]
        ]
    },
    {
        "id": "83280d27.4bae7",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 4496.8831787109375,
        "y": 220.28564453125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "92c6fb1f.05a328",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 4485.8831787109375,
        "y": 275.28564453125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "26a63936.d2dcb6",
                "935c2a76.01522",
                "61809f6c.f102a"
            ]
        ]
    },
    {
        "id": "61809f6c.f102a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4738.88330078125,
        "y": 161.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "8483d549.4ff1d8"
            ]
        ]
    },
    {
        "id": "8483d549.4ff1d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4887.454833984375,
        "y": 161.571533203125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "79f73429.37a0f4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4886.392333984375,
        "y": 205.7117919921875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "935c2a76.01522",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4727.392333984375,
        "y": 205.7117919921875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "79f73429.37a0f4"
            ]
        ]
    },
    {
        "id": "26a63936.d2dcb6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4734.392333984375,
        "y": 284.7117919921875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "4efa868e.4aaf8"
            ]
        ]
    },
    {
        "id": "4efa868e.4aaf8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4873.392333984375,
        "y": 284.7117919921875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ac693539.f50e98",
                "9a31854c.efaef8"
            ]
        ]
    },
    {
        "id": "ac693539.f50e98",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 5078.88330078125,
        "y": 282.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "9a31854c.efaef8",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 5077.88330078125,
        "y": 328.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "98755b5f.40e4a",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3593.88330078125,
        "y": 314.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a599949c.47c2"
            ]
        ]
    },
    {
        "id": "a599949c.47c2",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3873.88330078125,
        "y": 314.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9f30fb79.9864f8"
            ]
        ]
    },
    {
        "id": "9f30fb79.9864f8",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2256.8834533691406,
        "y": 803.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "4497a7be.db159"
            ]
        ]
    },
    {
        "id": "4497a7be.db159",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2433.883331298828,
        "y": 796.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "748da704.3dc228",
                "132fdd9a.6a584a"
            ]
        ]
    },
    {
        "id": "748da704.3dc228",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 2676.883331298828,
        "y": 753.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "132fdd9a.6a584a",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 2665.883331298828,
        "y": 808.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1d5c52ad.8a4fcd",
                "c6fd8eb5.369a58",
                "b0ba9e98.5ef29"
            ]
        ]
    },
    {
        "id": "1d5c52ad.8a4fcd",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2957.374298095703,
        "y": 786.8597412109375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "81786826.f1adc"
            ]
        ]
    },
    {
        "id": "c6fd8eb5.369a58",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2945.883331298828,
        "y": 831.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "568abbfd.c78f14"
            ]
        ]
    },
    {
        "id": "81786826.f1adc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3105.945831298828,
        "y": 787.1455078125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "568abbfd.c78f14",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3104.883331298828,
        "y": 831.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "b0ba9e98.5ef29",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2952.883331298828,
        "y": 910.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "56d4032d.446f0c"
            ]
        ]
    },
    {
        "id": "56d4032d.446f0c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3091.883331298828,
        "y": 910.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a588efb1.b17fd",
                "9c7e31dc.43bc2",
                "64cc49aa.338118",
                "a266d487.c02dd",
                "f1099f4d.7efe5",
                "6aa3951e.157a4c",
                "4618e1c0.461d88",
                "d38e0865.514348",
                "eef6ad07.9c7d5",
                "78d4922e.8ebe04",
                "c220ecdf.76a978",
                "940f9aa.5464fe8",
                "14f1d608.fff342",
                "5e5dd175.2ee1b",
                "95f11825.f517d8",
                "79dba259.2612cc",
                "11c024cf.1cb7db",
                "8bfce836.dcd148",
                "ec6aad53.7d628",
                "c02bc34.16c814",
                "ad2e0fde.b44de8",
                "d87e7a94.9bda08"
            ]
        ]
    },
    {
        "id": "6986f9e3.b25bc8",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3435.883270263672,
        "y": 384.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "a588efb1.b17fd",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3416.883270263672,
        "y": 484.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "940f9aa.5464fe8",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 3370.883270263672,
        "y": 535.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "9c7e31dc.43bc2",
        "type": "set",
        "name": "set network-route-one",
        "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
        "comments": "",
        "x": 3344.883270263672,
        "y": 584.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "64cc49aa.338118",
        "type": "set",
        "name": "set network-route-two",
        "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 3343.883270263672,
        "y": 633.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "a266d487.c02dd",
        "type": "save",
        "name": "get network-route-one from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
        "comments": "",
        "outputs": 1,
        "x": 3352.883270263672,
        "y": 771.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1276721a.95abce",
                "59c480c0.a5bb2",
                "56433b78.3dde04"
            ]
        ]
    },
    {
        "id": "f1099f4d.7efe5",
        "type": "save",
        "name": "get network-route-two from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
        "comments": "",
        "outputs": 1,
        "x": 3345.883270263672,
        "y": 832.28564453125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "194bfca3.59d3d3",
                "f16b27ad.e4a0d",
                "a3a5e961.07f0a"
            ]
        ]
    },
    {
        "id": "1276721a.95abce",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3601.883026123047,
        "y": 666.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5d3d475c.e8e038"
            ]
        ]
    },
    {
        "id": "59c480c0.a5bb2",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3595.392059326172,
        "y": 707.7117919921875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c3e2bb46.01e6a"
            ]
        ]
    },
    {
        "id": "56433b78.3dde04",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3590.392059326172,
        "y": 757.7117919921875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1b66d741.6f4631"
            ]
        ]
    },
    {
        "id": "5d3d475c.e8e038",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3750.454559326172,
        "y": 665.571533203125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "c3e2bb46.01e6a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3740.392059326172,
        "y": 715.7117919921875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "194bfca3.59d3d3",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3566.883270263672,
        "y": 818.28564453125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "8a4c46dd.2c996"
            ]
        ]
    },
    {
        "id": "f16b27ad.e4a0d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3562.392303466797,
        "y": 867.711669921875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "171f1743.fcb899"
            ]
        ]
    },
    {
        "id": "a3a5e961.07f0a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3563.392303466797,
        "y": 920.711669921875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c731b8e7.238d38"
            ]
        ]
    },
    {
        "id": "8a4c46dd.2c996",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3719.4546508789062,
        "y": 823.5714111328125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "171f1743.fcb899",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3705.392303466797,
        "y": 867.711669921875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1b66d741.6f4631",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3762.883026123047,
        "y": 768.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "cecd018.605a88"
            ]
        ]
    },
    {
        "id": "c731b8e7.238d38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3716.883270263672,
        "y": 920.28564453125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f9f52da3.b95878"
            ]
        ]
    },
    {
        "id": "cecd018.605a88",
        "type": "switchNode",
        "name": "switch nr type",
        "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3923.883270263672,
        "y": 655.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f0539c95.2ea1d",
                "44b1b904.08834",
                "41d8ce05.5caae"
            ]
        ]
    },
    {
        "id": "f9f52da3.b95878",
        "type": "switchNode",
        "name": "switch nr type",
        "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3915.883270263672,
        "y": 840.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "abd0f375.c30ff",
                "eba9832a.ffee4",
                "4bc67983.47c6f"
            ]
        ]
    },
    {
        "id": "f0539c95.2ea1d",
        "type": "outcome",
        "name": "ROOT",
        "xml": "<outcome value='ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4147.883758544922,
        "y": 359.28570556640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "653aef18.035f68"
            ]
        ]
    },
    {
        "id": "44b1b904.08834",
        "type": "outcome",
        "name": "LEAF",
        "xml": "<outcome value='LEAF'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4149.883758544922,
        "y": 413.28570556640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "4456e14a.c61538"
            ]
        ]
    },
    {
        "id": "abd0f375.c30ff",
        "type": "outcome",
        "name": "ROOT",
        "xml": "<outcome value='ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4113.883758544922,
        "y": 619.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "dc25cb2f.e0da48"
            ]
        ]
    },
    {
        "id": "eba9832a.ffee4",
        "type": "outcome",
        "name": "LEAF",
        "xml": "<outcome value='LEAF'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4115.883758544922,
        "y": 673.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "7b200b08.d1724c"
            ]
        ]
    },
    {
        "id": "a11ab8.c3c2f548",
        "type": "set",
        "name": "set network-route-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4457.883758544922,
        "y": 311.28570556640625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "7e53eaf1.53c434",
        "type": "set",
        "name": "set network-route-LEAF",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4450.883758544922,
        "y": 409.28570556640625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "231b0ffb.372688",
        "type": "set",
        "name": "set network-route-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4429.883758544922,
        "y": 592.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1b4ef1ae.221bae",
        "type": "set",
        "name": "set network-route-LEAF",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4433.883758544922,
        "y": 685.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "f61c43e6.4dbe28",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3609.88330078125,
        "y": 1345.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "58e01c76.2a233c"
            ]
        ]
    },
    {
        "id": "f239d755.e3888",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3619.374267578125,
        "y": 1387.8598022460938,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ffe24b12.95af4"
            ]
        ]
    },
    {
        "id": "7fecb9.d188bb48",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3607.88330078125,
        "y": 1434.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6af9609c.4c1ea"
            ]
        ]
    },
    {
        "id": "6132f0e6.1cd1a8",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3309.88330078125,
        "y": 1307.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "4618e1c0.461d88",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3352.88330078125,
        "y": 1372.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f61c43e6.4dbe28",
                "f239d755.e3888",
                "7fecb9.d188bb48"
            ]
        ]
    },
    {
        "id": "6aa3951e.157a4c",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3353.883270263672,
        "y": 1124.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "273ca4a1.1ba064",
                "4a30eba.076bb14"
            ]
        ]
    },
    {
        "id": "4a30eba.076bb14",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3576.883270263672,
        "y": 1110.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "3b0c1a6c.5d807e"
            ]
        ]
    },
    {
        "id": "273ca4a1.1ba064",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3578.883270263672,
        "y": 1143.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1277d9f.69171a6"
            ]
        ]
    },
    {
        "id": "58e01c76.2a233c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3782.5498046875,
        "y": 1344.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f718a065.a6f86",
                "66055190.fb6538"
            ]
        ]
    },
    {
        "id": "ffe24b12.95af4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3772.9456787109375,
        "y": 1391.1455383300781,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "6af9609c.4c1ea",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3776.88330078125,
        "y": 1435.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "f718a065.a6f86",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4046.88330078125,
        "y": 1328.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "97c35025.9a9a9",
                "3a478d5e.f8179a"
            ]
        ]
    },
    {
        "id": "3a478d5e.f8179a",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4269.88330078125,
        "y": 1283.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e66b8dbe.739f2"
            ]
        ]
    },
    {
        "id": "97c35025.9a9a9",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4271.88330078125,
        "y": 1347.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "8b5a4d36.3a2bb8"
            ]
        ]
    },
    {
        "id": "8b5a4d36.3a2bb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4433.88330078125,
        "y": 1343.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e66b8dbe.739f2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4434.88330078125,
        "y": 1280.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9ab6076f.b64fb",
                "39801818.ba2ad"
            ]
        ]
    },
    {
        "id": "1277d9f.69171a6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3721.883270263672,
        "y": 1140.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "3b0c1a6c.5d807e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3724.883270263672,
        "y": 1103.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "67f68b93.dc06f4",
                "41f439c7.6c07f8"
            ]
        ]
    },
    {
        "id": "67f68b93.dc06f4",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3916.883270263672,
        "y": 1105.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "66055190.fb6538",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4006.88330078125,
        "y": 1460.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c328fdc0.a05af"
            ]
        ]
    },
    {
        "id": "c328fdc0.a05af",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4212.88330078125,
        "y": 1460.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "23ec2727.c8e7f"
            ]
        ]
    },
    {
        "id": "23ec2727.c8e7f",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4428.1689453125,
        "y": 1460.1075439453125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e1b77e00.282c4"
            ]
        ]
    },
    {
        "id": "41f439c7.6c07f8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3913.883270263672,
        "y": 1170.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "89a8d2d0.88f3",
                "6334a351.696854",
                "c542e0e0.bf42b"
            ]
        ]
    },
    {
        "id": "89a8d2d0.88f3",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4109.383392333984,
        "y": 1122.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c62cbf2d.6fa458"
            ]
        ]
    },
    {
        "id": "6334a351.696854",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4101.383392333984,
        "y": 1177.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "143c4bf3.014b4c"
            ]
        ]
    },
    {
        "id": "c542e0e0.bf42b",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4106.383392333984,
        "y": 1234.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ca788cf9.3c8038"
            ]
        ]
    },
    {
        "id": "ca788cf9.3c8038",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4258.383392333984,
        "y": 1235.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "143c4bf3.014b4c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4269.383392333984,
        "y": 1180.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "c62cbf2d.6fa458",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4253.765716552734,
        "y": 1119.9414367675781,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "aab3feab.bcb5b"
            ]
        ]
    },
    {
        "id": "aab3feab.bcb5b",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4447.883270263672,
        "y": 1164.2857055664062,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ac9dba33.9ee3a8"
            ]
        ]
    },
    {
        "id": "39801818.ba2ad",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 4604.88330078125,
        "y": 1238.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "9ab6076f.b64fb",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 4605.88330078125,
        "y": 1346.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "6381354a.11146c",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4606.88330078125,
        "y": 1295.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e1b77e00.282c4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4635.00048828125,
        "y": 1460.6260986328125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a1ad6a91.cdad1",
                "bef51671.772a1",
                "55e08f7a.b87978"
            ]
        ]
    },
    {
        "id": "a1ad6a91.cdad1",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4850.00048828125,
        "y": 1422.6260986328125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "bef51671.772a1",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4847.00048828125,
        "y": 1461.6260986328125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "db81e8e0.68e13"
            ]
        ]
    },
    {
        "id": "55e08f7a.b87978",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4802.50048828125,
        "y": 1503.6260986328125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "db81e8e0.68e13",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5027.50048828125,
        "y": 1460.6260986328125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "52661a57.fe0a3c"
            ]
        ]
    },
    {
        "id": "409a042d.2fadac",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4835.88330078125,
        "y": 1056.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f76f51b8.a98b3"
            ]
        ]
    },
    {
        "id": "f76f51b8.a98b3",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5012.88330078125,
        "y": 1048.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f1cd5bd3.ddbdb8",
                "b8b89faf.7ac19"
            ]
        ]
    },
    {
        "id": "ac9dba33.9ee3a8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4638.883270263672,
        "y": 1154.2857055664062,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "409a042d.2fadac",
                "80f5aaec.b0ffc8"
            ]
        ]
    },
    {
        "id": "80f5aaec.b0ffc8",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4838.88330078125,
        "y": 1130.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "bf72647d.49f538"
            ]
        ]
    },
    {
        "id": "bf72647d.49f538",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5015.88330078125,
        "y": 1122.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "97239b14.6f12c8"
            ]
        ]
    },
    {
        "id": "52661a57.fe0a3c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5185.50048828125,
        "y": 1460.6260986328125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5700a19e.1dbeb8"
            ]
        ]
    },
    {
        "id": "5700a19e.1dbeb8",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5392.50048828125,
        "y": 1460.6260986328125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "b8b89faf.7ac19",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5220.88330078125,
        "y": 1055.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5d74c4c9.fd207c",
                "bdb7d238.f96a08",
                "7cf71a83.19030c"
            ]
        ]
    },
    {
        "id": "f1cd5bd3.ddbdb8",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5250.88330078125,
        "y": 1003.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "5d74c4c9.fd207c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5430.88330078125,
        "y": 1046.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e430f4b5.90b5d"
            ]
        ]
    },
    {
        "id": "bdb7d238.f96a08",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5422.88330078125,
        "y": 1101.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "46b0e213.0f69d4"
            ]
        ]
    },
    {
        "id": "7cf71a83.19030c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5427.88330078125,
        "y": 1158.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "99bfc958.cc2928"
            ]
        ]
    },
    {
        "id": "99bfc958.cc2928",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5579.88330078125,
        "y": 1159.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "46b0e213.0f69d4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5590.88330078125,
        "y": 1104.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e430f4b5.90b5d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5575.265625,
        "y": 1043.9414367675781,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "3d0751e6.cf382e"
            ]
        ]
    },
    {
        "id": "97239b14.6f12c8",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5250.88330078125,
        "y": 1246.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "3d0751e6.cf382e",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5789.88330078125,
        "y": 1040.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "33b11d1b.98a69a",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4445.883758544922,
        "y": 347.28570556640625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "2dc9cffb.3878b8",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4446.883728027344,
        "y": 451.28570556640625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "653aef18.035f68",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4270.883758544922,
        "y": 353.28570556640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a11ab8.c3c2f548",
                "33b11d1b.98a69a"
            ]
        ]
    },
    {
        "id": "4456e14a.c61538",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4276.883758544922,
        "y": 417.28570556640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "7e53eaf1.53c434",
                "2dc9cffb.3878b8"
            ]
        ]
    },
    {
        "id": "dc25cb2f.e0da48",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4241.883758544922,
        "y": 619.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "231b0ffb.372688",
                "3979d153.538ee6"
            ]
        ]
    },
    {
        "id": "7b200b08.d1724c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4244.883758544922,
        "y": 672.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1b4ef1ae.221bae",
                "49dc9fac.676fe"
            ]
        ]
    },
    {
        "id": "3979d153.538ee6",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4415.883758544922,
        "y": 632.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "49dc9fac.676fe",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4418.883758544922,
        "y": 723.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "f7cb7391.6f67a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3741.88330078125,
        "y": 1802.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9a5ca37c.910178",
                "2a8d98c8.2c78a"
            ]
        ]
    },
    {
        "id": "fd44019f.688f6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3569.216796875,
        "y": 1803.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f7cb7391.6f67a"
            ]
        ]
    },
    {
        "id": "3eb019bb.1ee706",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3578.707763671875,
        "y": 1845.8599243164062,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f4d10bee.1b32c"
            ]
        ]
    },
    {
        "id": "ef74e13b.116b3",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3567.216796875,
        "y": 1892.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "7a977b6c.124a74"
            ]
        ]
    },
    {
        "id": "f4d10bee.1b32c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3732.2791748046875,
        "y": 1849.1456604003906,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "7a977b6c.124a74",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3736.216796875,
        "y": 1893.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "9a5ca37c.910178",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4028.216796875,
        "y": 1806.2860107421875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "efd0a9b7.e547a8",
                "caaf5e66.b1cb"
            ]
        ]
    },
    {
        "id": "caaf5e66.b1cb",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4251.216796875,
        "y": 1761.2860107421875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5ec876cd.f1dea8"
            ]
        ]
    },
    {
        "id": "efd0a9b7.e547a8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4253.216796875,
        "y": 1825.2860107421875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "72d34df6.13ce64"
            ]
        ]
    },
    {
        "id": "72d34df6.13ce64",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4412.216796875,
        "y": 1844.2860107421875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "5ec876cd.f1dea8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4416.216796875,
        "y": 1758.2860107421875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2854b6e2.b50402",
                "1fbd987b.e2c578"
            ]
        ]
    },
    {
        "id": "eef6ad07.9c7d5",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3341.216796875,
        "y": 1838.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "fd44019f.688f6",
                "3eb019bb.1ee706",
                "ef74e13b.116b3"
            ]
        ]
    },
    {
        "id": "46101f8f.1fb8b8",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3302.216796875,
        "y": 1782.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "d38e0865.514348",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3353.216796875,
        "y": 1577.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f536d783.2e1028",
                "54ea75a9.fca1c4"
            ]
        ]
    },
    {
        "id": "54ea75a9.fca1c4",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3576.216796875,
        "y": 1563.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "3ffa66c6.048e62"
            ]
        ]
    },
    {
        "id": "f536d783.2e1028",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3578.216796875,
        "y": 1596.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "73c7be78.48771"
            ]
        ]
    },
    {
        "id": "73c7be78.48771",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3721.216796875,
        "y": 1593.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "3ffa66c6.048e62",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3724.216796875,
        "y": 1556.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "116bcef1.41b689",
                "bd9fbc09.ccb15"
            ]
        ]
    },
    {
        "id": "116bcef1.41b689",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3918.216796875,
        "y": 1559.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "2a8d98c8.2c78a",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3969.216766357422,
        "y": 1939.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "821e2eef.7d9ce8"
            ]
        ]
    },
    {
        "id": "821e2eef.7d9ce8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4175.216766357422,
        "y": 1939.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b9228d23.f35b1"
            ]
        ]
    },
    {
        "id": "b9228d23.f35b1",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4392.502410888672,
        "y": 1938.1075439453125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1db12922.ce9147"
            ]
        ]
    },
    {
        "id": "bd9fbc09.ccb15",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3940.216796875,
        "y": 1627.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "71a75cfd.cb2324",
                "c5a92d1c.748898",
                "d4c41231.0d38f"
            ]
        ]
    },
    {
        "id": "71a75cfd.cb2324",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4135.7169189453125,
        "y": 1579.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "55c143a3.bf5e9c"
            ]
        ]
    },
    {
        "id": "c5a92d1c.748898",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4127.7169189453125,
        "y": 1634.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a19a5afd.bfc2c"
            ]
        ]
    },
    {
        "id": "d4c41231.0d38f",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4132.7169189453125,
        "y": 1691.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5c56b620.c82d88"
            ]
        ]
    },
    {
        "id": "5c56b620.c82d88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4284.7169189453125,
        "y": 1692.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "a19a5afd.bfc2c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4295.7169189453125,
        "y": 1637.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "55c143a3.bf5e9c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4280.0992431640625,
        "y": 1576.9415588378906,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "79a34acd.c9a0bc"
            ]
        ]
    },
    {
        "id": "2854b6e2.b50402",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 4586.216796875,
        "y": 1719.2860107421875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1fbd987b.e2c578",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 4587.216796875,
        "y": 1824.2860107421875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "8823cb9b.b21f5",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4582.216796875,
        "y": 1773.2860107421875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1db12922.ce9147",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4599.333953857422,
        "y": 1927.626220703125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "4fe8713d.4f503",
                "c4b73dd8.f86748",
                "cf5e37a1.834b48"
            ]
        ]
    },
    {
        "id": "4fe8713d.4f503",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4814.333953857422,
        "y": 1889.626220703125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "c4b73dd8.f86748",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4811.333953857422,
        "y": 1928.626220703125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "fd454717.5864e8"
            ]
        ]
    },
    {
        "id": "cf5e37a1.834b48",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4766.833953857422,
        "y": 1970.626220703125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "fd454717.5864e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4991.833953857422,
        "y": 1927.626220703125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6021f32a.54d8fc"
            ]
        ]
    },
    {
        "id": "6021f32a.54d8fc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5149.833953857422,
        "y": 1927.626220703125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1a613df3.ff444a"
            ]
        ]
    },
    {
        "id": "1a613df3.ff444a",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5356.833953857422,
        "y": 1927.626220703125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1465bad2.a0d805",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4862.216796875,
        "y": 1595.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f75a0195.2a4c5"
            ]
        ]
    },
    {
        "id": "f75a0195.2a4c5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5039.216796875,
        "y": 1587.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1de23279.e8bad6",
                "95237093.1f1c18"
            ]
        ]
    },
    {
        "id": "79a34acd.c9a0bc",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4464.216796875,
        "y": 1591.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b5cddb2a.47fb5"
            ]
        ]
    },
    {
        "id": "b5cddb2a.47fb5",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4659.216796875,
        "y": 1591.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1465bad2.a0d805",
                "a6e303e4.3eb668"
            ]
        ]
    },
    {
        "id": "95237093.1f1c18",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5247.216796875,
        "y": 1594.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2d3d2acb.c107b6",
                "fb5337e0.94ced8",
                "752448e6.ec72a8"
            ]
        ]
    },
    {
        "id": "6879e9be.d7aee",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5041.216796875,
        "y": 1660.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "8691b2ec.22b9d8"
            ]
        ]
    },
    {
        "id": "a6e303e4.3eb668",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4864.216796875,
        "y": 1668.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6879e9be.d7aee"
            ]
        ]
    },
    {
        "id": "1de23279.e8bad6",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5277.216796875,
        "y": 1542.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "8691b2ec.22b9d8",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5254.216796875,
        "y": 1726.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "2d3d2acb.c107b6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5457.216796875,
        "y": 1585.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a3e7410.2b3c44"
            ]
        ]
    },
    {
        "id": "fb5337e0.94ced8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5449.216796875,
        "y": 1640.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "656cbbf6.41438c"
            ]
        ]
    },
    {
        "id": "752448e6.ec72a8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5454.216796875,
        "y": 1697.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6bb525a1.9cb52c"
            ]
        ]
    },
    {
        "id": "6bb525a1.9cb52c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5606.216796875,
        "y": 1698.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "656cbbf6.41438c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5617.216796875,
        "y": 1643.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "a3e7410.2b3c44",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5601.59912109375,
        "y": 1582.9415588378906,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "99742e42.2fdbd8"
            ]
        ]
    },
    {
        "id": "99742e42.2fdbd8",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5816.216796875,
        "y": 1579.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "78d4922e.8ebe04",
        "type": "set",
        "name": "set LEAF stuff",
        "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop + '-' + $tmp.aai.network-route-A.logical-interface-id`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
        "comments": "",
        "x": 3314.88330078125,
        "y": 1449.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "c220ecdf.76a978",
        "type": "set",
        "name": "set ROOT stuff",
        "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop + '-' + $tmp.aai.network-route-B.logical-interface-id`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
        "comments": "",
        "x": 3301.88330078125,
        "y": 1969.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "b4f5dada.48378",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2426.883331298828,
        "y": 162.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "5db562b1.71111c",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 2360.883331298828,
        "y": 198.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "3f2dec8d.5c3844",
        "type": "comment",
        "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
        "info": "",
        "comments": "",
        "x": 2545.883331298828,
        "y": 125.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "8ae1ae92.9d4708",
        "type": "comment",
        "name": "NOT NEEDED ANYMORE?",
        "info": "",
        "comments": "",
        "x": 4072.88330078125,
        "y": 1427.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "f4b4f4b0.73db2",
        "type": "comment",
        "name": "NOT NEEDED ANYMORE?",
        "info": "",
        "comments": "",
        "x": 4028.883270263672,
        "y": 1891.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "4304e2aa.cc073c",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2737.8836669921875,
        "y": 7259.28564453125,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "f849984b.dddac",
        "type": "comment",
        "name": "START OF DELETE OPERATION",
        "info": "",
        "comments": "",
        "x": 3296.88330078125,
        "y": 2451.2857360839844,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "ff6310d.2048a7",
        "type": "save",
        "name": "delete LEAF uni resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3880.566650390625,
        "y": 2552.6858520507812,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "14f1d608.fff342",
        "type": "save",
        "name": "get LEAF uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.LEAF.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.leafuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3251.566650390625,
        "y": 2532.6858520507812,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "30a4f59e.3fde12",
                "98adc704.004778",
                "91611e7f.d3eaa8"
            ]
        ]
    },
    {
        "id": "98adc704.004778",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3479.0576171875,
        "y": 2505.2598266601562,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "94257401.34831"
            ]
        ]
    },
    {
        "id": "91611e7f.d3eaa8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3474.566650390625,
        "y": 2549.685791015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c2c26a41.57e9c"
            ]
        ]
    },
    {
        "id": "94257401.34831",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3641.629150390625,
        "y": 2504.5455322265625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "c2c26a41.57e9c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3642.566650390625,
        "y": 2549.685791015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "30a4f59e.3fde12",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3486.566650390625,
        "y": 2599.6858520507812,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "4d0f2575.137edc"
            ]
        ]
    },
    {
        "id": "4d0f2575.137edc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3638.88330078125,
        "y": 2603.2857055664062,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "589d867c.eeacb",
                "ff6310d.2048a7",
                "84152b78.a442c8",
                "1e88543b.84a814"
            ]
        ]
    },
    {
        "id": "589d867c.eeacb",
        "type": "set",
        "name": "set bwToBeDecreased tpid cvlan",
        "xml": "<set>\n<parameter name='bwToBeDecreased' value=\"`$tmp.aai.leafuni.data-source`\" />\n<parameter name='tpid' value='`$tmp.aai.leafuni.tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.leafuni.cvlan`' />\n\n\n",
        "comments": "",
        "x": 3883.566650390625,
        "y": 2495.6858520507812,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "243640c4.1190f8",
        "type": "comment",
        "name": "Update ROOT UNI's bw",
        "info": "",
        "comments": "",
        "x": 3845.566650390625,
        "y": 2606.4857177734375,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "83d2a0c.fbf83e",
        "type": "save",
        "name": "update ROOT UNI in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4523.566650390625,
        "y": 2649.4857177734375,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "84152b78.a442c8",
        "type": "save",
        "name": "get root uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3837.56640625,
        "y": 2652.4857177734375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ee63dcff.30bad",
                "80208a9d.4e9bb",
                "3e7ba9dc.c77e76"
            ]
        ]
    },
    {
        "id": "80208a9d.4e9bb",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4141.057373046875,
        "y": 2563.0596923828125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ee49c3d8.4041d8"
            ]
        ]
    },
    {
        "id": "3e7ba9dc.c77e76",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4136.56640625,
        "y": 2607.4856567382812,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e34757d5.3f1ff8"
            ]
        ]
    },
    {
        "id": "ee49c3d8.4041d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4303.62890625,
        "y": 2562.3453979492188,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e34757d5.3f1ff8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4304.56640625,
        "y": 2607.4856567382812,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "be9d3338.5121d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4301.56640625,
        "y": 2657.4857177734375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "933a8e8f.7ef918",
                "83d2a0c.fbf83e"
            ]
        ]
    },
    {
        "id": "ee63dcff.30bad",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4132.56640625,
        "y": 2657.4857177734375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "be9d3338.5121d"
            ]
        ]
    },
    {
        "id": "933a8e8f.7ef918",
        "type": "set",
        "name": "set new bw",
        "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source - $bwToBeDecreased`' />\n",
        "comments": "",
        "x": 4483.567138671875,
        "y": 2599.4857177734375,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "21e69316.d31a3c",
        "type": "comment",
        "name": "Delete LEAF UNI",
        "info": "",
        "comments": "",
        "x": 3831.88330078125,
        "y": 2437.2857055664062,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "45cb1d93.9cef0c",
        "type": "set",
        "name": "set current-provider-id and current-cvlan-id",
        "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
        "comments": "",
        "x": 3311.749969482422,
        "y": 3769.8858032226562,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "95cc6144.fb6bd8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3444.749969482422,
        "y": 3817.8858032226562,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "21aeddc1.06f77a",
        "type": "switchNode",
        "name": "switch found-connectivity?",
        "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3266.749969482422,
        "y": 3869.6858520507812,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "218077ad.f30d3",
                "a4239ce5.8829c"
            ]
        ]
    },
    {
        "id": "218077ad.f30d3",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3459.749969482422,
        "y": 3870.6858520507812,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "dcbbe6d2.fa9028"
            ]
        ]
    },
    {
        "id": "dcbbe6d2.fa9028",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"LEAF CONN DOES NOT EXIST BUT IT SHOULD BE.\" />\n\n",
        "comments": "",
        "x": 3603.749969482422,
        "y": 3866.8858032226562,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "a4239ce5.8829c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3463.749969482422,
        "y": 3914.6858520507812,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "338c28da.4908c8"
            ]
        ]
    },
    {
        "id": "338c28da.4908c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3602.749969482422,
        "y": 3909.6858520507812,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "40a81b6.e879ce4",
                "fe7c3ff6.ce34b8",
                "af03ee84.d16068"
            ]
        ]
    },
    {
        "id": "40a81b6.e879ce4",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.the-connectivity.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3853.149627685547,
        "y": 3918.2024536132812,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "3fc00cbe.f344f4"
            ]
        ]
    },
    {
        "id": "3fc00cbe.f344f4",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.the-connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4075.149627685547,
        "y": 3896.2024536132812,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "57d9d04a.beb888"
            ]
        ]
    },
    {
        "id": "57d9d04a.beb888",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4235.149139404297,
        "y": 3876.2024536132812,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5fa67fdd.e511b8"
            ]
        ]
    },
    {
        "id": "b9bbd69a.136aa8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4388.149658203125,
        "y": 3857.2024841308594,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "17e2ea6.f8df196",
                "947c4850.aa8df"
            ]
        ]
    },
    {
        "id": "17e2ea6.f8df196",
        "type": "set",
        "name": "set tmp.stillHasUni to TRUE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='true' />\n",
        "comments": "",
        "x": 4584.649871826172,
        "y": 3825.2857055664062,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "fe7c3ff6.ce34b8",
        "type": "set",
        "name": "set tmp.stillHasUn tmp.keepVPNBs to FALSE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='false' />\n<parameter name='tmp.keepVPNBs' value='false' />\n",
        "comments": "",
        "x": 3959.64990234375,
        "y": 3837.2857360839844,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "af03ee84.d16068",
        "type": "switchNode",
        "name": "switch tmp.keepVPNBs?",
        "xml": "\n<switch test=\"`$tmp.keepVPNBs`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3767.64990234375,
        "y": 4258.285980224609,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "77a80484.fb13cc",
                "a722846c.585ad"
            ]
        ]
    },
    {
        "id": "947c4850.aa8df",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4552.88330078125,
        "y": 3893.2857360839844,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "a722846c.585ad",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 154.65066528320312,
        "y": 5322.286224365234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c0a1014a.3ea75"
            ]
        ]
    },
    {
        "id": "77a80484.fb13cc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3988.650634765625,
        "y": 4360.285980224609,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "8774c38d.ee5b7"
            ]
        ]
    },
    {
        "id": "8774c38d.ee5b7",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4131.650634765625,
        "y": 4356.285980224609,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f67d6e8d.c4ab",
                "1d885097.bf6b2f",
                "bd8e5c03.dfc108",
                "19328269.e896be",
                "93e60704.65dbd",
                "8b3d1eff.18e008",
                "ffd8a757.b8a3f",
                "b33560b0.1278c",
                "fc616200.2baf58"
            ]
        ]
    },
    {
        "id": "9c91ac5e.705b8",
        "type": "comment",
        "name": "keepVPNBs == false, then check tmp.stillHasUni",
        "info": "(2) keepVPNBs == false, means there are no other UNIs in this\nsame domain and same connectivity that share the same OLT node.\n\ncheck if tmp.stillHasUni is True or False?\n\nif TRUE --> means this domain (connectivity) still has other UNIs\n- delete VPNBs\n- delete LEAF UNI in AAI -- DONE\n- upadte bw in ROOT UNI -- DONE\n- delete LEAF UNI in LEAF ethernet service PNC\n- change ROOT conn status to Modified\n--- mark LEAF connectivity as Modified because the underlay OTN tunnel list of this connectivity is now different\n\nif FALSE --> means this domain (connectivity) has no other UNIs\n\nif MMstillHasUni == TRUE, means scenario (3), else, means scenario (4)\n\n(3) & (4) both:\n- delete VPNBs\n- delete LEAF connectivity\n- delete LEAF Ethernet Service from PNC\n\n(3) only:\n- change ROOT conn status to Modified\n- Keep the middle-man-conn and DON'T delete\n\n(4) only:\n- delete ROOT UNI\n- delete ROOT conn from AAI\n- delete ROOT Ethernet Service from PNC\n- delete middle-man-conn from AAI\n\n",
        "comments": "",
        "x": 181,
        "y": 5278.286224365234,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "fa1b93d9.936e7",
        "type": "comment",
        "name": "There are still other UNIs in this connectivity that share same OLT node. Only update bw of the vpn-bindings involved",
        "info": "(1) keepVPNBs == true, means there are still other UNIs in this\nsame domain and same connectivity that share the same OLT node.\n\n- Only update bw of the vpn-bindings involved -- DONE\n- upadte bw in ROOT UNI -- DONE\n- change ROOT conn status to Modified -- DONE\n- delete LEAF UNI in AAI -- DONE\n- delete LEAF UNI in LEAF ethernet service PNC -- DONE\n- DON'T delete the connectivities of LEAF and ROOT -- DONE\nAlso update the ethernet services",
        "comments": "",
        "x": 4007.884033203125,
        "y": 4323.285980224609,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "30095233.787426",
        "type": "set",
        "name": "set srcTtp OTN layer",
        "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
        "comments": "",
        "x": 4820.667724609375,
        "y": 4514.069427490234,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "298f2b5b.0aab2c",
        "type": "switchNode",
        "name": "switch provider-id domainA",
        "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5165.667724609375,
        "y": 4376.069427490234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1597a82b.d6bf2"
            ]
        ]
    },
    {
        "id": "1126bc47.b4d98c",
        "type": "for",
        "name": "for netwidx..allNetworksList_length",
        "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 4872.667724609375,
        "y": 4370.069427490234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "298f2b5b.0aab2c"
            ]
        ]
    },
    {
        "id": "9ba49429.2785d",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5127.667724609375,
        "y": 4327.069427490234,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "ace3cbea.15731",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
        "comments": "",
        "x": 4816.667724609375,
        "y": 4422.069427490234,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1d3af694.aab3a1",
        "type": "set",
        "name": "set tmp.pce-src-node",
        "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
        "comments": "",
        "x": 4824.667724609375,
        "y": 4467.069427490234,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "7a0d3acc.4e0354",
        "type": "set",
        "name": "unset otnTopoIdSrc",
        "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
        "comments": "",
        "x": 4821.667724609375,
        "y": 4320.069427490234,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1597a82b.d6bf2",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5074.667724609375,
        "y": 4444.069427490234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "247fb61.2b27f4a"
            ]
        ]
    },
    {
        "id": "247fb61.2b27f4a",
        "type": "switchNode",
        "name": "switch te-topo-id",
        "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5259.667724609375,
        "y": 4443.069427490234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d2d679f0.fa9e7"
            ]
        ]
    },
    {
        "id": "d2d679f0.fa9e7",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5451.667724609375,
        "y": 4446.069427490234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "7d11177c.7fa498"
            ]
        ]
    },
    {
        "id": "7d11177c.7fa498",
        "type": "set",
        "name": "set otnTopoIdSrc",
        "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
        "comments": "",
        "x": 5623.667724609375,
        "y": 4442.069427490234,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "b338f208.2e8e8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4999.667724609375,
        "y": 4557.069427490234,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "f67d6e8d.c4ab",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4516.667724609375,
        "y": 4342.069427490234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6c238e2f.cfa52",
                "97e28bb1.9f6bb8",
                "ace3cbea.15731",
                "1d3af694.aab3a1",
                "30095233.787426",
                "1126bc47.b4d98c",
                "b338f208.2e8e8"
            ]
        ]
    },
    {
        "id": "44415c7f.4f5f24",
        "type": "comment",
        "name": "The following section is to find srcTtp OTN layer (its long name)",
        "info": "The following section is to find srcTtp OTN layer (its long name)",
        "comments": "",
        "x": 4501.667724609375,
        "y": 4276.069427490234,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "97e28bb1.9f6bb8",
        "type": "get-resource",
        "name": "get-resource network-resources-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
        "comments": "",
        "outputs": 1,
        "x": 4880.667724609375,
        "y": 4263.069427490234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "153999c3.0eb42e",
                "a208bb99.66b2e8",
                "9ba49429.2785d"
            ]
        ]
    },
    {
        "id": "153999c3.0eb42e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5116.667724609375,
        "y": 4246.069427490234,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "a208bb99.66b2e8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5113.667724609375,
        "y": 4287.069427490234,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "6c238e2f.cfa52",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
        "comments": "",
        "x": 4829.667724609375,
        "y": 4220.069427490234,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1d885097.bf6b2f",
        "type": "set",
        "name": "unset tmp.aai.all-vpn-bindings",
        "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value='' />\n",
        "comments": "",
        "x": 4336.667724609375,
        "y": 4674.469329833984,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "582ea235.e6de1c",
        "type": "comment",
        "name": "find all OTNs that have srcTtpOtnLayer and decrease their bandwidth",
        "info": "",
        "comments": "",
        "x": 4459.968017578125,
        "y": 4713.469329833984,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "bd8e5c03.dfc108",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 4357.968017578125,
        "y": 4748.469329833984,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d0e71616.8c817",
                "148e0bed.377164",
                "3b175283.95d6be"
            ]
        ]
    },
    {
        "id": "d0e71616.8c817",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4562.968017578125,
        "y": 4745.469329833984,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "39c739fc.a6fe6e"
            ]
        ]
    },
    {
        "id": "148e0bed.377164",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4546.458984375,
        "y": 4807.043365478516,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "3e1fb649.3101ea"
            ]
        ]
    },
    {
        "id": "3b175283.95d6be",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4543.968017578125,
        "y": 4850.469329833984,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "681b836.365687c"
            ]
        ]
    },
    {
        "id": "39c739fc.a6fe6e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4730.96826171875,
        "y": 4740.469329833984,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "93e92e1a.778be8"
            ]
        ]
    },
    {
        "id": "3e1fb649.3101ea",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4709.0303955078125,
        "y": 4807.3291015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "681b836.365687c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4710.968017578125,
        "y": 4849.469329833984,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "93e92e1a.778be8",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4968.96826171875,
        "y": 4745.469329833984,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "27f30922.4e6a66"
            ]
        ]
    },
    {
        "id": "27f30922.4e6a66",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5202.968017578125,
        "y": 4752.469329833984,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e449a33.b8b696"
            ]
        ]
    },
    {
        "id": "e77a7161.49d068",
        "type": "comment",
        "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
        "info": "",
        "comments": "",
        "x": 5119.783935546875,
        "y": 4823.635650634766,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e449a33.b8b696",
        "type": "switchNode",
        "name": "switch ops-note is srcTtpOtnLayer",
        "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5063.783935546875,
        "y": 4872.635650634766,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "62a1336b.ab309c",
                "57ed2482.36942c"
            ]
        ]
    },
    {
        "id": "57ed2482.36942c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5306.784423828125,
        "y": 4913.635162353516,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "62a1336b.ab309c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5317.7841796875,
        "y": 4870.6353759765625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6f96293b.020fc"
            ]
        ]
    },
    {
        "id": "48fa24ff.a12f6c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5544.767578125,
        "y": 4878.0518798828125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d949e407.7d96c8",
                "ba00ef86.599998",
                "e04480f3.8af1b"
            ]
        ]
    },
    {
        "id": "a4fcb041.b0aaf8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='vpnbridx' start='0' end='`$tmp.aai.the-vpn-binding.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5709.8173828125,
        "y": 4763.052337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "dc33bc78.b33dc"
            ]
        ]
    },
    {
        "id": "dc33bc78.b33dc",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5901.8173828125,
        "y": 4752.052581787109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "88251130.694fa8"
            ]
        ]
    },
    {
        "id": "d949e407.7d96c8",
        "type": "set",
        "name": "unset tmp.aai.the-vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
        "comments": "",
        "x": 5658.334228515625,
        "y": 4653.269378662109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "ba00ef86.599998",
        "type": "set",
        "name": "set tmp.aai.the-vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
        "comments": "",
        "x": 5650.334228515625,
        "y": 4702.269378662109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e04480f3.8af1b",
        "type": "save",
        "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.the-vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher - $bwToBeDecreased`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5881.751220703125,
        "y": 4883.435394287109,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "e369ae1d.045348",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5833.401123046875,
        "y": 4930.752288818359,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "7bcaed73.c4335c",
        "type": "comment",
        "name": "decrease the bw of the-vpn-binding and change status to modified",
        "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
        "comments": "",
        "x": 5905.751220703125,
        "y": 4844.435394287109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "88251130.694fa8",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6083.8173828125,
        "y": 4731.052581787109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "3faa0ed9.e49512"
            ]
        ]
    },
    {
        "id": "3faa0ed9.e49512",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6245.8173828125,
        "y": 4720.052581787109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1f4e4f1d.0faeb9",
                "71f57a2d.ed1434"
            ]
        ]
    },
    {
        "id": "1f4e4f1d.0faeb9",
        "type": "set",
        "name": "unset tmp.the-connectivity",
        "xml": "<set>\n<parameter name='tmp.the-connectivity.' value='' />\n",
        "comments": "",
        "x": 6442.8173828125,
        "y": 4649.052581787109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "71f57a2d.ed1434",
        "type": "set",
        "name": "set tmp.the-connectivity",
        "xml": "<set>\n<parameter name='tmp.the-connectivity.' value='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].relationship-data[0].relationship-value`' />\n",
        "comments": "",
        "x": 6440.2841796875,
        "y": 4748.269378662109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "5e5dd175.2ee1b",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3097.800048828125,
        "y": 3207.0857849121094,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "95f11825.f517d8",
        "type": "switchNode",
        "name": "switch found-middle-man?",
        "xml": "<switch test='`$found-middle-man`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2974.800048828125,
        "y": 3317.0857849121094,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "eda02ee3.547818",
                "24ae5a23.6efcde"
            ]
        ]
    },
    {
        "id": "eda02ee3.547818",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3158.800048828125,
        "y": 3296.0857849121094,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "25d89b5b.fea624"
            ]
        ]
    },
    {
        "id": "25d89b5b.fea624",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3301.800048828125,
        "y": 3296.0857849121094,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a5e21959.30c488"
            ]
        ]
    },
    {
        "id": "a5e21959.30c488",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"LEAF CONN DOES NOT EXIST BUT IT SHOULD BE.\" />\n\n",
        "comments": "",
        "x": 3477.800048828125,
        "y": 3294.0857849121094,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "24ae5a23.6efcde",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3156.800048828125,
        "y": 3351.0857849121094,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2aa846fb.1fdfe2"
            ]
        ]
    },
    {
        "id": "2aa846fb.1fdfe2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3003.800048828125,
        "y": 3484.0857849121094,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "45cb1d93.9cef0c",
                "95cc6144.fb6bd8",
                "21aeddc1.06f77a",
                "ab0940a1.911a68",
                "6d6cc518.e0ec9c",
                "3c679d7f.fbbb22"
            ]
        ]
    },
    {
        "id": "522b1854.031bc",
        "type": "comment",
        "name": "Find LEAF connectivity",
        "info": "",
        "comments": "",
        "x": 3225.88330078125,
        "y": 3724.2857360839844,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "ab0940a1.911a68",
        "type": "set",
        "name": "set tmp.MMstillHasUni to FALSE",
        "xml": "<set>\n<parameter name='tmp.MMstillHasUni' value='false' />\n",
        "comments": "",
        "x": 3308.333251953125,
        "y": 3497.0857849121094,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "6d6cc518.e0ec9c",
        "type": "for",
        "name": "for each relationship of middle-man-conn",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$middle-man-conn.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3306.8330078125,
        "y": 3543.0025329589844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f5f202e7.9ae08"
            ]
        ]
    },
    {
        "id": "f5f202e7.9ae08",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$middle-man-conn.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3569.8330078125,
        "y": 3538.0025329589844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "186eedb6.79ae82"
            ]
        ]
    },
    {
        "id": "186eedb6.79ae82",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3729.83251953125,
        "y": 3518.0025329589844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e8fee7bd.fc2ef8"
            ]
        ]
    },
    {
        "id": "774ecc4a.3ad124",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5066.834228515625,
        "y": 3549.0025634765625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9464a805.69d21",
                "af3bd9a1.948688",
                "da386631.67d8c8"
            ]
        ]
    },
    {
        "id": "9464a805.69d21",
        "type": "set",
        "name": "set tmp.MMstillHasUni to TRUE",
        "xml": "<set>\n<parameter name='tmp.MMstillHasUni' value='true' />\n",
        "comments": "",
        "x": 5306.334716796875,
        "y": 3498.0858154296875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "af3bd9a1.948688",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 5239.568145751953,
        "y": 3571.0858459472656,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "17da0805.f3e8a8",
        "type": "comment",
        "name": "Find LEAF and ROOT connectivities and remove UNI from PNC",
        "info": "",
        "comments": "",
        "x": 4432.88427734375,
        "y": 5105.285980224609,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "19328269.e896be",
        "type": "set",
        "name": "set tmp.leafconn.",
        "xml": "<set>\n<parameter name='tmp.leafconn.' value='`$tmp.the-connectivity.`' />\n",
        "comments": "",
        "x": 4331.317138671875,
        "y": 5157.202484130859,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "ffd8a757.b8a3f",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4482.317138671875,
        "y": 5600.202484130859,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "b33560b0.1278c",
        "type": "switchNode",
        "name": "switch found-root-connectivity",
        "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4297.317138671875,
        "y": 5667.202484130859,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e0079417.8b765",
                "94134a14.38a09"
            ]
        ]
    },
    {
        "id": "e0079417.8b765",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4562.317138671875,
        "y": 5652.202484130859,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c191059e.ace948"
            ]
        ]
    },
    {
        "id": "94134a14.38a09",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4558.317138671875,
        "y": 5700.202484130859,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "21c0ccb3.89b3cc"
            ]
        ]
    },
    {
        "id": "c191059e.ace948",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4718.317138671875,
        "y": 5648.202484130859,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ea983e85.321ce"
            ]
        ]
    },
    {
        "id": "21c0ccb3.89b3cc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
        "comments": "",
        "x": 4706.317138671875,
        "y": 5695.202484130859,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "11ee9928.b9a3cf",
        "type": "set",
        "name": "set tmp.rootconn.",
        "xml": "<set>\n<parameter name='tmp.rootconn.' value=\"`$tmp.aai.ROOT.connectivity.`\" />\n\n\n",
        "comments": "",
        "x": 5138.3173828125,
        "y": 5590.202484130859,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "3a447acf.2b1f0e",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.leafconn.access-provider-id + '-clientId-' +\n                                                   $tmp.leafconn.access-client-id + '-topologyId-' +\n                                                   $tmp.leafconn.access-topology-id + '-nodeId-' +\n                                                   $tmp.leafconn.access-node-id`\" />\n",
        "comments": "",
        "x": 4540.734130859375,
        "y": 5186.486175537109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "93e60704.65dbd",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4311.734130859375,
        "y": 5275.486175537109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "3a447acf.2b1f0e",
                "a0d0d144.703df8"
            ]
        ]
    },
    {
        "id": "a0d0d144.703df8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4547.734130859375,
        "y": 5268.486175537109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "93bdcc8d.eca238",
                "76b31045.74e9",
                "e9dc2865.72e928"
            ]
        ]
    },
    {
        "id": "93bdcc8d.eca238",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4743.2342529296875,
        "y": 5220.486175537109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "87ddaf65.395498"
            ]
        ]
    },
    {
        "id": "76b31045.74e9",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4735.2342529296875,
        "y": 5275.486175537109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "fe3d7591.8ed12"
            ]
        ]
    },
    {
        "id": "87ddaf65.395498",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4887.6165771484375,
        "y": 5220.141845703125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ad455c8f.ae00e8"
            ]
        ]
    },
    {
        "id": "ad455c8f.ae00e8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5071.734130859375,
        "y": 5218.486175537109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d25e267a.3e533"
            ]
        ]
    },
    {
        "id": "d25e267a.3e533",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5266.734130859375,
        "y": 5218.486175537109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "93445f98.6a2b88"
            ]
        ]
    },
    {
        "id": "e9dc2865.72e928",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4740.2342529296875,
        "y": 5332.486175537109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d3c476f6.a94bf"
            ]
        ]
    },
    {
        "id": "d3c476f6.a94bf",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4892.2342529296875,
        "y": 5333.486175537109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "fe3d7591.8ed12",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4903.2342529296875,
        "y": 5276.486175537109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "a6955939.7a731",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5648.734130859375,
        "y": 5222.486175537109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9484e895.44a448",
                "50aee0a4.445958",
                "f7a12344.c8bde8"
            ]
        ]
    },
    {
        "id": "93445f98.6a2b88",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5469.734130859375,
        "y": 5222.486175537109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a6955939.7a731"
            ]
        ]
    },
    {
        "id": "50aee0a4.445958",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5854.734130859375,
        "y": 5235.486175537109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1af8bb44.7d7ad5",
                "48532c3d.63b2f4",
                "af6d67e.1e33f98"
            ]
        ]
    },
    {
        "id": "9484e895.44a448",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5884.734130859375,
        "y": 5183.486175537109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1af8bb44.7d7ad5",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6064.734130859375,
        "y": 5226.486175537109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "751438ac.f3ea9"
            ]
        ]
    },
    {
        "id": "48532c3d.63b2f4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6056.734130859375,
        "y": 5281.486175537109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1ab525ea.2aee0a"
            ]
        ]
    },
    {
        "id": "af6d67e.1e33f98",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6061.734130859375,
        "y": 5338.486175537109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "658bf37d.2cc724"
            ]
        ]
    },
    {
        "id": "658bf37d.2cc724",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6213.734130859375,
        "y": 5339.486175537109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1ab525ea.2aee0a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6224.734130859375,
        "y": 5284.486175537109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "751438ac.f3ea9",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6209.116455078125,
        "y": 5224.141845703125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "3d7e0062.7d2af"
            ]
        ]
    },
    {
        "id": "3d7e0062.7d2af",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6423.734130859375,
        "y": 5220.486175537109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "f7a12344.c8bde8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 5804.734130859375,
        "y": 5299.486175537109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "8b3d1eff.18e008",
        "type": "execute",
        "name": "execute RestApiCallNode Delete LEAF UNI of ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.leafconn.etht-svc-name + '/etht-svc-end-points=' + $tmp.LEAF.uni-p-interface-long`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4453.234375,
        "y": 5380.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ee0f617b.5bd02",
                "8e2d6022.079658"
            ]
        ]
    },
    {
        "id": "ee0f617b.5bd02",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4813.734130859375,
        "y": 5388.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e5f9197d.04b6c"
            ]
        ]
    },
    {
        "id": "e5f9197d.04b6c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 4971.734130859375,
        "y": 5388.085784912109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "b5f90852.29b69",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4975.234130859375,
        "y": 5428.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "8e2d6022.079658",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4817.734130859375,
        "y": 5428.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b5f90852.29b69"
            ]
        ]
    },
    {
        "id": "ffe0ea3.8a4d998",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5126.451171875,
        "y": 5642.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6146efb2.cf13d",
                "9351cf54.365048"
            ]
        ]
    },
    {
        "id": "9351cf54.365048",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5368.450927734375,
        "y": 5592.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d35be3cf.cc2028",
                "74f2b735.4a4b38",
                "4e1edc90.74b29c"
            ]
        ]
    },
    {
        "id": "d35be3cf.cc2028",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5563.951171875,
        "y": 5526.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "8c6be2ce.3abef8"
            ]
        ]
    },
    {
        "id": "74f2b735.4a4b38",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5559.951171875,
        "y": 5582.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "17a91916.50ea6f"
            ]
        ]
    },
    {
        "id": "8c6be2ce.3abef8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5708.3333740234375,
        "y": 5543.741455078125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "41f50adf.154854"
            ]
        ]
    },
    {
        "id": "41f50adf.154854",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5892.450927734375,
        "y": 5542.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "92f6a716.223fa8"
            ]
        ]
    },
    {
        "id": "4e1edc90.74b29c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5569.951171875,
        "y": 5627.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9e924b4c.b75db"
            ]
        ]
    },
    {
        "id": "9e924b4c.b75db",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5748.951171875,
        "y": 5643.085784912109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "17a91916.50ea6f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5730.951171875,
        "y": 5595.085784912109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "21c4fa1a.b93b46",
        "type": "execute",
        "name": "execute RestApiCallNode Delete UNI of ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.rootconn.etht-svc-name + '/etht-svc-end-points=' + $tmp.ROOT.uni-p-interface-long`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5279.951171875,
        "y": 5697.685394287109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "95033c2a.09c67",
                "f1a877c4.a203d8"
            ]
        ]
    },
    {
        "id": "95033c2a.09c67",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5628.451171875,
        "y": 5679.685394287109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "76c41eff.4cfe88"
            ]
        ]
    },
    {
        "id": "76c41eff.4cfe88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 5884.451171875,
        "y": 5682.685394287109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "eb3b6335.123de8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5836.951171875,
        "y": 5723.685394287109,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "f1a877c4.a203d8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5638.451171875,
        "y": 5728.685394287109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "eb3b6335.123de8"
            ]
        ]
    },
    {
        "id": "6146efb2.cf13d",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.rootconn.access-provider-id + '-clientId-' +\n                                                   $tmp.rootconn.access-client-id + '-topologyId-' +\n                                                   $tmp.rootconn.access-topology-id + '-nodeId-' +\n                                                   $tmp.rootconn.access-node-id`\" />\n",
        "comments": "",
        "x": 5361.450927734375,
        "y": 5510.085784912109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "92f6a716.223fa8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6087.450927734375,
        "y": 5542.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "bd55517c.f87f1"
            ]
        ]
    },
    {
        "id": "8bf8b16.3c18f5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6469.450927734375,
        "y": 5546.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1bd48f8a.cba628",
                "1ea10909.ec8b57",
                "ecac1508.b763"
            ]
        ]
    },
    {
        "id": "bd55517c.f87f1",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6290.450927734375,
        "y": 5546.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "8bf8b16.3c18f5"
            ]
        ]
    },
    {
        "id": "1ea10909.ec8b57",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6675.450927734375,
        "y": 5559.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "830127bc.8c4c18",
                "adc00906.538428",
                "5c009e0.e4c98e4"
            ]
        ]
    },
    {
        "id": "1bd48f8a.cba628",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6705.450927734375,
        "y": 5507.085784912109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "830127bc.8c4c18",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6885.450927734375,
        "y": 5550.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ea1d97d5.52d0a"
            ]
        ]
    },
    {
        "id": "adc00906.538428",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6877.450927734375,
        "y": 5605.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "283c974a.c2fc28"
            ]
        ]
    },
    {
        "id": "5c009e0.e4c98e4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6882.450927734375,
        "y": 5662.085784912109,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "dbf169ab.c4c478"
            ]
        ]
    },
    {
        "id": "dbf169ab.c4c478",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7034.450927734375,
        "y": 5663.085784912109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "283c974a.c2fc28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7045.450927734375,
        "y": 5608.085784912109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "ea1d97d5.52d0a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7029.833251953125,
        "y": 5547.741455078125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "eea057d1.d2c178"
            ]
        ]
    },
    {
        "id": "eea057d1.d2c178",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7244.450927734375,
        "y": 5544.085784912109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "ecac1508.b763",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6625.450927734375,
        "y": 5623.085784912109,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e8fee7bd.fc2ef8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3854.88330078125,
        "y": 3512.2857360839844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "4b07eb9e.ad1084",
                "449a6f75.ecc4d"
            ]
        ]
    },
    {
        "id": "4b07eb9e.ad1084",
        "type": "set",
        "name": "set tmp.mmUNI-id-long",
        "xml": "<set>\n<parameter name='tmp.mmUNI-id-long' value='`$middle-man-conn.relationship-list.relationship[$cridx].relationship-data[0].relationship-value`' />\n",
        "comments": "",
        "x": 4045.466552734375,
        "y": 3455.0857849121094,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "449a6f75.ecc4d",
        "type": "switchNode",
        "name": "switch tmp.mmUNI-id-long != ROOT UNI",
        "xml": "\n<switch test=\"`$tmp.mmUNI-id-long != $tmp.ROOT.uni-p-interface-long`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4092.466552734375,
        "y": 3526.0857849121094,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a5622a5e.b03c68",
                "1b2b72f4.a20bdd"
            ]
        ]
    },
    {
        "id": "a5622a5e.b03c68",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4330.884033203125,
        "y": 3485.2857360839844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d22a60e2.fd2778"
            ]
        ]
    },
    {
        "id": "1b2b72f4.a20bdd",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4337.884246826172,
        "y": 3542.2857055664062,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b7814ecb.1580d"
            ]
        ]
    },
    {
        "id": "d22a60e2.fd2778",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4458.884521484375,
        "y": 3481.2857360839844,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "3c679d7f.fbbb22",
        "type": "set",
        "name": "set tmp.MMonlyHasROOT to TRUE",
        "xml": "<set>\n<parameter name='tmp.MMonlyHasROOT' value='true' />\n",
        "comments": "",
        "x": 3314.083251953125,
        "y": 3439.6858825683594,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "da386631.67d8c8",
        "type": "set",
        "name": "set tmp.MMonlyHasROOT to FALSE",
        "xml": "<set>\n<parameter name='tmp.MMonlyHasROOT' value='false' />\n",
        "comments": "",
        "x": 5295.91748046875,
        "y": 3441.6859130859375,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "5fa67fdd.e511b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4407.6669921875,
        "y": 3961.9024353027344,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a814439f.bac2e",
                "f8d770ba.37d44"
            ]
        ]
    },
    {
        "id": "a814439f.bac2e",
        "type": "set",
        "name": "set tmp.uni.id",
        "xml": "<set>\n<parameter name='tmp.uni.id' value='`$tmp.the-connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value`' />\n",
        "comments": "",
        "x": 4580.5498046875,
        "y": 3957.5621032714844,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "f8d770ba.37d44",
        "type": "save",
        "name": "get uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.uni.id\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.uni\" >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4583.5498046875,
        "y": 4004.5621032714844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "7fc95f5b.ec381",
                "28603ae9.d6e726",
                "f736ad43.136778"
            ]
        ]
    },
    {
        "id": "7fc95f5b.ec381",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4755.5498046875,
        "y": 3988.5621032714844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "47e06d70.96544c"
            ]
        ]
    },
    {
        "id": "28603ae9.d6e726",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4756.040771484375,
        "y": 4034.1361389160156,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "f736ad43.136778",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4756.5498046875,
        "y": 4074.5621032714844,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "47e06d70.96544c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4916.5498046875,
        "y": 3984.5621032714844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "db3d2916.05167",
                "b1e93bbf.154be8",
                "2727d594.264d9a"
            ]
        ]
    },
    {
        "id": "3055c73f.990de",
        "type": "comment",
        "name": "find the node part of the uni.id (uni-tp-id-node-part)",
        "info": "",
        "comments": "",
        "x": 5249.5498046875,
        "y": 3915.5621032714844,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "b1e93bbf.154be8",
        "type": "execute",
        "name": "execute split id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.uni.id`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-uni-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5184.5498046875,
        "y": 3972.5621032714844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "8ed99d07.46ccf",
                "dfad78a0.2e2798"
            ]
        ]
    },
    {
        "id": "dfad78a0.2e2798",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5407.5498046875,
        "y": 3958.5621032714844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "40b7643c.aa9b44"
            ]
        ]
    },
    {
        "id": "8ed99d07.46ccf",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5409.5498046875,
        "y": 3991.5621032714844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2c3f5774.427218"
            ]
        ]
    },
    {
        "id": "40b7643c.aa9b44",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5555.5498046875,
        "y": 3951.5621032714844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "49b755b0.ff456c"
            ]
        ]
    },
    {
        "id": "2c3f5774.427218",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5552.5498046875,
        "y": 3988.5621032714844,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "49b755b0.ff456c",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.uni.pnf-name' value=\"`$param-prefix-uni-pnfName[0] + '-' +\n                                                   $param-prefix-uni-pnfName[1] + '-' +\n                                                   $param-prefix-uni-pnfName[2] + '-' +\n                                                   $param-prefix-uni-pnfName[3] + '-' +\n                                                   $param-prefix-uni-pnfName[4] + '-' +\n                                                   $param-prefix-uni-pnfName[5] + '-' +\n                                                   $param-prefix-uni-pnfName[6] + '-' +\n                                                   $param-prefix-uni-pnfName[7] + '-' +\n                                                   $param-prefix-uni-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5732.5498046875,
        "y": 3951.5621032714844,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "db3d2916.05167",
        "type": "switchNode",
        "name": "switch uni-tp-id-node-part is the same as the LEAF node",
        "xml": "<switch test='`$tmp.uni.pnf-name == $tmp.LEAF.pnf-name-long`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5228.5498046875,
        "y": 4106.562103271484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "76a8963f.4621b8",
                "22179ab4.cea27e"
            ]
        ]
    },
    {
        "id": "76a8963f.4621b8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5509.5498046875,
        "y": 4083.5621032714844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "cdc60b24.0ad9a8"
            ]
        ]
    },
    {
        "id": "22179ab4.cea27e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5502.5498046875,
        "y": 4142.562103271484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5846229.a88c65c"
            ]
        ]
    },
    {
        "id": "cdc60b24.0ad9a8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5639.5498046875,
        "y": 4087.5621032714844,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "5846229.a88c65c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5644.5498046875,
        "y": 4141.562103271484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a9c7c427.af4688",
                "fe9fa034.5cb01"
            ]
        ]
    },
    {
        "id": "a9c7c427.af4688",
        "type": "set",
        "name": "set no-pce-call",
        "xml": "<set>\n<parameter name='no-pce-call' value=\"true\" />\n",
        "comments": "",
        "x": 5836.5498046875,
        "y": 4108.562103271484,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "98a16c7e.29ab68",
        "type": "set",
        "name": "set middle-man-conn",
        "xml": "<set>\n<parameter name='middle-man-conn.' value='`$tmp.aai.all-connectivities.connectivity[$connidx].`' />\n",
        "comments": "",
        "x": 5852.5498046875,
        "y": 4160.562103271484,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "fe9fa034.5cb01",
        "type": "set",
        "name": "set tmp.stillHasUni and tmp.keepVPNBs to TRUE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='true' />\n<parameter name='tmp.keepVPNBs' value='true' />\n",
        "comments": "",
        "x": 5870.83349609375,
        "y": 4230.152435302734,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "2727d594.264d9a",
        "type": "set",
        "name": "set tmp.stillHasUni to TRUE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='true' />\n",
        "comments": "",
        "x": 5147.533203125,
        "y": 4056.0523376464844,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "c0a1014a.3ea75",
        "type": "switchNode",
        "name": "switch tmp.stillHasUni?",
        "xml": "\n<switch test=\"`$tmp.stillHasUni`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 383.7339172363281,
        "y": 5326.252044677734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5bc4629f.a764e4",
                "36ea940e.f6b704"
            ]
        ]
    },
    {
        "id": "529ae160.378f78",
        "type": "save",
        "name": "get root uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 4288.516357421875,
        "y": 5490.135833740234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e3e4b7ad.cfce5",
                "2311d61f.89de52",
                "cab68c6b.abd21"
            ]
        ]
    },
    {
        "id": "2b4c8a8a.8bc066",
        "type": "comment",
        "name": "Update ROOT UNI's bw -- ALREADY DONE",
        "info": "",
        "comments": "",
        "x": 4286.516845703125,
        "y": 5442.136077880859,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "89e149ab.f2e7c8",
        "type": "save",
        "name": "update ROOT UNI in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4903.5166015625,
        "y": 5560.136077880859,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "2311d61f.89de52",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4506.007568359375,
        "y": 5460.710052490234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "983c2552.f1f49"
            ]
        ]
    },
    {
        "id": "cab68c6b.abd21",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4501.5166015625,
        "y": 5505.136016845703,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "62a8aa1.663f1d4"
            ]
        ]
    },
    {
        "id": "983c2552.f1f49",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4668.5791015625,
        "y": 5459.995758056641,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "62a8aa1.663f1d4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4669.5166015625,
        "y": 5505.136016845703,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "d78e13a5.01de9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4666.5166015625,
        "y": 5555.136077880859,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "7bde7792.d9b138",
                "89e149ab.f2e7c8"
            ]
        ]
    },
    {
        "id": "e3e4b7ad.cfce5",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4497.5166015625,
        "y": 5555.136077880859,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d78e13a5.01de9"
            ]
        ]
    },
    {
        "id": "7bde7792.d9b138",
        "type": "set",
        "name": "set new bw",
        "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source - $bwToBeDecreased`' />\n",
        "comments": "",
        "x": 4859.517578125,
        "y": 5480.136077880859,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "cf4ce975.93215",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 5288.216796875,
        "y": 5417.902679443359,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "ea983e85.321ce",
        "type": "save",
        "name": "update ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5314,
        "y": 5460.102874755859,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "5bc4629f.a764e4",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 567.8836059570312,
        "y": 5377.285736083984,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "867bdfac.94705"
            ]
        ]
    },
    {
        "id": "36ea940e.f6b704",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 550.883544921875,
        "y": 5299.285736083984,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ab9e57cf.8ef448"
            ]
        ]
    },
    {
        "id": "eb7859d4.8fd35",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 679.8833923339844,
        "y": 4386.285461425781,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "8a11a728.e1b1d8",
                "7438f980.400318",
                "6c2db8ea.27724",
                "a48617f3.9f6e4",
                "5ff63bef.c5afdc",
                "78f62ea.0af84d",
                "d07ac0db.fa9818"
            ]
        ]
    },
    {
        "id": "8a11a728.e1b1d8",
        "type": "set",
        "name": "set tmp.leafconn.",
        "xml": "<set>\n<parameter name='tmp.leafconn.' value='`$tmp.the-connectivity.`' />\n",
        "comments": "",
        "x": 931.5667419433594,
        "y": 4364.335266113281,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "8aa064fb.543668",
        "type": "comment",
        "name": "Find LEAF and ROOT connectivities and remove UNI from PNC",
        "info": "",
        "comments": "",
        "x": 1033.1338806152344,
        "y": 4312.418762207031,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "821af189.946d58",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.leafconn.access-provider-id + '-clientId-' +\n                                                   $tmp.leafconn.access-client-id + '-topologyId-' +\n                                                   $tmp.leafconn.access-topology-id + '-nodeId-' +\n                                                   $tmp.leafconn.access-node-id`\" />\n",
        "comments": "",
        "x": 1140.9837341308594,
        "y": 4393.618957519531,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "7438f980.400318",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 911.9837341308594,
        "y": 4482.618957519531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "821af189.946d58",
                "139cfd47.53e94b"
            ]
        ]
    },
    {
        "id": "139cfd47.53e94b",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1147.9837341308594,
        "y": 4475.618957519531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "df64900d.741c98",
                "681e1ffc.26592",
                "ab39d1b3.416b58"
            ]
        ]
    },
    {
        "id": "df64900d.741c98",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1343.4838562011719,
        "y": 4427.618957519531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6f395e40.dc6b7"
            ]
        ]
    },
    {
        "id": "681e1ffc.26592",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1335.4838562011719,
        "y": 4482.618957519531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b25568a6.369d78"
            ]
        ]
    },
    {
        "id": "6f395e40.dc6b7",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1487.8661804199219,
        "y": 4427.274627685547,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "94a27fe.8c889"
            ]
        ]
    },
    {
        "id": "94a27fe.8c889",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1671.9837341308594,
        "y": 4425.618957519531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b448ea96.4c3af8"
            ]
        ]
    },
    {
        "id": "b448ea96.4c3af8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1866.9837341308594,
        "y": 4425.618957519531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "77dc6e4f.3fb428"
            ]
        ]
    },
    {
        "id": "ab39d1b3.416b58",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1340.4838562011719,
        "y": 4539.618957519531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "42bc5c1d.fe55cc"
            ]
        ]
    },
    {
        "id": "42bc5c1d.fe55cc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1492.4838562011719,
        "y": 4540.618957519531,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "b25568a6.369d78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1503.4838562011719,
        "y": 4483.618957519531,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "80f1bf38.0bc68",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2248.9837341308594,
        "y": 4429.618957519531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "cad7009f.f83538",
                "d1a2dd14.715a78",
                "689fc80.c15b238"
            ]
        ]
    },
    {
        "id": "77dc6e4f.3fb428",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2069.9837341308594,
        "y": 4429.618957519531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "80f1bf38.0bc68"
            ]
        ]
    },
    {
        "id": "6c2db8ea.27724",
        "type": "execute",
        "name": "execute RestApiCallNode Delete LEAF UNI of ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.leafconn.etht-svc-name + '/etht-svc-end-points=' + $tmp.LEAF.uni-p-interface-long`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1053.4839782714844,
        "y": 4587.218566894531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c3b5c5e7.57693",
                "cf1b7699.e71658"
            ]
        ]
    },
    {
        "id": "cf1b7699.e71658",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1417.9837341308594,
        "y": 4635.218566894531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "723bcced.729e54"
            ]
        ]
    },
    {
        "id": "c3b5c5e7.57693",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1413.9837341308594,
        "y": 4595.218566894531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "408278c5.7e5798"
            ]
        ]
    },
    {
        "id": "408278c5.7e5798",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 1571.9837341308594,
        "y": 4595.218566894531,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "723bcced.729e54",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1575.4837341308594,
        "y": 4635.218566894531,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "d1a2dd14.715a78",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 2454.9837341308594,
        "y": 4442.618957519531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e07edffa.c89278",
                "8645511b.c4b66",
                "a8a5443b.9b8a2"
            ]
        ]
    },
    {
        "id": "cad7009f.f83538",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 2484.9837341308594,
        "y": 4390.618957519531,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e07edffa.c89278",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2664.9837341308594,
        "y": 4433.618957519531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "cb5c9c8e.bb8ed8"
            ]
        ]
    },
    {
        "id": "8645511b.c4b66",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2656.9837341308594,
        "y": 4488.618957519531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "29fe474c.df75c8"
            ]
        ]
    },
    {
        "id": "a8a5443b.9b8a2",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2661.9837341308594,
        "y": 4545.618957519531,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b28b1e53.869fb"
            ]
        ]
    },
    {
        "id": "b28b1e53.869fb",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2813.9837341308594,
        "y": 4546.618957519531,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "29fe474c.df75c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2824.9837341308594,
        "y": 4491.618957519531,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "cb5c9c8e.bb8ed8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2809.3660583496094,
        "y": 4431.274627685547,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a908cc9.5d7f7b"
            ]
        ]
    },
    {
        "id": "a908cc9.5d7f7b",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3023.9837341308594,
        "y": 4427.618957519531,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "689fc80.c15b238",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2404.9837341308594,
        "y": 4506.618957519531,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "a48617f3.9f6e4",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1082.5667419433594,
        "y": 4807.335266113281,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "5ff63bef.c5afdc",
        "type": "switchNode",
        "name": "switch found-root-connectivity",
        "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 897.5667419433594,
        "y": 4874.335266113281,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "bcfca35c.21654",
                "62c7d864.119b88"
            ]
        ]
    },
    {
        "id": "bcfca35c.21654",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1162.5667419433594,
        "y": 4859.335266113281,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f4258877.5e35f"
            ]
        ]
    },
    {
        "id": "62c7d864.119b88",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1158.5667419433594,
        "y": 4907.335266113281,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "3fb79094.abfaa8"
            ]
        ]
    },
    {
        "id": "f4258877.5e35f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1318.5667419433594,
        "y": 4855.335266113281,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2140ac57.1e83f4"
            ]
        ]
    },
    {
        "id": "3fb79094.abfaa8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
        "comments": "",
        "x": 1306.5667419433594,
        "y": 4902.335266113281,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "8db3fd20.37f318",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 1587.4664001464844,
        "y": 4806.035461425781,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "2140ac57.1e83f4",
        "type": "save",
        "name": "update ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1613.2496032714844,
        "y": 4848.235656738281,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "440b33d.dbb8acc",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-delete-VPNBs",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-delete-VPNBs' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1026.8833923339844,
        "y": 4121.602355957031,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "ab9e57cf.8ef448",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 632.8834228515625,
        "y": 4126.285491943359,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "440b33d.dbb8acc",
                "eb7859d4.8fd35"
            ]
        ]
    },
    {
        "id": "867bdfac.94705",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 716.3333740234375,
        "y": 5378.802337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c644609d.44bce",
                "e7413115.aec04",
                "d006cbe4.5a677",
                "c786893c.7012b"
            ]
        ]
    },
    {
        "id": "c644609d.44bce",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-delete-VPNBs",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-delete-VPNBs' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1077.7166748046875,
        "y": 5141.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "e7413115.aec04",
        "type": "save",
        "name": "delete LEAF connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 988.7166748046875,
        "y": 5210.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "d006cbe4.5a677",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 879.88330078125,
        "y": 5445.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "614e61f8.50b5f",
                "96d6a1ec.c795b",
                "90aff610.9959f8"
            ]
        ]
    },
    {
        "id": "7ca77be7.05ec8c",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 2588.882568359375,
        "y": 5370.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a9496568.146b9",
                "c5f96edd.835cb8",
                "e018fe0a.acb8a"
            ]
        ]
    },
    {
        "id": "b9815115.2c557",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2538.882568359375,
        "y": 5434.8023681640625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "d05f3809.7521c8",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 2618.882568359375,
        "y": 5318.8023681640625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "a9496568.146b9",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2906.8826904296875,
        "y": 5301.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b7511521.12ea3"
            ]
        ]
    },
    {
        "id": "c5f96edd.835cb8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2898.8826904296875,
        "y": 5356.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d009936c.baaf78"
            ]
        ]
    },
    {
        "id": "e018fe0a.acb8a",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2903.8826904296875,
        "y": 5413.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a8c24324.12cd38"
            ]
        ]
    },
    {
        "id": "a8c24324.12cd38",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3055.8826904296875,
        "y": 5414.8023681640625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "d009936c.baaf78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3066.8826904296875,
        "y": 5359.8023681640625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "b7511521.12ea3",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3051.2650146484375,
        "y": 5299.458038330078,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "87c431c3.fca34"
            ]
        ]
    },
    {
        "id": "87c431c3.fca34",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3265.8826904296875,
        "y": 5295.8023681640625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "614e61f8.50b5f",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.the-connectivity.access-provider-id + '-clientId-' +\n                                                   $tmp.the-connectivity.access-client-id + '-topologyId-' +\n                                                   $tmp.the-connectivity.access-topology-id + '-nodeId-' +\n                                                   $tmp.the-connectivity.access-node-id`\" />\n",
        "comments": "",
        "x": 1161.88330078125,
        "y": 5314.8023681640625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "c0a00c52.f1e878",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1372.3834228515625,
        "y": 5453.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a9f88f76.4444c"
            ]
        ]
    },
    {
        "id": "62d1e19f.b39a2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1375.3834228515625,
        "y": 5341.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "957f349.e76e4c8"
            ]
        ]
    },
    {
        "id": "b9cbc6ac.26846",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1367.3834228515625,
        "y": 5396.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "48a6f350.0417c4"
            ]
        ]
    },
    {
        "id": "957f349.e76e4c8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1509.765625,
        "y": 5336.4581298828125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d4741dab.7b5f78"
            ]
        ]
    },
    {
        "id": "a9f88f76.4444c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1524.3834228515625,
        "y": 5454.8023681640625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "48a6f350.0417c4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1535.3834228515625,
        "y": 5397.8023681640625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "d4741dab.7b5f78",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1696.8828125,
        "y": 5337.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "93c0e1e7.1663a8"
            ]
        ]
    },
    {
        "id": "93c0e1e7.1663a8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1924.8828125,
        "y": 5330.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "eb0c27f.1616058"
            ]
        ]
    },
    {
        "id": "96d6a1ec.c795b",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1179.88330078125,
        "y": 5389.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c0a00c52.f1e878",
                "62d1e19f.b39a2",
                "b9cbc6ac.26846"
            ]
        ]
    },
    {
        "id": "eb0c27f.1616058",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2130.8828125,
        "y": 5327.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "63e7e6f3.2a24f"
            ]
        ]
    },
    {
        "id": "63e7e6f3.2a24f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2345.8822021484375,
        "y": 5330.8023681640625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d05f3809.7521c8",
                "7ca77be7.05ec8c",
                "b9815115.2c557"
            ]
        ]
    },
    {
        "id": "90aff610.9959f8",
        "type": "execute",
        "name": "execute RestApiCallNode Delete LEAF ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.the-connectivity.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1303.6500244140625,
        "y": 5539.2022705078125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b38f67ee.531ff",
                "7cc55d59.0067b4"
            ]
        ]
    },
    {
        "id": "b38f67ee.531ff",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1650.1500244140625,
        "y": 5532.2022705078125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "bec12c24.0b2378"
            ]
        ]
    },
    {
        "id": "7cc55d59.0067b4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1654.1500244140625,
        "y": 5572.2022705078125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9701e6f5.8bd518"
            ]
        ]
    },
    {
        "id": "bec12c24.0b2378",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 1808.1500244140625,
        "y": 5532.2022705078125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "9701e6f5.8bd518",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1811.6500244140625,
        "y": 5572.2022705078125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "29311664.f24592"
            ]
        ]
    },
    {
        "id": "c786893c.7012b",
        "type": "switchNode",
        "name": "switch tmp.MMstillHasUni?",
        "xml": "\n<switch test=\"`$tmp.MMstillHasUni`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 913.183349609375,
        "y": 5869.002532958984,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a3861250.d254d8",
                "3c90d5bf.82245a"
            ]
        ]
    },
    {
        "id": "a3861250.d254d8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1107.183349609375,
        "y": 5696.0025634765625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6ee92ba3.68178c"
            ]
        ]
    },
    {
        "id": "3c90d5bf.82245a",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1093.3500366210938,
        "y": 6018.602630615234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "31cd7353.b764a4"
            ]
        ]
    },
    {
        "id": "6ee92ba3.68178c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1255.35009765625,
        "y": 5695.6026611328125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "94f88b26.f34ce",
                "497fa775.3b5f3",
                "e88fc760.9f3988"
            ]
        ]
    },
    {
        "id": "94f88b26.f34ce",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1677.199951171875,
        "y": 5667.0025634765625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "497fa775.3b5f3",
        "type": "switchNode",
        "name": "switch found-root-connectivity",
        "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1492.199951171875,
        "y": 5734.0025634765625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ef60935.82bca7",
                "9065d9f2.54ee4"
            ]
        ]
    },
    {
        "id": "ef60935.82bca7",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1757.199951171875,
        "y": 5719.0025634765625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2819744b.f6ef4c"
            ]
        ]
    },
    {
        "id": "9065d9f2.54ee4",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1756.199951171875,
        "y": 5767.0025634765625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "8f406878.70a"
            ]
        ]
    },
    {
        "id": "2819744b.f6ef4c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1913.199951171875,
        "y": 5715.0025634765625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "450da1ad.43b1d"
            ]
        ]
    },
    {
        "id": "8f406878.70a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
        "comments": "",
        "x": 1904.199951171875,
        "y": 5762.0025634765625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "450da1ad.43b1d",
        "type": "save",
        "name": "update ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 2221.8826904296875,
        "y": 5708.9029541015625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "af8bca67.a28908",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 2196.0994873046875,
        "y": 5666.7027587890625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "31cd7353.b764a4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1230.916748046875,
        "y": 6017.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a74b089b.225b08",
                "ce915ff5.c8d31",
                "73f93f1a.1715d8"
            ]
        ]
    },
    {
        "id": "a74b089b.225b08",
        "type": "for",
        "name": "for each relationship of middle-man-conn",
        "xml": "<for index='rel-index' start='0' end='`$middle-man-conn.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1536.2328491210938,
        "y": 5951.1025390625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1bf92ac3.705cd5"
            ]
        ]
    },
    {
        "id": "1bf92ac3.705cd5",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$middle-man-conn.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1844.566650390625,
        "y": 6007.102569580078,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "adff6291.99a8f8"
            ]
        ]
    },
    {
        "id": "adff6291.99a8f8",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2024.2332763671875,
        "y": 6007.1026611328125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b1717f1d.d23a28"
            ]
        ]
    },
    {
        "id": "b1717f1d.d23a28",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $middle-man-conn.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2224.233154296875,
        "y": 6007.102630615234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1b34e983.202196",
                "d97ea61c.b38298",
                "b46e47b0.7a7bf"
            ]
        ]
    },
    {
        "id": "1b34e983.202196",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2431.23291015625,
        "y": 6057.102630615234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "10e803bb.23c354"
            ]
        ]
    },
    {
        "id": "f69a3337.dd69",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2408.466552734375,
        "y": 6241.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "8e127971.6de7c",
                "9a64470f.e555c",
                "c5ecce15.749748"
            ]
        ]
    },
    {
        "id": "1bd5cb93.6127c4",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1577.4664916992188,
        "y": 6284.30224609375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5280d91a.703f48"
            ]
        ]
    },
    {
        "id": "5280d91a.703f48",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1774.4664916992188,
        "y": 6298.30224609375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "4a3e493f.526ac",
                "404c9cef.17796c"
            ]
        ]
    },
    {
        "id": "4a3e493f.526ac",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1978.466552734375,
        "y": 6201.30224609375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e7cf2c0a.f8afd8"
            ]
        ]
    },
    {
        "id": "e7cf2c0a.f8afd8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2159.466552734375,
        "y": 6217.30224609375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f69a3337.dd69"
            ]
        ]
    },
    {
        "id": "404c9cef.17796c",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1988.466552734375,
        "y": 6459.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "55211637.c2f7e"
            ]
        ]
    },
    {
        "id": "55211637.c2f7e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2151.466552734375,
        "y": 6459.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ad51c793.473678"
            ]
        ]
    },
    {
        "id": "ad51c793.473678",
        "type": "save",
        "name": "delete uni resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2394.466552734375,
        "y": 6459.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "76246a63.c65c94",
        "type": "save",
        "name": "delete connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1362.466552734375,
        "y": 7225.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "10e803bb.23c354",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1403.4664916992188,
        "y": 6282.30224609375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1bd5cb93.6127c4",
                "76246a63.c65c94",
                "99412df0.04b4f8"
            ]
        ]
    },
    {
        "id": "8e127971.6de7c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2619.466552734375,
        "y": 6243.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e6c2ee89.d3aff"
            ]
        ]
    },
    {
        "id": "9a64470f.e555c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2619.95751953125,
        "y": 6288.876373291016,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "66f32499.9b808c"
            ]
        ]
    },
    {
        "id": "c5ecce15.749748",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2617.466552734375,
        "y": 6332.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "fc5f97c.17990e8"
            ]
        ]
    },
    {
        "id": "b46e47b0.7a7bf",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2455.282958984375,
        "y": 5957.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "d97ea61c.b38298",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2452.7919921875,
        "y": 6001.328399658203,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "ce915ff5.c8d31",
        "type": "save",
        "name": "delete middle-man-conn resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1533.4000854492188,
        "y": 6012.7021484375,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "e6c2ee89.d3aff",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2785.466552734375,
        "y": 6233.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "95de1448.b3be38",
                "c13cc07f.32d48",
                "89fea46.2857558",
                "8c5b9c51.4573e8",
                "a58a3e55.44161"
            ]
        ]
    },
    {
        "id": "fc5f97c.17990e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2784.466552734375,
        "y": 6331.302337646484,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "66f32499.9b808c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2782.5289306640625,
        "y": 6289.162109375,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "95de1448.b3be38",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-binding.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-binding.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-binding.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-binding.src-access-node-id`\" />\n",
        "comments": "",
        "x": 3007.466552734375,
        "y": 5951.302337646484,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "c13cc07f.32d48",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3033.466552734375,
        "y": 6068.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2f82e357.0b1ab4",
                "be465fa4.6aba18",
                "877ec4f6.c7b7a"
            ]
        ]
    },
    {
        "id": "89fea46.2857558",
        "type": "execute",
        "name": "execute RestApiCallNode Delete OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-src-domain-creation.templatefile`\" />-->\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-te:te/tunnels/tunnel=' + $tmp.aai.vpn-binding.vpn-name`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3136.466552734375,
        "y": 6335.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2931cfbe.d3d97",
                "162b2290.6fc605"
            ]
        ]
    },
    {
        "id": "8c5b9c51.4573e8",
        "type": "switchNode",
        "name": "switch connectivity has ethernet service",
        "xml": "<switch test='`$tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3074.466552734375,
        "y": 6470.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "df16efa0.bafe28",
                "bc60ff9d.7739e8"
            ]
        ]
    },
    {
        "id": "a58a3e55.44161",
        "type": "save",
        "name": "delete vpn-binding resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3055.466552734375,
        "y": 6586.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "2f82e357.0b1ab4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3228.9666748046875,
        "y": 6020.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "640fd481.180004"
            ]
        ]
    },
    {
        "id": "be465fa4.6aba18",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3220.9666748046875,
        "y": 6075.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ecd8a620.92b268"
            ]
        ]
    },
    {
        "id": "640fd481.180004",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3363.348876953125,
        "y": 6014.958099365234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d1896cdb.8141"
            ]
        ]
    },
    {
        "id": "877ec4f6.c7b7a",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3225.9666748046875,
        "y": 6132.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f05d5e82.949cd"
            ]
        ]
    },
    {
        "id": "f05d5e82.949cd",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3377.9666748046875,
        "y": 6133.302337646484,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "ecd8a620.92b268",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3388.9666748046875,
        "y": 6076.302337646484,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "bc60ff9d.7739e8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3327.466552734375,
        "y": 6448.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "7d696f2d.0f345"
            ]
        ]
    },
    {
        "id": "df16efa0.bafe28",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3327.466552734375,
        "y": 6504.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "d1896cdb.8141",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3550.466064453125,
        "y": 6016.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a3649162.b60c9"
            ]
        ]
    },
    {
        "id": "a3649162.b60c9",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3791.466064453125,
        "y": 6007.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "fd0af8f3.25299"
            ]
        ]
    },
    {
        "id": "7d696f2d.0f345",
        "type": "execute",
        "name": "execute RestApiCallNode Delete ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.aai.connectivity.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3677.466064453125,
        "y": 6438.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "82ac773c.5adbc",
                "f41b429.87576c"
            ]
        ]
    },
    {
        "id": "2931cfbe.d3d97",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3443.966064453125,
        "y": 6360.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "41ca7b34.32b314"
            ]
        ]
    },
    {
        "id": "162b2290.6fc605",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3444.966064453125,
        "y": 6305.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6e74c50f.6753f4"
            ]
        ]
    },
    {
        "id": "41ca7b34.32b314",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 3615.966064453125,
        "y": 6358.302337646484,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "6e74c50f.6753f4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3612.466064453125,
        "y": 6307.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "d394aeb8.1e7718",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4148.4658203125,
        "y": 5956.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5381b334.945d34",
                "5cfd9c1e.9cd7fc",
                "293f88.0669c878"
            ]
        ]
    },
    {
        "id": "fd0af8f3.25299",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3997.466064453125,
        "y": 6004.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d394aeb8.1e7718"
            ]
        ]
    },
    {
        "id": "82ac773c.5adbc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4009.966064453125,
        "y": 6412.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ecb5b8cc.eeda88"
            ]
        ]
    },
    {
        "id": "f41b429.87576c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4013.966064453125,
        "y": 6452.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "308650c2.e2482"
            ]
        ]
    },
    {
        "id": "308650c2.e2482",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4201.466064453125,
        "y": 6456.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "ecb5b8cc.eeda88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 4197.966064453125,
        "y": 6416.302337646484,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "5cfd9c1e.9cd7fc",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4354.4658203125,
        "y": 5969.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c9280772.2e056",
                "da69dce1.3d1cc8",
                "c843a21f.72703"
            ]
        ]
    },
    {
        "id": "5381b334.945d34",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4384.4658203125,
        "y": 5917.302337646484,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "c9280772.2e056",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4564.4658203125,
        "y": 5960.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1c355cab.e00983"
            ]
        ]
    },
    {
        "id": "da69dce1.3d1cc8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4556.4658203125,
        "y": 6015.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e5e939f4.c8003"
            ]
        ]
    },
    {
        "id": "c843a21f.72703",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4561.4658203125,
        "y": 6072.302337646484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "29282b3d.cdea3c"
            ]
        ]
    },
    {
        "id": "293f88.0669c878",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4304.4658203125,
        "y": 6033.302337646484,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "29282b3d.cdea3c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4713.4658203125,
        "y": 6073.302337646484,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e5e939f4.c8003",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4724.4658203125,
        "y": 6018.302337646484,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1c355cab.e00983",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4708.84814453125,
        "y": 5957.9580078125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "31ead1aa.38700e"
            ]
        ]
    },
    {
        "id": "31ead1aa.38700e",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 4923.4658203125,
        "y": 5954.302337646484,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "6da29c89.3512ec",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.connectivity.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.connectivity.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.connectivity.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.connectivity.access-node-id`\" />\n",
        "comments": "",
        "x": 1659.2332763671875,
        "y": 6751.902435302734,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "23a2345e.db2bfc",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1685.2332763671875,
        "y": 6868.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "287bda60.70f306",
                "564bb39c.806684",
                "f782c941.aa2bd8"
            ]
        ]
    },
    {
        "id": "287bda60.70f306",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1880.7333984375,
        "y": 6820.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5eea5356.2a418c"
            ]
        ]
    },
    {
        "id": "564bb39c.806684",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1872.7333984375,
        "y": 6875.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "918bf051.2e35e8"
            ]
        ]
    },
    {
        "id": "5eea5356.2a418c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2015.1156005859375,
        "y": 6815.558197021484,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a66aff1d.02ebd"
            ]
        ]
    },
    {
        "id": "f782c941.aa2bd8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1877.7333984375,
        "y": 6932.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ea358a06.2ba7c"
            ]
        ]
    },
    {
        "id": "ea358a06.2ba7c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2029.7333984375,
        "y": 6933.902435302734,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "918bf051.2e35e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2040.7333984375,
        "y": 6876.902435302734,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "a66aff1d.02ebd",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2202.2327880859375,
        "y": 6816.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "dd540d27.8a572"
            ]
        ]
    },
    {
        "id": "dd540d27.8a572",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2443.2327880859375,
        "y": 6807.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9d1b03ac.68f1d"
            ]
        ]
    },
    {
        "id": "e61d9898.b700f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2800.2325439453125,
        "y": 6756.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1b4a271c.3007c1",
                "a4a420aa.eed92",
                "5a15942c.1c868c"
            ]
        ]
    },
    {
        "id": "9d1b03ac.68f1d",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2649.2327880859375,
        "y": 6804.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e61d9898.b700f8"
            ]
        ]
    },
    {
        "id": "a4a420aa.eed92",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 3006.2325439453125,
        "y": 6769.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e70e66a4.f92e28",
                "3b5db284.72d976",
                "a90d6b8f.8e3a5"
            ]
        ]
    },
    {
        "id": "5a15942c.1c868c",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2956.2325439453125,
        "y": 6833.902435302734,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1b4a271c.3007c1",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 3036.2325439453125,
        "y": 6717.902435302734,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e70e66a4.f92e28",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3216.2325439453125,
        "y": 6760.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2205be3e.8c882a"
            ]
        ]
    },
    {
        "id": "3b5db284.72d976",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3208.2325439453125,
        "y": 6815.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d93cd156.9d02f8"
            ]
        ]
    },
    {
        "id": "a90d6b8f.8e3a5",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3213.2325439453125,
        "y": 6872.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b772a1ff.e97338"
            ]
        ]
    },
    {
        "id": "b772a1ff.e97338",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3365.2325439453125,
        "y": 6873.902435302734,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "d93cd156.9d02f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3376.2325439453125,
        "y": 6818.902435302734,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "2205be3e.8c882a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3360.6148681640625,
        "y": 6758.55810546875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9b8cbfdb.496af"
            ]
        ]
    },
    {
        "id": "9b8cbfdb.496af",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3575.2325439453125,
        "y": 6754.902435302734,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "99412df0.04b4f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1451.2332763671875,
        "y": 6879.902435302734,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6da29c89.3512ec",
                "23a2345e.db2bfc",
                "4ea496a3.5a8a68"
            ]
        ]
    },
    {
        "id": "4ea496a3.5a8a68",
        "type": "switchNode",
        "name": "switch connectivity has ethernet service",
        "xml": "<switch test='`$tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1733.433349609375,
        "y": 7021.102630615234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "fd259c6c.134fa8",
                "9bf814bd.aca8b8"
            ]
        ]
    },
    {
        "id": "9bf814bd.aca8b8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1986.433349609375,
        "y": 6999.102630615234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "10bd46c.7fcbe39"
            ]
        ]
    },
    {
        "id": "fd259c6c.134fa8",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1986.433349609375,
        "y": 7055.102630615234,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "10bd46c.7fcbe39",
        "type": "execute",
        "name": "execute RestApiCallNode Delete ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.aai.connectivity.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2336.432861328125,
        "y": 6989.102630615234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "cc57d141.f3e88",
                "6b29798.5078f08"
            ]
        ]
    },
    {
        "id": "cc57d141.f3e88",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2668.932861328125,
        "y": 6963.102630615234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e4bf775a.d74c18"
            ]
        ]
    },
    {
        "id": "6b29798.5078f08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2672.932861328125,
        "y": 7003.102630615234,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9dbbe180.4c39c"
            ]
        ]
    },
    {
        "id": "9dbbe180.4c39c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2860.432861328125,
        "y": 7007.102630615234,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "e4bf775a.d74c18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 2856.932861328125,
        "y": 6967.102630615234,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "78f62ea.0af84d",
        "type": "execute",
        "name": "execute RestApiCallNode Delete Underlay OTN tunnel from the LEAF ethernet Service",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.leafconn.etht-svc-name + '/underlay/otn-tunnels=' + $tmp.underlayOTN`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1089.25,
        "y": 4706.6856689453125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "51c55595.1dd8cc",
                "c498093d.59e4c8"
            ]
        ]
    },
    {
        "id": "51c55595.1dd8cc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1517.749755859375,
        "y": 4694.6856689453125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "bc110a38.b317b"
            ]
        ]
    },
    {
        "id": "c498093d.59e4c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1521.749755859375,
        "y": 4734.6856689453125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5805f739.dc8f9"
            ]
        ]
    },
    {
        "id": "bc110a38.b317b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 1675.749755859375,
        "y": 4694.6856689453125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "5805f739.dc8f9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1679.249755859375,
        "y": 4734.6856689453125,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "6f96293b.020fc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5113,
        "y": 5027.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "aad45f58.fbf018",
                "2530767d.abaa5a",
                "b9bc9e8d.66a4b8"
            ]
        ]
    },
    {
        "id": "b9bc9e8d.66a4b8",
        "type": "set",
        "name": "set vpnNameToSearch",
        "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
        "comments": "",
        "x": 5340,
        "y": 4972.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "aad45f58.fbf018",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5494,
        "y": 5024.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "2530767d.abaa5a",
        "type": "switchNode",
        "name": "switch $foundVpnName",
        "xml": "<switch test=\"`$foundVpnName`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5339,
        "y": 5079.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5fd0edea.97a1fc"
            ]
        ]
    },
    {
        "id": "5fd0edea.97a1fc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5518,
        "y": 5078.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "48fa24ff.a12f6c"
            ]
        ]
    },
    {
        "id": "79dba259.2612cc",
        "type": "set",
        "name": "unset secondary related variables",
        "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n<parameter name='network-route-three' value=\"\" />\n<parameter name='tmp.aai.network-route-three.' value=\"\" />\n<parameter name='tmp.aai.network-route-C.' value=\"\" />\n",
        "comments": "",
        "x": 3380.249969482422,
        "y": 433.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "11c024cf.1cb7db",
        "type": "set",
        "name": "set network-route-three",
        "xml": "<set>\n<parameter name='network-route-three' value=\"`$tmp.aai.logical-link.segment-id`\" />\n\n\n",
        "comments": "",
        "x": 3344.249969482422,
        "y": 683.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "8bfce836.dcd148",
        "type": "switchNode",
        "name": "switch secondary empty?",
        "xml": "<switch test='`length($network-route-three) == 0`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3347.666473388672,
        "y": 725.5357360839844,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2011ad7a.50e2d2",
                "3e343af8.ce24be"
            ]
        ]
    },
    {
        "id": "2011ad7a.50e2d2",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3586.6663513183594,
        "y": 561.5357666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1f12a88c.b01c37"
            ]
        ]
    },
    {
        "id": "3e343af8.ce24be",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3595.6663513183594,
        "y": 608.5357666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d6d1ae0e.a40e7"
            ]
        ]
    },
    {
        "id": "d6d1ae0e.a40e7",
        "type": "set",
        "name": "set hasSecondary true",
        "xml": "<set>\n<parameter name='hasSecondary' value=\"true\" />\n\n\n",
        "comments": "",
        "x": 3809.6663513183594,
        "y": 602.5357666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1f12a88c.b01c37",
        "type": "set",
        "name": "set hasSecondary false",
        "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n\n\n",
        "comments": "",
        "x": 3813.6663513183594,
        "y": 558.5357666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "41d8ce05.5caae",
        "type": "outcome",
        "name": "SECONDARY-ROOT",
        "xml": "<outcome value='SECONDARY-ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4175.700408935547,
        "y": 511.9857177734375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "57b53193.85d2e8"
            ]
        ]
    },
    {
        "id": "57b53193.85d2e8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4349.700408935547,
        "y": 506.9857177734375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2292f0ec.6f9e9",
                "f8b394d0.6213f"
            ]
        ]
    },
    {
        "id": "2292f0ec.6f9e9",
        "type": "set",
        "name": "set network-route-SECONDARY-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4593.700653076172,
        "y": 498.9857177734375,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "f8b394d0.6213f",
        "type": "set",
        "name": "set network-route-C",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4539.700653076172,
        "y": 538.9857177734375,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "4bc67983.47c6f",
        "type": "outcome",
        "name": "SECONDARY-ROOT",
        "xml": "<outcome value='SECONDARY-ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4144.700408935547,
        "y": 741.3857421875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ca96ae7a.f7e118"
            ]
        ]
    },
    {
        "id": "ca96ae7a.f7e118",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4302.700164794922,
        "y": 784.3855590820312,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "bdef3637.91db48",
                "b84fc7dd.a088f8"
            ]
        ]
    },
    {
        "id": "bdef3637.91db48",
        "type": "set",
        "name": "set network-route-SECONDARY-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4524.700164794922,
        "y": 770.3856811523438,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "b84fc7dd.a088f8",
        "type": "set",
        "name": "set network-route-C",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4470.700164794922,
        "y": 810.3856811523438,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "ec6aad53.7d628",
        "type": "save",
        "name": "get network-route-three from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-three'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-three\">",
        "comments": "",
        "outputs": 1,
        "x": 3356.133270263672,
        "y": 977.6190185546875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "60b6baf9.326c5c",
                "fffcc6ce.01cc38",
                "232b371a.13f76"
            ]
        ]
    },
    {
        "id": "60b6baf9.326c5c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3596.133270263672,
        "y": 960.6190185546875,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "fffcc6ce.01cc38",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3591.642333984375,
        "y": 1003.0450744628906,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "232b371a.13f76",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3595.642303466797,
        "y": 1051.0450439453125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b996a975.9f4ee8"
            ]
        ]
    },
    {
        "id": "b996a975.9f4ee8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3751.133270263672,
        "y": 1020.6189575195312,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2df3eeae.ae260a"
            ]
        ]
    },
    {
        "id": "2df3eeae.ae260a",
        "type": "switchNode",
        "name": "switch nr type",
        "xml": "<switch test='`$tmp.aai.network-route-three.type`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3873.133270263672,
        "y": 967.6189575195312,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "30af5545.05a802",
                "294528ca.16e348",
                "fdf4c0e0.5eff08"
            ]
        ]
    },
    {
        "id": "30af5545.05a802",
        "type": "outcome",
        "name": "ROOT",
        "xml": "<outcome value='ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4109.133270263672,
        "y": 817.6189575195312,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "58899b33.3d8864"
            ]
        ]
    },
    {
        "id": "294528ca.16e348",
        "type": "outcome",
        "name": "LEAF",
        "xml": "<outcome value='LEAF'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4105.133270263672,
        "y": 873.6189575195312,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2016713.cf9120e"
            ]
        ]
    },
    {
        "id": "58899b33.3d8864",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4235.133270263672,
        "y": 825.6189575195312,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "23e1076f.823948",
                "e01e107b.4a322"
            ]
        ]
    },
    {
        "id": "2016713.cf9120e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4238.133270263672,
        "y": 878.6189575195312,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "42b53bab.59e5ec",
                "9f9141a1.5b5a98"
            ]
        ]
    },
    {
        "id": "fdf4c0e0.5eff08",
        "type": "outcome",
        "name": "SECONDARY-ROOT",
        "xml": "<outcome value='SECONDARY-ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4098.133270263672,
        "y": 951.6189575195312,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "7151cb9d.fcc3b4"
            ]
        ]
    },
    {
        "id": "7151cb9d.fcc3b4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4254.133270263672,
        "y": 972.6189575195312,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "16090c67.366d8c",
                "877ec323.7c8b08"
            ]
        ]
    },
    {
        "id": "23e1076f.823948",
        "type": "set",
        "name": "set network-route-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4482.133270263672,
        "y": 855.6189575195312,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e01e107b.4a322",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4474.133270263672,
        "y": 897.6189575195312,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "42b53bab.59e5ec",
        "type": "set",
        "name": "set network-route-LEAF",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4475.133270263672,
        "y": 949.6189575195312,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "9f9141a1.5b5a98",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4462.133270263672,
        "y": 989.6189575195312,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "877ec323.7c8b08",
        "type": "set",
        "name": "set network-route-C",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
        "comments": "",
        "x": 4436.133270263672,
        "y": 1083.6189575195312,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "16090c67.366d8c",
        "type": "set",
        "name": "set network-route-SECONDARY-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
        "comments": "",
        "x": 4498.133270263672,
        "y": 1039.6189575195312,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "2a307068.85126",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3700.13330078125,
        "y": 2223.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5e91bdef.ec251c",
                "edfa6b23.11ec28"
            ]
        ]
    },
    {
        "id": "268e9ec4.4facea",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3527.466796875,
        "y": 2224.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2a307068.85126"
            ]
        ]
    },
    {
        "id": "15820d3a.1e0693",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3536.957763671875,
        "y": 2266.8598022460938,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "5a5c2368.a7e5dc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3525.466796875,
        "y": 2313.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "5e91bdef.ec251c",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3990.466796875,
        "y": 2239.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "fab0baab.63daf",
                "4fbe9a1d.f89b1c"
            ]
        ]
    },
    {
        "id": "4fbe9a1d.f89b1c",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4213.466796875,
        "y": 2194.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e7a6f67c.223ba8"
            ]
        ]
    },
    {
        "id": "fab0baab.63daf",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4215.466796875,
        "y": 2258.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e4fc9765.fde21"
            ]
        ]
    },
    {
        "id": "ad2e0fde.b44de8",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-C.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-C.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3321.466796875,
        "y": 2245.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "268e9ec4.4facea",
                "15820d3a.1e0693",
                "5a5c2368.a7e5dc"
            ]
        ]
    },
    {
        "id": "8876fe3a.88e278",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3260.466796875,
        "y": 2203.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "c02bc34.16c814",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3341.466796875,
        "y": 2093.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "85d9fc70.3a0b8",
                "63a7add0.8255ec"
            ]
        ]
    },
    {
        "id": "63a7add0.8255ec",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3564.466796875,
        "y": 2079.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "39d5594f.5d224e"
            ]
        ]
    },
    {
        "id": "85d9fc70.3a0b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3566.466796875,
        "y": 2112.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "39d5594f.5d224e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3712.466796875,
        "y": 2072.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "cf9e5f0.1f2092",
                "6b6736af.eb70a"
            ]
        ]
    },
    {
        "id": "cf9e5f0.1f2092",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainC.pnf-name' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3904.4666748046875,
        "y": 2009.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "edfa6b23.11ec28",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3971.466796875,
        "y": 2370.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c80278c9.710488"
            ]
        ]
    },
    {
        "id": "c80278c9.710488",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4177.466796875,
        "y": 2370.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "7e2cf131.a58a08"
            ]
        ]
    },
    {
        "id": "6b6736af.eb70a",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\"\n        pfx='tmp.aai.destination-secondary-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3926.4666748046875,
        "y": 2077.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9d1ec1c.6f0f9c",
                "f4e7e55c.530698",
                "d7c76719.0fc4b"
            ]
        ]
    },
    {
        "id": "9d1ec1c.6f0f9c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4121.966796875,
        "y": 2029.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "13bd6284.e3089d"
            ]
        ]
    },
    {
        "id": "f4e7e55c.530698",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4113.966796875,
        "y": 2084.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "56e4b2a7.59d05c"
            ]
        ]
    },
    {
        "id": "d7c76719.0fc4b",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4118.966796875,
        "y": 2141.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "67615599.b73f0c"
            ]
        ]
    },
    {
        "id": "67615599.b73f0c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4270.966796875,
        "y": 2142.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "13bd6284.e3089d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4266.34912109375,
        "y": 2026.9414367675781,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "3bd0a776.cdf68"
            ]
        ]
    },
    {
        "id": "d87e7a94.9bda08",
        "type": "set",
        "name": "set SECONDARY-ROOT stuff",
        "xml": "<set>\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-long' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-short' value=\"`$tmp.dst-secondary.pnf-name`\" />\n\n<parameter name='tmp.SECONDARY-ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-C.next-hop + '-' + $tmp.aai.network-route-C.logical-interface-id`\" />\n<parameter name='tmp.SECONDARY-ROOT.uni-tp-id' value=\"`$tmp.dst-secondary.ltpId`\" />\n",
        "comments": "",
        "x": 3322.13330078125,
        "y": 2338.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "3b2ac73.1b40638",
        "type": "comment",
        "name": "NOT NEEDED ANYMORE?",
        "info": "",
        "comments": "",
        "x": 4001.133270263672,
        "y": 2314.285614013672,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e4fc9765.fde21",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4374.466796875,
        "y": 2277.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e7a6f67c.223ba8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4378.466796875,
        "y": 2191.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ab9c8c2d.c18e8",
                "2a323f5f.e64b7"
            ]
        ]
    },
    {
        "id": "7e2cf131.a58a08",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4394.75244140625,
        "y": 2369.1075439453125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "cefe725b.0f41e8"
            ]
        ]
    },
    {
        "id": "56e4b2a7.59d05c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4281.966796875,
        "y": 2087.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "ab9c8c2d.c18e8",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst-secondary.ltpId' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n",
        "comments": "",
        "x": 4548.466796875,
        "y": 2152.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "2a323f5f.e64b7",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst-secondary.pnf-name' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n",
        "comments": "",
        "x": 4549.466796875,
        "y": 2257.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "89cd5649.143b88",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4544.466796875,
        "y": 2206.2857666015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "cefe725b.0f41e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4601.583984375,
        "y": 2358.626220703125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a03cf587.06cef8",
                "a11cf500.909288",
                "7b4cfab6.8e3e3c"
            ]
        ]
    },
    {
        "id": "a03cf587.06cef8",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination-secondary.ttp-id' value=\"`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4816.583984375,
        "y": 2320.626220703125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "a11cf500.909288",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination-secondary.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-secondary-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4813.583984375,
        "y": 2359.626220703125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "1d4bbcf2.4e364b"
            ]
        ]
    },
    {
        "id": "7b4cfab6.8e3e3c",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4769.083984375,
        "y": 2401.626220703125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "5a11b9ac.0be8e",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4850.466796875,
        "y": 2111.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9451ac43.685578"
            ]
        ]
    },
    {
        "id": "3bd0a776.cdf68",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4450.4666748046875,
        "y": 2041.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "baa608db.a0fe08"
            ]
        ]
    },
    {
        "id": "baa608db.a0fe08",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4647.466796875,
        "y": 2107.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5a11b9ac.0be8e",
                "41776d15.aa3ae4"
            ]
        ]
    },
    {
        "id": "41776d15.aa3ae4",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4852.466796875,
        "y": 2184.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e63bdf76.82117"
            ]
        ]
    },
    {
        "id": "1d4bbcf2.4e364b",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4994.083984375,
        "y": 2358.626220703125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "65012ff0.bac99"
            ]
        ]
    },
    {
        "id": "65012ff0.bac99",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5152.083984375,
        "y": 2358.626220703125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "8f16bdf7.24b18"
            ]
        ]
    },
    {
        "id": "8f16bdf7.24b18",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination-secondary.tunnel-tp-id' value=\"`$tmp.aai.destination-secondary-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5359.083984375,
        "y": 2358.626220703125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "9451ac43.685578",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5027.466796875,
        "y": 2103.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "801b98ce.90edc",
                "5fb93bf0.4b325c"
            ]
        ]
    },
    {
        "id": "5fb93bf0.4b325c",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainC.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainC.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5235.466796875,
        "y": 2110.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "44bfb2a0.4cab3c",
                "f1164e18.e0f19",
                "7ca3e4f2.88fb4c"
            ]
        ]
    },
    {
        "id": "e63bdf76.82117",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5029.466796875,
        "y": 2176.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "de27c7f7.c9276"
            ]
        ]
    },
    {
        "id": "801b98ce.90edc",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainC id",
        "xml": "<set>\n<parameter name='tmp.domainC.esr-thirdparty-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5265.466796875,
        "y": 2058.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "de27c7f7.c9276",
        "type": "set",
        "name": "set domainC ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainC.eth-network-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5264.466796875,
        "y": 2300.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "44bfb2a0.4cab3c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5445.466796875,
        "y": 2101.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "e82fded9.073898"
            ]
        ]
    },
    {
        "id": "f1164e18.e0f19",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5437.466796875,
        "y": 2156.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "85250ba4.806898"
            ]
        ]
    },
    {
        "id": "7ca3e4f2.88fb4c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5442.466796875,
        "y": 2213.285888671875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "7d5613c0.f5f4cc"
            ]
        ]
    },
    {
        "id": "7d5613c0.f5f4cc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5594.466796875,
        "y": 2214.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "85250ba4.806898",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5605.466796875,
        "y": 2159.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "e82fded9.073898",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5589.84912109375,
        "y": 2098.9415588378906,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "7c8249af.5ed848"
            ]
        ]
    },
    {
        "id": "7c8249af.5ed848",
        "type": "set",
        "name": "set controller domainC data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5804.466796875,
        "y": 2095.285888671875,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "1e88543b.84a814",
        "type": "switchNode",
        "name": "switch $hasSecondary",
        "xml": "<switch test='`$hasSecondary`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3836.13330078125,
        "y": 2707.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "4bbf44dd.c34104"
            ]
        ]
    },
    {
        "id": "4bbf44dd.c34104",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4027.13330078125,
        "y": 2711.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ca18cabf.134c3"
            ]
        ]
    },
    {
        "id": "ca18cabf.134c3",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4154.13330078125,
        "y": 2710.2857666015625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "ef98dd66.570548"
            ]
        ]
    },
    {
        "id": "ef98dd66.570548",
        "type": "save",
        "name": "get secondary root uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 4380.467041015625,
        "y": 2703.619384765625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c3cc04e3.9995e8",
                "96ef8840.c20b2",
                "50ef7648.d143f"
            ]
        ]
    },
    {
        "id": "c3cc04e3.9995e8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4747.466796875,
        "y": 2597.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "625acc3d.d4dd04"
            ]
        ]
    },
    {
        "id": "96ef8840.c20b2",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4742.975830078125,
        "y": 2642.0452270507812,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b87c29ed.e7a1d8"
            ]
        ]
    },
    {
        "id": "50ef7648.d143f",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4738.975830078125,
        "y": 2692.0452880859375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2796810b.682956"
            ]
        ]
    },
    {
        "id": "96d93656.6958b8",
        "type": "save",
        "name": "update SECONDARY-ROOT UNI in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5186.976318359375,
        "y": 2687.04541015625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "625acc3d.d4dd04",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4910.038330078125,
        "y": 2596.9049682617188,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "b87c29ed.e7a1d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4910.975830078125,
        "y": 2642.0452270507812,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "2796810b.682956",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4907.975830078125,
        "y": 2692.0452880859375,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "5a769bdf.551e9c",
                "96d93656.6958b8"
            ]
        ]
    },
    {
        "id": "5a769bdf.551e9c",
        "type": "set",
        "name": "set new bw",
        "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source - $bwToBeDecreased`' />\n",
        "comments": "",
        "x": 5089.9765625,
        "y": 2634.0452880859375,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "b7814ecb.1580d",
        "type": "switchNode",
        "name": "switch tmp.mmUNI-id-long != SECONDARY-ROOT UNI",
        "xml": "\n<switch test=\"`$tmp.mmUNI-id-long != $tmp.SECONDARY-ROOT.uni-p-interface-long`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4624.467041015625,
        "y": 3547.6190185546875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "cf2467a.3e0e698"
            ]
        ]
    },
    {
        "id": "cf2467a.3e0e698",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4914.467041015625,
        "y": 3549.6190185546875,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "774ecc4a.3ad124"
            ]
        ]
    },
    {
        "id": "fc616200.2baf58",
        "type": "switchNode",
        "name": "switch $hasSecondary",
        "xml": "<switch test='`$hasSecondary`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4277,
        "y": 5777.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b0c64a0a.29dee8"
            ]
        ]
    },
    {
        "id": "b0c64a0a.29dee8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4468,
        "y": 5781.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b39a4675.08bbf"
            ]
        ]
    },
    {
        "id": "b39a4675.08bbf",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4595,
        "y": 5780.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6b59d25.075b22c"
            ]
        ]
    },
    {
        "id": "6b59d25.075b22c",
        "type": "switchNode",
        "name": "switch 2-ROOTS in same domain?",
        "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4820.3330078125,
        "y": 5782.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "84c8a22.08a86e",
                "8ae9054d.68fd08"
            ]
        ]
    },
    {
        "id": "84c8a22.08a86e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5030.3330078125,
        "y": 5759.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "93a0772f.9be09"
            ]
        ]
    },
    {
        "id": "8ae9054d.68fd08",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5035.3330078125,
        "y": 5808.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "2db83bd3.7a132c"
            ]
        ]
    },
    {
        "id": "93a0772f.9be09",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5156.3330078125,
        "y": 5759.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "2db83bd3.7a132c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5153.3330078125,
        "y": 5815.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "81928378.5f469",
                "9b2406e3.5e7a08"
            ]
        ]
    },
    {
        "id": "81928378.5f469",
        "type": "save",
        "name": "update SECONDARY-ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5467.3330078125,
        "y": 5874.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "6888e6dc.67e04",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 5399.550048828125,
        "y": 5826.4190673828125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "9b2406e3.5e7a08",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5598,
        "y": 5784.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "d07ac0db.fa9818",
        "type": "switchNode",
        "name": "switch $hasSecondary",
        "xml": "<switch test='`$hasSecondary`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 868,
        "y": 4974.6187744140625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a4f6e106.afc2d"
            ]
        ]
    },
    {
        "id": "a4f6e106.afc2d",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1059,
        "y": 4978.6187744140625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "617b198c.79c0a"
            ]
        ]
    },
    {
        "id": "617b198c.79c0a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1186,
        "y": 4977.6187744140625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "f89a9d64.adeb98"
            ]
        ]
    },
    {
        "id": "f89a9d64.adeb98",
        "type": "switchNode",
        "name": "switch 2-ROOTS in same domain?",
        "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1411.3330078125,
        "y": 4979.6187744140625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "6035813d.1e7338",
                "b4705906.43572"
            ]
        ]
    },
    {
        "id": "6035813d.1e7338",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1621.3330078125,
        "y": 4956.6187744140625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "b1155932.92831"
            ]
        ]
    },
    {
        "id": "b4705906.43572",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1626.3330078125,
        "y": 5005.6187744140625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "62407b64.a07c9c"
            ]
        ]
    },
    {
        "id": "b1155932.92831",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1747.3330078125,
        "y": 4956.6187744140625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "62407b64.a07c9c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1744.3330078125,
        "y": 5012.6187744140625,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d0271ecc.53e168",
                "83be22a.f7cdb6"
            ]
        ]
    },
    {
        "id": "83be22a.f7cdb6",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2189,
        "y": 4981.6187744140625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "d29b17e9.2cbf8",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 1990.550048828125,
        "y": 5023.4185791015625,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "d0271ecc.53e168",
        "type": "save",
        "name": "update SECONDARY-ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 2058.3330078125,
        "y": 5071.6187744140625,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "e88fc760.9f3988",
        "type": "switchNode",
        "name": "switch $hasSecondary",
        "xml": "<switch test='`$hasSecondary`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1470.3333740234375,
        "y": 5815.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "c0695dac.6b173"
            ]
        ]
    },
    {
        "id": "c0695dac.6b173",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1661.3333740234375,
        "y": 5819.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "a704fbb5.caa0b"
            ]
        ]
    },
    {
        "id": "a704fbb5.caa0b",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1788.3333740234375,
        "y": 5818.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "bc272657.983128"
            ]
        ]
    },
    {
        "id": "bc272657.983128",
        "type": "switchNode",
        "name": "switch 2-ROOTS in same domain?",
        "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2013.6663818359375,
        "y": 5820.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "31bdfa25.d18a2e",
                "c242900c.77afd8"
            ]
        ]
    },
    {
        "id": "31bdfa25.d18a2e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2223.6663818359375,
        "y": 5797.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "9d78f5ef.5cf228"
            ]
        ]
    },
    {
        "id": "c242900c.77afd8",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2228.6663818359375,
        "y": 5846.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d542d85e.71ea7"
            ]
        ]
    },
    {
        "id": "9d78f5ef.5cf228",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2349.6663818359375,
        "y": 5797.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "d542d85e.71ea7",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2346.6663818359375,
        "y": 5853.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            [
                "d23f59ed.73bc4",
                "2e5ee108.277b9e"
            ]
        ]
    },
    {
        "id": "2e5ee108.277b9e",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2791.3333740234375,
        "y": 5822.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "868b21d1.a7652",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 2592.8834228515625,
        "y": 5864.4190673828125,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "d23f59ed.73bc4",
        "type": "save",
        "name": "update SECONDARY-ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 2660.6663818359375,
        "y": 5912.6192626953125,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "73f93f1a.1715d8",
        "type": "execute",
        "name": "execute Terminate SSE Connection",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='deleteSubscriptionAndSseConnection' >\n<parameter name=\"subscriberId\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url`\" />\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-terminate-notification.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/operations/ietf-subscribed-notifications:delete-subscription'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"post\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"X-ACCESS-TOKEN=x-ik2ps4ikvzupbx0486ft1ebzs7rt85futh9ho6eofy3wjsap7wqktemlqm4bbsmnar3vrtbyrzukbv5itd6m1cftldpjarnyle3sdcqq9hftc4lebz464b5ffxmlbvg9\" />\n<parameter name=\"module\" value=\"GENERIC-RESOURCE-API\" />\n<parameter name=\"rpc\" value=\"cll-vnf-topology-operation-cll-callbackdg-notification\" />\n<parameter name=\"version\" value=\"`$project.version`\" />\n<parameter name=\"mode\" value=\"sync\" />\n<parameter name=\"responsePrefix\" value=\"restapi-result\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1520.7666625976562,
        "y": 6121,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    },
    {
        "id": "5f7e37aa.0d2258",
        "type": "set",
        "name": "set parameters",
        "xml": "<set>\n<parameter name='subscriptionId' value='`$rcvd-bandwidth-value`' />\n",
        "comments": "",
        "x": 1452.800048828125,
        "y": 6062.39990234375,
        "z": "1806503a.76a7a",
        "wires": []
    },
    {
        "id": "29311664.f24592",
        "type": "execute",
        "name": "execute Terminate SSE Connection",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfdiscovery.RestconfDiscoveryNode' method='deleteSubscriptionAndSseConnection' >\n<parameter name=\"subscriberId\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url`\" />\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.cll-terminate-notification.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/operations/ietf-subscribed-notifications:delete-subscription'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainConn.password`\" />\n<parameter name=\"dirPath\" value=\"/opt/sdnc/restconfapi/yang/notification\" />\n<parameter name=\"format\" value=\"json\" />\n<parameter name=\"httpMethod\" value=\"post\" />\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"X-ACCESS-TOKEN=x-ik2ps4ikvzupbx0486ft1ebzs7rt85futh9ho6eofy3wjsap7wqktemlqm4bbsmnar3vrtbyrzukbv5itd6m1cftldpjarnyle3sdcqq9hftc4lebz464b5ffxmlbvg9\" />\n<parameter name=\"module\" value=\"GENERIC-RESOURCE-API\" />\n<parameter name=\"rpc\" value=\"cll-vnf-topology-operation-cll-callbackdg-notification\" />\n<parameter name=\"version\" value=\"`$project.version`\" />\n<parameter name=\"mode\" value=\"sync\" />\n<parameter name=\"responsePrefix\" value=\"restapi-result\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2069.433349609375,
        "y": 5569.2333984375,
        "z": "1806503a.76a7a",
        "wires": [
            []
        ]
    }
]