[
    {
        "id": "d1a7bbc1.540ca8",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 171.88333129882812,
        "y": 131.88333129882812,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "6b49e250.7dcf1c"
            ]
        ]
    },
    {
        "id": "6b49e250.7dcf1c",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 456.1690216064453,
        "y": 193.12143993377686,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "7d29f447.50c89c"
            ]
        ]
    },
    {
        "id": "7d29f447.50c89c",
        "type": "method",
        "name": "method cll-vnf-topology-operation-cll-delete",
        "xml": "<method rpc='cll-vnf-topology-operation-cll-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 462.3119354248047,
        "y": 277.88336181640625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "eaada3e3.80126"
            ]
        ]
    },
    {
        "id": "eaada3e3.80126",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 811.8833312988281,
        "y": 336.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "48b97bf1.34ba04",
                "4cae2f6c.f9579",
                "47d3b263.d1c534"
            ]
        ]
    },
    {
        "id": "48b97bf1.34ba04",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1113.2168273925781,
        "y": 607.8136291503906,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "4cae2f6c.f9579",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1134.6452941894531,
        "y": 310.2166442871094,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "eecf5ed7.260848",
                "c7a2a22f.bd7b1",
                "44494afd.f0c474"
            ]
        ]
    },
    {
        "id": "eecf5ed7.260848",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1359.6452941894531,
        "y": 168.21664428710938,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "cddb4078.0dee18"
            ]
        ]
    },
    {
        "id": "c7a2a22f.bd7b1",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1355.1362609863281,
        "y": 237.79067993164062,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "7789aaf8.1fe7d4"
            ]
        ]
    },
    {
        "id": "44494afd.f0c474",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1343.6452941894531,
        "y": 284.2166442871094,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "64127148.01c618"
            ]
        ]
    },
    {
        "id": "1679e3cd.763d6c",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1113.6452941894531,
        "y": 198.21664428710938,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "47d3b263.d1c534",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1101.6452941894531,
        "y": 250.21664428710938,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "cddb4078.0dee18",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1599.8833312988281,
        "y": 164.88333129882812,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "6a54ba66.1cde8c",
                "7bb2b732.d43ff8"
            ]
        ]
    },
    {
        "id": "7789aaf8.1fe7d4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1509.9457092285156,
        "y": 240.74310302734375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "64127148.01c618",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1513.8833312988281,
        "y": 284.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "6a54ba66.1cde8c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1804.8833312988281,
        "y": 201.88333129882812,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d1e88455.43ef2"
            ]
        ]
    },
    {
        "id": "7bb2b732.d43ff8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1814.8833312988281,
        "y": 128.88333129882812,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "d1e88455.43ef2",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1797.8833312988281,
        "y": 276.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "8390a16b.5a156",
                "341b8f1.ea5ec7",
                "1d2c9241.740b2e",
                "4208fd35.4a6c74",
                "e351db25.84cdc8"
            ]
        ]
    },
    {
        "id": "2db9f3bd.0d65e4",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2283.883331298828,
        "y": 327.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "11f248b6.2b0fe7",
                "fd3681a1.487b1",
                "9338a88f.aebeb"
            ]
        ]
    },
    {
        "id": "11f248b6.2b0fe7",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2499.883331298828,
        "y": 394.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "7fe5ebf8.de6a64"
            ]
        ]
    },
    {
        "id": "fd3681a1.487b1",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2500.374298095703,
        "y": 294.4573059082031,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "6e8f233d.c6dbd4"
            ]
        ]
    },
    {
        "id": "9338a88f.aebeb",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2495.883331298828,
        "y": 343.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "8a3025a0.71b76"
            ]
        ]
    },
    {
        "id": "8390a16b.5a156",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2000.8833312988281,
        "y": 308.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "7858ac8a.d0ed24",
                "2db9f3bd.0d65e4",
                "98563074.1e7ea",
                "c475408d.68ef"
            ]
        ]
    },
    {
        "id": "7858ac8a.d0ed24",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2280.883331298828,
        "y": 246.88333129882812,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "4208fd35.4a6c74",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
        "comments": "",
        "x": 1974.8833312988281,
        "y": 258.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "341b8f1.ea5ec7",
        "type": "get-resource",
        "name": "get-resource pnfs-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/pnfs?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
        "comments": "",
        "outputs": 1,
        "x": 2017.8833312988281,
        "y": 117.88333129882812,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "1d2c9241.740b2e",
        "type": "get-resource",
        "name": "get-resource logical-links",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
        "comments": "",
        "outputs": 1,
        "x": 2029.8833312988281,
        "y": 158.88333129882812,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "a3743fb5.49e31",
        "type": "comment",
        "name": "The following two nodes are for PCE",
        "info": "",
        "comments": "",
        "x": 2054.883331298828,
        "y": 70.88333129882812,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "a5956784.1c6ce8",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
        "comments": "",
        "x": 1974.8833312988281,
        "y": 204.88333129882812,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "6e8f233d.c6dbd4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2678.883331298828,
        "y": 296.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "8a3025a0.71b76",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2678.820831298828,
        "y": 346.0235900878906,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "7fe5ebf8.de6a64",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2680.820831298828,
        "y": 397.0235900878906,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "27474730.1479c8"
            ]
        ]
    },
    {
        "id": "27474730.1479c8",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2973.820831298828,
        "y": 344.0235900878906,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "bdd221b3.05669",
                "9c61f989.c8eaf8",
                "fabffff4.e28138"
            ]
        ]
    },
    {
        "id": "9c61f989.c8eaf8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3247.311798095703,
        "y": 236.59756469726562,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "1e4b4cbe.e5dbab"
            ]
        ]
    },
    {
        "id": "1e4b4cbe.e5dbab",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3424.883331298828,
        "y": 236.88333129882812,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "fabffff4.e28138",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3242.820831298828,
        "y": 286.0235900878906,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3e91db11.95e81c"
            ]
        ]
    },
    {
        "id": "3e91db11.95e81c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3424.820831298828,
        "y": 286.0235900878906,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "bdd221b3.05669",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3246.820831298828,
        "y": 337.0235900878906,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "8cb6a22.c9637e"
            ]
        ]
    },
    {
        "id": "8cb6a22.c9637e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3426.820831298828,
        "y": 337.0235900878906,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "6f3506c3.cf97d8"
            ]
        ]
    },
    {
        "id": "6f3506c3.cf97d8",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2992.883331298828,
        "y": 471.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "5a58fe79.709e",
                "5401f43b.ed03f4"
            ]
        ]
    },
    {
        "id": "5401f43b.ed03f4",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3302.883331298828,
        "y": 478.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "5a58fe79.709e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3301.883331298828,
        "y": 532.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "126c6f21.417e99"
            ]
        ]
    },
    {
        "id": "24e00055.8ca808",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4046.883331298828,
        "y": 486.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "8c1020d2.e3fc88"
            ]
        ]
    },
    {
        "id": "8c1020d2.e3fc88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4223.883209228516,
        "y": 479.8832092285156,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "709d8f82.9f2e1",
                "cef8768a.ac6e48"
            ]
        ]
    },
    {
        "id": "126c6f21.417e99",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3465.883331298828,
        "y": 458.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f0253be2.ef6388",
                "d30875df.4619e8"
            ]
        ]
    },
    {
        "id": "f0253be2.ef6388",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3746.883331298828,
        "y": 414.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "6ce9e370.67b09c"
            ]
        ]
    },
    {
        "id": "6ce9e370.67b09c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4008.883331298828,
        "y": 414.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "24e00055.8ca808"
            ]
        ]
    },
    {
        "id": "709d8f82.9f2e1",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 4466.883209228516,
        "y": 436.8832092285156,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "cef8768a.ac6e48",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 4455.883209228516,
        "y": 491.8832092285156,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "442d2e35.9513b",
                "6b7a340a.d73c24",
                "1cf09fd1.237e88"
            ]
        ]
    },
    {
        "id": "1cf09fd1.237e88",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4708.883331298828,
        "y": 377.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "830d3a39.a47178"
            ]
        ]
    },
    {
        "id": "830d3a39.a47178",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4857.454864501953,
        "y": 378.1690979003906,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "4e42818f.48a268",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4856.392364501953,
        "y": 422.3093566894531,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "6b7a340a.d73c24",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4697.392364501953,
        "y": 422.3093566894531,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "4e42818f.48a268"
            ]
        ]
    },
    {
        "id": "442d2e35.9513b",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4704.392364501953,
        "y": 501.3093566894531,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "dd05e839.54d638"
            ]
        ]
    },
    {
        "id": "dd05e839.54d638",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4843.392364501953,
        "y": 501.3093566894531,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d5c9a2a0.f0c188",
                "585ee28c.970d44"
            ]
        ]
    },
    {
        "id": "d5c9a2a0.f0c188",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 5048.883331298828,
        "y": 498.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "585ee28c.970d44",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 5047.883331298828,
        "y": 544.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "d30875df.4619e8",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3563.883331298828,
        "y": 530.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "bcf8f8b2.ee17c"
            ]
        ]
    },
    {
        "id": "bcf8f8b2.ee17c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3843.883331298828,
        "y": 530.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f92213c8.e6e61"
            ]
        ]
    },
    {
        "id": "f92213c8.e6e61",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2256.8834533691406,
        "y": 783.8834533691406,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f147a584.43d0d8"
            ]
        ]
    },
    {
        "id": "f147a584.43d0d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2433.883331298828,
        "y": 776.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "5a35df58.3972",
                "2dab28b6.2641a"
            ]
        ]
    },
    {
        "id": "5a35df58.3972",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 2676.883331298828,
        "y": 733.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "2dab28b6.2641a",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 2665.883331298828,
        "y": 788.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ffb30860.4224d",
                "abeb5cc2.3015b",
                "e13761ad.544c58"
            ]
        ]
    },
    {
        "id": "ffb30860.4224d",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2957.374298095703,
        "y": 767.4573059082031,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "bd849955.1204b"
            ]
        ]
    },
    {
        "id": "abeb5cc2.3015b",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2945.883331298828,
        "y": 811.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "33701bc2.b5a40c"
            ]
        ]
    },
    {
        "id": "bd849955.1204b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3105.945831298828,
        "y": 767.7430725097656,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "33701bc2.b5a40c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3104.883331298828,
        "y": 811.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "e13761ad.544c58",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2952.883331298828,
        "y": 890.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d2f3b92.5263348"
            ]
        ]
    },
    {
        "id": "d2f3b92.5263348",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3091.883331298828,
        "y": 890.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ef467ac0.6f7c18",
                "f9d1859a.061ab8",
                "3e963f23.c2be88",
                "f9ae4741.757498",
                "2907fb26.565cec",
                "26f3b8c8.1692a",
                "94a806e9.b63df",
                "a001cedc.58f128",
                "221f1c18.663f6c",
                "77955a17.d633ac",
                "1e4146ab.95c211",
                "c8da4017.620ba8",
                "a4dfc5e6.4600f",
                "ce0d81bd.d28a7",
                "7f04acf4.5afc3c"
            ]
        ]
    },
    {
        "id": "4165b419.5fd914",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3405.883331298828,
        "y": 696.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "ef467ac0.6f7c18",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3386.883331298828,
        "y": 746.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "c8da4017.620ba8",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 3343.883331298828,
        "y": 791.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "f9d1859a.061ab8",
        "type": "set",
        "name": "set network-route-one",
        "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
        "comments": "",
        "x": 3318.883331298828,
        "y": 854.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "3e963f23.c2be88",
        "type": "set",
        "name": "set network-route-two",
        "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 3319.883331298828,
        "y": 909.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "f9ae4741.757498",
        "type": "save",
        "name": "get network-route-one from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
        "comments": "",
        "outputs": 1,
        "x": 3335.883331298828,
        "y": 957.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d029c3a1.942f48",
                "34db9b18.f85a0c",
                "a8f47dda.1a0bb8"
            ]
        ]
    },
    {
        "id": "2907fb26.565cec",
        "type": "save",
        "name": "get network-route-two from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
        "comments": "",
        "outputs": 1,
        "x": 3324.883331298828,
        "y": 1044.8832092285156,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ad570631.23385",
                "75596bb2.8de11c",
                "ae6194f6.92ada8"
            ]
        ]
    },
    {
        "id": "d029c3a1.942f48",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3536.883331298828,
        "y": 841.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9c52bc0.78abb48"
            ]
        ]
    },
    {
        "id": "34db9b18.f85a0c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3532.392364501953,
        "y": 891.3093566894531,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "946c30bd.bd527"
            ]
        ]
    },
    {
        "id": "a8f47dda.1a0bb8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3536.392364501953,
        "y": 944.3093566894531,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "1dcb46a1.3c7d49"
            ]
        ]
    },
    {
        "id": "9c52bc0.78abb48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3685.454864501953,
        "y": 841.1690979003906,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "946c30bd.bd527",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3675.392364501953,
        "y": 891.3093566894531,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "ad570631.23385",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3547.883331298828,
        "y": 1014.8832092285156,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "5f295173.cbbf5"
            ]
        ]
    },
    {
        "id": "75596bb2.8de11c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3543.392364501953,
        "y": 1064.3092346191406,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "355d767e.1de55a"
            ]
        ]
    },
    {
        "id": "ae6194f6.92ada8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3544.392364501953,
        "y": 1117.3092346191406,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "a436621f.a466c"
            ]
        ]
    },
    {
        "id": "5f295173.cbbf5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3696.454864501953,
        "y": 1014.1689758300781,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "355d767e.1de55a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3686.392364501953,
        "y": 1064.3092346191406,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "1dcb46a1.3c7d49",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3697.883331298828,
        "y": 943.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f5b5d495.086d"
            ]
        ]
    },
    {
        "id": "a436621f.a466c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3697.883331298828,
        "y": 1116.8832092285156,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "43e5bf6b.ff29a8"
            ]
        ]
    },
    {
        "id": "f5b5d495.086d",
        "type": "switchNode",
        "name": "switch nr type",
        "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3869.883331298828,
        "y": 943.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "55f80e1b.2635f",
                "43049869.5a7d88"
            ]
        ]
    },
    {
        "id": "43e5bf6b.ff29a8",
        "type": "switchNode",
        "name": "switch nr type",
        "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3870.883331298828,
        "y": 1116.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f9772113.de9e58",
                "79517b7a.195d94"
            ]
        ]
    },
    {
        "id": "55f80e1b.2635f",
        "type": "outcome",
        "name": "ROOT",
        "xml": "<outcome value='ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4045.883331298828,
        "y": 922.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d9c9bf69.d54ef8"
            ]
        ]
    },
    {
        "id": "43049869.5a7d88",
        "type": "outcome",
        "name": "LEAF",
        "xml": "<outcome value='LEAF'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4047.883331298828,
        "y": 976.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "5ac63627.c33ff"
            ]
        ]
    },
    {
        "id": "f9772113.de9e58",
        "type": "outcome",
        "name": "ROOT",
        "xml": "<outcome value='ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4046.883331298828,
        "y": 1086.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "35523eeb.15287a"
            ]
        ]
    },
    {
        "id": "79517b7a.195d94",
        "type": "outcome",
        "name": "LEAF",
        "xml": "<outcome value='LEAF'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4048.883331298828,
        "y": 1140.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "377b88b8.aaeb48"
            ]
        ]
    },
    {
        "id": "eba0d9fe.14aff8",
        "type": "set",
        "name": "set network-route-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4355.883331298828,
        "y": 874.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "b156164c.4afee",
        "type": "set",
        "name": "set network-route-LEAF",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4348.883331298828,
        "y": 972.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "c46834b2.126828",
        "type": "set",
        "name": "set network-route-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4348.883331298828,
        "y": 1059.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "67f1e499.325a54",
        "type": "set",
        "name": "set network-route-LEAF",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4352.883331298828,
        "y": 1152.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "fa18abdb.1f3b58",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3579.883331298828,
        "y": 1561.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "acfe7f1b.815bb8"
            ]
        ]
    },
    {
        "id": "504369a4.383c58",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3589.374298095703,
        "y": 1604.4573669433594,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "2cc2d2a0.0189de"
            ]
        ]
    },
    {
        "id": "48dc6834.fa2a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3577.883331298828,
        "y": 1650.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "5165f4d1.561cf4"
            ]
        ]
    },
    {
        "id": "a5821370.c906a8",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3279.883331298828,
        "y": 1523.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "94a806e9.b63df",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3322.883331298828,
        "y": 1588.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "fa18abdb.1f3b58",
                "504369a4.383c58",
                "48dc6834.fa2a"
            ]
        ]
    },
    {
        "id": "26f3b8c8.1692a",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3323.883331298828,
        "y": 1258.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e1766e3b.d98f7",
                "2b2fec17.7ad784"
            ]
        ]
    },
    {
        "id": "2b2fec17.7ad784",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3546.883331298828,
        "y": 1244.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9fa24ca4.2bf57"
            ]
        ]
    },
    {
        "id": "e1766e3b.d98f7",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3548.883331298828,
        "y": 1277.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "43f11543.33be3c"
            ]
        ]
    },
    {
        "id": "acfe7f1b.815bb8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3752.549835205078,
        "y": 1560.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "72fd24ba.a9210c",
                "abb77544.4a8348"
            ]
        ]
    },
    {
        "id": "2cc2d2a0.0189de",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3742.9457092285156,
        "y": 1607.7431030273438,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "5165f4d1.561cf4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3746.883331298828,
        "y": 1651.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "72fd24ba.a9210c",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4016.883331298828,
        "y": 1544.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e6b87836.bef2f8",
                "b8a921ef.444378"
            ]
        ]
    },
    {
        "id": "b8a921ef.444378",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4239.883331298828,
        "y": 1499.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "54ec9e81.9a2fc"
            ]
        ]
    },
    {
        "id": "e6b87836.bef2f8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4241.883331298828,
        "y": 1563.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "27ce4c05.8bf1dc"
            ]
        ]
    },
    {
        "id": "27ce4c05.8bf1dc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4403.883331298828,
        "y": 1559.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "54ec9e81.9a2fc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4404.883331298828,
        "y": 1496.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f6774ff2.abd22",
                "bb24ac55.01a618"
            ]
        ]
    },
    {
        "id": "2e1ea98e.240716",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4018.883331298828,
        "y": 1703.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "19e24364.492f0d",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4063.883331298828,
        "y": 1613.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "aefdb41a.15ed9",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4146.883331298828,
        "y": 1751.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "43f11543.33be3c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3691.883331298828,
        "y": 1274.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "9fa24ca4.2bf57",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3694.883331298828,
        "y": 1237.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "fc422c00.a0a738",
                "4c9af5cc.7cdc6c"
            ]
        ]
    },
    {
        "id": "fc422c00.a0a738",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3868.883331298828,
        "y": 1193.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "abb77544.4a8348",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3970.883331298828,
        "y": 1828.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "af71b606.ad1ca8"
            ]
        ]
    },
    {
        "id": "af71b606.ad1ca8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4176.883331298828,
        "y": 1828.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "1586191.cb5c467"
            ]
        ]
    },
    {
        "id": "1586191.cb5c467",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4392.168975830078,
        "y": 1828.7051086425781,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "2efd1433.a69a04"
            ]
        ]
    },
    {
        "id": "4c9af5cc.7cdc6c",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3883.883331298828,
        "y": 1304.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f48c8915.33d9e8",
                "cce55dcf.842618",
                "5e74a015.2ca67"
            ]
        ]
    },
    {
        "id": "f48c8915.33d9e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4079.3834533691406,
        "y": 1256.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "5a7d862f.3b4ad8"
            ]
        ]
    },
    {
        "id": "cce55dcf.842618",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4071.3834533691406,
        "y": 1311.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9061c72.32ffe38"
            ]
        ]
    },
    {
        "id": "5e74a015.2ca67",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4076.3834533691406,
        "y": 1368.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "6b55247c.21dab4"
            ]
        ]
    },
    {
        "id": "6b55247c.21dab4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4228.383453369141,
        "y": 1369.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "9061c72.32ffe38",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4239.383453369141,
        "y": 1314.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "5a7d862f.3b4ad8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4223.765777587891,
        "y": 1254.5390014648438,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d89a976.d88e5e8"
            ]
        ]
    },
    {
        "id": "d89a976.d88e5e8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4407.883331298828,
        "y": 1268.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "155fb221.0dbf8e"
            ]
        ]
    },
    {
        "id": "bb24ac55.01a618",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 4574.883331298828,
        "y": 1454.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "f6774ff2.abd22",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 4575.883331298828,
        "y": 1562.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "1f2d63dd.89956c",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4576.883331298828,
        "y": 1511.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "2efd1433.a69a04",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4599.000518798828,
        "y": 1829.2236633300781,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9738e3.11ec3f2",
                "b90b51f7.bc063",
                "e565f202.9406"
            ]
        ]
    },
    {
        "id": "9738e3.11ec3f2",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4814.000518798828,
        "y": 1791.2236633300781,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "b90b51f7.bc063",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4811.000518798828,
        "y": 1830.2236633300781,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "2d0e3a15.1426a6"
            ]
        ]
    },
    {
        "id": "e565f202.9406",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4766.500518798828,
        "y": 1872.2236633300781,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "2d0e3a15.1426a6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4991.500518798828,
        "y": 1829.2236633300781,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "a863747c.f65e78"
            ]
        ]
    },
    {
        "id": "60c94053.2751c",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4805.883331298828,
        "y": 1272.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "de3b61b0.e43d2"
            ]
        ]
    },
    {
        "id": "de3b61b0.e43d2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4982.883331298828,
        "y": 1264.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b2f44bdb.9dc5e8",
                "1f8e5eff.5b4f51"
            ]
        ]
    },
    {
        "id": "155fb221.0dbf8e",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4602.883331298828,
        "y": 1268.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "60c94053.2751c",
                "ecc099ad.aafee8"
            ]
        ]
    },
    {
        "id": "ecc099ad.aafee8",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4808.883331298828,
        "y": 1346.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e5e04393.9d571"
            ]
        ]
    },
    {
        "id": "e5e04393.9d571",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4985.883331298828,
        "y": 1338.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "39969cdd.a78634"
            ]
        ]
    },
    {
        "id": "a863747c.f65e78",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5149.500518798828,
        "y": 1829.2236633300781,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9ec1944.f167b68"
            ]
        ]
    },
    {
        "id": "9ec1944.f167b68",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5356.500518798828,
        "y": 1829.2236633300781,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "1f8e5eff.5b4f51",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5190.883331298828,
        "y": 1271.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "1422dd1f.ed1903",
                "306288e7.8d0b68",
                "adc4d006.c9a618"
            ]
        ]
    },
    {
        "id": "b2f44bdb.9dc5e8",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5220.883331298828,
        "y": 1219.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "1422dd1f.ed1903",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5400.883331298828,
        "y": 1262.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9be58098.9885c8"
            ]
        ]
    },
    {
        "id": "306288e7.8d0b68",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5392.883331298828,
        "y": 1317.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ddbc66fb.291808"
            ]
        ]
    },
    {
        "id": "adc4d006.c9a618",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5397.883331298828,
        "y": 1374.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f026a629.a20b28"
            ]
        ]
    },
    {
        "id": "f026a629.a20b28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5549.883331298828,
        "y": 1375.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "ddbc66fb.291808",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5560.883331298828,
        "y": 1320.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "9be58098.9885c8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5545.265655517578,
        "y": 1260.5390014648438,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b1324a29.092c8"
            ]
        ]
    },
    {
        "id": "39969cdd.a78634",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5220.883331298828,
        "y": 1462.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "b1324a29.092c8",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5759.883331298828,
        "y": 1256.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "e7c33475.7e91e8",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4343.883331298828,
        "y": 910.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "5025b50.00b0f4c",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4334.883331298828,
        "y": 1008.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "d9c9bf69.d54ef8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4168.883331298828,
        "y": 916.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "eba0d9fe.14aff8",
                "e7c33475.7e91e8"
            ]
        ]
    },
    {
        "id": "5ac63627.c33ff",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4174.883331298828,
        "y": 980.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b156164c.4afee",
                "5025b50.00b0f4c"
            ]
        ]
    },
    {
        "id": "35523eeb.15287a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4174.883331298828,
        "y": 1086.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "c46834b2.126828",
                "7dcc31dd.14e278"
            ]
        ]
    },
    {
        "id": "377b88b8.aaeb48",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4177.883331298828,
        "y": 1139.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "67f1e499.325a54",
                "e00fdb48.f91848"
            ]
        ]
    },
    {
        "id": "7dcc31dd.14e278",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4334.883331298828,
        "y": 1099.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "e00fdb48.f91848",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4337.883331298828,
        "y": 1190.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "b1c3c9b6.d1dd38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3709.883331298828,
        "y": 2400.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "8d971e70.183d4",
                "ac7f0ae7.0820f"
            ]
        ]
    },
    {
        "id": "37cdc12f.574c9e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3537.216827392578,
        "y": 2401.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b1c3c9b6.d1dd38"
            ]
        ]
    },
    {
        "id": "17fb9abf.e94b5d",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3546.707794189453,
        "y": 2444.4573669433594,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ffec1f14.6b38f8"
            ]
        ]
    },
    {
        "id": "77126cff.9c26a4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3535.216827392578,
        "y": 2490.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "6fe13c0.1437ac4"
            ]
        ]
    },
    {
        "id": "ffec1f14.6b38f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3700.2792053222656,
        "y": 2447.7431030273438,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "6fe13c0.1437ac4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3704.216827392578,
        "y": 2491.883331298828,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "8d971e70.183d4",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3996.216827392578,
        "y": 2404.8834533691406,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "53133799.37d4b",
                "a86f569d.6ab9f8"
            ]
        ]
    },
    {
        "id": "a86f569d.6ab9f8",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4219.216827392578,
        "y": 2359.8834533691406,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "66c68013.ddb6b8"
            ]
        ]
    },
    {
        "id": "53133799.37d4b",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4221.216827392578,
        "y": 2423.8834533691406,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "7ccc7afc.6f2a8c"
            ]
        ]
    },
    {
        "id": "7ccc7afc.6f2a8c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4380.216827392578,
        "y": 2442.8834533691406,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "66c68013.ddb6b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4384.216827392578,
        "y": 2356.8834533691406,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "14b7c942.3a7d87",
                "705ad60b.9c1b38"
            ]
        ]
    },
    {
        "id": "6b364584.e1350c",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3998.216827392578,
        "y": 2563.8834533691406,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "2e817e1e.7658f2",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4043.216827392578,
        "y": 2473.8834533691406,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "1f716896.64ed2f",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4125.216827392578,
        "y": 2628.8834533691406,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "221f1c18.663f6c",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3309.216827392578,
        "y": 2436.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "37cdc12f.574c9e",
                "17fb9abf.e94b5d",
                "77126cff.9c26a4"
            ]
        ]
    },
    {
        "id": "b3b2ce86.7d813",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3270.216827392578,
        "y": 2380.883331298828,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "a001cedc.58f128",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3327.216827392578,
        "y": 2099.8832092285156,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d5568173.1326d",
                "27e39e34.e8a4aa"
            ]
        ]
    },
    {
        "id": "27e39e34.e8a4aa",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3550.216827392578,
        "y": 2085.8832092285156,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ba49d8fd.b81698"
            ]
        ]
    },
    {
        "id": "d5568173.1326d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3552.216827392578,
        "y": 2118.8832092285156,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "54689cfb.423da4"
            ]
        ]
    },
    {
        "id": "54689cfb.423da4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3695.216827392578,
        "y": 2115.8832092285156,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "ba49d8fd.b81698",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3698.216827392578,
        "y": 2078.8832092285156,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e65b9c6b.1cea38",
                "e0207e5b.773f7"
            ]
        ]
    },
    {
        "id": "e65b9c6b.1cea38",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3892.216827392578,
        "y": 2081.883331298828,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "ac7f0ae7.0820f",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3955.216827392578,
        "y": 2713.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "eb66de49.8a6178"
            ]
        ]
    },
    {
        "id": "eb66de49.8a6178",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4161.216827392578,
        "y": 2713.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "a3eb7777.2808e"
            ]
        ]
    },
    {
        "id": "a3eb7777.2808e",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4378.502471923828,
        "y": 2712.705108642578,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "90bfeab5.6e04"
            ]
        ]
    },
    {
        "id": "e0207e5b.773f7",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3914.216827392578,
        "y": 2149.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ff3d2407.61718",
                "f34e14e1.674a08",
                "f7ebc3eb.0fe87"
            ]
        ]
    },
    {
        "id": "ff3d2407.61718",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4109.716949462891,
        "y": 2101.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e4f3177f.7fd418"
            ]
        ]
    },
    {
        "id": "f34e14e1.674a08",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4101.716949462891,
        "y": 2156.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "7e75e0e1.a6768"
            ]
        ]
    },
    {
        "id": "f7ebc3eb.0fe87",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4106.716949462891,
        "y": 2213.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "917fd40f.ec43b"
            ]
        ]
    },
    {
        "id": "917fd40f.ec43b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4258.716949462891,
        "y": 2214.883331298828,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "7e75e0e1.a6768",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4269.716949462891,
        "y": 2159.883331298828,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "e4f3177f.7fd418",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4254.099273681641,
        "y": 2099.5390014648438,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "96db4a5c.6d74f"
            ]
        ]
    },
    {
        "id": "14b7c942.3a7d87",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 4554.216827392578,
        "y": 2317.8834533691406,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "705ad60b.9c1b38",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 4555.216827392578,
        "y": 2422.8834533691406,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "fe24857d.ec88f8",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4550.216827392578,
        "y": 2371.8834533691406,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "90bfeab5.6e04",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4585.334014892578,
        "y": 2702.2237854003906,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d29ec4c3.e3026",
                "3dd34bd3.f84b34",
                "855f6bda.886bb"
            ]
        ]
    },
    {
        "id": "d29ec4c3.e3026",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4800.334014892578,
        "y": 2664.2237854003906,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "3dd34bd3.f84b34",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4797.334014892578,
        "y": 2703.2237854003906,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "498fc826.7744e"
            ]
        ]
    },
    {
        "id": "855f6bda.886bb",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4752.834014892578,
        "y": 2745.2237854003906,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "498fc826.7744e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4977.834014892578,
        "y": 2702.2237854003906,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3dffa556.ecd0ba"
            ]
        ]
    },
    {
        "id": "3dffa556.ecd0ba",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5135.834014892578,
        "y": 2702.2237854003906,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e57a350c.677e18"
            ]
        ]
    },
    {
        "id": "e57a350c.677e18",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5342.834014892578,
        "y": 2702.2237854003906,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "321528be.3d7ae",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4836.216827392578,
        "y": 2117.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e56d9c92.9b763"
            ]
        ]
    },
    {
        "id": "e56d9c92.9b763",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5013.216827392578,
        "y": 2109.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "251b7dfd.9c2dea",
                "f747044b.58f4e"
            ]
        ]
    },
    {
        "id": "96db4a5c.6d74f",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4438.216827392578,
        "y": 2113.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3dedc7fb.152e08"
            ]
        ]
    },
    {
        "id": "3dedc7fb.152e08",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4633.216827392578,
        "y": 2113.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "321528be.3d7ae",
                "b22cff66.f669e8"
            ]
        ]
    },
    {
        "id": "f747044b.58f4e",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5221.216827392578,
        "y": 2116.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "1f813de4.828122",
                "d83bccad.38e8b8",
                "c46088f8.fb1e"
            ]
        ]
    },
    {
        "id": "cd687e81.f269c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5015.216827392578,
        "y": 2182.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "44576406.503604"
            ]
        ]
    },
    {
        "id": "b22cff66.f669e8",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4838.216827392578,
        "y": 2190.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "cd687e81.f269c8"
            ]
        ]
    },
    {
        "id": "251b7dfd.9c2dea",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5251.216827392578,
        "y": 2064.883331298828,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "44576406.503604",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5250.216827392578,
        "y": 2306.883331298828,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "1f813de4.828122",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5431.216827392578,
        "y": 2107.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9f1d5683.34bf48"
            ]
        ]
    },
    {
        "id": "d83bccad.38e8b8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5423.216827392578,
        "y": 2162.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3d8c6a19.63c47e"
            ]
        ]
    },
    {
        "id": "c46088f8.fb1e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5428.216827392578,
        "y": 2219.883331298828,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "868d602e.d270d8"
            ]
        ]
    },
    {
        "id": "868d602e.d270d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5580.216827392578,
        "y": 2220.883331298828,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "3d8c6a19.63c47e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5591.216827392578,
        "y": 2165.883331298828,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "9f1d5683.34bf48",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5575.599151611328,
        "y": 2105.5390014648438,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "580e8311.7470f4"
            ]
        ]
    },
    {
        "id": "580e8311.7470f4",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5790.216827392578,
        "y": 2101.883331298828,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "77955a17.d633ac",
        "type": "set",
        "name": "set LEAF stuff",
        "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
        "comments": "",
        "x": 3288.883331298828,
        "y": 1711.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "88408865.7d27f8",
        "type": "comment",
        "name": "This is it (should be)",
        "info": "",
        "comments": "",
        "x": 4510.883331298828,
        "y": 994.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "d43945c8.bc5bc",
        "type": "comment",
        "name": "This is it (should be)",
        "info": "",
        "comments": "",
        "x": 4502.883331298828,
        "y": 1084.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "1e4146ab.95c211",
        "type": "set",
        "name": "set ROOT stuff",
        "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
        "comments": "",
        "x": 3269.883331298828,
        "y": 2567.883331298828,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "893317d2.3ef5f",
        "type": "save",
        "name": "save connectivityA relationship to UNI-LEAF, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3401.883331298828,
        "y": 1817.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "fd0edd2e.c98978",
        "type": "save",
        "name": "save LEAF UNI in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-p-interface-short`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3308.883331298828,
        "y": 1764.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "98563074.1e7ea",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2426.883331298828,
        "y": 142.88333129882812,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "c475408d.68ef",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 2360.883331298828,
        "y": 178.88333129882812,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "e109d5f4.51e5d",
        "type": "comment",
        "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
        "info": "",
        "comments": "",
        "x": 2545.883331298828,
        "y": 105.88333129882812,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "2e92209c.b2514",
        "type": "comment",
        "name": "NOT NEEDED ANYMORE?",
        "info": "",
        "comments": "",
        "x": 4036.883331298828,
        "y": 1795.8833312988281,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "cc84986.18b2868",
        "type": "comment",
        "name": "NOT NEEDED ANYMORE?",
        "info": "",
        "comments": "",
        "x": 4014.883331298828,
        "y": 2665.883331298828,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "e351db25.84cdc8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3441.8837890625,
        "y": 7438.88330078125,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "bbb27c53.89e32",
        "type": "comment",
        "name": "START OF DELETE OPERATION",
        "info": "",
        "comments": "",
        "x": 3288.88330078125,
        "y": 2897.88330078125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "3023ae1c.6e2482",
        "type": "save",
        "name": "delete LEAF uni resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3874.566650390625,
        "y": 3087.283447265625,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "a4dfc5e6.4600f",
        "type": "save",
        "name": "get LEAF uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.LEAF.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.leafuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3245.566650390625,
        "y": 3017.283447265625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3c4fb74b.12c308",
                "cc5ca51c.d55828",
                "10482aca.fa7bbd"
            ]
        ]
    },
    {
        "id": "cc5ca51c.d55828",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3473.0576171875,
        "y": 2989.857421875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f3fff98e.f3e778"
            ]
        ]
    },
    {
        "id": "10482aca.fa7bbd",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3468.566650390625,
        "y": 3034.2833862304688,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "686bd6b1.dd501"
            ]
        ]
    },
    {
        "id": "f3fff98e.f3e778",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3635.629150390625,
        "y": 2989.1431274414062,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "686bd6b1.dd501",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3636.566650390625,
        "y": 3034.2833862304688,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "3c4fb74b.12c308",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3480.566650390625,
        "y": 3084.283447265625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9563229e.3fe02"
            ]
        ]
    },
    {
        "id": "9563229e.3fe02",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3632.88330078125,
        "y": 3087.88330078125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f32c210.90e5fe",
                "3023ae1c.6e2482",
                "dfd78621.0c4df"
            ]
        ]
    },
    {
        "id": "f32c210.90e5fe",
        "type": "set",
        "name": "set bwToBeDecreased tpid cvlan",
        "xml": "<set>\n<parameter name='bwToBeDecreased' value=\"`$tmp.aai.leafuni.data-source`\" />\n<parameter name='tpid' value='`$tmp.aai.leafuni.tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.leafuni.cvlan`' />\n\n\n",
        "comments": "",
        "x": 3877.566650390625,
        "y": 3030.283447265625,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "4c9abbae.5d458c",
        "type": "comment",
        "name": "Update ROOT UNI's bw",
        "info": "",
        "comments": "",
        "x": 3833.566650390625,
        "y": 3193.083251953125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "547f08e5.b430b",
        "type": "save",
        "name": "update ROOT UNI in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4435.566650390625,
        "y": 3298.083251953125,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "dfd78621.0c4df",
        "type": "save",
        "name": "get root uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3825.56640625,
        "y": 3239.083251953125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "51d31fac.6dab6",
                "d9c98a3d.c2af8",
                "e932164d.0b10e8"
            ]
        ]
    },
    {
        "id": "d9c98a3d.c2af8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4053.057373046875,
        "y": 3211.6572265625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f1a39628.bdc748"
            ]
        ]
    },
    {
        "id": "e932164d.0b10e8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4048.56640625,
        "y": 3256.0831909179688,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "dfc7b8eb.48de78"
            ]
        ]
    },
    {
        "id": "f1a39628.bdc748",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4215.62890625,
        "y": 3210.9429321289062,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "dfc7b8eb.48de78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4216.56640625,
        "y": 3256.0831909179688,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "dd0cc66d.fbf3a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4213.56640625,
        "y": 3306.083251953125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9a3f7682.b82b9",
                "547f08e5.b430b"
            ]
        ]
    },
    {
        "id": "51d31fac.6dab6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4044.56640625,
        "y": 3306.083251953125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "dd0cc66d.fbf3a8"
            ]
        ]
    },
    {
        "id": "9a3f7682.b82b9",
        "type": "set",
        "name": "set new bw",
        "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source - $bwToBeDecreased`' />\n",
        "comments": "",
        "x": 4395.567138671875,
        "y": 3248.083251953125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "998e4ab7.4d5be",
        "type": "comment",
        "name": "Delete LEAF UNI",
        "info": "",
        "comments": "",
        "x": 3825.88330078125,
        "y": 2971.88330078125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "44b90aa0.b32f1c",
        "type": "set",
        "name": "set current-provider-id and current-cvlan-id",
        "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
        "comments": "",
        "x": 3311.749969482422,
        "y": 3750.483367919922,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "2a719f3a.33348",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3444.749969482422,
        "y": 3798.483367919922,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "33975a1e.497a26",
        "type": "switchNode",
        "name": "switch found-connectivity?",
        "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3266.749969482422,
        "y": 3850.283416748047,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "6169e5ef.6af5c4",
                "e3565ed9.a6bae8"
            ]
        ]
    },
    {
        "id": "6169e5ef.6af5c4",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3459.749969482422,
        "y": 3851.283416748047,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3f7c202a.f0897"
            ]
        ]
    },
    {
        "id": "3f7c202a.f0897",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"LEAF CONN DOES NOT EXIST BUT IT SHOULD BE.\" />\n\n",
        "comments": "",
        "x": 3603.749969482422,
        "y": 3847.483367919922,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "e3565ed9.a6bae8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3463.749969482422,
        "y": 3895.283416748047,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "c54729aa.dea04"
            ]
        ]
    },
    {
        "id": "c54729aa.dea04",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3602.749969482422,
        "y": 3890.283416748047,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "563cd7a4.5a9238",
                "f2c9af7.5a8ebd",
                "2a4d2a1b.ff481e"
            ]
        ]
    },
    {
        "id": "563cd7a4.5a9238",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.the-connectivity.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3853.149627685547,
        "y": 3898.800018310547,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ec034714.60ea58"
            ]
        ]
    },
    {
        "id": "ec034714.60ea58",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.the-connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4075.149627685547,
        "y": 3876.800018310547,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e531db92.56031"
            ]
        ]
    },
    {
        "id": "e531db92.56031",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4235.149139404297,
        "y": 3856.800018310547,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d94f5698.a9e22"
            ]
        ]
    },
    {
        "id": "717ee9f8.5f5168",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4388.149658203125,
        "y": 3837.800048828125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "44024f46.b6d6d",
                "8cf84976.9daac8"
            ]
        ]
    },
    {
        "id": "44024f46.b6d6d",
        "type": "set",
        "name": "set tmp.stillHasUni to TRUE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='true' />\n",
        "comments": "",
        "x": 4584.649871826172,
        "y": 3805.883270263672,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "f2c9af7.5a8ebd",
        "type": "set",
        "name": "set tmp.stillHasUn tmp.keepVPNBs to FALSE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='false' />\n<parameter name='tmp.keepVPNBs' value='false' />\n",
        "comments": "",
        "x": 3959.64990234375,
        "y": 3817.88330078125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "2a4d2a1b.ff481e",
        "type": "switchNode",
        "name": "switch tmp.keepVPNBs?",
        "xml": "\n<switch test=\"`$tmp.keepVPNBs`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3767.64990234375,
        "y": 4238.883544921875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "39fb0c16.c2b2c4",
                "808499cb.5bf588"
            ]
        ]
    },
    {
        "id": "8cf84976.9daac8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4552.88330078125,
        "y": 3873.88330078125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "808499cb.5bf588",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 154.65066528320312,
        "y": 5302.8837890625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "7018ac1a.7a3c7c"
            ]
        ]
    },
    {
        "id": "39fb0c16.c2b2c4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3988.650634765625,
        "y": 4340.883544921875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "a235b563.2e3c2"
            ]
        ]
    },
    {
        "id": "a235b563.2e3c2",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4131.650634765625,
        "y": 4336.883544921875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ca74ec50.92ce48",
                "76172197.657ac",
                "2a3f4733.a29bc",
                "c850b8e4.0504c8",
                "46570b89.8afbb4",
                "819543bf.270a9",
                "ca7e6690.5ab92",
                "26004944.36227e"
            ]
        ]
    },
    {
        "id": "9d4f67a6.1fc128",
        "type": "comment",
        "name": "keepVPNBs == false, then check tmp.stillHasUni",
        "info": "(2) keepVPNBs == false, means there are no other UNIs in this\nsame domain and same connectivity that share the same OLT node.\n\ncheck if tmp.stillHasUni is True or False?\n\nif TRUE --> means this domain (connectivity) still has other UNIs\n- delete VPNBs\n- delete LEAF UNI in AAI -- DONE\n- upadte bw in ROOT UNI -- DONE\n- delete LEAF UNI in LEAF ethernet service PNC\n- change ROOT conn status to Modified\n\nif FALSE --> means this domain (connectivity) has no other UNIs\n\nif MMstillHasUni == TRUE, means scenario (3), else, means scenario (4)\n\n(3) & (4) both:\n- delete VPNBs\n- delete LEAF connectivity\n- delete LEAF Ethernet Service from PNC\n\n(3) only:\n- change ROOT conn status to Modified\n- Keep the middle-man-conn and DON'T delete\n\n(4) only:\n- delete ROOT UNI\n- delete ROOT conn from AAI\n- delete ROOT Ethernet Service from PNC\n- delete middle-man-conn from AAI\n\n",
        "comments": "",
        "x": 181,
        "y": 5258.8837890625,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "cbdd9201.8f12c8",
        "type": "comment",
        "name": "There are still other UNIs in this connectivity that share same OLT node. Only update bw of the vpn-bindings involved",
        "info": "(1) keepVPNBs == true, means there are still other UNIs in this\nsame domain and same connectivity that share the same OLT node.\n\n- Only update bw of the vpn-bindings involved -- DONE\n- upadte bw in ROOT UNI -- DONE\n- change ROOT conn status to Modified -- DONE\n- delete LEAF UNI in AAI -- DONE\n- delete LEAF UNI in LEAF ethernet service PNC -- DONE\n- DON'T delete the connectivities of LEAF and ROOT -- DONE\nAlso update the ethernet services",
        "comments": "",
        "x": 4007.884033203125,
        "y": 4303.883544921875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "a3d91414.090028",
        "type": "set",
        "name": "set srcTtp OTN layer",
        "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
        "comments": "",
        "x": 4820.667724609375,
        "y": 4494.6669921875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "8bf6af15.0a9a48",
        "type": "switchNode",
        "name": "switch provider-id domainA",
        "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5165.667724609375,
        "y": 4356.6669921875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "8859d6ca.2f75b8"
            ]
        ]
    },
    {
        "id": "c067ba23.0c8be",
        "type": "for",
        "name": "for netwidx..allNetworksList_length",
        "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 4872.667724609375,
        "y": 4350.6669921875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "8bf6af15.0a9a48"
            ]
        ]
    },
    {
        "id": "2da7141c.ae03fc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5127.667724609375,
        "y": 4307.6669921875,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "1cbc0879.d4095",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
        "comments": "",
        "x": 4816.667724609375,
        "y": 4402.6669921875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "faedf550.ca72d",
        "type": "set",
        "name": "set tmp.pce-src-node",
        "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
        "comments": "",
        "x": 4824.667724609375,
        "y": 4447.6669921875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "1b550765.eaf4d1",
        "type": "set",
        "name": "unset otnTopoIdSrc",
        "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
        "comments": "",
        "x": 4821.667724609375,
        "y": 4300.6669921875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "8859d6ca.2f75b8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5074.667724609375,
        "y": 4424.6669921875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b9fd6938.f76ca8"
            ]
        ]
    },
    {
        "id": "b9fd6938.f76ca8",
        "type": "switchNode",
        "name": "switch te-topo-id",
        "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5259.667724609375,
        "y": 4423.6669921875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d7c2d227.430278"
            ]
        ]
    },
    {
        "id": "d7c2d227.430278",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5451.667724609375,
        "y": 4426.6669921875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9062d4ad.31e34"
            ]
        ]
    },
    {
        "id": "9062d4ad.31e34",
        "type": "set",
        "name": "set otnTopoIdSrc",
        "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
        "comments": "",
        "x": 5623.667724609375,
        "y": 4422.6669921875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "c312f389.231768",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4999.667724609375,
        "y": 4537.6669921875,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "ca74ec50.92ce48",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4516.667724609375,
        "y": 4322.6669921875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3f12b93a.0cf81e",
                "24786620.817bb2",
                "1cbc0879.d4095",
                "faedf550.ca72d",
                "a3d91414.090028",
                "c067ba23.0c8be",
                "c312f389.231768"
            ]
        ]
    },
    {
        "id": "1877ba6b.c5c236",
        "type": "comment",
        "name": "The following section is to find srcTtp OTN layer (its long name)",
        "info": "The following section is to find srcTtp OTN layer (its long name)",
        "comments": "",
        "x": 4501.667724609375,
        "y": 4256.6669921875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "24786620.817bb2",
        "type": "get-resource",
        "name": "get-resource network-resources-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
        "comments": "",
        "outputs": 1,
        "x": 4880.667724609375,
        "y": 4243.6669921875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "c082f0f0.3fe63",
                "8aa79b73.5d91b",
                "2da7141c.ae03fc"
            ]
        ]
    },
    {
        "id": "c082f0f0.3fe63",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5116.667724609375,
        "y": 4226.6669921875,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "8aa79b73.5d91b",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5113.667724609375,
        "y": 4267.6669921875,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "3f12b93a.0cf81e",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
        "comments": "",
        "x": 4829.667724609375,
        "y": 4200.6669921875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "76172197.657ac",
        "type": "set",
        "name": "unset tmp.aai.all-vpn-bindings",
        "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value='' />\n",
        "comments": "",
        "x": 4336.667724609375,
        "y": 4655.06689453125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "d9693eef.d5133",
        "type": "comment",
        "name": "find all OTNs that have srcTtpOtnLayer and decrease their bandwidth",
        "info": "",
        "comments": "",
        "x": 4459.968017578125,
        "y": 4694.06689453125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "2a3f4733.a29bc",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 4357.968017578125,
        "y": 4729.06689453125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e8babd58.4782b",
                "e0bbecb2.837888",
                "bb53595.0530328"
            ]
        ]
    },
    {
        "id": "e8babd58.4782b",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4562.968017578125,
        "y": 4726.06689453125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "8299b116.2a1f1"
            ]
        ]
    },
    {
        "id": "e0bbecb2.837888",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4546.458984375,
        "y": 4787.640930175781,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "af952dc7.60185"
            ]
        ]
    },
    {
        "id": "bb53595.0530328",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4543.968017578125,
        "y": 4831.06689453125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "a2d64007.4e8e68"
            ]
        ]
    },
    {
        "id": "8299b116.2a1f1",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4730.96826171875,
        "y": 4721.06689453125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "575eea2a.c26ae4"
            ]
        ]
    },
    {
        "id": "af952dc7.60185",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4709.0303955078125,
        "y": 4787.926666259766,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "a2d64007.4e8e68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4710.968017578125,
        "y": 4830.06689453125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "575eea2a.c26ae4",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4968.96826171875,
        "y": 4726.06689453125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b0cdcdcc.86b948"
            ]
        ]
    },
    {
        "id": "b0cdcdcc.86b948",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5202.968017578125,
        "y": 4733.06689453125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "fe17da41.8d7458"
            ]
        ]
    },
    {
        "id": "63f7f511.d89814",
        "type": "comment",
        "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
        "info": "",
        "comments": "",
        "x": 5188.784423828125,
        "y": 4955.2333984375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "fe17da41.8d7458",
        "type": "switchNode",
        "name": "switch ops-note is srcTtpOtnLayer",
        "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5221.784423828125,
        "y": 5023.2333984375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "adceca9b.52be78",
                "6371c80.a864db8"
            ]
        ]
    },
    {
        "id": "6371c80.a864db8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5465.784454345703,
        "y": 4995.233184814453,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "adceca9b.52be78",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5346.784423828125,
        "y": 4921.233154296875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "eabe2b02.0bc13"
            ]
        ]
    },
    {
        "id": "eabe2b02.0bc13",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5473.767822265625,
        "y": 4859.649658203125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b15dfc5.1130d",
                "7054ba61.11f874",
                "e5483e65.23a9a"
            ]
        ]
    },
    {
        "id": "771d8350.1c0644",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='vpnbridx' start='0' end='`$tmp.aai.the-vpn-binding.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5709.8173828125,
        "y": 4743.64990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3a42df45.8a578"
            ]
        ]
    },
    {
        "id": "3a42df45.8a578",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5901.8173828125,
        "y": 4732.650146484375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f5feb746.9bcea8"
            ]
        ]
    },
    {
        "id": "b15dfc5.1130d",
        "type": "set",
        "name": "unset tmp.aai.the-vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
        "comments": "",
        "x": 5658.334228515625,
        "y": 4633.866943359375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "7054ba61.11f874",
        "type": "set",
        "name": "set tmp.aai.the-vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
        "comments": "",
        "x": 5650.334228515625,
        "y": 4682.866943359375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "e5483e65.23a9a",
        "type": "save",
        "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.the-vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher - $bwToBeDecreased`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5881.751220703125,
        "y": 4864.032958984375,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "c01f7460.fab75",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5833.401123046875,
        "y": 4911.349853515625,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "a637b405.b076f",
        "type": "comment",
        "name": "decrease the bw of the-vpn-binding and change status to modified",
        "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
        "comments": "",
        "x": 5905.751220703125,
        "y": 4825.032958984375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "f5feb746.9bcea8",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6083.8173828125,
        "y": 4711.650146484375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "4f7dc832.d994c8"
            ]
        ]
    },
    {
        "id": "4f7dc832.d994c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6245.8173828125,
        "y": 4700.650146484375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f7240b03.b46408",
                "a1eea84d.7200b"
            ]
        ]
    },
    {
        "id": "f7240b03.b46408",
        "type": "set",
        "name": "unset tmp.the-connectivity",
        "xml": "<set>\n<parameter name='tmp.the-connectivity.' value='' />\n",
        "comments": "",
        "x": 6442.8173828125,
        "y": 4629.650146484375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "a1eea84d.7200b",
        "type": "set",
        "name": "set tmp.the-connectivity",
        "xml": "<set>\n<parameter name='tmp.the-connectivity.' value='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].relationship-data[0].relationship-value`' />\n",
        "comments": "",
        "x": 6440.2841796875,
        "y": 4728.866943359375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "ce0d81bd.d28a7",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3097.800048828125,
        "y": 3187.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "7f04acf4.5afc3c",
        "type": "switchNode",
        "name": "switch found-middle-man?",
        "xml": "<switch test='`$found-middle-man`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2974.800048828125,
        "y": 3297.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d1c2eeb4.215af8",
                "f1f6bb53.ccd5d8"
            ]
        ]
    },
    {
        "id": "d1c2eeb4.215af8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3158.800048828125,
        "y": 3276.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d53b6d30.115bd"
            ]
        ]
    },
    {
        "id": "d53b6d30.115bd",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3301.800048828125,
        "y": 3276.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "5f773b5f.84092c"
            ]
        ]
    },
    {
        "id": "5f773b5f.84092c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"LEAF CONN DOES NOT EXIST BUT IT SHOULD BE.\" />\n\n",
        "comments": "",
        "x": 3477.800048828125,
        "y": 3274.683349609375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "f1f6bb53.ccd5d8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3156.800048828125,
        "y": 3331.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e42ba1d9.fa7b7"
            ]
        ]
    },
    {
        "id": "e42ba1d9.fa7b7",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3003.800048828125,
        "y": 3464.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "44b90aa0.b32f1c",
                "2a719f3a.33348",
                "33975a1e.497a26",
                "c19f56be.5aa798",
                "eb35e3d0.6d25d",
                "5aebe180.f62f68"
            ]
        ]
    },
    {
        "id": "5c85f7ca.d8c4a",
        "type": "comment",
        "name": "Find LEAF connectivity",
        "info": "",
        "comments": "",
        "x": 3225.88330078125,
        "y": 3704.88330078125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "c19f56be.5aa798",
        "type": "set",
        "name": "set tmp.MMstillHasUni to FALSE",
        "xml": "<set>\n<parameter name='tmp.MMstillHasUni' value='false' />\n",
        "comments": "",
        "x": 3308.333251953125,
        "y": 3477.683349609375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "eb35e3d0.6d25d",
        "type": "for",
        "name": "for each relationship of middle-man-conn",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$middle-man-conn.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3306.8330078125,
        "y": 3523.60009765625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ca4bb58e.913108"
            ]
        ]
    },
    {
        "id": "ca4bb58e.913108",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$middle-man-conn.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3569.8330078125,
        "y": 3518.60009765625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "468a474d.40c4d8"
            ]
        ]
    },
    {
        "id": "468a474d.40c4d8",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3729.83251953125,
        "y": 3498.60009765625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e61de8ad.7030f"
            ]
        ]
    },
    {
        "id": "3444ada9.d2b992",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4498.833740234375,
        "y": 3533.60009765625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "7b31b3f.9c4444c",
                "31b46b09.5b560c",
                "a9c3a9a9.0f7c28"
            ]
        ]
    },
    {
        "id": "7b31b3f.9c4444c",
        "type": "set",
        "name": "set tmp.MMstillHasUni to TRUE",
        "xml": "<set>\n<parameter name='tmp.MMstillHasUni' value='true' />\n",
        "comments": "",
        "x": 4738.334228515625,
        "y": 3482.683349609375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "31b46b09.5b560c",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4671.567657470703,
        "y": 3555.683380126953,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "dbe78677.7f04b8",
        "type": "comment",
        "name": "Find LEAF and ROOT connectivities and remove UNI from PNC",
        "info": "",
        "comments": "",
        "x": 4432.88427734375,
        "y": 5085.883544921875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "c850b8e4.0504c8",
        "type": "set",
        "name": "set tmp.leafconn.",
        "xml": "<set>\n<parameter name='tmp.leafconn.' value='`$tmp.the-connectivity.`' />\n",
        "comments": "",
        "x": 4331.317138671875,
        "y": 5137.800048828125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "ca7e6690.5ab92",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4482.317138671875,
        "y": 5580.800048828125,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "26004944.36227e",
        "type": "switchNode",
        "name": "switch found-root-connectivity",
        "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4297.317138671875,
        "y": 5647.800048828125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "c57768ca.7a8088",
                "7224490d.b02598"
            ]
        ]
    },
    {
        "id": "c57768ca.7a8088",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4562.317138671875,
        "y": 5632.800048828125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "25615183.2d4bd6"
            ]
        ]
    },
    {
        "id": "7224490d.b02598",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4558.317138671875,
        "y": 5680.800048828125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "5dcdd7b9.89499"
            ]
        ]
    },
    {
        "id": "25615183.2d4bd6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4718.317138671875,
        "y": 5628.800048828125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9b98cd10.6cfb68"
            ]
        ]
    },
    {
        "id": "5dcdd7b9.89499",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
        "comments": "",
        "x": 4706.317138671875,
        "y": 5675.800048828125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "f97c958c.da83b8",
        "type": "set",
        "name": "set tmp.rootconn.",
        "xml": "<set>\n<parameter name='tmp.rootconn.' value=\"`$tmp.aai.ROOT.connectivity.`\" />\n\n\n",
        "comments": "",
        "x": 5138.3173828125,
        "y": 5570.800048828125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "903178c6.839788",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.leafconn.access-provider-id + '-clientId-' +\n                                                   $tmp.leafconn.access-client-id + '-topologyId-' +\n                                                   $tmp.leafconn.access-topology-id + '-nodeId-' +\n                                                   $tmp.leafconn.access-node-id`\" />\n",
        "comments": "",
        "x": 4540.734130859375,
        "y": 5167.083740234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "46570b89.8afbb4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4311.734130859375,
        "y": 5256.083740234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "903178c6.839788",
                "42c91ccf.e64244"
            ]
        ]
    },
    {
        "id": "42c91ccf.e64244",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4547.734130859375,
        "y": 5249.083740234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "30eabd9c.98c532",
                "66fbb0fb.26a3f",
                "fbd21163.a12cd8"
            ]
        ]
    },
    {
        "id": "30eabd9c.98c532",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4743.2342529296875,
        "y": 5201.083740234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "26c5ac0c.2065fc"
            ]
        ]
    },
    {
        "id": "66fbb0fb.26a3f",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4735.2342529296875,
        "y": 5256.083740234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "a0a0372d.9d324"
            ]
        ]
    },
    {
        "id": "26c5ac0c.2065fc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4887.6165771484375,
        "y": 5200.739410400391,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "40d1dc2e.899afc"
            ]
        ]
    },
    {
        "id": "40d1dc2e.899afc",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5071.734130859375,
        "y": 5199.083740234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "137e1346.633fe5"
            ]
        ]
    },
    {
        "id": "137e1346.633fe5",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5266.734130859375,
        "y": 5199.083740234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "19ce94ba.82e9d3"
            ]
        ]
    },
    {
        "id": "fbd21163.a12cd8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4740.2342529296875,
        "y": 5313.083740234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "4a6cd196.293db"
            ]
        ]
    },
    {
        "id": "4a6cd196.293db",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4892.2342529296875,
        "y": 5314.083740234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "a0a0372d.9d324",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4903.2342529296875,
        "y": 5257.083740234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "1398b0a6.59adbf",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5648.734130859375,
        "y": 5203.083740234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ac703b64.91e208",
                "60a60a9a.326334",
                "feb4d66b.8d20f"
            ]
        ]
    },
    {
        "id": "19ce94ba.82e9d3",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5469.734130859375,
        "y": 5203.083740234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "1398b0a6.59adbf"
            ]
        ]
    },
    {
        "id": "60a60a9a.326334",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5854.734130859375,
        "y": 5216.083740234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9885a0c6.ee00f8",
                "a77a3d25.4123b",
                "3b9ca266.b8d5f6"
            ]
        ]
    },
    {
        "id": "ac703b64.91e208",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5884.734130859375,
        "y": 5164.083740234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "9885a0c6.ee00f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6064.734130859375,
        "y": 5207.083740234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "fd819e5.0208ae"
            ]
        ]
    },
    {
        "id": "a77a3d25.4123b",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6056.734130859375,
        "y": 5262.083740234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9503eaf8.25455"
            ]
        ]
    },
    {
        "id": "3b9ca266.b8d5f6",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6061.734130859375,
        "y": 5319.083740234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "2f6c8ed.964c6f2"
            ]
        ]
    },
    {
        "id": "2f6c8ed.964c6f2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6213.734130859375,
        "y": 5320.083740234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "9503eaf8.25455",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6224.734130859375,
        "y": 5265.083740234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "fd819e5.0208ae",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6209.116455078125,
        "y": 5204.739410400391,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "fdf4316f.fecc18"
            ]
        ]
    },
    {
        "id": "fdf4316f.fecc18",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6423.734130859375,
        "y": 5201.083740234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "feb4d66b.8d20f",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 5804.734130859375,
        "y": 5280.083740234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "819543bf.270a9",
        "type": "execute",
        "name": "execute RestApiCallNode Delete LEAF UNI of ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.leafconn.etht-svc-name + '/etht-svc-end-points=' + $tmp.LEAF.uni-p-interface-long`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4453.234375,
        "y": 5360.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "fe68d2f2.044a28",
                "9d6b0bdc.79122"
            ]
        ]
    },
    {
        "id": "fe68d2f2.044a28",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4813.734130859375,
        "y": 5368.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "dd8bd538.48e76"
            ]
        ]
    },
    {
        "id": "dd8bd538.48e76",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 4971.734130859375,
        "y": 5368.683349609375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "17aac5bf.8ce3ca",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4975.234130859375,
        "y": 5408.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "9d6b0bdc.79122",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4817.734130859375,
        "y": 5408.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "17aac5bf.8ce3ca"
            ]
        ]
    },
    {
        "id": "67f63093.820248",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5126.451171875,
        "y": 5622.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9523ac21.fb27e8",
                "ee545a84.5a0b8"
            ]
        ]
    },
    {
        "id": "ee545a84.5a0b8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5368.450927734375,
        "y": 5572.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3e67e67b.64c0f2",
                "83fa1a94.1fdef",
                "8d7d3b80.341b3"
            ]
        ]
    },
    {
        "id": "3e67e67b.64c0f2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5563.951171875,
        "y": 5506.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "4b842a3.ce68254"
            ]
        ]
    },
    {
        "id": "83fa1a94.1fdef",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5559.951171875,
        "y": 5562.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "fe24638.108ff2"
            ]
        ]
    },
    {
        "id": "4b842a3.ce68254",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5708.3333740234375,
        "y": 5524.339019775391,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "471b8aca.2d2d8c"
            ]
        ]
    },
    {
        "id": "471b8aca.2d2d8c",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5892.450927734375,
        "y": 5522.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "835403d4.ab8a4"
            ]
        ]
    },
    {
        "id": "8d7d3b80.341b3",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5569.951171875,
        "y": 5607.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "dbe8e8e2.82532"
            ]
        ]
    },
    {
        "id": "dbe8e8e2.82532",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5748.951171875,
        "y": 5623.683349609375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "fe24638.108ff2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5730.951171875,
        "y": 5575.683349609375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "23127469.8e053c",
        "type": "execute",
        "name": "execute RestApiCallNode Delete UNI of ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.rootconn.etht-svc-name + '/etht-svc-end-points=' + $tmp.ROOT.uni-p-interface-long`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5279.951171875,
        "y": 5678.282958984375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "2dc53207.e6e746",
                "5dfbf094.3dd5e"
            ]
        ]
    },
    {
        "id": "2dc53207.e6e746",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5628.451171875,
        "y": 5660.282958984375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d62622e9.977188"
            ]
        ]
    },
    {
        "id": "d62622e9.977188",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 5884.451171875,
        "y": 5663.282958984375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "b15c93b0.c4d298",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5836.951171875,
        "y": 5704.282958984375,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "5dfbf094.3dd5e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5638.451171875,
        "y": 5709.282958984375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b15c93b0.c4d298"
            ]
        ]
    },
    {
        "id": "9523ac21.fb27e8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.rootconn.access-provider-id + '-clientId-' +\n                                                   $tmp.rootconn.access-client-id + '-topologyId-' +\n                                                   $tmp.rootconn.access-topology-id + '-nodeId-' +\n                                                   $tmp.rootconn.access-node-id`\" />\n",
        "comments": "",
        "x": 5361.450927734375,
        "y": 5490.683349609375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "835403d4.ab8a4",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6087.450927734375,
        "y": 5522.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "44025b35.70e694"
            ]
        ]
    },
    {
        "id": "defb6a74.ad63a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6469.450927734375,
        "y": 5526.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f54f4ae0.ec5cf",
                "af149106.171db",
                "c5fc8f53.576908"
            ]
        ]
    },
    {
        "id": "44025b35.70e694",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6290.450927734375,
        "y": 5526.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "defb6a74.ad63a8"
            ]
        ]
    },
    {
        "id": "af149106.171db",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6675.450927734375,
        "y": 5539.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "c7dae6ee.db5f08",
                "40d56e1d.9aacd",
                "1547569.25d2329"
            ]
        ]
    },
    {
        "id": "f54f4ae0.ec5cf",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6705.450927734375,
        "y": 5487.683349609375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "c7dae6ee.db5f08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6885.450927734375,
        "y": 5530.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f0410cd5.fae628"
            ]
        ]
    },
    {
        "id": "40d56e1d.9aacd",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6877.450927734375,
        "y": 5585.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "76b0a417.e1276c"
            ]
        ]
    },
    {
        "id": "1547569.25d2329",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6882.450927734375,
        "y": 5642.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b3783d48.7ea6c8"
            ]
        ]
    },
    {
        "id": "b3783d48.7ea6c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7034.450927734375,
        "y": 5643.683349609375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "76b0a417.e1276c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7045.450927734375,
        "y": 5588.683349609375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "f0410cd5.fae628",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7029.833251953125,
        "y": 5528.339019775391,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "4ccba011.1ac588"
            ]
        ]
    },
    {
        "id": "4ccba011.1ac588",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7244.450927734375,
        "y": 5524.683349609375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "c5fc8f53.576908",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6625.450927734375,
        "y": 5603.683349609375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "e61de8ad.7030f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3854.88330078125,
        "y": 3492.88330078125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f1f60f7b.897558",
                "9394ecba.bbac2"
            ]
        ]
    },
    {
        "id": "f1f60f7b.897558",
        "type": "set",
        "name": "set tmp.mmUNI-id-long",
        "xml": "<set>\n<parameter name='tmp.mmUNI-id-long' value='`$middle-man-conn.relationship-list.relationship[$cridx].relationship-data[0].relationship-value`' />\n",
        "comments": "",
        "x": 4045.466552734375,
        "y": 3435.683349609375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "9394ecba.bbac2",
        "type": "switchNode",
        "name": "switch tmp.mmUNI-id-long != ROOT UNI",
        "xml": "\n<switch test=\"`$tmp.mmUNI-id-long != $tmp.ROOT.uni-p-interface-long`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4092.466552734375,
        "y": 3506.683349609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "62b44b4b.e9462c",
                "2e901346.daa35c"
            ]
        ]
    },
    {
        "id": "62b44b4b.e9462c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4330.884033203125,
        "y": 3465.88330078125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "646ee476.4b949c"
            ]
        ]
    },
    {
        "id": "2e901346.daa35c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4337.884246826172,
        "y": 3522.883270263672,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3444ada9.d2b992"
            ]
        ]
    },
    {
        "id": "646ee476.4b949c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4458.884521484375,
        "y": 3461.88330078125,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "5aebe180.f62f68",
        "type": "set",
        "name": "set tmp.MMonlyHasROOT to TRUE",
        "xml": "<set>\n<parameter name='tmp.MMonlyHasROOT' value='true' />\n",
        "comments": "",
        "x": 3314.083251953125,
        "y": 3420.283447265625,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "a9c3a9a9.0f7c28",
        "type": "set",
        "name": "set tmp.MMonlyHasROOT to FALSE",
        "xml": "<set>\n<parameter name='tmp.MMonlyHasROOT' value='false' />\n",
        "comments": "",
        "x": 4727.9169921875,
        "y": 3426.283447265625,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "d94f5698.a9e22",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4407.6669921875,
        "y": 3942.5,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "eb39fbed.f65188",
                "716ce6ad.3df158"
            ]
        ]
    },
    {
        "id": "eb39fbed.f65188",
        "type": "set",
        "name": "set tmp.uni.id",
        "xml": "<set>\n<parameter name='tmp.uni.id' value='`$tmp.the-connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value`' />\n",
        "comments": "",
        "x": 4580.5498046875,
        "y": 3938.15966796875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "716ce6ad.3df158",
        "type": "save",
        "name": "get uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.uni.id\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.uni\" >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4583.5498046875,
        "y": 3985.15966796875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "7301217f.c40fd8",
                "4b487020.1f862",
                "98e316f7.2a6e38"
            ]
        ]
    },
    {
        "id": "7301217f.c40fd8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4755.5498046875,
        "y": 3969.15966796875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "8014e6ef.ba6a4"
            ]
        ]
    },
    {
        "id": "4b487020.1f862",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4756.040771484375,
        "y": 4014.7337036132812,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "98e316f7.2a6e38",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4756.5498046875,
        "y": 4055.15966796875,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "8014e6ef.ba6a4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4916.5498046875,
        "y": 3965.15966796875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "6c53b06a.be741",
                "6040c967.bc9a38",
                "6b2c883f.aecd1"
            ]
        ]
    },
    {
        "id": "6986f860.3fd24",
        "type": "comment",
        "name": "find the node part of the uni.id (uni-tp-id-node-part)",
        "info": "",
        "comments": "",
        "x": 5249.5498046875,
        "y": 3896.15966796875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "6040c967.bc9a38",
        "type": "execute",
        "name": "execute split id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.uni.id`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-uni-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5184.5498046875,
        "y": 3953.15966796875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "93771b2e.0a5438",
                "494eca03.1cc0f4"
            ]
        ]
    },
    {
        "id": "494eca03.1cc0f4",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5407.5498046875,
        "y": 3939.15966796875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "4a647e39.1988"
            ]
        ]
    },
    {
        "id": "93771b2e.0a5438",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5409.5498046875,
        "y": 3972.15966796875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3ee6f9fa.cfa80e"
            ]
        ]
    },
    {
        "id": "4a647e39.1988",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5555.5498046875,
        "y": 3932.15966796875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d5960946.db6608"
            ]
        ]
    },
    {
        "id": "3ee6f9fa.cfa80e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5552.5498046875,
        "y": 3969.15966796875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "d5960946.db6608",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.uni.pnf-name' value=\"`$param-prefix-uni-pnfName[0] + '-' +\n                                                   $param-prefix-uni-pnfName[1] + '-' +\n                                                   $param-prefix-uni-pnfName[2] + '-' +\n                                                   $param-prefix-uni-pnfName[3] + '-' +\n                                                   $param-prefix-uni-pnfName[4] + '-' +\n                                                   $param-prefix-uni-pnfName[5] + '-' +\n                                                   $param-prefix-uni-pnfName[6] + '-' +\n                                                   $param-prefix-uni-pnfName[7] + '-' +\n                                                   $param-prefix-uni-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5732.5498046875,
        "y": 3932.15966796875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "6c53b06a.be741",
        "type": "switchNode",
        "name": "switch uni-tp-id-node-part is the same as the LEAF node",
        "xml": "<switch test='`$tmp.uni.pnf-name == $tmp.LEAF.pnf-name-long`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5228.5498046875,
        "y": 4087.15966796875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f825463f.981388",
                "3533ce81.16ad12"
            ]
        ]
    },
    {
        "id": "f825463f.981388",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5509.5498046875,
        "y": 4064.15966796875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "1f58973d.a6a451"
            ]
        ]
    },
    {
        "id": "3533ce81.16ad12",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5502.5498046875,
        "y": 4123.15966796875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "2ae9f04c.19c548"
            ]
        ]
    },
    {
        "id": "1f58973d.a6a451",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5639.5498046875,
        "y": 4068.15966796875,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "2ae9f04c.19c548",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5644.5498046875,
        "y": 4122.15966796875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9dd58da7.f05d6",
                "c9296d7d.c80358"
            ]
        ]
    },
    {
        "id": "9dd58da7.f05d6",
        "type": "set",
        "name": "set no-pce-call",
        "xml": "<set>\n<parameter name='no-pce-call' value=\"true\" />\n",
        "comments": "",
        "x": 5836.5498046875,
        "y": 4089.15966796875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "985a0c89.e3f6d",
        "type": "set",
        "name": "set middle-man-conn",
        "xml": "<set>\n<parameter name='middle-man-conn.' value='`$tmp.aai.all-connectivities.connectivity[$connidx].`' />\n",
        "comments": "",
        "x": 5852.5498046875,
        "y": 4141.15966796875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "c9296d7d.c80358",
        "type": "set",
        "name": "set tmp.stillHasUni and tmp.keepVPNBs to TRUE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='true' />\n<parameter name='tmp.keepVPNBs' value='true' />\n",
        "comments": "",
        "x": 5870.83349609375,
        "y": 4210.75,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "6b2c883f.aecd1",
        "type": "set",
        "name": "set tmp.stillHasUni to TRUE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='true' />\n",
        "comments": "",
        "x": 5147.533203125,
        "y": 4036.64990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "7018ac1a.7a3c7c",
        "type": "switchNode",
        "name": "switch tmp.stillHasUni?",
        "xml": "\n<switch test=\"`$tmp.stillHasUni`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 383.7339172363281,
        "y": 5306.849609375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d6a83452.cab528",
                "a3cdb153.e05c2"
            ]
        ]
    },
    {
        "id": "23ec2dfc.6ca3ea",
        "type": "save",
        "name": "get root uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 4288.516357421875,
        "y": 5470.7333984375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "89ccdd98.c0add8",
                "ffd72856.632858",
                "d24e2f90.29ea68"
            ]
        ]
    },
    {
        "id": "e3a3ebb5.52e4d",
        "type": "comment",
        "name": "Update ROOT UNI's bw -- ALREADY DONE",
        "info": "",
        "comments": "",
        "x": 4286.516845703125,
        "y": 5422.733642578125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "c0e896d2.f14fd",
        "type": "save",
        "name": "update ROOT UNI in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4903.5166015625,
        "y": 5540.733642578125,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "ffd72856.632858",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4506.007568359375,
        "y": 5441.3076171875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "fe177ef1.d06678"
            ]
        ]
    },
    {
        "id": "d24e2f90.29ea68",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4501.5166015625,
        "y": 5485.733581542969,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "632ed866.3f04b8"
            ]
        ]
    },
    {
        "id": "fe177ef1.d06678",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4668.5791015625,
        "y": 5440.593322753906,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "632ed866.3f04b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4669.5166015625,
        "y": 5485.733581542969,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "df87890d.bcb5c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4666.5166015625,
        "y": 5535.733642578125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "2ff88b2d.295934",
                "c0e896d2.f14fd"
            ]
        ]
    },
    {
        "id": "89ccdd98.c0add8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4497.5166015625,
        "y": 5535.733642578125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "df87890d.bcb5c"
            ]
        ]
    },
    {
        "id": "2ff88b2d.295934",
        "type": "set",
        "name": "set new bw",
        "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source - $bwToBeDecreased`' />\n",
        "comments": "",
        "x": 4859.517578125,
        "y": 5460.733642578125,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "5d7f9ad7.0f862c",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 5288.216796875,
        "y": 5398.500244140625,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "9b98cd10.6cfb68",
        "type": "save",
        "name": "update ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5314,
        "y": 5440.700439453125,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "d6a83452.cab528",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 567.8836059570312,
        "y": 5357.88330078125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e5624f1d.dbf4b8"
            ]
        ]
    },
    {
        "id": "a3cdb153.e05c2",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 550.883544921875,
        "y": 5279.88330078125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "daa6681.3df0a98"
            ]
        ]
    },
    {
        "id": "7731a568.885cdc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 679.8833923339844,
        "y": 4366.883026123047,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "a5f98ac5.68fe98",
                "74d156ed.4e9f",
                "6135bf6.f11f5c",
                "8458698c.d1be5",
                "6cf7c0fc.18d4e8"
            ]
        ]
    },
    {
        "id": "a5f98ac5.68fe98",
        "type": "set",
        "name": "set tmp.leafconn.",
        "xml": "<set>\n<parameter name='tmp.leafconn.' value='`$tmp.the-connectivity.`' />\n",
        "comments": "",
        "x": 931.5667419433594,
        "y": 4344.932830810547,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "155b7716.d28d91",
        "type": "comment",
        "name": "Find LEAF and ROOT connectivities and remove UNI from PNC",
        "info": "",
        "comments": "",
        "x": 1033.1338806152344,
        "y": 4293.016326904297,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "11c710da.f1a09f",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.leafconn.access-provider-id + '-clientId-' +\n                                                   $tmp.leafconn.access-client-id + '-topologyId-' +\n                                                   $tmp.leafconn.access-topology-id + '-nodeId-' +\n                                                   $tmp.leafconn.access-node-id`\" />\n",
        "comments": "",
        "x": 1140.9837341308594,
        "y": 4374.216522216797,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "74d156ed.4e9f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 911.9837341308594,
        "y": 4463.216522216797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "11c710da.f1a09f",
                "dd611a8.40420e8"
            ]
        ]
    },
    {
        "id": "dd611a8.40420e8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1147.9837341308594,
        "y": 4456.216522216797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "2cc9d43.2a3e32c",
                "16f9c9a2.f3e64e",
                "bd113683.3f90e8"
            ]
        ]
    },
    {
        "id": "2cc9d43.2a3e32c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1343.4838562011719,
        "y": 4408.216522216797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "30afce54.3b0e7a"
            ]
        ]
    },
    {
        "id": "16f9c9a2.f3e64e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1335.4838562011719,
        "y": 4463.216522216797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ca51c401.6ecfa8"
            ]
        ]
    },
    {
        "id": "30afce54.3b0e7a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1487.8661804199219,
        "y": 4407.8721923828125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "4c495354.afa6a4"
            ]
        ]
    },
    {
        "id": "4c495354.afa6a4",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1671.9837341308594,
        "y": 4406.216522216797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "72a0b2fc.d6eab4"
            ]
        ]
    },
    {
        "id": "72a0b2fc.d6eab4",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1866.9837341308594,
        "y": 4406.216522216797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3067a2de.bf9096"
            ]
        ]
    },
    {
        "id": "bd113683.3f90e8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1340.4838562011719,
        "y": 4520.216522216797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "c72ac013.478f"
            ]
        ]
    },
    {
        "id": "c72ac013.478f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1492.4838562011719,
        "y": 4521.216522216797,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "ca51c401.6ecfa8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1503.4838562011719,
        "y": 4464.216522216797,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "fae6bda1.4d6a28",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2248.9837341308594,
        "y": 4410.216522216797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "5ada214d.6d6df",
                "230404bc.0330d4",
                "8f5a3f0d.286f38"
            ]
        ]
    },
    {
        "id": "3067a2de.bf9096",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2069.9837341308594,
        "y": 4410.216522216797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "fae6bda1.4d6a28"
            ]
        ]
    },
    {
        "id": "6135bf6.f11f5c",
        "type": "execute",
        "name": "execute RestApiCallNode Delete LEAF UNI of ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.leafconn.etht-svc-name + '/etht-svc-end-points=' + $tmp.LEAF.uni-p-interface-long`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1053.4839782714844,
        "y": 4567.816131591797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "63ad904f.f883c",
                "612437fd.ee8ae"
            ]
        ]
    },
    {
        "id": "612437fd.ee8ae",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1417.9837341308594,
        "y": 4615.816131591797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "7222d332.cab804"
            ]
        ]
    },
    {
        "id": "63ad904f.f883c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1413.9837341308594,
        "y": 4575.816131591797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ffb15b5f.69bdb"
            ]
        ]
    },
    {
        "id": "ffb15b5f.69bdb",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 1571.9837341308594,
        "y": 4575.816131591797,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "7222d332.cab804",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1575.4837341308594,
        "y": 4615.816131591797,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "230404bc.0330d4",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 2454.9837341308594,
        "y": 4423.216522216797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "999c0ecf.dd9428",
                "cadc4a62.3f428",
                "9a118cc2.6cef58"
            ]
        ]
    },
    {
        "id": "5ada214d.6d6df",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 2484.9837341308594,
        "y": 4371.216522216797,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "999c0ecf.dd9428",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2664.9837341308594,
        "y": 4414.216522216797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "fb522408.bea2a8"
            ]
        ]
    },
    {
        "id": "cadc4a62.3f428",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2656.9837341308594,
        "y": 4469.216522216797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ad21cc41.8772b"
            ]
        ]
    },
    {
        "id": "9a118cc2.6cef58",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2661.9837341308594,
        "y": 4526.216522216797,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e3096426.02dcf"
            ]
        ]
    },
    {
        "id": "e3096426.02dcf",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2813.9837341308594,
        "y": 4527.216522216797,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "ad21cc41.8772b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2824.9837341308594,
        "y": 4472.216522216797,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "fb522408.bea2a8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2809.3660583496094,
        "y": 4411.8721923828125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "6e503f35.5790c"
            ]
        ]
    },
    {
        "id": "6e503f35.5790c",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3023.9837341308594,
        "y": 4408.216522216797,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "8f5a3f0d.286f38",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2404.9837341308594,
        "y": 4487.216522216797,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "8458698c.d1be5",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1082.5667419433594,
        "y": 4787.932830810547,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "6cf7c0fc.18d4e8",
        "type": "switchNode",
        "name": "switch found-root-connectivity",
        "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 897.5667419433594,
        "y": 4854.932830810547,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "31c266e8.6cad22",
                "45786f9e.46f928"
            ]
        ]
    },
    {
        "id": "31c266e8.6cad22",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1162.5667419433594,
        "y": 4839.932830810547,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "25e4293a.b5a0de"
            ]
        ]
    },
    {
        "id": "45786f9e.46f928",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1158.5667419433594,
        "y": 4887.932830810547,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9325c5b6.3d913"
            ]
        ]
    },
    {
        "id": "25e4293a.b5a0de",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1318.5667419433594,
        "y": 4835.932830810547,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "51a35a4f.5fbc64"
            ]
        ]
    },
    {
        "id": "9325c5b6.3d913",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
        "comments": "",
        "x": 1306.5667419433594,
        "y": 4882.932830810547,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "c5019df.72c63e",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 1587.4664001464844,
        "y": 4786.633026123047,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "51a35a4f.5fbc64",
        "type": "save",
        "name": "update ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1613.2496032714844,
        "y": 4828.833221435547,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "cbb82af5.87b298",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-delete-VPNBs",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-delete-VPNBs' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1026.8833923339844,
        "y": 4102.199920654297,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "daa6681.3df0a98",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 632.8834228515625,
        "y": 4106.883056640625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "cbb82af5.87b298",
                "7731a568.885cdc"
            ]
        ]
    },
    {
        "id": "e5624f1d.dbf4b8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 716.3333740234375,
        "y": 5359.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "16338b46.5dad65",
                "de535c52.af9d48",
                "78064cf.4874bb4",
                "b5448cca.f23df8"
            ]
        ]
    },
    {
        "id": "16338b46.5dad65",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-delete-VPNBs",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-delete-VPNBs' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1067.7166748046875,
        "y": 5290.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "de535c52.af9d48",
        "type": "save",
        "name": "delete LEAF connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 978.7166748046875,
        "y": 5359.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "78064cf.4874bb4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 869.88330078125,
        "y": 5594.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "69415165.a30268",
                "38b5cafd.d5079e",
                "6a408110.2a2dc"
            ]
        ]
    },
    {
        "id": "f703a5f3.1124f8",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 2585.882568359375,
        "y": 5481.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "2bcfefd4.8f246",
                "6262f33a.13ed54",
                "5f5183a2.3dd5bc"
            ]
        ]
    },
    {
        "id": "17938acf.263b45",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2535.882568359375,
        "y": 5545.39990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "434194f6.d45944",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 2615.882568359375,
        "y": 5429.39990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "2bcfefd4.8f246",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2795.882568359375,
        "y": 5472.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f6e068a.7d61a18"
            ]
        ]
    },
    {
        "id": "6262f33a.13ed54",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2787.882568359375,
        "y": 5527.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "2a0eede1.27db52"
            ]
        ]
    },
    {
        "id": "5f5183a2.3dd5bc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2792.882568359375,
        "y": 5584.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "612a7284.deceac"
            ]
        ]
    },
    {
        "id": "612a7284.deceac",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2944.882568359375,
        "y": 5585.39990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "2a0eede1.27db52",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2955.882568359375,
        "y": 5530.39990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "f6e068a.7d61a18",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2940.264892578125,
        "y": 5470.055572509766,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d3b91b08.9e326"
            ]
        ]
    },
    {
        "id": "d3b91b08.9e326",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3154.882568359375,
        "y": 5466.39990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "69415165.a30268",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.the-connectivity.access-provider-id + '-clientId-' +\n                                                   $tmp.the-connectivity.access-client-id + '-topologyId-' +\n                                                   $tmp.the-connectivity.access-topology-id + '-nodeId-' +\n                                                   $tmp.the-connectivity.access-node-id`\" />\n",
        "comments": "",
        "x": 1151.88330078125,
        "y": 5463.39990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "5cd94a05.12a97c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1362.3834228515625,
        "y": 5602.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "6b54e983.54f23"
            ]
        ]
    },
    {
        "id": "7cfb8601.d6c8b8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1365.3834228515625,
        "y": 5490.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "43d9e97c.41e918"
            ]
        ]
    },
    {
        "id": "c076204a.7c8658",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1357.3834228515625,
        "y": 5545.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "697ce13c.463e78"
            ]
        ]
    },
    {
        "id": "43d9e97c.41e918",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1499.765625,
        "y": 5485.0556640625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9ea73f48.e6dc88"
            ]
        ]
    },
    {
        "id": "6b54e983.54f23",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1514.3834228515625,
        "y": 5603.39990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "697ce13c.463e78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1525.3834228515625,
        "y": 5546.39990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "9ea73f48.e6dc88",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1686.8828125,
        "y": 5486.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "8867a67f.02b388"
            ]
        ]
    },
    {
        "id": "8867a67f.02b388",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1914.8828125,
        "y": 5479.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "bfd4d2af.8ab0b8"
            ]
        ]
    },
    {
        "id": "38b5cafd.d5079e",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1169.88330078125,
        "y": 5538.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "5cd94a05.12a97c",
                "7cfb8601.d6c8b8",
                "c076204a.7c8658"
            ]
        ]
    },
    {
        "id": "bfd4d2af.8ab0b8",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2120.8828125,
        "y": 5476.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b0cdfdee.4e9418"
            ]
        ]
    },
    {
        "id": "b0cdfdee.4e9418",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2335.8822021484375,
        "y": 5479.39990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "434194f6.d45944",
                "f703a5f3.1124f8",
                "17938acf.263b45"
            ]
        ]
    },
    {
        "id": "6a408110.2a2dc",
        "type": "execute",
        "name": "execute RestApiCallNode Delete LEAF ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.the-connectivity.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1293.6500244140625,
        "y": 5687.7998046875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "d58ed713.3cd0d",
                "e5f89511.dafe58"
            ]
        ]
    },
    {
        "id": "d58ed713.3cd0d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1640.1500244140625,
        "y": 5680.7998046875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "8ee30019.6f667"
            ]
        ]
    },
    {
        "id": "e5f89511.dafe58",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1644.1500244140625,
        "y": 5720.7998046875,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3308ecad.5ad59c"
            ]
        ]
    },
    {
        "id": "8ee30019.6f667",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 1798.1500244140625,
        "y": 5680.7998046875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "3308ecad.5ad59c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1801.6500244140625,
        "y": 5720.7998046875,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "b5448cca.f23df8",
        "type": "switchNode",
        "name": "switch tmp.MMstillHasUni?",
        "xml": "\n<switch test=\"`$tmp.MMstillHasUni`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 913.183349609375,
        "y": 5849.60009765625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "59551d1d.12689c",
                "5a5ae31.cb9b99c"
            ]
        ]
    },
    {
        "id": "59551d1d.12689c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1105.183349609375,
        "y": 5826.60009765625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "2e2794d8.3df39c"
            ]
        ]
    },
    {
        "id": "5a5ae31.cb9b99c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1093.3500366210938,
        "y": 5999.2001953125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "6dce893f.c421c"
            ]
        ]
    },
    {
        "id": "2e2794d8.3df39c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1253.35009765625,
        "y": 5826.2001953125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b4e9d461.c3c1a",
                "2f3efa95.41d3ce"
            ]
        ]
    },
    {
        "id": "b4e9d461.c3c1a",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1675.199951171875,
        "y": 5797.60009765625,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "2f3efa95.41d3ce",
        "type": "switchNode",
        "name": "switch found-root-connectivity",
        "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1490.199951171875,
        "y": 5864.60009765625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "aadc3189.147b98",
                "9801a2d7.df3f98"
            ]
        ]
    },
    {
        "id": "aadc3189.147b98",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1755.199951171875,
        "y": 5849.60009765625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "aaac06aa.f3d728"
            ]
        ]
    },
    {
        "id": "9801a2d7.df3f98",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1751.199951171875,
        "y": 5897.60009765625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "7656a3d7.b7266c"
            ]
        ]
    },
    {
        "id": "aaac06aa.f3d728",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1911.199951171875,
        "y": 5845.60009765625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "2673ca00.ba724e"
            ]
        ]
    },
    {
        "id": "7656a3d7.b7266c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
        "comments": "",
        "x": 1899.199951171875,
        "y": 5892.60009765625,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "2673ca00.ba724e",
        "type": "save",
        "name": "update ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 2219.8826904296875,
        "y": 5839.50048828125,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "bfaf6549.13fe88",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 2194.0994873046875,
        "y": 5797.30029296875,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "6dce893f.c421c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1230.916748046875,
        "y": 5998.5,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "75d82528.4dd5bc",
                "24c2da43.974556"
            ]
        ]
    },
    {
        "id": "75d82528.4dd5bc",
        "type": "for",
        "name": "for each relationship of middle-man-conn",
        "xml": "<for index='rel-index' start='0' end='`$middle-man-conn.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1544.23291015625,
        "y": 5992.7001953125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "29eb94d3.70f2dc"
            ]
        ]
    },
    {
        "id": "29eb94d3.70f2dc",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$middle-man-conn.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1844.566650390625,
        "y": 5987.700134277344,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "522c88bc.33b518"
            ]
        ]
    },
    {
        "id": "522c88bc.33b518",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2024.2332763671875,
        "y": 5987.700225830078,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9dde3a26.bf1a48"
            ]
        ]
    },
    {
        "id": "9dde3a26.bf1a48",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $middle-man-conn.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2224.233154296875,
        "y": 5987.7001953125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "af210146.805c98",
                "1304e1a7.407dde",
                "83b6e70e.c6339"
            ]
        ]
    },
    {
        "id": "af210146.805c98",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2431.23291015625,
        "y": 6037.7001953125,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "bfbb5b5d.76ea48"
            ]
        ]
    },
    {
        "id": "24e402f2.8a6b26",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2408.466552734375,
        "y": 6221.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3ff65d5b.44eb62",
                "d09102d1.fb466",
                "3d724c56.f2b6cc"
            ]
        ]
    },
    {
        "id": "1cd695fe.f2c6f2",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1607.466552734375,
        "y": 6136.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "74367c85.fa02dc"
            ]
        ]
    },
    {
        "id": "74367c85.fa02dc",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1804.466552734375,
        "y": 6150.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "572f2125.6367b8",
                "5931a81f.41a6"
            ]
        ]
    },
    {
        "id": "572f2125.6367b8",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1972.466552734375,
        "y": 6143.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "22fa9a36.31302e"
            ]
        ]
    },
    {
        "id": "22fa9a36.31302e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2135.466552734375,
        "y": 6143.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "24e402f2.8a6b26"
            ]
        ]
    },
    {
        "id": "5931a81f.41a6",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1988.466552734375,
        "y": 6439.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "510edb34.612754"
            ]
        ]
    },
    {
        "id": "510edb34.612754",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2151.466552734375,
        "y": 6439.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "4c0113a.98542ec"
            ]
        ]
    },
    {
        "id": "4c0113a.98542ec",
        "type": "save",
        "name": "delete uni resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2394.466552734375,
        "y": 6439.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "2b555ba8.ce83e4",
        "type": "save",
        "name": "delete connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1648.466552734375,
        "y": 6583.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "bfbb5b5d.76ea48",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1433.466552734375,
        "y": 6134.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "1cd695fe.f2c6f2",
                "2b555ba8.ce83e4"
            ]
        ]
    },
    {
        "id": "3ff65d5b.44eb62",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2619.466552734375,
        "y": 6223.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "851525d6.b90c38"
            ]
        ]
    },
    {
        "id": "d09102d1.fb466",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2619.95751953125,
        "y": 6269.473937988281,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "74e6774b.c7b358"
            ]
        ]
    },
    {
        "id": "3d724c56.f2b6cc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2617.466552734375,
        "y": 6312.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "cbe3afce.930cc"
            ]
        ]
    },
    {
        "id": "83b6e70e.c6339",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2455.282958984375,
        "y": 5938.5,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "1304e1a7.407dde",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2452.7919921875,
        "y": 5981.925964355469,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "24c2da43.974556",
        "type": "save",
        "name": "delete middle-man-conn resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1531.400146484375,
        "y": 6067.2998046875,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "851525d6.b90c38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2785.466552734375,
        "y": 6213.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "811dd566.85ec38",
                "6a877b95.f2661c",
                "66415a60.9e5d9c",
                "a662df33.5b8808",
                "502ecc67.91354c"
            ]
        ]
    },
    {
        "id": "cbe3afce.930cc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2784.466552734375,
        "y": 6311.89990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "74e6774b.c7b358",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2782.5289306640625,
        "y": 6269.759674072266,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "811dd566.85ec38",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-binding.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-binding.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-binding.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-binding.src-access-node-id`\" />\n",
        "comments": "",
        "x": 3007.466552734375,
        "y": 5931.89990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "6a877b95.f2661c",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3033.466552734375,
        "y": 6048.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "3d9fd486.323a64",
                "c6247afb.9c0a",
                "83cc8360.81d358"
            ]
        ]
    },
    {
        "id": "66415a60.9e5d9c",
        "type": "execute",
        "name": "execute RestApiCallNode Delete OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-src-domain-creation.templatefile`\" />-->\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-te:te/tunnels/tunnel=' + $tmp.aai.vpn-binding.vpn-name`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3136.466552734375,
        "y": 6315.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "9c554475.661fc8",
                "12ed9938.83ebcf"
            ]
        ]
    },
    {
        "id": "a662df33.5b8808",
        "type": "switchNode",
        "name": "switch connectivity has ethernet service",
        "xml": "<switch test='`$tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3074.466552734375,
        "y": 6450.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b26d88bf.bd178",
                "f451c5d.6b3dd38"
            ]
        ]
    },
    {
        "id": "502ecc67.91354c",
        "type": "save",
        "name": "delete vpn-binding resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3055.466552734375,
        "y": 6566.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "3d9fd486.323a64",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3228.9666748046875,
        "y": 6000.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "c715af9f.c55108"
            ]
        ]
    },
    {
        "id": "c6247afb.9c0a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3220.9666748046875,
        "y": 6055.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "f990360c.2a7d88"
            ]
        ]
    },
    {
        "id": "c715af9f.c55108",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3363.348876953125,
        "y": 5995.5556640625,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "cf5a3a9d.68d89"
            ]
        ]
    },
    {
        "id": "83cc8360.81d358",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3225.9666748046875,
        "y": 6112.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "ee6f1ffb.7dcfe"
            ]
        ]
    },
    {
        "id": "ee6f1ffb.7dcfe",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3377.9666748046875,
        "y": 6113.89990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "f990360c.2a7d88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3388.9666748046875,
        "y": 6056.89990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "f451c5d.6b3dd38",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3327.466552734375,
        "y": 6428.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e38cfd76.3f8a2"
            ]
        ]
    },
    {
        "id": "b26d88bf.bd178",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3327.466552734375,
        "y": 6484.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "cf5a3a9d.68d89",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3550.466064453125,
        "y": 5996.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "fe7eff92.d565e"
            ]
        ]
    },
    {
        "id": "fe7eff92.d565e",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3791.466064453125,
        "y": 5987.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "a5619f8.2b7e86"
            ]
        ]
    },
    {
        "id": "e38cfd76.3f8a2",
        "type": "execute",
        "name": "execute RestApiCallNode Delete ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.aai.connectivity.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3677.466064453125,
        "y": 6418.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "1d52efad.f9e5d",
                "d7169143.c010d8"
            ]
        ]
    },
    {
        "id": "9c554475.661fc8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3443.966064453125,
        "y": 6340.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "238545c1.5c8b2a"
            ]
        ]
    },
    {
        "id": "12ed9938.83ebcf",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3444.966064453125,
        "y": 6285.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "bb0795de.a47f18"
            ]
        ]
    },
    {
        "id": "238545c1.5c8b2a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 3615.966064453125,
        "y": 6338.89990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "bb0795de.a47f18",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3612.466064453125,
        "y": 6287.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "36cf22b4.4935d6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4148.4658203125,
        "y": 5936.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b5cbacbc.c392",
                "ea40936a.af6178",
                "6eb0462c.852488"
            ]
        ]
    },
    {
        "id": "a5619f8.2b7e86",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3997.466064453125,
        "y": 5984.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "36cf22b4.4935d6"
            ]
        ]
    },
    {
        "id": "1d52efad.f9e5d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4009.966064453125,
        "y": 6392.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "6bd1cb72.9cf9b4"
            ]
        ]
    },
    {
        "id": "d7169143.c010d8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4013.966064453125,
        "y": 6432.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "e4332941.104e"
            ]
        ]
    },
    {
        "id": "e4332941.104e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4201.466064453125,
        "y": 6436.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            []
        ]
    },
    {
        "id": "6bd1cb72.9cf9b4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 4197.966064453125,
        "y": 6396.89990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "ea40936a.af6178",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4354.4658203125,
        "y": 5949.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "914dea7f.0edbe",
                "82561c7b.09ef28",
                "b047cbfd.3b9618"
            ]
        ]
    },
    {
        "id": "b5cbacbc.c392",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4384.4658203125,
        "y": 5897.89990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "914dea7f.0edbe",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4564.4658203125,
        "y": 5940.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "c318baba.3a4cc8"
            ]
        ]
    },
    {
        "id": "82561c7b.09ef28",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4556.4658203125,
        "y": 5995.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "b8e7878b.f1ad7"
            ]
        ]
    },
    {
        "id": "b047cbfd.3b9618",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4561.4658203125,
        "y": 6052.89990234375,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "c15a7782.9625b"
            ]
        ]
    },
    {
        "id": "6eb0462c.852488",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4304.4658203125,
        "y": 6013.89990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "c15a7782.9625b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4713.4658203125,
        "y": 6053.89990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "b8e7878b.f1ad7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4724.4658203125,
        "y": 5998.89990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    },
    {
        "id": "c318baba.3a4cc8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4708.84814453125,
        "y": 5938.555572509766,
        "z": "82de8dcf.518d88",
        "wires": [
            [
                "42376e75.44b2d8"
            ]
        ]
    },
    {
        "id": "42376e75.44b2d8",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 4923.4658203125,
        "y": 5934.89990234375,
        "z": "82de8dcf.518d88",
        "wires": []
    }
]