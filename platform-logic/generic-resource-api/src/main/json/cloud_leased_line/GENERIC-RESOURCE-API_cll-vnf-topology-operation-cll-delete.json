[
    {
        "id": "a85fdd45.18532",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 171.88333129882812,
        "y": 177,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2eaf78b5.ba0318"
            ]
        ]
    },
    {
        "id": "2eaf78b5.ba0318",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 456.1690216064453,
        "y": 238.23810863494873,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "28e9741c.d81dfc"
            ]
        ]
    },
    {
        "id": "28e9741c.d81dfc",
        "type": "method",
        "name": "method cll-vnf-topology-operation-cll-delete",
        "xml": "<method rpc='cll-vnf-topology-operation-cll-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 462.3119354248047,
        "y": 323.0000305175781,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "df14e360.a098e8"
            ]
        ]
    },
    {
        "id": "df14e360.a098e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 811.8833312988281,
        "y": 382,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e87fcff0.55123",
                "b8bbed17.73d098",
                "ed2f6b65.8be208"
            ]
        ]
    },
    {
        "id": "e87fcff0.55123",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1113.2168273925781,
        "y": 652.9302978515625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "b8bbed17.73d098",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1134.6452941894531,
        "y": 355.33331298828125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c5539326.dc2ce",
                "9370873a.5ec85",
                "3f911b4d.a21904"
            ]
        ]
    },
    {
        "id": "c5539326.dc2ce",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1359.6452941894531,
        "y": 213.33331298828125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a5dbcf8a.fe1748"
            ]
        ]
    },
    {
        "id": "9370873a.5ec85",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1355.1362609863281,
        "y": 282.9073486328125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "49f0af9f.5fedb8"
            ]
        ]
    },
    {
        "id": "3f911b4d.a21904",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1343.6452941894531,
        "y": 329.33331298828125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "61830ec6.dfc06"
            ]
        ]
    },
    {
        "id": "f78d475.109eab8",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1113.6452941894531,
        "y": 243.33331298828125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "ed2f6b65.8be208",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1101.6452941894531,
        "y": 295.33331298828125,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "a5dbcf8a.fe1748",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1599.8833312988281,
        "y": 210,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b303ce6.b126d3",
                "55aeefb2.59b1e8"
            ]
        ]
    },
    {
        "id": "49f0af9f.5fedb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1509.9457092285156,
        "y": 285.8597717285156,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "61830ec6.dfc06",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1513.8833312988281,
        "y": 330,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "b303ce6.b126d3",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1804.8833312988281,
        "y": 247,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f1542288.012e3"
            ]
        ]
    },
    {
        "id": "55aeefb2.59b1e8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1814.8833312988281,
        "y": 174,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "f1542288.012e3",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1797.8833312988281,
        "y": 322,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "abe13a08.545e98",
                "7178c36c.cf3274",
                "ac38a7a3.b352e8",
                "d727f01e.ad9c98",
                "8cb68ccc.e851f8"
            ]
        ]
    },
    {
        "id": "66649512.c7d5bc",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2283.883331298828,
        "y": 373,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b9d85c6f.27205",
                "376ece8a.ca776a",
                "b6dfab0d.b44bd8"
            ]
        ]
    },
    {
        "id": "b9d85c6f.27205",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2499.883331298828,
        "y": 440,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c1b489c1.9564e8"
            ]
        ]
    },
    {
        "id": "376ece8a.ca776a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2500.374298095703,
        "y": 339.573974609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "742662fc.5de6dc"
            ]
        ]
    },
    {
        "id": "b6dfab0d.b44bd8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2495.883331298828,
        "y": 389,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b4af8420.603268"
            ]
        ]
    },
    {
        "id": "abe13a08.545e98",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2000.8833312988281,
        "y": 354,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7d659bd1.1ff4ec",
                "66649512.c7d5bc",
                "cfd6a168.75b7d8",
                "fe93cfa.921edb"
            ]
        ]
    },
    {
        "id": "7d659bd1.1ff4ec",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2280.883331298828,
        "y": 292,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "d727f01e.ad9c98",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
        "comments": "",
        "x": 1974.8833312988281,
        "y": 304,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "7178c36c.cf3274",
        "type": "get-resource",
        "name": "get-resource pnfs-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/pnfs?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
        "comments": "",
        "outputs": 1,
        "x": 2017.8833312988281,
        "y": 163,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "ac38a7a3.b352e8",
        "type": "get-resource",
        "name": "get-resource logical-links",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
        "comments": "",
        "outputs": 1,
        "x": 2029.8833312988281,
        "y": 204,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "eed8a5a0.afccb8",
        "type": "comment",
        "name": "The following two nodes are for PCE",
        "info": "",
        "comments": "",
        "x": 2054.883331298828,
        "y": 116,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "141349a5.fce93e",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
        "comments": "",
        "x": 1974.8833312988281,
        "y": 250,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "742662fc.5de6dc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2678.883331298828,
        "y": 342,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "b4af8420.603268",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2678.820831298828,
        "y": 391.1402587890625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c1b489c1.9564e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2680.820831298828,
        "y": 442.1402587890625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "fcfb8da2.5eaaf8"
            ]
        ]
    },
    {
        "id": "fcfb8da2.5eaaf8",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2973.820831298828,
        "y": 389.1402587890625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c3da29e4.d4aec",
                "5d798b7c.bb38bc",
                "f79e6540.82af6"
            ]
        ]
    },
    {
        "id": "5d798b7c.bb38bc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3277.311767578125,
        "y": 45.7142333984375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "90e8e37d.ca8e98"
            ]
        ]
    },
    {
        "id": "90e8e37d.ca8e98",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3454.88330078125,
        "y": 46,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "f79e6540.82af6",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3272.82080078125,
        "y": 95.1402587890625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "9bf9393a.ada1c"
            ]
        ]
    },
    {
        "id": "9bf9393a.ada1c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3454.82080078125,
        "y": 95.1402587890625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c3da29e4.d4aec",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3276.82080078125,
        "y": 146.1402587890625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "614d711.ad6151"
            ]
        ]
    },
    {
        "id": "614d711.ad6151",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3456.82080078125,
        "y": 146.1402587890625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6f9dfac6.7f7acc"
            ]
        ]
    },
    {
        "id": "6f9dfac6.7f7acc",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2992.883331298828,
        "y": 517,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "cc5d43a6.52dac",
                "df06d31e.f926b8"
            ]
        ]
    },
    {
        "id": "df06d31e.f926b8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3332.88330078125,
        "y": 288,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "cc5d43a6.52dac",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3331.88330078125,
        "y": 342,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "9005c08e.45bff"
            ]
        ]
    },
    {
        "id": "7cc4c3ab.96110c",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4076.88330078125,
        "y": 296,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e1ccec43.b4b718"
            ]
        ]
    },
    {
        "id": "e1ccec43.b4b718",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4253.8831787109375,
        "y": 288.9998779296875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6a0eff2d.7a17d8",
                "c12539fb.18b098"
            ]
        ]
    },
    {
        "id": "9005c08e.45bff",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3495.88330078125,
        "y": 268,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c7cdd797.5d9c98",
                "a2ea3a5e.b8028"
            ]
        ]
    },
    {
        "id": "c7cdd797.5d9c98",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3776.88330078125,
        "y": 224,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "fdc5f0cb.fc2a38"
            ]
        ]
    },
    {
        "id": "fdc5f0cb.fc2a38",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4038.88330078125,
        "y": 224,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7cc4c3ab.96110c"
            ]
        ]
    },
    {
        "id": "6a0eff2d.7a17d8",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 4496.8831787109375,
        "y": 245.9998779296875,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c12539fb.18b098",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 4485.8831787109375,
        "y": 300.9998779296875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "53e90890.b88808",
                "99815c1a.2d5d9",
                "ef9ec486.51c458"
            ]
        ]
    },
    {
        "id": "ef9ec486.51c458",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4738.88330078125,
        "y": 187,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "928a2f6e.9dcef"
            ]
        ]
    },
    {
        "id": "928a2f6e.9dcef",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4887.454833984375,
        "y": 187.2857666015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "5f26f831.604e6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4886.392333984375,
        "y": 231.426025390625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "99815c1a.2d5d9",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4727.392333984375,
        "y": 231.426025390625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5f26f831.604e6"
            ]
        ]
    },
    {
        "id": "53e90890.b88808",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4734.392333984375,
        "y": 310.426025390625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c7f5e24b.264e08"
            ]
        ]
    },
    {
        "id": "c7f5e24b.264e08",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4873.392333984375,
        "y": 310.426025390625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "bd533599.870598",
                "5b846fca.358228"
            ]
        ]
    },
    {
        "id": "bd533599.870598",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 5078.88330078125,
        "y": 308,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "5b846fca.358228",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 5077.88330078125,
        "y": 354,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "a2ea3a5e.b8028",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3593.88330078125,
        "y": 340,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "25258bcb.d218b4"
            ]
        ]
    },
    {
        "id": "25258bcb.d218b4",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3873.88330078125,
        "y": 340,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f26cca47.0cf8c8"
            ]
        ]
    },
    {
        "id": "f26cca47.0cf8c8",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2256.8834533691406,
        "y": 829.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d5f97832.254d88"
            ]
        ]
    },
    {
        "id": "d5f97832.254d88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2433.883331298828,
        "y": 822,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "ae5af3.3e9a4d1",
                "12544593.6754f2"
            ]
        ]
    },
    {
        "id": "ae5af3.3e9a4d1",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 2676.883331298828,
        "y": 779,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "12544593.6754f2",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 2665.883331298828,
        "y": 834,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "79a8fecf.d1f59",
                "b24729e3.47e65",
                "4a9529bf.26c65"
            ]
        ]
    },
    {
        "id": "79a8fecf.d1f59",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2957.374298095703,
        "y": 812.573974609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d25941f1.946b68"
            ]
        ]
    },
    {
        "id": "b24729e3.47e65",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2945.883331298828,
        "y": 857,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "11547725.a203f9"
            ]
        ]
    },
    {
        "id": "d25941f1.946b68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3105.945831298828,
        "y": 812.8597412109375,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "11547725.a203f9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3104.883331298828,
        "y": 857,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "4a9529bf.26c65",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2952.883331298828,
        "y": 936,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a4fd9348.176d48"
            ]
        ]
    },
    {
        "id": "a4fd9348.176d48",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3091.883331298828,
        "y": 936,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6c4953ff.9536c4",
                "757555b7.a275b4",
                "da8313.90b574f",
                "a53e9db6.011d6",
                "2b20579c.df8a7",
                "1abe7496.3f7c9b",
                "652968a1.d93e88",
                "f369a6e9.5de548",
                "fc221d76.582c9",
                "5fd92a3e.ed6fec",
                "4a864e6a.471e",
                "e264db5d.2744d",
                "afaae138.bb9798",
                "121ba89c.f4d387",
                "e7a924f9.c6032",
                "e3b4a4d3.b60598",
                "22dcd918.a9e88e",
                "1743864d.d3d2f2",
                "898efbe9.b7aab8",
                "3ddfa25a.4bc3f6",
                "f7bdbced.e4e6e",
                "b2f7d29a.c36bc8"
            ]
        ]
    },
    {
        "id": "3c4bd54a.0e1cfa",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3435.883270263672,
        "y": 410,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "6c4953ff.9536c4",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3416.883270263672,
        "y": 510,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "e264db5d.2744d",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 3370.883270263672,
        "y": 561,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "757555b7.a275b4",
        "type": "set",
        "name": "set network-route-one",
        "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
        "comments": "",
        "x": 3344.883270263672,
        "y": 610,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "da8313.90b574f",
        "type": "set",
        "name": "set network-route-two",
        "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 3343.883270263672,
        "y": 659,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "a53e9db6.011d6",
        "type": "save",
        "name": "get network-route-one from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
        "comments": "",
        "outputs": 1,
        "x": 3352.883270263672,
        "y": 797,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "cca9aa9c.5b4b58",
                "6d66b175.a27548",
                "6cf4995a.fab31"
            ]
        ]
    },
    {
        "id": "2b20579c.df8a7",
        "type": "save",
        "name": "get network-route-two from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
        "comments": "",
        "outputs": 1,
        "x": 3345.883270263672,
        "y": 857.9998779296875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a115586d.1910d8",
                "61de0330.a424c4",
                "89e5a0b3.03b87"
            ]
        ]
    },
    {
        "id": "cca9aa9c.5b4b58",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3601.883026123047,
        "y": 692,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "294610ae.745698"
            ]
        ]
    },
    {
        "id": "6d66b175.a27548",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3595.392059326172,
        "y": 733.426025390625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "61b00039.d9b688"
            ]
        ]
    },
    {
        "id": "6cf4995a.fab31",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3590.392059326172,
        "y": 783.426025390625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1fe35696.f7e9f9"
            ]
        ]
    },
    {
        "id": "294610ae.745698",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3750.454559326172,
        "y": 691.2857666015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "61b00039.d9b688",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3740.392059326172,
        "y": 741.426025390625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "a115586d.1910d8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3566.883270263672,
        "y": 843.9998779296875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "807fba07.07f6d"
            ]
        ]
    },
    {
        "id": "61de0330.a424c4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3562.392303466797,
        "y": 893.4259033203125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "9f751353.b361d"
            ]
        ]
    },
    {
        "id": "89e5a0b3.03b87",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3563.392303466797,
        "y": 946.4259033203125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "17e5ea49.0fe58e"
            ]
        ]
    },
    {
        "id": "807fba07.07f6d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3719.4546508789062,
        "y": 849.28564453125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "9f751353.b361d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3705.392303466797,
        "y": 893.4259033203125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "1fe35696.f7e9f9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3762.883026123047,
        "y": 794,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6a90f954.4bce88"
            ]
        ]
    },
    {
        "id": "17e5ea49.0fe58e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3716.883270263672,
        "y": 945.9998779296875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f51128b5.0b454"
            ]
        ]
    },
    {
        "id": "6a90f954.4bce88",
        "type": "switchNode",
        "name": "switch nr type",
        "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3923.883270263672,
        "y": 681,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d28de3c8.def278",
                "32596d77.fd201a",
                "c2039341.ed7fe"
            ]
        ]
    },
    {
        "id": "f51128b5.0b454",
        "type": "switchNode",
        "name": "switch nr type",
        "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3915.883270263672,
        "y": 866,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6179a2a6.c7a764",
                "6a08da95.c46784",
                "49cd1e6.2c21e6"
            ]
        ]
    },
    {
        "id": "d28de3c8.def278",
        "type": "outcome",
        "name": "ROOT",
        "xml": "<outcome value='ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4147.883758544922,
        "y": 384.99993896484375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "af392071.289a38"
            ]
        ]
    },
    {
        "id": "32596d77.fd201a",
        "type": "outcome",
        "name": "LEAF",
        "xml": "<outcome value='LEAF'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4149.883758544922,
        "y": 438.99993896484375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7fbb2a1.f3ae954"
            ]
        ]
    },
    {
        "id": "6179a2a6.c7a764",
        "type": "outcome",
        "name": "ROOT",
        "xml": "<outcome value='ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4113.883758544922,
        "y": 645,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "92f10d9d.0be95"
            ]
        ]
    },
    {
        "id": "6a08da95.c46784",
        "type": "outcome",
        "name": "LEAF",
        "xml": "<outcome value='LEAF'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4115.883758544922,
        "y": 699,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "bbb0db7f.fd9908"
            ]
        ]
    },
    {
        "id": "892e5669.1ea2b",
        "type": "set",
        "name": "set network-route-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4457.883758544922,
        "y": 336.99993896484375,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "6a564e86.c1193",
        "type": "set",
        "name": "set network-route-LEAF",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4450.883758544922,
        "y": 434.99993896484375,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "a3abd24c.7a5ec",
        "type": "set",
        "name": "set network-route-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4429.883758544922,
        "y": 618,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "dc9fae61.a17b2",
        "type": "set",
        "name": "set network-route-LEAF",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4433.883758544922,
        "y": 711,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "50eeb433.a27fd4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3609.88330078125,
        "y": 1371,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c94a30c2.a398b"
            ]
        ]
    },
    {
        "id": "a408ed17.7674d",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3619.374267578125,
        "y": 1413.5740356445312,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "82ef970c.862378"
            ]
        ]
    },
    {
        "id": "3bc8671c.26c7e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3607.88330078125,
        "y": 1460,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5a6a5226.7899ec"
            ]
        ]
    },
    {
        "id": "246e8fda.9e3d88",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3309.88330078125,
        "y": 1333,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "652968a1.d93e88",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3352.88330078125,
        "y": 1398,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "50eeb433.a27fd4",
                "a408ed17.7674d",
                "3bc8671c.26c7e"
            ]
        ]
    },
    {
        "id": "1abe7496.3f7c9b",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3353.883270263672,
        "y": 1150,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "56f8321f.20ee54",
                "27baf83a.a648a"
            ]
        ]
    },
    {
        "id": "27baf83a.a648a",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3576.883270263672,
        "y": 1136,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "89fdb9b4.3821e8"
            ]
        ]
    },
    {
        "id": "56f8321f.20ee54",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3578.883270263672,
        "y": 1169,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "bd796d50.897138"
            ]
        ]
    },
    {
        "id": "c94a30c2.a398b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3782.5498046875,
        "y": 1370,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5b1520ee.c993d8",
                "92906f1e.302de8"
            ]
        ]
    },
    {
        "id": "82ef970c.862378",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3772.9456787109375,
        "y": 1416.8597717285156,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "5a6a5226.7899ec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3776.88330078125,
        "y": 1461,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "5b1520ee.c993d8",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4046.88330078125,
        "y": 1354,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "40f95927.3e48a8",
                "155b2019.4d901"
            ]
        ]
    },
    {
        "id": "155b2019.4d901",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4269.88330078125,
        "y": 1309,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8cff212e.fd093"
            ]
        ]
    },
    {
        "id": "40f95927.3e48a8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4271.88330078125,
        "y": 1373,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "9ea2b228.156828"
            ]
        ]
    },
    {
        "id": "9ea2b228.156828",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4433.88330078125,
        "y": 1369,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "8cff212e.fd093",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4434.88330078125,
        "y": 1306,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "ea39175a.08155",
                "81bb5906.bb1848"
            ]
        ]
    },
    {
        "id": "bd796d50.897138",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3721.883270263672,
        "y": 1166,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "89fdb9b4.3821e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3724.883270263672,
        "y": 1129,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "242e596.6a45da6",
                "c522f465.9b1b48"
            ]
        ]
    },
    {
        "id": "242e596.6a45da6",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3916.883270263672,
        "y": 1131,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "92906f1e.302de8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4006.88330078125,
        "y": 1486,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "9d7e97d1.f3da4"
            ]
        ]
    },
    {
        "id": "9d7e97d1.f3da4",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4212.88330078125,
        "y": 1486,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "39469ddd.cce81a"
            ]
        ]
    },
    {
        "id": "39469ddd.cce81a",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4428.1689453125,
        "y": 1485.82177734375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "286435fd.520a92"
            ]
        ]
    },
    {
        "id": "c522f465.9b1b48",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3913.883270263672,
        "y": 1196,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "9a817681.2b7108",
                "845c0857.7834f8",
                "aae3c73d.eac74"
            ]
        ]
    },
    {
        "id": "9a817681.2b7108",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4109.383392333984,
        "y": 1148,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d82b3eae.4c278"
            ]
        ]
    },
    {
        "id": "845c0857.7834f8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4101.383392333984,
        "y": 1203,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c5b5dd85.a284c8"
            ]
        ]
    },
    {
        "id": "aae3c73d.eac74",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4106.383392333984,
        "y": 1260,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "535d5ed7.3fd4e"
            ]
        ]
    },
    {
        "id": "535d5ed7.3fd4e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4258.383392333984,
        "y": 1261,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c5b5dd85.a284c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4269.383392333984,
        "y": 1206,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "d82b3eae.4c278",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4253.765716552734,
        "y": 1145.6556701660156,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5176f492.5f7e8c"
            ]
        ]
    },
    {
        "id": "5176f492.5f7e8c",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4447.883270263672,
        "y": 1189.9999389648438,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1d42fe6d.851b3a"
            ]
        ]
    },
    {
        "id": "81bb5906.bb1848",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 4604.88330078125,
        "y": 1264,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "ea39175a.08155",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 4605.88330078125,
        "y": 1372,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "ea0872ed.58cfa",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4606.88330078125,
        "y": 1321,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "286435fd.520a92",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4635.00048828125,
        "y": 1486.34033203125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b0e3cfe1.6d40f",
                "7126b880.f67e48",
                "ad3a7086.abf6b"
            ]
        ]
    },
    {
        "id": "b0e3cfe1.6d40f",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4850.00048828125,
        "y": 1448.34033203125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "7126b880.f67e48",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4847.00048828125,
        "y": 1487.34033203125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7a65c420.1080dc"
            ]
        ]
    },
    {
        "id": "ad3a7086.abf6b",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4802.50048828125,
        "y": 1529.34033203125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "7a65c420.1080dc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5027.50048828125,
        "y": 1486.34033203125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "96c8a7ed.e41958"
            ]
        ]
    },
    {
        "id": "90470a6f.8ef5f8",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4835.88330078125,
        "y": 1082,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e5efb625.18037"
            ]
        ]
    },
    {
        "id": "e5efb625.18037",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5012.88330078125,
        "y": 1074,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "732587d3.ab7a9",
                "4baffabc.103f3c"
            ]
        ]
    },
    {
        "id": "1d42fe6d.851b3a",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4638.883270263672,
        "y": 1179.9999389648438,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "90470a6f.8ef5f8",
                "6cae07e7.8ff81"
            ]
        ]
    },
    {
        "id": "6cae07e7.8ff81",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4838.88330078125,
        "y": 1156,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8681155.73991e8"
            ]
        ]
    },
    {
        "id": "8681155.73991e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5015.88330078125,
        "y": 1148,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c2e2c331.f24d7"
            ]
        ]
    },
    {
        "id": "96c8a7ed.e41958",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5185.50048828125,
        "y": 1486.34033203125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d73ce805.51d21"
            ]
        ]
    },
    {
        "id": "d73ce805.51d21",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5392.50048828125,
        "y": 1486.34033203125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "4baffabc.103f3c",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5220.88330078125,
        "y": 1081,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "276c589.f8898a8",
                "b6b78749.64c52",
                "710e31ca.f7c328"
            ]
        ]
    },
    {
        "id": "732587d3.ab7a9",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5250.88330078125,
        "y": 1029,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "276c589.f8898a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5430.88330078125,
        "y": 1072,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6595904d.14fc"
            ]
        ]
    },
    {
        "id": "b6b78749.64c52",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5422.88330078125,
        "y": 1127,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "870ff6d4.3b5618"
            ]
        ]
    },
    {
        "id": "710e31ca.f7c328",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5427.88330078125,
        "y": 1184,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "14dafdf8.cfb5c2"
            ]
        ]
    },
    {
        "id": "14dafdf8.cfb5c2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5579.88330078125,
        "y": 1185,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "870ff6d4.3b5618",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5590.88330078125,
        "y": 1130,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "6595904d.14fc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5575.265625,
        "y": 1069.6556701660156,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "4578d3b4.cc9aac"
            ]
        ]
    },
    {
        "id": "c2e2c331.f24d7",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5250.88330078125,
        "y": 1272,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "4578d3b4.cc9aac",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5789.88330078125,
        "y": 1066,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "d9f780b3.339398",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4445.883758544922,
        "y": 372.99993896484375,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "eeaf4d12.9621",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4446.883728027344,
        "y": 476.99993896484375,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "af392071.289a38",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4270.883758544922,
        "y": 378.99993896484375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "892e5669.1ea2b",
                "d9f780b3.339398"
            ]
        ]
    },
    {
        "id": "7fbb2a1.f3ae954",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4276.883758544922,
        "y": 442.99993896484375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6a564e86.c1193",
                "eeaf4d12.9621"
            ]
        ]
    },
    {
        "id": "92f10d9d.0be95",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4241.883758544922,
        "y": 645,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a3abd24c.7a5ec",
                "d4111de3.168d5"
            ]
        ]
    },
    {
        "id": "bbb0db7f.fd9908",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4244.883758544922,
        "y": 698,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "dc9fae61.a17b2",
                "daba5f73.79ab3"
            ]
        ]
    },
    {
        "id": "d4111de3.168d5",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4415.883758544922,
        "y": 658,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "daba5f73.79ab3",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4418.883758544922,
        "y": 749,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "f11652ec.f5ecc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3741.88330078125,
        "y": 1828.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2518ba78.6d21ae",
                "ca887fb4.4fa748"
            ]
        ]
    },
    {
        "id": "5d22eff5.ad4738",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3569.216796875,
        "y": 1829.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f11652ec.f5ecc"
            ]
        ]
    },
    {
        "id": "f62aa8b7.81c7a8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3578.707763671875,
        "y": 1871.5741577148438,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3ccb36a1.cd58ba"
            ]
        ]
    },
    {
        "id": "949b65da.c62778",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3567.216796875,
        "y": 1918.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b3008d52.d5dec"
            ]
        ]
    },
    {
        "id": "3ccb36a1.cd58ba",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3732.2791748046875,
        "y": 1874.8598937988281,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "b3008d52.d5dec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3736.216796875,
        "y": 1919.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "2518ba78.6d21ae",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4028.216796875,
        "y": 1832.000244140625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2fdbf5bd.c09292",
                "9a5de981.0de7c"
            ]
        ]
    },
    {
        "id": "9a5de981.0de7c",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4251.216796875,
        "y": 1787.000244140625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "82242071.f4a9f"
            ]
        ]
    },
    {
        "id": "2fdbf5bd.c09292",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4253.216796875,
        "y": 1851.000244140625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "56361c44.c984a4"
            ]
        ]
    },
    {
        "id": "56361c44.c984a4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4412.216796875,
        "y": 1870.000244140625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "82242071.f4a9f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4416.216796875,
        "y": 1784.000244140625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "10610dd4.f6c112",
                "ddf5e2c4.67d9f8"
            ]
        ]
    },
    {
        "id": "fc221d76.582c9",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3341.216796875,
        "y": 1864.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5d22eff5.ad4738",
                "f62aa8b7.81c7a8",
                "949b65da.c62778"
            ]
        ]
    },
    {
        "id": "322a186d.549ed",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3302.216796875,
        "y": 1808.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "f369a6e9.5de548",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3353.216796875,
        "y": 1603,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "cb8e448.206bab8",
                "778779f6.be6098"
            ]
        ]
    },
    {
        "id": "778779f6.be6098",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3576.216796875,
        "y": 1589,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "4c771f34.9e70b8"
            ]
        ]
    },
    {
        "id": "cb8e448.206bab8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3578.216796875,
        "y": 1622,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7c64438a.ff9f5c"
            ]
        ]
    },
    {
        "id": "7c64438a.ff9f5c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3721.216796875,
        "y": 1619,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "4c771f34.9e70b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3724.216796875,
        "y": 1582,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8b5ae92b.18937",
                "acd78677.da7398"
            ]
        ]
    },
    {
        "id": "8b5ae92b.18937",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3918.216796875,
        "y": 1585.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "ca887fb4.4fa748",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3969.216766357422,
        "y": 1965,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d3ca912e.f0454"
            ]
        ]
    },
    {
        "id": "d3ca912e.f0454",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4175.216766357422,
        "y": 1965,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e775983e.c87c6"
            ]
        ]
    },
    {
        "id": "e775983e.c87c6",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4392.502410888672,
        "y": 1963.82177734375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8510e412.3775c"
            ]
        ]
    },
    {
        "id": "acd78677.da7398",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3940.216796875,
        "y": 1653.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e413099e.5580f8",
                "73fbbbe6.41f3fc",
                "be84a2f7.e2d8"
            ]
        ]
    },
    {
        "id": "e413099e.5580f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4135.7169189453125,
        "y": 1605.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6607b5e0.cc2a14"
            ]
        ]
    },
    {
        "id": "73fbbbe6.41f3fc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4127.7169189453125,
        "y": 1660.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c946d76.aa97f28"
            ]
        ]
    },
    {
        "id": "be84a2f7.e2d8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4132.7169189453125,
        "y": 1717.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "55c1c0e2.5aae38"
            ]
        ]
    },
    {
        "id": "55c1c0e2.5aae38",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4284.7169189453125,
        "y": 1718.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c946d76.aa97f28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4295.7169189453125,
        "y": 1663.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "6607b5e0.cc2a14",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4280.0992431640625,
        "y": 1602.6557922363281,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "eb6f70d5.e0fd88"
            ]
        ]
    },
    {
        "id": "10610dd4.f6c112",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 4586.216796875,
        "y": 1745.000244140625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "ddf5e2c4.67d9f8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 4587.216796875,
        "y": 1850.000244140625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "f866aa99.a64d6",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4582.216796875,
        "y": 1799.000244140625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "8510e412.3775c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4599.333953857422,
        "y": 1953.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3eb610b6.e19958",
                "2b4d2f26.4fc18",
                "56b44513.ed17bc"
            ]
        ]
    },
    {
        "id": "3eb610b6.e19958",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4814.333953857422,
        "y": 1915.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "2b4d2f26.4fc18",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4811.333953857422,
        "y": 1954.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b7623c50.89af3"
            ]
        ]
    },
    {
        "id": "56b44513.ed17bc",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4766.833953857422,
        "y": 1996.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "b7623c50.89af3",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4991.833953857422,
        "y": 1953.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e2420b84.cbf938"
            ]
        ]
    },
    {
        "id": "e2420b84.cbf938",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5149.833953857422,
        "y": 1953.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d3754257.cdbb9"
            ]
        ]
    },
    {
        "id": "d3754257.cdbb9",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5356.833953857422,
        "y": 1953.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "303b1a28.56bd56",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4862.216796875,
        "y": 1621.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8f6cdb8f.90967"
            ]
        ]
    },
    {
        "id": "8f6cdb8f.90967",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5039.216796875,
        "y": 1613.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5fcf484f.8e6e78",
                "f4e9d00a.c60c9"
            ]
        ]
    },
    {
        "id": "eb6f70d5.e0fd88",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4464.216796875,
        "y": 1617.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "93bac5db.c9063"
            ]
        ]
    },
    {
        "id": "93bac5db.c9063",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4659.216796875,
        "y": 1617.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "303b1a28.56bd56",
                "6dd697d7.ade42"
            ]
        ]
    },
    {
        "id": "f4e9d00a.c60c9",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5247.216796875,
        "y": 1620.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "af18531c.f561e8",
                "6d4f9387.cdc244",
                "7f999aa.ecc8a64"
            ]
        ]
    },
    {
        "id": "6e464f44.674b68",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5041.216796875,
        "y": 1686.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c6202cfd.8bcb4"
            ]
        ]
    },
    {
        "id": "6dd697d7.ade42",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4864.216796875,
        "y": 1694.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6e464f44.674b68"
            ]
        ]
    },
    {
        "id": "5fcf484f.8e6e78",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5277.216796875,
        "y": 1568.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c6202cfd.8bcb4",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5254.216796875,
        "y": 1752.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "af18531c.f561e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5457.216796875,
        "y": 1611.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5e16aade.ea368c"
            ]
        ]
    },
    {
        "id": "6d4f9387.cdc244",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5449.216796875,
        "y": 1666.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "77d34b30.5fb23c"
            ]
        ]
    },
    {
        "id": "7f999aa.ecc8a64",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5454.216796875,
        "y": 1723.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "674c6f5c.5f0f88"
            ]
        ]
    },
    {
        "id": "674c6f5c.5f0f88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5606.216796875,
        "y": 1724.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "77d34b30.5fb23c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5617.216796875,
        "y": 1669.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "5e16aade.ea368c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5601.59912109375,
        "y": 1608.6557922363281,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "4cb5ebab.b25f64"
            ]
        ]
    },
    {
        "id": "4cb5ebab.b25f64",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5816.216796875,
        "y": 1605.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "5fd92a3e.ed6fec",
        "type": "set",
        "name": "set LEAF stuff",
        "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop + '-' + $tmp.aai.network-route-A.logical-interface-id`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
        "comments": "",
        "x": 3314.88330078125,
        "y": 1475,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "4a864e6a.471e",
        "type": "set",
        "name": "set ROOT stuff",
        "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop + '-' + $tmp.aai.network-route-B.logical-interface-id`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
        "comments": "",
        "x": 3301.88330078125,
        "y": 1995.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "cfd6a168.75b7d8",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2426.883331298828,
        "y": 188,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "fe93cfa.921edb",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 2360.883331298828,
        "y": 224,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "85869c3a.24ed3",
        "type": "comment",
        "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
        "info": "",
        "comments": "",
        "x": 2545.883331298828,
        "y": 151,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "f5ea8856.4eb3f",
        "type": "comment",
        "name": "NOT NEEDED ANYMORE?",
        "info": "",
        "comments": "",
        "x": 4072.88330078125,
        "y": 1453,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "8e941b0d.26d14",
        "type": "comment",
        "name": "NOT NEEDED ANYMORE?",
        "info": "",
        "comments": "",
        "x": 4028.883270263672,
        "y": 1917,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "8cb68ccc.e851f8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3441.8837890625,
        "y": 7483.999969482422,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "80d49243.ddf01",
        "type": "comment",
        "name": "START OF DELETE OPERATION",
        "info": "",
        "comments": "",
        "x": 3296.88330078125,
        "y": 2476.999969482422,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "8f2ca941.64e03",
        "type": "save",
        "name": "delete LEAF uni resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3880.566650390625,
        "y": 2578.4000854492188,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "afaae138.bb9798",
        "type": "save",
        "name": "get LEAF uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.LEAF.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.leafuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3251.566650390625,
        "y": 2558.4000854492188,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "661c06cc.3908b",
                "1ca1166.e689c6a",
                "b5955cba.954b1"
            ]
        ]
    },
    {
        "id": "1ca1166.e689c6a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3479.0576171875,
        "y": 2530.9740600585938,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e6c36b4a.f9b0a8"
            ]
        ]
    },
    {
        "id": "b5955cba.954b1",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3474.566650390625,
        "y": 2575.4000244140625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "9464bc90.391b5"
            ]
        ]
    },
    {
        "id": "e6c36b4a.f9b0a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3641.629150390625,
        "y": 2530.259765625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "9464bc90.391b5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3642.566650390625,
        "y": 2575.4000244140625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "661c06cc.3908b",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3486.566650390625,
        "y": 2625.4000854492188,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8055efb.5ed0c9"
            ]
        ]
    },
    {
        "id": "8055efb.5ed0c9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3638.88330078125,
        "y": 2628.9999389648438,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2d855333.ba947c",
                "8f2ca941.64e03",
                "7724024e.bb32ec",
                "b98aea07.4499"
            ]
        ]
    },
    {
        "id": "2d855333.ba947c",
        "type": "set",
        "name": "set bwToBeDecreased tpid cvlan",
        "xml": "<set>\n<parameter name='bwToBeDecreased' value=\"`$tmp.aai.leafuni.data-source`\" />\n<parameter name='tpid' value='`$tmp.aai.leafuni.tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.leafuni.cvlan`' />\n\n\n",
        "comments": "",
        "x": 3883.566650390625,
        "y": 2521.4000854492188,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "a9e99fa6.0d7b7",
        "type": "comment",
        "name": "Update ROOT UNI's bw",
        "info": "",
        "comments": "",
        "x": 3845.566650390625,
        "y": 2632.199951171875,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "d2355b29.347a7",
        "type": "save",
        "name": "update ROOT UNI in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4523.566650390625,
        "y": 2675.199951171875,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "7724024e.bb32ec",
        "type": "save",
        "name": "get root uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3837.56640625,
        "y": 2678.199951171875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7f7b7065.dfb0f",
                "18f5411.3947abf",
                "5fedf83d.ca31e8"
            ]
        ]
    },
    {
        "id": "18f5411.3947abf",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4141.057373046875,
        "y": 2588.77392578125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "58e0cfbb.eeb22"
            ]
        ]
    },
    {
        "id": "5fedf83d.ca31e8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4136.56640625,
        "y": 2633.1998901367188,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "9a2aec0d.d77f58"
            ]
        ]
    },
    {
        "id": "58e0cfbb.eeb22",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4303.62890625,
        "y": 2588.0596313476562,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "9a2aec0d.d77f58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4304.56640625,
        "y": 2633.1998901367188,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "2175339a.46dd54",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4301.56640625,
        "y": 2683.199951171875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "9319905e.cf01b",
                "d2355b29.347a7"
            ]
        ]
    },
    {
        "id": "7f7b7065.dfb0f",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4132.56640625,
        "y": 2683.199951171875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2175339a.46dd54"
            ]
        ]
    },
    {
        "id": "9319905e.cf01b",
        "type": "set",
        "name": "set new bw",
        "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source - $bwToBeDecreased`' />\n",
        "comments": "",
        "x": 4483.567138671875,
        "y": 2625.199951171875,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c9164c42.75d5f8",
        "type": "comment",
        "name": "Delete LEAF UNI",
        "info": "",
        "comments": "",
        "x": 3831.88330078125,
        "y": 2462.9999389648438,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "82a9b10f.cbf938",
        "type": "set",
        "name": "set current-provider-id and current-cvlan-id",
        "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
        "comments": "",
        "x": 3311.749969482422,
        "y": 3795.6000366210938,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "9a0ba695.c13258",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3444.749969482422,
        "y": 3843.6000366210938,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "a14834df.662a8",
        "type": "switchNode",
        "name": "switch found-connectivity?",
        "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3266.749969482422,
        "y": 3895.4000854492188,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b9a4b0ad.78d9e8",
                "49168449.b48e54"
            ]
        ]
    },
    {
        "id": "b9a4b0ad.78d9e8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3459.749969482422,
        "y": 3896.4000854492188,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c7d731c2.8648d8"
            ]
        ]
    },
    {
        "id": "c7d731c2.8648d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"LEAF CONN DOES NOT EXIST BUT IT SHOULD BE.\" />\n\n",
        "comments": "",
        "x": 3603.749969482422,
        "y": 3892.6000366210938,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "49168449.b48e54",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3463.749969482422,
        "y": 3940.4000854492188,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2b5fde97.f226ea"
            ]
        ]
    },
    {
        "id": "2b5fde97.f226ea",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3602.749969482422,
        "y": 3935.4000854492188,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6c8d251.aa4085c",
                "1d93d9c1.b4dc36",
                "2f3e9082.a03f"
            ]
        ]
    },
    {
        "id": "6c8d251.aa4085c",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.the-connectivity.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3853.149627685547,
        "y": 3943.9166870117188,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8f03c967.45f27"
            ]
        ]
    },
    {
        "id": "8f03c967.45f27",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.the-connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4075.149627685547,
        "y": 3921.9166870117188,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3959f0cf.96f36"
            ]
        ]
    },
    {
        "id": "3959f0cf.96f36",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4235.149139404297,
        "y": 3901.9166870117188,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1414f243.3459be"
            ]
        ]
    },
    {
        "id": "80ad8584.1bf2c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4388.149658203125,
        "y": 3882.916717529297,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "dbcbba23.eadbb",
                "2ba6b637.902e82"
            ]
        ]
    },
    {
        "id": "dbcbba23.eadbb",
        "type": "set",
        "name": "set tmp.stillHasUni to TRUE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='true' />\n",
        "comments": "",
        "x": 4584.649871826172,
        "y": 3850.9999389648438,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "1d93d9c1.b4dc36",
        "type": "set",
        "name": "set tmp.stillHasUn tmp.keepVPNBs to FALSE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='false' />\n<parameter name='tmp.keepVPNBs' value='false' />\n",
        "comments": "",
        "x": 3959.64990234375,
        "y": 3862.999969482422,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "2f3e9082.a03f",
        "type": "switchNode",
        "name": "switch tmp.keepVPNBs?",
        "xml": "\n<switch test=\"`$tmp.keepVPNBs`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3767.64990234375,
        "y": 4284.000213623047,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f5f9b41d.cada7",
                "3f4fef24.6df1a"
            ]
        ]
    },
    {
        "id": "2ba6b637.902e82",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4552.88330078125,
        "y": 3918.999969482422,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "3f4fef24.6df1a",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 154.65066528320312,
        "y": 5348.000457763672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "16d898b2.82d4af"
            ]
        ]
    },
    {
        "id": "f5f9b41d.cada7",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3988.650634765625,
        "y": 4386.000213623047,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "26c73a8d.4562be"
            ]
        ]
    },
    {
        "id": "26c73a8d.4562be",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4131.650634765625,
        "y": 4382.000213623047,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e9909468.33151",
                "efe71d55.9caa78",
                "21b48e5f.bc8462",
                "55b631d2.803a38",
                "a2022ff9.9bc538",
                "702c8bba.ca32ac",
                "e084df79.80ceb8",
                "624968c9.f15538",
                "abf74f44.8bd74"
            ]
        ]
    },
    {
        "id": "4355739e.98f0ec",
        "type": "comment",
        "name": "keepVPNBs == false, then check tmp.stillHasUni",
        "info": "(2) keepVPNBs == false, means there are no other UNIs in this\nsame domain and same connectivity that share the same OLT node.\n\ncheck if tmp.stillHasUni is True or False?\n\nif TRUE --> means this domain (connectivity) still has other UNIs\n- delete VPNBs\n- delete LEAF UNI in AAI -- DONE\n- upadte bw in ROOT UNI -- DONE\n- delete LEAF UNI in LEAF ethernet service PNC\n- change ROOT conn status to Modified\n--- mark LEAF connectivity as Modified because the underlay OTN tunnel list of this connectivity is now different\n\nif FALSE --> means this domain (connectivity) has no other UNIs\n\nif MMstillHasUni == TRUE, means scenario (3), else, means scenario (4)\n\n(3) & (4) both:\n- delete VPNBs\n- delete LEAF connectivity\n- delete LEAF Ethernet Service from PNC\n\n(3) only:\n- change ROOT conn status to Modified\n- Keep the middle-man-conn and DON'T delete\n\n(4) only:\n- delete ROOT UNI\n- delete ROOT conn from AAI\n- delete ROOT Ethernet Service from PNC\n- delete middle-man-conn from AAI\n\n",
        "comments": "",
        "x": 181,
        "y": 5304.000457763672,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "4da2ca0c.4a8b84",
        "type": "comment",
        "name": "There are still other UNIs in this connectivity that share same OLT node. Only update bw of the vpn-bindings involved",
        "info": "(1) keepVPNBs == true, means there are still other UNIs in this\nsame domain and same connectivity that share the same OLT node.\n\n- Only update bw of the vpn-bindings involved -- DONE\n- upadte bw in ROOT UNI -- DONE\n- change ROOT conn status to Modified -- DONE\n- delete LEAF UNI in AAI -- DONE\n- delete LEAF UNI in LEAF ethernet service PNC -- DONE\n- DON'T delete the connectivities of LEAF and ROOT -- DONE\nAlso update the ethernet services",
        "comments": "",
        "x": 4007.884033203125,
        "y": 4349.000213623047,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "9b3df18d.6f724",
        "type": "set",
        "name": "set srcTtp OTN layer",
        "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
        "comments": "",
        "x": 4820.667724609375,
        "y": 4539.783660888672,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "84df48a4.4e5358",
        "type": "switchNode",
        "name": "switch provider-id domainA",
        "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5165.667724609375,
        "y": 4401.783660888672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "cfc0c818.79fe68"
            ]
        ]
    },
    {
        "id": "10190e03.34bba2",
        "type": "for",
        "name": "for netwidx..allNetworksList_length",
        "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 4872.667724609375,
        "y": 4395.783660888672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "84df48a4.4e5358"
            ]
        ]
    },
    {
        "id": "1796601b.dbfbf",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5127.667724609375,
        "y": 4352.783660888672,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "4871207.ade70e",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
        "comments": "",
        "x": 4816.667724609375,
        "y": 4447.783660888672,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "fe8bfdbc.e310b8",
        "type": "set",
        "name": "set tmp.pce-src-node",
        "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
        "comments": "",
        "x": 4824.667724609375,
        "y": 4492.783660888672,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "ed94bc94.c3085",
        "type": "set",
        "name": "unset otnTopoIdSrc",
        "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
        "comments": "",
        "x": 4821.667724609375,
        "y": 4345.783660888672,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "cfc0c818.79fe68",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5074.667724609375,
        "y": 4469.783660888672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3784b6ea.dad97a"
            ]
        ]
    },
    {
        "id": "3784b6ea.dad97a",
        "type": "switchNode",
        "name": "switch te-topo-id",
        "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5259.667724609375,
        "y": 4468.783660888672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6ba573fe.abd33c"
            ]
        ]
    },
    {
        "id": "6ba573fe.abd33c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5451.667724609375,
        "y": 4471.783660888672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a8101530.41669"
            ]
        ]
    },
    {
        "id": "a8101530.41669",
        "type": "set",
        "name": "set otnTopoIdSrc",
        "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
        "comments": "",
        "x": 5623.667724609375,
        "y": 4467.783660888672,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "3a63decd.7b4cb2",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4999.667724609375,
        "y": 4582.783660888672,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "e9909468.33151",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4516.667724609375,
        "y": 4367.783660888672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "9c834ddf.7b5a8",
                "1b5b7b9f.240eac",
                "4871207.ade70e",
                "fe8bfdbc.e310b8",
                "9b3df18d.6f724",
                "10190e03.34bba2",
                "3a63decd.7b4cb2"
            ]
        ]
    },
    {
        "id": "5418760e.ea421",
        "type": "comment",
        "name": "The following section is to find srcTtp OTN layer (its long name)",
        "info": "The following section is to find srcTtp OTN layer (its long name)",
        "comments": "",
        "x": 4501.667724609375,
        "y": 4301.783660888672,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "1b5b7b9f.240eac",
        "type": "get-resource",
        "name": "get-resource network-resources-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
        "comments": "",
        "outputs": 1,
        "x": 4880.667724609375,
        "y": 4288.783660888672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "cdc8c3cd.7743d8",
                "829501cc.19a87",
                "1796601b.dbfbf"
            ]
        ]
    },
    {
        "id": "cdc8c3cd.7743d8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5116.667724609375,
        "y": 4271.783660888672,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "829501cc.19a87",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5113.667724609375,
        "y": 4312.783660888672,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "9c834ddf.7b5a8",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
        "comments": "",
        "x": 4829.667724609375,
        "y": 4245.783660888672,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "efe71d55.9caa78",
        "type": "set",
        "name": "unset tmp.aai.all-vpn-bindings",
        "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value='' />\n",
        "comments": "",
        "x": 4336.667724609375,
        "y": 4700.183563232422,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "429a4c62.ec5bdc",
        "type": "comment",
        "name": "find all OTNs that have srcTtpOtnLayer and decrease their bandwidth",
        "info": "",
        "comments": "",
        "x": 4459.968017578125,
        "y": 4739.183563232422,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "21b48e5f.bc8462",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 4357.968017578125,
        "y": 4774.183563232422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a823d247.f64a98",
                "36823aa3.4d18a6",
                "eb8482c0.2d4878"
            ]
        ]
    },
    {
        "id": "a823d247.f64a98",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4562.968017578125,
        "y": 4771.183563232422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8498bebb.23bf48"
            ]
        ]
    },
    {
        "id": "36823aa3.4d18a6",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4546.458984375,
        "y": 4832.757598876953,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "386b7921.748fb6"
            ]
        ]
    },
    {
        "id": "eb8482c0.2d4878",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4543.968017578125,
        "y": 4876.183563232422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "134c42f5.f94555"
            ]
        ]
    },
    {
        "id": "8498bebb.23bf48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4730.96826171875,
        "y": 4766.183563232422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6b12d916.16568"
            ]
        ]
    },
    {
        "id": "386b7921.748fb6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4709.0303955078125,
        "y": 4833.0433349609375,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "134c42f5.f94555",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4710.968017578125,
        "y": 4875.183563232422,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "6b12d916.16568",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4968.96826171875,
        "y": 4771.183563232422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "cfa150d4.94ff28"
            ]
        ]
    },
    {
        "id": "cfa150d4.94ff28",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5202.968017578125,
        "y": 4778.183563232422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e4eccca9.9724c8"
            ]
        ]
    },
    {
        "id": "dd4e0e04.50655",
        "type": "comment",
        "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
        "info": "",
        "comments": "",
        "x": 5119.783935546875,
        "y": 4849.349884033203,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "e4eccca9.9724c8",
        "type": "switchNode",
        "name": "switch ops-note is srcTtpOtnLayer",
        "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5063.783935546875,
        "y": 4898.349884033203,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7056a1ab.16f5c8",
                "9ff2677.5b72918"
            ]
        ]
    },
    {
        "id": "9ff2677.5b72918",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5306.784423828125,
        "y": 4939.349395751953,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "7056a1ab.16f5c8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5317.7841796875,
        "y": 4896.349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2f2661a7.5dc1e6"
            ]
        ]
    },
    {
        "id": "a26e073.3ca98f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5544.767578125,
        "y": 4903.76611328125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "ff1ba77c.30ef7",
                "6cee0088.2f0908",
                "acf1096d.49e23"
            ]
        ]
    },
    {
        "id": "6e1088cb.02b348",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='vpnbridx' start='0' end='`$tmp.aai.the-vpn-binding.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5709.8173828125,
        "y": 4788.766571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "28fa48d0.c1f11"
            ]
        ]
    },
    {
        "id": "28fa48d0.c1f11",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5901.8173828125,
        "y": 4777.766815185547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "794e0693.bafff"
            ]
        ]
    },
    {
        "id": "ff1ba77c.30ef7",
        "type": "set",
        "name": "unset tmp.aai.the-vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
        "comments": "",
        "x": 5658.334228515625,
        "y": 4678.983612060547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "6cee0088.2f0908",
        "type": "set",
        "name": "set tmp.aai.the-vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
        "comments": "",
        "x": 5650.334228515625,
        "y": 4727.983612060547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "acf1096d.49e23",
        "type": "save",
        "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.the-vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher - $bwToBeDecreased`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5881.751220703125,
        "y": 4909.149627685547,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "7591a9e8.920d7",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5833.401123046875,
        "y": 4956.466522216797,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "20c2cafd.4f2b6e",
        "type": "comment",
        "name": "decrease the bw of the-vpn-binding and change status to modified",
        "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
        "comments": "",
        "x": 5905.751220703125,
        "y": 4870.149627685547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "794e0693.bafff",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6083.8173828125,
        "y": 4756.766815185547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "cb67e673.c3b218"
            ]
        ]
    },
    {
        "id": "cb67e673.c3b218",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6245.8173828125,
        "y": 4745.766815185547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "28efce3c.031a02",
                "a7f7a502.452a7"
            ]
        ]
    },
    {
        "id": "28efce3c.031a02",
        "type": "set",
        "name": "unset tmp.the-connectivity",
        "xml": "<set>\n<parameter name='tmp.the-connectivity.' value='' />\n",
        "comments": "",
        "x": 6442.8173828125,
        "y": 4674.766815185547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "a7f7a502.452a7",
        "type": "set",
        "name": "set tmp.the-connectivity",
        "xml": "<set>\n<parameter name='tmp.the-connectivity.' value='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].relationship-data[0].relationship-value`' />\n",
        "comments": "",
        "x": 6440.2841796875,
        "y": 4773.983612060547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "121ba89c.f4d387",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3097.800048828125,
        "y": 3232.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "e7a924f9.c6032",
        "type": "switchNode",
        "name": "switch found-middle-man?",
        "xml": "<switch test='`$found-middle-man`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2974.800048828125,
        "y": 3342.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a8ce787f.7ca8b8",
                "dab4cfcf.e3306"
            ]
        ]
    },
    {
        "id": "a8ce787f.7ca8b8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3158.800048828125,
        "y": 3321.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3ed4168e.db435a"
            ]
        ]
    },
    {
        "id": "3ed4168e.db435a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3301.800048828125,
        "y": 3321.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d46982de.a36698"
            ]
        ]
    },
    {
        "id": "d46982de.a36698",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"LEAF CONN DOES NOT EXIST BUT IT SHOULD BE.\" />\n\n",
        "comments": "",
        "x": 3477.800048828125,
        "y": 3319.800018310547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "dab4cfcf.e3306",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3156.800048828125,
        "y": 3376.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "55aae2f8.8a15b4"
            ]
        ]
    },
    {
        "id": "55aae2f8.8a15b4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3003.800048828125,
        "y": 3509.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "82a9b10f.cbf938",
                "9a0ba695.c13258",
                "a14834df.662a8",
                "87bd7501.49bf18",
                "4331a4c2.0089dc",
                "b9e9be73.6c3be"
            ]
        ]
    },
    {
        "id": "6411a3c0.06e7c4",
        "type": "comment",
        "name": "Find LEAF connectivity",
        "info": "",
        "comments": "",
        "x": 3225.88330078125,
        "y": 3749.999969482422,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "87bd7501.49bf18",
        "type": "set",
        "name": "set tmp.MMstillHasUni to FALSE",
        "xml": "<set>\n<parameter name='tmp.MMstillHasUni' value='false' />\n",
        "comments": "",
        "x": 3308.333251953125,
        "y": 3522.800018310547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "4331a4c2.0089dc",
        "type": "for",
        "name": "for each relationship of middle-man-conn",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$middle-man-conn.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3306.8330078125,
        "y": 3568.716766357422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3cfcd803.984ff"
            ]
        ]
    },
    {
        "id": "3cfcd803.984ff",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$middle-man-conn.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3569.8330078125,
        "y": 3563.716766357422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "19e3fea0.d430a9"
            ]
        ]
    },
    {
        "id": "19e3fea0.d430a9",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3729.83251953125,
        "y": 3543.716766357422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "cc595a48.1912e8"
            ]
        ]
    },
    {
        "id": "db4c40a7.875698",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5066.834228515625,
        "y": 3574.716796875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7118b227.f4c97c",
                "642017c6.da5f18",
                "d7647a1a.599238"
            ]
        ]
    },
    {
        "id": "7118b227.f4c97c",
        "type": "set",
        "name": "set tmp.MMstillHasUni to TRUE",
        "xml": "<set>\n<parameter name='tmp.MMstillHasUni' value='true' />\n",
        "comments": "",
        "x": 5306.334716796875,
        "y": 3523.800048828125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "642017c6.da5f18",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 5239.568145751953,
        "y": 3596.800079345703,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "d96806ce.d6ba3",
        "type": "comment",
        "name": "Find LEAF and ROOT connectivities and remove UNI from PNC",
        "info": "",
        "comments": "",
        "x": 4432.88427734375,
        "y": 5131.000213623047,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "55b631d2.803a38",
        "type": "set",
        "name": "set tmp.leafconn.",
        "xml": "<set>\n<parameter name='tmp.leafconn.' value='`$tmp.the-connectivity.`' />\n",
        "comments": "",
        "x": 4331.317138671875,
        "y": 5182.916717529297,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "e084df79.80ceb8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4482.317138671875,
        "y": 5625.916717529297,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "624968c9.f15538",
        "type": "switchNode",
        "name": "switch found-root-connectivity",
        "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4297.317138671875,
        "y": 5692.916717529297,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3ebbf801.286498",
                "76ebd92f.1642a"
            ]
        ]
    },
    {
        "id": "3ebbf801.286498",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4562.317138671875,
        "y": 5677.916717529297,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "37d1d73c.eecfd"
            ]
        ]
    },
    {
        "id": "76ebd92f.1642a",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4558.317138671875,
        "y": 5725.916717529297,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "199fe1ad.b53f66"
            ]
        ]
    },
    {
        "id": "37d1d73c.eecfd",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4718.317138671875,
        "y": 5673.916717529297,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "31a9971.ad96268"
            ]
        ]
    },
    {
        "id": "199fe1ad.b53f66",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
        "comments": "",
        "x": 4706.317138671875,
        "y": 5720.916717529297,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "802c1097.dcd94",
        "type": "set",
        "name": "set tmp.rootconn.",
        "xml": "<set>\n<parameter name='tmp.rootconn.' value=\"`$tmp.aai.ROOT.connectivity.`\" />\n\n\n",
        "comments": "",
        "x": 5138.3173828125,
        "y": 5615.916717529297,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "8e64de53.2c9fe8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.leafconn.access-provider-id + '-clientId-' +\n                                                   $tmp.leafconn.access-client-id + '-topologyId-' +\n                                                   $tmp.leafconn.access-topology-id + '-nodeId-' +\n                                                   $tmp.leafconn.access-node-id`\" />\n",
        "comments": "",
        "x": 4540.734130859375,
        "y": 5212.200408935547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "a2022ff9.9bc538",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4311.734130859375,
        "y": 5301.200408935547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8e64de53.2c9fe8",
                "2a874f25.a11e68"
            ]
        ]
    },
    {
        "id": "2a874f25.a11e68",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4547.734130859375,
        "y": 5294.200408935547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "42e4546b.7efc04",
                "8902c91a.a1454",
                "2a8da0f.130cae"
            ]
        ]
    },
    {
        "id": "42e4546b.7efc04",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4743.2342529296875,
        "y": 5246.200408935547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "374d8.3341eb28c"
            ]
        ]
    },
    {
        "id": "8902c91a.a1454",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4735.2342529296875,
        "y": 5301.200408935547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1ff3bcec.a42b9b"
            ]
        ]
    },
    {
        "id": "374d8.3341eb28c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4887.6165771484375,
        "y": 5245.8560791015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "ec0686db.c1a878"
            ]
        ]
    },
    {
        "id": "ec0686db.c1a878",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5071.734130859375,
        "y": 5244.200408935547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d4462e32.3100d8"
            ]
        ]
    },
    {
        "id": "d4462e32.3100d8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5266.734130859375,
        "y": 5244.200408935547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3a9e0096.e3a448"
            ]
        ]
    },
    {
        "id": "2a8da0f.130cae",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4740.2342529296875,
        "y": 5358.200408935547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "17a678b2.952aef"
            ]
        ]
    },
    {
        "id": "17a678b2.952aef",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4892.2342529296875,
        "y": 5359.200408935547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "1ff3bcec.a42b9b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4903.2342529296875,
        "y": 5302.200408935547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "318d00c4.ca52c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5648.734130859375,
        "y": 5248.200408935547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "46db4a25.4363a4",
                "34953acc.5d5dc6",
                "9de681b9.d85948"
            ]
        ]
    },
    {
        "id": "3a9e0096.e3a448",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5469.734130859375,
        "y": 5248.200408935547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "318d00c4.ca52c"
            ]
        ]
    },
    {
        "id": "34953acc.5d5dc6",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5854.734130859375,
        "y": 5261.200408935547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a1306b3e.752188",
                "af1e227.d98756",
                "c7dc9a0c.c1a12"
            ]
        ]
    },
    {
        "id": "46db4a25.4363a4",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5884.734130859375,
        "y": 5209.200408935547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "a1306b3e.752188",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6064.734130859375,
        "y": 5252.200408935547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c17f0a30.28a8c"
            ]
        ]
    },
    {
        "id": "af1e227.d98756",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6056.734130859375,
        "y": 5307.200408935547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f59cff5b.1a7268"
            ]
        ]
    },
    {
        "id": "c7dc9a0c.c1a12",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6061.734130859375,
        "y": 5364.200408935547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "18fa3a10.34d806"
            ]
        ]
    },
    {
        "id": "18fa3a10.34d806",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6213.734130859375,
        "y": 5365.200408935547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "f59cff5b.1a7268",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6224.734130859375,
        "y": 5310.200408935547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c17f0a30.28a8c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6209.116455078125,
        "y": 5249.8560791015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7a04be69.78c07"
            ]
        ]
    },
    {
        "id": "7a04be69.78c07",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6423.734130859375,
        "y": 5246.200408935547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "9de681b9.d85948",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 5804.734130859375,
        "y": 5325.200408935547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "702c8bba.ca32ac",
        "type": "execute",
        "name": "execute RestApiCallNode Delete LEAF UNI of ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.leafconn.etht-svc-name + '/etht-svc-end-points=' + $tmp.LEAF.uni-p-interface-long`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4453.234375,
        "y": 5405.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b53a2357.cb19f",
                "1f266f6e.997129"
            ]
        ]
    },
    {
        "id": "b53a2357.cb19f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4813.734130859375,
        "y": 5413.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1f814603.8b079a"
            ]
        ]
    },
    {
        "id": "1f814603.8b079a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 4971.734130859375,
        "y": 5413.800018310547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "3ef4bb2e.ea4704",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4975.234130859375,
        "y": 5453.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "1f266f6e.997129",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4817.734130859375,
        "y": 5453.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3ef4bb2e.ea4704"
            ]
        ]
    },
    {
        "id": "4cb994af.f28aac",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5126.451171875,
        "y": 5667.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "37db8c04.dcc65c",
                "e00788f7.d2c01"
            ]
        ]
    },
    {
        "id": "e00788f7.d2c01",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5368.450927734375,
        "y": 5617.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "bd67e663.b6cc68",
                "6a96c9e9.f60f08",
                "24f63010.71743"
            ]
        ]
    },
    {
        "id": "bd67e663.b6cc68",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5563.951171875,
        "y": 5551.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "9c952b2f.2e4c48"
            ]
        ]
    },
    {
        "id": "6a96c9e9.f60f08",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5559.951171875,
        "y": 5607.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "72760d9d.ebda64"
            ]
        ]
    },
    {
        "id": "9c952b2f.2e4c48",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5708.3333740234375,
        "y": 5569.4556884765625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "27765347.4a6a3c"
            ]
        ]
    },
    {
        "id": "27765347.4a6a3c",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5892.450927734375,
        "y": 5567.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "cd6a7530.d2bb8"
            ]
        ]
    },
    {
        "id": "24f63010.71743",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5569.951171875,
        "y": 5652.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a1473e64.1f4fc8"
            ]
        ]
    },
    {
        "id": "a1473e64.1f4fc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5748.951171875,
        "y": 5668.800018310547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "72760d9d.ebda64",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5730.951171875,
        "y": 5620.800018310547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "b65e14dd.2b2b98",
        "type": "execute",
        "name": "execute RestApiCallNode Delete UNI of ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.rootconn.etht-svc-name + '/etht-svc-end-points=' + $tmp.ROOT.uni-p-interface-long`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5279.951171875,
        "y": 5723.399627685547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f4d26e19.4a33a",
                "2b318383.32132c"
            ]
        ]
    },
    {
        "id": "f4d26e19.4a33a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5628.451171875,
        "y": 5705.399627685547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "cc266f68.3170a8"
            ]
        ]
    },
    {
        "id": "cc266f68.3170a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 5884.451171875,
        "y": 5708.399627685547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "e9302632.da2fb8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5836.951171875,
        "y": 5749.399627685547,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "2b318383.32132c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5638.451171875,
        "y": 5754.399627685547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e9302632.da2fb8"
            ]
        ]
    },
    {
        "id": "37db8c04.dcc65c",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.rootconn.access-provider-id + '-clientId-' +\n                                                   $tmp.rootconn.access-client-id + '-topologyId-' +\n                                                   $tmp.rootconn.access-topology-id + '-nodeId-' +\n                                                   $tmp.rootconn.access-node-id`\" />\n",
        "comments": "",
        "x": 5361.450927734375,
        "y": 5535.800018310547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "cd6a7530.d2bb8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6087.450927734375,
        "y": 5567.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "40d39185.b5e49"
            ]
        ]
    },
    {
        "id": "96e4f3b6.f5cd5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6469.450927734375,
        "y": 5571.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "4ecdd233.2c761c",
                "4b4d74a7.6aa104",
                "563a66cd.e07e68"
            ]
        ]
    },
    {
        "id": "40d39185.b5e49",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6290.450927734375,
        "y": 5571.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "96e4f3b6.f5cd5"
            ]
        ]
    },
    {
        "id": "4b4d74a7.6aa104",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6675.450927734375,
        "y": 5584.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5212e394.a625ac",
                "8a0a8abd.557d58",
                "fe612827.fce1d"
            ]
        ]
    },
    {
        "id": "4ecdd233.2c761c",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6705.450927734375,
        "y": 5532.800018310547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "5212e394.a625ac",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6885.450927734375,
        "y": 5575.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "22d6ab8e.b3d594"
            ]
        ]
    },
    {
        "id": "8a0a8abd.557d58",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6877.450927734375,
        "y": 5630.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d2e549e.aa0e038"
            ]
        ]
    },
    {
        "id": "fe612827.fce1d",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6882.450927734375,
        "y": 5687.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "18a7205c.94ea5"
            ]
        ]
    },
    {
        "id": "18a7205c.94ea5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7034.450927734375,
        "y": 5688.800018310547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "d2e549e.aa0e038",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7045.450927734375,
        "y": 5633.800018310547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "22d6ab8e.b3d594",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7029.833251953125,
        "y": 5573.4556884765625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c312e16c.c44d58"
            ]
        ]
    },
    {
        "id": "c312e16c.c44d58",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7244.450927734375,
        "y": 5569.800018310547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "563a66cd.e07e68",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6625.450927734375,
        "y": 5648.800018310547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "cc595a48.1912e8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3854.88330078125,
        "y": 3537.999969482422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "eec6a040.1af03",
                "d560f701.2c7f08"
            ]
        ]
    },
    {
        "id": "eec6a040.1af03",
        "type": "set",
        "name": "set tmp.mmUNI-id-long",
        "xml": "<set>\n<parameter name='tmp.mmUNI-id-long' value='`$middle-man-conn.relationship-list.relationship[$cridx].relationship-data[0].relationship-value`' />\n",
        "comments": "",
        "x": 4045.466552734375,
        "y": 3480.800018310547,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "d560f701.2c7f08",
        "type": "switchNode",
        "name": "switch tmp.mmUNI-id-long != ROOT UNI",
        "xml": "\n<switch test=\"`$tmp.mmUNI-id-long != $tmp.ROOT.uni-p-interface-long`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4092.466552734375,
        "y": 3551.800018310547,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "70d2875.2f53ff8",
                "b1bb56dc.337f2"
            ]
        ]
    },
    {
        "id": "70d2875.2f53ff8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4330.884033203125,
        "y": 3510.999969482422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f216f825.2991a8"
            ]
        ]
    },
    {
        "id": "b1bb56dc.337f2",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4337.884246826172,
        "y": 3567.9999389648438,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "28b93260.26eace"
            ]
        ]
    },
    {
        "id": "f216f825.2991a8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4458.884521484375,
        "y": 3506.999969482422,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "b9e9be73.6c3be",
        "type": "set",
        "name": "set tmp.MMonlyHasROOT to TRUE",
        "xml": "<set>\n<parameter name='tmp.MMonlyHasROOT' value='true' />\n",
        "comments": "",
        "x": 3314.083251953125,
        "y": 3465.400115966797,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "d7647a1a.599238",
        "type": "set",
        "name": "set tmp.MMonlyHasROOT to FALSE",
        "xml": "<set>\n<parameter name='tmp.MMonlyHasROOT' value='false' />\n",
        "comments": "",
        "x": 5295.91748046875,
        "y": 3467.400146484375,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "1414f243.3459be",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4407.6669921875,
        "y": 3987.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "45f92202.e9d224",
                "9274acbb.bb64f"
            ]
        ]
    },
    {
        "id": "45f92202.e9d224",
        "type": "set",
        "name": "set tmp.uni.id",
        "xml": "<set>\n<parameter name='tmp.uni.id' value='`$tmp.the-connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value`' />\n",
        "comments": "",
        "x": 4580.5498046875,
        "y": 3983.276336669922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "9274acbb.bb64f",
        "type": "save",
        "name": "get uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.uni.id\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.uni\" >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4583.5498046875,
        "y": 4030.276336669922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "4b44a73a.87e16",
                "13d9fc09.409024",
                "52115c05.c8dcf4"
            ]
        ]
    },
    {
        "id": "4b44a73a.87e16",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4755.5498046875,
        "y": 4014.276336669922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "40f66b99.edebbc"
            ]
        ]
    },
    {
        "id": "13d9fc09.409024",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4756.040771484375,
        "y": 4059.850372314453,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "52115c05.c8dcf4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4756.5498046875,
        "y": 4100.276336669922,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "40f66b99.edebbc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4916.5498046875,
        "y": 4010.276336669922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "de7bc652.3681b8",
                "eebe95d8.077038",
                "efb01679.580728"
            ]
        ]
    },
    {
        "id": "f38b6801.52bee8",
        "type": "comment",
        "name": "find the node part of the uni.id (uni-tp-id-node-part)",
        "info": "",
        "comments": "",
        "x": 5249.5498046875,
        "y": 3941.276336669922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "eebe95d8.077038",
        "type": "execute",
        "name": "execute split id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.uni.id`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-uni-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5184.5498046875,
        "y": 3998.276336669922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "20f99809.a45e68",
                "f98fd083.5f84c"
            ]
        ]
    },
    {
        "id": "f98fd083.5f84c",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5407.5498046875,
        "y": 3984.276336669922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e9001fe4.5ec9"
            ]
        ]
    },
    {
        "id": "20f99809.a45e68",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5409.5498046875,
        "y": 4017.276336669922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c4ea9853.8f7b9"
            ]
        ]
    },
    {
        "id": "e9001fe4.5ec9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5555.5498046875,
        "y": 3977.276336669922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "efdb6ef0.5c83c"
            ]
        ]
    },
    {
        "id": "c4ea9853.8f7b9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5552.5498046875,
        "y": 4014.276336669922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "efdb6ef0.5c83c",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.uni.pnf-name' value=\"`$param-prefix-uni-pnfName[0] + '-' +\n                                                   $param-prefix-uni-pnfName[1] + '-' +\n                                                   $param-prefix-uni-pnfName[2] + '-' +\n                                                   $param-prefix-uni-pnfName[3] + '-' +\n                                                   $param-prefix-uni-pnfName[4] + '-' +\n                                                   $param-prefix-uni-pnfName[5] + '-' +\n                                                   $param-prefix-uni-pnfName[6] + '-' +\n                                                   $param-prefix-uni-pnfName[7] + '-' +\n                                                   $param-prefix-uni-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5732.5498046875,
        "y": 3977.276336669922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "de7bc652.3681b8",
        "type": "switchNode",
        "name": "switch uni-tp-id-node-part is the same as the LEAF node",
        "xml": "<switch test='`$tmp.uni.pnf-name == $tmp.LEAF.pnf-name-long`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5228.5498046875,
        "y": 4132.276336669922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7639ee60.41df3",
                "7e06cc80.35387c"
            ]
        ]
    },
    {
        "id": "7639ee60.41df3",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5509.5498046875,
        "y": 4109.276336669922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d6573f78.845c78"
            ]
        ]
    },
    {
        "id": "7e06cc80.35387c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5502.5498046875,
        "y": 4168.276336669922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "14bc3378.1253a5"
            ]
        ]
    },
    {
        "id": "d6573f78.845c78",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5639.5498046875,
        "y": 4113.276336669922,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "14bc3378.1253a5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5644.5498046875,
        "y": 4167.276336669922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f0b195ca.19df6",
                "fec7cdec.3f23"
            ]
        ]
    },
    {
        "id": "f0b195ca.19df6",
        "type": "set",
        "name": "set no-pce-call",
        "xml": "<set>\n<parameter name='no-pce-call' value=\"true\" />\n",
        "comments": "",
        "x": 5836.5498046875,
        "y": 4134.276336669922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "14cfe3f0.60188c",
        "type": "set",
        "name": "set middle-man-conn",
        "xml": "<set>\n<parameter name='middle-man-conn.' value='`$tmp.aai.all-connectivities.connectivity[$connidx].`' />\n",
        "comments": "",
        "x": 5852.5498046875,
        "y": 4186.276336669922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "fec7cdec.3f23",
        "type": "set",
        "name": "set tmp.stillHasUni and tmp.keepVPNBs to TRUE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='true' />\n<parameter name='tmp.keepVPNBs' value='true' />\n",
        "comments": "",
        "x": 5870.83349609375,
        "y": 4255.866668701172,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "efb01679.580728",
        "type": "set",
        "name": "set tmp.stillHasUni to TRUE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='true' />\n",
        "comments": "",
        "x": 5147.533203125,
        "y": 4081.766571044922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "16d898b2.82d4af",
        "type": "switchNode",
        "name": "switch tmp.stillHasUni?",
        "xml": "\n<switch test=\"`$tmp.stillHasUni`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 383.7339172363281,
        "y": 5351.966278076172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2ef37de6.fb696a",
                "d4b46a3b.e544d"
            ]
        ]
    },
    {
        "id": "bb7a24ed.4756b",
        "type": "save",
        "name": "get root uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 4288.516357421875,
        "y": 5515.850067138672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b93cd05c.18e338",
                "28c478b5.8c3cf",
                "ad4069fd.35ec2"
            ]
        ]
    },
    {
        "id": "cd789bfb.94ca8",
        "type": "comment",
        "name": "Update ROOT UNI's bw -- ALREADY DONE",
        "info": "",
        "comments": "",
        "x": 4286.516845703125,
        "y": 5467.850311279297,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "f7d2d4f8.f1e648",
        "type": "save",
        "name": "update ROOT UNI in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4903.5166015625,
        "y": 5585.850311279297,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "28c478b5.8c3cf",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4506.007568359375,
        "y": 5486.424285888672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "4927866f.a84e1"
            ]
        ]
    },
    {
        "id": "ad4069fd.35ec2",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4501.5166015625,
        "y": 5530.850250244141,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c4a31719.674e"
            ]
        ]
    },
    {
        "id": "4927866f.a84e1",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4668.5791015625,
        "y": 5485.709991455078,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c4a31719.674e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4669.5166015625,
        "y": 5530.850250244141,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "f08cda49.ab7188",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4666.5166015625,
        "y": 5580.850311279297,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "ed324322.59277",
                "f7d2d4f8.f1e648"
            ]
        ]
    },
    {
        "id": "b93cd05c.18e338",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4497.5166015625,
        "y": 5580.850311279297,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f08cda49.ab7188"
            ]
        ]
    },
    {
        "id": "ed324322.59277",
        "type": "set",
        "name": "set new bw",
        "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source - $bwToBeDecreased`' />\n",
        "comments": "",
        "x": 4859.517578125,
        "y": 5505.850311279297,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "61d36925.a62e",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 5288.216796875,
        "y": 5443.616912841797,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "31a9971.ad96268",
        "type": "save",
        "name": "update ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5314,
        "y": 5485.817108154297,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "2ef37de6.fb696a",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 567.8836059570312,
        "y": 5402.999969482422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "97fb2b7.67063d8"
            ]
        ]
    },
    {
        "id": "d4b46a3b.e544d",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 550.883544921875,
        "y": 5324.999969482422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d28cabbc.30ca5"
            ]
        ]
    },
    {
        "id": "4a0919d1.fbc9d8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 679.8833923339844,
        "y": 4411.999694824219,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "551f2a9f.a9466c",
                "6f7adb55.d0de94",
                "7279f474.ca532c",
                "c28774e0.0f37e8",
                "fd804c17.d00668",
                "6504876a.65a0e",
                "d39caf18.6babe"
            ]
        ]
    },
    {
        "id": "551f2a9f.a9466c",
        "type": "set",
        "name": "set tmp.leafconn.",
        "xml": "<set>\n<parameter name='tmp.leafconn.' value='`$tmp.the-connectivity.`' />\n",
        "comments": "",
        "x": 931.5667419433594,
        "y": 4390.049499511719,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "1a5de4c8.98ba3b",
        "type": "comment",
        "name": "Find LEAF and ROOT connectivities and remove UNI from PNC",
        "info": "",
        "comments": "",
        "x": 1033.1338806152344,
        "y": 4338.132995605469,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "35555086.07bd08",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.leafconn.access-provider-id + '-clientId-' +\n                                                   $tmp.leafconn.access-client-id + '-topologyId-' +\n                                                   $tmp.leafconn.access-topology-id + '-nodeId-' +\n                                                   $tmp.leafconn.access-node-id`\" />\n",
        "comments": "",
        "x": 1140.9837341308594,
        "y": 4419.333190917969,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "6f7adb55.d0de94",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 911.9837341308594,
        "y": 4508.333190917969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "35555086.07bd08",
                "f6475b04.522d68"
            ]
        ]
    },
    {
        "id": "f6475b04.522d68",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1147.9837341308594,
        "y": 4501.333190917969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d9d0b846.fc4eb",
                "859bebef.e15268",
                "82bf3fe2.ca776"
            ]
        ]
    },
    {
        "id": "d9d0b846.fc4eb",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1343.4838562011719,
        "y": 4453.333190917969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "54e66745.d0a218"
            ]
        ]
    },
    {
        "id": "859bebef.e15268",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1335.4838562011719,
        "y": 4508.333190917969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6c2244a0.55dae4"
            ]
        ]
    },
    {
        "id": "54e66745.d0a218",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1487.8661804199219,
        "y": 4452.988861083984,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c5450793.0d4ff8"
            ]
        ]
    },
    {
        "id": "c5450793.0d4ff8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1671.9837341308594,
        "y": 4451.333190917969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8c14dfae.797ac"
            ]
        ]
    },
    {
        "id": "8c14dfae.797ac",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1866.9837341308594,
        "y": 4451.333190917969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2cd4e727.640d2"
            ]
        ]
    },
    {
        "id": "82bf3fe2.ca776",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1340.4838562011719,
        "y": 4565.333190917969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1f28baf3.4c601d"
            ]
        ]
    },
    {
        "id": "1f28baf3.4c601d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1492.4838562011719,
        "y": 4566.333190917969,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "6c2244a0.55dae4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1503.4838562011719,
        "y": 4509.333190917969,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c7d8a4a1.11fab",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2248.9837341308594,
        "y": 4455.333190917969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "51d3a91c.c42e68",
                "d0954d9b.2799a8",
                "454e24ff.d6924c"
            ]
        ]
    },
    {
        "id": "2cd4e727.640d2",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2069.9837341308594,
        "y": 4455.333190917969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c7d8a4a1.11fab"
            ]
        ]
    },
    {
        "id": "7279f474.ca532c",
        "type": "execute",
        "name": "execute RestApiCallNode Delete LEAF UNI of ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.leafconn.etht-svc-name + '/etht-svc-end-points=' + $tmp.LEAF.uni-p-interface-long`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1053.4839782714844,
        "y": 4612.932800292969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "63493229.c5487c",
                "9b59a379.ae234"
            ]
        ]
    },
    {
        "id": "9b59a379.ae234",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1417.9837341308594,
        "y": 4660.932800292969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7641260e.a4325"
            ]
        ]
    },
    {
        "id": "63493229.c5487c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1413.9837341308594,
        "y": 4620.932800292969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3e92540.7763d2c"
            ]
        ]
    },
    {
        "id": "3e92540.7763d2c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 1571.9837341308594,
        "y": 4620.932800292969,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "7641260e.a4325",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1575.4837341308594,
        "y": 4660.932800292969,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "d0954d9b.2799a8",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 2454.9837341308594,
        "y": 4468.333190917969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "53623639.5d8eb",
                "11f800c8.cf014f",
                "e0ce2e99.74a758"
            ]
        ]
    },
    {
        "id": "51d3a91c.c42e68",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 2484.9837341308594,
        "y": 4416.333190917969,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "53623639.5d8eb",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2664.9837341308594,
        "y": 4459.333190917969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "73587898.c5bc6"
            ]
        ]
    },
    {
        "id": "11f800c8.cf014f",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2656.9837341308594,
        "y": 4514.333190917969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7759dd63.3c0bd4"
            ]
        ]
    },
    {
        "id": "e0ce2e99.74a758",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2661.9837341308594,
        "y": 4571.333190917969,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "29744fd6.f0a3"
            ]
        ]
    },
    {
        "id": "29744fd6.f0a3",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2813.9837341308594,
        "y": 4572.333190917969,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "7759dd63.3c0bd4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2824.9837341308594,
        "y": 4517.333190917969,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "73587898.c5bc6",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2809.3660583496094,
        "y": 4456.988861083984,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2b6c0b59.4c3f54"
            ]
        ]
    },
    {
        "id": "2b6c0b59.4c3f54",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3023.9837341308594,
        "y": 4453.333190917969,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "454e24ff.d6924c",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2404.9837341308594,
        "y": 4532.333190917969,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c28774e0.0f37e8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1082.5667419433594,
        "y": 4833.049499511719,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "fd804c17.d00668",
        "type": "switchNode",
        "name": "switch found-root-connectivity",
        "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 897.5667419433594,
        "y": 4900.049499511719,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c90d3790.0c31f",
                "b432c8fe.988cb"
            ]
        ]
    },
    {
        "id": "c90d3790.0c31f",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1162.5667419433594,
        "y": 4885.049499511719,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b12f48c6.75129"
            ]
        ]
    },
    {
        "id": "b432c8fe.988cb",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1158.5667419433594,
        "y": 4933.049499511719,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7a2784c6.a60bf4"
            ]
        ]
    },
    {
        "id": "b12f48c6.75129",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1318.5667419433594,
        "y": 4881.049499511719,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b537e67c.ce751"
            ]
        ]
    },
    {
        "id": "7a2784c6.a60bf4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
        "comments": "",
        "x": 1306.5667419433594,
        "y": 4928.049499511719,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "5b301854.48435",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 1587.4664001464844,
        "y": 4831.749694824219,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "b537e67c.ce751",
        "type": "save",
        "name": "update ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1613.2496032714844,
        "y": 4873.949890136719,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "46575909.129948",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-delete-VPNBs",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-delete-VPNBs' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1026.8833923339844,
        "y": 4147.316589355469,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "d28cabbc.30ca5",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 632.8834228515625,
        "y": 4151.999725341797,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "46575909.129948",
                "4a0919d1.fbc9d8"
            ]
        ]
    },
    {
        "id": "97fb2b7.67063d8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 716.3333740234375,
        "y": 5404.516571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8c98b36e.448bc8",
                "4b4a8b6f.30cb4c",
                "232ef942.027ea6",
                "9956c6b0.e8f5b"
            ]
        ]
    },
    {
        "id": "8c98b36e.448bc8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-delete-VPNBs",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-delete-VPNBs' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1077.7166748046875,
        "y": 5167.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "4b4a8b6f.30cb4c",
        "type": "save",
        "name": "delete LEAF connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 988.7166748046875,
        "y": 5236.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "232ef942.027ea6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 879.88330078125,
        "y": 5471.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3ef7ef40.ec34",
                "afe6825d.3e4ed8",
                "56fc7b03.ef7a34"
            ]
        ]
    },
    {
        "id": "8f4e88cb.a2731",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 2588.882568359375,
        "y": 5396.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "4a46c897.331cf",
                "c619cf4e.8ea4f8",
                "c904c4c1.6a362"
            ]
        ]
    },
    {
        "id": "c656ce5c.18cf6",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2538.882568359375,
        "y": 5460.5166015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c0938886.470a7",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 2618.882568359375,
        "y": 5344.5166015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "4a46c897.331cf",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2906.8826904296875,
        "y": 5327.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a7e4d7d8.d8bee"
            ]
        ]
    },
    {
        "id": "c619cf4e.8ea4f8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2898.8826904296875,
        "y": 5382.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8289ee53.c79808"
            ]
        ]
    },
    {
        "id": "c904c4c1.6a362",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2903.8826904296875,
        "y": 5439.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6baa18e0.e89e88"
            ]
        ]
    },
    {
        "id": "6baa18e0.e89e88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3055.8826904296875,
        "y": 5440.5166015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "8289ee53.c79808",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3066.8826904296875,
        "y": 5385.5166015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "a7e4d7d8.d8bee",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3051.2650146484375,
        "y": 5325.172271728516,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "ec15425b.c6de8"
            ]
        ]
    },
    {
        "id": "ec15425b.c6de8",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3265.8826904296875,
        "y": 5321.5166015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "3ef7ef40.ec34",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.the-connectivity.access-provider-id + '-clientId-' +\n                                                   $tmp.the-connectivity.access-client-id + '-topologyId-' +\n                                                   $tmp.the-connectivity.access-topology-id + '-nodeId-' +\n                                                   $tmp.the-connectivity.access-node-id`\" />\n",
        "comments": "",
        "x": 1161.88330078125,
        "y": 5340.5166015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "a4339be5.b80c5",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1372.3834228515625,
        "y": 5479.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1127f42a.b3bf34"
            ]
        ]
    },
    {
        "id": "2e74a78.3df33d8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1375.3834228515625,
        "y": 5367.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5612018f.6df8"
            ]
        ]
    },
    {
        "id": "70a06659.f7e26",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1367.3834228515625,
        "y": 5422.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f549eabc.91dae8"
            ]
        ]
    },
    {
        "id": "5612018f.6df8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1509.765625,
        "y": 5362.17236328125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e700427f.a90ed"
            ]
        ]
    },
    {
        "id": "1127f42a.b3bf34",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1524.3834228515625,
        "y": 5480.5166015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "f549eabc.91dae8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1535.3834228515625,
        "y": 5423.5166015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "e700427f.a90ed",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1696.8828125,
        "y": 5363.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5799adae.feee0c"
            ]
        ]
    },
    {
        "id": "5799adae.feee0c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1924.8828125,
        "y": 5356.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1e23480b.f981d8"
            ]
        ]
    },
    {
        "id": "afe6825d.3e4ed8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1179.88330078125,
        "y": 5415.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a4339be5.b80c5",
                "2e74a78.3df33d8",
                "70a06659.f7e26"
            ]
        ]
    },
    {
        "id": "1e23480b.f981d8",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2130.8828125,
        "y": 5353.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "82b93b0b.3752a"
            ]
        ]
    },
    {
        "id": "82b93b0b.3752a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2345.8822021484375,
        "y": 5356.5166015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c0938886.470a7",
                "8f4e88cb.a2731",
                "c656ce5c.18cf6"
            ]
        ]
    },
    {
        "id": "56fc7b03.ef7a34",
        "type": "execute",
        "name": "execute RestApiCallNode Delete LEAF ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.the-connectivity.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1303.6500244140625,
        "y": 5564.91650390625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5de191f6.0adf08",
                "8645dbc5.336bd"
            ]
        ]
    },
    {
        "id": "5de191f6.0adf08",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1650.1500244140625,
        "y": 5557.91650390625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1d2e7b8b.bb158c"
            ]
        ]
    },
    {
        "id": "8645dbc5.336bd",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1654.1500244140625,
        "y": 5597.91650390625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7a1f5009.c19bf"
            ]
        ]
    },
    {
        "id": "1d2e7b8b.bb158c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 1808.1500244140625,
        "y": 5557.91650390625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "7a1f5009.c19bf",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1811.6500244140625,
        "y": 5597.91650390625,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "9956c6b0.e8f5b",
        "type": "switchNode",
        "name": "switch tmp.MMstillHasUni?",
        "xml": "\n<switch test=\"`$tmp.MMstillHasUni`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 913.183349609375,
        "y": 5894.716766357422,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1b3dc283.1c72c5",
                "6927d979.135438"
            ]
        ]
    },
    {
        "id": "1b3dc283.1c72c5",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1107.183349609375,
        "y": 5721.716796875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "90688337.4fcde8"
            ]
        ]
    },
    {
        "id": "6927d979.135438",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1093.3500366210938,
        "y": 6044.316864013672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "66475002.0efde8"
            ]
        ]
    },
    {
        "id": "90688337.4fcde8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1255.35009765625,
        "y": 5721.31689453125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "88d77fb7.cde5d8",
                "89314dbf.8366b8",
                "68e0d31a.2e51f4"
            ]
        ]
    },
    {
        "id": "88d77fb7.cde5d8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1677.199951171875,
        "y": 5692.716796875,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "89314dbf.8366b8",
        "type": "switchNode",
        "name": "switch found-root-connectivity",
        "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1492.199951171875,
        "y": 5759.716796875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "4d863da6.047404",
                "e3c67257.c0375"
            ]
        ]
    },
    {
        "id": "4d863da6.047404",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1757.199951171875,
        "y": 5744.716796875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "798adf3a.473ef"
            ]
        ]
    },
    {
        "id": "e3c67257.c0375",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1756.199951171875,
        "y": 5792.716796875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "88e52eb1.fc93f"
            ]
        ]
    },
    {
        "id": "798adf3a.473ef",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1913.199951171875,
        "y": 5740.716796875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "733c34ed.517f9c"
            ]
        ]
    },
    {
        "id": "88e52eb1.fc93f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
        "comments": "",
        "x": 1904.199951171875,
        "y": 5787.716796875,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "733c34ed.517f9c",
        "type": "save",
        "name": "update ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 2221.8826904296875,
        "y": 5734.6171875,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "51bb42c1.6468fc",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 2196.0994873046875,
        "y": 5692.4169921875,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "66475002.0efde8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1230.916748046875,
        "y": 6043.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a0a718de.f23a",
                "e9e38848.54da1"
            ]
        ]
    },
    {
        "id": "a0a718de.f23a",
        "type": "for",
        "name": "for each relationship of middle-man-conn",
        "xml": "<for index='rel-index' start='0' end='`$middle-man-conn.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1544.23291015625,
        "y": 6037.816864013672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "76936a5f.84bc84"
            ]
        ]
    },
    {
        "id": "76936a5f.84bc84",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$middle-man-conn.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1844.566650390625,
        "y": 6032.816802978516,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "44a7328f.e8be34"
            ]
        ]
    },
    {
        "id": "44a7328f.e8be34",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2024.2332763671875,
        "y": 6032.81689453125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "208791a0.d9f786"
            ]
        ]
    },
    {
        "id": "208791a0.d9f786",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $middle-man-conn.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2224.233154296875,
        "y": 6032.816864013672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "574a6228.5b1754",
                "eafb76a9.ded53",
                "327d9363.1aef4c"
            ]
        ]
    },
    {
        "id": "574a6228.5b1754",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2431.23291015625,
        "y": 6082.816864013672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "23760b0c.48685c"
            ]
        ]
    },
    {
        "id": "460767d0.d2c1b8",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2408.466552734375,
        "y": 6267.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "88082c33.393",
                "e1f0fae1.b8f4d8",
                "822aec8b.abd888"
            ]
        ]
    },
    {
        "id": "6361e7ff.46b828",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1607.466552734375,
        "y": 6182.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "75dfc93.82d2038"
            ]
        ]
    },
    {
        "id": "75dfc93.82d2038",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1804.466552734375,
        "y": 6196.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a28db7b9.a381c8",
                "9f04b050.7c6fe8"
            ]
        ]
    },
    {
        "id": "a28db7b9.a381c8",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1972.466552734375,
        "y": 6189.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "136ceea8.d9cdf9"
            ]
        ]
    },
    {
        "id": "136ceea8.d9cdf9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2135.466552734375,
        "y": 6189.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "460767d0.d2c1b8"
            ]
        ]
    },
    {
        "id": "9f04b050.7c6fe8",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1988.466552734375,
        "y": 6485.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5e0bc78d.ba716"
            ]
        ]
    },
    {
        "id": "5e0bc78d.ba716",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2151.466552734375,
        "y": 6485.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2848a471.d7d3ac"
            ]
        ]
    },
    {
        "id": "2848a471.d7d3ac",
        "type": "save",
        "name": "delete uni resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2394.466552734375,
        "y": 6485.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "14cdbd34.9d5433",
        "type": "save",
        "name": "delete connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1362.466552734375,
        "y": 7251.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "23760b0c.48685c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1433.466552734375,
        "y": 6180.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6361e7ff.46b828",
                "14cdbd34.9d5433",
                "468cb6c4.ffb168"
            ]
        ]
    },
    {
        "id": "88082c33.393",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2619.466552734375,
        "y": 6269.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "83017d89.d2d33"
            ]
        ]
    },
    {
        "id": "e1f0fae1.b8f4d8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2619.95751953125,
        "y": 6314.590606689453,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "ec259daf.cc4758"
            ]
        ]
    },
    {
        "id": "822aec8b.abd888",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2617.466552734375,
        "y": 6358.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "ba3c2552.11f0b"
            ]
        ]
    },
    {
        "id": "327d9363.1aef4c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2455.282958984375,
        "y": 5983.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "eafb76a9.ded53",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2452.7919921875,
        "y": 6027.042633056641,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "e9e38848.54da1",
        "type": "save",
        "name": "delete middle-man-conn resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1531.400146484375,
        "y": 6112.416473388672,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "83017d89.d2d33",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2785.466552734375,
        "y": 6259.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c9d43f06.0d115",
                "b37c19e0.f8f32",
                "60da6725.d98bd8",
                "be2af461.e005a",
                "cbf01fd8.d058c"
            ]
        ]
    },
    {
        "id": "ba3c2552.11f0b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2784.466552734375,
        "y": 6357.016571044922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "ec259daf.cc4758",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2782.5289306640625,
        "y": 6314.8763427734375,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c9d43f06.0d115",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-binding.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-binding.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-binding.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-binding.src-access-node-id`\" />\n",
        "comments": "",
        "x": 3007.466552734375,
        "y": 5977.016571044922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "b37c19e0.f8f32",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3033.466552734375,
        "y": 6094.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "410583dd.d8121c",
                "88eb934e.2f5b08",
                "a865a4a5.d4df78"
            ]
        ]
    },
    {
        "id": "60da6725.d98bd8",
        "type": "execute",
        "name": "execute RestApiCallNode Delete OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-src-domain-creation.templatefile`\" />-->\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-te:te/tunnels/tunnel=' + $tmp.aai.vpn-binding.vpn-name`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3136.466552734375,
        "y": 6361.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "72b47bea.9a0f24",
                "66f0d6b4.eb7008"
            ]
        ]
    },
    {
        "id": "be2af461.e005a",
        "type": "switchNode",
        "name": "switch connectivity has ethernet service",
        "xml": "<switch test='`$tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3074.466552734375,
        "y": 6496.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2f67e97f.141fd6",
                "7b5fd505.3b0694"
            ]
        ]
    },
    {
        "id": "cbf01fd8.d058c",
        "type": "save",
        "name": "delete vpn-binding resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3055.466552734375,
        "y": 6612.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "410583dd.d8121c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3228.9666748046875,
        "y": 6046.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "4a83ae1e.07b578"
            ]
        ]
    },
    {
        "id": "88eb934e.2f5b08",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3220.9666748046875,
        "y": 6101.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "282085b8.0d4512"
            ]
        ]
    },
    {
        "id": "4a83ae1e.07b578",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3363.348876953125,
        "y": 6040.672332763672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "33baf8b0.f059c8"
            ]
        ]
    },
    {
        "id": "a865a4a5.d4df78",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3225.9666748046875,
        "y": 6158.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "63323518.7bcbac"
            ]
        ]
    },
    {
        "id": "63323518.7bcbac",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3377.9666748046875,
        "y": 6159.016571044922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "282085b8.0d4512",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3388.9666748046875,
        "y": 6102.016571044922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "7b5fd505.3b0694",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3327.466552734375,
        "y": 6474.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "948366f4.fec95"
            ]
        ]
    },
    {
        "id": "2f67e97f.141fd6",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3327.466552734375,
        "y": 6530.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "33baf8b0.f059c8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3550.466064453125,
        "y": 6042.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e2cf1880.b9d7c"
            ]
        ]
    },
    {
        "id": "e2cf1880.b9d7c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3791.466064453125,
        "y": 6033.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "bc484497.a79ff8"
            ]
        ]
    },
    {
        "id": "948366f4.fec95",
        "type": "execute",
        "name": "execute RestApiCallNode Delete ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.aai.connectivity.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3677.466064453125,
        "y": 6464.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c37cd95d.368e7",
                "92455633.bf0ee8"
            ]
        ]
    },
    {
        "id": "72b47bea.9a0f24",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3443.966064453125,
        "y": 6386.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f1048a1f.996e4"
            ]
        ]
    },
    {
        "id": "66f0d6b4.eb7008",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3444.966064453125,
        "y": 6331.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "314550b5.0a064"
            ]
        ]
    },
    {
        "id": "f1048a1f.996e4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 3615.966064453125,
        "y": 6384.016571044922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "314550b5.0a064",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3612.466064453125,
        "y": 6333.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "926cd0b8.871b1",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4148.4658203125,
        "y": 5982.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e5e99dd1.35ed8",
                "977d12a.f8bd9f",
                "b449b2c0.535c38"
            ]
        ]
    },
    {
        "id": "bc484497.a79ff8",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3997.466064453125,
        "y": 6030.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "926cd0b8.871b1"
            ]
        ]
    },
    {
        "id": "c37cd95d.368e7",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4009.966064453125,
        "y": 6438.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b162e50d.7cae58"
            ]
        ]
    },
    {
        "id": "92455633.bf0ee8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4013.966064453125,
        "y": 6478.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2199ad10.a55eda"
            ]
        ]
    },
    {
        "id": "2199ad10.a55eda",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4201.466064453125,
        "y": 6482.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "b162e50d.7cae58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 4197.966064453125,
        "y": 6442.016571044922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "977d12a.f8bd9f",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4354.4658203125,
        "y": 5995.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7f661594.98b80c",
                "b4244919.5b3fa8",
                "fd8c4c61.cc25e8"
            ]
        ]
    },
    {
        "id": "e5e99dd1.35ed8",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4384.4658203125,
        "y": 5943.016571044922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "7f661594.98b80c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4564.4658203125,
        "y": 5986.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b64e3b3c.b2614"
            ]
        ]
    },
    {
        "id": "b4244919.5b3fa8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4556.4658203125,
        "y": 6041.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "13dd75f8.aa1f6a"
            ]
        ]
    },
    {
        "id": "fd8c4c61.cc25e8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4561.4658203125,
        "y": 6098.016571044922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "67c0a219.8d5f1c"
            ]
        ]
    },
    {
        "id": "b449b2c0.535c38",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4304.4658203125,
        "y": 6059.016571044922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "67c0a219.8d5f1c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4713.4658203125,
        "y": 6099.016571044922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "13dd75f8.aa1f6a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4724.4658203125,
        "y": 6044.016571044922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "b64e3b3c.b2614",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4708.84814453125,
        "y": 5983.6722412109375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a6322085.6bb328"
            ]
        ]
    },
    {
        "id": "a6322085.6bb328",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 4923.4658203125,
        "y": 5980.016571044922,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "90358f7a.3bc868",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.connectivity.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.connectivity.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.connectivity.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.connectivity.access-node-id`\" />\n",
        "comments": "",
        "x": 1659.2332763671875,
        "y": 6777.616668701172,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "a442da27.96a27",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1685.2332763671875,
        "y": 6894.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5457374d.6393a8",
                "c43cf1bd.3a9c48",
                "aafe4c92.ab6148"
            ]
        ]
    },
    {
        "id": "5457374d.6393a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1880.7333984375,
        "y": 6846.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "53717e38.4ed96"
            ]
        ]
    },
    {
        "id": "c43cf1bd.3a9c48",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1872.7333984375,
        "y": 6901.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f440d45f.e2c3b"
            ]
        ]
    },
    {
        "id": "53717e38.4ed96",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2015.1156005859375,
        "y": 6841.272430419922,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "237db843.e1a28"
            ]
        ]
    },
    {
        "id": "aafe4c92.ab6148",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1877.7333984375,
        "y": 6958.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f21c5384.45f0a8"
            ]
        ]
    },
    {
        "id": "f21c5384.45f0a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2029.7333984375,
        "y": 6959.616668701172,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "f440d45f.e2c3b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2040.7333984375,
        "y": 6902.616668701172,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "237db843.e1a28",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2202.2327880859375,
        "y": 6842.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "df53e846.0627d8"
            ]
        ]
    },
    {
        "id": "df53e846.0627d8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2443.2327880859375,
        "y": 6833.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1dea4397.4ddefc"
            ]
        ]
    },
    {
        "id": "ddd8f461.6b9a28",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2800.2325439453125,
        "y": 6782.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "da1d6ae3.19a4a",
                "f17b263b.0b92b8",
                "e6be1026.0fc218"
            ]
        ]
    },
    {
        "id": "1dea4397.4ddefc",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2649.2327880859375,
        "y": 6830.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "ddd8f461.6b9a28"
            ]
        ]
    },
    {
        "id": "f17b263b.0b92b8",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 3006.2325439453125,
        "y": 6795.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "93d3ae4.c48255",
                "a8b7b61a.880ff",
                "1b334b23.690f3d"
            ]
        ]
    },
    {
        "id": "e6be1026.0fc218",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2956.2325439453125,
        "y": 6859.616668701172,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "da1d6ae3.19a4a",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 3036.2325439453125,
        "y": 6743.616668701172,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "93d3ae4.c48255",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3216.2325439453125,
        "y": 6786.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "38012aaa.4db4be"
            ]
        ]
    },
    {
        "id": "a8b7b61a.880ff",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3208.2325439453125,
        "y": 6841.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3b0a565e.7b9b52"
            ]
        ]
    },
    {
        "id": "1b334b23.690f3d",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3213.2325439453125,
        "y": 6898.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a42eaf3a.6fbc5"
            ]
        ]
    },
    {
        "id": "a42eaf3a.6fbc5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3365.2325439453125,
        "y": 6899.616668701172,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "3b0a565e.7b9b52",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3376.2325439453125,
        "y": 6844.616668701172,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "38012aaa.4db4be",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3360.6148681640625,
        "y": 6784.2723388671875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2c7d526d.80fc76"
            ]
        ]
    },
    {
        "id": "2c7d526d.80fc76",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3575.2325439453125,
        "y": 6780.616668701172,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "468cb6c4.ffb168",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1451.2332763671875,
        "y": 6905.616668701172,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "90358f7a.3bc868",
                "a442da27.96a27",
                "12fc611d.1c5a0f"
            ]
        ]
    },
    {
        "id": "12fc611d.1c5a0f",
        "type": "switchNode",
        "name": "switch connectivity has ethernet service",
        "xml": "<switch test='`$tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1733.433349609375,
        "y": 7046.816864013672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "fd3fa457.558cb8",
                "5e9ee12a.d5b628"
            ]
        ]
    },
    {
        "id": "5e9ee12a.d5b628",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1986.433349609375,
        "y": 7024.816864013672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c43e864.6fdea78"
            ]
        ]
    },
    {
        "id": "fd3fa457.558cb8",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1986.433349609375,
        "y": 7080.816864013672,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "c43e864.6fdea78",
        "type": "execute",
        "name": "execute RestApiCallNode Delete ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.aai.connectivity.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2336.432861328125,
        "y": 7014.816864013672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d8cf4668.e6bf58",
                "fc9a7200.07e08"
            ]
        ]
    },
    {
        "id": "d8cf4668.e6bf58",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2668.932861328125,
        "y": 6988.816864013672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "fa6e7b78.6ccd98"
            ]
        ]
    },
    {
        "id": "fc9a7200.07e08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2672.932861328125,
        "y": 7028.816864013672,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f96cab06.f1bd18"
            ]
        ]
    },
    {
        "id": "f96cab06.f1bd18",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2860.432861328125,
        "y": 7032.816864013672,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "fa6e7b78.6ccd98",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 2856.932861328125,
        "y": 6992.816864013672,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "6504876a.65a0e",
        "type": "execute",
        "name": "execute RestApiCallNode Delete Underlay OTN tunnel from the LEAF ethernet Service",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.leafconn.etht-svc-name + '/underlay/otn-tunnels=' + $tmp.underlayOTN`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1089.25,
        "y": 4732.39990234375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2f2c7d69.04a202",
                "749e3757.254fd8"
            ]
        ]
    },
    {
        "id": "2f2c7d69.04a202",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1517.749755859375,
        "y": 4720.39990234375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e83630dc.e1ba"
            ]
        ]
    },
    {
        "id": "749e3757.254fd8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1521.749755859375,
        "y": 4760.39990234375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "28010736.1a772"
            ]
        ]
    },
    {
        "id": "e83630dc.e1ba",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 1675.749755859375,
        "y": 4720.39990234375,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "28010736.1a772",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1679.249755859375,
        "y": 4760.39990234375,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "2f2661a7.5dc1e6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5113,
        "y": 5053,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "ae15e960.f1e88",
                "28b0c0f7.1a36d8",
                "8a83aff9.8ddf38"
            ]
        ]
    },
    {
        "id": "8a83aff9.8ddf38",
        "type": "set",
        "name": "set vpnNameToSearch",
        "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
        "comments": "",
        "x": 5340,
        "y": 4998,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "ae15e960.f1e88",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5494,
        "y": 5050,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "28b0c0f7.1a36d8",
        "type": "switchNode",
        "name": "switch $foundVpnName",
        "xml": "<switch test=\"`$foundVpnName`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5339,
        "y": 5105,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "48fdd2f1.2b095c"
            ]
        ]
    },
    {
        "id": "48fdd2f1.2b095c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5518,
        "y": 5104,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a26e073.3ca98f8"
            ]
        ]
    },
    {
        "id": "e3b4a4d3.b60598",
        "type": "set",
        "name": "unset secondary related variables",
        "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n<parameter name='network-route-three' value=\"\" />\n<parameter name='tmp.aai.network-route-three.' value=\"\" />\n<parameter name='tmp.aai.network-route-C.' value=\"\" />\n",
        "comments": "",
        "x": 3380.249969482422,
        "y": 459,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "22dcd918.a9e88e",
        "type": "set",
        "name": "set network-route-three",
        "xml": "<set>\n<parameter name='network-route-three' value=\"`$tmp.aai.logical-link.segment-id`\" />\n\n\n",
        "comments": "",
        "x": 3344.249969482422,
        "y": 709,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "1743864d.d3d2f2",
        "type": "switchNode",
        "name": "switch secondary empty?",
        "xml": "<switch test='`length($network-route-three) == 0`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3347.666473388672,
        "y": 751.2499694824219,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a9f40bfb.e2369",
                "3b2a9389.6292cc"
            ]
        ]
    },
    {
        "id": "a9f40bfb.e2369",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3586.6663513183594,
        "y": 587.25,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "143a1a38.4be736"
            ]
        ]
    },
    {
        "id": "3b2a9389.6292cc",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3595.6663513183594,
        "y": 634.25,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "90836078.d811b"
            ]
        ]
    },
    {
        "id": "90836078.d811b",
        "type": "set",
        "name": "set hasSecondary true",
        "xml": "<set>\n<parameter name='hasSecondary' value=\"true\" />\n\n\n",
        "comments": "",
        "x": 3809.6663513183594,
        "y": 628.25,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "143a1a38.4be736",
        "type": "set",
        "name": "set hasSecondary false",
        "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n\n\n",
        "comments": "",
        "x": 3813.6663513183594,
        "y": 584.25,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c2039341.ed7fe",
        "type": "outcome",
        "name": "SECONDARY-ROOT",
        "xml": "<outcome value='SECONDARY-ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4175.700408935547,
        "y": 537.699951171875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8f42381e.256918"
            ]
        ]
    },
    {
        "id": "8f42381e.256918",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4349.700408935547,
        "y": 532.699951171875,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2dfbe8eb.6df208",
                "ae5efca5.b13ee"
            ]
        ]
    },
    {
        "id": "2dfbe8eb.6df208",
        "type": "set",
        "name": "set network-route-SECONDARY-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4593.700653076172,
        "y": 524.699951171875,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "ae5efca5.b13ee",
        "type": "set",
        "name": "set network-route-C",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4539.700653076172,
        "y": 564.699951171875,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "49cd1e6.2c21e6",
        "type": "outcome",
        "name": "SECONDARY-ROOT",
        "xml": "<outcome value='SECONDARY-ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4144.700408935547,
        "y": 767.0999755859375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "37d7c141.43238e"
            ]
        ]
    },
    {
        "id": "37d7c141.43238e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4302.700164794922,
        "y": 810.0997924804688,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3e1881a7.808dae",
                "e3ee5030.818c18"
            ]
        ]
    },
    {
        "id": "3e1881a7.808dae",
        "type": "set",
        "name": "set network-route-SECONDARY-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4524.700164794922,
        "y": 796.0999145507812,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "e3ee5030.818c18",
        "type": "set",
        "name": "set network-route-C",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4470.700164794922,
        "y": 836.0999145507812,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "898efbe9.b7aab8",
        "type": "save",
        "name": "get network-route-three from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-three'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-three\">",
        "comments": "",
        "outputs": 1,
        "x": 3356.133270263672,
        "y": 1003.333251953125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "648675ef.25d1f4",
                "2e60c86e.fc1c08",
                "80896ca0.c29cc8"
            ]
        ]
    },
    {
        "id": "648675ef.25d1f4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3596.133270263672,
        "y": 986.333251953125,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "2e60c86e.fc1c08",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3591.642333984375,
        "y": 1028.7593078613281,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "80896ca0.c29cc8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3595.642303466797,
        "y": 1076.75927734375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1a4bd447.a95bf4"
            ]
        ]
    },
    {
        "id": "1a4bd447.a95bf4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3751.133270263672,
        "y": 1046.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "caee9e1d.8e2348"
            ]
        ]
    },
    {
        "id": "caee9e1d.8e2348",
        "type": "switchNode",
        "name": "switch nr type",
        "xml": "<switch test='`$tmp.aai.network-route-three.type`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3873.133270263672,
        "y": 993.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "63dc4834.c55f2",
                "861e97a1.4a94",
                "50fdf697.5f0398"
            ]
        ]
    },
    {
        "id": "63dc4834.c55f2",
        "type": "outcome",
        "name": "ROOT",
        "xml": "<outcome value='ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4109.133270263672,
        "y": 843.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "15fc5ae7.def135"
            ]
        ]
    },
    {
        "id": "861e97a1.4a94",
        "type": "outcome",
        "name": "LEAF",
        "xml": "<outcome value='LEAF'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4105.133270263672,
        "y": 899.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "de3f550a.e65dd8"
            ]
        ]
    },
    {
        "id": "15fc5ae7.def135",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4235.133270263672,
        "y": 851.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a2d4f205.05df18",
                "97e552b.298d73"
            ]
        ]
    },
    {
        "id": "de3f550a.e65dd8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4238.133270263672,
        "y": 904.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "77158a83.3502bc",
                "fb7ab28b.9d9ce8"
            ]
        ]
    },
    {
        "id": "50fdf697.5f0398",
        "type": "outcome",
        "name": "SECONDARY-ROOT",
        "xml": "<outcome value='SECONDARY-ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4098.133270263672,
        "y": 977.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "4a03238e.72a4b4"
            ]
        ]
    },
    {
        "id": "4a03238e.72a4b4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4254.133270263672,
        "y": 998.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8f9b7ac9.e6c508",
                "4399bcd6.51e06c"
            ]
        ]
    },
    {
        "id": "a2d4f205.05df18",
        "type": "set",
        "name": "set network-route-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4482.133270263672,
        "y": 881.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "97e552b.298d73",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4474.133270263672,
        "y": 923.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "77158a83.3502bc",
        "type": "set",
        "name": "set network-route-LEAF",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4475.133270263672,
        "y": 975.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "fb7ab28b.9d9ce8",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4462.133270263672,
        "y": 1015.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "4399bcd6.51e06c",
        "type": "set",
        "name": "set network-route-C",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
        "comments": "",
        "x": 4436.133270263672,
        "y": 1109.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "8f9b7ac9.e6c508",
        "type": "set",
        "name": "set network-route-SECONDARY-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
        "comments": "",
        "x": 4498.133270263672,
        "y": 1065.3331909179688,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "ac53fadb.549658",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3700.13330078125,
        "y": 2249,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a75c6a9f.cbf01",
                "92c4a208.e0cb28"
            ]
        ]
    },
    {
        "id": "c76e7c83.8acf1",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3527.466796875,
        "y": 2250,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "ac53fadb.549658"
            ]
        ]
    },
    {
        "id": "ac317b44.b3b988",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3536.957763671875,
        "y": 2292.5740356445312,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "a866b4cc.e0caa",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3525.466796875,
        "y": 2339,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "a75c6a9f.cbf01",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3990.466796875,
        "y": 2265,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "af57ae08.dd681",
                "e5cbeb5f.6e9468"
            ]
        ]
    },
    {
        "id": "e5cbeb5f.6e9468",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4213.466796875,
        "y": 2220,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "5a256296.5bc59c"
            ]
        ]
    },
    {
        "id": "af57ae08.dd681",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4215.466796875,
        "y": 2284,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c3ad5792.8dfac"
            ]
        ]
    },
    {
        "id": "f7bdbced.e4e6e",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-C.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-C.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3321.466796875,
        "y": 2271,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c76e7c83.8acf1",
                "ac317b44.b3b988",
                "a866b4cc.e0caa"
            ]
        ]
    },
    {
        "id": "4d6bf9fc.2af3d8",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3260.466796875,
        "y": 2229,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "3ddfa25a.4bc3f6",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3341.466796875,
        "y": 2119,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1f8f213c.23a987",
                "723c86fe.b2129"
            ]
        ]
    },
    {
        "id": "723c86fe.b2129",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3564.466796875,
        "y": 2105,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2b76ade7.37f3aa"
            ]
        ]
    },
    {
        "id": "1f8f213c.23a987",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3566.466796875,
        "y": 2138,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "2b76ade7.37f3aa",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3712.466796875,
        "y": 2098,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a96a9fab.149bd",
                "6bae074d.4cc69"
            ]
        ]
    },
    {
        "id": "a96a9fab.149bd",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainC.pnf-name' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3904.4666748046875,
        "y": 2035,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "92c4a208.e0cb28",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3971.466796875,
        "y": 2396,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "fb667e00.cdee38"
            ]
        ]
    },
    {
        "id": "fb667e00.cdee38",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4177.466796875,
        "y": 2396,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7f231a25.219aec"
            ]
        ]
    },
    {
        "id": "6bae074d.4cc69",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\"\n        pfx='tmp.aai.destination-secondary-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3926.4666748046875,
        "y": 2103,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6f9fafbd.595338",
                "5fece99f.57a078",
                "53c7941c.fd6f84"
            ]
        ]
    },
    {
        "id": "6f9fafbd.595338",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4121.966796875,
        "y": 2055,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1ef2a52f.ce58c3"
            ]
        ]
    },
    {
        "id": "5fece99f.57a078",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4113.966796875,
        "y": 2110,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d353a27e.170a88"
            ]
        ]
    },
    {
        "id": "53c7941c.fd6f84",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4118.966796875,
        "y": 2167,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "815f83cf.c9ecf"
            ]
        ]
    },
    {
        "id": "815f83cf.c9ecf",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4270.966796875,
        "y": 2168,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "1ef2a52f.ce58c3",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4266.34912109375,
        "y": 2052.6556701660156,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "df579443.2dfaa"
            ]
        ]
    },
    {
        "id": "b2f7d29a.c36bc8",
        "type": "set",
        "name": "set SECONDARY-ROOT stuff",
        "xml": "<set>\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-long' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-short' value=\"`$tmp.dst-secondary.pnf-name`\" />\n\n<parameter name='tmp.SECONDARY-ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-C.next-hop + '-' + $tmp.aai.network-route-C.logical-interface-id`\" />\n<parameter name='tmp.SECONDARY-ROOT.uni-tp-id' value=\"`$tmp.dst-secondary.ltpId`\" />\n",
        "comments": "",
        "x": 3322.13330078125,
        "y": 2364,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "29a75985.a4b2ae",
        "type": "comment",
        "name": "NOT NEEDED ANYMORE?",
        "info": "",
        "comments": "",
        "x": 4001.133270263672,
        "y": 2339.9998474121094,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "c3ad5792.8dfac",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4374.466796875,
        "y": 2303,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "5a256296.5bc59c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4378.466796875,
        "y": 2217,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a0a57c60.9feaa",
                "8f9217bc.ce51e"
            ]
        ]
    },
    {
        "id": "7f231a25.219aec",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4394.75244140625,
        "y": 2394.82177734375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "f1964530.52cb1"
            ]
        ]
    },
    {
        "id": "d353a27e.170a88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4281.966796875,
        "y": 2113,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "a0a57c60.9feaa",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst-secondary.ltpId' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n",
        "comments": "",
        "x": 4548.466796875,
        "y": 2178,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "8f9217bc.ce51e",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst-secondary.pnf-name' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n",
        "comments": "",
        "x": 4549.466796875,
        "y": 2283,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "1ea5e7d3.f23f9",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4544.466796875,
        "y": 2232,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "f1964530.52cb1",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4601.583984375,
        "y": 2384.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "cbbeb825.19f92",
                "b0c2600a.46c7c",
                "511030eb.63bcc8"
            ]
        ]
    },
    {
        "id": "cbbeb825.19f92",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination-secondary.ttp-id' value=\"`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4816.583984375,
        "y": 2346.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "b0c2600a.46c7c",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination-secondary.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-secondary-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4813.583984375,
        "y": 2385.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "ce425175.45de18"
            ]
        ]
    },
    {
        "id": "511030eb.63bcc8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4769.083984375,
        "y": 2427.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "b757d82d.12f65",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4850.466796875,
        "y": 2137.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "8ab896d8.87229"
            ]
        ]
    },
    {
        "id": "df579443.2dfaa",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4450.4666748046875,
        "y": 2067,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "51046da7.24d494"
            ]
        ]
    },
    {
        "id": "51046da7.24d494",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4647.466796875,
        "y": 2133.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b757d82d.12f65",
                "4ad69efc.b2bd68"
            ]
        ]
    },
    {
        "id": "4ad69efc.b2bd68",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4852.466796875,
        "y": 2210.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a0ad2556.3951b8"
            ]
        ]
    },
    {
        "id": "ce425175.45de18",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4994.083984375,
        "y": 2384.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "822b3c7.3a67ac"
            ]
        ]
    },
    {
        "id": "822b3c7.3a67ac",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5152.083984375,
        "y": 2384.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "71be1479.f150cc"
            ]
        ]
    },
    {
        "id": "71be1479.f150cc",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination-secondary.tunnel-tp-id' value=\"`$tmp.aai.destination-secondary-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5359.083984375,
        "y": 2384.3404541015625,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "8ab896d8.87229",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5027.466796875,
        "y": 2129.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d7fa69fb.085438",
                "ce745876.37fbb"
            ]
        ]
    },
    {
        "id": "ce745876.37fbb",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainC.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainC.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5235.466796875,
        "y": 2136.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "10a5091f.ce791f",
                "70c5216d.20762",
                "eee03948.c8ee08"
            ]
        ]
    },
    {
        "id": "a0ad2556.3951b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5029.466796875,
        "y": 2202.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "dba8eb8b.b7ea7"
            ]
        ]
    },
    {
        "id": "d7fa69fb.085438",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainC id",
        "xml": "<set>\n<parameter name='tmp.domainC.esr-thirdparty-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5265.466796875,
        "y": 2084.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "dba8eb8b.b7ea7",
        "type": "set",
        "name": "set domainC ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainC.eth-network-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5264.466796875,
        "y": 2326.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "10a5091f.ce791f",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5445.466796875,
        "y": 2127.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d091f788.e8c778"
            ]
        ]
    },
    {
        "id": "70c5216d.20762",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5437.466796875,
        "y": 2182.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "52797bd8.2181a4"
            ]
        ]
    },
    {
        "id": "eee03948.c8ee08",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5442.466796875,
        "y": 2239.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a5f87747.8903"
            ]
        ]
    },
    {
        "id": "a5f87747.8903",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5594.466796875,
        "y": 2240.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "52797bd8.2181a4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5605.466796875,
        "y": 2185.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "d091f788.e8c778",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5589.84912109375,
        "y": 2124.655792236328,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "4f5aa4ec.a9ba44"
            ]
        ]
    },
    {
        "id": "4f5aa4ec.a9ba44",
        "type": "set",
        "name": "set controller domainC data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5804.466796875,
        "y": 2121.0001220703125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "b98aea07.4499",
        "type": "switchNode",
        "name": "switch $hasSecondary",
        "xml": "<switch test='`$hasSecondary`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3836.13330078125,
        "y": 2733,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7d724c43.dd872c"
            ]
        ]
    },
    {
        "id": "7d724c43.dd872c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4027.13330078125,
        "y": 2737,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "c26943ed.871ed8"
            ]
        ]
    },
    {
        "id": "c26943ed.871ed8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4154.13330078125,
        "y": 2736,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a43135d6.d32b28"
            ]
        ]
    },
    {
        "id": "a43135d6.d32b28",
        "type": "save",
        "name": "get secondary root uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 4380.467041015625,
        "y": 2729.3336181640625,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "a8ebbe95.3f6e4",
                "38e80218.b5d4ce",
                "b6cd2169.c74bc8"
            ]
        ]
    },
    {
        "id": "a8ebbe95.3f6e4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4747.466796875,
        "y": 2623.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "e22da322.d0127"
            ]
        ]
    },
    {
        "id": "38e80218.b5d4ce",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4742.975830078125,
        "y": 2667.7594604492188,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "cc355488.cae9f"
            ]
        ]
    },
    {
        "id": "b6cd2169.c74bc8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4738.975830078125,
        "y": 2717.759521484375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "78c42cb1.03bbb4"
            ]
        ]
    },
    {
        "id": "61178516.955b94",
        "type": "save",
        "name": "update SECONDARY-ROOT UNI in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5186.976318359375,
        "y": 2712.7596435546875,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "e22da322.d0127",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4910.038330078125,
        "y": 2622.6192016601562,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "cc355488.cae9f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4910.975830078125,
        "y": 2667.7594604492188,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "78c42cb1.03bbb4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4907.975830078125,
        "y": 2717.759521484375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "67900f7a.aee708",
                "61178516.955b94"
            ]
        ]
    },
    {
        "id": "67900f7a.aee708",
        "type": "set",
        "name": "set new bw",
        "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source - $bwToBeDecreased`' />\n",
        "comments": "",
        "x": 5089.9765625,
        "y": 2659.759521484375,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "28b93260.26eace",
        "type": "switchNode",
        "name": "switch tmp.mmUNI-id-long != SECONDARY-ROOT UNI",
        "xml": "\n<switch test=\"`$tmp.mmUNI-id-long != $tmp.SECONDARY-ROOT.uni-p-interface-long`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4624.467041015625,
        "y": 3573.333251953125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "462ac15.49ec0c"
            ]
        ]
    },
    {
        "id": "462ac15.49ec0c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4914.467041015625,
        "y": 3575.333251953125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "db4c40a7.875698"
            ]
        ]
    },
    {
        "id": "abf74f44.8bd74",
        "type": "switchNode",
        "name": "switch $hasSecondary",
        "xml": "<switch test='`$hasSecondary`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4277,
        "y": 5803.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b3e521a4.a97f4"
            ]
        ]
    },
    {
        "id": "b3e521a4.a97f4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4468,
        "y": 5807.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "aa154017.d63388"
            ]
        ]
    },
    {
        "id": "aa154017.d63388",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4595,
        "y": 5806.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "ea396a9e.94917"
            ]
        ]
    },
    {
        "id": "ea396a9e.94917",
        "type": "switchNode",
        "name": "switch 2-ROOTS in same domain?",
        "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4820.3330078125,
        "y": 5808.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "4aa7a407.8eccb4",
                "90951777.87e61"
            ]
        ]
    },
    {
        "id": "4aa7a407.8eccb4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5030.3330078125,
        "y": 5785.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "6131b803.ead228"
            ]
        ]
    },
    {
        "id": "90951777.87e61",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5035.3330078125,
        "y": 5834.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "9203f8f4.976da"
            ]
        ]
    },
    {
        "id": "6131b803.ead228",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5156.3330078125,
        "y": 5785.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "9203f8f4.976da",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5153.3330078125,
        "y": 5841.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "252aad6f.949002",
                "2be015ab.396d82"
            ]
        ]
    },
    {
        "id": "252aad6f.949002",
        "type": "save",
        "name": "update SECONDARY-ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5467.3330078125,
        "y": 5900.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "1524ee99.1e1cd1",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 5399.550048828125,
        "y": 5852.13330078125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "2be015ab.396d82",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5598,
        "y": 5810.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "d39caf18.6babe",
        "type": "switchNode",
        "name": "switch $hasSecondary",
        "xml": "<switch test='`$hasSecondary`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 868,
        "y": 5000.3330078125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "bb5f541b.ab1a88"
            ]
        ]
    },
    {
        "id": "bb5f541b.ab1a88",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1059,
        "y": 5004.3330078125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "d475fb98.0c79f"
            ]
        ]
    },
    {
        "id": "d475fb98.0c79f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1186,
        "y": 5003.3330078125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "4975d2d3.1f477c"
            ]
        ]
    },
    {
        "id": "4975d2d3.1f477c",
        "type": "switchNode",
        "name": "switch 2-ROOTS in same domain?",
        "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1411.3330078125,
        "y": 5005.3330078125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "78d676eb.347948",
                "b9cebfbe.3a16d8"
            ]
        ]
    },
    {
        "id": "78d676eb.347948",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1621.3330078125,
        "y": 4982.3330078125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "be0beff9.053b6"
            ]
        ]
    },
    {
        "id": "b9cebfbe.3a16d8",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1626.3330078125,
        "y": 5031.3330078125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "1ec18968.883e37"
            ]
        ]
    },
    {
        "id": "be0beff9.053b6",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1747.3330078125,
        "y": 4982.3330078125,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "1ec18968.883e37",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1744.3330078125,
        "y": 5038.3330078125,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "3f1c1ffb.4cacd8",
                "643240ac.3a15a"
            ]
        ]
    },
    {
        "id": "643240ac.3a15a",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2189,
        "y": 5007.3330078125,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "16675ac.2ba7ba5",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 1990.550048828125,
        "y": 5049.1328125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "3f1c1ffb.4cacd8",
        "type": "save",
        "name": "update SECONDARY-ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 2058.3330078125,
        "y": 5097.3330078125,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "68e0d31a.2e51f4",
        "type": "switchNode",
        "name": "switch $hasSecondary",
        "xml": "<switch test='`$hasSecondary`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1470.3333740234375,
        "y": 5841.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2c8509f2.c5786e"
            ]
        ]
    },
    {
        "id": "2c8509f2.c5786e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1661.3333740234375,
        "y": 5845.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "30f6f14a.076056"
            ]
        ]
    },
    {
        "id": "30f6f14a.076056",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1788.3333740234375,
        "y": 5844.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "b9a2493.fce2438"
            ]
        ]
    },
    {
        "id": "b9a2493.fce2438",
        "type": "switchNode",
        "name": "switch 2-ROOTS in same domain?",
        "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2013.6663818359375,
        "y": 5846.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7c5427a0.bfcb2",
                "2b71ce9a.05df6a"
            ]
        ]
    },
    {
        "id": "7c5427a0.bfcb2",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2223.6663818359375,
        "y": 5823.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "7c8ca33d.b99804"
            ]
        ]
    },
    {
        "id": "2b71ce9a.05df6a",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2228.6663818359375,
        "y": 5872.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "af2e72.47de599"
            ]
        ]
    },
    {
        "id": "7c8ca33d.b99804",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2349.6663818359375,
        "y": 5823.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "af2e72.47de599",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2346.6663818359375,
        "y": 5879.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            [
                "2f308234.b92f6e",
                "e716a684.8ec94"
            ]
        ]
    },
    {
        "id": "e716a684.8ec94",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2791.3333740234375,
        "y": 5848.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    },
    {
        "id": "1f18634c.d886cd",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 2592.8834228515625,
        "y": 5890.13330078125,
        "z": "8bd89607.6248d8",
        "wires": []
    },
    {
        "id": "2f308234.b92f6e",
        "type": "save",
        "name": "update SECONDARY-ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 2660.6663818359375,
        "y": 5938.33349609375,
        "z": "8bd89607.6248d8",
        "wires": [
            []
        ]
    }
]