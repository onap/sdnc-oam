[
    {
        "id": "4eba0592.d8f9ec",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 171.88333129882812,
        "y": 174,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2ad94242.d34e8e"
            ]
        ]
    },
    {
        "id": "2ad94242.d34e8e",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 456.1690216064453,
        "y": 235.23810863494873,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "86bffa6e.8633f8"
            ]
        ]
    },
    {
        "id": "86bffa6e.8633f8",
        "type": "method",
        "name": "method cll-vnf-topology-operation-cll-delete",
        "xml": "<method rpc='cll-vnf-topology-operation-cll-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 462.3119354248047,
        "y": 320.0000305175781,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "47cd43dd.6a0c84"
            ]
        ]
    },
    {
        "id": "47cd43dd.6a0c84",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 811.8833312988281,
        "y": 379,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "17095ff1.ceb8e",
                "f2cac95d.2dd4f",
                "41a5db6f.16b124"
            ]
        ]
    },
    {
        "id": "17095ff1.ceb8e",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1113.2168273925781,
        "y": 649.9302978515625,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "f2cac95d.2dd4f",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1134.6452941894531,
        "y": 352.33331298828125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d39ef031.51bcf8",
                "d0a14c94.f617f8",
                "66ff38b5.215e28"
            ]
        ]
    },
    {
        "id": "d39ef031.51bcf8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1359.6452941894531,
        "y": 210.33331298828125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6bec9327.9503c4"
            ]
        ]
    },
    {
        "id": "d0a14c94.f617f8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1355.1362609863281,
        "y": 279.9073486328125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "73227915.55ca3"
            ]
        ]
    },
    {
        "id": "66ff38b5.215e28",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1343.6452941894531,
        "y": 326.33331298828125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "5c121a7a.2c527c"
            ]
        ]
    },
    {
        "id": "dcc088f.fb3b378",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1113.6452941894531,
        "y": 240.33331298828125,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "41a5db6f.16b124",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1101.6452941894531,
        "y": 292.33331298828125,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "6bec9327.9503c4",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1599.8833312988281,
        "y": 207,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "52c7d728.b872f8",
                "31624b25.4a6dec"
            ]
        ]
    },
    {
        "id": "73227915.55ca3",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1509.9457092285156,
        "y": 282.8597717285156,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "5c121a7a.2c527c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1513.8833312988281,
        "y": 327,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "52c7d728.b872f8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1804.8833312988281,
        "y": 244,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b08352cf.6ac34"
            ]
        ]
    },
    {
        "id": "31624b25.4a6dec",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1814.8833312988281,
        "y": 171,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "b08352cf.6ac34",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1797.8833312988281,
        "y": 319,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "bdd428b9.6fddd",
                "8710bcb7.6e657",
                "6f728611.a8a3e",
                "6d42412e.61e8d",
                "e22daf3c.82e7c8"
            ]
        ]
    },
    {
        "id": "50e447ae.0fde38",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2283.883331298828,
        "y": 370,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "27d61e5e.f12fe2",
                "2c908c8d.59c394",
                "32fadd2c.e0a1c2"
            ]
        ]
    },
    {
        "id": "27d61e5e.f12fe2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2499.883331298828,
        "y": 437,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "4e35bc34.a92d94"
            ]
        ]
    },
    {
        "id": "2c908c8d.59c394",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2500.374298095703,
        "y": 336.573974609375,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6fdcac69.b07bec"
            ]
        ]
    },
    {
        "id": "32fadd2c.e0a1c2",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2495.883331298828,
        "y": 386,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "71176ed6.70694"
            ]
        ]
    },
    {
        "id": "bdd428b9.6fddd",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2000.8833312988281,
        "y": 351,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "7043f926.26b93",
                "50e447ae.0fde38",
                "8af2638e.140428",
                "b2d6bb83.745318"
            ]
        ]
    },
    {
        "id": "7043f926.26b93",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2280.883331298828,
        "y": 289,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "6d42412e.61e8d",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
        "comments": "",
        "x": 1974.8833312988281,
        "y": 301,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "8710bcb7.6e657",
        "type": "get-resource",
        "name": "get-resource pnfs-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/pnfs?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
        "comments": "",
        "outputs": 1,
        "x": 2017.8833312988281,
        "y": 160,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "6f728611.a8a3e",
        "type": "get-resource",
        "name": "get-resource logical-links",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
        "comments": "",
        "outputs": 1,
        "x": 2029.8833312988281,
        "y": 201,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "8a5a98d5.6ebb1",
        "type": "comment",
        "name": "The following two nodes are for PCE",
        "info": "",
        "comments": "",
        "x": 2054.883331298828,
        "y": 113,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "2303563c.e9131a",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
        "comments": "",
        "x": 1974.8833312988281,
        "y": 247,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "6fdcac69.b07bec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2678.883331298828,
        "y": 339,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "71176ed6.70694",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2678.820831298828,
        "y": 388.1402587890625,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "4e35bc34.a92d94",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2680.820831298828,
        "y": 439.1402587890625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6a0085f3.85f3dc"
            ]
        ]
    },
    {
        "id": "6a0085f3.85f3dc",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2973.820831298828,
        "y": 386.1402587890625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "47170bd3.47cd24",
                "41231d4a.3c5914",
                "413cb45a.a52f94"
            ]
        ]
    },
    {
        "id": "41231d4a.3c5914",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3247.311798095703,
        "y": 278.7142333984375,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "ddcd6972.1cc26"
            ]
        ]
    },
    {
        "id": "ddcd6972.1cc26",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3424.883331298828,
        "y": 279,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "413cb45a.a52f94",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3242.820831298828,
        "y": 328.1402587890625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "29789682.9a5ca2"
            ]
        ]
    },
    {
        "id": "29789682.9a5ca2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3424.820831298828,
        "y": 328.1402587890625,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "47170bd3.47cd24",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3246.820831298828,
        "y": 379.1402587890625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "5d602163.27f0b"
            ]
        ]
    },
    {
        "id": "5d602163.27f0b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3426.820831298828,
        "y": 379.1402587890625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "dd9e7161.bb7c"
            ]
        ]
    },
    {
        "id": "dd9e7161.bb7c",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2992.883331298828,
        "y": 514,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "e567be5f.46cf",
                "117d3c85.14baf3"
            ]
        ]
    },
    {
        "id": "117d3c85.14baf3",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3302.883331298828,
        "y": 521,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "e567be5f.46cf",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3301.883331298828,
        "y": 575,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "1aa53c9a.ee4c73"
            ]
        ]
    },
    {
        "id": "16e58d5c.45543b",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4046.883331298828,
        "y": 529,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "e0a75ebb.a4e0a"
            ]
        ]
    },
    {
        "id": "e0a75ebb.a4e0a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4223.883209228516,
        "y": 521.9998779296875,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "64783b1d.9ea984",
                "aa6dd372.e093d"
            ]
        ]
    },
    {
        "id": "1aa53c9a.ee4c73",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3465.883331298828,
        "y": 501,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "9d9386aa.4ba0f",
                "a5c7d0d0.70a6f8"
            ]
        ]
    },
    {
        "id": "9d9386aa.4ba0f",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3746.883331298828,
        "y": 457,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "ac9ffe20.350ab8"
            ]
        ]
    },
    {
        "id": "ac9ffe20.350ab8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4008.883331298828,
        "y": 457,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "16e58d5c.45543b"
            ]
        ]
    },
    {
        "id": "64783b1d.9ea984",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 4466.883209228516,
        "y": 478.9998779296875,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "aa6dd372.e093d",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 4455.883209228516,
        "y": 533.9998779296875,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a2aec981.c05928",
                "c6a2ea9c.683df",
                "b8928013.256998"
            ]
        ]
    },
    {
        "id": "b8928013.256998",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4708.883331298828,
        "y": 420,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "83be4f6.3f006b"
            ]
        ]
    },
    {
        "id": "83be4f6.3f006b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4857.454864501953,
        "y": 420.2857666015625,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "586d6db7.c2d804",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4856.392364501953,
        "y": 464.426025390625,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "c6a2ea9c.683df",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4697.392364501953,
        "y": 464.426025390625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "586d6db7.c2d804"
            ]
        ]
    },
    {
        "id": "a2aec981.c05928",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4704.392364501953,
        "y": 543.426025390625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "4d4b39ee.fece78"
            ]
        ]
    },
    {
        "id": "4d4b39ee.fece78",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4843.392364501953,
        "y": 543.426025390625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "68714312.362fe4",
                "860808d4.582b4"
            ]
        ]
    },
    {
        "id": "68714312.362fe4",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 5048.883331298828,
        "y": 541,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "860808d4.582b4",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 5047.883331298828,
        "y": 587,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "a5c7d0d0.70a6f8",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3563.883331298828,
        "y": 573,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "91204981.e8b1c8"
            ]
        ]
    },
    {
        "id": "91204981.e8b1c8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3843.883331298828,
        "y": 573,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "815c7496.5664a8"
            ]
        ]
    },
    {
        "id": "815c7496.5664a8",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2256.8834533691406,
        "y": 826.0001220703125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2e1a5e6a.390622"
            ]
        ]
    },
    {
        "id": "2e1a5e6a.390622",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2433.883331298828,
        "y": 819,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "fda12a63.354948",
                "9acb494f.3c831"
            ]
        ]
    },
    {
        "id": "fda12a63.354948",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 2676.883331298828,
        "y": 776,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "9acb494f.3c831",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 2665.883331298828,
        "y": 831,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2cf3e7af.84ed7",
                "7720ff91.14ecb8",
                "6208751c.cb4214"
            ]
        ]
    },
    {
        "id": "2cf3e7af.84ed7",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2957.374298095703,
        "y": 809.573974609375,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "644aada5.da5074"
            ]
        ]
    },
    {
        "id": "7720ff91.14ecb8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2945.883331298828,
        "y": 854,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b4b18b88.8b8778"
            ]
        ]
    },
    {
        "id": "644aada5.da5074",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3105.945831298828,
        "y": 809.8597412109375,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "b4b18b88.8b8778",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3104.883331298828,
        "y": 854,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "6208751c.cb4214",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2952.883331298828,
        "y": 933,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f4a1f138.8436a"
            ]
        ]
    },
    {
        "id": "f4a1f138.8436a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3091.883331298828,
        "y": 933,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "64b776d1.df13b8",
                "cf58d1a3.b75bc8",
                "a4d7ff96.ceb5f8",
                "4f57fa4.5908a84",
                "93281de6.9193c8",
                "279a0c66.95b87c",
                "2fd6be0.ec30642",
                "3458f9fd.a9fdce",
                "b114579a.337d4",
                "83634982.62f32",
                "a78c5989.f5207",
                "dc895d5a.f09ef",
                "8c6f82a5.234d18",
                "a984d0c7.8574d",
                "49347bae.3e2974"
            ]
        ]
    },
    {
        "id": "fe79d8e9.168438",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3405.883331298828,
        "y": 739,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "64b776d1.df13b8",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3386.883331298828,
        "y": 789,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "dc895d5a.f09ef",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 3343.883331298828,
        "y": 834,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "cf58d1a3.b75bc8",
        "type": "set",
        "name": "set network-route-one",
        "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
        "comments": "",
        "x": 3318.883331298828,
        "y": 897,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "a4d7ff96.ceb5f8",
        "type": "set",
        "name": "set network-route-two",
        "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 3319.883331298828,
        "y": 952,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "4f57fa4.5908a84",
        "type": "save",
        "name": "get network-route-one from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
        "comments": "",
        "outputs": 1,
        "x": 3335.883331298828,
        "y": 1000,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "722a434e.2a3adc",
                "e8fe3cd4.c3586",
                "fdbfe007.1ea3b"
            ]
        ]
    },
    {
        "id": "93281de6.9193c8",
        "type": "save",
        "name": "get network-route-two from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
        "comments": "",
        "outputs": 1,
        "x": 3324.883331298828,
        "y": 1086.9998779296875,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b372ac3d.0a4b1",
                "d24aa16b.e47da",
                "419032bc.a4963c"
            ]
        ]
    },
    {
        "id": "722a434e.2a3adc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3536.883331298828,
        "y": 884,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "aae0d761.ec3158"
            ]
        ]
    },
    {
        "id": "e8fe3cd4.c3586",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3532.392364501953,
        "y": 933.426025390625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "af62b91c.6bf638"
            ]
        ]
    },
    {
        "id": "fdbfe007.1ea3b",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3536.392364501953,
        "y": 986.426025390625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "72360610.10f7e"
            ]
        ]
    },
    {
        "id": "aae0d761.ec3158",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3685.454864501953,
        "y": 883.2857666015625,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "af62b91c.6bf638",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3675.392364501953,
        "y": 933.426025390625,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "b372ac3d.0a4b1",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3547.883331298828,
        "y": 1056.9998779296875,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "3bdfccb0.f2d08c"
            ]
        ]
    },
    {
        "id": "d24aa16b.e47da",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3543.392364501953,
        "y": 1106.4259033203125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "57f2def1.81f4e"
            ]
        ]
    },
    {
        "id": "419032bc.a4963c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3544.392364501953,
        "y": 1159.4259033203125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "91fe26d2.5b80d"
            ]
        ]
    },
    {
        "id": "3bdfccb0.f2d08c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3696.454864501953,
        "y": 1056.28564453125,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "57f2def1.81f4e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3686.392364501953,
        "y": 1106.4259033203125,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "72360610.10f7e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3697.883331298828,
        "y": 986,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "21ff581a.7d3f68"
            ]
        ]
    },
    {
        "id": "91fe26d2.5b80d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3697.883331298828,
        "y": 1158.9998779296875,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f4949055.0aa838"
            ]
        ]
    },
    {
        "id": "21ff581a.7d3f68",
        "type": "switchNode",
        "name": "switch nr type",
        "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3869.883331298828,
        "y": 986,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d771576e.5459b",
                "743ce77.86c2e98"
            ]
        ]
    },
    {
        "id": "f4949055.0aa838",
        "type": "switchNode",
        "name": "switch nr type",
        "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3870.883331298828,
        "y": 1159,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "854204ac.64311",
                "5401ccd6.c2c2e4"
            ]
        ]
    },
    {
        "id": "d771576e.5459b",
        "type": "outcome",
        "name": "ROOT",
        "xml": "<outcome value='ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4045.883331298828,
        "y": 965,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2e04d27d.5faff6"
            ]
        ]
    },
    {
        "id": "743ce77.86c2e98",
        "type": "outcome",
        "name": "LEAF",
        "xml": "<outcome value='LEAF'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4047.883331298828,
        "y": 1019,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "12c64a9b.27d615"
            ]
        ]
    },
    {
        "id": "854204ac.64311",
        "type": "outcome",
        "name": "ROOT",
        "xml": "<outcome value='ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4046.883331298828,
        "y": 1129,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a8347389.2ab3b"
            ]
        ]
    },
    {
        "id": "5401ccd6.c2c2e4",
        "type": "outcome",
        "name": "LEAF",
        "xml": "<outcome value='LEAF'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4048.883331298828,
        "y": 1183,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "49b6f3ad.a55ac4"
            ]
        ]
    },
    {
        "id": "20ddeea0.a0e9ea",
        "type": "set",
        "name": "set network-route-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4355.883331298828,
        "y": 917,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "a4916484.b95cf",
        "type": "set",
        "name": "set network-route-LEAF",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4348.883331298828,
        "y": 1015,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "2f347429.e690cc",
        "type": "set",
        "name": "set network-route-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4348.883331298828,
        "y": 1102,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "cad2e783.60fc68",
        "type": "set",
        "name": "set network-route-LEAF",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4352.883331298828,
        "y": 1195,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "b1d86e33.3aa378",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3579.883331298828,
        "y": 1604,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a5f9a85c.99ac48"
            ]
        ]
    },
    {
        "id": "a4982a5c.ee1f08",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3589.374298095703,
        "y": 1646.5740356445312,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "bbb83480.f4afb8"
            ]
        ]
    },
    {
        "id": "9afba595.5831a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3577.883331298828,
        "y": 1693,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "eeac5d42.037ff"
            ]
        ]
    },
    {
        "id": "a9f44662.0eb94",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3279.883331298828,
        "y": 1566,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "2fd6be0.ec30642",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3322.883331298828,
        "y": 1631,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b1d86e33.3aa378",
                "a4982a5c.ee1f08",
                "9afba595.5831a"
            ]
        ]
    },
    {
        "id": "279a0c66.95b87c",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3323.883331298828,
        "y": 1301,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "ab7f6387.a06298",
                "178d0fab.57c17"
            ]
        ]
    },
    {
        "id": "178d0fab.57c17",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3546.883331298828,
        "y": 1287,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "174b650f.6f4cdb"
            ]
        ]
    },
    {
        "id": "ab7f6387.a06298",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3548.883331298828,
        "y": 1320,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "109222da.cab295"
            ]
        ]
    },
    {
        "id": "a5f9a85c.99ac48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3752.549835205078,
        "y": 1603,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f0dfffc5.29d178",
                "acd2704e.4ae308"
            ]
        ]
    },
    {
        "id": "bbb83480.f4afb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3742.9457092285156,
        "y": 1649.8597717285156,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "eeac5d42.037ff",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3746.883331298828,
        "y": 1694,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "f0dfffc5.29d178",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4016.883331298828,
        "y": 1587,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "11bdf0f4.508487",
                "23d1e1ad.23f75e"
            ]
        ]
    },
    {
        "id": "23d1e1ad.23f75e",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4239.883331298828,
        "y": 1542,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "3fc7a366.f1683c"
            ]
        ]
    },
    {
        "id": "11bdf0f4.508487",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4241.883331298828,
        "y": 1606,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d6cac3a3.d1f4"
            ]
        ]
    },
    {
        "id": "d6cac3a3.d1f4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4403.883331298828,
        "y": 1602,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "3fc7a366.f1683c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4404.883331298828,
        "y": 1539,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d54289dc.18d288",
                "cc99bc89.a9c058"
            ]
        ]
    },
    {
        "id": "17e0fd07.b5de8b",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4018.883331298828,
        "y": 1746,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "f1afd056.64d73",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4063.883331298828,
        "y": 1656,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "50d51c8c.dc95ac",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4146.883331298828,
        "y": 1794,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "109222da.cab295",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3691.883331298828,
        "y": 1317,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "174b650f.6f4cdb",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3694.883331298828,
        "y": 1280,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6b9c6245.ea050c",
                "ab33cb14.ff6cc8"
            ]
        ]
    },
    {
        "id": "6b9c6245.ea050c",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3868.883331298828,
        "y": 1236,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "acd2704e.4ae308",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3970.883331298828,
        "y": 1871,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "73a0105b.ac0e58"
            ]
        ]
    },
    {
        "id": "73a0105b.ac0e58",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4176.883331298828,
        "y": 1871,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6dbfb157.d8359"
            ]
        ]
    },
    {
        "id": "6dbfb157.d8359",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4392.168975830078,
        "y": 1870.82177734375,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "616def67.e5a25"
            ]
        ]
    },
    {
        "id": "ab33cb14.ff6cc8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3883.883331298828,
        "y": 1347,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "e7bde0a4.3a223",
                "856b3a3e.33dd18",
                "ec1837c2.7e65e8"
            ]
        ]
    },
    {
        "id": "e7bde0a4.3a223",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4079.3834533691406,
        "y": 1299,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a049038b.508d4"
            ]
        ]
    },
    {
        "id": "856b3a3e.33dd18",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4071.3834533691406,
        "y": 1354,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f843f7f2.8c64b8"
            ]
        ]
    },
    {
        "id": "ec1837c2.7e65e8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4076.3834533691406,
        "y": 1411,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "47e459e1.2a9ce"
            ]
        ]
    },
    {
        "id": "47e459e1.2a9ce",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4228.383453369141,
        "y": 1412,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "f843f7f2.8c64b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4239.383453369141,
        "y": 1357,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "a049038b.508d4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4223.765777587891,
        "y": 1296.6556701660156,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b2d1999f.753708"
            ]
        ]
    },
    {
        "id": "b2d1999f.753708",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4407.883331298828,
        "y": 1311,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "9b22416d.9cdac8"
            ]
        ]
    },
    {
        "id": "cc99bc89.a9c058",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 4574.883331298828,
        "y": 1497,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "d54289dc.18d288",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 4575.883331298828,
        "y": 1605,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "46e18359.07aad4",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4576.883331298828,
        "y": 1554,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "616def67.e5a25",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4599.000518798828,
        "y": 1871.34033203125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6d0c5fcb.438328",
                "40a1c35d.17991c",
                "6c800e67.6aa9c8"
            ]
        ]
    },
    {
        "id": "6d0c5fcb.438328",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4814.000518798828,
        "y": 1833.34033203125,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "40a1c35d.17991c",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4811.000518798828,
        "y": 1872.34033203125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "9de28790.cf8c7"
            ]
        ]
    },
    {
        "id": "6c800e67.6aa9c8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4766.500518798828,
        "y": 1914.34033203125,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "9de28790.cf8c7",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4991.500518798828,
        "y": 1871.34033203125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "e5173d49.fc3368"
            ]
        ]
    },
    {
        "id": "376d58a4.adb2a",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4805.883331298828,
        "y": 1315,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "60247fbe.4b6c2"
            ]
        ]
    },
    {
        "id": "60247fbe.4b6c2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4982.883331298828,
        "y": 1307,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "4270b940.4f6ac",
                "65b48891.d54c3"
            ]
        ]
    },
    {
        "id": "9b22416d.9cdac8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4602.883331298828,
        "y": 1311,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "376d58a4.adb2a",
                "59d37917.573538"
            ]
        ]
    },
    {
        "id": "59d37917.573538",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4808.883331298828,
        "y": 1389,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b8751b8b.fb4f58"
            ]
        ]
    },
    {
        "id": "b8751b8b.fb4f58",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4985.883331298828,
        "y": 1381,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "673e159e.9038cc"
            ]
        ]
    },
    {
        "id": "e5173d49.fc3368",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5149.500518798828,
        "y": 1871.34033203125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "e816a090.0c423"
            ]
        ]
    },
    {
        "id": "e816a090.0c423",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5356.500518798828,
        "y": 1871.34033203125,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "65b48891.d54c3",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5190.883331298828,
        "y": 1314,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "12ca2f18.a3fcb1",
                "2eff6a6f.1256be",
                "ae932fb7.b2f368"
            ]
        ]
    },
    {
        "id": "4270b940.4f6ac",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5220.883331298828,
        "y": 1262,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "12ca2f18.a3fcb1",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5400.883331298828,
        "y": 1305,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "19df6125.66c90f"
            ]
        ]
    },
    {
        "id": "2eff6a6f.1256be",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5392.883331298828,
        "y": 1360,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "5900b30a.9db0cc"
            ]
        ]
    },
    {
        "id": "ae932fb7.b2f368",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5397.883331298828,
        "y": 1417,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "abcfe080.ae7e7"
            ]
        ]
    },
    {
        "id": "abcfe080.ae7e7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5549.883331298828,
        "y": 1418,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "5900b30a.9db0cc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5560.883331298828,
        "y": 1363,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "19df6125.66c90f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5545.265655517578,
        "y": 1302.6556701660156,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "db94bf6b.c81da8"
            ]
        ]
    },
    {
        "id": "673e159e.9038cc",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5220.883331298828,
        "y": 1505,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "db94bf6b.c81da8",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5759.883331298828,
        "y": 1299,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "653ea460.331594",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4343.883331298828,
        "y": 953,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "3ff377ce.541508",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4334.883331298828,
        "y": 1051,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "2e04d27d.5faff6",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4168.883331298828,
        "y": 959,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "20ddeea0.a0e9ea",
                "653ea460.331594"
            ]
        ]
    },
    {
        "id": "12c64a9b.27d615",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4174.883331298828,
        "y": 1023,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a4916484.b95cf",
                "3ff377ce.541508"
            ]
        ]
    },
    {
        "id": "a8347389.2ab3b",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4174.883331298828,
        "y": 1129,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2f347429.e690cc",
                "64f47a9a.5541ec"
            ]
        ]
    },
    {
        "id": "49b6f3ad.a55ac4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4177.883331298828,
        "y": 1182,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "cad2e783.60fc68",
                "93b1477b.b7ce28"
            ]
        ]
    },
    {
        "id": "64f47a9a.5541ec",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4334.883331298828,
        "y": 1142,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "93b1477b.b7ce28",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4337.883331298828,
        "y": 1233,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "bcceae66.215ea8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3709.883331298828,
        "y": 2443,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "fa55cad.2f0ddb8",
                "341eac77.d5f56c"
            ]
        ]
    },
    {
        "id": "e6e2e92d.d49f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3537.216827392578,
        "y": 2444,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "bcceae66.215ea8"
            ]
        ]
    },
    {
        "id": "15d49e8e.f5c6d1",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3546.707794189453,
        "y": 2486.5740356445312,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b6575c89.a4dbd8"
            ]
        ]
    },
    {
        "id": "456db0bd.6c4e5",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3535.216827392578,
        "y": 2533,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f1a4c78.c749938"
            ]
        ]
    },
    {
        "id": "b6575c89.a4dbd8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3700.2792053222656,
        "y": 2489.8597717285156,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "f1a4c78.c749938",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3704.216827392578,
        "y": 2534,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "fa55cad.2f0ddb8",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3996.216827392578,
        "y": 2447.0001220703125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2a55ff3d.a63f58",
                "a4fedadd.ffdcf"
            ]
        ]
    },
    {
        "id": "a4fedadd.ffdcf",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4219.216827392578,
        "y": 2402.0001220703125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2cf5b91c.330536"
            ]
        ]
    },
    {
        "id": "2a55ff3d.a63f58",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4221.216827392578,
        "y": 2466.0001220703125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f4cfd006.4df4a"
            ]
        ]
    },
    {
        "id": "f4cfd006.4df4a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4380.216827392578,
        "y": 2485.0001220703125,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "2cf5b91c.330536",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4384.216827392578,
        "y": 2399.0001220703125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "60521985.bf9fa8",
                "1b11d7f2.c04e4"
            ]
        ]
    },
    {
        "id": "3e3a2fcb.29b168",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3998.216827392578,
        "y": 2606.0001220703125,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "a24d2064.f8a7c",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4043.216827392578,
        "y": 2516.0001220703125,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "7f1c08c8.8cc28",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4125.216827392578,
        "y": 2671.0001220703125,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "b114579a.337d4",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3309.216827392578,
        "y": 2479,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "e6e2e92d.d49f8",
                "15d49e8e.f5c6d1",
                "456db0bd.6c4e5"
            ]
        ]
    },
    {
        "id": "8e0a6f3b.01feb",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3270.216827392578,
        "y": 2423,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "3458f9fd.a9fdce",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3327.216827392578,
        "y": 2141.9998779296875,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c48f1e5.b50d76",
                "40db2833.3d6058"
            ]
        ]
    },
    {
        "id": "40db2833.3d6058",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3550.216827392578,
        "y": 2127.9998779296875,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "57ecc3e9.705994"
            ]
        ]
    },
    {
        "id": "c48f1e5.b50d76",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3552.216827392578,
        "y": 2160.9998779296875,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6a189760.03fff"
            ]
        ]
    },
    {
        "id": "6a189760.03fff",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3695.216827392578,
        "y": 2157.9998779296875,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "57ecc3e9.705994",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3698.216827392578,
        "y": 2120.9998779296875,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "7ef10f50.4a98b",
                "d3e48892.7c0638"
            ]
        ]
    },
    {
        "id": "7ef10f50.4a98b",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3892.216827392578,
        "y": 2124,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "341eac77.d5f56c",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3955.216827392578,
        "y": 2756,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "1d1b2999.e8eaf6"
            ]
        ]
    },
    {
        "id": "1d1b2999.e8eaf6",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4161.216827392578,
        "y": 2756,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2587a419.edf304"
            ]
        ]
    },
    {
        "id": "2587a419.edf304",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4378.502471923828,
        "y": 2754.82177734375,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "596e064d.3e4868"
            ]
        ]
    },
    {
        "id": "d3e48892.7c0638",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3914.216827392578,
        "y": 2192,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "5d04022c.52094c",
                "4363a204.88356c",
                "d1632f49.e8bfd8"
            ]
        ]
    },
    {
        "id": "5d04022c.52094c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4109.716949462891,
        "y": 2144,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "16d6f161.b988af"
            ]
        ]
    },
    {
        "id": "4363a204.88356c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4101.716949462891,
        "y": 2199,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "5ac71d3b.31ff94"
            ]
        ]
    },
    {
        "id": "d1632f49.e8bfd8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4106.716949462891,
        "y": 2256,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "8e2e62d9.6dcb8"
            ]
        ]
    },
    {
        "id": "8e2e62d9.6dcb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4258.716949462891,
        "y": 2257,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "5ac71d3b.31ff94",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4269.716949462891,
        "y": 2202,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "16d6f161.b988af",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4254.099273681641,
        "y": 2141.6556701660156,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "7d886bfd.e9ca4c"
            ]
        ]
    },
    {
        "id": "60521985.bf9fa8",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 4554.216827392578,
        "y": 2360.0001220703125,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "1b11d7f2.c04e4",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 4555.216827392578,
        "y": 2465.0001220703125,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "f5d8e7ee.5dd5b8",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4550.216827392578,
        "y": 2414.0001220703125,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "596e064d.3e4868",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4585.334014892578,
        "y": 2744.3404541015625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "1d1ef4b9.b52cc3",
                "aa09325d.47c72",
                "f212860e.85526"
            ]
        ]
    },
    {
        "id": "1d1ef4b9.b52cc3",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4800.334014892578,
        "y": 2706.3404541015625,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "aa09325d.47c72",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4797.334014892578,
        "y": 2745.3404541015625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "391393be.95d72c"
            ]
        ]
    },
    {
        "id": "f212860e.85526",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4752.834014892578,
        "y": 2787.3404541015625,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "391393be.95d72c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4977.834014892578,
        "y": 2744.3404541015625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "520819a9.ab1618"
            ]
        ]
    },
    {
        "id": "520819a9.ab1618",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5135.834014892578,
        "y": 2744.3404541015625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "3a6f0d92.f64ee2"
            ]
        ]
    },
    {
        "id": "3a6f0d92.f64ee2",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5342.834014892578,
        "y": 2744.3404541015625,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "35d3101c.ddb4c",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4836.216827392578,
        "y": 2160,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "461a66b2.13a6c8"
            ]
        ]
    },
    {
        "id": "461a66b2.13a6c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5013.216827392578,
        "y": 2152,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6cbb0705.4a3c5",
                "670f0182.9fd968"
            ]
        ]
    },
    {
        "id": "7d886bfd.e9ca4c",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4438.216827392578,
        "y": 2156,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "e2222250.60ef7"
            ]
        ]
    },
    {
        "id": "e2222250.60ef7",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4633.216827392578,
        "y": 2156,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "35d3101c.ddb4c",
                "768c39b6.117ae"
            ]
        ]
    },
    {
        "id": "670f0182.9fd968",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5221.216827392578,
        "y": 2159,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "4e714dda.e8064c",
                "6d43e638.f020f8",
                "33cdbe70.d704f2"
            ]
        ]
    },
    {
        "id": "9bab22e5.a35978",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5015.216827392578,
        "y": 2225,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "3c5a22cd.c5b5a6"
            ]
        ]
    },
    {
        "id": "768c39b6.117ae",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4838.216827392578,
        "y": 2233,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "9bab22e5.a35978"
            ]
        ]
    },
    {
        "id": "6cbb0705.4a3c5",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5251.216827392578,
        "y": 2107,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "3c5a22cd.c5b5a6",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5250.216827392578,
        "y": 2349,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "4e714dda.e8064c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5431.216827392578,
        "y": 2150,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c3b341d5.27524"
            ]
        ]
    },
    {
        "id": "6d43e638.f020f8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5423.216827392578,
        "y": 2205,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "5319e635.03496"
            ]
        ]
    },
    {
        "id": "33cdbe70.d704f2",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5428.216827392578,
        "y": 2262,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "bf85165f.b30b4"
            ]
        ]
    },
    {
        "id": "bf85165f.b30b4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5580.216827392578,
        "y": 2263,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "5319e635.03496",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5591.216827392578,
        "y": 2208,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "c3b341d5.27524",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5575.599151611328,
        "y": 2147.6556701660156,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "5a4d43b1.7dbc0c"
            ]
        ]
    },
    {
        "id": "5a4d43b1.7dbc0c",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5790.216827392578,
        "y": 2144,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "83634982.62f32",
        "type": "set",
        "name": "set LEAF stuff",
        "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop + '-' + $tmp.aai.network-route-A.logical-interface-id`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
        "comments": "",
        "x": 3288.883331298828,
        "y": 1754,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "51304efd.d01998",
        "type": "comment",
        "name": "This is it (should be)",
        "info": "",
        "comments": "",
        "x": 4510.883331298828,
        "y": 1037,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "8cad1e9f.c00c5",
        "type": "comment",
        "name": "This is it (should be)",
        "info": "",
        "comments": "",
        "x": 4502.883331298828,
        "y": 1127,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "a78c5989.f5207",
        "type": "set",
        "name": "set ROOT stuff",
        "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop + '-' + $tmp.aai.network-route-B.logical-interface-id`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
        "comments": "",
        "x": 3269.883331298828,
        "y": 2610,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "5f144ff2.8e6388",
        "type": "save",
        "name": "save connectivityA relationship to UNI-LEAF, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3401.883331298828,
        "y": 1860,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "f39161b8.c95518",
        "type": "save",
        "name": "save LEAF UNI in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-p-interface-short`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3308.883331298828,
        "y": 1807,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "8af2638e.140428",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2426.883331298828,
        "y": 185,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "b2d6bb83.745318",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 2360.883331298828,
        "y": 221,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "efb9627d.c73688",
        "type": "comment",
        "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
        "info": "",
        "comments": "",
        "x": 2545.883331298828,
        "y": 148,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "7954d1dd.93732",
        "type": "comment",
        "name": "NOT NEEDED ANYMORE?",
        "info": "",
        "comments": "",
        "x": 4036.883331298828,
        "y": 1838,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "48007645.c6e248",
        "type": "comment",
        "name": "NOT NEEDED ANYMORE?",
        "info": "",
        "comments": "",
        "x": 4014.883331298828,
        "y": 2708,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "e22daf3c.82e7c8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3441.8837890625,
        "y": 7480.999969482422,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "ba2fa114.256608",
        "type": "comment",
        "name": "START OF DELETE OPERATION",
        "info": "",
        "comments": "",
        "x": 3288.88330078125,
        "y": 2939.999969482422,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "cea904e8.518f5",
        "type": "save",
        "name": "delete LEAF uni resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3874.566650390625,
        "y": 3129.400115966797,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "8c6f82a5.234d18",
        "type": "save",
        "name": "get LEAF uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.LEAF.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.leafuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3245.566650390625,
        "y": 3059.400115966797,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "980e282b.21ebf",
                "62337ab9.8b1c5c",
                "ac27f627.a68b4"
            ]
        ]
    },
    {
        "id": "62337ab9.8b1c5c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3473.0576171875,
        "y": 3031.974090576172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a4aab25a.3920c"
            ]
        ]
    },
    {
        "id": "ac27f627.a68b4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3468.566650390625,
        "y": 3076.4000549316406,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "98b8996.e5a3fe8"
            ]
        ]
    },
    {
        "id": "a4aab25a.3920c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3635.629150390625,
        "y": 3031.259796142578,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "98b8996.e5a3fe8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3636.566650390625,
        "y": 3076.4000549316406,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "980e282b.21ebf",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3480.566650390625,
        "y": 3126.400115966797,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "50a09dc8.f07414"
            ]
        ]
    },
    {
        "id": "50a09dc8.f07414",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3632.88330078125,
        "y": 3129.999969482422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "839bae2a.5eaff8",
                "cea904e8.518f5",
                "8b478b6f.069ff8"
            ]
        ]
    },
    {
        "id": "839bae2a.5eaff8",
        "type": "set",
        "name": "set bwToBeDecreased tpid cvlan",
        "xml": "<set>\n<parameter name='bwToBeDecreased' value=\"`$tmp.aai.leafuni.data-source`\" />\n<parameter name='tpid' value='`$tmp.aai.leafuni.tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.leafuni.cvlan`' />\n\n\n",
        "comments": "",
        "x": 3877.566650390625,
        "y": 3072.400115966797,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "5a01c9ff.aa79b8",
        "type": "comment",
        "name": "Update ROOT UNI's bw",
        "info": "",
        "comments": "",
        "x": 3833.566650390625,
        "y": 3235.199920654297,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "e327e4d5.a4e2b",
        "type": "save",
        "name": "update ROOT UNI in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4435.566650390625,
        "y": 3340.199920654297,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "8b478b6f.069ff8",
        "type": "save",
        "name": "get root uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3825.56640625,
        "y": 3281.199920654297,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b9a017aa.207728",
                "1cc16855.ddb44",
                "cca9f79e.b7e85"
            ]
        ]
    },
    {
        "id": "1cc16855.ddb44",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4053.057373046875,
        "y": 3253.773895263672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "dd7a8720.93a36"
            ]
        ]
    },
    {
        "id": "cca9f79e.b7e85",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4048.56640625,
        "y": 3298.1998596191406,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "bfa4184f.a70f18"
            ]
        ]
    },
    {
        "id": "dd7a8720.93a36",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4215.62890625,
        "y": 3253.059600830078,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "bfa4184f.a70f18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4216.56640625,
        "y": 3298.1998596191406,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "51dfcdd2.a7dd1c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4213.56640625,
        "y": 3348.199920654297,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f4f7b843.eb2a48",
                "e327e4d5.a4e2b"
            ]
        ]
    },
    {
        "id": "b9a017aa.207728",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4044.56640625,
        "y": 3348.199920654297,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "51dfcdd2.a7dd1c"
            ]
        ]
    },
    {
        "id": "f4f7b843.eb2a48",
        "type": "set",
        "name": "set new bw",
        "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source - $bwToBeDecreased`' />\n",
        "comments": "",
        "x": 4395.567138671875,
        "y": 3290.199920654297,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "7302cb88.8e6284",
        "type": "comment",
        "name": "Delete LEAF UNI",
        "info": "",
        "comments": "",
        "x": 3825.88330078125,
        "y": 3013.999969482422,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "5b4e5a5d.18c714",
        "type": "set",
        "name": "set current-provider-id and current-cvlan-id",
        "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
        "comments": "",
        "x": 3311.749969482422,
        "y": 3792.6000366210938,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "a7a1bb48.b43ec8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3444.749969482422,
        "y": 3840.6000366210938,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "7b0989f8.4cdbd",
        "type": "switchNode",
        "name": "switch found-connectivity?",
        "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3266.749969482422,
        "y": 3892.4000854492188,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "723122ee.60b394",
                "1f79397f.9ef707"
            ]
        ]
    },
    {
        "id": "723122ee.60b394",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3459.749969482422,
        "y": 3893.4000854492188,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "fc2d1c85.b4eee"
            ]
        ]
    },
    {
        "id": "fc2d1c85.b4eee",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"LEAF CONN DOES NOT EXIST BUT IT SHOULD BE.\" />\n\n",
        "comments": "",
        "x": 3603.749969482422,
        "y": 3889.6000366210938,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "1f79397f.9ef707",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3463.749969482422,
        "y": 3937.4000854492188,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6275f59c.0890b4"
            ]
        ]
    },
    {
        "id": "6275f59c.0890b4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3602.749969482422,
        "y": 3932.4000854492188,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "810f11d9.c59a7",
                "852c933b.a9e98",
                "dd94c766.3611e8"
            ]
        ]
    },
    {
        "id": "810f11d9.c59a7",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.the-connectivity.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3853.149627685547,
        "y": 3940.9166870117188,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "4f7025f7.9e0214"
            ]
        ]
    },
    {
        "id": "4f7025f7.9e0214",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.the-connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4075.149627685547,
        "y": 3918.9166870117188,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c1dfdbf7.de4f68"
            ]
        ]
    },
    {
        "id": "c1dfdbf7.de4f68",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4235.149139404297,
        "y": 3898.9166870117188,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "811e3163.5710b"
            ]
        ]
    },
    {
        "id": "7642582a.7718e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4388.149658203125,
        "y": 3879.916717529297,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b019880c.9753e",
                "f61cef0c.bbc238"
            ]
        ]
    },
    {
        "id": "b019880c.9753e",
        "type": "set",
        "name": "set tmp.stillHasUni to TRUE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='true' />\n",
        "comments": "",
        "x": 4584.649871826172,
        "y": 3847.9999389648438,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "852c933b.a9e98",
        "type": "set",
        "name": "set tmp.stillHasUn tmp.keepVPNBs to FALSE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='false' />\n<parameter name='tmp.keepVPNBs' value='false' />\n",
        "comments": "",
        "x": 3959.64990234375,
        "y": 3859.999969482422,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "dd94c766.3611e8",
        "type": "switchNode",
        "name": "switch tmp.keepVPNBs?",
        "xml": "\n<switch test=\"`$tmp.keepVPNBs`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3767.64990234375,
        "y": 4281.000213623047,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "73d16500.5c0ae4",
                "d3a70ceb.c50b78"
            ]
        ]
    },
    {
        "id": "f61cef0c.bbc238",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4552.88330078125,
        "y": 3915.999969482422,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "d3a70ceb.c50b78",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 154.65066528320312,
        "y": 5345.000457763672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "4a51985e.972e68"
            ]
        ]
    },
    {
        "id": "73d16500.5c0ae4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3988.650634765625,
        "y": 4383.000213623047,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "25f72ad2.47990e"
            ]
        ]
    },
    {
        "id": "25f72ad2.47990e",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4131.650634765625,
        "y": 4379.000213623047,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6e8bafff.64fc88",
                "dcf23a76.fb4f5",
                "f889b68d.197d9",
                "69806916.62139",
                "32064458.33cdf4",
                "9c7a66fb.560d48",
                "2b19eccb.73cf0c",
                "987f769f.1ba7f8"
            ]
        ]
    },
    {
        "id": "316316fc.4e3ac2",
        "type": "comment",
        "name": "keepVPNBs == false, then check tmp.stillHasUni",
        "info": "(2) keepVPNBs == false, means there are no other UNIs in this\nsame domain and same connectivity that share the same OLT node.\n\ncheck if tmp.stillHasUni is True or False?\n\nif TRUE --> means this domain (connectivity) still has other UNIs\n- delete VPNBs\n- delete LEAF UNI in AAI -- DONE\n- upadte bw in ROOT UNI -- DONE\n- delete LEAF UNI in LEAF ethernet service PNC\n- change ROOT conn status to Modified\n--- mark LEAF connectivity as Modified because the underlay OTN tunnel list of this connectivity is now different\n\nif FALSE --> means this domain (connectivity) has no other UNIs\n\nif MMstillHasUni == TRUE, means scenario (3), else, means scenario (4)\n\n(3) & (4) both:\n- delete VPNBs\n- delete LEAF connectivity\n- delete LEAF Ethernet Service from PNC\n\n(3) only:\n- change ROOT conn status to Modified\n- Keep the middle-man-conn and DON'T delete\n\n(4) only:\n- delete ROOT UNI\n- delete ROOT conn from AAI\n- delete ROOT Ethernet Service from PNC\n- delete middle-man-conn from AAI\n\n",
        "comments": "",
        "x": 181,
        "y": 5301.000457763672,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "32c3f6b1.304972",
        "type": "comment",
        "name": "There are still other UNIs in this connectivity that share same OLT node. Only update bw of the vpn-bindings involved",
        "info": "(1) keepVPNBs == true, means there are still other UNIs in this\nsame domain and same connectivity that share the same OLT node.\n\n- Only update bw of the vpn-bindings involved -- DONE\n- upadte bw in ROOT UNI -- DONE\n- change ROOT conn status to Modified -- DONE\n- delete LEAF UNI in AAI -- DONE\n- delete LEAF UNI in LEAF ethernet service PNC -- DONE\n- DON'T delete the connectivities of LEAF and ROOT -- DONE\nAlso update the ethernet services",
        "comments": "",
        "x": 4007.884033203125,
        "y": 4346.000213623047,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "7adbe8ea.ad8838",
        "type": "set",
        "name": "set srcTtp OTN layer",
        "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
        "comments": "",
        "x": 4820.667724609375,
        "y": 4536.783660888672,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "ee3b3067.d425a8",
        "type": "switchNode",
        "name": "switch provider-id domainA",
        "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5165.667724609375,
        "y": 4398.783660888672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "76f6067d.796678"
            ]
        ]
    },
    {
        "id": "fc93f53c.f481d",
        "type": "for",
        "name": "for netwidx..allNetworksList_length",
        "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 4872.667724609375,
        "y": 4392.783660888672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "ee3b3067.d425a8"
            ]
        ]
    },
    {
        "id": "3f4440b0.d66f8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5127.667724609375,
        "y": 4349.783660888672,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "27f65669.8e0af2",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
        "comments": "",
        "x": 4816.667724609375,
        "y": 4444.783660888672,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "410c70eb.214758",
        "type": "set",
        "name": "set tmp.pce-src-node",
        "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
        "comments": "",
        "x": 4824.667724609375,
        "y": 4489.783660888672,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "e258b42d.2c46d8",
        "type": "set",
        "name": "unset otnTopoIdSrc",
        "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
        "comments": "",
        "x": 4821.667724609375,
        "y": 4342.783660888672,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "76f6067d.796678",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5074.667724609375,
        "y": 4466.783660888672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "acca9da1.cc4618"
            ]
        ]
    },
    {
        "id": "acca9da1.cc4618",
        "type": "switchNode",
        "name": "switch te-topo-id",
        "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5259.667724609375,
        "y": 4465.783660888672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f448b4f8.c120e"
            ]
        ]
    },
    {
        "id": "f448b4f8.c120e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5451.667724609375,
        "y": 4468.783660888672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "19985725.a5eca1"
            ]
        ]
    },
    {
        "id": "19985725.a5eca1",
        "type": "set",
        "name": "set otnTopoIdSrc",
        "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
        "comments": "",
        "x": 5623.667724609375,
        "y": 4464.783660888672,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "ab4edace.9f77f",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4999.667724609375,
        "y": 4579.783660888672,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "6e8bafff.64fc88",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4516.667724609375,
        "y": 4364.783660888672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "30c992c8.4db58e",
                "c2728b20.458338",
                "27f65669.8e0af2",
                "410c70eb.214758",
                "7adbe8ea.ad8838",
                "fc93f53c.f481d",
                "ab4edace.9f77f"
            ]
        ]
    },
    {
        "id": "2e6e6c8a.c892fc",
        "type": "comment",
        "name": "The following section is to find srcTtp OTN layer (its long name)",
        "info": "The following section is to find srcTtp OTN layer (its long name)",
        "comments": "",
        "x": 4501.667724609375,
        "y": 4298.783660888672,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "c2728b20.458338",
        "type": "get-resource",
        "name": "get-resource network-resources-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
        "comments": "",
        "outputs": 1,
        "x": 4880.667724609375,
        "y": 4285.783660888672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "cd41e347.c8a4d",
                "5bcb3237.45bf24",
                "3f4440b0.d66f8"
            ]
        ]
    },
    {
        "id": "cd41e347.c8a4d",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5116.667724609375,
        "y": 4268.783660888672,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "5bcb3237.45bf24",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5113.667724609375,
        "y": 4309.783660888672,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "30c992c8.4db58e",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
        "comments": "",
        "x": 4829.667724609375,
        "y": 4242.783660888672,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "dcf23a76.fb4f5",
        "type": "set",
        "name": "unset tmp.aai.all-vpn-bindings",
        "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value='' />\n",
        "comments": "",
        "x": 4336.667724609375,
        "y": 4697.183563232422,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "f549a24.b4e97e",
        "type": "comment",
        "name": "find all OTNs that have srcTtpOtnLayer and decrease their bandwidth",
        "info": "",
        "comments": "",
        "x": 4459.968017578125,
        "y": 4736.183563232422,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "f889b68d.197d9",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 4357.968017578125,
        "y": 4771.183563232422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f7fe6bc0.f9d1a8",
                "b939c13a.bd148",
                "63930841.13965"
            ]
        ]
    },
    {
        "id": "f7fe6bc0.f9d1a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4562.968017578125,
        "y": 4768.183563232422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "85787fa.a0f0d8"
            ]
        ]
    },
    {
        "id": "b939c13a.bd148",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4546.458984375,
        "y": 4829.757598876953,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c496c4d4.109c78"
            ]
        ]
    },
    {
        "id": "63930841.13965",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4543.968017578125,
        "y": 4873.183563232422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "bb1ebaa9.c2fac"
            ]
        ]
    },
    {
        "id": "85787fa.a0f0d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4730.96826171875,
        "y": 4763.183563232422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6a7a29b4.6659c"
            ]
        ]
    },
    {
        "id": "c496c4d4.109c78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4709.0303955078125,
        "y": 4830.0433349609375,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "bb1ebaa9.c2fac",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4710.968017578125,
        "y": 4872.183563232422,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "6a7a29b4.6659c",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4968.96826171875,
        "y": 4768.183563232422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2e12f618.b174b2"
            ]
        ]
    },
    {
        "id": "2e12f618.b174b2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5202.968017578125,
        "y": 4775.183563232422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "1b37b556.addac3"
            ]
        ]
    },
    {
        "id": "3df57bb4.1a97cc",
        "type": "comment",
        "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
        "info": "",
        "comments": "",
        "x": 5119.783935546875,
        "y": 4846.349884033203,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "1b37b556.addac3",
        "type": "switchNode",
        "name": "switch ops-note is srcTtpOtnLayer",
        "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5063.783935546875,
        "y": 4895.349884033203,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c62dd674.fd73f",
                "37627bf2.c03934"
            ]
        ]
    },
    {
        "id": "37627bf2.c03934",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5306.784423828125,
        "y": 4936.349395751953,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "c62dd674.fd73f",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5317.7841796875,
        "y": 4893.349609375,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b2c9765c.25999"
            ]
        ]
    },
    {
        "id": "a5ecb13c.9c7548",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5544.767578125,
        "y": 4900.76611328125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "78a5ede3.09cc54",
                "aecf8872.1d5c4",
                "657d43b1.13c254"
            ]
        ]
    },
    {
        "id": "9d348107.818aa",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='vpnbridx' start='0' end='`$tmp.aai.the-vpn-binding.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5709.8173828125,
        "y": 4785.766571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "99f28c5d.95abe8"
            ]
        ]
    },
    {
        "id": "99f28c5d.95abe8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5901.8173828125,
        "y": 4774.766815185547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "9a75bdf9.10641"
            ]
        ]
    },
    {
        "id": "78a5ede3.09cc54",
        "type": "set",
        "name": "unset tmp.aai.the-vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
        "comments": "",
        "x": 5658.334228515625,
        "y": 4675.983612060547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "aecf8872.1d5c4",
        "type": "set",
        "name": "set tmp.aai.the-vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
        "comments": "",
        "x": 5650.334228515625,
        "y": 4724.983612060547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "657d43b1.13c254",
        "type": "save",
        "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.the-vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher - $bwToBeDecreased`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5881.751220703125,
        "y": 4906.149627685547,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "f1c96228.a5339",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5833.401123046875,
        "y": 4953.466522216797,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "75d6304c.089cd8",
        "type": "comment",
        "name": "decrease the bw of the-vpn-binding and change status to modified",
        "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
        "comments": "",
        "x": 5905.751220703125,
        "y": 4867.149627685547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "9a75bdf9.10641",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6083.8173828125,
        "y": 4753.766815185547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b5ad886.81af5f8"
            ]
        ]
    },
    {
        "id": "b5ad886.81af5f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6245.8173828125,
        "y": 4742.766815185547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6f94f7eb.f4d818",
                "269fac18.2bb21c"
            ]
        ]
    },
    {
        "id": "6f94f7eb.f4d818",
        "type": "set",
        "name": "unset tmp.the-connectivity",
        "xml": "<set>\n<parameter name='tmp.the-connectivity.' value='' />\n",
        "comments": "",
        "x": 6442.8173828125,
        "y": 4671.766815185547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "269fac18.2bb21c",
        "type": "set",
        "name": "set tmp.the-connectivity",
        "xml": "<set>\n<parameter name='tmp.the-connectivity.' value='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].relationship-data[0].relationship-value`' />\n",
        "comments": "",
        "x": 6440.2841796875,
        "y": 4770.983612060547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "a984d0c7.8574d",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3097.800048828125,
        "y": 3229.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "49347bae.3e2974",
        "type": "switchNode",
        "name": "switch found-middle-man?",
        "xml": "<switch test='`$found-middle-man`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2974.800048828125,
        "y": 3339.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "7b835f88.3b076",
                "7490c0ec.4dda5"
            ]
        ]
    },
    {
        "id": "7b835f88.3b076",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3158.800048828125,
        "y": 3318.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "5b141b7a.8f28f4"
            ]
        ]
    },
    {
        "id": "5b141b7a.8f28f4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3301.800048828125,
        "y": 3318.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "94596646.a7e4f"
            ]
        ]
    },
    {
        "id": "94596646.a7e4f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"LEAF CONN DOES NOT EXIST BUT IT SHOULD BE.\" />\n\n",
        "comments": "",
        "x": 3477.800048828125,
        "y": 3316.800018310547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "7490c0ec.4dda5",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3156.800048828125,
        "y": 3373.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a3855d70.dbb87"
            ]
        ]
    },
    {
        "id": "a3855d70.dbb87",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3003.800048828125,
        "y": 3506.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "5b4e5a5d.18c714",
                "a7a1bb48.b43ec8",
                "7b0989f8.4cdbd",
                "b98b1ba5.429c1",
                "37657916.72f08e",
                "cc0c619e.32de58"
            ]
        ]
    },
    {
        "id": "a5a62e88.7d802",
        "type": "comment",
        "name": "Find LEAF connectivity",
        "info": "",
        "comments": "",
        "x": 3225.88330078125,
        "y": 3746.999969482422,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "b98b1ba5.429c1",
        "type": "set",
        "name": "set tmp.MMstillHasUni to FALSE",
        "xml": "<set>\n<parameter name='tmp.MMstillHasUni' value='false' />\n",
        "comments": "",
        "x": 3308.333251953125,
        "y": 3519.800018310547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "37657916.72f08e",
        "type": "for",
        "name": "for each relationship of middle-man-conn",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$middle-man-conn.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3306.8330078125,
        "y": 3565.716766357422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "1a4c3937.32a93f"
            ]
        ]
    },
    {
        "id": "1a4c3937.32a93f",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$middle-man-conn.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3569.8330078125,
        "y": 3560.716766357422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "95d80a37.7eef5"
            ]
        ]
    },
    {
        "id": "95d80a37.7eef5",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3729.83251953125,
        "y": 3540.716766357422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "9608373.19689c8"
            ]
        ]
    },
    {
        "id": "d9ea756c.06e5e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4498.833740234375,
        "y": 3575.716766357422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "29278691.db117a",
                "29bad35d.650d14",
                "a6af6c62.1a6b5"
            ]
        ]
    },
    {
        "id": "29278691.db117a",
        "type": "set",
        "name": "set tmp.MMstillHasUni to TRUE",
        "xml": "<set>\n<parameter name='tmp.MMstillHasUni' value='true' />\n",
        "comments": "",
        "x": 4738.334228515625,
        "y": 3524.800018310547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "29bad35d.650d14",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4671.567657470703,
        "y": 3597.800048828125,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "4465f9ec.e3dbb",
        "type": "comment",
        "name": "Find LEAF and ROOT connectivities and remove UNI from PNC",
        "info": "",
        "comments": "",
        "x": 4432.88427734375,
        "y": 5128.000213623047,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "69806916.62139",
        "type": "set",
        "name": "set tmp.leafconn.",
        "xml": "<set>\n<parameter name='tmp.leafconn.' value='`$tmp.the-connectivity.`' />\n",
        "comments": "",
        "x": 4331.317138671875,
        "y": 5179.916717529297,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "2b19eccb.73cf0c",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4482.317138671875,
        "y": 5622.916717529297,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "987f769f.1ba7f8",
        "type": "switchNode",
        "name": "switch found-root-connectivity",
        "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4297.317138671875,
        "y": 5689.916717529297,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c7979e94.4deb18",
                "5e8c956f.69a854"
            ]
        ]
    },
    {
        "id": "c7979e94.4deb18",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4562.317138671875,
        "y": 5674.916717529297,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "4a28d2a5.936924"
            ]
        ]
    },
    {
        "id": "5e8c956f.69a854",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4558.317138671875,
        "y": 5722.916717529297,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "213fbf95.d03c8"
            ]
        ]
    },
    {
        "id": "4a28d2a5.936924",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4718.317138671875,
        "y": 5670.916717529297,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a96c5a1a.d66bf"
            ]
        ]
    },
    {
        "id": "213fbf95.d03c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
        "comments": "",
        "x": 4706.317138671875,
        "y": 5717.916717529297,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "4e8315f.b9446ec",
        "type": "set",
        "name": "set tmp.rootconn.",
        "xml": "<set>\n<parameter name='tmp.rootconn.' value=\"`$tmp.aai.ROOT.connectivity.`\" />\n\n\n",
        "comments": "",
        "x": 5138.3173828125,
        "y": 5612.916717529297,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "aa7d5d8.eb8bca",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.leafconn.access-provider-id + '-clientId-' +\n                                                   $tmp.leafconn.access-client-id + '-topologyId-' +\n                                                   $tmp.leafconn.access-topology-id + '-nodeId-' +\n                                                   $tmp.leafconn.access-node-id`\" />\n",
        "comments": "",
        "x": 4540.734130859375,
        "y": 5209.200408935547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "32064458.33cdf4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4311.734130859375,
        "y": 5298.200408935547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "aa7d5d8.eb8bca",
                "3165c974.539e06"
            ]
        ]
    },
    {
        "id": "3165c974.539e06",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4547.734130859375,
        "y": 5291.200408935547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "4cddcbba.102194",
                "d5cd17da.64e6a",
                "9d33157c.077f3"
            ]
        ]
    },
    {
        "id": "4cddcbba.102194",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4743.2342529296875,
        "y": 5243.200408935547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "658952ec.d50f2c"
            ]
        ]
    },
    {
        "id": "d5cd17da.64e6a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4735.2342529296875,
        "y": 5298.200408935547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f87d3f72.db25b"
            ]
        ]
    },
    {
        "id": "658952ec.d50f2c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4887.6165771484375,
        "y": 5242.8560791015625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "5e03d50d.e31174"
            ]
        ]
    },
    {
        "id": "5e03d50d.e31174",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5071.734130859375,
        "y": 5241.200408935547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "81fcac6e.c2cbb"
            ]
        ]
    },
    {
        "id": "81fcac6e.c2cbb",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5266.734130859375,
        "y": 5241.200408935547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "23740bd0.c54174"
            ]
        ]
    },
    {
        "id": "9d33157c.077f3",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4740.2342529296875,
        "y": 5355.200408935547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d477847d.474a8"
            ]
        ]
    },
    {
        "id": "d477847d.474a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4892.2342529296875,
        "y": 5356.200408935547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "f87d3f72.db25b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4903.2342529296875,
        "y": 5299.200408935547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "e3023af7.680d7",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5648.734130859375,
        "y": 5245.200408935547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "31c1897e.fbb116",
                "b906e4f7.66368",
                "ac0e0ca2.883cb"
            ]
        ]
    },
    {
        "id": "23740bd0.c54174",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5469.734130859375,
        "y": 5245.200408935547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "e3023af7.680d7"
            ]
        ]
    },
    {
        "id": "b906e4f7.66368",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5854.734130859375,
        "y": 5258.200408935547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "df7977a7.075b8",
                "f17bde95.882498",
                "61e2d23e.358d1c"
            ]
        ]
    },
    {
        "id": "31c1897e.fbb116",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5884.734130859375,
        "y": 5206.200408935547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "df7977a7.075b8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6064.734130859375,
        "y": 5249.200408935547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "7ac6fe75.62b4e"
            ]
        ]
    },
    {
        "id": "f17bde95.882498",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6056.734130859375,
        "y": 5304.200408935547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "671c9934.2cd48"
            ]
        ]
    },
    {
        "id": "61e2d23e.358d1c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6061.734130859375,
        "y": 5361.200408935547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a6615570.50c968"
            ]
        ]
    },
    {
        "id": "a6615570.50c968",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6213.734130859375,
        "y": 5362.200408935547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "671c9934.2cd48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 6224.734130859375,
        "y": 5307.200408935547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "7ac6fe75.62b4e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6209.116455078125,
        "y": 5246.8560791015625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6989c737.25d068"
            ]
        ]
    },
    {
        "id": "6989c737.25d068",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 6423.734130859375,
        "y": 5243.200408935547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "ac0e0ca2.883cb",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 5804.734130859375,
        "y": 5322.200408935547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "9c7a66fb.560d48",
        "type": "execute",
        "name": "execute RestApiCallNode Delete LEAF UNI of ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.leafconn.etht-svc-name + '/etht-svc-end-points=' + $tmp.LEAF.uni-p-interface-long`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4453.234375,
        "y": 5402.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "1e28e096.7499f7",
                "cc9e5694.f9d17"
            ]
        ]
    },
    {
        "id": "1e28e096.7499f7",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4813.734130859375,
        "y": 5410.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "906e379.3b93848"
            ]
        ]
    },
    {
        "id": "906e379.3b93848",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 4971.734130859375,
        "y": 5410.800018310547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "90be5ca9.028288",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4975.234130859375,
        "y": 5450.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "cc9e5694.f9d17",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4817.734130859375,
        "y": 5450.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "90be5ca9.028288"
            ]
        ]
    },
    {
        "id": "921095c8.3bc23",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5126.451171875,
        "y": 5664.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "fb4f4697.4dc5f",
                "7ea31674.99e1d8"
            ]
        ]
    },
    {
        "id": "7ea31674.99e1d8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5368.450927734375,
        "y": 5614.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "10743e5b.0b6182",
                "5598183a.212ab",
                "9c9074e9.bbaff8"
            ]
        ]
    },
    {
        "id": "10743e5b.0b6182",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5563.951171875,
        "y": 5548.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "767943d2.64a144"
            ]
        ]
    },
    {
        "id": "5598183a.212ab",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5559.951171875,
        "y": 5604.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "74a77564.40268c"
            ]
        ]
    },
    {
        "id": "767943d2.64a144",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5708.3333740234375,
        "y": 5566.4556884765625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "10049f5.85364e1"
            ]
        ]
    },
    {
        "id": "10049f5.85364e1",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5892.450927734375,
        "y": 5564.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "72e5612b.857e68"
            ]
        ]
    },
    {
        "id": "9c9074e9.bbaff8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5569.951171875,
        "y": 5649.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "952a99b1.f3f0e"
            ]
        ]
    },
    {
        "id": "952a99b1.f3f0e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5748.951171875,
        "y": 5665.800018310547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "74a77564.40268c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5730.951171875,
        "y": 5617.800018310547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "f64c3a10.6bbc38",
        "type": "execute",
        "name": "execute RestApiCallNode Delete UNI of ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.rootconn.etht-svc-name + '/etht-svc-end-points=' + $tmp.ROOT.uni-p-interface-long`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5279.951171875,
        "y": 5720.399627685547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "cd722628.03685",
                "76458c1b.1a62ac"
            ]
        ]
    },
    {
        "id": "cd722628.03685",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5628.451171875,
        "y": 5702.399627685547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d04dd9dc.2f2dc8"
            ]
        ]
    },
    {
        "id": "d04dd9dc.2f2dc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 5884.451171875,
        "y": 5705.399627685547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "1006a530.30b813",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5836.951171875,
        "y": 5746.399627685547,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "76458c1b.1a62ac",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5638.451171875,
        "y": 5751.399627685547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "1006a530.30b813"
            ]
        ]
    },
    {
        "id": "fb4f4697.4dc5f",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.rootconn.access-provider-id + '-clientId-' +\n                                                   $tmp.rootconn.access-client-id + '-topologyId-' +\n                                                   $tmp.rootconn.access-topology-id + '-nodeId-' +\n                                                   $tmp.rootconn.access-node-id`\" />\n",
        "comments": "",
        "x": 5361.450927734375,
        "y": 5532.800018310547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "72e5612b.857e68",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6087.450927734375,
        "y": 5564.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "3625dda5.38707a"
            ]
        ]
    },
    {
        "id": "402ab8f9.3aa18",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6469.450927734375,
        "y": 5568.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "4697e13e.13b02",
                "6c3ba6ac.e7c21",
                "34e0c57a.0e712a"
            ]
        ]
    },
    {
        "id": "3625dda5.38707a",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6290.450927734375,
        "y": 5568.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "402ab8f9.3aa18"
            ]
        ]
    },
    {
        "id": "6c3ba6ac.e7c21",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6675.450927734375,
        "y": 5581.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2e31a205.2611fe",
                "c9f11bf6.38bb98",
                "99cec3e1.6d2f68"
            ]
        ]
    },
    {
        "id": "4697e13e.13b02",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6705.450927734375,
        "y": 5529.800018310547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "2e31a205.2611fe",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6885.450927734375,
        "y": 5572.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2ba283a1.e08d44"
            ]
        ]
    },
    {
        "id": "c9f11bf6.38bb98",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6877.450927734375,
        "y": 5627.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "3af9cd94.f12ff2"
            ]
        ]
    },
    {
        "id": "99cec3e1.6d2f68",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6882.450927734375,
        "y": 5684.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c501098b.50507"
            ]
        ]
    },
    {
        "id": "c501098b.50507",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7034.450927734375,
        "y": 5685.800018310547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "3af9cd94.f12ff2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7045.450927734375,
        "y": 5630.800018310547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "2ba283a1.e08d44",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7029.833251953125,
        "y": 5570.4556884765625,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "bca9e0da.72619"
            ]
        ]
    },
    {
        "id": "bca9e0da.72619",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7244.450927734375,
        "y": 5566.800018310547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "34e0c57a.0e712a",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6625.450927734375,
        "y": 5645.800018310547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "9608373.19689c8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3854.88330078125,
        "y": 3534.999969482422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6e45c64.2629238",
                "354c7fc8.6d8de"
            ]
        ]
    },
    {
        "id": "6e45c64.2629238",
        "type": "set",
        "name": "set tmp.mmUNI-id-long",
        "xml": "<set>\n<parameter name='tmp.mmUNI-id-long' value='`$middle-man-conn.relationship-list.relationship[$cridx].relationship-data[0].relationship-value`' />\n",
        "comments": "",
        "x": 4045.466552734375,
        "y": 3477.800018310547,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "354c7fc8.6d8de",
        "type": "switchNode",
        "name": "switch tmp.mmUNI-id-long != ROOT UNI",
        "xml": "\n<switch test=\"`$tmp.mmUNI-id-long != $tmp.ROOT.uni-p-interface-long`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4092.466552734375,
        "y": 3548.800018310547,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6bdb2c16.23fc7c",
                "5820e4e6.95b47c"
            ]
        ]
    },
    {
        "id": "6bdb2c16.23fc7c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4330.884033203125,
        "y": 3507.999969482422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d4fcba65.f8c8f"
            ]
        ]
    },
    {
        "id": "5820e4e6.95b47c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4337.884246826172,
        "y": 3564.9999389648438,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d9ea756c.06e5e"
            ]
        ]
    },
    {
        "id": "d4fcba65.f8c8f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4458.884521484375,
        "y": 3503.999969482422,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "cc0c619e.32de58",
        "type": "set",
        "name": "set tmp.MMonlyHasROOT to TRUE",
        "xml": "<set>\n<parameter name='tmp.MMonlyHasROOT' value='true' />\n",
        "comments": "",
        "x": 3314.083251953125,
        "y": 3462.400115966797,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "a6af6c62.1a6b5",
        "type": "set",
        "name": "set tmp.MMonlyHasROOT to FALSE",
        "xml": "<set>\n<parameter name='tmp.MMonlyHasROOT' value='false' />\n",
        "comments": "",
        "x": 4727.9169921875,
        "y": 3468.400115966797,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "811e3163.5710b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4407.6669921875,
        "y": 3984.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "aa9298d8.acde8",
                "a5e5763f.58bb2"
            ]
        ]
    },
    {
        "id": "aa9298d8.acde8",
        "type": "set",
        "name": "set tmp.uni.id",
        "xml": "<set>\n<parameter name='tmp.uni.id' value='`$tmp.the-connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value`' />\n",
        "comments": "",
        "x": 4580.5498046875,
        "y": 3980.276336669922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "a5e5763f.58bb2",
        "type": "save",
        "name": "get uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.uni.id\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.uni\" >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4583.5498046875,
        "y": 4027.276336669922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "4df6bcf4.a4f44c",
                "89771ed8.977b78",
                "d1de1d5b.be978"
            ]
        ]
    },
    {
        "id": "4df6bcf4.a4f44c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4755.5498046875,
        "y": 4011.276336669922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f65d0563.51b9e"
            ]
        ]
    },
    {
        "id": "89771ed8.977b78",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4756.040771484375,
        "y": 4056.850372314453,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "d1de1d5b.be978",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4756.5498046875,
        "y": 4097.276336669922,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "f65d0563.51b9e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4916.5498046875,
        "y": 4007.276336669922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "41e51ce8.c7bbd4",
                "9fcba756.d0c298",
                "99817ef0.1be558"
            ]
        ]
    },
    {
        "id": "d2f62a11.bbccd",
        "type": "comment",
        "name": "find the node part of the uni.id (uni-tp-id-node-part)",
        "info": "",
        "comments": "",
        "x": 5249.5498046875,
        "y": 3938.276336669922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "9fcba756.d0c298",
        "type": "execute",
        "name": "execute split id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.uni.id`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-uni-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5184.5498046875,
        "y": 3995.276336669922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "ad91a307.53dc18",
                "66b6c9a.ce41eb8"
            ]
        ]
    },
    {
        "id": "66b6c9a.ce41eb8",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5407.5498046875,
        "y": 3981.276336669922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f5696a58.3dcae"
            ]
        ]
    },
    {
        "id": "ad91a307.53dc18",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5409.5498046875,
        "y": 4014.276336669922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "cd5f81cd.b325a8"
            ]
        ]
    },
    {
        "id": "f5696a58.3dcae",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5555.5498046875,
        "y": 3974.276336669922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "520c18e.4c672e8"
            ]
        ]
    },
    {
        "id": "cd5f81cd.b325a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5552.5498046875,
        "y": 4011.276336669922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "520c18e.4c672e8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.uni.pnf-name' value=\"`$param-prefix-uni-pnfName[0] + '-' +\n                                                   $param-prefix-uni-pnfName[1] + '-' +\n                                                   $param-prefix-uni-pnfName[2] + '-' +\n                                                   $param-prefix-uni-pnfName[3] + '-' +\n                                                   $param-prefix-uni-pnfName[4] + '-' +\n                                                   $param-prefix-uni-pnfName[5] + '-' +\n                                                   $param-prefix-uni-pnfName[6] + '-' +\n                                                   $param-prefix-uni-pnfName[7] + '-' +\n                                                   $param-prefix-uni-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5732.5498046875,
        "y": 3974.276336669922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "41e51ce8.c7bbd4",
        "type": "switchNode",
        "name": "switch uni-tp-id-node-part is the same as the LEAF node",
        "xml": "<switch test='`$tmp.uni.pnf-name == $tmp.LEAF.pnf-name-long`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5228.5498046875,
        "y": 4129.276336669922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f5a5405e.ab64e8",
                "39efe4c8.977e5c"
            ]
        ]
    },
    {
        "id": "f5a5405e.ab64e8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5509.5498046875,
        "y": 4106.276336669922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "76dcdb2b.58523c"
            ]
        ]
    },
    {
        "id": "39efe4c8.977e5c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5502.5498046875,
        "y": 4165.276336669922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "e34b9d00.f34da8"
            ]
        ]
    },
    {
        "id": "76dcdb2b.58523c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5639.5498046875,
        "y": 4110.276336669922,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "e34b9d00.f34da8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5644.5498046875,
        "y": 4164.276336669922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d870e573.0525d",
                "daec44c5.c4ca2"
            ]
        ]
    },
    {
        "id": "d870e573.0525d",
        "type": "set",
        "name": "set no-pce-call",
        "xml": "<set>\n<parameter name='no-pce-call' value=\"true\" />\n",
        "comments": "",
        "x": 5836.5498046875,
        "y": 4131.276336669922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "77e6d570.0136ec",
        "type": "set",
        "name": "set middle-man-conn",
        "xml": "<set>\n<parameter name='middle-man-conn.' value='`$tmp.aai.all-connectivities.connectivity[$connidx].`' />\n",
        "comments": "",
        "x": 5852.5498046875,
        "y": 4183.276336669922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "daec44c5.c4ca2",
        "type": "set",
        "name": "set tmp.stillHasUni and tmp.keepVPNBs to TRUE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='true' />\n<parameter name='tmp.keepVPNBs' value='true' />\n",
        "comments": "",
        "x": 5870.83349609375,
        "y": 4252.866668701172,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "99817ef0.1be558",
        "type": "set",
        "name": "set tmp.stillHasUni to TRUE",
        "xml": "<set>\n<parameter name='tmp.stillHasUni' value='true' />\n",
        "comments": "",
        "x": 5147.533203125,
        "y": 4078.766571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "4a51985e.972e68",
        "type": "switchNode",
        "name": "switch tmp.stillHasUni?",
        "xml": "\n<switch test=\"`$tmp.stillHasUni`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 383.7339172363281,
        "y": 5348.966278076172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "35e41a11.58bd1e",
                "8fea1632.f2d7a"
            ]
        ]
    },
    {
        "id": "2a89b0c9.686c5",
        "type": "save",
        "name": "get root uni from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 4288.516357421875,
        "y": 5512.850067138672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "11eb64db.01f3fb",
                "edc304ba.5ec56",
                "e3707812.01b138"
            ]
        ]
    },
    {
        "id": "8fd56902.a16fd8",
        "type": "comment",
        "name": "Update ROOT UNI's bw -- ALREADY DONE",
        "info": "",
        "comments": "",
        "x": 4286.516845703125,
        "y": 5464.850311279297,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "fe5a805b.6befb8",
        "type": "save",
        "name": "update ROOT UNI in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4903.5166015625,
        "y": 5582.850311279297,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "edc304ba.5ec56",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4506.007568359375,
        "y": 5483.424285888672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d06cf255.10cad"
            ]
        ]
    },
    {
        "id": "e3707812.01b138",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4501.5166015625,
        "y": 5527.850250244141,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c2ada4d7.cf23a"
            ]
        ]
    },
    {
        "id": "d06cf255.10cad",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4668.5791015625,
        "y": 5482.709991455078,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "c2ada4d7.cf23a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4669.5166015625,
        "y": 5527.850250244141,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "487370c3.c16b7",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4666.5166015625,
        "y": 5577.850311279297,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6c262f9d.59d16",
                "fe5a805b.6befb8"
            ]
        ]
    },
    {
        "id": "11eb64db.01f3fb",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4497.5166015625,
        "y": 5577.850311279297,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "487370c3.c16b7"
            ]
        ]
    },
    {
        "id": "6c262f9d.59d16",
        "type": "set",
        "name": "set new bw",
        "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source - $bwToBeDecreased`' />\n",
        "comments": "",
        "x": 4859.517578125,
        "y": 5502.850311279297,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "472764ad.0e5da4",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 5288.216796875,
        "y": 5440.616912841797,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "a96c5a1a.d66bf",
        "type": "save",
        "name": "update ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 5314,
        "y": 5482.817108154297,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "35e41a11.58bd1e",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 567.8836059570312,
        "y": 5399.999969482422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "49ab1cdc.2b3dfc"
            ]
        ]
    },
    {
        "id": "8fea1632.f2d7a",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 550.883544921875,
        "y": 5321.999969482422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "44e1ece4.47debc"
            ]
        ]
    },
    {
        "id": "71bd2e28.fdc428",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 679.8833923339844,
        "y": 4408.999694824219,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "ab47ddf.140532",
                "d3485e4a.cbde48",
                "964a9d6b.511ef",
                "58993466.bcba34",
                "b72e55ab.bc6bd8",
                "8d45971b.519e08"
            ]
        ]
    },
    {
        "id": "ab47ddf.140532",
        "type": "set",
        "name": "set tmp.leafconn.",
        "xml": "<set>\n<parameter name='tmp.leafconn.' value='`$tmp.the-connectivity.`' />\n",
        "comments": "",
        "x": 931.5667419433594,
        "y": 4387.049499511719,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "83fd3013.a6f008",
        "type": "comment",
        "name": "Find LEAF and ROOT connectivities and remove UNI from PNC",
        "info": "",
        "comments": "",
        "x": 1033.1338806152344,
        "y": 4335.132995605469,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "8b20d7ab.715e18",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.leafconn.access-provider-id + '-clientId-' +\n                                                   $tmp.leafconn.access-client-id + '-topologyId-' +\n                                                   $tmp.leafconn.access-topology-id + '-nodeId-' +\n                                                   $tmp.leafconn.access-node-id`\" />\n",
        "comments": "",
        "x": 1140.9837341308594,
        "y": 4416.333190917969,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "d3485e4a.cbde48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 911.9837341308594,
        "y": 4505.333190917969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "8b20d7ab.715e18",
                "3ddce0eb.9cdfd8"
            ]
        ]
    },
    {
        "id": "3ddce0eb.9cdfd8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1147.9837341308594,
        "y": 4498.333190917969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c4f933ed.6c6328",
                "c8f61cf.a6fdde",
                "31635596.d79712"
            ]
        ]
    },
    {
        "id": "c4f933ed.6c6328",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1343.4838562011719,
        "y": 4450.333190917969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "40098ed2.4f4dd"
            ]
        ]
    },
    {
        "id": "c8f61cf.a6fdde",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1335.4838562011719,
        "y": 4505.333190917969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "8f4995e7.00e5b8"
            ]
        ]
    },
    {
        "id": "40098ed2.4f4dd",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1487.8661804199219,
        "y": 4449.988861083984,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "4b557dbd.14d794"
            ]
        ]
    },
    {
        "id": "4b557dbd.14d794",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1671.9837341308594,
        "y": 4448.333190917969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a0958afe.9d1b"
            ]
        ]
    },
    {
        "id": "a0958afe.9d1b",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1866.9837341308594,
        "y": 4448.333190917969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "31026a11.2a4bde"
            ]
        ]
    },
    {
        "id": "31635596.d79712",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1340.4838562011719,
        "y": 4562.333190917969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c3c84b5.76fc5b8"
            ]
        ]
    },
    {
        "id": "c3c84b5.76fc5b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1492.4838562011719,
        "y": 4563.333190917969,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "8f4995e7.00e5b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1503.4838562011719,
        "y": 4506.333190917969,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "ca7cc65e.e299b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2248.9837341308594,
        "y": 4452.333190917969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "7e1000fc.f7ace",
                "10f0f2b8.28ecdd",
                "1cf608fc.280f8f"
            ]
        ]
    },
    {
        "id": "31026a11.2a4bde",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2069.9837341308594,
        "y": 4452.333190917969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "ca7cc65e.e299b"
            ]
        ]
    },
    {
        "id": "964a9d6b.511ef",
        "type": "execute",
        "name": "execute RestApiCallNode Delete LEAF UNI of ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.leafconn.etht-svc-name + '/etht-svc-end-points=' + $tmp.LEAF.uni-p-interface-long`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1053.4839782714844,
        "y": 4609.932800292969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a14b7306.f0f088",
                "edc3d42b.21d3d"
            ]
        ]
    },
    {
        "id": "edc3d42b.21d3d",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1417.9837341308594,
        "y": 4657.932800292969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "7d2a7da9.46fdfc"
            ]
        ]
    },
    {
        "id": "a14b7306.f0f088",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1413.9837341308594,
        "y": 4617.932800292969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "db3e9725.884648"
            ]
        ]
    },
    {
        "id": "db3e9725.884648",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 1571.9837341308594,
        "y": 4617.932800292969,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "7d2a7da9.46fdfc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1575.4837341308594,
        "y": 4657.932800292969,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "10f0f2b8.28ecdd",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 2454.9837341308594,
        "y": 4465.333190917969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "25e5e61.acf541a",
                "12a14aa1.cf2fb5",
                "c1a2b3a0.8c75c"
            ]
        ]
    },
    {
        "id": "7e1000fc.f7ace",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 2484.9837341308594,
        "y": 4413.333190917969,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "25e5e61.acf541a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2664.9837341308594,
        "y": 4456.333190917969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "5696d51e.dbfe64"
            ]
        ]
    },
    {
        "id": "12a14aa1.cf2fb5",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2656.9837341308594,
        "y": 4511.333190917969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "8d572a45.011df8"
            ]
        ]
    },
    {
        "id": "c1a2b3a0.8c75c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2661.9837341308594,
        "y": 4568.333190917969,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "dddace6e.f9e9f"
            ]
        ]
    },
    {
        "id": "dddace6e.f9e9f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2813.9837341308594,
        "y": 4569.333190917969,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "8d572a45.011df8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2824.9837341308594,
        "y": 4514.333190917969,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "5696d51e.dbfe64",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2809.3660583496094,
        "y": 4453.988861083984,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "e4cea83c.4d71a"
            ]
        ]
    },
    {
        "id": "e4cea83c.4d71a",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3023.9837341308594,
        "y": 4450.333190917969,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "1cf608fc.280f8f",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2404.9837341308594,
        "y": 4529.333190917969,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "58993466.bcba34",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1082.5667419433594,
        "y": 4830.049499511719,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "b72e55ab.bc6bd8",
        "type": "switchNode",
        "name": "switch found-root-connectivity",
        "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 897.5667419433594,
        "y": 4897.049499511719,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "191ee334.0f09fd",
                "b8911820.2c8f68"
            ]
        ]
    },
    {
        "id": "191ee334.0f09fd",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1162.5667419433594,
        "y": 4882.049499511719,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "328aa2d2.c36a96"
            ]
        ]
    },
    {
        "id": "b8911820.2c8f68",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1158.5667419433594,
        "y": 4930.049499511719,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "88b54a6f.ba3898"
            ]
        ]
    },
    {
        "id": "328aa2d2.c36a96",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1318.5667419433594,
        "y": 4878.049499511719,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "4a7a1b00.5fe524"
            ]
        ]
    },
    {
        "id": "88b54a6f.ba3898",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
        "comments": "",
        "x": 1306.5667419433594,
        "y": 4925.049499511719,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "d5cdb27.e4e575",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 1587.4664001464844,
        "y": 4828.749694824219,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "4a7a1b00.5fe524",
        "type": "save",
        "name": "update ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1613.2496032714844,
        "y": 4870.949890136719,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "1003b628.8cf272",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-delete-VPNBs",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-delete-VPNBs' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1026.8833923339844,
        "y": 4144.316589355469,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "44e1ece4.47debc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 632.8834228515625,
        "y": 4148.999725341797,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "1003b628.8cf272",
                "71bd2e28.fdc428"
            ]
        ]
    },
    {
        "id": "49ab1cdc.2b3dfc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 716.3333740234375,
        "y": 5401.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "723c2903.f58428",
                "98b88954.793148",
                "b393338f.3c0a5",
                "119574e6.129413"
            ]
        ]
    },
    {
        "id": "723c2903.f58428",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-delete-VPNBs",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-delete-VPNBs' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1067.7166748046875,
        "y": 5332.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "98b88954.793148",
        "type": "save",
        "name": "delete LEAF connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 978.7166748046875,
        "y": 5401.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "b393338f.3c0a5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 869.88330078125,
        "y": 5636.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "df7f814b.30dca",
                "680a6c2d.c81304",
                "f02d2a13.d0aa48"
            ]
        ]
    },
    {
        "id": "c8c4cb96.f9d8b",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 2585.882568359375,
        "y": 5523.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "43900724.7021a8",
                "b5fd98a.36736e8",
                "3c26b3f8.230acc"
            ]
        ]
    },
    {
        "id": "de9e1e1d.dcbc3",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2535.882568359375,
        "y": 5587.516571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "d2b1cccb.1f5468",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 2615.882568359375,
        "y": 5471.516571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "43900724.7021a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2795.882568359375,
        "y": 5514.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "dc7a8a3b.a925f8"
            ]
        ]
    },
    {
        "id": "b5fd98a.36736e8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2787.882568359375,
        "y": 5569.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c1ab7307.8305a8"
            ]
        ]
    },
    {
        "id": "3c26b3f8.230acc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2792.882568359375,
        "y": 5626.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f1d869f8.b644e"
            ]
        ]
    },
    {
        "id": "f1d869f8.b644e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2944.882568359375,
        "y": 5627.516571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "c1ab7307.8305a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2955.882568359375,
        "y": 5572.516571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "dc7a8a3b.a925f8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2940.264892578125,
        "y": 5512.1722412109375,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "99f651cc.e3a158"
            ]
        ]
    },
    {
        "id": "99f651cc.e3a158",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3154.882568359375,
        "y": 5508.516571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "df7f814b.30dca",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.the-connectivity.access-provider-id + '-clientId-' +\n                                                   $tmp.the-connectivity.access-client-id + '-topologyId-' +\n                                                   $tmp.the-connectivity.access-topology-id + '-nodeId-' +\n                                                   $tmp.the-connectivity.access-node-id`\" />\n",
        "comments": "",
        "x": 1151.88330078125,
        "y": 5505.516571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "1d552db6.d6aaca",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1362.3834228515625,
        "y": 5644.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2d69161c.7523aa"
            ]
        ]
    },
    {
        "id": "d7946986.6d0968",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1365.3834228515625,
        "y": 5532.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b24f95b.8630968"
            ]
        ]
    },
    {
        "id": "9ea8b87c.75f8b",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1357.3834228515625,
        "y": 5587.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d1cfde55.05efd"
            ]
        ]
    },
    {
        "id": "b24f95b.8630968",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1499.765625,
        "y": 5527.172332763672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "57f5a4ed.934544"
            ]
        ]
    },
    {
        "id": "2d69161c.7523aa",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1514.3834228515625,
        "y": 5645.516571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "d1cfde55.05efd",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 1525.3834228515625,
        "y": 5588.516571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "57f5a4ed.934544",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1686.8828125,
        "y": 5528.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "489e94a0.cb0724"
            ]
        ]
    },
    {
        "id": "489e94a0.cb0724",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1914.8828125,
        "y": 5521.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "70d2a39a.39c914"
            ]
        ]
    },
    {
        "id": "680a6c2d.c81304",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1169.88330078125,
        "y": 5580.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "1d552db6.d6aaca",
                "d7946986.6d0968",
                "9ea8b87c.75f8b"
            ]
        ]
    },
    {
        "id": "70d2a39a.39c914",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2120.8828125,
        "y": 5518.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "11f0110f.f1cbd7"
            ]
        ]
    },
    {
        "id": "11f0110f.f1cbd7",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2335.8822021484375,
        "y": 5521.516571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d2b1cccb.1f5468",
                "c8c4cb96.f9d8b",
                "de9e1e1d.dcbc3"
            ]
        ]
    },
    {
        "id": "f02d2a13.d0aa48",
        "type": "execute",
        "name": "execute RestApiCallNode Delete LEAF ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.the-connectivity.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1293.6500244140625,
        "y": 5729.916473388672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "73cc7454.46b21c",
                "983cf462.7773e"
            ]
        ]
    },
    {
        "id": "73cc7454.46b21c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1640.1500244140625,
        "y": 5722.916473388672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d64e37c.99aa9c8"
            ]
        ]
    },
    {
        "id": "983cf462.7773e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1644.1500244140625,
        "y": 5762.916473388672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "63d68d1b.26356c"
            ]
        ]
    },
    {
        "id": "d64e37c.99aa9c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 1798.1500244140625,
        "y": 5722.916473388672,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "63d68d1b.26356c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1801.6500244140625,
        "y": 5762.916473388672,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "119574e6.129413",
        "type": "switchNode",
        "name": "switch tmp.MMstillHasUni?",
        "xml": "\n<switch test=\"`$tmp.MMstillHasUni`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 913.183349609375,
        "y": 5891.716766357422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "20383b77.9d13bc",
                "9b5788ce.9c9408"
            ]
        ]
    },
    {
        "id": "20383b77.9d13bc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1105.183349609375,
        "y": 5868.716766357422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c8a5ff15.a0cc5"
            ]
        ]
    },
    {
        "id": "9b5788ce.9c9408",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1093.3500366210938,
        "y": 6041.316864013672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "80ab1272.8cacd"
            ]
        ]
    },
    {
        "id": "c8a5ff15.a0cc5",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1253.35009765625,
        "y": 5868.316864013672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b646edcc.5849d8",
                "7aaef741.32dd88"
            ]
        ]
    },
    {
        "id": "b646edcc.5849d8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1675.199951171875,
        "y": 5839.716766357422,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "7aaef741.32dd88",
        "type": "switchNode",
        "name": "switch found-root-connectivity",
        "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1490.199951171875,
        "y": 5906.716766357422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f0373e80.9f5c1",
                "17b9923a.e6ff36"
            ]
        ]
    },
    {
        "id": "f0373e80.9f5c1",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1755.199951171875,
        "y": 5891.716766357422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "ea0794c3.5caad8"
            ]
        ]
    },
    {
        "id": "17b9923a.e6ff36",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1751.199951171875,
        "y": 5939.716766357422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f785b40a.2c0f08"
            ]
        ]
    },
    {
        "id": "ea0794c3.5caad8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1911.199951171875,
        "y": 5887.716766357422,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c184cafd.df5108"
            ]
        ]
    },
    {
        "id": "f785b40a.2c0f08",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
        "comments": "",
        "x": 1899.199951171875,
        "y": 5934.716766357422,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "c184cafd.df5108",
        "type": "save",
        "name": "update ROOT connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.ROOT.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.ROOT.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 2219.8826904296875,
        "y": 5881.617156982422,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "c1da52d9.9cf468",
        "type": "comment",
        "name": "Update connectivity status to modified",
        "info": "",
        "comments": "",
        "x": 2194.0994873046875,
        "y": 5839.416961669922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "80ab1272.8cacd",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1230.916748046875,
        "y": 6040.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "49431e5b.e46588",
                "1475339.a9ed04c"
            ]
        ]
    },
    {
        "id": "49431e5b.e46588",
        "type": "for",
        "name": "for each relationship of middle-man-conn",
        "xml": "<for index='rel-index' start='0' end='`$middle-man-conn.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1544.23291015625,
        "y": 6034.816864013672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f57bdc9.9ead4a"
            ]
        ]
    },
    {
        "id": "f57bdc9.9ead4a",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$middle-man-conn.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1844.566650390625,
        "y": 6029.816802978516,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "ba35dccb.3b6bb8"
            ]
        ]
    },
    {
        "id": "ba35dccb.3b6bb8",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2024.2332763671875,
        "y": 6029.81689453125,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "86341ec4.ccb728"
            ]
        ]
    },
    {
        "id": "86341ec4.ccb728",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $middle-man-conn.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2224.233154296875,
        "y": 6029.816864013672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "73b15a95.c45e6c",
                "577c89f1.70257",
                "ebf7b15b.49862"
            ]
        ]
    },
    {
        "id": "73b15a95.c45e6c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2431.23291015625,
        "y": 6079.816864013672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d5e5b35.6604c5"
            ]
        ]
    },
    {
        "id": "925dd5ef.2fc678",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 2408.466552734375,
        "y": 6264.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "42725353.b4a374",
                "1745f7ad.eada2",
                "ebfc9334.bdf468"
            ]
        ]
    },
    {
        "id": "6ac4c475.ce37cc",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1607.466552734375,
        "y": 6179.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "df9efed7.82417"
            ]
        ]
    },
    {
        "id": "df9efed7.82417",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1804.466552734375,
        "y": 6193.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "376f554a.32ded2",
                "e86a8d88.08809"
            ]
        ]
    },
    {
        "id": "376f554a.32ded2",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1972.466552734375,
        "y": 6186.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "bc2d7c0c.7cc4a8"
            ]
        ]
    },
    {
        "id": "bc2d7c0c.7cc4a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2135.466552734375,
        "y": 6186.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "925dd5ef.2fc678"
            ]
        ]
    },
    {
        "id": "e86a8d88.08809",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1988.466552734375,
        "y": 6482.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "32fa6a7d.612076"
            ]
        ]
    },
    {
        "id": "32fa6a7d.612076",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2151.466552734375,
        "y": 6482.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6e62ca.5284a538"
            ]
        ]
    },
    {
        "id": "6e62ca.5284a538",
        "type": "save",
        "name": "delete uni resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2394.466552734375,
        "y": 6482.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "91368e45.2e3cd8",
        "type": "save",
        "name": "delete connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1362.466552734375,
        "y": 7248.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "d5e5b35.6604c5",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1433.466552734375,
        "y": 6177.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6ac4c475.ce37cc",
                "91368e45.2e3cd8",
                "5c661b6d.db566c"
            ]
        ]
    },
    {
        "id": "42725353.b4a374",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2619.466552734375,
        "y": 6266.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "aedd4240.642968"
            ]
        ]
    },
    {
        "id": "1745f7ad.eada2",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2619.95751953125,
        "y": 6311.590606689453,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "6425bc45.5cdfcc"
            ]
        ]
    },
    {
        "id": "ebfc9334.bdf468",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2617.466552734375,
        "y": 6355.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "337169e1.665c2e"
            ]
        ]
    },
    {
        "id": "ebf7b15b.49862",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2455.282958984375,
        "y": 5980.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "577c89f1.70257",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2452.7919921875,
        "y": 6024.042633056641,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "1475339.a9ed04c",
        "type": "save",
        "name": "delete middle-man-conn resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1531.400146484375,
        "y": 6109.416473388672,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "aedd4240.642968",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2785.466552734375,
        "y": 6256.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "20a20b24.b18d74",
                "da0ac321.ebd92",
                "450533a8.9c748c",
                "dc80e7d7.692bf8",
                "7b453ddd.4a4edc"
            ]
        ]
    },
    {
        "id": "337169e1.665c2e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2784.466552734375,
        "y": 6354.016571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "6425bc45.5cdfcc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2782.5289306640625,
        "y": 6311.8763427734375,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "20a20b24.b18d74",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-binding.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-binding.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-binding.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-binding.src-access-node-id`\" />\n",
        "comments": "",
        "x": 3007.466552734375,
        "y": 5974.016571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "da0ac321.ebd92",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3033.466552734375,
        "y": 6091.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "ab328def.9c2568",
                "1e0d49ce.54650e",
                "83f96b0e.23503"
            ]
        ]
    },
    {
        "id": "450533a8.9c748c",
        "type": "execute",
        "name": "execute RestApiCallNode Delete OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-src-domain-creation.templatefile`\" />-->\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-te:te/tunnels/tunnel=' + $tmp.aai.vpn-binding.vpn-name`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3136.466552734375,
        "y": 6358.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "e189248a.5308d8",
                "42e13b38.68927c"
            ]
        ]
    },
    {
        "id": "dc80e7d7.692bf8",
        "type": "switchNode",
        "name": "switch connectivity has ethernet service",
        "xml": "<switch test='`$tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3074.466552734375,
        "y": 6493.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "75c39310.64e10c",
                "865b2c0.812e658"
            ]
        ]
    },
    {
        "id": "7b453ddd.4a4edc",
        "type": "save",
        "name": "delete vpn-binding resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3055.466552734375,
        "y": 6609.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "ab328def.9c2568",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3228.9666748046875,
        "y": 6043.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "7b2173a0.a25f4c"
            ]
        ]
    },
    {
        "id": "1e0d49ce.54650e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3220.9666748046875,
        "y": 6098.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "3e21d08a.9cf2d8"
            ]
        ]
    },
    {
        "id": "7b2173a0.a25f4c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3363.348876953125,
        "y": 6037.672332763672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "d783eb8.e8d4418"
            ]
        ]
    },
    {
        "id": "83f96b0e.23503",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3225.9666748046875,
        "y": 6155.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "39d187f7.387c08"
            ]
        ]
    },
    {
        "id": "39d187f7.387c08",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3377.9666748046875,
        "y": 6156.016571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "3e21d08a.9cf2d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3388.9666748046875,
        "y": 6099.016571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "865b2c0.812e658",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3327.466552734375,
        "y": 6471.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "772ac851.ed388"
            ]
        ]
    },
    {
        "id": "75c39310.64e10c",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3327.466552734375,
        "y": 6527.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "d783eb8.e8d4418",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3550.466064453125,
        "y": 6039.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "22737809.d5a598"
            ]
        ]
    },
    {
        "id": "22737809.d5a598",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3791.466064453125,
        "y": 6030.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "8e816736.3f1518"
            ]
        ]
    },
    {
        "id": "772ac851.ed388",
        "type": "execute",
        "name": "execute RestApiCallNode Delete ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.aai.connectivity.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3677.466064453125,
        "y": 6461.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "7e278410.d4a45c",
                "5323d43d.ae4a94"
            ]
        ]
    },
    {
        "id": "e189248a.5308d8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3443.966064453125,
        "y": 6383.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a38fc7bd.ddbeb"
            ]
        ]
    },
    {
        "id": "42e13b38.68927c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3444.966064453125,
        "y": 6328.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "ca98e797.f9c13"
            ]
        ]
    },
    {
        "id": "a38fc7bd.ddbeb",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 3615.966064453125,
        "y": 6381.016571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "ca98e797.f9c13",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3612.466064453125,
        "y": 6330.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "63dcc10.1e934c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4148.4658203125,
        "y": 5979.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "cb51edb2.a6957",
                "7da0f639.3db538",
                "dfe02514.308cd"
            ]
        ]
    },
    {
        "id": "8e816736.3f1518",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3997.466064453125,
        "y": 6027.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "63dcc10.1e934c"
            ]
        ]
    },
    {
        "id": "7e278410.d4a45c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4009.966064453125,
        "y": 6435.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "21b3d920.ac879e"
            ]
        ]
    },
    {
        "id": "5323d43d.ae4a94",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4013.966064453125,
        "y": 6475.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "da782471.0e218"
            ]
        ]
    },
    {
        "id": "da782471.0e218",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4201.466064453125,
        "y": 6479.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "21b3d920.ac879e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 4197.966064453125,
        "y": 6439.016571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "7da0f639.3db538",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4354.4658203125,
        "y": 5992.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2a4fa91b.b928a6",
                "3708f6c9.39ed2a",
                "7ad7cb3f.866b74"
            ]
        ]
    },
    {
        "id": "cb51edb2.a6957",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4384.4658203125,
        "y": 5940.016571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "2a4fa91b.b928a6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4564.4658203125,
        "y": 5983.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "bee63261.4dfe28"
            ]
        ]
    },
    {
        "id": "3708f6c9.39ed2a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4556.4658203125,
        "y": 6038.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "9ceb2b97.8189"
            ]
        ]
    },
    {
        "id": "7ad7cb3f.866b74",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4561.4658203125,
        "y": 6095.016571044922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "84d1d52.6203b28"
            ]
        ]
    },
    {
        "id": "dfe02514.308cd",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4304.4658203125,
        "y": 6056.016571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "84d1d52.6203b28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4713.4658203125,
        "y": 6096.016571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "9ceb2b97.8189",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4724.4658203125,
        "y": 6041.016571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "bee63261.4dfe28",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4708.84814453125,
        "y": 5980.6722412109375,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "595ecbb0.cd7dfc"
            ]
        ]
    },
    {
        "id": "595ecbb0.cd7dfc",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 4923.4658203125,
        "y": 5977.016571044922,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "e8d2c16f.36acb",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.connectivity.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.connectivity.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.connectivity.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.connectivity.access-node-id`\" />\n",
        "comments": "",
        "x": 1659.2332763671875,
        "y": 6774.616668701172,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "656fa541.af35f4",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 1685.2332763671875,
        "y": 6891.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "35de354f.e14d62",
                "aedf728e.4bd508",
                "d65aa6c1.4a58e"
            ]
        ]
    },
    {
        "id": "35de354f.e14d62",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1880.7333984375,
        "y": 6843.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "5345535d.1f34d4"
            ]
        ]
    },
    {
        "id": "aedf728e.4bd508",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1872.7333984375,
        "y": 6898.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "20bec1fa.80674e"
            ]
        ]
    },
    {
        "id": "5345535d.1f34d4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2015.1156005859375,
        "y": 6838.272430419922,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "eb473582.da829"
            ]
        ]
    },
    {
        "id": "d65aa6c1.4a58e",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1877.7333984375,
        "y": 6955.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "15a64cb6.b20343"
            ]
        ]
    },
    {
        "id": "15a64cb6.b20343",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2029.7333984375,
        "y": 6956.616668701172,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "20bec1fa.80674e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2040.7333984375,
        "y": 6899.616668701172,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "eb473582.da829",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2202.2327880859375,
        "y": 6839.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "b73dec8d.f89198"
            ]
        ]
    },
    {
        "id": "b73dec8d.f89198",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2443.2327880859375,
        "y": 6830.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "1ceb2f26.68ec79"
            ]
        ]
    },
    {
        "id": "8e7e1d35.45d4c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2800.2325439453125,
        "y": 6779.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a1ade3fe.d4148",
                "2a08582e.e9a11",
                "a2d9c162.524c1"
            ]
        ]
    },
    {
        "id": "1ceb2f26.68ec79",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2649.2327880859375,
        "y": 6827.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "8e7e1d35.45d4c8"
            ]
        ]
    },
    {
        "id": "2a08582e.e9a11",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 3006.2325439453125,
        "y": 6792.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "cc4e4323.ff0c8",
                "37454266.958e06",
                "fc54918e.b07f78"
            ]
        ]
    },
    {
        "id": "a2d9c162.524c1",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2956.2325439453125,
        "y": 6856.616668701172,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "a1ade3fe.d4148",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 3036.2325439453125,
        "y": 6740.616668701172,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "cc4e4323.ff0c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3216.2325439453125,
        "y": 6783.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "e3f7ab37.cd3338"
            ]
        ]
    },
    {
        "id": "37454266.958e06",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3208.2325439453125,
        "y": 6838.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "c423f303.cf0fc"
            ]
        ]
    },
    {
        "id": "fc54918e.b07f78",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3213.2325439453125,
        "y": 6895.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "f7cc4fee.3d03d8"
            ]
        ]
    },
    {
        "id": "f7cc4fee.3d03d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3365.2325439453125,
        "y": 6896.616668701172,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "c423f303.cf0fc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 3376.2325439453125,
        "y": 6841.616668701172,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "e3f7ab37.cd3338",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3360.6148681640625,
        "y": 6781.2723388671875,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a32f770f.0bf93"
            ]
        ]
    },
    {
        "id": "a32f770f.0bf93",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 3575.2325439453125,
        "y": 6777.616668701172,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "5c661b6d.db566c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1451.2332763671875,
        "y": 6902.616668701172,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "e8d2c16f.36acb",
                "656fa541.af35f4",
                "f25051a6.fa4e28"
            ]
        ]
    },
    {
        "id": "f25051a6.fa4e28",
        "type": "switchNode",
        "name": "switch connectivity has ethernet service",
        "xml": "<switch test='`$tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1733.433349609375,
        "y": 7043.816864013672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "81385ecf.138098",
                "de989c54.09997"
            ]
        ]
    },
    {
        "id": "de989c54.09997",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1986.433349609375,
        "y": 7021.816864013672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "78a6b529.99c6a4"
            ]
        ]
    },
    {
        "id": "81385ecf.138098",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1986.433349609375,
        "y": 7077.816864013672,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "78a6b529.99c6a4",
        "type": "execute",
        "name": "execute RestApiCallNode Delete ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.aai.connectivity.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2336.432861328125,
        "y": 7011.816864013672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a19873b6.a4d6e",
                "94634cdd.23be6"
            ]
        ]
    },
    {
        "id": "a19873b6.a4d6e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2668.932861328125,
        "y": 6985.816864013672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2dad16ef.224d22"
            ]
        ]
    },
    {
        "id": "94634cdd.23be6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2672.932861328125,
        "y": 7025.816864013672,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "4ffd9da0.18218c"
            ]
        ]
    },
    {
        "id": "4ffd9da0.18218c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2860.432861328125,
        "y": 7029.816864013672,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "2dad16ef.224d22",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 2856.932861328125,
        "y": 6989.816864013672,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "8d45971b.519e08",
        "type": "execute",
        "name": "execute RestApiCallNode Delete Underlay OTN tunnel from the LEAF ethernet Service",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.leafconn.etht-svc-name + '/underlay/otn-tunnels=' + $tmp.underlayOTN`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1089.25,
        "y": 4729.39990234375,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "5dcba2e4.9fe114",
                "1fae83d7.8f54e4"
            ]
        ]
    },
    {
        "id": "5dcba2e4.9fe114",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1517.749755859375,
        "y": 4717.39990234375,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "504ce75b.b6442"
            ]
        ]
    },
    {
        "id": "1fae83d7.8f54e4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1521.749755859375,
        "y": 4757.39990234375,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2463a8bc.d76748"
            ]
        ]
    },
    {
        "id": "504ce75b.b6442",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 1675.749755859375,
        "y": 4717.39990234375,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "2463a8bc.d76748",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1679.249755859375,
        "y": 4757.39990234375,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "b2c9765c.25999",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5113,
        "y": 5050,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "86e944dc.0c4178",
                "5fccecfa.290f3c",
                "76c53fa0.8ab25"
            ]
        ]
    },
    {
        "id": "76c53fa0.8ab25",
        "type": "set",
        "name": "set vpnNameToSearch",
        "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
        "comments": "",
        "x": 5340,
        "y": 4995,
        "z": "d1eceead.adafe",
        "wires": []
    },
    {
        "id": "86e944dc.0c4178",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5494,
        "y": 5047,
        "z": "d1eceead.adafe",
        "wires": [
            []
        ]
    },
    {
        "id": "5fccecfa.290f3c",
        "type": "switchNode",
        "name": "switch $foundVpnName",
        "xml": "<switch test=\"`$foundVpnName`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5339,
        "y": 5102,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "2a17f2a1.8a9c0e"
            ]
        ]
    },
    {
        "id": "2a17f2a1.8a9c0e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5518,
        "y": 5101,
        "z": "d1eceead.adafe",
        "wires": [
            [
                "a5ecb13c.9c7548"
            ]
        ]
    }
]