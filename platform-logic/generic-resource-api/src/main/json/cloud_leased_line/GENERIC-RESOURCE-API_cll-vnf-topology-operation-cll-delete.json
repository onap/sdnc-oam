[
    {
        "id": "931a69bb.dae57",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 158,
        "y": 111,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "631f62d5.74088c"
            ]
        ]
    },
    {
        "id": "631f62d5.74088c",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 289.2856903076172,
        "y": 160.23810863494873,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "b7a67e25.a3d65"
            ]
        ]
    },
    {
        "id": "b7a67e25.a3d65",
        "type": "method",
        "name": "method cll-vnf-topology-operation-cll-delete",
        "xml": "<method rpc='cll-vnf-topology-operation-cll-delete' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 292.4286193847656,
        "y": 245.00003242492676,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "bcc86fda.38b13"
            ]
        ]
    },
    {
        "id": "bcc86fda.38b13",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 442.238037109375,
        "y": 374.6666564941406,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "f53defcd.3a7dd",
                "c20e131e.73b7b",
                "d160ef14.daae98"
            ]
        ]
    },
    {
        "id": "f53defcd.3a7dd",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 716.5716552734375,
        "y": 641.59716796875,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "c20e131e.73b7b",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--vnf-topology-operation-input.service-information.service-instance-id-->",
        "comments": "",
        "outputs": 1,
        "x": 768,
        "y": 412,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "73ebc7bf.bf03e8",
                "4161fc92.ab54b4",
                "f0a5f72e.4756d"
            ]
        ]
    },
    {
        "id": "73ebc7bf.bf03e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 987,
        "y": 350,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "5b569a16.745f1c"
            ]
        ]
    },
    {
        "id": "4161fc92.ab54b4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 996.490966796875,
        "y": 392.57403564453125,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "8782adc7.ab141"
            ]
        ]
    },
    {
        "id": "f0a5f72e.4756d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 985,
        "y": 439,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "ecf8d005.e02b48"
            ]
        ]
    },
    {
        "id": "8782adc7.ab141",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1150.0623779296875,
        "y": 395.8597717285156,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "ecf8d005.e02b48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1154,
        "y": 440,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "5b569a16.745f1c",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1184,
        "y": 346,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "25ca27fd.dbc988"
            ]
        ]
    },
    {
        "id": "25ca27fd.dbc988",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1407.33349609375,
        "y": 345.99993896484375,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "f6a0c4df.5c0238"
            ]
        ]
    },
    {
        "id": "f6a0c4df.5c0238",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1587.0001220703125,
        "y": 346.0000305175781,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "b1afa8c.9d08258"
            ]
        ]
    },
    {
        "id": "d160ef14.daae98",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 734,
        "y": 360,
        "z": "de2a2b68.0a5d7",
        "wires": [
            []
        ]
    },
    {
        "id": "b1afa8c.9d08258",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1787,
        "y": 346,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "c3a2010c.f5d48",
                "fb144142.e9ac68",
                "ba20a9b3.14be2"
            ]
        ]
    },
    {
        "id": "c3a2010c.f5d48",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1958,
        "y": 299,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "9386fbbc.1d2048"
            ]
        ]
    },
    {
        "id": "fb144142.e9ac68",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2039.490966796875,
        "y": 1139.5740356445312,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "9e1c850d.74d728"
            ]
        ]
    },
    {
        "id": "ba20a9b3.14be2",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2037,
        "y": 1183,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "c9b57000.53acb8"
            ]
        ]
    },
    {
        "id": "9e1c850d.74d728",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2202.0623779296875,
        "y": 1139.8597717285156,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "c9b57000.53acb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2206,
        "y": 1184,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "ad889722.664b08",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3062,
        "y": 386,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "640b0e20.b1d3e",
                "ce9c63b.0255a2",
                "7ad6314d.3b89c8"
            ]
        ]
    },
    {
        "id": "e28a48f8.db57f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3439,
        "y": 378,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "1c93c389.0c8c2c",
                "c798ad9c.1234b",
                "fd7fa756.f7d6e8",
                "270a4545.e66b22",
                "d4768fc2.d5865"
            ]
        ]
    },
    {
        "id": "640b0e20.b1d3e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3273,
        "y": 388,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "e28a48f8.db57f8"
            ]
        ]
    },
    {
        "id": "ce9c63b.0255a2",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3273.490966796875,
        "y": 433.57403564453125,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "714cc291.22ce0c"
            ]
        ]
    },
    {
        "id": "7ad6314d.3b89c8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3271,
        "y": 477,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "525b4279.2df8f4"
            ]
        ]
    },
    {
        "id": "525b4279.2df8f4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3438,
        "y": 476,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "714cc291.22ce0c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3436.0623779296875,
        "y": 433.8597717285156,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "c57d1cb2.40bd38",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2261,
        "y": 301,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "9dbcf55e.4925c8"
            ]
        ]
    },
    {
        "id": "9dbcf55e.4925c8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2458,
        "y": 315,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "b564f315.834a2",
                "e7d69f06.780b38"
            ]
        ]
    },
    {
        "id": "b564f315.834a2",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2626,
        "y": 308,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "491489ec.617558"
            ]
        ]
    },
    {
        "id": "491489ec.617558",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2789,
        "y": 308,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "ad889722.664b08"
            ]
        ]
    },
    {
        "id": "1c93c389.0c8c2c",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.domain.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-binding.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-binding.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-binding.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-binding.src-access-node-id`\" />\n",
        "comments": "",
        "x": 3661,
        "y": 96,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "c798ad9c.1234b",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.domain.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3687,
        "y": 213,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "76dc6e0a.1ab268",
                "826ceead.c2f69",
                "d5b03fc8.b6e088"
            ]
        ]
    },
    {
        "id": "76dc6e0a.1ab268",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3882.5001220703125,
        "y": 165,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "feb1370b.46393"
            ]
        ]
    },
    {
        "id": "826ceead.c2f69",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3874.5001220703125,
        "y": 220,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "f38f34bb.7a9748"
            ]
        ]
    },
    {
        "id": "feb1370b.46393",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4026.8824462890625,
        "y": 164.65567016601562,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "21f3a77a.346fa8"
            ]
        ]
    },
    {
        "id": "21f3a77a.346fa8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4211,
        "y": 163,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "a51bf440.0c5b6"
            ]
        ]
    },
    {
        "id": "a51bf440.0c5b6",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4406,
        "y": 163,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "34e2f8df.de6cf8"
            ]
        ]
    },
    {
        "id": "d5b03fc8.b6e088",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3879.5001220703125,
        "y": 277,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "8eb64fc1.c84cd"
            ]
        ]
    },
    {
        "id": "8eb64fc1.c84cd",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4031.5001220703125,
        "y": 278,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "f38f34bb.7a9748",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4042.5001220703125,
        "y": 221,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "41c68962.37006",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domain.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domain.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 4994,
        "y": 180,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "b0076b13.2e399",
                "f818e30c.1ed2d",
                "cd5ca056.adec1"
            ]
        ]
    },
    {
        "id": "fb2612bc.a6aea8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4788,
        "y": 167,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "a86d0a2.d48def8",
                "41c68962.37006",
                "3b61ff6d.8dced"
            ]
        ]
    },
    {
        "id": "a86d0a2.d48def8",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domain id",
        "xml": "<set>\n<parameter name='tmp.domain.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5024,
        "y": 128,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "b0076b13.2e399",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5204,
        "y": 171,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "9a62192a.51df38"
            ]
        ]
    },
    {
        "id": "f818e30c.1ed2d",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5196,
        "y": 226,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "cb7716d3.6ef01"
            ]
        ]
    },
    {
        "id": "cd5ca056.adec1",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5201,
        "y": 283,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "6a7cfa93.2ccb4c"
            ]
        ]
    },
    {
        "id": "6a7cfa93.2ccb4c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5353,
        "y": 284,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "cb7716d3.6ef01",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5364,
        "y": 229,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "9a62192a.51df38",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5348.38232421875,
        "y": 168.65567016601562,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "1e654428.bcfdbc"
            ]
        ]
    },
    {
        "id": "34e2f8df.de6cf8",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4609,
        "y": 167,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "fb2612bc.a6aea8"
            ]
        ]
    },
    {
        "id": "1e654428.bcfdbc",
        "type": "set",
        "name": "set controller domain data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.url' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.user' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domain.password' value=\"`$tmp.aai.domain.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5563,
        "y": 165,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "3b61ff6d.8dced",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4944,
        "y": 244,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "10401b5c.b05865",
        "type": "execute",
        "name": "execute RestApiCallNode Delete ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.aai.connectivity.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4322,
        "y": 593,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "7f6c606d.64ab48",
                "c3eb517a.b7781"
            ]
        ]
    },
    {
        "id": "7f6c606d.64ab48",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4668.5,
        "y": 586,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "8c5003e.5a8698"
            ]
        ]
    },
    {
        "id": "c3eb517a.b7781",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4672.5,
        "y": 626,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "19571e12.890ec2"
            ]
        ]
    },
    {
        "id": "19571e12.890ec2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4830,
        "y": 626,
        "z": "de2a2b68.0a5d7",
        "wires": [
            []
        ]
    },
    {
        "id": "8c5003e.5a8698",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete ethernet service rest api\" />\n",
        "comments": "",
        "x": 4826.5,
        "y": 586,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "fd7fa756.f7d6e8",
        "type": "execute",
        "name": "execute RestApiCallNode Delete OTN tunnel with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-otn-src-domain-creation.templatefile`\" />-->\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.url + '/restconf/data/ietf-te:te/tunnels/tunnel=' + $tmp.aai.vpn-binding.vpn-name`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domain.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3790,
        "y": 480,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "7d0f2c32.be1c14",
                "d337892f.188d2"
            ]
        ]
    },
    {
        "id": "7d0f2c32.be1c14",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4122.5,
        "y": 450,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "bcce4236.8aab4"
            ]
        ]
    },
    {
        "id": "d337892f.188d2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4127.5,
        "y": 515,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "fe33b47b.c7292"
            ]
        ]
    },
    {
        "id": "bcce4236.8aab4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing delete OTN tunnel rest api\" />\n",
        "comments": "",
        "x": 4298.5,
        "y": 450,
        "z": "de2a2b68.0a5d7",
        "wires": []
    },
    {
        "id": "fe33b47b.c7292",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4294,
        "y": 515,
        "z": "de2a2b68.0a5d7",
        "wires": [
            []
        ]
    },
    {
        "id": "270a4545.e66b22",
        "type": "switchNode",
        "name": "switch connectivity has ethernet service",
        "xml": "<switch test='`$tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3728,
        "y": 615,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "9b17a7a2.876",
                "67f91d39.722cb4"
            ]
        ]
    },
    {
        "id": "67f91d39.722cb4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3981,
        "y": 593,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "10401b5c.b05865"
            ]
        ]
    },
    {
        "id": "9b17a7a2.876",
        "type": "outcome",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 3981,
        "y": 649,
        "z": "de2a2b68.0a5d7",
        "wires": [
            []
        ]
    },
    {
        "id": "9c7846e0.04a7f",
        "type": "save",
        "name": "delete connectivity resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2277,
        "y": 1030,
        "z": "de2a2b68.0a5d7",
        "wires": [
            []
        ]
    },
    {
        "id": "d4768fc2.d5865",
        "type": "save",
        "name": "delete vpn-binding resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3709,
        "y": 731,
        "z": "de2a2b68.0a5d7",
        "wires": [
            []
        ]
    },
    {
        "id": "e7d69f06.780b38",
        "type": "outcome",
        "name": "uni",
        "xml": "<outcome value='uni'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2642,
        "y": 710,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "f282643f.862928"
            ]
        ]
    },
    {
        "id": "f282643f.862928",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2805,
        "y": 710,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "7484e145.9ae3a8"
            ]
        ]
    },
    {
        "id": "7484e145.9ae3a8",
        "type": "save",
        "name": "delete uni resource in AAI",
        "xml": "<delete plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3048,
        "y": 710,
        "z": "de2a2b68.0a5d7",
        "wires": [
            []
        ]
    },
    {
        "id": "9386fbbc.1d2048",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2087,
        "y": 299,
        "z": "de2a2b68.0a5d7",
        "wires": [
            [
                "c57d1cb2.40bd38",
                "9c7846e0.04a7f"
            ]
        ]
    }
]