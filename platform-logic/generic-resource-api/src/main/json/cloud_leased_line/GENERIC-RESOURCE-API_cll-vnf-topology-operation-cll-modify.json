[
  {
    "id": "2f28023e.39f0ce",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 96.5,
    "y": 107,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "73cc7959.44f0a"
      ]
    ]
  },
  {
    "id": "73cc7959.44f0a",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 380.7856903076172,
    "y": 168.23810863494873,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "22ecaa15.62efee"
      ]
    ]
  },
  {
    "id": "22ecaa15.62efee",
    "type": "method",
    "name": "method cll-vnf-topology-operation-cll-modify",
    "xml": "<method rpc='cll-vnf-topology-operation-cll-modify' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 386.92860412597656,
    "y": 253.00003051757812,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "c060beae.bc9e28"
      ]
    ]
  },
  {
    "id": "c060beae.bc9e28",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 736.5,
    "y": 312,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "915751c1.614528",
        "36f6973a.34e678",
        "493b4ec5.6de3"
      ]
    ]
  },
  {
    "id": "915751c1.614528",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1037.83349609375,
    "y": 582.9302978515625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "36f6973a.34e678",
    "type": "save",
    "name": "get service-instance from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
    "comments": "",
    "outputs": 1,
    "x": 1059.261962890625,
    "y": 285.33331298828125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "488c3b3e.f19244",
        "775f6bb9.6a72cc",
        "cd7c45c1.b6f318"
      ]
    ]
  },
  {
    "id": "488c3b3e.f19244",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1284.261962890625,
    "y": 143.33331298828125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "86fe6a1f.5037f8"
      ]
    ]
  },
  {
    "id": "775f6bb9.6a72cc",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1279.7529296875,
    "y": 212.9073486328125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "de07150f.9aa728"
      ]
    ]
  },
  {
    "id": "cd7c45c1.b6f318",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1268.261962890625,
    "y": 259.33331298828125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "45b0306e.39dc08"
      ]
    ]
  },
  {
    "id": "354c5c1b.22efdc",
    "type": "comment",
    "name": "new for TransportSlicing",
    "info": "",
    "comments": "",
    "x": 1038.261962890625,
    "y": 173.33331298828125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "493b4ec5.6de3",
    "type": "execute",
    "name": "execute properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
    "comments": "",
    "outputs": 1,
    "x": 1026.261962890625,
    "y": 225.33331298828125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "86fe6a1f.5037f8",
    "type": "switchNode",
    "name": "switch allotted-resources_length != 0",
    "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1524.5,
    "y": 140,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "ee0543f9.1cf788",
        "5497352b.e1aeec"
      ]
    ]
  },
  {
    "id": "de07150f.9aa728",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1434.5623779296875,
    "y": 215.85977172851562,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "45b0306e.39dc08",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1438.5,
    "y": 260,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "ee0543f9.1cf788",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1729.5,
    "y": 177,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6345f4d0.12f85c"
      ]
    ]
  },
  {
    "id": "5497352b.e1aeec",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1739.5,
    "y": 104,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "6345f4d0.12f85c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1722.5,
    "y": 252,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "c2cf8029.375a4",
        "3a106a22.349b86",
        "f24d529e.b55f9",
        "26407648.4cfd4a",
        "5e06fc8.b063184"
      ]
    ]
  },
  {
    "id": "34fb97ab.b3686",
    "type": "save",
    "name": "get allotted-resource from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2208.5,
    "y": 303,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4a2e58a2.751648",
        "c91e93c5.362468",
        "ad2e905e.658598"
      ]
    ]
  },
  {
    "id": "4a2e58a2.751648",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2424.5,
    "y": 370,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2d931b81.0000fc"
      ]
    ]
  },
  {
    "id": "c91e93c5.362468",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2424.990966796875,
    "y": 269.573974609375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2c737e52.6b21f2"
      ]
    ]
  },
  {
    "id": "ad2e905e.658598",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2420.5,
    "y": 319,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "81005112.39dbe"
      ]
    ]
  },
  {
    "id": "c2cf8029.375a4",
    "type": "for",
    "name": "for each allotted-resource",
    "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1925.5,
    "y": 284,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9843a.b676f3c68",
        "34fb97ab.b3686",
        "cf6d7172.69b4b8",
        "326038f4.f291a"
      ]
    ]
  },
  {
    "id": "9843a.b676f3c68",
    "type": "set",
    "name": "set the current allotted-resource-id",
    "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
    "comments": "",
    "x": 2205.5,
    "y": 222,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "26407648.4cfd4a",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
    "comments": "",
    "x": 1899.5,
    "y": 234,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "3a106a22.349b86",
    "type": "get-resource",
    "name": "get-resource pnfs-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/pnfs?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
    "comments": "",
    "outputs": 1,
    "x": 1942.5,
    "y": 93,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "f24d529e.b55f9",
    "type": "get-resource",
    "name": "get-resource logical-links",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
    "comments": "",
    "outputs": 1,
    "x": 1954.5,
    "y": 134,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "a7bf0e61.b8215",
    "type": "comment",
    "name": "The following two nodes are for PCE",
    "info": "",
    "comments": "",
    "x": 1979.5,
    "y": 46,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "68130b3.2f48af4",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
    "comments": "",
    "x": 1899.5,
    "y": 180,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "2c737e52.6b21f2",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 2603.5,
    "y": 272,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "81005112.39dbe",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 2603.4375,
    "y": 321.1402587890625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "2d931b81.0000fc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2605.4375,
    "y": 372.1402587890625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4511b10b.b4e2e8"
      ]
    ]
  },
  {
    "id": "4511b10b.b4e2e8",
    "type": "save",
    "name": "get allotted-resource relationship from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2940.4375,
    "y": 141.14027404785156,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9fb16699.1235d",
        "da567395.79b6d8",
        "8ed0fbe8.03e31"
      ]
    ]
  },
  {
    "id": "da567395.79b6d8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3213.928466796875,
    "y": 33.71424865722656,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "1dbb6caf.82e0eb"
      ]
    ]
  },
  {
    "id": "1dbb6caf.82e0eb",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3391.5,
    "y": 34.00001525878906,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "8ed0fbe8.03e31",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3209.4375,
    "y": 83.14027404785156,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "1a97687b.99c02"
      ]
    ]
  },
  {
    "id": "1a97687b.99c02",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3391.4375,
    "y": 83.14027404785156,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "9fb16699.1235d",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3213.4375,
    "y": 134.14027404785156,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "470c276f.ad2f08"
      ]
    ]
  },
  {
    "id": "470c276f.ad2f08",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3393.4375,
    "y": 134.14027404785156,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "ece8c0f8.d3abf8"
      ]
    ]
  },
  {
    "id": "ece8c0f8.d3abf8",
    "type": "switchNode",
    "name": "switch allotted-resource.relationship-list not empty",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2959.5,
    "y": 269.00001525878906,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "dba346c3.39c8a8",
        "4ccdd4a0.9c665c"
      ]
    ]
  },
  {
    "id": "4ccdd4a0.9c665c",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3269.5,
    "y": 276.00001525878906,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "dba346c3.39c8a8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3268.5,
    "y": 330.00001525878906,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e2cad6e.ad95028"
      ]
    ]
  },
  {
    "id": "fde9905b.0e0dc",
    "type": "outcome",
    "name": "network-policy",
    "xml": "<outcome value='network-policy'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4013.5,
    "y": 284.00001525878906,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "be0ed66c.68b118"
      ]
    ]
  },
  {
    "id": "be0ed66c.68b118",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4190.4998779296875,
    "y": 276.99989318847656,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "1aebcc98.e81703",
        "a36c8474.3e9148"
      ]
    ]
  },
  {
    "id": "e2cad6e.ad95028",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3432.5,
    "y": 256.00001525878906,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f52b5162.d3155",
        "28c7d65.67fb0aa"
      ]
    ]
  },
  {
    "id": "f52b5162.d3155",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3713.5,
    "y": 212.00001525878906,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "40678a93.0b11fc"
      ]
    ]
  },
  {
    "id": "40678a93.0b11fc",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3975.5,
    "y": 212.00001525878906,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "fde9905b.0e0dc"
      ]
    ]
  },
  {
    "id": "1aebcc98.e81703",
    "type": "set",
    "name": "set the 1st network-policy-id",
    "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 4433.4998779296875,
    "y": 233.99989318847656,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "a36c8474.3e9148",
    "type": "save",
    "name": "get network-policy from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
    "comments": "",
    "outputs": 1,
    "x": 4422.4998779296875,
    "y": 288.99989318847656,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f4703396.8f997",
        "c4863aea.39d3c",
        "3f105248.ebf0a6"
      ]
    ]
  },
  {
    "id": "3f105248.ebf0a6",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4753.5,
    "y": 197,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f39e3f38.4d2868"
      ]
    ]
  },
  {
    "id": "f39e3f38.4d2868",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4902.071533203125,
    "y": 197.2857666015625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "9b475b7a.781198",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4901.009033203125,
    "y": 241.426025390625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "c4863aea.39d3c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4742.009033203125,
    "y": 241.426025390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9b475b7a.781198"
      ]
    ]
  },
  {
    "id": "f4703396.8f997",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4749.009033203125,
    "y": 320.426025390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "a4728a38.a45e8"
      ]
    ]
  },
  {
    "id": "a4728a38.a45e8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4888.009033203125,
    "y": 320.426025390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6805f17a.2a0698",
        "a9ae4e95.32ef88"
      ]
    ]
  },
  {
    "id": "6805f17a.2a0698",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5093.5,
    "y": 318,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "a9ae4e95.32ef88",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5092.5,
    "y": 364,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "28c7d65.67fb0aa",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3530.5,
    "y": 328.00001525878906,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "ebdf975.aa03968"
      ]
    ]
  },
  {
    "id": "ebdf975.aa03968",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3810.5,
    "y": 328.00001525878906,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "3f67ae4e.a2076a"
      ]
    ]
  },
  {
    "id": "3f67ae4e.a2076a",
    "type": "outcome",
    "name": "logical-link",
    "xml": "<outcome value='logical-link'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2181.5001220703125,
    "y": 759.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f83af2f7.dfb288"
      ]
    ]
  },
  {
    "id": "f83af2f7.dfb288",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2358.5,
    "y": 752,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "a0742463.c2c6f8",
        "25034b30.dd6634"
      ]
    ]
  },
  {
    "id": "a0742463.c2c6f8",
    "type": "set",
    "name": "set the current logical-link-name",
    "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 2601.5,
    "y": 709,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "25034b30.dd6634",
    "type": "save",
    "name": "get logical-link from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
    "comments": "",
    "outputs": 1,
    "x": 2590.5,
    "y": 764,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b3267bc2.0ab17",
        "e3342c37.4e1e3",
        "349e46c.d16cb3a"
      ]
    ]
  },
  {
    "id": "b3267bc2.0ab17",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2881.990966796875,
    "y": 742.573974609375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "504883f4.bc132c"
      ]
    ]
  },
  {
    "id": "e3342c37.4e1e3",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2870.5,
    "y": 787,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6ff791fd.bff34"
      ]
    ]
  },
  {
    "id": "504883f4.bc132c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3030.5625,
    "y": 742.8597412109375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "6ff791fd.bff34",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3029.5,
    "y": 787,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "349e46c.d16cb3a",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2877.5,
    "y": 866,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "947e25fa.d00b28"
      ]
    ]
  },
  {
    "id": "947e25fa.d00b28",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3016.5,
    "y": 866,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b5aabe11.88e5f",
        "8b8aaeb1.46c568",
        "32905edb.461e7a",
        "2f0ef70c.178628",
        "6eaf37e0.1fb3a8",
        "1abb3e71.7e1362",
        "29e42279.9aaa7e",
        "363ba934.edbd4e",
        "ec67f0f.b56539",
        "631e76e1.71afc",
        "b17f4ff2.75d93",
        "8048035e.723ef",
        "d590aba5.94aa48",
        "44b9c5d0.dda044",
        "46e10049.e35348",
        "f55201f.0be188",
        "6834572.668ee28",
        "fa7f428c.6d6b2",
        "8c5d257.6a579d8"
      ]
    ]
  },
  {
    "id": "479d6fca.4b7c8",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3328.5,
    "y": 416,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "b5aabe11.88e5f",
    "type": "execute",
    "name": "execute UUID generator for otn-tunnel-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3315.4998779296875,
    "y": 508,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "44b9c5d0.dda044",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 3272.4998779296875,
    "y": 553,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "8b8aaeb1.46c568",
    "type": "set",
    "name": "set network-route-one",
    "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
    "comments": "",
    "x": 3247.4998779296875,
    "y": 616,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "32905edb.461e7a",
    "type": "set",
    "name": "set network-route-two",
    "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
    "comments": "",
    "x": 3248.4998779296875,
    "y": 671,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "2f0ef70c.178628",
    "type": "save",
    "name": "get network-route-one from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
    "comments": "",
    "outputs": 1,
    "x": 3264.4998779296875,
    "y": 719,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "99eab0f2.3508c",
        "1b8f4bea.ec5e94",
        "fc9653f8.4449d"
      ]
    ]
  },
  {
    "id": "6eaf37e0.1fb3a8",
    "type": "save",
    "name": "get network-route-two from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
    "comments": "",
    "outputs": 1,
    "x": 3259.5,
    "y": 785.9998779296875,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e805b604.ab84e",
        "a86f3b5b.e29e1",
        "cbb70d3d.0ef6a"
      ]
    ]
  },
  {
    "id": "99eab0f2.3508c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3505.5,
    "y": 547,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "d6e995cd.85fc"
      ]
    ]
  },
  {
    "id": "1b8f4bea.ec5e94",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3501.009033203125,
    "y": 596.426025390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e5161935.335138"
      ]
    ]
  },
  {
    "id": "fc9653f8.4449d",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3505.009033203125,
    "y": 649.426025390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "867b315e.a11f4"
      ]
    ]
  },
  {
    "id": "d6e995cd.85fc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3654.071533203125,
    "y": 546.2857666015625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "e5161935.335138",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3644.009033203125,
    "y": 596.426025390625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "e805b604.ab84e",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3509.5,
    "y": 702.9998779296875,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f25db7d5.d2a2a"
      ]
    ]
  },
  {
    "id": "a86f3b5b.e29e1",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3505.009033203125,
    "y": 752.4259033203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "86e45032.893578"
      ]
    ]
  },
  {
    "id": "cbb70d3d.0ef6a",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3488.009033203125,
    "y": 800.4259033203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "20619d71.889cda"
      ]
    ]
  },
  {
    "id": "f25db7d5.d2a2a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3658.071533203125,
    "y": 702.28564453125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "86e45032.893578",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3648.009033203125,
    "y": 752.4259033203125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "867b315e.a11f4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3666.5,
    "y": 649,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2bd95045.b71158"
      ]
    ]
  },
  {
    "id": "20619d71.889cda",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3641.5,
    "y": 799.9998779296875,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "41de01b2.960a08"
      ]
    ]
  },
  {
    "id": "2bd95045.b71158",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3838.5,
    "y": 649,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6f8555c6.ec1a0c",
        "994a0acf.d3aed8",
        "26a90c3.2a56674"
      ]
    ]
  },
  {
    "id": "41de01b2.960a08",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3833.5,
    "y": 734,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4b5b1a17.b9df6c",
        "d7a475f3.ea12c",
        "16154f9d.14a3b"
      ]
    ]
  },
  {
    "id": "6f8555c6.ec1a0c",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3999.49951171875,
    "y": 385,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "62760f41.c93a2"
      ]
    ]
  },
  {
    "id": "994a0acf.d3aed8",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4001.49951171875,
    "y": 439,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "273e3fee.2bc13"
      ]
    ]
  },
  {
    "id": "4b5b1a17.b9df6c",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4014.499267578125,
    "y": 607,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "244a1c4c.c64574"
      ]
    ]
  },
  {
    "id": "d7a475f3.ea12c",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4016.499267578125,
    "y": 661,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f48105e4.f03428"
      ]
    ]
  },
  {
    "id": "92f3b868.34ce6",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4309.49951171875,
    "y": 337,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "b6002239.68b828",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4302.49951171875,
    "y": 435,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "55137534.cd97cc",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4378.499267578125,
    "y": 634,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "ba173e3c.d3cf48",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4382.499267578125,
    "y": 727,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "4d8d5caa.cdd3ac",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3460.5,
    "y": 1150,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6c40f2a8.47da04"
      ]
    ]
  },
  {
    "id": "f63967f8.5c1d2",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3469.990966796875,
    "y": 1192.5740356445312,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "cba887b8.3ba25"
      ]
    ]
  },
  {
    "id": "f4c1be52.25da4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3458.5,
    "y": 1239,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "43b1688f.a5b798"
      ]
    ]
  },
  {
    "id": "f87008d1.14dd28",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3160.5,
    "y": 1112,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "29e42279.9aaa7e",
    "type": "save",
    "name": "get p-interface-src from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3203.5,
    "y": 1177,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4d8d5caa.cdd3ac",
        "f63967f8.5c1d2",
        "f4c1be52.25da4"
      ]
    ]
  },
  {
    "id": "1abb3e71.7e1362",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3192.5,
    "y": 1027,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "252648ef.3d7f4",
        "296ca11d.a31fd6"
      ]
    ]
  },
  {
    "id": "296ca11d.a31fd6",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3415.5,
    "y": 1013,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2479711d.5bdd66"
      ]
    ]
  },
  {
    "id": "252648ef.3d7f4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3417.5,
    "y": 1046,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "90f53fd9.1cbe8"
      ]
    ]
  },
  {
    "id": "6c40f2a8.47da04",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3633.16650390625,
    "y": 1149,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "1415c282.916e3d",
        "2cb5ed40.b34f42"
      ]
    ]
  },
  {
    "id": "cba887b8.3ba25",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3623.5623779296875,
    "y": 1195.8597717285156,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "43b1688f.a5b798",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3627.5,
    "y": 1240,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "1415c282.916e3d",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3897.5,
    "y": 1200,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "3e280d70.843922",
        "95fc8503.11868"
      ]
    ]
  },
  {
    "id": "95fc8503.11868",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4073.5,
    "y": 1250,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "dc902b38.0c7748"
      ]
    ]
  },
  {
    "id": "3e280d70.843922",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4075.5,
    "y": 1314,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "23310562.1afb82"
      ]
    ]
  },
  {
    "id": "23310562.1afb82",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4237.5,
    "y": 1310,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "dc902b38.0c7748",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4238.5,
    "y": 1247,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "cee16453.63cf3",
        "84ccdaef.588b08"
      ]
    ]
  },
  {
    "id": "90f53fd9.1cbe8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3560.5,
    "y": 1043,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "2479711d.5bdd66",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3563.5,
    "y": 1006,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e0731aec.1d3d18",
        "ff49f858.b54118"
      ]
    ]
  },
  {
    "id": "e0731aec.1d3d18",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3737.5,
    "y": 962,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "2cb5ed40.b34f42",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3609.5,
    "y": 1331,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f5d98ba7.1e5cb8"
      ]
    ]
  },
  {
    "id": "f5d98ba7.1e5cb8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3890.5,
    "y": 1326,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "287b5bf8.99c79c"
      ]
    ]
  },
  {
    "id": "287b5bf8.99c79c",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4201.78564453125,
    "y": 1400.82177734375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "70c360c1.95da08"
      ]
    ]
  },
  {
    "id": "ff49f858.b54118",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3752.5,
    "y": 1073,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "dadb26c7.629ca8",
        "f63867c7.23e9a8",
        "b7f169a7.e4cea8"
      ]
    ]
  },
  {
    "id": "dadb26c7.629ca8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3948.0001220703125,
    "y": 1025,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "56281278.4a732c"
      ]
    ]
  },
  {
    "id": "f63867c7.23e9a8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3940.0001220703125,
    "y": 1080,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "d5d18730.ffaa"
      ]
    ]
  },
  {
    "id": "b7f169a7.e4cea8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3945.0001220703125,
    "y": 1137,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "5b7993c9.ffe6c4"
      ]
    ]
  },
  {
    "id": "5b7993c9.ffe6c4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4097.0001220703125,
    "y": 1138,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "d5d18730.ffaa",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4108.0001220703125,
    "y": 1083,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "56281278.4a732c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4092.3824462890625,
    "y": 1022.6556701660156,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "98511029.380fd"
      ]
    ]
  },
  {
    "id": "98511029.380fd",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4315.500244140625,
    "y": 1161,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "1e482e0.3b3ba52"
      ]
    ]
  },
  {
    "id": "84ccdaef.588b08",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
    "comments": "",
    "x": 4408.5,
    "y": 1205,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "cee16453.63cf3",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
    "comments": "",
    "x": 4409.5,
    "y": 1313,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "d2b67ee9.016d4",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4410.5,
    "y": 1262,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "70c360c1.95da08",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4408.6171875,
    "y": 1401.34033203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "8b810a1.45408f8",
        "389752e1.54c2be",
        "e0be029e.19d278"
      ]
    ]
  },
  {
    "id": "8b810a1.45408f8",
    "type": "set",
    "name": "set source ttp-id",
    "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4623.6171875,
    "y": 1363.34033203125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "389752e1.54c2be",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4620.6171875,
    "y": 1402.34033203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "38942ae1.d34c76"
      ]
    ]
  },
  {
    "id": "e0be029e.19d278",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4576.1171875,
    "y": 1444.34033203125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "38942ae1.d34c76",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4801.1171875,
    "y": 1401.34033203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "418b10aa.3bf41"
      ]
    ]
  },
  {
    "id": "28737ab1.66c06e",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4713.500244140625,
    "y": 1165,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "813fb276.a89d38"
      ]
    ]
  },
  {
    "id": "813fb276.a89d38",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4890.500244140625,
    "y": 1157,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "5ba45898.1ae6d8",
        "82500988.df7418"
      ]
    ]
  },
  {
    "id": "1e482e0.3b3ba52",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4510.500244140625,
    "y": 1161,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "28737ab1.66c06e",
        "431c2963.374ce8"
      ]
    ]
  },
  {
    "id": "431c2963.374ce8",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4579.500244140625,
    "y": 1235,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "d3fb7afe.dba838"
      ]
    ]
  },
  {
    "id": "d3fb7afe.dba838",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4775.500244140625,
    "y": 1235,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "40663368.ea789c"
      ]
    ]
  },
  {
    "id": "418b10aa.3bf41",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4959.1171875,
    "y": 1401.34033203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "ec468881.ecbf18"
      ]
    ]
  },
  {
    "id": "ec468881.ecbf18",
    "type": "set",
    "name": "set source tunnel tp ip",
    "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5166.1171875,
    "y": 1401.34033203125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "82500988.df7418",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5115.500244140625,
    "y": 1153,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9dd65188.ffecf",
        "e0664fc.7b8393",
        "b7a2fd6c.7b7688"
      ]
    ]
  },
  {
    "id": "5ba45898.1ae6d8",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainA id",
    "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5145.500244140625,
    "y": 1101,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "9dd65188.ffecf",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5325.500244140625,
    "y": 1144,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2d529b4.18963e4"
      ]
    ]
  },
  {
    "id": "e0664fc.7b8393",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5317.500244140625,
    "y": 1199,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "3aa5c8f4.350c08"
      ]
    ]
  },
  {
    "id": "b7a2fd6c.7b7688",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5322.500244140625,
    "y": 1256,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2908da09.77d2fe"
      ]
    ]
  },
  {
    "id": "2908da09.77d2fe",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5474.500244140625,
    "y": 1257,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "3aa5c8f4.350c08",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5485.500244140625,
    "y": 1202,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "2d529b4.18963e4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5469.882568359375,
    "y": 1141.6556701660156,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e508aa99.ed11b8"
      ]
    ]
  },
  {
    "id": "40663368.ea789c",
    "type": "set",
    "name": "set domainA ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5038.500244140625,
    "y": 1238,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "e508aa99.ed11b8",
    "type": "set",
    "name": "set controller domainA data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5656.500244140625,
    "y": 1138,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "e66147a6.9621b",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4297.49951171875,
    "y": 373,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "7411318a.e1b958",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4288.49951171875,
    "y": 471,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "62760f41.c93a2",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4122.49951171875,
    "y": 379,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "92f3b868.34ce6",
        "e66147a6.9621b"
      ]
    ]
  },
  {
    "id": "273e3fee.2bc13",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4128.49951171875,
    "y": 443,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b6002239.68b828",
        "7411318a.e1b958"
      ]
    ]
  },
  {
    "id": "244a1c4c.c64574",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4142.499267578125,
    "y": 607,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "55137534.cd97cc",
        "94e7efd7.f5ec88"
      ]
    ]
  },
  {
    "id": "f48105e4.f03428",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4145.499267578125,
    "y": 660,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "ba173e3c.d3cf48",
        "9c20a9f9.7c2ff"
      ]
    ]
  },
  {
    "id": "94e7efd7.f5ec88",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4364.499267578125,
    "y": 674,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "9c20a9f9.7c2ff",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4367.499267578125,
    "y": 765,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "124feda4.be759a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3523.5,
    "y": 1711,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e1f69d4c.5b8868",
        "d4ae5d82.aab8b"
      ]
    ]
  },
  {
    "id": "7a356795.78dec",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3350.83349609375,
    "y": 1712,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "124feda4.be759a"
      ]
    ]
  },
  {
    "id": "c62c11ee.d3432",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3360.324462890625,
    "y": 1754.5740356445312,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4d29ec31.00d144"
      ]
    ]
  },
  {
    "id": "fa667208.2a7ec",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3348.83349609375,
    "y": 1801,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "577a09e9.8378d8"
      ]
    ]
  },
  {
    "id": "4d29ec31.00d144",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3513.8958740234375,
    "y": 1757.8597717285156,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "577a09e9.8378d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3517.83349609375,
    "y": 1802,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "e1f69d4c.5b8868",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3809.83349609375,
    "y": 1715.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "67e03e9f.e657f8",
        "8f6dd9a8.907078"
      ]
    ]
  },
  {
    "id": "8f6dd9a8.907078",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4032.83349609375,
    "y": 1670.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9d5c402b.afbc18"
      ]
    ]
  },
  {
    "id": "67e03e9f.e657f8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4034.83349609375,
    "y": 1734.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b1dc0c2e.2db02"
      ]
    ]
  },
  {
    "id": "b1dc0c2e.2db02",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4193.83349609375,
    "y": 1753.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "9d5c402b.afbc18",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4197.83349609375,
    "y": 1667.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "eb823b6e.5b1b68",
        "d1229eee.7607f"
      ]
    ]
  },
  {
    "id": "ec67f0f.b56539",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3122.83349609375,
    "y": 1747,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7a356795.78dec",
        "c62c11ee.d3432",
        "fa667208.2a7ec"
      ]
    ]
  },
  {
    "id": "ef79491a.ef1ed",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3083.83349609375,
    "y": 1691,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "363ba934.edbd4e",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3135.83349609375,
    "y": 1493,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "fab0a5fc.8009e8",
        "1a41312c.3b3677"
      ]
    ]
  },
  {
    "id": "1a41312c.3b3677",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3358.83349609375,
    "y": 1479,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "41d39e09.02c3d8"
      ]
    ]
  },
  {
    "id": "fab0a5fc.8009e8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3360.83349609375,
    "y": 1512,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "31a06a0b.93432e"
      ]
    ]
  },
  {
    "id": "31a06a0b.93432e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3503.83349609375,
    "y": 1509,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "41d39e09.02c3d8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3506.83349609375,
    "y": 1472,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "12fe71d9.7bf9be",
        "c47ac813.f199b8"
      ]
    ]
  },
  {
    "id": "12fe71d9.7bf9be",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3700.83349609375,
    "y": 1475.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "d4ae5d82.aab8b",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3753.83349609375,
    "y": 1834,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7b8dd371.aa4964"
      ]
    ]
  },
  {
    "id": "7b8dd371.aa4964",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3959.83349609375,
    "y": 1834,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e78bd2af.32742"
      ]
    ]
  },
  {
    "id": "e78bd2af.32742",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4177.119140625,
    "y": 1832.82177734375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "231ad36e.3e7974"
      ]
    ]
  },
  {
    "id": "c47ac813.f199b8",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3722.83349609375,
    "y": 1543.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "14953bcb.0f686c",
        "5a2f3f75.0fbf6",
        "61553bc7.07748c"
      ]
    ]
  },
  {
    "id": "14953bcb.0f686c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3918.3336181640625,
    "y": 1495.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e9311021.d720e8"
      ]
    ]
  },
  {
    "id": "5a2f3f75.0fbf6",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3910.3336181640625,
    "y": 1550.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4fbd5f1f.bd6168"
      ]
    ]
  },
  {
    "id": "61553bc7.07748c",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3915.3336181640625,
    "y": 1607.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "ccee2aed.1d2c48"
      ]
    ]
  },
  {
    "id": "ccee2aed.1d2c48",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4067.3336181640625,
    "y": 1608.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "4fbd5f1f.bd6168",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4078.3336181640625,
    "y": 1553.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "e9311021.d720e8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4062.7159423828125,
    "y": 1492.6557922363281,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "12595c91.b718eb"
      ]
    ]
  },
  {
    "id": "eb823b6e.5b1b68",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
    "comments": "",
    "x": 4367.83349609375,
    "y": 1628.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "d1229eee.7607f",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
    "comments": "",
    "x": 4368.83349609375,
    "y": 1733.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "8d0a9501.e59f28",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4363.83349609375,
    "y": 1682.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "231ad36e.3e7974",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4383.95068359375,
    "y": 1822.3404541015625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "16f2e433.3291b4",
        "80f33246.16c218",
        "51170c35.40a6bc"
      ]
    ]
  },
  {
    "id": "16f2e433.3291b4",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4598.95068359375,
    "y": 1784.3404541015625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "80f33246.16c218",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4595.95068359375,
    "y": 1823.3404541015625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "ec1220f2.c0002"
      ]
    ]
  },
  {
    "id": "51170c35.40a6bc",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4551.45068359375,
    "y": 1865.3404541015625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "ec1220f2.c0002",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4776.45068359375,
    "y": 1822.3404541015625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "757e93f0.7ee45c"
      ]
    ]
  },
  {
    "id": "757e93f0.7ee45c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4934.45068359375,
    "y": 1822.3404541015625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "c7244ae.af2a238"
      ]
    ]
  },
  {
    "id": "c7244ae.af2a238",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5141.45068359375,
    "y": 1822.3404541015625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "7e549eab.8dbb18",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4644.83349609375,
    "y": 1511.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "1d3b129c.b2a675"
      ]
    ]
  },
  {
    "id": "1d3b129c.b2a675",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4821.83349609375,
    "y": 1503.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b6b58a8c.8e7ea8",
        "dc3d97ac.463e28"
      ]
    ]
  },
  {
    "id": "12595c91.b718eb",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4246.83349609375,
    "y": 1507.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "a772c4a4.38145"
      ]
    ]
  },
  {
    "id": "a772c4a4.38145",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4441.83349609375,
    "y": 1507.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7e549eab.8dbb18",
        "aea7a178.f6fc4"
      ]
    ]
  },
  {
    "id": "dc3d97ac.463e28",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5029.83349609375,
    "y": 1510.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "3bf3e082.eea5e8",
        "58cb7d25.d2da94",
        "d2f7fa01.93a528"
      ]
    ]
  },
  {
    "id": "a307fd53.34615",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4823.83349609375,
    "y": 1576.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "ca73ba2d.29c1c8"
      ]
    ]
  },
  {
    "id": "aea7a178.f6fc4",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4646.83349609375,
    "y": 1584.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "a307fd53.34615"
      ]
    ]
  },
  {
    "id": "b6b58a8c.8e7ea8",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainB id",
    "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5059.83349609375,
    "y": 1458.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "ca73ba2d.29c1c8",
    "type": "set",
    "name": "set domainB ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5005.83349609375,
    "y": 1640.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "3bf3e082.eea5e8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5239.83349609375,
    "y": 1501.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "36f4f947.29aeae"
      ]
    ]
  },
  {
    "id": "58cb7d25.d2da94",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5231.83349609375,
    "y": 1556.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b7803a75.d7ec1"
      ]
    ]
  },
  {
    "id": "d2f7fa01.93a528",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5236.83349609375,
    "y": 1613.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "8d6cbae8.86128"
      ]
    ]
  },
  {
    "id": "8d6cbae8.86128",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5388.83349609375,
    "y": 1614.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "b7803a75.d7ec1",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5399.83349609375,
    "y": 1559.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "36f4f947.29aeae",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5384.2158203125,
    "y": 1498.6557922363281,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b6324aba.def4e"
      ]
    ]
  },
  {
    "id": "b6324aba.def4e",
    "type": "set",
    "name": "set controller domainB data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5598.83349609375,
    "y": 1495.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "631e76e1.71afc",
    "type": "set",
    "name": "set LEAF stuff",
    "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop + '-' + $tmp.aai.network-route-A.logical-interface-id`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
    "comments": "",
    "x": 3187.5,
    "y": 1317,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "d1d7f338.2c48e",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4464.49951171875,
    "y": 457,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "df68ae5a.c6abe",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4532.499267578125,
    "y": 659,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "b17f4ff2.75d93",
    "type": "set",
    "name": "set ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop + '-' + $tmp.aai.network-route-B.logical-interface-id`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
    "comments": "",
    "x": 3083.5,
    "y": 1878,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "8048035e.723ef",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3345.5,
    "y": 2791,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "d590aba5.94aa48",
    "type": "switchNode",
    "name": "switch found-middle-man?",
    "xml": "<switch test='`$found-middle-man`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3222.5,
    "y": 2901,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "507ab41.362cbcc",
        "63f9a6e5.2f9178"
      ]
    ]
  },
  {
    "id": "507ab41.362cbcc",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3406.5,
    "y": 2880,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "28f5fd24.d628ea"
      ]
    ]
  },
  {
    "id": "63f9a6e5.2f9178",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2942.5,
    "y": 4466,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "db2110db.2b1778"
      ]
    ]
  },
  {
    "id": "9f11b3.a8080e5",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3453.5,
    "y": 5051,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "40ac4d15.a539ec",
        "577ac65e.4cd8e8",
        "c33c721b.c24a68",
        "e8ff43f0.c9213",
        "c23415ae.23176",
        "b27458da.77b73"
      ]
    ]
  },
  {
    "id": "28f5fd24.d628ea",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6119.5,
    "y": 1700,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4783da3c.fb84a4",
        "bb88421.9f996c",
        "55b1d688.471dd",
        "31123019.0abe4",
        "1759beb1.f3c1d1",
        "98f705b0.6bc73",
        "b6e856a5.c69918",
        "277a36b1.830aba",
        "f9e2137d.7a2d78",
        "3298314.8dc664e",
        "cfdca91b.21bde",
        "a46de057.2f2f3",
        "2c505364.e529bc",
        "5713069a.52e6e",
        "736cdf51.8421c8",
        "a19bdc2c.350be8",
        "829d6c73.aa7da8",
        "57d8804.ea8d28",
        "39b6682a.960bc",
        "858f96c1.79cbc",
        "1b0442b9.4b628d",
        "c1546bd.e66d418"
      ]
    ]
  },
  {
    "id": "f9e2137d.7a2d78",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6490.5,
    "y": 1623,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "4783da3c.fb84a4",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6444.5,
    "y": 1721,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "bb88421.9f996c",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6580.5,
    "y": 1768,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "a3afcd58.883878",
    "type": "comment",
    "name": "Create ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 6411.5,
    "y": 1572,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "47893e3d.7abf68",
    "type": "comment",
    "name": "create middle man connectivity and ...",
    "info": "1- create middle man connectivity\n2- create relation with all connectivities\n   in the path\n3- put srcTtp (+dstTtp) somewhere in the\n   vpn-binding -> this is for later on to find\n   which OTN tunnel's bandwidth has to be increased.\n5- create UNIs\n4- create relationship to UNIs",
    "comments": "",
    "x": 6907.5,
    "y": 2308,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "55b1d688.471dd",
    "type": "execute",
    "name": "execute UUID generator for connectivity middle-man",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-middle-man-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6471.5,
    "y": 2347,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "31123019.0abe4",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-middle-man-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-middle-man-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<!--The followings are not needed for the middle-man-connectivity-->\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />-->\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='mdsc' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6419.5,
    "y": 2398,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "1759beb1.f3c1d1",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-middle-man-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-middle-man-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6555.5,
    "y": 2445,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "71216be9.ff79f4",
    "type": "comment",
    "name": "Create MIDDLE-MAN connectivity",
    "info": "",
    "comments": "",
    "x": 6412.5,
    "y": 2307,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "3446875.4213df8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6842.5,
    "y": 2504,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "98f705b0.6bc73",
    "type": "save",
    "name": "get middle-man connectivity from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $prop.connectivity-middle-man-uuid\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"middle-man-conn\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 6433.5,
    "y": 2551,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4cd47e4a.423aa8",
        "dbf8ee5e.1c40a8",
        "e7f2720f.fd9208"
      ]
    ]
  },
  {
    "id": "4cd47e4a.423aa8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6680.5,
    "y": 2505,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "3446875.4213df8"
      ]
    ]
  },
  {
    "id": "dbf8ee5e.1c40a8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6680.990966796875,
    "y": 2550.5740356445312,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "5c2d61a6.b888d8"
      ]
    ]
  },
  {
    "id": "e7f2720f.fd9208",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6678.5,
    "y": 2594,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7deb6a39.1c780c"
      ]
    ]
  },
  {
    "id": "5c2d61a6.b888d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 6843.5623779296875,
    "y": 2550.8597717285156,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "7deb6a39.1c780c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 6847.5,
    "y": 2595,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "736cdf51.8421c8",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6487.5,
    "y": 2867,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "a19bdc2c.350be8",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6490.5,
    "y": 2912,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "57d8804.ea8d28",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6482.5,
    "y": 2666,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "39b6682a.960bc",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6484.5,
    "y": 2713,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "35de923d.3dc786",
    "type": "comment",
    "name": "The following two will be done in F1",
    "info": "",
    "comments": "",
    "x": 6403.5,
    "y": 2820,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "64b6242c.0fc1a4",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4403.500244140625,
    "y": 5213,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "40ac4d15.a539ec",
    "type": "switchNode",
    "name": "switch no-pce-call",
    "xml": "<switch test='`$no-pce-call`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3668.5,
    "y": 5032,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "243fddd4.c99fc2",
        "ed2a1041.39364"
      ]
    ]
  },
  {
    "id": "ed2a1041.39364",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3840.5,
    "y": 5029,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f749d2c9.24f0b"
      ]
    ]
  },
  {
    "id": "243fddd4.c99fc2",
    "type": "outcomeFalse",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3792.5,
    "y": 5876,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "a2f25d49.46cd88"
      ]
    ]
  },
  {
    "id": "54d55fbb.9ecd9",
    "type": "comment",
    "name": "1 --> PCE is needed",
    "info": "",
    "comments": "",
    "x": 3853.5,
    "y": 4999,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "2bf8aac8.9b318e",
    "type": "comment",
    "name": "2 --> no need to call PCE",
    "info": "",
    "comments": "",
    "x": 3863.5,
    "y": 5834,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "b6e856a5.c69918",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6489.5,
    "y": 3046,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "f749d2c9.24f0b",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4016.5,
    "y": 5031,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b146a69c.13b518",
        "436ccdfb.1e8f5c",
        "124f51e3.777566",
        "91ebdf82.9979e",
        "3da01b2d.c332ec",
        "59b34ffd.7f824",
        "64b6242c.0fc1a4",
        "cb7342b9.a9c168",
        "7a7c44d8.30aa44"
      ]
    ]
  },
  {
    "id": "f96e508.5132a3",
    "type": "comment",
    "name": "Use the middle-man-conn.eth-srv-name for the LEAF connectivity's eth srv name",
    "info": "",
    "comments": "",
    "x": 5460.499755859375,
    "y": 4956,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "b146a69c.13b518",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4262.500244140625,
    "y": 5712,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "277a36b1.830aba",
    "type": "save",
    "name": "save connectivityB relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6496.5,
    "y": 1962,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "467249d9.2faa78",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid=tmp.ROOT.uni-p-interface-long",
    "xml": "<set>\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />\n",
    "comments": "",
    "x": 6546.5,
    "y": 1665,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "3298314.8dc664e",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6493.5,
    "y": 1253,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "cfdca91b.21bde",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6441.5,
    "y": 1301,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "a46de057.2f2f3",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6569.5,
    "y": 1348,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "f85b4c38.36c218",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 6406.5,
    "y": 1211,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "2c505364.e529bc",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />",
    "comments": "",
    "outputs": 1,
    "x": 6403.5,
    "y": 1439,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "5713069a.52e6e",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6496.5,
    "y": 1492,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "9a759e0c.1860c8",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 6387.5,
    "y": 1395,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "147d7127.d8042f",
    "type": "comment",
    "name": "Create ROOT UNI",
    "info": "",
    "comments": "",
    "x": 6393.5,
    "y": 1845,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "91ebdf82.9979e",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4329.499755859375,
    "y": 4964,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "148c6264.137e86",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4313.499755859375,
    "y": 4920,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "c1a606a9.56c798",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 5060.499755859375,
    "y": 4951,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "fd2b62b6.10b14",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 5147.499755859375,
    "y": 4993,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "f21eb35f.395438",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$middle-man-conn.etht-svc-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 5095.499755859375,
    "y": 5041,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "59f69d26.ab3de4",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5223.499755859375,
    "y": 5088,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "59b34ffd.7f824",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4391.500244140625,
    "y": 5255,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "9d4ad6d0.458de8",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4374.500244140625,
    "y": 5317,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "436ccdfb.1e8f5c",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4485.500244140625,
    "y": 5359,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "3e23ff77.47e2b",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 4942.499755859375,
    "y": 5530,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "ff11fb03.980398",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4252.499755859375,
    "y": 6228,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "4e6fe55.c2f201c",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4185.499755859375,
    "y": 6182,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "79eda8bd.206ac",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4134.499755859375,
    "y": 6133,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "2a4071b4.a3adee",
    "type": "save",
    "name": "save the-connectivity relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4917.5,
    "y": 6339,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "124f51e3.777566",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4312.500244140625,
    "y": 5416,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "ce39c047.e7ad38",
        "bd96b648.334cf8"
      ]
    ]
  },
  {
    "id": "ce39c047.e7ad38",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4523.500244140625,
    "y": 5416,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "acd66ccf.e95b3"
      ]
    ]
  },
  {
    "id": "acd66ccf.e95b3",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4679.500244140625,
    "y": 5412,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "3e23ff77.47e2b",
        "1f30d01.395cc3",
        "58a0b8d5.3916c8"
      ]
    ]
  },
  {
    "id": "bd96b648.334cf8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4519.500244140625,
    "y": 5464,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2c5c5163.2ee716"
      ]
    ]
  },
  {
    "id": "2c5c5163.2ee716",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 4667.500244140625,
    "y": 5459,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "8af1d85e.882ed",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5184.499755859375,
    "y": 5159,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "cf6d7172.69b4b8",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2351.5,
    "y": 118,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "326038f4.f291a",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 2285.5,
    "y": 154,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "2bce3640.48de4a",
    "type": "comment",
    "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
    "info": "",
    "comments": "",
    "x": 2470.5,
    "y": 81,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "7170f2f2.71fadc",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 4219.499755859375,
    "y": 6294,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "2402858c.2e7c4a",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4352.499755859375,
    "y": 6342,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "2fcf2035.98d3c",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4171.499755859375,
    "y": 6400,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "c3761e40.b25338",
        "ce543bbd.a7b0f8"
      ]
    ]
  },
  {
    "id": "c3761e40.b25338",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4364.499755859375,
    "y": 6401,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "70442e7d.0be548"
      ]
    ]
  },
  {
    "id": "70442e7d.0be548",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Connectivity should have been created' />\n",
    "comments": "",
    "x": 4520.499755859375,
    "y": 6398,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "ce543bbd.a7b0f8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4368.499755859375,
    "y": 6445,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "47cf8ce2.24939c"
      ]
    ]
  },
  {
    "id": "47cf8ce2.24939c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4507.499755859375,
    "y": 6440,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2a4071b4.a3adee",
        "ca3ef968.6dda08",
        "9655804c.a8367",
        "94748373.e9e958",
        "a0da2cb6.f8de08",
        "5744849a.cc54ac",
        "4e084c4a.411b3c",
        "9bb50a9.812c6f8",
        "5a3abbf9.5bd584",
        "860af8d0.fc96e8",
        "f942597e.1aa18",
        "fc4aa587.17d69",
        "afa717d0.25e7a8"
      ]
    ]
  },
  {
    "id": "4e084c4a.411b3c",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4704.499755859375,
    "y": 7119,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b531f7cf.459858",
        "14585404.95eb44",
        "91bd86e2.073e5"
      ]
    ]
  },
  {
    "id": "b531f7cf.459858",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4899.499969482422,
    "y": 7094.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7a861e6f.3259d"
      ]
    ]
  },
  {
    "id": "14585404.95eb44",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4891.990936279297,
    "y": 7131.574005126953,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7b4d1550.4d39b4"
      ]
    ]
  },
  {
    "id": "91bd86e2.073e5",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4889.499969482422,
    "y": 7174.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "c9793222.0d19b8"
      ]
    ]
  },
  {
    "id": "7a861e6f.3259d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5071.499969482422,
    "y": 7092.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "96392b44.e759e"
      ]
    ]
  },
  {
    "id": "7b4d1550.4d39b4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5054.562347412109,
    "y": 7131.8597412109375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "c9793222.0d19b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5056.499969482422,
    "y": 7173.999969482422,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "96392b44.e759e",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5312.499755859375,
    "y": 7127,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "dcbe395c.2f719"
      ]
    ]
  },
  {
    "id": "dcbe395c.2f719",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5549.499755859375,
    "y": 7123,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "d5739a70.ba04c"
      ]
    ]
  },
  {
    "id": "6bd2c51b.a65de4",
    "type": "switchNode",
    "name": "switch vpnuuid is for this slice",
    "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5816.499755859375,
    "y": 7089,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "c0446363.1c2dd",
        "c5d80881.fdd1f"
      ]
    ]
  },
  {
    "id": "c0446363.1c2dd",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5997.499755859375,
    "y": 7115,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "d5739a70.ba04c"
      ]
    ]
  },
  {
    "id": "c5d80881.fdd1f",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5996.499755859375,
    "y": 7068,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "d5739a70.ba04c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4513.499969482422,
    "y": 7262.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "edcf20b8.e61748"
      ]
    ]
  },
  {
    "id": "4fecf72f.04fbc",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 5589.499755859375,
    "y": 7295,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "c1969b50.1f4a7",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4802.499969482422,
    "y": 7030.999969482422,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "5744849a.cc54ac",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4686.499755859375,
    "y": 6915,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "3d6f4e35.1dbdf2",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5031.499755859375,
    "y": 6746,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "1b824e77.058e42"
      ]
    ]
  },
  {
    "id": "1b824e77.058e42",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5251.499755859375,
    "y": 6752,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2ab4f0b.650811"
      ]
    ]
  },
  {
    "id": "2ab4f0b.650811",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5436.499755859375,
    "y": 6751,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "a23d4d14.87325"
      ]
    ]
  },
  {
    "id": "a23d4d14.87325",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5628.499755859375,
    "y": 6754,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2907eab4.583386"
      ]
    ]
  },
  {
    "id": "2907eab4.583386",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5837.499755859375,
    "y": 6752,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "9bb50a9.812c6f8",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4738.499755859375,
    "y": 6740,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "3d6f4e35.1dbdf2"
      ]
    ]
  },
  {
    "id": "9655804c.a8367",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4746.499755859375,
    "y": 6633,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e3853ecb.86ffa8",
        "e9c51b36.8628d",
        "65b57cea.285c3c"
      ]
    ]
  },
  {
    "id": "e3853ecb.86ffa8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4982.499755859375,
    "y": 6616,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "e9c51b36.8628d",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4979.499755859375,
    "y": 6657,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "65b57cea.285c3c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4993.499755859375,
    "y": 6697,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "94748373.e9e958",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4682.499755859375,
    "y": 6792,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "a0da2cb6.f8de08",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4690.499755859375,
    "y": 6850,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "ca3ef968.6dda08",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4695.499755859375,
    "y": 6590,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "85cec0fe.92a4b",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4810.499755859375,
    "y": 6542,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "edcf20b8.e61748",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4803.499969482422,
    "y": 7257.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e8e7019e.0ce4e8",
        "cf2cb292.2ab218"
      ]
    ]
  },
  {
    "id": "e8e7019e.0ce4e8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5059.499969482422,
    "y": 7229.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2fafeba7.6be734"
      ]
    ]
  },
  {
    "id": "cf2cb292.2ab218",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5059.499969482422,
    "y": 7278.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "997dfd42.35e9c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5325.499969482422,
    "y": 7270.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "fd323ea3.0ba61",
        "4fecf72f.04fbc",
        "8645a39d.96b86"
      ]
    ]
  },
  {
    "id": "81edaff5.fe8de8",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 5717.499755859375,
    "y": 7349,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "8645a39d.96b86",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<!--<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $gfp`' />\n\n<parameter name='operational-status' value='Modified' />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5687.499755859375,
    "y": 7409,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "fd323ea3.0ba61",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 5594.499755859375,
    "y": 7237,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "a2f25d49.46cd88",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3944.5,
    "y": 5875,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4e6fe55.c2f201c",
        "7170f2f2.71fadc",
        "2402858c.2e7c4a",
        "2fcf2035.98d3c",
        "ff11fb03.980398"
      ]
    ]
  },
  {
    "id": "d7183096.a014a",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4687.499755859375,
    "y": 6690,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "5a3abbf9.5bd584",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4810.5,
    "y": 6420,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "48e1585a.35691",
    "type": "comment",
    "name": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "info": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "comments": "",
    "x": 4947.5,
    "y": 6370,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "829d6c73.aa7da8",
    "type": "save",
    "name": "save ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6409.5,
    "y": 1904,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "261b01ae.fe9b36",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3675.5,
    "y": 1298,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "f92c744c.f5b4a8",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3813.5,
    "y": 1786,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "a9675d4a.27492",
    "type": "comment",
    "name": "TEMPORARY REMOVING THE FOLLOWING TWO NODES",
    "info": "",
    "comments": "",
    "x": 6370.5,
    "y": 2616,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "577ac65e.4cd8e8",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3662.5,
    "y": 4892,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "c33c721b.c24a68",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3795.5,
    "y": 4940,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "3da01b2d.c332ec",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4340.499755859375,
    "y": 5020,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "67f3fde2.d1c4bc",
        "830cc023.8d75b8"
      ]
    ]
  },
  {
    "id": "67f3fde2.d1c4bc",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4533.499755859375,
    "y": 5021,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "97ecf17d.e53ae8"
      ]
    ]
  },
  {
    "id": "830cc023.8d75b8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4537.499755859375,
    "y": 5065,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e6486dc.92da59"
      ]
    ]
  },
  {
    "id": "e6486dc.92da59",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4676.499755859375,
    "y": 5060,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f9d2f7c1.e8a63",
        "2f9c4db0.869cca",
        "cfcbce5e.a3353"
      ]
    ]
  },
  {
    "id": "97ecf17d.e53ae8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4676.499755859375,
    "y": 5017,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "fd2b62b6.10b14",
        "f21eb35f.395438",
        "59f69d26.ab3de4",
        "8af1d85e.882ed"
      ]
    ]
  },
  {
    "id": "f9d2f7c1.e8a63",
    "type": "set",
    "name": "set prop.connectivity-domainA-uuid",
    "xml": "<set>\n<parameter name='uuid.connectivity-domainA-uuid' value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5070.499755859375,
    "y": 5311,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "a14dbd8f.fd09c8",
    "type": "comment",
    "name": "populate connectivity-A variable in the context map",
    "info": "",
    "comments": "",
    "x": 5077.499755859375,
    "y": 5265,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "860af8d0.fc96e8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4867.499969482422,
    "y": 6979.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "2f9c4db0.869cca",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5189.499755859375,
    "y": 5364,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "1f30d01.395cc3",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5071.499755859375,
    "y": 5582,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "f7b3410e.fff05",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3617.5,
    "y": 4341,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "7607e020.fe77f",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3951.5,
    "y": 4524,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "e8ff43f0.c9213",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3563.5,
    "y": 4391,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "3f20a2e3.9197ce",
        "836b51a4.29ff7",
        "a19206dd.24a2b8"
      ]
    ]
  },
  {
    "id": "836b51a4.29ff7",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3790.990966796875,
    "y": 4363.573974609375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "cc477903.35a1a8"
      ]
    ]
  },
  {
    "id": "a19206dd.24a2b8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3786.5,
    "y": 4407.999938964844,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9ac9aba4.1e8ac"
      ]
    ]
  },
  {
    "id": "cc477903.35a1a8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3953.5625,
    "y": 4362.859680175781,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "9ac9aba4.1e8ac",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3954.5,
    "y": 4407.999938964844,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "44a45bc4.fd8d24",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3739.5,
    "y": 4481,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "8f06a9d6.e85d2",
        "7607e020.fe77f"
      ]
    ]
  },
  {
    "id": "3f20a2e3.9197ce",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3570.5,
    "y": 4481,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "44a45bc4.fd8d24"
      ]
    ]
  },
  {
    "id": "8f06a9d6.e85d2",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 3928.5,
    "y": 4473,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "c23415ae.23176",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $middle-man-conn.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$middle-man-conn.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3770.5,
    "y": 4768,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "cb253b17.73576",
    "type": "comment",
    "name": "We are doing modify but middle man does not exist ==> it is definitely a new logical link",
    "info": "",
    "comments": "",
    "x": 3553.5,
    "y": 2851,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "9d7a29e5.a75ec",
    "type": "comment",
    "name": "We are doing modify and middle man exists, check if LEAF UNI already exists in AAI or not. If yes, consider the possible bw change. If it does not, then it is a new link needs to be added",
    "info": "",
    "comments": "",
    "x": 2758.5,
    "y": 4413,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "8b862d24.0bbe68",
    "type": "exists",
    "name": "exists LEAF UNI",
    "xml": "<exists plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3181.5,
    "y": 4686,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b605d8db.884f2",
        "fdd54f31.8fbee"
      ]
    ]
  },
  {
    "id": "db2110db.2b1778",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3013.5,
    "y": 4689,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "8b862d24.0bbe68"
      ]
    ]
  },
  {
    "id": "fdd54f31.8fbee",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3344.5,
    "y": 4705,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9f11b3.a8080e5"
      ]
    ]
  },
  {
    "id": "b605d8db.884f2",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3380.5,
    "y": 3312,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "947600ba.b5e73"
      ]
    ]
  },
  {
    "id": "4f6ce4fa.367e24",
    "type": "switchNode",
    "name": "switch leafuni.data-source == gfp",
    "xml": "<switch test='`$tmp.aai.leafuni.data-source == $gfp`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3729.5,
    "y": 3154,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "cc96bd45.2e2b6",
        "f9a0faf9.5c3dc8"
      ]
    ]
  },
  {
    "id": "cc96bd45.2e2b6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3934.5,
    "y": 3150,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "f9a0faf9.5c3dc8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3936.5,
    "y": 3200,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7a40f51a.96d7fc"
      ]
    ]
  },
  {
    "id": "7a40f51a.96d7fc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4092.5,
    "y": 3206,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2c2d832.1ec14fc",
        "16e3f1c0.bf6bbe",
        "3515662b.208b2a",
        "271e520.e6acbae"
      ]
    ]
  },
  {
    "id": "2c2d832.1ec14fc",
    "type": "set",
    "name": "set bwModified",
    "xml": "<set>\n<parameter name='bwModified' value=\"true\" />\n\n\n",
    "comments": "",
    "x": 4318.500244140625,
    "y": 2947,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "f6d89aab.47f778",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4817.499725341797,
    "y": 4243.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f49c2dcf.bc27d8",
        "cc8917f6.431d58"
      ]
    ]
  },
  {
    "id": "cc8917f6.431d58",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
    "comments": "",
    "x": 5019.499481201172,
    "y": 4210.999969482422,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "a80257aa.4070f",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4703.499969482422,
    "y": 4420.999725341797,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "d0212ac6.85c08",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4700.562103271484,
    "y": 4369.8597412109375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "efad35a4.dd1e7",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.the-connectivity.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4283.499725341797,
    "y": 4243.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "bbd4adaa.78aa88"
      ]
    ]
  },
  {
    "id": "bbd4adaa.78aa88",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.the-connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4488.499725341797,
    "y": 4243.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7d1062e5.6c959c"
      ]
    ]
  },
  {
    "id": "7d1062e5.6c959c",
    "type": "outcome",
    "name": "vpn-binding",
    "xml": "<outcome value='vpn-binding'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4654.499725341797,
    "y": 4243.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f6d89aab.47f778"
      ]
    ]
  },
  {
    "id": "f49c2dcf.bc27d8",
    "type": "save",
    "name": "get vpn-binding from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.the-connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4326.499725341797,
    "y": 4321.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2b073b5b.643194",
        "ffd59a4c.14fa7",
        "2abdbd7a.263a72"
      ]
    ]
  },
  {
    "id": "2b073b5b.643194",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4537.499725341797,
    "y": 4323.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b25769d8.6df3c8"
      ]
    ]
  },
  {
    "id": "ffd59a4c.14fa7",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4537.990692138672,
    "y": 4369.574005126953,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "d0212ac6.85c08"
      ]
    ]
  },
  {
    "id": "2abdbd7a.263a72",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4535.499725341797,
    "y": 4412.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "a80257aa.4070f"
      ]
    ]
  },
  {
    "id": "947600ba.b5e73",
    "type": "save",
    "name": "get LEAF uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.LEAF.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.leafuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3603.5,
    "y": 2997,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6a786745.af48",
        "a633d7c2.0708",
        "f368276f.48f958"
      ]
    ]
  },
  {
    "id": "a633d7c2.0708",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3830.990966796875,
    "y": 2969.573974609375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "30a6f1cd.e89f6e"
      ]
    ]
  },
  {
    "id": "f368276f.48f958",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3826.5,
    "y": 3013.9999389648438,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "868e3def.777d88"
      ]
    ]
  },
  {
    "id": "30a6f1cd.e89f6e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3993.5625,
    "y": 2968.8596801757812,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "868e3def.777d88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3994.5,
    "y": 3013.9999389648438,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "6a786745.af48",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3838.5,
    "y": 3064,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4f6ce4fa.367e24"
      ]
    ]
  },
  {
    "id": "e1ab631b.742fc",
    "type": "comment",
    "name": "Find LEAF and ROOT connectivity, then find vpn-bindings of each. adjust bw",
    "info": "",
    "comments": "",
    "x": 3728.383331298828,
    "y": 3254.883331298828,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "9ac35f29.2f46a8",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3710.10009765625,
    "y": 3816.683349609375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "3dda5d6b.eae642",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3848.10009765625,
    "y": 3874.683349609375,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "16e3f1c0.bf6bbe",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3426.10009765625,
    "y": 3556.083251953125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "616a588c.b788e8",
        "23b69bc.0871b64",
        "92806e4e.351398"
      ]
    ]
  },
  {
    "id": "14abd55c.d773d3",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3667.10009765625,
    "y": 3984.4833984375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "5c65738b.87fde4",
        "f1d641f8.d259a8"
      ]
    ]
  },
  {
    "id": "5c65738b.87fde4",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3860.10009765625,
    "y": 3985.4833984375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "65a9280d.a9da1"
      ]
    ]
  },
  {
    "id": "f1d641f8.d259a8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3864.10009765625,
    "y": 4029.4833984375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "5b392e39.74c58"
      ]
    ]
  },
  {
    "id": "5b392e39.74c58",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4003.10009765625,
    "y": 4024.4833984375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "efad35a4.dd1e7"
      ]
    ]
  },
  {
    "id": "65a9280d.a9da1",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"LEAF CONN DOES NOT EXIST BUT IT SHOULD BE.\" />\n\n",
    "comments": "",
    "x": 4004.10009765625,
    "y": 3981.683349609375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "3515662b.208b2a",
    "type": "switchNode",
    "name": "switch leafuni.data-source > gfp",
    "xml": "<switch test='`$tmp.aai.leafuni.data-source > $gfp`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4352.217041015625,
    "y": 3203.283447265625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "d3894fc3.10eb48",
        "b517f9eb.6c257"
      ]
    ]
  },
  {
    "id": "d3894fc3.10eb48",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4551.384033203125,
    "y": 3269.88330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "d481f8d7.46db"
      ]
    ]
  },
  {
    "id": "b517f9eb.6c257",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4573.384033203125,
    "y": 3114.88330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "543771c5.3e82b"
      ]
    ]
  },
  {
    "id": "271e520.e6acbae",
    "type": "save",
    "name": "update LEAF UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4351.217041015625,
    "y": 3058.4833984375,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "5841cd16.599de4",
    "type": "comment",
    "name": "update LEAF UNI with the new bw",
    "info": "",
    "comments": "",
    "x": 4367.384033203125,
    "y": 3011.88330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "c6724a1e.a746a",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 4922.14990234375,
    "y": 2466.88330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "f5319096.b377c8",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5524.14990234375,
    "y": 2571.88330078125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "1d10f282.65ef3d",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4914.149658203125,
    "y": 2512.88330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e6ffa5af.877ac",
        "53ba0501.50937c",
        "f8ebf6c0.ef2f7"
      ]
    ]
  },
  {
    "id": "53ba0501.50937c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5141.640625,
    "y": 2485.457275390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "25bf7485.4207ec"
      ]
    ]
  },
  {
    "id": "f8ebf6c0.ef2f7",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5137.149658203125,
    "y": 2529.8832397460938,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "8cc56294.07b6a"
      ]
    ]
  },
  {
    "id": "25bf7485.4207ec",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5304.212158203125,
    "y": 2484.7429809570312,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "8cc56294.07b6a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5305.149658203125,
    "y": 2529.8832397460938,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "29839d19.ca2152",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5302.149658203125,
    "y": 2579.88330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4a49d064.4801a8",
        "f5319096.b377c8"
      ]
    ]
  },
  {
    "id": "e6ffa5af.877ac",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5133.149658203125,
    "y": 2579.88330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "29839d19.ca2152"
      ]
    ]
  },
  {
    "id": "4a49d064.4801a8",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $tmp.delta`' />\n",
    "comments": "",
    "x": 5484.150390625,
    "y": 2521.88330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "fc1d58de.266bc8",
    "type": "comment",
    "name": "bw+ has increased ",
    "info": "",
    "comments": "",
    "x": 4565.383331298828,
    "y": 3076.883331298828,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "81aa1dbe.56ac78",
    "type": "comment",
    "name": "bw- has decreased",
    "info": "",
    "comments": "",
    "x": 4564.217041015625,
    "y": 3233.683349609375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "175559ed.ae176e",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5013.21630859375,
    "y": 2806.683349609375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "b4d05ea3.ef437",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5615.21630859375,
    "y": 2911.683349609375,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "909ddf1c.4247f",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5005.216064453125,
    "y": 2852.683349609375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6ec56bfe.bf9374",
        "ac80268f.768e5",
        "a8e739ac.bd4b"
      ]
    ]
  },
  {
    "id": "ac80268f.768e5",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5232.70703125,
    "y": 2825.25732421875,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "c8c7d986.838778"
      ]
    ]
  },
  {
    "id": "a8e739ac.bd4b",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5228.216064453125,
    "y": 2869.6832885742188,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "3dcb1fdf.a3fec"
      ]
    ]
  },
  {
    "id": "c8c7d986.838778",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5395.278564453125,
    "y": 2824.5430297851562,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "3dcb1fdf.a3fec",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5396.216064453125,
    "y": 2869.6832885742188,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "9b0bdc3d.6e83d8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5393.216064453125,
    "y": 2919.683349609375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e12fb18d.e25528",
        "b4d05ea3.ef437"
      ]
    ]
  },
  {
    "id": "6ec56bfe.bf9374",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5224.216064453125,
    "y": 2919.683349609375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9b0bdc3d.6e83d8"
      ]
    ]
  },
  {
    "id": "e12fb18d.e25528",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source - $tmp.delta`' />\n",
    "comments": "",
    "x": 5575.216796875,
    "y": 2861.683349609375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "77cc19f0.65a298",
    "type": "set",
    "name": "set delta",
    "xml": "<set>\n<parameter name='tmp.delta' value='`$tmp.aai.leafuni.data-source - $gfp`' />\n<parameter name='tmp.realdelta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.isBwIncreased' value='false' />\n\n\n",
    "comments": "",
    "x": 4930.216064453125,
    "y": 2765.683349609375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "d481f8d7.46db",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4723.383331298828,
    "y": 3258.883331298828,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "77cc19f0.65a298",
        "909ddf1c.4247f",
        "d39256ff.c99e4"
      ]
    ]
  },
  {
    "id": "543771c5.3e82b",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4744.11669921875,
    "y": 3085.683349609375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9e50adf.3f804d",
        "1d10f282.65ef3d",
        "3c12d321.f6ab2c"
      ]
    ]
  },
  {
    "id": "9e50adf.3f804d",
    "type": "set",
    "name": "set delta",
    "xml": "<set>\n<parameter name='tmp.delta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.realdelta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.isBwIncreased' value='true' />\n",
    "comments": "",
    "x": 4878.949462890625,
    "y": 2391.4833984375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "d7fa5270.13e728",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 4338.2666015625,
    "y": 3158.683349609375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "fea06caf.d7087",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3807.600067138672,
    "y": 4147.483856201172,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "5c1ea12c.02fb18",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3642.600067138672,
    "y": 4219.683807373047,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b82e9023.76f9f8",
        "f2f0e3e2.cfb0a8"
      ]
    ]
  },
  {
    "id": "b82e9023.76f9f8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3853.600067138672,
    "y": 4219.683807373047,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4d4a5650.900498"
      ]
    ]
  },
  {
    "id": "f2f0e3e2.cfb0a8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3849.600067138672,
    "y": 4267.683807373047,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "87662134.188498"
      ]
    ]
  },
  {
    "id": "4d4a5650.900498",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4009.600067138672,
    "y": 4215.683807373047,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "cdbc2fd5.f72b4"
      ]
    ]
  },
  {
    "id": "87662134.188498",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found but it should have been!' />\n",
    "comments": "",
    "x": 3997.600067138672,
    "y": 4262.683807373047,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "2111dda1.fcbdb2",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4850.566162109375,
    "y": 4529.882568359375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4fae975f.53fc68",
        "c1f934d5.cc0aa8"
      ]
    ]
  },
  {
    "id": "c1f934d5.cc0aa8",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
    "comments": "",
    "x": 5093.56640625,
    "y": 4498.882568359375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "cf80b7cc.7e2e9",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4710.566162109375,
    "y": 4639.882568359375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "94dec63b.8ae1e"
      ]
    ]
  },
  {
    "id": "840bbd02.3035a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4698.56640625,
    "y": 4732.8828125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "cdbcda75.ac4888",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4700.6285400390625,
    "y": 4687.742340087891,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "cdbc2fd5.f72b4",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.ROOT.connectivity.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4316.566162109375,
    "y": 4529.882568359375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "bc868ed9.895db8"
      ]
    ]
  },
  {
    "id": "bc868ed9.895db8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.ROOT.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4521.566162109375,
    "y": 4529.882568359375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7ae6a8de.c87848"
      ]
    ]
  },
  {
    "id": "7ae6a8de.c87848",
    "type": "outcome",
    "name": "vpn-binding",
    "xml": "<outcome value='vpn-binding'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4687.566162109375,
    "y": 4529.882568359375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2111dda1.fcbdb2"
      ]
    ]
  },
  {
    "id": "4fae975f.53fc68",
    "type": "save",
    "name": "get vpn-binding from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.ROOT.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4326.566162109375,
    "y": 4639.882568359375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "c295dc4d.214d28",
        "c45fd018.eeb138",
        "e9db7616.b3ebb8"
      ]
    ]
  },
  {
    "id": "c295dc4d.214d28",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4537.566162109375,
    "y": 4641.882568359375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "cf80b7cc.7e2e9"
      ]
    ]
  },
  {
    "id": "c45fd018.eeb138",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4538.05712890625,
    "y": 4687.456604003906,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "cdbcda75.ac4888"
      ]
    ]
  },
  {
    "id": "e9db7616.b3ebb8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4535.566162109375,
    "y": 4730.882568359375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "840bbd02.3035a"
      ]
    ]
  },
  {
    "id": "297b4ae7.8b9706",
    "type": "comment",
    "name": "Temporary skipping this check - to support multiple instances in one slice",
    "info": "",
    "comments": "",
    "x": 5946.383056640625,
    "y": 7029.08349609375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "457d3858.29d0e",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 5214.850067138672,
    "y": 4260.283172607422,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "b25769d8.6df3c8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4716.850311279297,
    "y": 4326.283172607422,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "201cbbc6.38c61c",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5247.850067138672,
    "y": 4328.283172607422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "823be1e9.77a818",
        "82dbf116.45c298"
      ]
    ]
  },
  {
    "id": "823be1e9.77a818",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5372.850067138672,
    "y": 4226.282928466797,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "ea4b8bb2.02c728"
      ]
    ]
  },
  {
    "id": "82dbf116.45c298",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5491.85009765625,
    "y": 4300.282958984375,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "12318d1c.9b97cb",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4460.533203125,
    "y": 3872,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "1c49d26a.15504e",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4805.533203125,
    "y": 3734,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "ee8d9735.9d0e18"
      ]
    ]
  },
  {
    "id": "75d5369a.76387",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4512.533203125,
    "y": 3728,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "1c49d26a.15504e"
      ]
    ]
  },
  {
    "id": "2e9ad10b.18ccd6",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4767.533203125,
    "y": 3685,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "8bf9488.63f0cb8",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4456.533203125,
    "y": 3780,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "4168ca78.86bd8c",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4464.533203125,
    "y": 3825,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "6e2860cf.ccae3",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4461.533203125,
    "y": 3678,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "ee8d9735.9d0e18",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4714.533203125,
    "y": 3802,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "16183a46.3a0a2e"
      ]
    ]
  },
  {
    "id": "16183a46.3a0a2e",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4899.533203125,
    "y": 3801,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9cdceec0.5d3c1"
      ]
    ]
  },
  {
    "id": "9cdceec0.5d3c1",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5091.533203125,
    "y": 3804,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "a8a5fc36.2f7d"
      ]
    ]
  },
  {
    "id": "a8a5fc36.2f7d",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5263.533203125,
    "y": 3800,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "eb8710b8.36ef48",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4639.533203125,
    "y": 3915,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "616a588c.b788e8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4156.533203125,
    "y": 3700,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "711898b1.a3a988",
        "c5e1be90.cd78d",
        "8bf9488.63f0cb8",
        "4168ca78.86bd8c",
        "12318d1c.9b97cb",
        "75d5369a.76387",
        "eb8710b8.36ef48"
      ]
    ]
  },
  {
    "id": "d9429d2a.b15568",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4141.533203125,
    "y": 3634,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "c5e1be90.cd78d",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4520.533203125,
    "y": 3621,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "d0e253fc.83209",
        "415d3771.16041",
        "2e9ad10b.18ccd6"
      ]
    ]
  },
  {
    "id": "d0e253fc.83209",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4756.533203125,
    "y": 3604,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "415d3771.16041",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4753.533203125,
    "y": 3645,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "711898b1.a3a988",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4469.533203125,
    "y": 3578,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "6bda79b8.645a68",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 5198.93310546875,
    "y": 4627.39990234375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "94dec63b.8ae1e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4987.93310546875,
    "y": 4689.39990234375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "5b09d63.4152d28"
      ]
    ]
  },
  {
    "id": "5b09d63.4152d28",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.vpn-binding.ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5231.93310546875,
    "y": 4695.39990234375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4ce07cc6.c3d424",
        "f554a368.1a08c8"
      ]
    ]
  },
  {
    "id": "4ce07cc6.c3d424",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5462.93310546875,
    "y": 4673.39990234375,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e736f8f3.ed2808"
      ]
    ]
  },
  {
    "id": "f554a368.1a08c8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5467.93310546875,
    "y": 4740.39990234375,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "4a82e0bf.f144f",
    "type": "switchNode",
    "name": "switch tmp.isBwIncreased",
    "xml": "<switch test=\"`$tmp.isBwIncreased`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5716.816864013672,
    "y": 4238.082244873047,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "8b36e42.8d18318",
        "9e33af49.9f241"
      ]
    ]
  },
  {
    "id": "8b36e42.8d18318",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5871.81689453125,
    "y": 4166.08251953125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b40b55f7.23af98"
      ]
    ]
  },
  {
    "id": "9e33af49.9f241",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5872.81689453125,
    "y": 4299.08251953125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b38dd55a.418b38"
      ]
    ]
  },
  {
    "id": "b40b55f7.23af98",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6016.81689453125,
    "y": 4166.082763671875,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "3913dc06.a223d4",
        "839acfd7.2291a"
      ]
    ]
  },
  {
    "id": "3913dc06.a223d4",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.the-vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6309.81689453125,
    "y": 4144.08251953125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "839acfd7.2291a",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6261.466796875,
    "y": 4191.3994140625,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "4d10eebf.474a88",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6334.816864013672,
    "y": 4093.082244873047,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "b38dd55a.418b38",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6028.81689453125,
    "y": 4298.082763671875,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "8675cc13.463188",
        "35c1f8d2.a502"
      ]
    ]
  },
  {
    "id": "8675cc13.463188",
    "type": "save",
    "name": "update the-vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.the-vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher - $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6321.81689453125,
    "y": 4276.08251953125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "35c1f8d2.a502",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6273.466796875,
    "y": 4323.3994140625,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "b5ed36f4.c5e02",
    "type": "comment",
    "name": "decrease the bw of the-vpn-binding and change status to modified",
    "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6345.81689453125,
    "y": 4237.08251953125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "e736f8f3.ed2808",
    "type": "switchNode",
    "name": "switch tmp.isBwIncreased",
    "xml": "<switch test=\"`$tmp.isBwIncreased`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5668.0498046875,
    "y": 4680.283203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "c39fa1bf.775f28",
        "760b6a69.a4fd14"
      ]
    ]
  },
  {
    "id": "c39fa1bf.775f28",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5863.0498046875,
    "y": 4608.283203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "903811e2.41d4e8"
      ]
    ]
  },
  {
    "id": "760b6a69.a4fd14",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5864.0498046875,
    "y": 4741.283203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "8a352d04.a7b5f"
      ]
    ]
  },
  {
    "id": "903811e2.41d4e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6008.0498046875,
    "y": 4608.283447265625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "dd052918.eeeec8",
        "5b6d1623.4afde8"
      ]
    ]
  },
  {
    "id": "dd052918.eeeec8",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.vpn-binding.route-distinguisher + $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6301.0498046875,
    "y": 4586.283203125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "5b6d1623.4afde8",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6252.69970703125,
    "y": 4633.60009765625,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "f8433708.1cf278",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6325.0498046875,
    "y": 4547.283203125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "8a352d04.a7b5f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6020.0498046875,
    "y": 4740.283447265625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "1797ce6f.bf55da",
        "f850925d.eaddb8"
      ]
    ]
  },
  {
    "id": "1797ce6f.bf55da",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.vpn-binding.route-distinguisher - $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6313.0498046875,
    "y": 4718.283203125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "f850925d.eaddb8",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6264.69970703125,
    "y": 4765.60009765625,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "98f83ad6.f376c",
    "type": "comment",
    "name": "decrease the bw of the-vpn-binding and change status to modified",
    "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6337.0498046875,
    "y": 4679.283203125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "f3a92d2f.d14e78",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5075.89990234375,
    "y": 5420.4833984375,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "cfcbce5e.a3353",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5073.68310546875,
    "y": 5460.68359375,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "35bf741d.0589dc",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 4948.933349609375,
    "y": 5645.16650390625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "58a0b8d5.3916c8",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4946.716552734375,
    "y": 5685.36669921875,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "141a3bed.ea5a94",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5046.0498046875,
    "y": 5969.283203125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "8127bfc.2c0cdc",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4873.0498046875,
    "y": 6026.283203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "eb3bc0b8.920088",
        "e32169bb.0af1a8"
      ]
    ]
  },
  {
    "id": "eb3bc0b8.920088",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5084.0498046875,
    "y": 6026.283203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2548cb5a.7d91a4"
      ]
    ]
  },
  {
    "id": "e32169bb.0af1a8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5080.0498046875,
    "y": 6074.283203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6b0e17ed.7e019"
      ]
    ]
  },
  {
    "id": "2548cb5a.7d91a4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5240.0498046875,
    "y": 6022.283203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4736668b.da34e8",
        "d60814f1.44b368",
        "3b369b46.f16d74"
      ]
    ]
  },
  {
    "id": "6b0e17ed.7e019",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 5228.0498046875,
    "y": 6069.283203125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "b390ff23.8e635",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5505.93359375,
    "y": 6122.16650390625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "3b369b46.f16d74",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5503.716796875,
    "y": 6162.36669921875,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "d60814f1.44b368",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5623.0498046875,
    "y": 6074.283203125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "4736668b.da34e8",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5494.0498046875,
    "y": 6022.283203125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "85c984f2.33f7c8",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4935.0498046875,
    "y": 5927.283203125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "f942597e.1aa18",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4582.3828125,
    "y": 6014.283203125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "141a3bed.ea5a94",
        "8127bfc.2c0cdc",
        "8afd899a.01e88",
        "8c1f115c.700108"
      ]
    ]
  },
  {
    "id": "fc4aa587.17d69",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4926.13330078125,
    "y": 6483.283203125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "41ec9458.f731e4",
    "type": "comment",
    "name": "TODO: BUG -- DONE",
    "info": "momkene connectivity haye vasati ke dummy hastand ham\nvpn-binding dashte bashand ke too in path involve hast pas\nbayad bw aan niz update shavad.",
    "comments": "",
    "x": 3631.500457763672,
    "y": 3759.999969482422,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "23b69bc.0871b64",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4384.033660888672,
    "y": 4034.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "75525335.c9aa54",
        "d5340ebc.32553",
        "f8167756.f35bd8"
      ]
    ]
  },
  {
    "id": "977709e8.5868c",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4492.033905029297,
    "y": 3990.116668701172,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "75525335.c9aa54",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4589.033660888672,
    "y": 4031.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b5414319.96d9"
      ]
    ]
  },
  {
    "id": "d5340ebc.32553",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4572.524627685547,
    "y": 4092.690704345703,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "a327dd9c.9d096"
      ]
    ]
  },
  {
    "id": "f8167756.f35bd8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4570.033660888672,
    "y": 4136.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "784d31ab.abb97"
      ]
    ]
  },
  {
    "id": "b5414319.96d9",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4757.033905029297,
    "y": 4026.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "98142959.81fca"
      ]
    ]
  },
  {
    "id": "a327dd9c.9d096",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4735.096038818359,
    "y": 4092.9764404296875,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "784d31ab.abb97",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4737.033660888672,
    "y": 4135.116668701172,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "98142959.81fca",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4995.033905029297,
    "y": 4031.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6df0b8a0.a7c62"
      ]
    ]
  },
  {
    "id": "6df0b8a0.a7c62",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5229.033660888672,
    "y": 4038.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "201cbbc6.38c61c"
      ]
    ]
  },
  {
    "id": "92806e4e.351398",
    "type": "set",
    "name": "unset tmp.aai.all-vpn-bindings",
    "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value='' />\n",
    "comments": "",
    "x": 4362.733367919922,
    "y": 3960.116668701172,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "f43de449.20024",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='vpnbridx' start='0' end='`$tmp.aai.the-vpn-binding.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5645.883270263672,
    "y": 4048.699676513672,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7a53ecb2.cec2c4"
      ]
    ]
  },
  {
    "id": "7a53ecb2.cec2c4",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5837.883270263672,
    "y": 4037.699920654297,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "700641c0.5a055"
      ]
    ]
  },
  {
    "id": "700641c0.5a055",
    "type": "outcome",
    "name": "connectivity",
    "xml": "<outcome value='connectivity'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6019.883270263672,
    "y": 4016.699920654297,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9920129e.a09"
      ]
    ]
  },
  {
    "id": "9920129e.a09",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 6181.883270263672,
    "y": 4005.699920654297,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7f7dfee.7fba8",
        "c8f259e.2871ba8"
      ]
    ]
  },
  {
    "id": "7f7dfee.7fba8",
    "type": "set",
    "name": "unset tmp.the-connectivity",
    "xml": "<set>\n<parameter name='tmp.the-connectivity.' value='' />\n",
    "comments": "",
    "x": 6378.883270263672,
    "y": 3934.699920654297,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "335b26db.86f24a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5552.833465576172,
    "y": 4163.699676513672,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "4a82e0bf.f144f",
        "f43de449.20024",
        "1e79d0a7.c66727",
        "7f90edcc.1e82b4"
      ]
    ]
  },
  {
    "id": "1e79d0a7.c66727",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 5684.399871826172,
    "y": 3938.916717529297,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "7f90edcc.1e82b4",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 5676.399871826172,
    "y": 3987.916717529297,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "c8f259e.2871ba8",
    "type": "set",
    "name": "set tmp.the-connectivity.connectivity-id",
    "xml": "<set>\n<parameter name='tmp.the-connectivity.connectivity-id' value='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].relationship-data[0].relationship-value`' />\n",
    "comments": "",
    "x": 6384.350067138672,
    "y": 4043.916717529297,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "a412e157.cf47d8",
    "type": "set",
    "name": "set vpnNameToSearch",
    "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
    "comments": "",
    "x": 5677.616668701172,
    "y": 3762.116668701172,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "6887559d.aa01b4",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5831.616668701172,
    "y": 3814.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "ea4b8bb2.02c728",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5422.616668701172,
    "y": 3881.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6887559d.aa01b4",
        "d154a2e6.a2bcc",
        "a412e157.cf47d8"
      ]
    ]
  },
  {
    "id": "d154a2e6.a2bcc",
    "type": "switchNode",
    "name": "switch $foundVpnName",
    "xml": "<switch test=\"`$foundVpnName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5676.616668701172,
    "y": 3869.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "89918c5f.33a478"
      ]
    ]
  },
  {
    "id": "89918c5f.33a478",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5855.616668701172,
    "y": 3868.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "335b26db.86f24a"
      ]
    ]
  },
  {
    "id": "2fafeba7.6be734",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4553.616668701172,
    "y": 7386.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "18db3335.23915d",
        "d2fe4c45.697938",
        "175608de.c2a5b7"
      ]
    ]
  },
  {
    "id": "175608de.c2a5b7",
    "type": "set",
    "name": "set vpnNameToSearch",
    "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
    "comments": "",
    "x": 4776.616668701172,
    "y": 7330.116668701172,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "18db3335.23915d",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4955.616668701172,
    "y": 7373.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "d2fe4c45.697938",
    "type": "switchNode",
    "name": "switch $foundVpnName",
    "xml": "<switch test=\"`$foundVpnName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4800.616668701172,
    "y": 7428.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "5916bddb.120d64"
      ]
    ]
  },
  {
    "id": "5916bddb.120d64",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4979.616668701172,
    "y": 7427.116668701172,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "997dfd42.35e9c"
      ]
    ]
  },
  {
    "id": "afa717d0.25e7a8",
    "type": "set",
    "name": "unset tmp.aai.all-vpn-bindings",
    "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value='' />\n",
    "comments": "",
    "x": 4710.616668701172,
    "y": 7066.116668701172,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "46e10049.e35348",
    "type": "set",
    "name": "unset secondary related variables",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n<parameter name='network-route-three' value=\"\" />\n<parameter name='tmp.aai.network-route-three.' value=\"\" />\n<parameter name='tmp.aai.network-route-C.' value=\"\" />\n",
    "comments": "",
    "x": 3276.2332763671875,
    "y": 460.566650390625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "26a90c3.2a56674",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4051.332763671875,
    "y": 521.566650390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "949451da.c153b8"
      ]
    ]
  },
  {
    "id": "949451da.c153b8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4220.332763671875,
    "y": 518.566650390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "33bf54d9.6913cc",
        "9e64bdfc.fb79a8"
      ]
    ]
  },
  {
    "id": "33bf54d9.6913cc",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4444.332763671875,
    "y": 551.566650390625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "9e64bdfc.fb79a8",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4390.332763671875,
    "y": 591.566650390625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "16154f9d.14a3b",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4016.333251953125,
    "y": 720.7666625976562,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "85975abf.6c518"
      ]
    ]
  },
  {
    "id": "85975abf.6c518",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4181.33251953125,
    "y": 725.7666625976562,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "adebbb96.d8f2f",
        "88877892.df83d8"
      ]
    ]
  },
  {
    "id": "adebbb96.d8f2f",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4428.332763671875,
    "y": 807.7666625976562,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "88877892.df83d8",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4374.332763671875,
    "y": 847.7666625976562,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "f55201f.0be188",
    "type": "save",
    "name": "get network-route-three from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-three'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-three\">",
    "comments": "",
    "outputs": 1,
    "x": 3259.333251953125,
    "y": 859.7666625976562,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e0b52eb6.aea228",
        "c2961466.a099a8",
        "6a533bc.97a86c4"
      ]
    ]
  },
  {
    "id": "e0b52eb6.aea228",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3501.333251953125,
    "y": 852.7666625976562,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "c2961466.a099a8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3496.842315673828,
    "y": 895.1927185058594,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "6a533bc.97a86c4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3500.84228515625,
    "y": 943.1926879882812,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "83cc008.07d49"
      ]
    ]
  },
  {
    "id": "83cc008.07d49",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3662.333251953125,
    "y": 883.7666625976562,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2318951c.d8223a"
      ]
    ]
  },
  {
    "id": "2318951c.d8223a",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-three.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3833.333251953125,
    "y": 883.766845703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "1ecaee8d.2e04b1",
        "6f57dead.f93a98",
        "743eca24.c93994"
      ]
    ]
  },
  {
    "id": "1ecaee8d.2e04b1",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4000.3330078125,
    "y": 793.7667846679688,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "ced307c.4c3f7f8"
      ]
    ]
  },
  {
    "id": "6f57dead.f93a98",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4002.3330078125,
    "y": 847.7667846679688,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e2f995cd.e955"
      ]
    ]
  },
  {
    "id": "ced307c.4c3f7f8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4128.3330078125,
    "y": 793.7667846679688,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "36a6204d.62e268",
        "94b8b644.43f75"
      ]
    ]
  },
  {
    "id": "e2f995cd.e955",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4131.3330078125,
    "y": 846.7667846679688,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7b0ab608.42ea9",
        "a90ad8f1.fdc558"
      ]
    ]
  },
  {
    "id": "94b8b644.43f75",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4374.332763671875,
    "y": 932.7667846679688,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "7b0ab608.42ea9",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4391.332763671875,
    "y": 974.7667846679688,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "a90ad8f1.fdc558",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4376.332763671875,
    "y": 1012.7667846679688,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "36a6204d.62e268",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4388.332763671875,
    "y": 892.7667846679688,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "467d675.a17d518",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4553.332763671875,
    "y": 908.7667846679688,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "743eca24.c93994",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3941.333251953125,
    "y": 938.7666015625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "32cfa81c.1fdfe"
      ]
    ]
  },
  {
    "id": "32cfa81c.1fdfe",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4115.333251953125,
    "y": 933.7666015625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7ba10fb0.49acb8",
        "c1eb138a.5c454"
      ]
    ]
  },
  {
    "id": "c1eb138a.5c454",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4348.332763671875,
    "y": 1102.7665405273438,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "7ba10fb0.49acb8",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4402.332763671875,
    "y": 1062.7665405273438,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "f3ed1968.f2e4c",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4516.332763671875,
    "y": 1087.7665405273438,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "9301f497.efdba",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3517,
    "y": 2168,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7448f46b.34e6cc",
        "5277238e.78ec8c"
      ]
    ]
  },
  {
    "id": "48753b32.6fce64",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3344.33349609375,
    "y": 2169,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9301f497.efdba"
      ]
    ]
  },
  {
    "id": "7b2bdccd.4a3854",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3353.824462890625,
    "y": 2211.5740356445312,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "9a4a0275.086048",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3342.33349609375,
    "y": 2258,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "7448f46b.34e6cc",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3803.33349609375,
    "y": 2172.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "645217a3.91825",
        "af1d3f52.b0745"
      ]
    ]
  },
  {
    "id": "af1d3f52.b0745",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4026.33349609375,
    "y": 2127.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "731452c3.85af84"
      ]
    ]
  },
  {
    "id": "645217a3.91825",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4028.33349609375,
    "y": 2191.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6089c716.00dec8"
      ]
    ]
  },
  {
    "id": "fa7f428c.6d6b2",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-C.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-C.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3116.33349609375,
    "y": 2204,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "48753b32.6fce64",
        "7b2bdccd.4a3854",
        "9a4a0275.086048"
      ]
    ]
  },
  {
    "id": "c73afdde.7fd758",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3077.33349609375,
    "y": 2148,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "6834572.668ee28",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3136.33349609375,
    "y": 1944,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2bef51bc.6ca236",
        "6cf1c76e.88753"
      ]
    ]
  },
  {
    "id": "6cf1c76e.88753",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3359.33349609375,
    "y": 1930,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f6f8952c.2953"
      ]
    ]
  },
  {
    "id": "2bef51bc.6ca236",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3361.33349609375,
    "y": 1963,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "f6f8952c.2953",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3507.33349609375,
    "y": 1923,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f448bb3c.4541c8",
        "dafe2b52.c4e9d"
      ]
    ]
  },
  {
    "id": "f448bb3c.4541c8",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainC.pnf-name' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3701.33349609375,
    "y": 1926.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "5277238e.78ec8c",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3754.333465576172,
    "y": 2294.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "eb06fc3b.085ab"
      ]
    ]
  },
  {
    "id": "eb06fc3b.085ab",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3960.333465576172,
    "y": 2294.999969482422,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "a014a0c0.bb63d8"
      ]
    ]
  },
  {
    "id": "dafe2b52.c4e9d",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\"\n        pfx='tmp.aai.destination-secondary-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3723.33349609375,
    "y": 1994.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "a21fb44.41309c8",
        "5685afe4.0b1f1",
        "ea909548.33d5a"
      ]
    ]
  },
  {
    "id": "a21fb44.41309c8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3918.8336181640625,
    "y": 1946.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9cea62e1.55972"
      ]
    ]
  },
  {
    "id": "5685afe4.0b1f1",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3910.8336181640625,
    "y": 2001.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "89031999.da34c"
      ]
    ]
  },
  {
    "id": "ea909548.33d5a",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3915.8336181640625,
    "y": 2058.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "c3bf7f9d.8f5d8"
      ]
    ]
  },
  {
    "id": "c3bf7f9d.8f5d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4067.8336181640625,
    "y": 2059.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "9cea62e1.55972",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4063.2159423828125,
    "y": 1943.6557922363281,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e8d406ab.082b08"
      ]
    ]
  },
  {
    "id": "8c5d257.6a579d8",
    "type": "set",
    "name": "set SECONDARY-ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-long' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-short' value=\"`$tmp.dst-secondary.pnf-name`\" />\n\n<parameter name='tmp.SECONDARY-ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-C.next-hop + '-' + $tmp.aai.network-route-C.logical-interface-id`\" />\n<parameter name='tmp.SECONDARY-ROOT.uni-tp-id' value=\"`$tmp.dst-secondary.ltpId`\" />\n",
    "comments": "",
    "x": 3139,
    "y": 2283,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "5e59531e.4360fc",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3813.999969482422,
    "y": 2246.999969482422,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "6089c716.00dec8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4187.33349609375,
    "y": 2210.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "731452c3.85af84",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4191.33349609375,
    "y": 2124.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "8743a739.8d80e8",
        "538193e1.eab6f4"
      ]
    ]
  },
  {
    "id": "a014a0c0.bb63d8",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4177.619110107422,
    "y": 2293.821746826172,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "62c06921.59013"
      ]
    ]
  },
  {
    "id": "89031999.da34c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4078.8336181640625,
    "y": 2004.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "8743a739.8d80e8",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.ltpId' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n",
    "comments": "",
    "x": 4361.33349609375,
    "y": 2085.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "538193e1.eab6f4",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.pnf-name' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n",
    "comments": "",
    "x": 4362.33349609375,
    "y": 2190.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "a7a60345.c4fe3",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4357.33349609375,
    "y": 2139.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "62c06921.59013",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4384.450653076172,
    "y": 2283.3404235839844,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "61f01ac9.4769c4",
        "6f3f4bab.137934",
        "b1be6cb6.4fb618"
      ]
    ]
  },
  {
    "id": "61f01ac9.4769c4",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination-secondary.ttp-id' value=\"`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4599.450653076172,
    "y": 2245.3404235839844,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "6f3f4bab.137934",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination-secondary.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-secondary-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4596.450653076172,
    "y": 2284.3404235839844,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "2692e306.96b09c"
      ]
    ]
  },
  {
    "id": "b1be6cb6.4fb618",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4551.950653076172,
    "y": 2326.3404235839844,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "50016039.86678",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4645.33349609375,
    "y": 1962.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "19550590.021992"
      ]
    ]
  },
  {
    "id": "e8d406ab.082b08",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4247.33349609375,
    "y": 1958.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6de4be31.1810b"
      ]
    ]
  },
  {
    "id": "6de4be31.1810b",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4442.33349609375,
    "y": 1958.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "50016039.86678",
        "cba34b2.471f9b8"
      ]
    ]
  },
  {
    "id": "cba34b2.471f9b8",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4647.33349609375,
    "y": 2035.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "af92238d.b3b23"
      ]
    ]
  },
  {
    "id": "2692e306.96b09c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4776.950653076172,
    "y": 2283.3404235839844,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b1246264.28f0f"
      ]
    ]
  },
  {
    "id": "b1246264.28f0f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4934.950653076172,
    "y": 2283.3404235839844,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "fd4ac373.f8f388"
      ]
    ]
  },
  {
    "id": "fd4ac373.f8f388",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination-secondary.tunnel-tp-id' value=\"`$tmp.aai.destination-secondary-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5141.950653076172,
    "y": 2283.3404235839844,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "19550590.021992",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4822.33349609375,
    "y": 1954.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f2beac88.eedd2",
        "e37f582f.5a4c9"
      ]
    ]
  },
  {
    "id": "e37f582f.5a4c9",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainC.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainC.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5030.33349609375,
    "y": 1961.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6a3803eb.9852cc",
        "9a9acadd.82809",
        "a1039497.bae268"
      ]
    ]
  },
  {
    "id": "af92238d.b3b23",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4824.33349609375,
    "y": 2027.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "99f85b9c.2a8238"
      ]
    ]
  },
  {
    "id": "f2beac88.eedd2",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainC id",
    "xml": "<set>\n<parameter name='tmp.domainC.esr-thirdparty-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5060.33349609375,
    "y": 1909.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "99f85b9c.2a8238",
    "type": "set",
    "name": "set domainC ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainC.eth-network-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5059.33349609375,
    "y": 2151.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "6a3803eb.9852cc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5240.33349609375,
    "y": 1952.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f25a9292.d1fb4"
      ]
    ]
  },
  {
    "id": "9a9acadd.82809",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5232.33349609375,
    "y": 2007.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7db8b6f1.adecb8"
      ]
    ]
  },
  {
    "id": "a1039497.bae268",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5237.33349609375,
    "y": 2064.0001220703125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e3bf692a.f4e238"
      ]
    ]
  },
  {
    "id": "e3bf692a.f4e238",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5389.33349609375,
    "y": 2065.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "7db8b6f1.adecb8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5400.33349609375,
    "y": 2010.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "f25a9292.d1fb4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5384.7158203125,
    "y": 1949.6557922363281,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "fbf54d7c.8184a"
      ]
    ]
  },
  {
    "id": "fbf54d7c.8184a",
    "type": "set",
    "name": "set controller domainC data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5599.33349609375,
    "y": 1946.0001220703125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "c067ce8c.82bd2",
    "type": "comment",
    "name": "Create SECONDARY-ROOT UNI",
    "info": "",
    "comments": "",
    "x": 5628.83349609375,
    "y": 2068.7666015625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "858f96c1.79cbc",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5600.9501953125,
    "y": 2117.88330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "8c0e0f7f.469198"
      ]
    ]
  },
  {
    "id": "8c0e0f7f.469198",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5791.9501953125,
    "y": 2121.88330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "a3faa53c.d04c58"
      ]
    ]
  },
  {
    "id": "a3faa53c.d04c58",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5918.9501953125,
    "y": 2120.88330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "53f62ca7.7b47cc",
        "582e0a2f.97b604"
      ]
    ]
  },
  {
    "id": "582e0a2f.97b604",
    "type": "save",
    "name": "save SECONDARY-ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.SECONDARY-ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='type' value='secondary-root' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6140.9501953125,
    "y": 2009.88330078125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "53f62ca7.7b47cc",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6136.83349609375,
    "y": 2068.7666015625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "142e04ee.e3d34b",
        "257ca4bf.8f052c"
      ]
    ]
  },
  {
    "id": "142e04ee.e3d34b",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6346.83349609375,
    "y": 2045.7666015625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9407e67d.da2418"
      ]
    ]
  },
  {
    "id": "9407e67d.da2418",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6472.83349609375,
    "y": 2045.7666015625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "cd746c7.fc5cf1"
      ]
    ]
  },
  {
    "id": "f87ebbbb.7e40d",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6477.83349609375,
    "y": 2094.7666015625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "88ec87d6.84288",
        "29cb92cc.e394be",
        "74fc1523.42a1e4",
        "f8b2efa2.8dbc38"
      ]
    ]
  },
  {
    "id": "257ca4bf.8f052c",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6351.83349609375,
    "y": 2094.7666015625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f87ebbbb.7e40d"
      ]
    ]
  },
  {
    "id": "cd746c7.fc5cf1",
    "type": "save",
    "name": "save connectivityB relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6800.83349609375,
    "y": 2042.7666015625,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "88ec87d6.84288",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainC",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainC-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6753.83349609375,
    "y": 2133.7666015625,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "29cb92cc.e394be",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='secondary-root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6701.83349609375,
    "y": 2175.7666015625,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "74fc1523.42a1e4",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6830.83349609375,
    "y": 2217.7666015625,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "fdca37c0.7ca06",
    "type": "comment",
    "name": "Create SECONDARY-ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 6716.83349609375,
    "y": 2090.7666015625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "f8b2efa2.8dbc38",
    "type": "save",
    "name": "save connectivityC relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6808.83349609375,
    "y": 2265.7666015625,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "1b0442b9.4b628d",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6372.83349609375,
    "y": 2762.566650390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "12529b57.e28025"
      ]
    ]
  },
  {
    "id": "12529b57.e28025",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6564.83349609375,
    "y": 2757.566650390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "78bbff94.82c65"
      ]
    ]
  },
  {
    "id": "78bbff94.82c65",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6693.83349609375,
    "y": 2757.566650390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "c9dee4ca.bc2dc"
      ]
    ]
  },
  {
    "id": "c9dee4ca.bc2dc",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 7025.83349609375,
    "y": 2755.566650390625,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "c1546bd.e66d418",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5957.83349609375,
    "y": 2974.566650390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "13b9a3fa.0e3ae4"
      ]
    ]
  },
  {
    "id": "13b9a3fa.0e3ae4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6137.83349609375,
    "y": 2973.566650390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e57b12b2.74ef18"
      ]
    ]
  },
  {
    "id": "e57b12b2.74ef18",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6266.83349609375,
    "y": 2973.566650390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "c79e7977.2b3cc8"
      ]
    ]
  },
  {
    "id": "c79e7977.2b3cc8",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6484.716796875,
    "y": 2972.449951171875,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "76ccfb33.2c6e3c"
      ]
    ]
  },
  {
    "id": "76ccfb33.2c6e3c",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6699.716796875,
    "y": 2972.449951171875,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f287a7b9.c4a8b"
      ]
    ]
  },
  {
    "id": "f287a7b9.c4a8b",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6831.716796875,
    "y": 2972.449951171875,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "3f3acb0.03380b6"
      ]
    ]
  },
  {
    "id": "3f3acb0.03380b6",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 7195.83349609375,
    "y": 2971.566650390625,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "3c12d321.f6ab2c",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4928.33251953125,
    "y": 2622.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "700dbefa.a5007"
      ]
    ]
  },
  {
    "id": "700dbefa.a5007",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5108.33251953125,
    "y": 2621.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "c3579242.e478c8"
      ]
    ]
  },
  {
    "id": "c3579242.e478c8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5237.33251953125,
    "y": 2621.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "69f846d5.9ccd18"
      ]
    ]
  },
  {
    "id": "cdd1f45b.46fb58",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 4973.33251953125,
    "y": 2680.13330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "69f846d5.9ccd18",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5003.33251953125,
    "y": 2713.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "622ffdb0.75cb54",
        "c593ae10.f47a3",
        "24e47d1.d702d82"
      ]
    ]
  },
  {
    "id": "c593ae10.f47a3",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5184.823486328125,
    "y": 2690.70751953125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "439fba81.48a81c"
      ]
    ]
  },
  {
    "id": "24e47d1.d702d82",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5173.33251953125,
    "y": 2730.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e58b129f.993b8"
      ]
    ]
  },
  {
    "id": "439fba81.48a81c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5344.39501953125,
    "y": 2688.9931640625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "e58b129f.993b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5334.33251953125,
    "y": 2731.13330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "622ffdb0.75cb54",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5178.33251953125,
    "y": 2767.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "ea27280d.d02bf8"
      ]
    ]
  },
  {
    "id": "ea27280d.d02bf8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5336.33251953125,
    "y": 2775.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "5d2e8885.4f468",
        "6cb98496.dc88f4"
      ]
    ]
  },
  {
    "id": "5d2e8885.4f468",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 5497.33251953125,
    "y": 2707.13330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "6cb98496.dc88f4",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5539.33251953125,
    "y": 2779.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "d39256ff.c99e4",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5015.33251953125,
    "y": 2980.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "9b669929.a8064"
      ]
    ]
  },
  {
    "id": "9b669929.a8064",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5195.33251953125,
    "y": 2979.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "479be729.dc0248"
      ]
    ]
  },
  {
    "id": "479be729.dc0248",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5324.33251953125,
    "y": 2979.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "96ab8e09.feb69"
      ]
    ]
  },
  {
    "id": "89e60282.d93268",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5060.33251953125,
    "y": 3038.13330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "96ab8e09.feb69",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5090.33251953125,
    "y": 3071.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "d8822576.b3585",
        "75b8d325.77424c",
        "c70dc607.d25bf8"
      ]
    ]
  },
  {
    "id": "75b8d325.77424c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5271.823486328125,
    "y": 3048.70751953125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "1c3be14a.a5638f"
      ]
    ]
  },
  {
    "id": "c70dc607.d25bf8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5260.33251953125,
    "y": 3088.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "57a20811.9713c"
      ]
    ]
  },
  {
    "id": "1c3be14a.a5638f",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5431.39501953125,
    "y": 3046.9931640625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "57a20811.9713c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5421.33251953125,
    "y": 3089.13330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "d8822576.b3585",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5265.33251953125,
    "y": 3125.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "89319d00.a640d8"
      ]
    ]
  },
  {
    "id": "89319d00.a640d8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5423.33251953125,
    "y": 3133.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "f52ef279.5e2fa8",
        "ebb57be1.fff538"
      ]
    ]
  },
  {
    "id": "f52ef279.5e2fa8",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 5584.33251953125,
    "y": 3065.13330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "ebb57be1.fff538",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5626.33251953125,
    "y": 3137.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "b27458da.77b73",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3497,
    "y": 4562.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "b7009e9a.816708"
      ]
    ]
  },
  {
    "id": "b7009e9a.816708",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3677,
    "y": 4561.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "75b6f667.ff2f48"
      ]
    ]
  },
  {
    "id": "75b6f667.ff2f48",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3806,
    "y": 4561.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e0e9d687.026568"
      ]
    ]
  },
  {
    "id": "93bf9820.efc6f",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3542,
    "y": 4620.13330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "e0e9d687.026568",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3572,
    "y": 4653.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6dcb758c.68fb4c",
        "79d68d78.6f5a44",
        "5d2b0296.8c0914"
      ]
    ]
  },
  {
    "id": "79d68d78.6f5a44",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3753.490966796875,
    "y": 4630.70751953125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "283870b5.b39d78"
      ]
    ]
  },
  {
    "id": "5d2b0296.8c0914",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3742,
    "y": 4670.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "307bdbbc.e5590c"
      ]
    ]
  },
  {
    "id": "283870b5.b39d78",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3913.0625,
    "y": 4628.9931640625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "307bdbbc.e5590c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3903,
    "y": 4671.13330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "6dcb758c.68fb4c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3747,
    "y": 4707.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "22012b3c.a0e674"
      ]
    ]
  },
  {
    "id": "22012b3c.a0e674",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3905,
    "y": 4715.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "7783af35.773e7",
        "e7eec98c.ca59"
      ]
    ]
  },
  {
    "id": "7783af35.773e7",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 4066,
    "y": 4647.13330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "e7eec98c.ca59",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4108,
    "y": 4719.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "e87132f3.ee29c",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4188.6669921875,
    "y": 5517.13330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "cb7342b9.a9c168",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4343.6669921875,
    "y": 5558.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "7a7c44d8.30aa44",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4159.6669921875,
    "y": 5616.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "8bec5884.15258",
        "bb24a1ac.622598"
      ]
    ]
  },
  {
    "id": "8bec5884.15258",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4395.6669921875,
    "y": 5600.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "6d098a3a.3afd8c"
      ]
    ]
  },
  {
    "id": "bb24a1ac.622598",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4394.6669921875,
    "y": 5648.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "6d098a3a.3afd8c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4539.6669921875,
    "y": 5602.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "de9129b3.62ee98",
        "95ed5b5c.afa778",
        "140ab45c.08ae54"
      ]
    ]
  },
  {
    "id": "de9129b3.62ee98",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 4951.667236328125,
    "y": 5737.13330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "95ed5b5c.afa778",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5072.667236328125,
    "y": 5784.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "bc8a01e6.d0596",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 4955.551025390625,
    "y": 5828.0166015625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "140ab45c.08ae54",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4954.334228515625,
    "y": 5869.216796875,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "4e2e6b5c.090cf4",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4815,
    "y": 6123.13330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "8afd899a.01e88",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4981,
    "y": 6162.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "8c1f115c.700108",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4820,
    "y": 6212.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "53961644.a48598",
        "58a624c5.6a1504"
      ]
    ]
  },
  {
    "id": "53961644.a48598",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5053,
    "y": 6206.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "1edcc228.5234b6"
      ]
    ]
  },
  {
    "id": "58a624c5.6a1504",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5054,
    "y": 6256.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "1edcc228.5234b6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5200,
    "y": 6214.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "a2cd952f.42f1c8",
        "75bd12d0.4fb564",
        "ddd98790.fa90d"
      ]
    ]
  },
  {
    "id": "a2cd952f.42f1c8",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5447,
    "y": 6202.13330078125,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "75bd12d0.4fb564",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5568,
    "y": 6249.13330078125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "6c605ae5.2dde2c",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5450.8837890625,
    "y": 6293.0166015625,
    "z": "4138d8f7.da252",
    "wires": []
  },
  {
    "id": "ddd98790.fa90d",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5449.6669921875,
    "y": 6334.216796875,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "e4c8e98f.2e48b8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3577,
    "y": 6107.56689453125,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "5e06fc8.b063184",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2914.25,
    "y": 6105.81689453125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "5aaa3311.116ad4",
        "5f201884.9bf1b"
      ]
    ]
  },
  {
    "id": "5aaa3311.116ad4",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3105.25,
    "y": 6109.81689453125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "42b72649.a2611"
      ]
    ]
  },
  {
    "id": "42b72649.a2611",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3232.25,
    "y": 6108.81689453125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "e4c8e98f.2e48b8"
      ]
    ]
  },
  {
    "id": "5f201884.9bf1b",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3101.25,
    "y": 6179.81689453125,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "1e510c07.00530c"
      ]
    ]
  },
  {
    "id": "382dddaf.06eaa2",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate-w-Protection",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate-w-Protection' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3650.75,
    "y": 6178.900390625,
    "z": "4138d8f7.da252",
    "wires": [
      []
    ]
  },
  {
    "id": "1e510c07.00530c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3234.75,
    "y": 6181.900390625,
    "z": "4138d8f7.da252",
    "wires": [
      [
        "382dddaf.06eaa2"
      ]
    ]
  }
]