[
  {
    "id": "a36be240.71b108",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 181.56666564941406,
    "y": 140.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d32c48f4.aac76"
      ]
    ]
  },
  {
    "id": "d32c48f4.aac76",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 465.85235595703125,
    "y": 201.52385997772217,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "cea08712.e1ad8"
      ]
    ]
  },
  {
    "id": "cea08712.e1ad8",
    "type": "method",
    "name": "method cll-vnf-topology-operation-cll-modify",
    "xml": "<method rpc='cll-vnf-topology-operation-cll-modify' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 471.9952697753906,
    "y": 286.28578186035156,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "81a694dd.59419"
      ]
    ]
  },
  {
    "id": "81a694dd.59419",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 821.5666656494141,
    "y": 345.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "262c4d6b.8ef302",
        "f6c757fc.4ac3d8",
        "5a309470.2c2984"
      ]
    ]
  },
  {
    "id": "262c4d6b.8ef302",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1122.900161743164,
    "y": 616.2160491943359,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "f6c757fc.4ac3d8",
    "type": "save",
    "name": "get service-instance from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
    "comments": "",
    "outputs": 1,
    "x": 1144.328628540039,
    "y": 318.6190643310547,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "46d97ddb.2cdac4",
        "5d275c59.021c7c",
        "49cae57.69a7f9c"
      ]
    ]
  },
  {
    "id": "46d97ddb.2cdac4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1369.328628540039,
    "y": 176.6190643310547,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f1f14b39.ae66d8"
      ]
    ]
  },
  {
    "id": "5d275c59.021c7c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1364.819595336914,
    "y": 246.19309997558594,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e0fe1751.0d1d08"
      ]
    ]
  },
  {
    "id": "49cae57.69a7f9c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1353.328628540039,
    "y": 292.6190643310547,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "91b68660.fcd578"
      ]
    ]
  },
  {
    "id": "83ec93b8.4f0e58",
    "type": "comment",
    "name": "new for TransportSlicing",
    "info": "",
    "comments": "",
    "x": 1123.328628540039,
    "y": 206.6190643310547,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "5a309470.2c2984",
    "type": "execute",
    "name": "execute properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
    "comments": "",
    "outputs": 1,
    "x": 1111.328628540039,
    "y": 258.6190643310547,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "f1f14b39.ae66d8",
    "type": "switchNode",
    "name": "switch allotted-resources_length != 0",
    "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1609.566665649414,
    "y": 173.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "47b460bb.508b6",
        "e9217582.339fb"
      ]
    ]
  },
  {
    "id": "e0fe1751.0d1d08",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1519.6290435791016,
    "y": 249.14552307128906,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "91b68660.fcd578",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1523.566665649414,
    "y": 293.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "47b460bb.508b6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1814.566665649414,
    "y": 210.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4440eff6.476cd"
      ]
    ]
  },
  {
    "id": "e9217582.339fb",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1824.566665649414,
    "y": 137.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "4440eff6.476cd",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1807.566665649414,
    "y": 285.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "3986b18c.a9e7ae",
        "1a55fc09.fb08cc",
        "84bc3e18.c9d6e",
        "63b2fdab.785aac",
        "dfc7a62b.53e19"
      ]
    ]
  },
  {
    "id": "1cb8dc69.891db4",
    "type": "save",
    "name": "get allotted-resource from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2293.566665649414,
    "y": 336.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d730a66e.613558",
        "3006b8b.6e69448",
        "f68070c6.2ea968"
      ]
    ]
  },
  {
    "id": "d730a66e.613558",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2509.566665649414,
    "y": 403.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e3579fa8.43b168"
      ]
    ]
  },
  {
    "id": "3006b8b.6e69448",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2510.057632446289,
    "y": 302.85972595214844,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "6bbc8555.572b94"
      ]
    ]
  },
  {
    "id": "f68070c6.2ea968",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2505.566665649414,
    "y": 352.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a1a8f5c7.a1ada"
      ]
    ]
  },
  {
    "id": "3986b18c.a9e7ae",
    "type": "for",
    "name": "for each allotted-resource",
    "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2010.566665649414,
    "y": 317.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "62594551.389614",
        "1cb8dc69.891db4",
        "1902c403.6fb814",
        "b21e9d77.e0db"
      ]
    ]
  },
  {
    "id": "62594551.389614",
    "type": "set",
    "name": "set the current allotted-resource-id",
    "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
    "comments": "",
    "x": 2290.566665649414,
    "y": 255.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "63b2fdab.785aac",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
    "comments": "",
    "x": 1984.566665649414,
    "y": 267.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "1a55fc09.fb08cc",
    "type": "get-resource",
    "name": "get-resource pnfs-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/pnfs?depth=0' depth = 0\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
    "comments": "",
    "outputs": 1,
    "x": 2027.566665649414,
    "y": 126.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "84bc3e18.c9d6e",
    "type": "get-resource",
    "name": "get-resource logical-links",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
    "comments": "",
    "outputs": 1,
    "x": 2039.566665649414,
    "y": 167.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "70e12844.2efb58",
    "type": "comment",
    "name": "The following two nodes are for PCE",
    "info": "",
    "comments": "",
    "x": 2064.566665649414,
    "y": 79.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "1582189.5e20967",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
    "comments": "",
    "x": 1984.566665649414,
    "y": 213.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "6bbc8555.572b94",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 2688.566665649414,
    "y": 305.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "a1a8f5c7.a1ada",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 2688.504165649414,
    "y": 354.42601013183594,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "e3579fa8.43b168",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2690.504165649414,
    "y": 405.42601013183594,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "234c19dd.3792f6"
      ]
    ]
  },
  {
    "id": "234c19dd.3792f6",
    "type": "save",
    "name": "get allotted-resource relationship from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3025.504165649414,
    "y": 174.426025390625,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "403040fa.29d128",
        "d2e9aaef.69fb08",
        "b24293ea.efd47"
      ]
    ]
  },
  {
    "id": "d2e9aaef.69fb08",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3298.995132446289,
    "y": 67,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "fccce16d.0a609"
      ]
    ]
  },
  {
    "id": "fccce16d.0a609",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3476.566665649414,
    "y": 67.2857666015625,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "b24293ea.efd47",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3294.504165649414,
    "y": 116.426025390625,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "1cbd7c7f.481b8c"
      ]
    ]
  },
  {
    "id": "1cbd7c7f.481b8c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3476.504165649414,
    "y": 116.426025390625,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "403040fa.29d128",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3298.504165649414,
    "y": 167.426025390625,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "6553de3d.0fe06"
      ]
    ]
  },
  {
    "id": "6553de3d.0fe06",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3478.504165649414,
    "y": 167.426025390625,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a3b12c76.41d528"
      ]
    ]
  },
  {
    "id": "a3b12c76.41d528",
    "type": "switchNode",
    "name": "switch allotted-resource.relationship-list not empty",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3044.566665649414,
    "y": 302.2857666015625,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "18fdd62.581202a",
        "6160fe1a.c1358"
      ]
    ]
  },
  {
    "id": "6160fe1a.c1358",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3354.566665649414,
    "y": 309.2857666015625,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "18fdd62.581202a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3353.566665649414,
    "y": 363.2857666015625,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "be5e6e3e.4df078"
      ]
    ]
  },
  {
    "id": "93300adf.7164e",
    "type": "outcome",
    "name": "network-policy",
    "xml": "<outcome value='network-policy'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4098.566665649414,
    "y": 317.2857666015625,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4304d9fb.fb05f8"
      ]
    ]
  },
  {
    "id": "4304d9fb.fb05f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4275.566543579102,
    "y": 310.28564453125,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "57e483bc.d9d9f4",
        "be73e257.6c7c7"
      ]
    ]
  },
  {
    "id": "be5e6e3e.4df078",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3517.566665649414,
    "y": 289.2857666015625,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7cff4b8c.a234a4",
        "44a90848.8f1578"
      ]
    ]
  },
  {
    "id": "7cff4b8c.a234a4",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3798.566665649414,
    "y": 245.2857666015625,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "9f045210.d63268"
      ]
    ]
  },
  {
    "id": "9f045210.d63268",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4060.566665649414,
    "y": 245.2857666015625,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "93300adf.7164e"
      ]
    ]
  },
  {
    "id": "57e483bc.d9d9f4",
    "type": "set",
    "name": "set the 1st network-policy-id",
    "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 4518.566543579102,
    "y": 267.28564453125,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "be73e257.6c7c7",
    "type": "save",
    "name": "get network-policy from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
    "comments": "",
    "outputs": 1,
    "x": 4507.566543579102,
    "y": 322.28564453125,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "626c6aaa.7748cc",
        "19c4911c.086f1f",
        "8b5b13a5.9b5548"
      ]
    ]
  },
  {
    "id": "8b5b13a5.9b5548",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4838.566665649414,
    "y": 230.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "93609ef4.15443"
      ]
    ]
  },
  {
    "id": "93609ef4.15443",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4987.138198852539,
    "y": 230.57151794433594,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "156c88bf.8ed887",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4986.075698852539,
    "y": 274.71177673339844,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "19c4911c.086f1f",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4827.075698852539,
    "y": 274.71177673339844,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "156c88bf.8ed887"
      ]
    ]
  },
  {
    "id": "626c6aaa.7748cc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4834.075698852539,
    "y": 353.71177673339844,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "b50e966f.55aaa8"
      ]
    ]
  },
  {
    "id": "b50e966f.55aaa8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4973.075698852539,
    "y": 353.71177673339844,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "9ee7b526.b79f4",
        "7630b329.2d07cc"
      ]
    ]
  },
  {
    "id": "9ee7b526.b79f4",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5178.566665649414,
    "y": 351.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7630b329.2d07cc",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5177.566665649414,
    "y": 397.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "44a90848.8f1578",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3615.566665649414,
    "y": 361.2857666015625,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "62de4c53.8433ac"
      ]
    ]
  },
  {
    "id": "62de4c53.8433ac",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3895.566665649414,
    "y": 361.2857666015625,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c51917b6.8d7e"
      ]
    ]
  },
  {
    "id": "c51917b6.8d7e",
    "type": "outcome",
    "name": "logical-link",
    "xml": "<outcome value='logical-link'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2266.5667877197266,
    "y": 792.2858734130859,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "8a5f2855.b691a8"
      ]
    ]
  },
  {
    "id": "8a5f2855.b691a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2443.566665649414,
    "y": 785.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "19e426d6.5b9f81",
        "949e5077.38a42"
      ]
    ]
  },
  {
    "id": "19e426d6.5b9f81",
    "type": "set",
    "name": "set the current logical-link-name",
    "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 2686.566665649414,
    "y": 742.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "949e5077.38a42",
    "type": "save",
    "name": "get logical-link from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
    "comments": "",
    "outputs": 1,
    "x": 2675.566665649414,
    "y": 797.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "47392897.e24ae8",
        "e83d2afb.d42318",
        "ddc13460.7744f"
      ]
    ]
  },
  {
    "id": "47392897.e24ae8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2967.057632446289,
    "y": 775.8597259521484,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "23c66f69.49ece8"
      ]
    ]
  },
  {
    "id": "e83d2afb.d42318",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2955.566665649414,
    "y": 820.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "bb790c96.f0e18"
      ]
    ]
  },
  {
    "id": "23c66f69.49ece8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3115.629165649414,
    "y": 776.1454925537109,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "bb790c96.f0e18",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3114.566665649414,
    "y": 820.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "ddc13460.7744f",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2962.566665649414,
    "y": 899.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "ce7226da.e17388"
      ]
    ]
  },
  {
    "id": "ce7226da.e17388",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3101.566665649414,
    "y": 899.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "5b3288fc.6936d8",
        "9980ae35.23ba18",
        "85d1e230.49ed",
        "bf3e43cc.400f1",
        "1f78077d.63f4c1",
        "3d294d62.516b2a",
        "21946f52.f16938",
        "35531714.c0e89",
        "63476979.041bd8",
        "aac95e09.ab90b8",
        "d36e02ea.349dc",
        "ad429900.4c716",
        "456e0186.bd36f8",
        "6feba0d9.6ac0b",
        "c1a83ef0.efb158",
        "8429e2be.11d098",
        "334ad959.cb8dd6",
        "d7f7c5fa.4c43d8",
        "4bfd3207.06ef5c"
      ]
    ]
  },
  {
    "id": "b6d13ba8.f00e28",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3413.566665649414,
    "y": 449.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "5b3288fc.6936d8",
    "type": "execute",
    "name": "execute UUID generator for otn-tunnel-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3400.5665435791016,
    "y": 541.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "6feba0d9.6ac0b",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 3357.5665435791016,
    "y": 586.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "9980ae35.23ba18",
    "type": "set",
    "name": "set network-route-one",
    "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
    "comments": "",
    "x": 3332.5665435791016,
    "y": 649.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "85d1e230.49ed",
    "type": "set",
    "name": "set network-route-two",
    "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
    "comments": "",
    "x": 3333.5665435791016,
    "y": 704.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "bf3e43cc.400f1",
    "type": "save",
    "name": "get network-route-one from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
    "comments": "",
    "outputs": 1,
    "x": 3349.5665435791016,
    "y": 752.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "3a9b85f6.e1582a",
        "d8d8c3b5.17db1",
        "94ad08f1.768ca"
      ]
    ]
  },
  {
    "id": "1f78077d.63f4c1",
    "type": "save",
    "name": "get network-route-two from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
    "comments": "",
    "outputs": 1,
    "x": 3344.566665649414,
    "y": 819.2856292724609,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "92b833b8.0a3038",
        "329b8760.c33988",
        "4b0996dd.3831d8"
      ]
    ]
  },
  {
    "id": "3a9b85f6.e1582a",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3590.566665649414,
    "y": 580.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "11bdd863.93783"
      ]
    ]
  },
  {
    "id": "d8d8c3b5.17db1",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3586.075698852539,
    "y": 629.7117767333984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f63a5915.f8a988"
      ]
    ]
  },
  {
    "id": "94ad08f1.768ca",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3590.075698852539,
    "y": 682.7117767333984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d3671f93.7e55b8"
      ]
    ]
  },
  {
    "id": "11bdd863.93783",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3739.138198852539,
    "y": 579.5715179443359,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "f63a5915.f8a988",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3729.075698852539,
    "y": 629.7117767333984,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "92b833b8.0a3038",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3594.566665649414,
    "y": 736.2856292724609,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "675faf6a.ba5628"
      ]
    ]
  },
  {
    "id": "329b8760.c33988",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3590.075698852539,
    "y": 785.7116546630859,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f0edefdd.7fbf88"
      ]
    ]
  },
  {
    "id": "4b0996dd.3831d8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3573.075698852539,
    "y": 833.7116546630859,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d42db304.4749e8"
      ]
    ]
  },
  {
    "id": "675faf6a.ba5628",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3743.138198852539,
    "y": 735.5713958740234,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "f0edefdd.7fbf88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3733.075698852539,
    "y": 785.7116546630859,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "d3671f93.7e55b8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3751.566665649414,
    "y": 682.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "bbaa9d89.298de8"
      ]
    ]
  },
  {
    "id": "d42db304.4749e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3726.566665649414,
    "y": 833.2856292724609,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "6b53fb28.4b35a4"
      ]
    ]
  },
  {
    "id": "bbaa9d89.298de8",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3923.566665649414,
    "y": 682.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f5f42bcc.193ca8",
        "1ca26f5e.24e681",
        "30c464f6.21891c"
      ]
    ]
  },
  {
    "id": "6b53fb28.4b35a4",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3918.566665649414,
    "y": 767.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4fb6ec71.0d0c04",
        "a3acc90b.3d737",
        "513e1ab4.43497c"
      ]
    ]
  },
  {
    "id": "f5f42bcc.193ca8",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4084.566177368164,
    "y": 418.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "47912c0e.49beac"
      ]
    ]
  },
  {
    "id": "1ca26f5e.24e681",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4086.566177368164,
    "y": 472.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "eb199d13.e7038"
      ]
    ]
  },
  {
    "id": "4fb6ec71.0d0c04",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4099.565933227539,
    "y": 640.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "ab328b3c.b23248"
      ]
    ]
  },
  {
    "id": "a3acc90b.3d737",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4101.565933227539,
    "y": 694.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4b33e71e.9ca98"
      ]
    ]
  },
  {
    "id": "8d16f671.5b9d4",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4394.566177368164,
    "y": 370.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "5b74c380.dcc8d4",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4387.566177368164,
    "y": 468.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "142c8c33.b05574",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4463.565933227539,
    "y": 667.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "fadd6db5.8e746",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4467.565933227539,
    "y": 760.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "bb2a4685.ff5b48",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3545.566665649414,
    "y": 1183.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "8f64a837.4a5cd8"
      ]
    ]
  },
  {
    "id": "d520358c.dbd16",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3555.057632446289,
    "y": 1225.8597869873047,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7a345f50.11385"
      ]
    ]
  },
  {
    "id": "59ef9877.d005",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3543.566665649414,
    "y": 1272.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "de9d99cd.adc298"
      ]
    ]
  },
  {
    "id": "487ac0b4.4acab8",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3245.566665649414,
    "y": 1145.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "21946f52.f16938",
    "type": "save",
    "name": "get p-interface-src from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3288.566665649414,
    "y": 1210.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "bb2a4685.ff5b48",
        "d520358c.dbd16",
        "59ef9877.d005"
      ]
    ]
  },
  {
    "id": "3d294d62.516b2a",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3277.566665649414,
    "y": 1060.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a73d10a4.af1e28",
        "79cd7ec1.3557b8"
      ]
    ]
  },
  {
    "id": "79cd7ec1.3557b8",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3500.566665649414,
    "y": 1046.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "9aeedd68.ffa8d8"
      ]
    ]
  },
  {
    "id": "a73d10a4.af1e28",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3502.566665649414,
    "y": 1079.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "df8ae871.d54098"
      ]
    ]
  },
  {
    "id": "8f64a837.4a5cd8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3718.233169555664,
    "y": 1182.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "fbb3abd1.b96e9",
        "abe82eb0.0cab"
      ]
    ]
  },
  {
    "id": "7a345f50.11385",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3708.6290435791016,
    "y": 1229.145523071289,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "de9d99cd.adc298",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3712.566665649414,
    "y": 1273.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "fbb3abd1.b96e9",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3982.566665649414,
    "y": 1233.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e3260a1d.15ae2",
        "378a4b05.ba3ff4"
      ]
    ]
  },
  {
    "id": "378a4b05.ba3ff4",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4158.566665649414,
    "y": 1283.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7538291f.829488"
      ]
    ]
  },
  {
    "id": "e3260a1d.15ae2",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4160.566665649414,
    "y": 1347.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "25aab61c.c2472a"
      ]
    ]
  },
  {
    "id": "25aab61c.c2472a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4322.566665649414,
    "y": 1343.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7538291f.829488",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4323.566665649414,
    "y": 1280.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "32fabbd2.bab7c4",
        "d6bf1e67.ba86d8"
      ]
    ]
  },
  {
    "id": "df8ae871.d54098",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3645.566665649414,
    "y": 1076.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "9aeedd68.ffa8d8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3648.566665649414,
    "y": 1039.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "12c81e56.7fa00a",
        "87e2ebef.10b6c8"
      ]
    ]
  },
  {
    "id": "12c81e56.7fa00a",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3822.566665649414,
    "y": 995.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "abe82eb0.0cab",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3694.566665649414,
    "y": 1364.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "67c85268.32dfec"
      ]
    ]
  },
  {
    "id": "67c85268.32dfec",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3975.566665649414,
    "y": 1359.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "22f4aa3d.402fe6"
      ]
    ]
  },
  {
    "id": "22f4aa3d.402fe6",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4286.852310180664,
    "y": 1434.1075286865234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4ffa151f.c35edc"
      ]
    ]
  },
  {
    "id": "87e2ebef.10b6c8",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3837.566665649414,
    "y": 1106.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "46c6e0d9.d87168",
        "d98bf1e8.c353c8",
        "76b578a.409ac88"
      ]
    ]
  },
  {
    "id": "46c6e0d9.d87168",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4033.0667877197266,
    "y": 1058.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7281b691.ff84e"
      ]
    ]
  },
  {
    "id": "d98bf1e8.c353c8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4025.0667877197266,
    "y": 1113.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "552f36f.a1294c8"
      ]
    ]
  },
  {
    "id": "76b578a.409ac88",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4030.0667877197266,
    "y": 1170.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "2fdf3cab.68e914"
      ]
    ]
  },
  {
    "id": "2fdf3cab.68e914",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4182.066787719727,
    "y": 1171.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "552f36f.a1294c8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4193.066787719727,
    "y": 1116.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7281b691.ff84e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4177.449111938477,
    "y": 1055.941421508789,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "b1882a27.4b4ab8"
      ]
    ]
  },
  {
    "id": "b1882a27.4b4ab8",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4400.566909790039,
    "y": 1194.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "491c14e2.9cc81c"
      ]
    ]
  },
  {
    "id": "d6bf1e67.ba86d8",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
    "comments": "",
    "x": 4493.566665649414,
    "y": 1238.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "32fabbd2.bab7c4",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
    "comments": "",
    "x": 4494.566665649414,
    "y": 1346.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "8e04ebf5.eee41",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4495.566665649414,
    "y": 1295.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "4ffa151f.c35edc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4493.683853149414,
    "y": 1434.6260833740234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c59a3a79.308e08",
        "e4841ff6.3e7e08",
        "5d11c4a6.df68cc"
      ]
    ]
  },
  {
    "id": "c59a3a79.308e08",
    "type": "set",
    "name": "set source ttp-id",
    "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4708.683853149414,
    "y": 1396.6260833740234,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "e4841ff6.3e7e08",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4705.683853149414,
    "y": 1435.6260833740234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "766fb473.2a452c"
      ]
    ]
  },
  {
    "id": "5d11c4a6.df68cc",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4661.183853149414,
    "y": 1477.6260833740234,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "766fb473.2a452c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4886.183853149414,
    "y": 1434.6260833740234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "91f25d9a.835d38"
      ]
    ]
  },
  {
    "id": "cce9c2da.fea888",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4798.566909790039,
    "y": 1198.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7f9c2923.089b6"
      ]
    ]
  },
  {
    "id": "7f9c2923.089b6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4975.566909790039,
    "y": 1190.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "713d1c50.32082c",
        "1fe6b234.c7fd7e"
      ]
    ]
  },
  {
    "id": "491c14e2.9cc81c",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4595.566909790039,
    "y": 1194.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "cce9c2da.fea888",
        "181e2b72.5adced"
      ]
    ]
  },
  {
    "id": "181e2b72.5adced",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4664.566909790039,
    "y": 1268.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "5ef7391a.b132a8"
      ]
    ]
  },
  {
    "id": "5ef7391a.b132a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4860.566909790039,
    "y": 1268.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "1d2757a1.42bf3"
      ]
    ]
  },
  {
    "id": "91f25d9a.835d38",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5044.183853149414,
    "y": 1434.6260833740234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "83fb3b54.d5c3d"
      ]
    ]
  },
  {
    "id": "83fb3b54.d5c3d",
    "type": "set",
    "name": "set source tunnel tp ip",
    "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5251.183853149414,
    "y": 1434.6260833740234,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "1fe6b234.c7fd7e",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5200.566909790039,
    "y": 1186.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f445a11a.71bc2",
        "1ca051d1.62d8c6",
        "b5779702.ec152"
      ]
    ]
  },
  {
    "id": "713d1c50.32082c",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainA id",
    "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5230.566909790039,
    "y": 1134.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "f445a11a.71bc2",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5410.566909790039,
    "y": 1177.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "97cfd71c.893b9"
      ]
    ]
  },
  {
    "id": "1ca051d1.62d8c6",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5402.566909790039,
    "y": 1232.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f71936fa.5c6ed8"
      ]
    ]
  },
  {
    "id": "b5779702.ec152",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5407.566909790039,
    "y": 1289.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "2f95de59.c21562"
      ]
    ]
  },
  {
    "id": "2f95de59.c21562",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5559.566909790039,
    "y": 1290.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "f71936fa.5c6ed8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5570.566909790039,
    "y": 1235.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "97cfd71c.893b9",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5554.949234008789,
    "y": 1174.941421508789,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "3725abc9.8fe81c"
      ]
    ]
  },
  {
    "id": "1d2757a1.42bf3",
    "type": "set",
    "name": "set domainA ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5123.566909790039,
    "y": 1271.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "3725abc9.8fe81c",
    "type": "set",
    "name": "set controller domainA data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5741.566909790039,
    "y": 1171.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "67aa7525.7bae1c",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4382.566177368164,
    "y": 406.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "18cc69a3.9aa206",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4373.566177368164,
    "y": 504.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "47912c0e.49beac",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4207.566177368164,
    "y": 412.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "8d16f671.5b9d4",
        "67aa7525.7bae1c"
      ]
    ]
  },
  {
    "id": "eb199d13.e7038",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4213.566177368164,
    "y": 476.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "5b74c380.dcc8d4",
        "18cc69a3.9aa206"
      ]
    ]
  },
  {
    "id": "ab328b3c.b23248",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4227.565933227539,
    "y": 640.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "142c8c33.b05574",
        "53d3049.af6e8fc"
      ]
    ]
  },
  {
    "id": "4b33e71e.9ca98",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4230.565933227539,
    "y": 693.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "fadd6db5.8e746",
        "2cd10454.6fd4ec"
      ]
    ]
  },
  {
    "id": "53d3049.af6e8fc",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4449.565933227539,
    "y": 707.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "2cd10454.6fd4ec",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4452.565933227539,
    "y": 798.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "4fd998b7.acd798",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3608.566665649414,
    "y": 1744.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "de0c38ee.f76ef8",
        "25935580.28bbea"
      ]
    ]
  },
  {
    "id": "170f6ee1.76ff39",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3435.900161743164,
    "y": 1745.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4fd998b7.acd798"
      ]
    ]
  },
  {
    "id": "6aad81bd.cb4268",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3445.391128540039,
    "y": 1787.8597869873047,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "54bd0023.9501c8"
      ]
    ]
  },
  {
    "id": "e02aca99.393958",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3433.900161743164,
    "y": 1834.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "20e4fbbc.46dd64"
      ]
    ]
  },
  {
    "id": "54bd0023.9501c8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3598.9625396728516,
    "y": 1791.145523071289,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "20e4fbbc.46dd64",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3602.900161743164,
    "y": 1835.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "de0c38ee.f76ef8",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3894.900161743164,
    "y": 1748.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "36c6c2be.762bee",
        "9dad2b66.a09d3"
      ]
    ]
  },
  {
    "id": "9dad2b66.a09d3",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4117.900161743164,
    "y": 1703.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "36a66ce5.93da74"
      ]
    ]
  },
  {
    "id": "36c6c2be.762bee",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4119.900161743164,
    "y": 1767.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4c6cb6f3.89667"
      ]
    ]
  },
  {
    "id": "4c6cb6f3.89667",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4278.900161743164,
    "y": 1786.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "36a66ce5.93da74",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4282.900161743164,
    "y": 1700.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "5a5e37bd.3076e",
        "6e346008.c0c8d"
      ]
    ]
  },
  {
    "id": "63476979.041bd8",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3207.900161743164,
    "y": 1780.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "170f6ee1.76ff39",
        "6aad81bd.cb4268",
        "e02aca99.393958"
      ]
    ]
  },
  {
    "id": "dbdf27a7.fc5e4",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3168.900161743164,
    "y": 1724.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "35531714.c0e89",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3220.900161743164,
    "y": 1526.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "1026191c.92617f",
        "af47cd19.1e85a"
      ]
    ]
  },
  {
    "id": "af47cd19.1e85a",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3443.900161743164,
    "y": 1512.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "79bebb4c.23a30c"
      ]
    ]
  },
  {
    "id": "1026191c.92617f",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3445.900161743164,
    "y": 1545.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f83e847f.4ec13"
      ]
    ]
  },
  {
    "id": "f83e847f.4ec13",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3588.900161743164,
    "y": 1542.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "79bebb4c.23a30c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3591.900161743164,
    "y": 1505.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "3fb5f800.679e",
        "4b785447.3b4bdc"
      ]
    ]
  },
  {
    "id": "3fb5f800.679e",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3785.900161743164,
    "y": 1508.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "25935580.28bbea",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3838.900161743164,
    "y": 1867.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e6fe79a3.e9ea5"
      ]
    ]
  },
  {
    "id": "e6fe79a3.e9ea5",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4044.900161743164,
    "y": 1867.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "122e4fb.7ae86b"
      ]
    ]
  },
  {
    "id": "122e4fb.7ae86b",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4262.185806274414,
    "y": 1866.1075286865234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "837cca48.ec2188"
      ]
    ]
  },
  {
    "id": "4b785447.3b4bdc",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3807.900161743164,
    "y": 1576.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c81ddea8.acca2",
        "677cee1e.585708",
        "5b3f6a5a.a599cc"
      ]
    ]
  },
  {
    "id": "c81ddea8.acca2",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4003.4002838134766,
    "y": 1528.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4e15930.1f2346c"
      ]
    ]
  },
  {
    "id": "677cee1e.585708",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3995.4002838134766,
    "y": 1583.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "77c7f195.03bd88"
      ]
    ]
  },
  {
    "id": "5b3f6a5a.a599cc",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4000.4002838134766,
    "y": 1640.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "44cfcdb.eef3bb4"
      ]
    ]
  },
  {
    "id": "44cfcdb.eef3bb4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4152.400283813477,
    "y": 1641.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "77c7f195.03bd88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4163.400283813477,
    "y": 1586.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "4e15930.1f2346c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4147.782608032227,
    "y": 1525.9415435791016,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "3bb66f6b.2423e"
      ]
    ]
  },
  {
    "id": "5a5e37bd.3076e",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
    "comments": "",
    "x": 4452.900161743164,
    "y": 1661.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "6e346008.c0c8d",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
    "comments": "",
    "x": 4453.900161743164,
    "y": 1766.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "f684cc96.93a36",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4448.900161743164,
    "y": 1715.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "837cca48.ec2188",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4469.017349243164,
    "y": 1855.626205444336,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4370bd5a.9f5934",
        "1bda5a20.b54946",
        "7ecac2a.84cd6bc"
      ]
    ]
  },
  {
    "id": "4370bd5a.9f5934",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4684.017349243164,
    "y": 1817.626205444336,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "1bda5a20.b54946",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4681.017349243164,
    "y": 1856.626205444336,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e1da362d.0aaf38"
      ]
    ]
  },
  {
    "id": "7ecac2a.84cd6bc",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4636.517349243164,
    "y": 1898.626205444336,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "e1da362d.0aaf38",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4861.517349243164,
    "y": 1855.626205444336,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4842e5f.6c9081c"
      ]
    ]
  },
  {
    "id": "4842e5f.6c9081c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5019.517349243164,
    "y": 1855.626205444336,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d2ac7d5.8c2918"
      ]
    ]
  },
  {
    "id": "d2ac7d5.8c2918",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5226.517349243164,
    "y": 1855.626205444336,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "d8873c57.456df",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4729.900161743164,
    "y": 1544.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "bf2c165b.0d277"
      ]
    ]
  },
  {
    "id": "bf2c165b.0d277",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4906.900161743164,
    "y": 1536.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7f001b92.6c2014",
        "47ea9781.67241"
      ]
    ]
  },
  {
    "id": "3bb66f6b.2423e",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4331.900161743164,
    "y": 1540.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c9ef5f55.13159"
      ]
    ]
  },
  {
    "id": "c9ef5f55.13159",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4526.900161743164,
    "y": 1540.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d8873c57.456df",
        "e212cfa3.d9b94"
      ]
    ]
  },
  {
    "id": "47ea9781.67241",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5114.900161743164,
    "y": 1543.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "46f5dd83.067904",
        "97b572f2.cabba",
        "90953f01.0039c"
      ]
    ]
  },
  {
    "id": "666bc3f3.f942ac",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4908.900161743164,
    "y": 1609.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "af972400.78ec68"
      ]
    ]
  },
  {
    "id": "e212cfa3.d9b94",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4731.900161743164,
    "y": 1617.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "666bc3f3.f942ac"
      ]
    ]
  },
  {
    "id": "7f001b92.6c2014",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainB id",
    "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5144.900161743164,
    "y": 1491.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "af972400.78ec68",
    "type": "set",
    "name": "set domainB ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5090.900161743164,
    "y": 1673.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "46f5dd83.067904",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5324.900161743164,
    "y": 1534.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "9ccd655c.46849"
      ]
    ]
  },
  {
    "id": "97b572f2.cabba",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5316.900161743164,
    "y": 1589.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4f6c8e9e.87ef88"
      ]
    ]
  },
  {
    "id": "90953f01.0039c",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5321.900161743164,
    "y": 1646.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "5fa05e22.fdafa8"
      ]
    ]
  },
  {
    "id": "5fa05e22.fdafa8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5473.900161743164,
    "y": 1647.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "4f6c8e9e.87ef88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5484.900161743164,
    "y": 1592.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "9ccd655c.46849",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5469.282485961914,
    "y": 1531.9415435791016,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "9bc41fad.100098"
      ]
    ]
  },
  {
    "id": "9bc41fad.100098",
    "type": "set",
    "name": "set controller domainB data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5683.900161743164,
    "y": 1528.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "aac95e09.ab90b8",
    "type": "set",
    "name": "set LEAF stuff",
    "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop + '-' + $tmp.aai.network-route-A.logical-interface-id`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
    "comments": "",
    "x": 3272.566665649414,
    "y": 1350.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "c158f2ac.9bf138",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4549.566177368164,
    "y": 490.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "1c9be409.368d34",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4617.565933227539,
    "y": 692.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "d36e02ea.349dc",
    "type": "set",
    "name": "set ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop + '-' + $tmp.aai.network-route-B.logical-interface-id`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
    "comments": "",
    "x": 3168.566665649414,
    "y": 1911.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "ad429900.4c716",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3430.566665649414,
    "y": 2824.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "456e0186.bd36f8",
    "type": "switchNode",
    "name": "switch found-middle-man?",
    "xml": "<switch test='`$found-middle-man`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3307.566665649414,
    "y": 2934.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "1a6260f2.b38e77",
        "151ade37.c8cbba"
      ]
    ]
  },
  {
    "id": "1a6260f2.b38e77",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3491.566665649414,
    "y": 2913.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "ba23a41e.50085"
      ]
    ]
  },
  {
    "id": "151ade37.c8cbba",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3027.566665649414,
    "y": 4499.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f3de805.eee03"
      ]
    ]
  },
  {
    "id": "e429a394.1622b",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3538.566665649414,
    "y": 5084.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "ee345eb7.dd48b",
        "78110e1d.34a828",
        "399c8052.14794",
        "7855b68f.e847e",
        "7a90992b.99ef7",
        "2987a87c.d9af38"
      ]
    ]
  },
  {
    "id": "ba23a41e.50085",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6204.566665649414,
    "y": 1733.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "18ef4940.2cc947",
        "10bd34b9.d586b3",
        "c874118.0dda17",
        "e01a8555.4482f8",
        "48a8a99c.f1479",
        "65f7f754.67c0f8",
        "a9eb431c.c27b3",
        "9d81d981.8859c8",
        "9ef240b6.5338",
        "56d51e0c.3fbb48",
        "f1e4ada5.0d8a28",
        "9aa0ecc9.b21a38",
        "1d111c3e.37b394",
        "b8b78e91.784a68",
        "43c8a40f.539994",
        "b8201609.6ece6",
        "6d3e15fd.90249c",
        "7bb73f8a.b1ab48",
        "c917b2c2.68a8d",
        "f8b29c6c.19b2e8",
        "374c089f.fa2538",
        "c9cb4066.4924"
      ]
    ]
  },
  {
    "id": "9ef240b6.5338",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6575.566665649414,
    "y": 1656.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "18ef4940.2cc947",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6529.566665649414,
    "y": 1754.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "10bd34b9.d586b3",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6665.566665649414,
    "y": 1801.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "577f8c89.2e206c",
    "type": "comment",
    "name": "Create ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 6496.566665649414,
    "y": 1605.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "267ba619.c9af8a",
    "type": "comment",
    "name": "create middle man connectivity and ...",
    "info": "1- create middle man connectivity\n2- create relation with all connectivities\n   in the path\n3- put srcTtp (+dstTtp) somewhere in the\n   vpn-binding -> this is for later on to find\n   which OTN tunnel's bandwidth has to be increased.\n5- create UNIs\n4- create relationship to UNIs",
    "comments": "",
    "x": 6992.566665649414,
    "y": 2341.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "c874118.0dda17",
    "type": "execute",
    "name": "execute UUID generator for connectivity middle-man",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-middle-man-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6556.566665649414,
    "y": 2380.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "e01a8555.4482f8",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-middle-man-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-middle-man-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<!--The followings are not needed for the middle-man-connectivity-->\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />-->\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='mdsc' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6504.566665649414,
    "y": 2431.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "48a8a99c.f1479",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-middle-man-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-middle-man-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6640.566665649414,
    "y": 2478.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "52e24832.034e88",
    "type": "comment",
    "name": "Create MIDDLE-MAN connectivity",
    "info": "",
    "comments": "",
    "x": 6497.566665649414,
    "y": 2340.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "debe9e97.cd8f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6927.566665649414,
    "y": 2537.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "65f7f754.67c0f8",
    "type": "save",
    "name": "get middle-man connectivity from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $prop.connectivity-middle-man-uuid\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"middle-man-conn\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 6518.566665649414,
    "y": 2584.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "85091e88.c72c7",
        "7dba75fe.6c5c54",
        "3df3f46e.6f2edc"
      ]
    ]
  },
  {
    "id": "85091e88.c72c7",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6765.566665649414,
    "y": 2538.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "debe9e97.cd8f"
      ]
    ]
  },
  {
    "id": "7dba75fe.6c5c54",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6766.057632446289,
    "y": 2583.8597869873047,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "3c115d7c.ba4cb2"
      ]
    ]
  },
  {
    "id": "3df3f46e.6f2edc",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6763.566665649414,
    "y": 2627.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "3193d0af.6d5de8"
      ]
    ]
  },
  {
    "id": "3c115d7c.ba4cb2",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 6928.629043579102,
    "y": 2584.145523071289,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "3193d0af.6d5de8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 6932.566665649414,
    "y": 2628.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "43c8a40f.539994",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6572.566665649414,
    "y": 2900.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "b8201609.6ece6",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6575.566665649414,
    "y": 2945.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "7bb73f8a.b1ab48",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6567.566665649414,
    "y": 2699.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "c917b2c2.68a8d",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6569.566665649414,
    "y": 2746.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "8bd704e.d0521f8",
    "type": "comment",
    "name": "The following two will be done in F1",
    "info": "",
    "comments": "",
    "x": 6488.566665649414,
    "y": 2853.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "e06e4d85.94c0f8",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4488.566909790039,
    "y": 5246.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "ee345eb7.dd48b",
    "type": "switchNode",
    "name": "switch no-pce-call",
    "xml": "<switch test='`$no-pce-call`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3753.566665649414,
    "y": 5065.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c561431f.f6e0f",
        "49468e15.59ced"
      ]
    ]
  },
  {
    "id": "49468e15.59ced",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3925.566665649414,
    "y": 5062.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "997265fa.7d7f1"
      ]
    ]
  },
  {
    "id": "c561431f.f6e0f",
    "type": "outcomeFalse",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3877.566665649414,
    "y": 5909.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e1ebd454.f4cdb8"
      ]
    ]
  },
  {
    "id": "604349fc.e0a658",
    "type": "comment",
    "name": "1 --> PCE is needed",
    "info": "",
    "comments": "",
    "x": 3938.566665649414,
    "y": 5032.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "8edd5f5.78488a",
    "type": "comment",
    "name": "2 --> no need to call PCE",
    "info": "",
    "comments": "",
    "x": 3948.566665649414,
    "y": 5867.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "a9eb431c.c27b3",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6574.566665649414,
    "y": 3079.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "997265fa.7d7f1",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4101.566665649414,
    "y": 5064.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "bcf60ed5.161338",
        "8a063d24.55e818",
        "27d5e3fa.d1fc64",
        "eb431097.375ee8",
        "146ee230.44ecc6",
        "a86e4db4.94773",
        "e06e4d85.94c0f8",
        "b311bb82.023748",
        "f2f4b1c2.9aee8"
      ]
    ]
  },
  {
    "id": "5b2e4a79.26fcd4",
    "type": "comment",
    "name": "Use the middle-man-conn.eth-srv-name for the LEAF connectivity's eth srv name",
    "info": "",
    "comments": "",
    "x": 5545.566421508789,
    "y": 4989.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "bcf60ed5.161338",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4347.566909790039,
    "y": 5745.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "9d81d981.8859c8",
    "type": "save",
    "name": "save connectivityB relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6581.566665649414,
    "y": 1995.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "2ed6ffae.15a9",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid=tmp.ROOT.uni-p-interface-long",
    "xml": "<set>\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />\n",
    "comments": "",
    "x": 6631.566665649414,
    "y": 1698.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "56d51e0c.3fbb48",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6578.566665649414,
    "y": 1286.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "f1e4ada5.0d8a28",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6526.566665649414,
    "y": 1334.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "9aa0ecc9.b21a38",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6654.566665649414,
    "y": 1381.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "59c3b9a9.bee328",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 6491.566665649414,
    "y": 1244.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "1d111c3e.37b394",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />",
    "comments": "",
    "outputs": 1,
    "x": 6488.566665649414,
    "y": 1472.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "b8b78e91.784a68",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6581.566665649414,
    "y": 1525.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "b1590465.c06e9",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 6472.566665649414,
    "y": 1428.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "4fd8fae5.4af44c",
    "type": "comment",
    "name": "Create ROOT UNI",
    "info": "",
    "comments": "",
    "x": 6478.566665649414,
    "y": 1878.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "eb431097.375ee8",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4414.566421508789,
    "y": 4997.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "111c6f80.d662f1",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4398.566421508789,
    "y": 4953.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "f6ae128e.43e818",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 5145.566421508789,
    "y": 4984.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "273e73f0.d7fa54",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 5232.566421508789,
    "y": 5026.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "78d97bc5.d96984",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$middle-man-conn.etht-svc-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 5180.566421508789,
    "y": 5074.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "464f510d.72c448",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5308.566421508789,
    "y": 5121.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "a86e4db4.94773",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4476.566909790039,
    "y": 5288.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "da1f3bba.7aa878",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4459.566909790039,
    "y": 5350.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "8a063d24.55e818",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4570.566909790039,
    "y": 5392.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "cfd66aba.0bb4b",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5027.566421508789,
    "y": 5563.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "d34f3733.82b438",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4337.566421508789,
    "y": 6261.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "a5e6b4f4.57a38",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4270.566421508789,
    "y": 6215.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "ea2fb779.5cdf1",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4219.566421508789,
    "y": 6166.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "cea8b041.47c29",
    "type": "save",
    "name": "save the-connectivity relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5002.566665649414,
    "y": 6372.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "27d5e3fa.d1fc64",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4397.566909790039,
    "y": 5449.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "76f33e89.9589e",
        "2dcff9f1.2ed2e6"
      ]
    ]
  },
  {
    "id": "76f33e89.9589e",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4608.566909790039,
    "y": 5449.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "53185310.1e3aac"
      ]
    ]
  },
  {
    "id": "53185310.1e3aac",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4764.566909790039,
    "y": 5445.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "cfd66aba.0bb4b",
        "d5527664.91c39",
        "7871c32f.9d91cc"
      ]
    ]
  },
  {
    "id": "2dcff9f1.2ed2e6",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4604.566909790039,
    "y": 5497.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "74066864.f6923"
      ]
    ]
  },
  {
    "id": "74066864.f6923",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 4752.566909790039,
    "y": 5492.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "3e678579.1103ca",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5269.566421508789,
    "y": 5192.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "1902c403.6fb814",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2436.566665649414,
    "y": 151.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "b21e9d77.e0db",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 2370.566665649414,
    "y": 187.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "9b031e24.c71f38",
    "type": "comment",
    "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
    "info": "",
    "comments": "",
    "x": 2555.566665649414,
    "y": 114.28575134277344,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "2b3dd3ef.75d514",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 4304.566421508789,
    "y": 6327.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "44cea2e2.e10b04",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4437.566421508789,
    "y": 6375.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "32da350f.e91202",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4256.566421508789,
    "y": 6433.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "5b9298a4.1ed118",
        "7163c900.606df8"
      ]
    ]
  },
  {
    "id": "5b9298a4.1ed118",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4449.566421508789,
    "y": 6434.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "5b9bdf25.e9536"
      ]
    ]
  },
  {
    "id": "5b9bdf25.e9536",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Connectivity should have been created' />\n",
    "comments": "",
    "x": 4605.566421508789,
    "y": 6431.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7163c900.606df8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4453.566421508789,
    "y": 6478.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "1fa38b13.5c2175"
      ]
    ]
  },
  {
    "id": "1fa38b13.5c2175",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4592.566421508789,
    "y": 6473.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "cea8b041.47c29",
        "ab589b66.44dca",
        "bec4134.89e1d7",
        "93569c40.48d5d8",
        "21f4d700.883112",
        "10882f4c.ff2cd1",
        "2d523fb9.b5b8c8",
        "54f95ba1.fd5b14",
        "b2a13863.b94908",
        "8b96c2fb.4933a8",
        "ac6c48.3b961bb8",
        "f3a1ad9d.6eb4a8",
        "f140933b.8acec"
      ]
    ]
  },
  {
    "id": "2d523fb9.b5b8c8",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4789.566421508789,
    "y": 7152.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "85a32ae2.fd7ca",
        "2bd9412f.d2a736",
        "14d3449f.8afb4b"
      ]
    ]
  },
  {
    "id": "85a32ae2.fd7ca",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4984.566635131836,
    "y": 7128.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "802d4aff.ed19c"
      ]
    ]
  },
  {
    "id": "2bd9412f.d2a736",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4977.057601928711,
    "y": 7164.859756469727,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "1d4f1ec2.11c199"
      ]
    ]
  },
  {
    "id": "14d3449f.8afb4b",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4974.566635131836,
    "y": 7208.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "1bbce323.6599c5"
      ]
    ]
  },
  {
    "id": "802d4aff.ed19c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5156.566635131836,
    "y": 7126.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "dd0eed5a.ced22"
      ]
    ]
  },
  {
    "id": "1d4f1ec2.11c199",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5139.629013061523,
    "y": 7165.145492553711,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "1bbce323.6599c5",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5141.566635131836,
    "y": 7207.285720825195,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "dd0eed5a.ced22",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5397.566421508789,
    "y": 7160.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "315a5202.03b08e"
      ]
    ]
  },
  {
    "id": "315a5202.03b08e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5634.566421508789,
    "y": 7156.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "ffe78e55.58a2"
      ]
    ]
  },
  {
    "id": "406bc3a2.6f4c5c",
    "type": "switchNode",
    "name": "switch vpnuuid is for this slice",
    "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5901.566421508789,
    "y": 7122.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "efd6821.7606e8",
        "dc64cef5.f4e71"
      ]
    ]
  },
  {
    "id": "efd6821.7606e8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6082.566421508789,
    "y": 7148.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "ffe78e55.58a2"
      ]
    ]
  },
  {
    "id": "dc64cef5.f4e71",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6081.566421508789,
    "y": 7101.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "ffe78e55.58a2",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4598.566635131836,
    "y": 7296.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "b29b6e84.3ec808"
      ]
    ]
  },
  {
    "id": "aa51daf8.235328",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 5674.566421508789,
    "y": 7328.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "3e921b26.a61a44",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4887.566635131836,
    "y": 7064.285720825195,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "10882f4c.ff2cd1",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4771.566421508789,
    "y": 6948.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "649ceff4.e9cc5",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5116.566421508789,
    "y": 6779.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "b90f13f5.a31078"
      ]
    ]
  },
  {
    "id": "b90f13f5.a31078",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5336.566421508789,
    "y": 6785.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4aedc9d4.9239e8"
      ]
    ]
  },
  {
    "id": "4aedc9d4.9239e8",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5521.566421508789,
    "y": 6784.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "8b4beaf0.bd49c8"
      ]
    ]
  },
  {
    "id": "8b4beaf0.bd49c8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5713.566421508789,
    "y": 6787.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "67fe9740.178f68"
      ]
    ]
  },
  {
    "id": "67fe9740.178f68",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5922.566421508789,
    "y": 6785.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "54f95ba1.fd5b14",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4823.566421508789,
    "y": 6773.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "649ceff4.e9cc5"
      ]
    ]
  },
  {
    "id": "bec4134.89e1d7",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4831.566421508789,
    "y": 6666.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "88715119.2c7c68",
        "d632295f.b3442",
        "973f1048.6edbb"
      ]
    ]
  },
  {
    "id": "88715119.2c7c68",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5067.566421508789,
    "y": 6649.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "d632295f.b3442",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5064.566421508789,
    "y": 6690.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "973f1048.6edbb",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5078.566421508789,
    "y": 6730.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "93569c40.48d5d8",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4767.566421508789,
    "y": 6825.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "21f4d700.883112",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4775.566421508789,
    "y": 6883.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "ab589b66.44dca",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4780.566421508789,
    "y": 6623.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "9ae90ae.274be78",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4895.566421508789,
    "y": 6575.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "b29b6e84.3ec808",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4888.566635131836,
    "y": 7291.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "ce3c2be3.503e38",
        "f854c5fa.9550e8"
      ]
    ]
  },
  {
    "id": "ce3c2be3.503e38",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5144.566635131836,
    "y": 7263.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "eb8749e3.22de7"
      ]
    ]
  },
  {
    "id": "f854c5fa.9550e8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5144.566635131836,
    "y": 7312.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "268cfed4.3ed072",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5410.566635131836,
    "y": 7304.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "acce766e.9c38a",
        "aa51daf8.235328",
        "f459d871.345a18"
      ]
    ]
  },
  {
    "id": "2f1cf9f0.50adbe",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 5802.566421508789,
    "y": 7382.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "f459d871.345a18",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<!--<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $gfp`' />\n\n<parameter name='operational-status' value='Modified' />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5772.566421508789,
    "y": 7442.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "acce766e.9c38a",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 5679.566421508789,
    "y": 7270.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "e1ebd454.f4cdb8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4029.566665649414,
    "y": 5908.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a5e6b4f4.57a38",
        "2b3dd3ef.75d514",
        "44cea2e2.e10b04",
        "32da350f.e91202",
        "d34f3733.82b438"
      ]
    ]
  },
  {
    "id": "6a9fab50.2b8dbc",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4772.566421508789,
    "y": 6723.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "b2a13863.b94908",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4895.566665649414,
    "y": 6453.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "eedbe7ee.2e17",
    "type": "comment",
    "name": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "info": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "comments": "",
    "x": 5032.566665649414,
    "y": 6403.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "6d3e15fd.90249c",
    "type": "save",
    "name": "save ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6494.566665649414,
    "y": 1937.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "74dbf9c4.a2cac",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3760.566665649414,
    "y": 1331.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "691659c.355b428",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3898.566665649414,
    "y": 1819.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "b49b44ed.34c0f",
    "type": "comment",
    "name": "TEMPORARY REMOVING THE FOLLOWING TWO NODES",
    "info": "",
    "comments": "",
    "x": 6455.566665649414,
    "y": 2649.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "78110e1d.34a828",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3747.566665649414,
    "y": 4925.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "399c8052.14794",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3880.566665649414,
    "y": 4973.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "146ee230.44ecc6",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4425.566421508789,
    "y": 5053.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "939f1799.36d378",
        "a646c5c3.cf3a8"
      ]
    ]
  },
  {
    "id": "939f1799.36d378",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4618.566421508789,
    "y": 5054.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "bace55c5.99f12"
      ]
    ]
  },
  {
    "id": "a646c5c3.cf3a8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4622.566421508789,
    "y": 5098.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4039180c.15981"
      ]
    ]
  },
  {
    "id": "4039180c.15981",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4761.566421508789,
    "y": 5093.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7ef13e15.cc2028",
        "de57bd6c.da094",
        "2e1e6c02.39beec"
      ]
    ]
  },
  {
    "id": "bace55c5.99f12",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4761.566421508789,
    "y": 5050.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "273e73f0.d7fa54",
        "78d97bc5.d96984",
        "464f510d.72c448",
        "3e678579.1103ca"
      ]
    ]
  },
  {
    "id": "7ef13e15.cc2028",
    "type": "set",
    "name": "set prop.connectivity-domainA-uuid",
    "xml": "<set>\n<parameter name='uuid.connectivity-domainA-uuid' value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5155.566421508789,
    "y": 5344.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "e4f0f550.01eee8",
    "type": "comment",
    "name": "populate connectivity-A variable in the context map",
    "info": "",
    "comments": "",
    "x": 5162.566421508789,
    "y": 5298.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "8b96c2fb.4933a8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4952.566635131836,
    "y": 7013.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "de57bd6c.da094",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5274.566421508789,
    "y": 5397.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "d5527664.91c39",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5156.566421508789,
    "y": 5615.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "9e36b46b.83aaa",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3702.566665649414,
    "y": 4374.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "dba3b4ab.601e58",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4036.566665649414,
    "y": 4557.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "7855b68f.e847e",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3648.566665649414,
    "y": 4424.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "27b19c0a.0b96bc",
        "3755d72e.8ad5d8",
        "e7a32b57.4d11"
      ]
    ]
  },
  {
    "id": "3755d72e.8ad5d8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3876.057632446289,
    "y": 4396.859725952148,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "8db24f9.ca62db"
      ]
    ]
  },
  {
    "id": "e7a32b57.4d11",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3871.566665649414,
    "y": 4441.285690307617,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c7878375.542c6"
      ]
    ]
  },
  {
    "id": "8db24f9.ca62db",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4038.629165649414,
    "y": 4396.145431518555,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "c7878375.542c6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4039.566665649414,
    "y": 4441.285690307617,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "32e0d279.a6eca6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3824.566665649414,
    "y": 4514.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a8a8e968.d6c638",
        "dba3b4ab.601e58"
      ]
    ]
  },
  {
    "id": "27b19c0a.0b96bc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3655.566665649414,
    "y": 4514.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "32e0d279.a6eca6"
      ]
    ]
  },
  {
    "id": "a8a8e968.d6c638",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 4013.566665649414,
    "y": 4506.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7a90992b.99ef7",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $middle-man-conn.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$middle-man-conn.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3855.566665649414,
    "y": 4801.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "258c7b31.2a3584",
    "type": "comment",
    "name": "We are doing modify but middle man does not exist ==> it is definitely a new logical link",
    "info": "",
    "comments": "",
    "x": 3638.566665649414,
    "y": 2884.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "5517fa40.8d63c4",
    "type": "comment",
    "name": "We are doing modify and middle man exists, check if LEAF UNI already exists in AAI or not. If yes, consider the possible bw change. If it does not, then it is a new link needs to be added",
    "info": "",
    "comments": "",
    "x": 2843.566665649414,
    "y": 4446.285751342773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "872d6ff1.04a5b8",
    "type": "exists",
    "name": "exists LEAF UNI",
    "xml": "<exists plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3266.566665649414,
    "y": 4719.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "99cdf1e3.76daa8",
        "8ce192f6.43321"
      ]
    ]
  },
  {
    "id": "f3de805.eee03",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3098.566665649414,
    "y": 4722.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "872d6ff1.04a5b8"
      ]
    ]
  },
  {
    "id": "8ce192f6.43321",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3429.566665649414,
    "y": 4738.285751342773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e429a394.1622b"
      ]
    ]
  },
  {
    "id": "99cdf1e3.76daa8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3465.566665649414,
    "y": 3345.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "45ad7f75.acf2c"
      ]
    ]
  },
  {
    "id": "894a7fb9.0e7198",
    "type": "switchNode",
    "name": "switch leafuni.data-source == gfp",
    "xml": "<switch test='`$tmp.aai.leafuni.data-source == $gfp`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3814.566665649414,
    "y": 3187.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "fc9baa20.3cffe",
        "9e39c7e6.dd8a38"
      ]
    ]
  },
  {
    "id": "fc9baa20.3cffe",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4019.566665649414,
    "y": 3183.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "9e39c7e6.dd8a38",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4021.566665649414,
    "y": 3233.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d198772b.5f2b"
      ]
    ]
  },
  {
    "id": "d198772b.5f2b",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4177.566665649414,
    "y": 3239.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "23f5cc1d.41fbe4",
        "fed6a907.2b3e28",
        "fdf1da6c.032aa",
        "51c677f3.cc82f"
      ]
    ]
  },
  {
    "id": "23f5cc1d.41fbe4",
    "type": "set",
    "name": "set bwModified",
    "xml": "<set>\n<parameter name='bwModified' value=\"true\" />\n\n\n",
    "comments": "",
    "x": 4403.566909790039,
    "y": 2980.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "84e42d5e.8f28b8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4902.566390991211,
    "y": 4277.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7591914.05111f",
        "4f3fe980.0cfee8"
      ]
    ]
  },
  {
    "id": "4f3fe980.0cfee8",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
    "comments": "",
    "x": 5104.566146850586,
    "y": 4244.285720825195,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7cabc91f.298798",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4788.566635131836,
    "y": 4454.28547668457,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "6e8a6a19.d50624",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4785.628768920898,
    "y": 4403.145492553711,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "83166069.2f46b",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.the-connectivity.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4368.566390991211,
    "y": 4277.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "b23ac34.b9f8bc"
      ]
    ]
  },
  {
    "id": "b23ac34.b9f8bc",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.the-connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4573.566390991211,
    "y": 4277.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "37a61cf7.b75674"
      ]
    ]
  },
  {
    "id": "37a61cf7.b75674",
    "type": "outcome",
    "name": "vpn-binding",
    "xml": "<outcome value='vpn-binding'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4739.566390991211,
    "y": 4277.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "84e42d5e.8f28b8"
      ]
    ]
  },
  {
    "id": "7591914.05111f",
    "type": "save",
    "name": "get vpn-binding from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.the-connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4411.566390991211,
    "y": 4355.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4b066055.dca1d",
        "4c3bb63f.abb268",
        "afaed0ec.37401"
      ]
    ]
  },
  {
    "id": "4b066055.dca1d",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4622.566390991211,
    "y": 4357.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7a2986e1.36d518"
      ]
    ]
  },
  {
    "id": "4c3bb63f.abb268",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4623.057357788086,
    "y": 4402.859756469727,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "6e8a6a19.d50624"
      ]
    ]
  },
  {
    "id": "afaed0ec.37401",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4620.566390991211,
    "y": 4446.285720825195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7cabc91f.298798"
      ]
    ]
  },
  {
    "id": "45ad7f75.acf2c",
    "type": "save",
    "name": "get LEAF uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.LEAF.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.leafuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3688.566665649414,
    "y": 3030.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "77412c28.93cabc",
        "a9cae5b1.bd79",
        "fb412e94.ff6ef8"
      ]
    ]
  },
  {
    "id": "a9cae5b1.bd79",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3916.057632446289,
    "y": 3002.8597259521484,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a9cc314f.91999"
      ]
    ]
  },
  {
    "id": "fb412e94.ff6ef8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3911.566665649414,
    "y": 3047.285690307617,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7c451252.08c29c"
      ]
    ]
  },
  {
    "id": "a9cc314f.91999",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4078.629165649414,
    "y": 3002.1454315185547,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7c451252.08c29c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4079.566665649414,
    "y": 3047.285690307617,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "77412c28.93cabc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3923.566665649414,
    "y": 3097.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "894a7fb9.0e7198"
      ]
    ]
  },
  {
    "id": "22440324.4f2fcc",
    "type": "comment",
    "name": "Find LEAF and ROOT connectivity, then find vpn-bindings of each. adjust bw",
    "info": "",
    "comments": "",
    "x": 3813.449996948242,
    "y": 3288.1690826416016,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "e0dae0e2.18c628",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3795.166763305664,
    "y": 3849.9691009521484,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "6f17d5e2.9b03b4",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3933.166763305664,
    "y": 3907.9691009521484,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "fed6a907.2b3e28",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3511.166763305664,
    "y": 3589.3690032958984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "db019ae8.f69e68",
        "cb5f4cbc.1262b8",
        "ca40fb3f.0ddd08"
      ]
    ]
  },
  {
    "id": "a1e56d0c.c484e8",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3752.166763305664,
    "y": 4017.7691497802734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "25e879f6.3e709e",
        "8478688.57aab18"
      ]
    ]
  },
  {
    "id": "25e879f6.3e709e",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3945.166763305664,
    "y": 4018.7691497802734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "2c016cde.6263ac"
      ]
    ]
  },
  {
    "id": "8478688.57aab18",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3949.166763305664,
    "y": 4062.7691497802734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f613ca73.1c6bb8"
      ]
    ]
  },
  {
    "id": "f613ca73.1c6bb8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4088.166763305664,
    "y": 4057.7691497802734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "83166069.2f46b"
      ]
    ]
  },
  {
    "id": "2c016cde.6263ac",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"LEAF CONN DOES NOT EXIST BUT IT SHOULD BE.\" />\n\n",
    "comments": "",
    "x": 4089.166763305664,
    "y": 4014.9691009521484,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "fdf1da6c.032aa",
    "type": "switchNode",
    "name": "switch leafuni.data-source > gfp",
    "xml": "<switch test='`$tmp.aai.leafuni.data-source > $gfp`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4437.283706665039,
    "y": 3236.5691986083984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "624fa50f.6c863c",
        "2cbb1141.892c6e"
      ]
    ]
  },
  {
    "id": "624fa50f.6c863c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4636.450698852539,
    "y": 3303.1690521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "dec3e17a.4aeb5"
      ]
    ]
  },
  {
    "id": "2cbb1141.892c6e",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4658.450698852539,
    "y": 3148.1690521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "591bc18f.862f3"
      ]
    ]
  },
  {
    "id": "51c677f3.cc82f",
    "type": "save",
    "name": "update LEAF UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4436.283706665039,
    "y": 3091.7691497802734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "84a6fa88.639cd8",
    "type": "comment",
    "name": "update LEAF UNI with the new bw",
    "info": "",
    "comments": "",
    "x": 4452.450698852539,
    "y": 3045.1690521240234,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "281d0553.9e5102",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5007.216567993164,
    "y": 2500.1690521240234,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "e4f725a7.1779b8",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5609.216567993164,
    "y": 2605.1690521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "1e1b1c4e.72c2bc",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4999.216323852539,
    "y": 2546.1690521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d8429e74.2e1a2",
        "e4667648.c01938",
        "4ea5d18f.5a2f38"
      ]
    ]
  },
  {
    "id": "e4667648.c01938",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5226.707290649414,
    "y": 2518.7430267333984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "1f89164b.95601a"
      ]
    ]
  },
  {
    "id": "4ea5d18f.5a2f38",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5222.216323852539,
    "y": 2563.168991088867,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "88705cd9.03d55"
      ]
    ]
  },
  {
    "id": "1f89164b.95601a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5389.278823852539,
    "y": 2518.0287322998047,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "88705cd9.03d55",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5390.216323852539,
    "y": 2563.168991088867,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "2e8d1bdd.85c644",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5387.216323852539,
    "y": 2613.1690521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f78dc911.45f94",
        "e4f725a7.1779b8"
      ]
    ]
  },
  {
    "id": "d8429e74.2e1a2",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5218.216323852539,
    "y": 2613.1690521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "2e8d1bdd.85c644"
      ]
    ]
  },
  {
    "id": "f78dc911.45f94",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $tmp.delta`' />\n",
    "comments": "",
    "x": 5569.217056274414,
    "y": 2555.1690521240234,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "d33826b1.ef8f58",
    "type": "comment",
    "name": "bw+ has increased ",
    "info": "",
    "comments": "",
    "x": 4650.449996948242,
    "y": 3110.1690826416016,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "84f3d20e.4f91a8",
    "type": "comment",
    "name": "bw- has decreased",
    "info": "",
    "comments": "",
    "x": 4649.283706665039,
    "y": 3266.9691009521484,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "48adb9de.8dd8c8",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5098.282974243164,
    "y": 2839.9691009521484,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "ccc0529e.d89b08",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5700.282974243164,
    "y": 2944.9691009521484,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "337b01b3.8933a6",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5090.282730102539,
    "y": 2885.9691009521484,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "799a0808.a03288",
        "b771a02d.8b4ba",
        "6a9817e4.946118"
      ]
    ]
  },
  {
    "id": "b771a02d.8b4ba",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5317.773696899414,
    "y": 2858.5430755615234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "6b02c11a.d4f898"
      ]
    ]
  },
  {
    "id": "6a9817e4.946118",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5313.282730102539,
    "y": 2902.969039916992,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "130a98d8.a059e7"
      ]
    ]
  },
  {
    "id": "6b02c11a.d4f898",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5480.345230102539,
    "y": 2857.8287811279297,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "130a98d8.a059e7",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5481.282730102539,
    "y": 2902.969039916992,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "ff63a7c4.86cf08",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5478.282730102539,
    "y": 2952.9691009521484,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "871b9cd5.ec522",
        "ccc0529e.d89b08"
      ]
    ]
  },
  {
    "id": "799a0808.a03288",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5309.282730102539,
    "y": 2952.9691009521484,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "ff63a7c4.86cf08"
      ]
    ]
  },
  {
    "id": "871b9cd5.ec522",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source - $tmp.delta`' />\n",
    "comments": "",
    "x": 5660.283462524414,
    "y": 2894.9691009521484,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "dce7c6b5.af48e",
    "type": "set",
    "name": "set delta",
    "xml": "<set>\n<parameter name='tmp.delta' value='`$tmp.aai.leafuni.data-source - $gfp`' />\n<parameter name='tmp.realdelta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.isBwIncreased' value='false' />\n\n\n",
    "comments": "",
    "x": 5015.282730102539,
    "y": 2798.9691009521484,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "dec3e17a.4aeb5",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4808.449996948242,
    "y": 3292.1690826416016,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "dce7c6b5.af48e",
        "337b01b3.8933a6",
        "9c79a60.2e838d8"
      ]
    ]
  },
  {
    "id": "591bc18f.862f3",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4829.183364868164,
    "y": 3118.9691009521484,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c0c09747.1b1be",
        "1e1b1c4e.72c2bc",
        "615783e8.7114bc"
      ]
    ]
  },
  {
    "id": "c0c09747.1b1be",
    "type": "set",
    "name": "set delta",
    "xml": "<set>\n<parameter name='tmp.delta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.realdelta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.isBwIncreased' value='true' />\n",
    "comments": "",
    "x": 4964.016128540039,
    "y": 2424.7691497802734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "1fd4804f.571bd8",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 4423.333267211914,
    "y": 3191.9691009521484,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "793c3d11.91f2fc",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3892.666732788086,
    "y": 4180.769607543945,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "334968de.3ae5d",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3727.666732788086,
    "y": 4252.96955871582,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "420a91d4.f005f",
        "9e2d332a.723078"
      ]
    ]
  },
  {
    "id": "420a91d4.f005f",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3938.666732788086,
    "y": 4252.96955871582,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "692a8c7a.fda954"
      ]
    ]
  },
  {
    "id": "9e2d332a.723078",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3934.666732788086,
    "y": 4300.96955871582,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "6695c568.10d40c"
      ]
    ]
  },
  {
    "id": "692a8c7a.fda954",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4094.666732788086,
    "y": 4248.96955871582,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "1378eadb.299955"
      ]
    ]
  },
  {
    "id": "6695c568.10d40c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found but it should have been!' />\n",
    "comments": "",
    "x": 4082.666732788086,
    "y": 4295.96955871582,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "42d7c1e3.70d63",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4935.632827758789,
    "y": 4563.168319702148,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "48aa49b9.b94898",
        "9faa5f11.a8b628"
      ]
    ]
  },
  {
    "id": "9faa5f11.a8b628",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
    "comments": "",
    "x": 5178.633071899414,
    "y": 4532.168319702148,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "6b7d6b27.bf3f6c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4795.632827758789,
    "y": 4673.168319702148,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "8f38170c.15c52"
      ]
    ]
  },
  {
    "id": "e53eb8db.b4de68",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4783.633071899414,
    "y": 4766.168563842773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "8d6af4a3.13c21",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4785.695205688477,
    "y": 4721.028091430664,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "1378eadb.299955",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.ROOT.connectivity.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4401.632827758789,
    "y": 4563.168319702148,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "b83aa531.8a6d18"
      ]
    ]
  },
  {
    "id": "b83aa531.8a6d18",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.ROOT.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4606.632827758789,
    "y": 4563.168319702148,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a88f4eb0.5f047"
      ]
    ]
  },
  {
    "id": "a88f4eb0.5f047",
    "type": "outcome",
    "name": "vpn-binding",
    "xml": "<outcome value='vpn-binding'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4772.632827758789,
    "y": 4563.168319702148,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "42d7c1e3.70d63"
      ]
    ]
  },
  {
    "id": "48aa49b9.b94898",
    "type": "save",
    "name": "get vpn-binding from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.ROOT.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4411.632827758789,
    "y": 4673.168319702148,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7a79979c.8eea88",
        "442b3988.19bc",
        "5c729d6c.56aa94"
      ]
    ]
  },
  {
    "id": "7a79979c.8eea88",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4622.632827758789,
    "y": 4675.168319702148,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "6b7d6b27.bf3f6c"
      ]
    ]
  },
  {
    "id": "442b3988.19bc",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4623.123794555664,
    "y": 4720.74235534668,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "8d6af4a3.13c21"
      ]
    ]
  },
  {
    "id": "5c729d6c.56aa94",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4620.632827758789,
    "y": 4764.168319702148,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e53eb8db.b4de68"
      ]
    ]
  },
  {
    "id": "4e4fb9a1.270b08",
    "type": "comment",
    "name": "Temporary skipping this check - to support multiple instances in one slice",
    "info": "",
    "comments": "",
    "x": 6031.449722290039,
    "y": 7062.369247436523,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "16ba58e8.574907",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 5299.916732788086,
    "y": 4293.568923950195,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7a2986e1.36d518",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4801.916976928711,
    "y": 4359.568923950195,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "f1d3809d.7253c8",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5332.916732788086,
    "y": 4361.568923950195,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "2b6629f8.8ae99e",
        "6b873c45.812654"
      ]
    ]
  },
  {
    "id": "2b6629f8.8ae99e",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5457.916732788086,
    "y": 4259.56867980957,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "575e916.aaad5f"
      ]
    ]
  },
  {
    "id": "6b873c45.812654",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5576.916763305664,
    "y": 4333.568710327148,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "1440683a.de744",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4545.599868774414,
    "y": 3905.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "c9d5b018.f8051",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4890.599868774414,
    "y": 3767.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "74718a63.36de84"
      ]
    ]
  },
  {
    "id": "55284001.8f5b08",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4597.599868774414,
    "y": 3761.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c9d5b018.f8051"
      ]
    ]
  },
  {
    "id": "75332f13.262108",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4852.599868774414,
    "y": 3718.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "1dffa908.5b5767",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4541.599868774414,
    "y": 3813.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "2247e7bb.aa6698",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4549.599868774414,
    "y": 3858.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "766a8bc6.9fb0cc",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4546.599868774414,
    "y": 3711.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "74718a63.36de84",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4799.599868774414,
    "y": 3835.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "238ee53c.904a6a"
      ]
    ]
  },
  {
    "id": "238ee53c.904a6a",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4984.599868774414,
    "y": 3834.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7de620b3.3d3198"
      ]
    ]
  },
  {
    "id": "7de620b3.3d3198",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5176.599868774414,
    "y": 3837.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f9ce03fd.3df508"
      ]
    ]
  },
  {
    "id": "f9ce03fd.3df508",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5348.599868774414,
    "y": 3833.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "d48247ca.056eb",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4724.599868774414,
    "y": 3948.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "db019ae8.f69e68",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4241.599868774414,
    "y": 3733.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d62659b6.160db8",
        "cf64723d.dfeea8",
        "1dffa908.5b5767",
        "2247e7bb.aa6698",
        "1440683a.de744",
        "55284001.8f5b08",
        "d48247ca.056eb"
      ]
    ]
  },
  {
    "id": "1fb81d61.c0c6c3",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4226.599868774414,
    "y": 3667.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "cf64723d.dfeea8",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4605.599868774414,
    "y": 3654.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "61f8c12d.7ec188",
        "b0224d35.db0ba",
        "75332f13.262108"
      ]
    ]
  },
  {
    "id": "61f8c12d.7ec188",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4841.599868774414,
    "y": 3637.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "b0224d35.db0ba",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4838.599868774414,
    "y": 3678.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "d62659b6.160db8",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4554.599868774414,
    "y": 3611.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "cbd695e8.8ce3",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 5283.999771118164,
    "y": 4660.685653686523,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "8f38170c.15c52",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5072.999771118164,
    "y": 4722.685653686523,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "eec0ed64.666e3"
      ]
    ]
  },
  {
    "id": "eec0ed64.666e3",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.vpn-binding.ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5316.999771118164,
    "y": 4728.685653686523,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "da15375d.9b0ee8",
        "3ee187ea.cd5be8"
      ]
    ]
  },
  {
    "id": "da15375d.9b0ee8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5547.999771118164,
    "y": 4706.685653686523,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7e1ed8b0.7851f"
      ]
    ]
  },
  {
    "id": "3ee187ea.cd5be8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5552.999771118164,
    "y": 4773.685653686523,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "33a4fd6a.f05cf2",
    "type": "switchNode",
    "name": "switch tmp.isBwIncreased",
    "xml": "<switch test=\"`$tmp.isBwIncreased`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5801.883529663086,
    "y": 4271.36799621582,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e619571d.07b27",
        "7e5b3b13.527164"
      ]
    ]
  },
  {
    "id": "e619571d.07b27",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5956.883560180664,
    "y": 4199.368270874023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a419c34.20a76c"
      ]
    ]
  },
  {
    "id": "7e5b3b13.527164",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5957.883560180664,
    "y": 4332.368270874023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "8b03748e.6511"
      ]
    ]
  },
  {
    "id": "a419c34.20a76c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6101.883560180664,
    "y": 4199.368515014648,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e331e060.96ce2",
        "f02eaafa.80f4b"
      ]
    ]
  },
  {
    "id": "e331e060.96ce2",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.the-vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6394.883560180664,
    "y": 4177.368270874023,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "f02eaafa.80f4b",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6346.533462524414,
    "y": 4224.685165405273,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "fac6e0eb.b7e5e8",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6419.883529663086,
    "y": 4126.36799621582,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "8b03748e.6511",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6113.883560180664,
    "y": 4331.368515014648,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7cde89b.f9cde78",
        "44d5eb8e.8b5a7c"
      ]
    ]
  },
  {
    "id": "7cde89b.f9cde78",
    "type": "save",
    "name": "update the-vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.the-vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher - $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6406.883560180664,
    "y": 4309.368270874023,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "44d5eb8e.8b5a7c",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6358.533462524414,
    "y": 4356.685165405273,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "8783d256.dfbee8",
    "type": "comment",
    "name": "decrease the bw of the-vpn-binding and change status to modified",
    "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6430.883560180664,
    "y": 4270.368270874023,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7e1ed8b0.7851f",
    "type": "switchNode",
    "name": "switch tmp.isBwIncreased",
    "xml": "<switch test=\"`$tmp.isBwIncreased`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5753.116470336914,
    "y": 4713.568954467773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "cf050a6d.dffd88",
        "15aed249.cbc52e"
      ]
    ]
  },
  {
    "id": "cf050a6d.dffd88",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5948.116470336914,
    "y": 4641.568954467773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "5ed50abf.ff9d7c"
      ]
    ]
  },
  {
    "id": "15aed249.cbc52e",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5949.116470336914,
    "y": 4774.568954467773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "2100e232.b11cce"
      ]
    ]
  },
  {
    "id": "5ed50abf.ff9d7c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6093.116470336914,
    "y": 4641.569198608398,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e4e29811.e1048",
        "e58be206.dcc488"
      ]
    ]
  },
  {
    "id": "e4e29811.e1048",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.vpn-binding.route-distinguisher + $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6386.116470336914,
    "y": 4619.568954467773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "e58be206.dcc488",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6337.766372680664,
    "y": 4666.885848999023,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "fa3f6ab4.8ef07",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6410.116470336914,
    "y": 4580.568954467773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "2100e232.b11cce",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6105.116470336914,
    "y": 4773.569198608398,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "8a653803.fc1f6",
        "4431f46f.b3008c"
      ]
    ]
  },
  {
    "id": "8a653803.fc1f6",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.vpn-binding.route-distinguisher - $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6398.116470336914,
    "y": 4751.568954467773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "4431f46f.b3008c",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6349.766372680664,
    "y": 4798.885848999023,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "bbeeae4d.bca708",
    "type": "comment",
    "name": "decrease the bw of the-vpn-binding and change status to modified",
    "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6422.116470336914,
    "y": 4712.568954467773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "aea70ead.9836b8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5160.966567993164,
    "y": 5453.769149780273,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "2e1e6c02.39beec",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5158.749771118164,
    "y": 5493.969345092773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "a8fe1a2c.71b3c8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5034.000015258789,
    "y": 5678.452255249023,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7871c32f.9d91cc",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5031.783218383789,
    "y": 5718.652450561523,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "685061c3.01675",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5131.116470336914,
    "y": 6002.568954467773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "29335c50.b3bc5c",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4958.116470336914,
    "y": 6059.568954467773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a0a30ce1.826348",
        "8ce5c005.55e608"
      ]
    ]
  },
  {
    "id": "a0a30ce1.826348",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5169.116470336914,
    "y": 6059.568954467773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "590e11da.6a5d5"
      ]
    ]
  },
  {
    "id": "8ce5c005.55e608",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5165.116470336914,
    "y": 6107.568954467773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "ceea008c.a129b"
      ]
    ]
  },
  {
    "id": "590e11da.6a5d5",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5325.116470336914,
    "y": 6055.568954467773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "755f894f.dc414",
        "2f6a3eee.3c813a",
        "d68f19c9.00e6c"
      ]
    ]
  },
  {
    "id": "ceea008c.a129b",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 5313.116470336914,
    "y": 6102.568954467773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "692d5d8e.91da94",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5591.000259399414,
    "y": 6155.452255249023,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "d68f19c9.00e6c",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5588.783462524414,
    "y": 6195.652450561523,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "2f6a3eee.3c813a",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5708.116470336914,
    "y": 6107.568954467773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "755f894f.dc414",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5579.116470336914,
    "y": 6055.568954467773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "e084ba5b.54a44",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 5020.116470336914,
    "y": 5960.568954467773,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "ac6c48.3b961bb8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4667.449478149414,
    "y": 6047.568954467773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "685061c3.01675",
        "29335c50.b3bc5c",
        "2fa7a2c0.97e2e6",
        "ed4e275a.a600a"
      ]
    ]
  },
  {
    "id": "f3a1ad9d.6eb4a8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5011.199966430664,
    "y": 6516.568954467773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "d3bca3b6.20d5e8",
    "type": "comment",
    "name": "TODO: BUG -- DONE",
    "info": "momkene connectivity haye vasati ke dummy hastand ham\nvpn-binding dashte bashand ke too in path involve hast pas\nbayad bw aan niz update shavad.",
    "comments": "",
    "x": 3716.567123413086,
    "y": 3793.2857208251953,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "cb5f4cbc.1262b8",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4469.100326538086,
    "y": 4067.4024200439453,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e967ddfe.3a6e28",
        "90c367c2.c3898",
        "a6021f01.4f12a"
      ]
    ]
  },
  {
    "id": "1401df85.96017",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4577.100570678711,
    "y": 4023.4024200439453,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "e967ddfe.3a6e28",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4674.100326538086,
    "y": 4064.4024200439453,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "358ef01b.aa0e8"
      ]
    ]
  },
  {
    "id": "90c367c2.c3898",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4657.591293334961,
    "y": 4125.976455688477,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e4912ec.a7606d"
      ]
    ]
  },
  {
    "id": "a6021f01.4f12a",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4655.100326538086,
    "y": 4169.402420043945,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "ac2440d8.b536c"
      ]
    ]
  },
  {
    "id": "358ef01b.aa0e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4842.100570678711,
    "y": 4059.4024200439453,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f658df6.9a7612"
      ]
    ]
  },
  {
    "id": "e4912ec.a7606d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4820.162704467773,
    "y": 4126.262191772461,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "ac2440d8.b536c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4822.100326538086,
    "y": 4168.402420043945,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "f658df6.9a7612",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5080.100570678711,
    "y": 4064.4024200439453,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d609729e.4f23e"
      ]
    ]
  },
  {
    "id": "d609729e.4f23e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5314.100326538086,
    "y": 4071.4024200439453,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f1d3809d.7253c8"
      ]
    ]
  },
  {
    "id": "ca40fb3f.0ddd08",
    "type": "set",
    "name": "unset tmp.aai.all-vpn-bindings",
    "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value='' />\n",
    "comments": "",
    "x": 4447.800033569336,
    "y": 3993.4024200439453,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "1e5e2cd.ecb6453",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='vpnbridx' start='0' end='`$tmp.aai.the-vpn-binding.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5730.949935913086,
    "y": 4081.9854278564453,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "960f8364.63d43"
      ]
    ]
  },
  {
    "id": "960f8364.63d43",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5922.949935913086,
    "y": 4070.9856719970703,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f97c2bb4.e56a"
      ]
    ]
  },
  {
    "id": "f97c2bb4.e56a",
    "type": "outcome",
    "name": "connectivity",
    "xml": "<outcome value='connectivity'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6104.949935913086,
    "y": 4049.9856719970703,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "b79d4999.d7cb98"
      ]
    ]
  },
  {
    "id": "b79d4999.d7cb98",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 6266.949935913086,
    "y": 4038.9856719970703,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "722e24a9.0c2c14",
        "e69b5880.065b08"
      ]
    ]
  },
  {
    "id": "722e24a9.0c2c14",
    "type": "set",
    "name": "unset tmp.the-connectivity",
    "xml": "<set>\n<parameter name='tmp.the-connectivity.' value='' />\n",
    "comments": "",
    "x": 6463.949935913086,
    "y": 3967.9856719970703,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "ee3fdd91.33b3e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5637.900131225586,
    "y": 4196.985427856445,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "33a4fd6a.f05cf2",
        "1e5e2cd.ecb6453",
        "126e49f8.4ace7e",
        "fdd429d6.294198"
      ]
    ]
  },
  {
    "id": "126e49f8.4ace7e",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 5769.466537475586,
    "y": 3972.2024688720703,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "fdd429d6.294198",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 5761.466537475586,
    "y": 4021.2024688720703,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "e69b5880.065b08",
    "type": "set",
    "name": "set tmp.the-connectivity.connectivity-id",
    "xml": "<set>\n<parameter name='tmp.the-connectivity.connectivity-id' value='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].relationship-data[0].relationship-value`' />\n",
    "comments": "",
    "x": 6469.416732788086,
    "y": 4077.2024688720703,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "bca47127.d5cfd8",
    "type": "set",
    "name": "set vpnNameToSearch",
    "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
    "comments": "",
    "x": 5762.683334350586,
    "y": 3795.4024200439453,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "16b26942.410c5f",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5916.683334350586,
    "y": 3847.4024200439453,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "575e916.aaad5f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5507.683334350586,
    "y": 3914.4024200439453,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "16b26942.410c5f",
        "4e79a048.28ceb8",
        "bca47127.d5cfd8"
      ]
    ]
  },
  {
    "id": "4e79a048.28ceb8",
    "type": "switchNode",
    "name": "switch $foundVpnName",
    "xml": "<switch test=\"`$foundVpnName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5761.683334350586,
    "y": 3902.4024200439453,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d6032421.ea99d8"
      ]
    ]
  },
  {
    "id": "d6032421.ea99d8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5940.683334350586,
    "y": 3901.4024200439453,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "ee3fdd91.33b3e8"
      ]
    ]
  },
  {
    "id": "eb8749e3.22de7",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4638.683334350586,
    "y": 7419.402420043945,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "aa8c3669.88cdf8",
        "fad2776b.9a9d28",
        "2612fef6.812a92"
      ]
    ]
  },
  {
    "id": "2612fef6.812a92",
    "type": "set",
    "name": "set vpnNameToSearch",
    "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
    "comments": "",
    "x": 4861.683334350586,
    "y": 7363.402420043945,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "aa8c3669.88cdf8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5040.683334350586,
    "y": 7406.402420043945,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "fad2776b.9a9d28",
    "type": "switchNode",
    "name": "switch $foundVpnName",
    "xml": "<switch test=\"`$foundVpnName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4885.683334350586,
    "y": 7461.402420043945,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "2437b1d5.2f95e6"
      ]
    ]
  },
  {
    "id": "2437b1d5.2f95e6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5064.683334350586,
    "y": 7460.402420043945,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "268cfed4.3ed072"
      ]
    ]
  },
  {
    "id": "f140933b.8acec",
    "type": "set",
    "name": "unset tmp.aai.all-vpn-bindings",
    "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value='' />\n",
    "comments": "",
    "x": 4795.683334350586,
    "y": 7099.402420043945,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "c1a83ef0.efb158",
    "type": "set",
    "name": "unset secondary related variables",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n<parameter name='network-route-three' value=\"\" />\n<parameter name='tmp.aai.network-route-three.' value=\"\" />\n<parameter name='tmp.aai.network-route-C.' value=\"\" />\n",
    "comments": "",
    "x": 3361.2999420166016,
    "y": 493.85240173339844,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "30c464f6.21891c",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4136.399429321289,
    "y": 554.8524017333984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "92681273.ecf0b8"
      ]
    ]
  },
  {
    "id": "92681273.ecf0b8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4305.399429321289,
    "y": 551.8524017333984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c003a5ba.a5cd",
        "f6645586.4c0b38"
      ]
    ]
  },
  {
    "id": "c003a5ba.a5cd",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4529.399429321289,
    "y": 584.8524017333984,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "f6645586.4c0b38",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4475.399429321289,
    "y": 624.8524017333984,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "513e1ab4.43497c",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4101.399917602539,
    "y": 754.0524139404297,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "b7c1f5eb.1c0428"
      ]
    ]
  },
  {
    "id": "b7c1f5eb.1c0428",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4266.399185180664,
    "y": 759.0524139404297,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "8d3bba48.eab118",
        "ecf8bfe7.1b0ad8"
      ]
    ]
  },
  {
    "id": "8d3bba48.eab118",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4513.399429321289,
    "y": 841.0524139404297,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "ecf8bfe7.1b0ad8",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4459.399429321289,
    "y": 881.0524139404297,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "8429e2be.11d098",
    "type": "save",
    "name": "get network-route-three from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-three'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-three\">",
    "comments": "",
    "outputs": 1,
    "x": 3344.399917602539,
    "y": 893.0524139404297,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "ad35aa48.056498",
        "881c5027.ef1da8",
        "c8b7bc97.b40ba"
      ]
    ]
  },
  {
    "id": "ad35aa48.056498",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3586.399917602539,
    "y": 886.0524139404297,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "881c5027.ef1da8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3581.908981323242,
    "y": 928.4784698486328,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "c8b7bc97.b40ba",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3585.908950805664,
    "y": 976.4784393310547,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "9ce363a2.dd0398"
      ]
    ]
  },
  {
    "id": "9ce363a2.dd0398",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3747.399917602539,
    "y": 917.0524139404297,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "411baca6.4afa04"
      ]
    ]
  },
  {
    "id": "411baca6.4afa04",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-three.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3918.399917602539,
    "y": 917.0525970458984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d6c02163.09f2f",
        "26b7eb30.1a16a4",
        "96d019f1.51b6c"
      ]
    ]
  },
  {
    "id": "d6c02163.09f2f",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4085.399673461914,
    "y": 827.0525360107422,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a0fe031a.dea47"
      ]
    ]
  },
  {
    "id": "26b7eb30.1a16a4",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4087.399673461914,
    "y": 881.0525360107422,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "229f8aa8.94f7fe"
      ]
    ]
  },
  {
    "id": "a0fe031a.dea47",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4213.399673461914,
    "y": 827.0525360107422,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4f78be1b.93fa4",
        "f44f2336.c1f56"
      ]
    ]
  },
  {
    "id": "229f8aa8.94f7fe",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4216.399673461914,
    "y": 880.0525360107422,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a67f23a8.85781",
        "587a77f8.86931"
      ]
    ]
  },
  {
    "id": "f44f2336.c1f56",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4459.399429321289,
    "y": 966.0525360107422,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "a67f23a8.85781",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4476.399429321289,
    "y": 1008.0525360107422,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "587a77f8.86931",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4461.399429321289,
    "y": 1046.0525360107422,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "4f78be1b.93fa4",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4473.399429321289,
    "y": 926.0525360107422,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "fcadc9d5.a748f8",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4638.399429321289,
    "y": 942.0525360107422,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "96d019f1.51b6c",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4026.399917602539,
    "y": 972.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "af991ebb.5e627"
      ]
    ]
  },
  {
    "id": "af991ebb.5e627",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4200.399917602539,
    "y": 967.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f09b675e.f8da7",
        "2dc559.0e4fdaa8"
      ]
    ]
  },
  {
    "id": "2dc559.0e4fdaa8",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4433.399429321289,
    "y": 1136.0522918701172,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "f09b675e.f8da7",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4487.399429321289,
    "y": 1096.0522918701172,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "5c549048.27d988",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4601.399429321289,
    "y": 1121.0522918701172,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "f87c2434.973ea",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3602.066665649414,
    "y": 2201.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "5b1e0335.2e861c",
        "c761c99f.075528"
      ]
    ]
  },
  {
    "id": "7e1476f1.6750f8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3429.400161743164,
    "y": 2202.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "f87c2434.973ea"
      ]
    ]
  },
  {
    "id": "6c010aa3.624334",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3438.891128540039,
    "y": 2244.8597869873047,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "72d07b8a.849984",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3427.400161743164,
    "y": 2291.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "5b1e0335.2e861c",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3888.400161743164,
    "y": 2205.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "279a9ed1.bf6a32",
        "e13b8d61.77167"
      ]
    ]
  },
  {
    "id": "e13b8d61.77167",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4111.400161743164,
    "y": 2160.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "76113157.988ef"
      ]
    ]
  },
  {
    "id": "279a9ed1.bf6a32",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4113.400161743164,
    "y": 2224.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "26da469d.16a06a"
      ]
    ]
  },
  {
    "id": "d7f7c5fa.4c43d8",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-C.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-C.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3201.400161743164,
    "y": 2237.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7e1476f1.6750f8",
        "6c010aa3.624334",
        "72d07b8a.849984"
      ]
    ]
  },
  {
    "id": "1989a06e.d4f03",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3162.400161743164,
    "y": 2181.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "334ad959.cb8dd6",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3221.400161743164,
    "y": 1977.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "52bf5f88.b043b",
        "50b4842f.e69cbc"
      ]
    ]
  },
  {
    "id": "50b4842f.e69cbc",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3444.400161743164,
    "y": 1963.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a9726b2d.fccd7"
      ]
    ]
  },
  {
    "id": "52bf5f88.b043b",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3446.400161743164,
    "y": 1996.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "a9726b2d.fccd7",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3592.400161743164,
    "y": 1956.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "5ee377e.4e34b08",
        "eb05f6d8.e8b8d8"
      ]
    ]
  },
  {
    "id": "5ee377e.4e34b08",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainC.pnf-name' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3786.400161743164,
    "y": 1959.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "c761c99f.075528",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3839.400131225586,
    "y": 2328.2857208251953,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "82e8744d.2f169"
      ]
    ]
  },
  {
    "id": "82e8744d.2f169",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4045.400131225586,
    "y": 2328.2857208251953,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "fde94d7a.1c1f78"
      ]
    ]
  },
  {
    "id": "eb05f6d8.e8b8d8",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\"\n        pfx='tmp.aai.destination-secondary-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3808.400161743164,
    "y": 2027.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4c08dffc.53f9b",
        "367fe0d1.441908",
        "e6dd27d7.84d748"
      ]
    ]
  },
  {
    "id": "4c08dffc.53f9b",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4003.9002838134766,
    "y": 1979.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "335d38ec.2d1a38"
      ]
    ]
  },
  {
    "id": "367fe0d1.441908",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3995.9002838134766,
    "y": 2034.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d6efed88.7d53"
      ]
    ]
  },
  {
    "id": "e6dd27d7.84d748",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4000.9002838134766,
    "y": 2091.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "177f57a1.3eb1f8"
      ]
    ]
  },
  {
    "id": "177f57a1.3eb1f8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4152.900283813477,
    "y": 2092.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "335d38ec.2d1a38",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4148.282608032227,
    "y": 1976.9415435791016,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "6ad02bf1.79a934"
      ]
    ]
  },
  {
    "id": "4bfd3207.06ef5c",
    "type": "set",
    "name": "set SECONDARY-ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-long' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-short' value=\"`$tmp.dst-secondary.pnf-name`\" />\n\n<parameter name='tmp.SECONDARY-ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-C.next-hop + '-' + $tmp.aai.network-route-C.logical-interface-id`\" />\n<parameter name='tmp.SECONDARY-ROOT.uni-tp-id' value=\"`$tmp.dst-secondary.ltpId`\" />\n",
    "comments": "",
    "x": 3224.066665649414,
    "y": 2316.2857513427734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7f049b99.392e44",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3899.066635131836,
    "y": 2280.2857208251953,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "26da469d.16a06a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4272.400161743164,
    "y": 2243.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "76113157.988ef",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4276.400161743164,
    "y": 2157.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "9aa2a686.be54a8",
        "433203.bfdcb5fc"
      ]
    ]
  },
  {
    "id": "fde94d7a.1c1f78",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4262.685775756836,
    "y": 2327.1074981689453,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "2950d492.5666c4"
      ]
    ]
  },
  {
    "id": "d6efed88.7d53",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4163.900283813477,
    "y": 2037.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "9aa2a686.be54a8",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.ltpId' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n",
    "comments": "",
    "x": 4446.400161743164,
    "y": 2118.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "433203.bfdcb5fc",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.pnf-name' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n",
    "comments": "",
    "x": 4447.400161743164,
    "y": 2223.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "279b9c4d.6439cc",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4442.400161743164,
    "y": 2172.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "2950d492.5666c4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4469.517318725586,
    "y": 2316.626174926758,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "27d287be.22449",
        "54646993.252b48",
        "ce1fcbcf.439b7"
      ]
    ]
  },
  {
    "id": "27d287be.22449",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination-secondary.ttp-id' value=\"`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4684.517318725586,
    "y": 2278.626174926758,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "54646993.252b48",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination-secondary.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-secondary-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4681.517318725586,
    "y": 2317.626174926758,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4c6f5d99.cc2504"
      ]
    ]
  },
  {
    "id": "ce1fcbcf.439b7",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4637.017318725586,
    "y": 2359.626174926758,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "20c12f13.f01e2",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4730.400161743164,
    "y": 1995.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "2b8eec9f.d7eabc"
      ]
    ]
  },
  {
    "id": "6ad02bf1.79a934",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4332.400161743164,
    "y": 1991.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "656e6085.f2c5b8"
      ]
    ]
  },
  {
    "id": "656e6085.f2c5b8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4527.400161743164,
    "y": 1991.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "20c12f13.f01e2",
        "f43b8884.ec34f"
      ]
    ]
  },
  {
    "id": "f43b8884.ec34f",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4732.400161743164,
    "y": 2068.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "16e499c4.79bb2e"
      ]
    ]
  },
  {
    "id": "4c6f5d99.cc2504",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4862.017318725586,
    "y": 2316.626174926758,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "955e8579.618ad8"
      ]
    ]
  },
  {
    "id": "955e8579.618ad8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5020.017318725586,
    "y": 2316.626174926758,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7f2dc653.30af1"
      ]
    ]
  },
  {
    "id": "7f2dc653.30af1",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination-secondary.tunnel-tp-id' value=\"`$tmp.aai.destination-secondary-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5227.017318725586,
    "y": 2316.626174926758,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "2b8eec9f.d7eabc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4907.400161743164,
    "y": 1987.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "6743bfb3.fe491",
        "f129d672.d83d38"
      ]
    ]
  },
  {
    "id": "f129d672.d83d38",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainC.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainC.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5115.400161743164,
    "y": 1994.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "2fcdf070.6eea68",
        "1f831cdc.092a93",
        "38d0f9ee.3ac5f6"
      ]
    ]
  },
  {
    "id": "16e499c4.79bb2e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4909.400161743164,
    "y": 2060.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7af0e2e8.47fa2c"
      ]
    ]
  },
  {
    "id": "6743bfb3.fe491",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainC id",
    "xml": "<set>\n<parameter name='tmp.domainC.esr-thirdparty-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5145.400161743164,
    "y": 1942.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7af0e2e8.47fa2c",
    "type": "set",
    "name": "set domainC ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainC.eth-network-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5144.400161743164,
    "y": 2184.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "2fcdf070.6eea68",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5325.400161743164,
    "y": 1985.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c8f2d024.71cdc8"
      ]
    ]
  },
  {
    "id": "1f831cdc.092a93",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5317.400161743164,
    "y": 2040.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "67195fbd.2c818"
      ]
    ]
  },
  {
    "id": "38d0f9ee.3ac5f6",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5322.400161743164,
    "y": 2097.285873413086,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a92d2828.f616b8"
      ]
    ]
  },
  {
    "id": "a92d2828.f616b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5474.400161743164,
    "y": 2098.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "67195fbd.2c818",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5485.400161743164,
    "y": 2043.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "c8f2d024.71cdc8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5469.782485961914,
    "y": 1982.9415435791016,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "2e63be54.b089ca"
      ]
    ]
  },
  {
    "id": "2e63be54.b089ca",
    "type": "set",
    "name": "set controller domainC data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5684.400161743164,
    "y": 1979.285873413086,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7237f1d4.deff98",
    "type": "comment",
    "name": "Create SECONDARY-ROOT UNI",
    "info": "",
    "comments": "",
    "x": 5713.900161743164,
    "y": 2102.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "f8b29c6c.19b2e8",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5686.016860961914,
    "y": 2151.1690521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "6fed43d1.51eac4"
      ]
    ]
  },
  {
    "id": "6fed43d1.51eac4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5877.016860961914,
    "y": 2155.1690521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "419e36dc.a0f56"
      ]
    ]
  },
  {
    "id": "419e36dc.a0f56",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6004.016860961914,
    "y": 2154.1690521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "38e4a1b4.0b7b5e",
        "e98accf8.e7a08"
      ]
    ]
  },
  {
    "id": "e98accf8.e7a08",
    "type": "save",
    "name": "save SECONDARY-ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.SECONDARY-ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='type' value='secondary-root' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6226.016860961914,
    "y": 2043.1690521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "38e4a1b4.0b7b5e",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6221.900161743164,
    "y": 2102.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d45ed8c9.67af08",
        "a74deeb1.a26ec"
      ]
    ]
  },
  {
    "id": "d45ed8c9.67af08",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6431.900161743164,
    "y": 2079.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c2c70bd5.e2175"
      ]
    ]
  },
  {
    "id": "c2c70bd5.e2175",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6557.900161743164,
    "y": 2079.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "b21cfff5.d8a4c8"
      ]
    ]
  },
  {
    "id": "92db42c4.6a4d78",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6562.900161743164,
    "y": 2128.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a32c1047.9c5c8",
        "eadb0235.467f7",
        "5b398d7f.65258c",
        "7c47a5bb.9c9814"
      ]
    ]
  },
  {
    "id": "a74deeb1.a26ec",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6436.900161743164,
    "y": 2128.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "92db42c4.6a4d78"
      ]
    ]
  },
  {
    "id": "b21cfff5.d8a4c8",
    "type": "save",
    "name": "save connectivityB relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6885.900161743164,
    "y": 2076.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "a32c1047.9c5c8",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainC",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainC-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6838.900161743164,
    "y": 2167.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "eadb0235.467f7",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='secondary-root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6786.900161743164,
    "y": 2209.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "5b398d7f.65258c",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6915.900161743164,
    "y": 2251.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "9878fd26.fb04",
    "type": "comment",
    "name": "Create SECONDARY-ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 6801.900161743164,
    "y": 2124.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7c47a5bb.9c9814",
    "type": "save",
    "name": "save connectivityC relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6893.900161743164,
    "y": 2299.0523529052734,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "374c089f.fa2538",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6457.900161743164,
    "y": 2795.8524017333984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e0f14a64.4f8738"
      ]
    ]
  },
  {
    "id": "e0f14a64.4f8738",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6649.900161743164,
    "y": 2790.8524017333984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "db26ab33.fe7e58"
      ]
    ]
  },
  {
    "id": "db26ab33.fe7e58",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6778.900161743164,
    "y": 2790.8524017333984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "26e82d17.b3e8e2"
      ]
    ]
  },
  {
    "id": "26e82d17.b3e8e2",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 7110.900161743164,
    "y": 2788.8524017333984,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "c9cb4066.4924",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6042.900161743164,
    "y": 3007.8524017333984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "2a720623.f2b5c2"
      ]
    ]
  },
  {
    "id": "2a720623.f2b5c2",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6222.900161743164,
    "y": 3006.8524017333984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "af745266.aa6"
      ]
    ]
  },
  {
    "id": "af745266.aa6",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6351.900161743164,
    "y": 3006.8524017333984,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "981d0119.b686c"
      ]
    ]
  },
  {
    "id": "981d0119.b686c",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6569.783462524414,
    "y": 3005.7357025146484,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "365c0f8e.cfd0e"
      ]
    ]
  },
  {
    "id": "365c0f8e.cfd0e",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6784.783462524414,
    "y": 3005.7357025146484,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "5255edd.4efb714"
      ]
    ]
  },
  {
    "id": "5255edd.4efb714",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6916.783462524414,
    "y": 3005.7357025146484,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d5b5d130.3528a"
      ]
    ]
  },
  {
    "id": "d5b5d130.3528a",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 7280.900161743164,
    "y": 3004.8524017333984,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "615783e8.7114bc",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5013.399185180664,
    "y": 2655.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "b5a2c9a9.2d0b1"
      ]
    ]
  },
  {
    "id": "b5a2c9a9.2d0b1",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5193.399185180664,
    "y": 2654.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "38f8112d.6307b6"
      ]
    ]
  },
  {
    "id": "38f8112d.6307b6",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5322.399185180664,
    "y": 2654.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "73260aa7.cfafe4"
      ]
    ]
  },
  {
    "id": "3fb31c3b.d5983c",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5058.399185180664,
    "y": 2713.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "73260aa7.cfafe4",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5088.399185180664,
    "y": 2746.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4f61494b.d04d88",
        "50778a9c.0e895c",
        "979ddcd.34a972"
      ]
    ]
  },
  {
    "id": "50778a9c.0e895c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5269.890151977539,
    "y": 2723.9932708740234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "67ea0823.c7b72"
      ]
    ]
  },
  {
    "id": "979ddcd.34a972",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5258.399185180664,
    "y": 2763.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c80cb8af.ac2d48"
      ]
    ]
  },
  {
    "id": "67ea0823.c7b72",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5429.461685180664,
    "y": 2722.2789154052734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "c80cb8af.ac2d48",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5419.399185180664,
    "y": 2764.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "4f61494b.d04d88",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5263.399185180664,
    "y": 2800.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "ef6cfd54.d63cb8"
      ]
    ]
  },
  {
    "id": "ef6cfd54.d63cb8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5421.399185180664,
    "y": 2808.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "d727e5a5.b31118",
        "c17b79a.0f49c88"
      ]
    ]
  },
  {
    "id": "d727e5a5.b31118",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 5582.399185180664,
    "y": 2740.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "c17b79a.0f49c88",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5624.399185180664,
    "y": 2812.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "9c79a60.2e838d8",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5100.399185180664,
    "y": 3013.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c138ef39.513f8"
      ]
    ]
  },
  {
    "id": "c138ef39.513f8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5280.399185180664,
    "y": 3012.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "8ad866ac.595d58"
      ]
    ]
  },
  {
    "id": "8ad866ac.595d58",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5409.399185180664,
    "y": 3012.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "17191cff.7c3d3b"
      ]
    ]
  },
  {
    "id": "2bf187fb.3634e8",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5145.399185180664,
    "y": 3071.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "17191cff.7c3d3b",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5175.399185180664,
    "y": 3104.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "e2951a5a.6753c8",
        "f24616d3.430fb8",
        "57d651f0.348b08"
      ]
    ]
  },
  {
    "id": "f24616d3.430fb8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5356.890151977539,
    "y": 3081.9932708740234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c95458c9.25b988"
      ]
    ]
  },
  {
    "id": "57d651f0.348b08",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5345.399185180664,
    "y": 3121.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "59776330.9b2ecc"
      ]
    ]
  },
  {
    "id": "c95458c9.25b988",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5516.461685180664,
    "y": 3080.2789154052734,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "59776330.9b2ecc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5506.399185180664,
    "y": 3122.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "e2951a5a.6753c8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5350.399185180664,
    "y": 3158.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "1f0787c1.98ffc"
      ]
    ]
  },
  {
    "id": "1f0787c1.98ffc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5508.399185180664,
    "y": 3166.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4ff50da8.51bbec",
        "fc471e6.a2d406"
      ]
    ]
  },
  {
    "id": "4ff50da8.51bbec",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 5669.399185180664,
    "y": 3098.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "fc471e6.a2d406",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5711.399185180664,
    "y": 3170.4190521240234,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "2987a87c.d9af38",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3582.066665649414,
    "y": 4595.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "101679fa.cd8636"
      ]
    ]
  },
  {
    "id": "101679fa.cd8636",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3762.066665649414,
    "y": 4594.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "a4d69355.b5e7f8"
      ]
    ]
  },
  {
    "id": "a4d69355.b5e7f8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3891.066665649414,
    "y": 4594.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "42187454.b3e72c"
      ]
    ]
  },
  {
    "id": "8dc12596.0dad2",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3627.066665649414,
    "y": 4653.419052124023,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "42187454.b3e72c",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3657.066665649414,
    "y": 4686.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "53201291.0789d4",
        "6de03a2b.1543fc",
        "13099433.0c6bc4"
      ]
    ]
  },
  {
    "id": "6de03a2b.1543fc",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3838.557632446289,
    "y": 4663.993270874023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "328b19c8.a304fe"
      ]
    ]
  },
  {
    "id": "13099433.0c6bc4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3827.066665649414,
    "y": 4703.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "693d642a.e0385c"
      ]
    ]
  },
  {
    "id": "328b19c8.a304fe",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3998.129165649414,
    "y": 4662.278915405273,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "693d642a.e0385c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3988.066665649414,
    "y": 4704.419052124023,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "53201291.0789d4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3832.066665649414,
    "y": 4740.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "def4b54e.65d1b"
      ]
    ]
  },
  {
    "id": "def4b54e.65d1b",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3990.066665649414,
    "y": 4748.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "c5033189.07a6e8",
        "bea5279c.558ed8"
      ]
    ]
  },
  {
    "id": "c5033189.07a6e8",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 4151.066665649414,
    "y": 4680.419052124023,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "bea5279c.558ed8",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4193.066665649414,
    "y": 4752.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "be749200.95b238",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4273.733657836914,
    "y": 5550.419052124023,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "b311bb82.023748",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4428.733657836914,
    "y": 5591.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "f2f4b1c2.9aee8",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4244.733657836914,
    "y": 5649.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7d42099c.1673f8",
        "afcc0a1f.ae4ca8"
      ]
    ]
  },
  {
    "id": "7d42099c.1673f8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4480.733657836914,
    "y": 5633.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "1db6f77.6e57a09"
      ]
    ]
  },
  {
    "id": "afcc0a1f.ae4ca8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4479.733657836914,
    "y": 5681.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "1db6f77.6e57a09",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4624.733657836914,
    "y": 5635.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "435458de.d8d258",
        "fe506663.263e38",
        "7c36c2be.89228c"
      ]
    ]
  },
  {
    "id": "435458de.d8d258",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5036.733901977539,
    "y": 5770.419052124023,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "fe506663.263e38",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5157.733901977539,
    "y": 5817.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "4a2e81b2.7cd548",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5040.617691040039,
    "y": 5861.302352905273,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "7c36c2be.89228c",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5039.400894165039,
    "y": 5902.502548217773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "4c09fba5.801644",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4900.066665649414,
    "y": 6156.419052124023,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "2fa7a2c0.97e2e6",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5066.066665649414,
    "y": 6195.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "ed4e275a.a600a",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4905.066665649414,
    "y": 6245.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "5ed92a8d.935c6c",
        "3b32d9b.10ad726"
      ]
    ]
  },
  {
    "id": "5ed92a8d.935c6c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5138.066665649414,
    "y": 6239.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4b8f3c41.8b089c"
      ]
    ]
  },
  {
    "id": "3b32d9b.10ad726",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5139.066665649414,
    "y": 6289.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "4b8f3c41.8b089c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5285.066665649414,
    "y": 6247.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "980344cd.e7e958",
        "6a19d23d.0e42e4",
        "b0adad9f.731368"
      ]
    ]
  },
  {
    "id": "980344cd.e7e958",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5532.066665649414,
    "y": 6235.419052124023,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "6a19d23d.0e42e4",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5653.066665649414,
    "y": 6282.419052124023,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "351a146f.cf6ee4",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5535.950454711914,
    "y": 6326.302352905273,
    "z": "3edf77d7.add3c",
    "wires": []
  },
  {
    "id": "b0adad9f.731368",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5534.733657836914,
    "y": 6367.502548217773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "62fdede4.849824",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3662.066665649414,
    "y": 6140.852645874023,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "dfc7a62b.53e19",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2999.316665649414,
    "y": 6139.102645874023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4e06d40d.0d98f4",
        "2df2f3f0.950c74"
      ]
    ]
  },
  {
    "id": "4e06d40d.0d98f4",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3190.316665649414,
    "y": 6143.102645874023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "7ac2dc81.94449c"
      ]
    ]
  },
  {
    "id": "7ac2dc81.94449c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3317.316665649414,
    "y": 6142.102645874023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "62fdede4.849824"
      ]
    ]
  },
  {
    "id": "2df2f3f0.950c74",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3186.316665649414,
    "y": 6213.102645874023,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "4a8e4e30.44e1e8"
      ]
    ]
  },
  {
    "id": "717a4778.c8606",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate-w-Protection",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate-w-Protection' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3735.816665649414,
    "y": 6212.186141967773,
    "z": "3edf77d7.add3c",
    "wires": [
      []
    ]
  },
  {
    "id": "4a8e4e30.44e1e8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3319.816665649414,
    "y": 6215.186141967773,
    "z": "3edf77d7.add3c",
    "wires": [
      [
        "717a4778.c8606"
      ]
    ]
  }
]