[
  {
    "id": "25755a71.e1632e",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 123.56666564941406,
    "y": 162.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9782b41f.c0bae8"
      ]
    ]
  },
  {
    "id": "9782b41f.c0bae8",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 407.85235595703125,
    "y": 223.32380199432373,
    "z": "9718fe15.98603",
    "wires": [
      [
        "aa6f3182.becc9"
      ]
    ]
  },
  {
    "id": "aa6f3182.becc9",
    "type": "method",
    "name": "method cll-vnf-topology-operation-cll-modify",
    "xml": "<method rpc='cll-vnf-topology-operation-cll-modify' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 413.9952697753906,
    "y": 308.0857238769531,
    "z": "9718fe15.98603",
    "wires": [
      [
        "29bc2f8.db80dd"
      ]
    ]
  },
  {
    "id": "29bc2f8.db80dd",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 763.5666656494141,
    "y": 367.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9c0eb1ca.43b71",
        "3646fbaf.66abd4",
        "ab0c0a1d.943358"
      ]
    ]
  },
  {
    "id": "9c0eb1ca.43b71",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1064.900161743164,
    "y": 638.0159912109375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "3646fbaf.66abd4",
    "type": "save",
    "name": "get service-instance from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
    "comments": "",
    "outputs": 1,
    "x": 1086.328628540039,
    "y": 340.41900634765625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7f13e7b9.528038",
        "21855f86.1eb1c",
        "8626acaa.0dcb08"
      ]
    ]
  },
  {
    "id": "7f13e7b9.528038",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1311.328628540039,
    "y": 198.41900634765625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d8a6bab4.98cd48"
      ]
    ]
  },
  {
    "id": "21855f86.1eb1c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1306.819595336914,
    "y": 267.9930419921875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2ec478eb.d4cdf8"
      ]
    ]
  },
  {
    "id": "8626acaa.0dcb08",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1295.328628540039,
    "y": 314.41900634765625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7ead638e.196dac"
      ]
    ]
  },
  {
    "id": "250bdb2a.4b0894",
    "type": "comment",
    "name": "new for TransportSlicing",
    "info": "",
    "comments": "",
    "x": 1065.328628540039,
    "y": 228.41900634765625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "ab0c0a1d.943358",
    "type": "execute",
    "name": "execute properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
    "comments": "",
    "outputs": 1,
    "x": 1053.328628540039,
    "y": 280.41900634765625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "d8a6bab4.98cd48",
    "type": "switchNode",
    "name": "switch allotted-resources_length != 0",
    "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1551.566665649414,
    "y": 195.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ddda0f66.6b349",
        "66168207.1d9724"
      ]
    ]
  },
  {
    "id": "2ec478eb.d4cdf8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1461.6290435791016,
    "y": 270.9454650878906,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "7ead638e.196dac",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1465.566665649414,
    "y": 315.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "ddda0f66.6b349",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1756.566665649414,
    "y": 232.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "5c931c3f.aba674"
      ]
    ]
  },
  {
    "id": "66168207.1d9724",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1766.566665649414,
    "y": 159.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "5c931c3f.aba674",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1749.566665649414,
    "y": 307.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "b951c0d0.48c67",
        "3ae502fc.de69ae",
        "7554f41e.870f04",
        "b94dc7e3.86f89",
        "37dc60ca.62221"
      ]
    ]
  },
  {
    "id": "fb84a849.18463",
    "type": "save",
    "name": "get allotted-resource from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2235.566665649414,
    "y": 358.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7f791be2.0d23ec",
        "6090d832.b4d3b8",
        "b011647e.200f58"
      ]
    ]
  },
  {
    "id": "7f791be2.0d23ec",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2451.566665649414,
    "y": 425.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "f400ea8d.94bbd8"
      ]
    ]
  },
  {
    "id": "6090d832.b4d3b8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2452.057632446289,
    "y": 324.65966796875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "84744d3b.9da2a"
      ]
    ]
  },
  {
    "id": "b011647e.200f58",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2447.566665649414,
    "y": 374.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d7ef13e5.e943b8"
      ]
    ]
  },
  {
    "id": "b951c0d0.48c67",
    "type": "for",
    "name": "for each allotted-resource",
    "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1952.566665649414,
    "y": 339.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "4b529d8b.e7269c",
        "fb84a849.18463",
        "4f8a0bf3.f76a6c",
        "6a76544b.f753cc"
      ]
    ]
  },
  {
    "id": "4b529d8b.e7269c",
    "type": "set",
    "name": "set the current allotted-resource-id",
    "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
    "comments": "",
    "x": 2232.566665649414,
    "y": 277.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b94dc7e3.86f89",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
    "comments": "",
    "x": 1926.566665649414,
    "y": 289.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "3ae502fc.de69ae",
    "type": "get-resource",
    "name": "get-resource pnfs-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/pnfs?depth=0' depth = 0\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
    "comments": "",
    "outputs": 1,
    "x": 1969.566665649414,
    "y": 148.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "7554f41e.870f04",
    "type": "get-resource",
    "name": "get-resource logical-links",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
    "comments": "",
    "outputs": 1,
    "x": 1981.566665649414,
    "y": 189.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "c4ed6feb.870ac",
    "type": "comment",
    "name": "The following two nodes are for PCE",
    "info": "",
    "comments": "",
    "x": 2006.566665649414,
    "y": 101.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "3fa0fea5.b1a7a2",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
    "comments": "",
    "x": 1926.566665649414,
    "y": 235.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "84744d3b.9da2a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 2630.566665649414,
    "y": 327.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d7ef13e5.e943b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 2630.504165649414,
    "y": 376.2259521484375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "f400ea8d.94bbd8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2632.504165649414,
    "y": 427.2259521484375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "3f239fa1.c0b958"
      ]
    ]
  },
  {
    "id": "3f239fa1.c0b958",
    "type": "save",
    "name": "get allotted-resource relationship from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2967.504165649414,
    "y": 196.22596740722656,
    "z": "9718fe15.98603",
    "wires": [
      [
        "b38986d.d0d7878",
        "824af3e9.18d3c",
        "c4ad697c.ed235"
      ]
    ]
  },
  {
    "id": "824af3e9.18d3c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3240.995132446289,
    "y": 88.79994201660156,
    "z": "9718fe15.98603",
    "wires": [
      [
        "53ebc234.9c89e4"
      ]
    ]
  },
  {
    "id": "53ebc234.9c89e4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3418.566665649414,
    "y": 89.08570861816406,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "c4ad697c.ed235",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3236.504165649414,
    "y": 138.22596740722656,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d35b45c.ac75538"
      ]
    ]
  },
  {
    "id": "d35b45c.ac75538",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3418.504165649414,
    "y": 138.22596740722656,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b38986d.d0d7878",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3240.504165649414,
    "y": 189.22596740722656,
    "z": "9718fe15.98603",
    "wires": [
      [
        "cda04f1c.b5e8e8"
      ]
    ]
  },
  {
    "id": "cda04f1c.b5e8e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3420.504165649414,
    "y": 189.22596740722656,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9d21d2af.f1a338"
      ]
    ]
  },
  {
    "id": "9d21d2af.f1a338",
    "type": "switchNode",
    "name": "switch allotted-resource.relationship-list not empty",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2986.566665649414,
    "y": 324.08570861816406,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2a81c517.5bc7ca",
        "6137d6c5.a89918"
      ]
    ]
  },
  {
    "id": "6137d6c5.a89918",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3296.566665649414,
    "y": 331.08570861816406,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "2a81c517.5bc7ca",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3295.566665649414,
    "y": 385.08570861816406,
    "z": "9718fe15.98603",
    "wires": [
      [
        "5824c72f.9c5af"
      ]
    ]
  },
  {
    "id": "28f331ee.9053e6",
    "type": "outcome",
    "name": "network-policy",
    "xml": "<outcome value='network-policy'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4040.566665649414,
    "y": 339.08570861816406,
    "z": "9718fe15.98603",
    "wires": [
      [
        "75d3715b.ab7198"
      ]
    ]
  },
  {
    "id": "75d3715b.ab7198",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4217.566543579102,
    "y": 332.08558654785156,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ae2a4fce.8a1ea",
        "2c72c44.f2aec3c"
      ]
    ]
  },
  {
    "id": "5824c72f.9c5af",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3459.566665649414,
    "y": 311.08570861816406,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a5e82cdc.4d956",
        "b714d40c.0dac68"
      ]
    ]
  },
  {
    "id": "a5e82cdc.4d956",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3740.566665649414,
    "y": 267.08570861816406,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e552898d.0c1d9"
      ]
    ]
  },
  {
    "id": "e552898d.0c1d9",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4002.566665649414,
    "y": 267.08570861816406,
    "z": "9718fe15.98603",
    "wires": [
      [
        "28f331ee.9053e6"
      ]
    ]
  },
  {
    "id": "ae2a4fce.8a1ea",
    "type": "set",
    "name": "set the 1st network-policy-id",
    "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 4460.566543579102,
    "y": 289.08558654785156,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "2c72c44.f2aec3c",
    "type": "save",
    "name": "get network-policy from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
    "comments": "",
    "outputs": 1,
    "x": 4449.566543579102,
    "y": 344.08558654785156,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9efeb089.3f19c",
        "79f2e4c0.6b947c",
        "6e1f853a.2f305c"
      ]
    ]
  },
  {
    "id": "6e1f853a.2f305c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4780.566665649414,
    "y": 252.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "4cb6456e.ff636c"
      ]
    ]
  },
  {
    "id": "4cb6456e.ff636c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4929.138198852539,
    "y": 252.3714599609375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "7e5b3ac6.b0f59c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4928.075698852539,
    "y": 296.51171875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "79f2e4c0.6b947c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4769.075698852539,
    "y": 296.51171875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7e5b3ac6.b0f59c"
      ]
    ]
  },
  {
    "id": "9efeb089.3f19c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4776.075698852539,
    "y": 375.51171875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "826c9ce5.e54c8"
      ]
    ]
  },
  {
    "id": "826c9ce5.e54c8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4915.075698852539,
    "y": 375.51171875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "97cd2b3d.5361c",
        "b21dac06.214a"
      ]
    ]
  },
  {
    "id": "97cd2b3d.5361c",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5120.566665649414,
    "y": 373.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b21dac06.214a",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5119.566665649414,
    "y": 419.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b714d40c.0dac68",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3557.566665649414,
    "y": 383.08570861816406,
    "z": "9718fe15.98603",
    "wires": [
      [
        "1e5b0c1.e0c2e74"
      ]
    ]
  },
  {
    "id": "1e5b0c1.e0c2e74",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3837.566665649414,
    "y": 383.08570861816406,
    "z": "9718fe15.98603",
    "wires": [
      [
        "4e4dff53.dcf898"
      ]
    ]
  },
  {
    "id": "4e4dff53.dcf898",
    "type": "outcome",
    "name": "logical-link",
    "xml": "<outcome value='logical-link'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2208.5667877197266,
    "y": 814.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ac446985.9d513"
      ]
    ]
  },
  {
    "id": "ac446985.9d513",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2385.566665649414,
    "y": 807.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "8274477.dcf57b8",
        "276accab.cdfa24"
      ]
    ]
  },
  {
    "id": "8274477.dcf57b8",
    "type": "set",
    "name": "set the current logical-link-name",
    "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 2628.566665649414,
    "y": 764.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "276accab.cdfa24",
    "type": "save",
    "name": "get logical-link from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
    "comments": "",
    "outputs": 1,
    "x": 2617.566665649414,
    "y": 819.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "650f90f1.61d618",
        "627e407c.cdb6e8",
        "11b910a0.ac71f7"
      ]
    ]
  },
  {
    "id": "650f90f1.61d618",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2909.057632446289,
    "y": 797.65966796875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "4873b670.d0b66"
      ]
    ]
  },
  {
    "id": "627e407c.cdb6e8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2897.566665649414,
    "y": 842.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "24b3a747.017c5"
      ]
    ]
  },
  {
    "id": "4873b670.d0b66",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3057.629165649414,
    "y": 797.9454345703125,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "24b3a747.017c5",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3056.566665649414,
    "y": 842.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "11b910a0.ac71f7",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2904.566665649414,
    "y": 921.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "90fde557.205cd"
      ]
    ]
  },
  {
    "id": "90fde557.205cd",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3043.566665649414,
    "y": 921.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "c9c2aba8.a4026",
        "ff35ed1f.a0a938",
        "85e3c5ae.d3ea4",
        "f6929a04.bb038",
        "aab96898.397318",
        "1f6e9e43.7e8d42",
        "158807bc.c2dde8",
        "b53436ed.4e5d8",
        "8c4c723a.871028",
        "af5ed41e.3d53d8",
        "ad7d5348.0e5498",
        "36740b66.98fa4c",
        "344dee20.fc9faa",
        "8b000822.1c253",
        "4b552ff.dab62d",
        "76a3b118.862498",
        "62eac021.71055",
        "fbc065ad.333e38",
        "28bc0683.b68302"
      ]
    ]
  },
  {
    "id": "e37a586.c072528",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3355.566665649414,
    "y": 471.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "c9c2aba8.a4026",
    "type": "execute",
    "name": "execute UUID generator for otn-tunnel-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3342.5665435791016,
    "y": 563.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "8b000822.1c253",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 3299.5665435791016,
    "y": 608.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "ff35ed1f.a0a938",
    "type": "set",
    "name": "set network-route-one",
    "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
    "comments": "",
    "x": 3274.5665435791016,
    "y": 671.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "85e3c5ae.d3ea4",
    "type": "set",
    "name": "set network-route-two",
    "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
    "comments": "",
    "x": 3275.5665435791016,
    "y": 726.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "f6929a04.bb038",
    "type": "save",
    "name": "get network-route-one from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
    "comments": "",
    "outputs": 1,
    "x": 3291.5665435791016,
    "y": 774.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "b38ce95d.a8d8b",
        "924a9986.e8ef18",
        "f99ce89.2f90198"
      ]
    ]
  },
  {
    "id": "aab96898.397318",
    "type": "save",
    "name": "get network-route-two from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
    "comments": "",
    "outputs": 1,
    "x": 3286.566665649414,
    "y": 841.0855712890625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "84f95296.4ca828",
        "1e5b7441.b6964c",
        "529168b7.ab36c8"
      ]
    ]
  },
  {
    "id": "b38ce95d.a8d8b",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3532.566665649414,
    "y": 602.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "b93c3fb5.8aab08"
      ]
    ]
  },
  {
    "id": "924a9986.e8ef18",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3528.075698852539,
    "y": 651.51171875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e5b21304.84d3f"
      ]
    ]
  },
  {
    "id": "f99ce89.2f90198",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3532.075698852539,
    "y": 704.51171875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "27a2d9bd.f2416e"
      ]
    ]
  },
  {
    "id": "b93c3fb5.8aab08",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3681.138198852539,
    "y": 601.3714599609375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "e5b21304.84d3f",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3671.075698852539,
    "y": 651.51171875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "84f95296.4ca828",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3536.566665649414,
    "y": 758.0855712890625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "5554565c.9228c"
      ]
    ]
  },
  {
    "id": "1e5b7441.b6964c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3532.075698852539,
    "y": 807.5115966796875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6ebd88b9.37bc78"
      ]
    ]
  },
  {
    "id": "529168b7.ab36c8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3515.075698852539,
    "y": 855.5115966796875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a79b682c.88ba1"
      ]
    ]
  },
  {
    "id": "5554565c.9228c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3685.138198852539,
    "y": 757.371337890625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "6ebd88b9.37bc78",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3675.075698852539,
    "y": 807.5115966796875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "27a2d9bd.f2416e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3693.566665649414,
    "y": 704.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e35dbf37.07c328"
      ]
    ]
  },
  {
    "id": "a79b682c.88ba1",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3668.566665649414,
    "y": 855.0855712890625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "25d6cc4d.0a0984"
      ]
    ]
  },
  {
    "id": "e35dbf37.07c328",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3865.566665649414,
    "y": 704.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "df69d2ac.c94928",
        "d63273d9.506ef8",
        "3dcf3da2.14e88a"
      ]
    ]
  },
  {
    "id": "25d6cc4d.0a0984",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3860.566665649414,
    "y": 789.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "284fe38.7ff599c",
        "574139dc.c55898",
        "f46ebe04.450d9"
      ]
    ]
  },
  {
    "id": "df69d2ac.c94928",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4026.566177368164,
    "y": 440.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7ce464fa.676414"
      ]
    ]
  },
  {
    "id": "d63273d9.506ef8",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4028.566177368164,
    "y": 494.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6bd6b0d9.b558a"
      ]
    ]
  },
  {
    "id": "284fe38.7ff599c",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4041.565933227539,
    "y": 662.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6918e709.d57e78"
      ]
    ]
  },
  {
    "id": "574139dc.c55898",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4043.565933227539,
    "y": 716.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "688d98a0.dbdc1"
      ]
    ]
  },
  {
    "id": "69d167e5.40c62",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4336.566177368164,
    "y": 392.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "e079feb5.4893f8",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4329.566177368164,
    "y": 490.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "81aa5c4a.edfc28",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4405.565933227539,
    "y": 689.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "3e901a8b.2e5bae",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4409.565933227539,
    "y": 782.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "93aaa3a6.0ddda8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3487.566665649414,
    "y": 1205.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e42413be.b1fcf8"
      ]
    ]
  },
  {
    "id": "9cfab2db.ec2e9",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3497.057632446289,
    "y": 1247.6597290039062,
    "z": "9718fe15.98603",
    "wires": [
      [
        "b6bb4e8e.b484d"
      ]
    ]
  },
  {
    "id": "aba7aaee.8e0cf8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3485.566665649414,
    "y": 1294.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "30b7412f.1199ae"
      ]
    ]
  },
  {
    "id": "3ca3d712.007d28",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3187.566665649414,
    "y": 1167.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "158807bc.c2dde8",
    "type": "save",
    "name": "get p-interface-src from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3230.566665649414,
    "y": 1232.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "93aaa3a6.0ddda8",
        "9cfab2db.ec2e9",
        "aba7aaee.8e0cf8"
      ]
    ]
  },
  {
    "id": "1f6e9e43.7e8d42",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3219.566665649414,
    "y": 1082.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "aef080fa.c114b",
        "ec7d5fb1.6942b"
      ]
    ]
  },
  {
    "id": "ec7d5fb1.6942b",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3442.566665649414,
    "y": 1068.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "fd803677.f63638"
      ]
    ]
  },
  {
    "id": "aef080fa.c114b",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3444.566665649414,
    "y": 1101.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "51e88d79.18cdf4"
      ]
    ]
  },
  {
    "id": "e42413be.b1fcf8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3660.233169555664,
    "y": 1204.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "4ed4fbc5.711d0c",
        "90207f5c.a05dd8"
      ]
    ]
  },
  {
    "id": "b6bb4e8e.b484d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3650.6290435791016,
    "y": 1250.9454650878906,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "30b7412f.1199ae",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3654.566665649414,
    "y": 1295.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "4ed4fbc5.711d0c",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3924.566665649414,
    "y": 1255.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "db4ec7c1.fb8ff8",
        "8a68098.2ae2578"
      ]
    ]
  },
  {
    "id": "8a68098.2ae2578",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4100.566665649414,
    "y": 1305.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9f8db296.d1b7"
      ]
    ]
  },
  {
    "id": "db4ec7c1.fb8ff8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4102.566665649414,
    "y": 1369.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "19ec1ce6.638d63"
      ]
    ]
  },
  {
    "id": "19ec1ce6.638d63",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4264.566665649414,
    "y": 1365.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "9f8db296.d1b7",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4265.566665649414,
    "y": 1302.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "5c94bd3f.3e7f94",
        "fc089afb.f44ed8"
      ]
    ]
  },
  {
    "id": "51e88d79.18cdf4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3587.566665649414,
    "y": 1098.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "fd803677.f63638",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3590.566665649414,
    "y": 1061.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "eccb372c.34c8d",
        "98d2965b.47a9d8"
      ]
    ]
  },
  {
    "id": "eccb372c.34c8d",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3764.566665649414,
    "y": 1017.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "90207f5c.a05dd8",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3636.566665649414,
    "y": 1386.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "5a97a44a.833984"
      ]
    ]
  },
  {
    "id": "5a97a44a.833984",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3917.566665649414,
    "y": 1381.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "1a323487.0d80a3"
      ]
    ]
  },
  {
    "id": "1a323487.0d80a3",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4228.852310180664,
    "y": 1455.907470703125,
    "z": "9718fe15.98603",
    "wires": [
      [
        "25962334.407414"
      ]
    ]
  },
  {
    "id": "98d2965b.47a9d8",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3779.566665649414,
    "y": 1128.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "3ec80c0c.a7d6a4",
        "fb8be251.80b5",
        "c39223e5.81b608"
      ]
    ]
  },
  {
    "id": "3ec80c0c.a7d6a4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3975.0667877197266,
    "y": 1080.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "cee29929.100dd"
      ]
    ]
  },
  {
    "id": "fb8be251.80b5",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3967.0667877197266,
    "y": 1135.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "75204f77.c3b168"
      ]
    ]
  },
  {
    "id": "c39223e5.81b608",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3972.0667877197266,
    "y": 1192.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "24e0ef02.5cfcc"
      ]
    ]
  },
  {
    "id": "24e0ef02.5cfcc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4124.066787719727,
    "y": 1193.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "75204f77.c3b168",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4135.066787719727,
    "y": 1138.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "cee29929.100dd",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4119.449111938477,
    "y": 1077.7413635253906,
    "z": "9718fe15.98603",
    "wires": [
      [
        "20e9a108.5fcefe"
      ]
    ]
  },
  {
    "id": "20e9a108.5fcefe",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4342.566909790039,
    "y": 1216.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "4c952f98.568af8"
      ]
    ]
  },
  {
    "id": "fc089afb.f44ed8",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
    "comments": "",
    "x": 4435.566665649414,
    "y": 1260.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "5c94bd3f.3e7f94",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
    "comments": "",
    "x": 4436.566665649414,
    "y": 1368.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "e2e3430b.441438",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4437.566665649414,
    "y": 1317.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "25962334.407414",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4435.683853149414,
    "y": 1456.426025390625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "c4c94be4.c4e6d8",
        "778cb9b9.8f8fe8",
        "bf204b7b.9bfdb"
      ]
    ]
  },
  {
    "id": "c4c94be4.c4e6d8",
    "type": "set",
    "name": "set source ttp-id",
    "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4650.683853149414,
    "y": 1418.426025390625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "778cb9b9.8f8fe8",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4647.683853149414,
    "y": 1457.426025390625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ec4224f7.9e7cd8"
      ]
    ]
  },
  {
    "id": "bf204b7b.9bfdb",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4603.183853149414,
    "y": 1499.426025390625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "ec4224f7.9e7cd8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4828.183853149414,
    "y": 1456.426025390625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "582de34f.7fb28c"
      ]
    ]
  },
  {
    "id": "594a82b5.27abf4",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4740.566909790039,
    "y": 1220.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "66078b.852b6874"
      ]
    ]
  },
  {
    "id": "66078b.852b6874",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4917.566909790039,
    "y": 1212.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "845ac8fd.748f28",
        "83b24a05.2f8a"
      ]
    ]
  },
  {
    "id": "4c952f98.568af8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4537.566909790039,
    "y": 1216.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "594a82b5.27abf4",
        "5ed6730.6c8c00c"
      ]
    ]
  },
  {
    "id": "5ed6730.6c8c00c",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4606.566909790039,
    "y": 1290.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "4c5161e.9fd722"
      ]
    ]
  },
  {
    "id": "4c5161e.9fd722",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4802.566909790039,
    "y": 1290.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "56b33693.b47598"
      ]
    ]
  },
  {
    "id": "582de34f.7fb28c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4986.183853149414,
    "y": 1456.426025390625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "85577907.9676c"
      ]
    ]
  },
  {
    "id": "85577907.9676c",
    "type": "set",
    "name": "set source tunnel tp ip",
    "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5193.183853149414,
    "y": 1456.426025390625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "83b24a05.2f8a",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5142.566909790039,
    "y": 1208.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "713c5be.b2c37a4",
        "d56276.26041588",
        "196389ff.ab755e"
      ]
    ]
  },
  {
    "id": "845ac8fd.748f28",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainA id",
    "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5172.566909790039,
    "y": 1156.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "713c5be.b2c37a4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5352.566909790039,
    "y": 1199.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d0702051.0907f"
      ]
    ]
  },
  {
    "id": "d56276.26041588",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5344.566909790039,
    "y": 1254.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "8b99771a.c5d7d8"
      ]
    ]
  },
  {
    "id": "196389ff.ab755e",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5349.566909790039,
    "y": 1311.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a51c05da.8af508"
      ]
    ]
  },
  {
    "id": "a51c05da.8af508",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5501.566909790039,
    "y": 1312.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "8b99771a.c5d7d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5512.566909790039,
    "y": 1257.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d0702051.0907f",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5496.949234008789,
    "y": 1196.7413635253906,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2f7031d3.9cf0ee"
      ]
    ]
  },
  {
    "id": "56b33693.b47598",
    "type": "set",
    "name": "set domainA ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5065.566909790039,
    "y": 1293.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "2f7031d3.9cf0ee",
    "type": "set",
    "name": "set controller domainA data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5683.566909790039,
    "y": 1193.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "f189d378.846e88",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4324.566177368164,
    "y": 428.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b971caad.98e088",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4315.566177368164,
    "y": 526.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "7ce464fa.676414",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4149.566177368164,
    "y": 434.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "69d167e5.40c62",
        "f189d378.846e88"
      ]
    ]
  },
  {
    "id": "6bd6b0d9.b558a",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4155.566177368164,
    "y": 498.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e079feb5.4893f8",
        "b971caad.98e088"
      ]
    ]
  },
  {
    "id": "6918e709.d57e78",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4169.565933227539,
    "y": 662.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "81aa5c4a.edfc28",
        "94706e58.1662e"
      ]
    ]
  },
  {
    "id": "688d98a0.dbdc1",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4172.565933227539,
    "y": 715.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "3e901a8b.2e5bae",
        "fa86abe3.b1432"
      ]
    ]
  },
  {
    "id": "94706e58.1662e",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4391.565933227539,
    "y": 729.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "fa86abe3.b1432",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4394.565933227539,
    "y": 820.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "86d40228.e6791",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3550.566665649414,
    "y": 1766.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6a32c154.ba6f4",
        "1782aa9f.237955"
      ]
    ]
  },
  {
    "id": "9ec80efb.c2577",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3377.900161743164,
    "y": 1767.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "86d40228.e6791"
      ]
    ]
  },
  {
    "id": "43e3fed6.1297b8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3387.391128540039,
    "y": 1809.6597290039062,
    "z": "9718fe15.98603",
    "wires": [
      [
        "334a1379.e9843c"
      ]
    ]
  },
  {
    "id": "1f47b68f.a8eef1",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3375.900161743164,
    "y": 1856.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "5bb133ac.e78e0c"
      ]
    ]
  },
  {
    "id": "334a1379.e9843c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3540.9625396728516,
    "y": 1812.9454650878906,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "5bb133ac.e78e0c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3544.900161743164,
    "y": 1857.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "6a32c154.ba6f4",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3836.900161743164,
    "y": 1770.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ca43a356.ba0b08",
        "e66d0b8d.a97b4"
      ]
    ]
  },
  {
    "id": "e66d0b8d.a97b4",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4059.900161743164,
    "y": 1725.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "fd8de530.926928"
      ]
    ]
  },
  {
    "id": "ca43a356.ba0b08",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4061.900161743164,
    "y": 1789.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ac8c9391.216608"
      ]
    ]
  },
  {
    "id": "ac8c9391.216608",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4220.900161743164,
    "y": 1808.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "fd8de530.926928",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4224.900161743164,
    "y": 1722.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "23cc210e.ee0c06",
        "6fca06b.e0d07f8"
      ]
    ]
  },
  {
    "id": "8c4c723a.871028",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3149.900161743164,
    "y": 1802.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9ec80efb.c2577",
        "43e3fed6.1297b8",
        "1f47b68f.a8eef1"
      ]
    ]
  },
  {
    "id": "24043c86.21d3b4",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3110.900161743164,
    "y": 1746.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b53436ed.4e5d8",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3162.900161743164,
    "y": 1548.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "b0d17fd7.22179",
        "dd9d4fb5.ef81d"
      ]
    ]
  },
  {
    "id": "dd9d4fb5.ef81d",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3385.900161743164,
    "y": 1534.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "b04c1433.ec2b4"
      ]
    ]
  },
  {
    "id": "b0d17fd7.22179",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3387.900161743164,
    "y": 1567.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "774ab139.4714d"
      ]
    ]
  },
  {
    "id": "774ab139.4714d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3530.900161743164,
    "y": 1564.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b04c1433.ec2b4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3533.900161743164,
    "y": 1527.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "1e9a896f.f9bc1f",
        "93b99c7d.fb3988"
      ]
    ]
  },
  {
    "id": "1e9a896f.f9bc1f",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3727.900161743164,
    "y": 1530.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "1782aa9f.237955",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3780.900161743164,
    "y": 1889.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2e3481a6.9bb10e"
      ]
    ]
  },
  {
    "id": "2e3481a6.9bb10e",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3986.900161743164,
    "y": 1889.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6540c5f1.0a5994"
      ]
    ]
  },
  {
    "id": "6540c5f1.0a5994",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4204.185806274414,
    "y": 1887.907470703125,
    "z": "9718fe15.98603",
    "wires": [
      [
        "95bcf360.d32c3"
      ]
    ]
  },
  {
    "id": "93b99c7d.fb3988",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3749.900161743164,
    "y": 1598.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "56130ba2.c1cf54",
        "ae8939cc.fc31",
        "2a03aebc.9defb2"
      ]
    ]
  },
  {
    "id": "56130ba2.c1cf54",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3945.4002838134766,
    "y": 1550.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d6a55773.4a4c"
      ]
    ]
  },
  {
    "id": "ae8939cc.fc31",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3937.4002838134766,
    "y": 1605.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9b459bcd.2098d"
      ]
    ]
  },
  {
    "id": "2a03aebc.9defb2",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3942.4002838134766,
    "y": 1662.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "649fe73e.2ce088"
      ]
    ]
  },
  {
    "id": "649fe73e.2ce088",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4094.4002838134766,
    "y": 1663.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "9b459bcd.2098d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4105.400283813477,
    "y": 1608.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d6a55773.4a4c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4089.7826080322266,
    "y": 1547.7414855957031,
    "z": "9718fe15.98603",
    "wires": [
      [
        "bede9152.115d78"
      ]
    ]
  },
  {
    "id": "23cc210e.ee0c06",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
    "comments": "",
    "x": 4394.900161743164,
    "y": 1683.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "6fca06b.e0d07f8",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
    "comments": "",
    "x": 4395.900161743164,
    "y": 1788.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "69bceee8.94dc1",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4390.900161743164,
    "y": 1737.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "95bcf360.d32c3",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4411.017349243164,
    "y": 1877.4261474609375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d7309d49.1473f8",
        "2eed2e93.5097fa",
        "930eaed5.6d5ba"
      ]
    ]
  },
  {
    "id": "d7309d49.1473f8",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4626.017349243164,
    "y": 1839.4261474609375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "2eed2e93.5097fa",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4623.017349243164,
    "y": 1878.4261474609375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2f95459c.265a5a"
      ]
    ]
  },
  {
    "id": "930eaed5.6d5ba",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4578.517349243164,
    "y": 1920.4261474609375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "2f95459c.265a5a",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4803.517349243164,
    "y": 1877.4261474609375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d078b0a.68a52d"
      ]
    ]
  },
  {
    "id": "d078b0a.68a52d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4961.517349243164,
    "y": 1877.4261474609375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "30e98951.5e07a6"
      ]
    ]
  },
  {
    "id": "30e98951.5e07a6",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5168.517349243164,
    "y": 1877.4261474609375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "981701b9.ec871",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4671.900161743164,
    "y": 1566.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d77b06b.6f4d6f8"
      ]
    ]
  },
  {
    "id": "d77b06b.6f4d6f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4848.900161743164,
    "y": 1558.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "3a0f923c.08de3e",
        "973e1032.2176f8"
      ]
    ]
  },
  {
    "id": "bede9152.115d78",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4273.900161743164,
    "y": 1562.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "fdc36db2.a87e28"
      ]
    ]
  },
  {
    "id": "fdc36db2.a87e28",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4468.900161743164,
    "y": 1562.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "981701b9.ec871",
        "be6d1ad1.f19078"
      ]
    ]
  },
  {
    "id": "973e1032.2176f8",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5056.900161743164,
    "y": 1565.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ca9140fb.c087c8",
        "6d0312aa.d002b4",
        "f05eee5.baf501"
      ]
    ]
  },
  {
    "id": "6e647d31.2d49bc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4850.900161743164,
    "y": 1631.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e3a19b14.5a697"
      ]
    ]
  },
  {
    "id": "be6d1ad1.f19078",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4673.900161743164,
    "y": 1639.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6e647d31.2d49bc"
      ]
    ]
  },
  {
    "id": "3a0f923c.08de3e",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainB id",
    "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5086.900161743164,
    "y": 1513.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "e3a19b14.5a697",
    "type": "set",
    "name": "set domainB ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5032.900161743164,
    "y": 1695.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "ca9140fb.c087c8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5266.900161743164,
    "y": 1556.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "b8d407f0.fa2f2"
      ]
    ]
  },
  {
    "id": "6d0312aa.d002b4",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5258.900161743164,
    "y": 1611.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "4b944ffd.e25418"
      ]
    ]
  },
  {
    "id": "f05eee5.baf501",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5263.900161743164,
    "y": 1668.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ee8e04d7.272aa8"
      ]
    ]
  },
  {
    "id": "ee8e04d7.272aa8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5415.900161743164,
    "y": 1669.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "4b944ffd.e25418",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5426.900161743164,
    "y": 1614.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b8d407f0.fa2f2",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5411.282485961914,
    "y": 1553.7414855957031,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6d9ea0b0.8eb598"
      ]
    ]
  },
  {
    "id": "6d9ea0b0.8eb598",
    "type": "set",
    "name": "set controller domainB data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5625.900161743164,
    "y": 1550.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "af5ed41e.3d53d8",
    "type": "set",
    "name": "set LEAF stuff",
    "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop + '-' + $tmp.aai.network-route-A.logical-interface-id`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
    "comments": "",
    "x": 3214.566665649414,
    "y": 1372.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "8ca11cdb.f07238",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4491.566177368164,
    "y": 512.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d8ad8c3e.d0237",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4559.565933227539,
    "y": 714.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "ad7d5348.0e5498",
    "type": "set",
    "name": "set ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop + '-' + $tmp.aai.network-route-B.logical-interface-id`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
    "comments": "",
    "x": 3110.566665649414,
    "y": 1933.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "36740b66.98fa4c",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3372.566665649414,
    "y": 2846.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "344dee20.fc9faa",
    "type": "switchNode",
    "name": "switch found-middle-man?",
    "xml": "<switch test='`$found-middle-man`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3249.566665649414,
    "y": 2956.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ae20b5d5.d95098",
        "c9495f1c.3bc2f8"
      ]
    ]
  },
  {
    "id": "ae20b5d5.d95098",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3433.566665649414,
    "y": 2935.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "dbad0754.935cf"
      ]
    ]
  },
  {
    "id": "c9495f1c.3bc2f8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2969.566665649414,
    "y": 4521.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "89fb91c7.4bd6f"
      ]
    ]
  },
  {
    "id": "10e6ecec.11b933",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3480.566665649414,
    "y": 5106.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "965aea89.b04fc8",
        "f18404c6.f7135",
        "e65dde18.8f2e28",
        "1e648504.a919f3",
        "518cc181.03ac48",
        "3f0ddd6.f3f1022"
      ]
    ]
  },
  {
    "id": "dbad0754.935cf",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6146.566665649414,
    "y": 1755.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "36824bf8.d68ef4",
        "2dc163c.5688f1c",
        "aefc0847.3297e8",
        "f9d64859.5035b",
        "378565ef.1147ba",
        "ea2b2456.c327d",
        "41693c79.da7d5c",
        "632a01d1.5b8d1",
        "3ebd5a04.12a166",
        "f08579e.3888c08",
        "c49cd07d.45dca",
        "64b31039.d88b18",
        "9f309da2.930198",
        "bc5b333d.5b219",
        "4ee4ed66.f0512c",
        "11738810.45add",
        "997f20e4.966598",
        "90ca3b9e.d9782",
        "99bc893b.a732e",
        "98d8658a.1dab08",
        "d8f4cd5c.153e9",
        "96928e3.987df7"
      ]
    ]
  },
  {
    "id": "3ebd5a04.12a166",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6517.566665649414,
    "y": 1678.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "36824bf8.d68ef4",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6471.566665649414,
    "y": 1776.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "2dc163c.5688f1c",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6607.566665649414,
    "y": 1823.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "c7f7058b.2d43",
    "type": "comment",
    "name": "Create ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 6438.566665649414,
    "y": 1627.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "288fb927.99235e",
    "type": "comment",
    "name": "create middle man connectivity and ...",
    "info": "1- create middle man connectivity\n2- create relation with all connectivities\n   in the path\n3- put srcTtp (+dstTtp) somewhere in the\n   vpn-binding -> this is for later on to find\n   which OTN tunnel's bandwidth has to be increased.\n5- create UNIs\n4- create relationship to UNIs",
    "comments": "",
    "x": 6934.566665649414,
    "y": 2363.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "aefc0847.3297e8",
    "type": "execute",
    "name": "execute UUID generator for connectivity middle-man",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-middle-man-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6498.566665649414,
    "y": 2402.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "f9d64859.5035b",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-middle-man-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-middle-man-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<!--The followings are not needed for the middle-man-connectivity-->\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />-->\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='mdsc' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6446.566665649414,
    "y": 2453.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "378565ef.1147ba",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-middle-man-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-middle-man-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6582.566665649414,
    "y": 2500.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "718897ce.fb3b1",
    "type": "comment",
    "name": "Create MIDDLE-MAN connectivity",
    "info": "",
    "comments": "",
    "x": 6439.566665649414,
    "y": 2362.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "42817fe0.95098",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6869.566665649414,
    "y": 2559.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "ea2b2456.c327d",
    "type": "save",
    "name": "get middle-man connectivity from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $prop.connectivity-middle-man-uuid\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"middle-man-conn\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 6460.566665649414,
    "y": 2606.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7708ed16.f5264c",
        "77c895d1.87f4a4",
        "866d7f4e.404768"
      ]
    ]
  },
  {
    "id": "7708ed16.f5264c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6707.566665649414,
    "y": 2560.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "42817fe0.95098"
      ]
    ]
  },
  {
    "id": "77c895d1.87f4a4",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6708.057632446289,
    "y": 2605.6597290039062,
    "z": "9718fe15.98603",
    "wires": [
      [
        "372888d7.b266f8"
      ]
    ]
  },
  {
    "id": "866d7f4e.404768",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6705.566665649414,
    "y": 2649.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "5cb60ec5.ffb7e8"
      ]
    ]
  },
  {
    "id": "372888d7.b266f8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 6870.629043579102,
    "y": 2605.9454650878906,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "5cb60ec5.ffb7e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 6874.566665649414,
    "y": 2650.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "4ee4ed66.f0512c",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6514.566665649414,
    "y": 2922.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "11738810.45add",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6517.566665649414,
    "y": 2967.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "90ca3b9e.d9782",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6509.566665649414,
    "y": 2721.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "99bc893b.a732e",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6511.566665649414,
    "y": 2768.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "ce999bfb.8752f",
    "type": "comment",
    "name": "The following two will be done in F1",
    "info": "",
    "comments": "",
    "x": 6430.566665649414,
    "y": 2875.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "618f9b48.ad8ea4",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4430.566909790039,
    "y": 5268.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "965aea89.b04fc8",
    "type": "switchNode",
    "name": "switch no-pce-call",
    "xml": "<switch test='`$no-pce-call`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3695.566665649414,
    "y": 5087.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "c53bf166.c2e718",
        "936c4fdb.103588"
      ]
    ]
  },
  {
    "id": "936c4fdb.103588",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3867.566665649414,
    "y": 5084.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "8b1c5fc9.627c"
      ]
    ]
  },
  {
    "id": "c53bf166.c2e718",
    "type": "outcomeFalse",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3819.566665649414,
    "y": 5931.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "eab327e7.a5f748"
      ]
    ]
  },
  {
    "id": "3f493e72.b6d702",
    "type": "comment",
    "name": "1 --> PCE is needed",
    "info": "",
    "comments": "",
    "x": 3880.566665649414,
    "y": 5054.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "4859c2db.d9b9e4",
    "type": "comment",
    "name": "2 --> no need to call PCE",
    "info": "",
    "comments": "",
    "x": 3890.566665649414,
    "y": 5889.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "41693c79.da7d5c",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6516.566665649414,
    "y": 3101.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "8b1c5fc9.627c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4043.566665649414,
    "y": 5086.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a815fc28.26a0f",
        "8b2580e9.dc4908",
        "63429691.f224b",
        "2532ed2.07c3292",
        "d070f297.71c91",
        "d66ee6cb.59aee8",
        "618f9b48.ad8ea4",
        "4f6ebd11.7928d4",
        "53cb53b2.198aa4"
      ]
    ]
  },
  {
    "id": "7eea77d.c16dd08",
    "type": "comment",
    "name": "Use the middle-man-conn.eth-srv-name for the LEAF connectivity's eth srv name",
    "info": "",
    "comments": "",
    "x": 5487.566421508789,
    "y": 5011.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "a815fc28.26a0f",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4289.566909790039,
    "y": 5767.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "632a01d1.5b8d1",
    "type": "save",
    "name": "save connectivityB relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6523.566665649414,
    "y": 2017.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "5eff9d93.842974",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid=tmp.ROOT.uni-p-interface-long",
    "xml": "<set>\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />\n",
    "comments": "",
    "x": 6573.566665649414,
    "y": 1720.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "f08579e.3888c08",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6520.566665649414,
    "y": 1308.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "c49cd07d.45dca",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6468.566665649414,
    "y": 1356.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "64b31039.d88b18",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6596.566665649414,
    "y": 1403.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "6013e30e.dd851c",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 6433.566665649414,
    "y": 1266.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "9f309da2.930198",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />\n<parameter name='data-owner' value='`$tmp.aai.service-instance.service-instance-id`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6430.566665649414,
    "y": 1494.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "bc5b333d.5b219",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6523.566665649414,
    "y": 1547.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "cdd019be.ce295",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 6414.566665649414,
    "y": 1450.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "aeaa5a0f.0b3cf",
    "type": "comment",
    "name": "Create ROOT UNI",
    "info": "",
    "comments": "",
    "x": 6420.566665649414,
    "y": 1900.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "2532ed2.07c3292",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />\n<parameter name='data-owner' value='`$tmp.aai.service-instance.service-instance-id`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4356.566421508789,
    "y": 5019.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "3a34d279.a99216",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4340.566421508789,
    "y": 4975.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "4c6450c4.cdb8b8",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 5087.566421508789,
    "y": 5006.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d6b231ff.4e48",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 5174.566421508789,
    "y": 5048.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "e479d260.5097c",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$middle-man-conn.etht-svc-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 5122.566421508789,
    "y": 5096.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "c8a578a.1c83e08",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5250.566421508789,
    "y": 5143.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "d66ee6cb.59aee8",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4418.566909790039,
    "y": 5310.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "85a1c373.0d0068",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4401.566909790039,
    "y": 5372.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "8b2580e9.dc4908",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4512.566909790039,
    "y": 5414.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "2bc22db1.d483d2",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 4969.566421508789,
    "y": 5585.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "47c00ee.a0fdbf",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4279.566421508789,
    "y": 6283.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "afc7e373.9dd788",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />\n<parameter name='data-owner' value='`$tmp.aai.service-instance.service-instance-id`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4212.566421508789,
    "y": 6237.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "13eeaed2.223169",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4161.566421508789,
    "y": 6188.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "9fd3ad0c.c5f0a",
    "type": "save",
    "name": "save the-connectivity relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4944.566665649414,
    "y": 6394.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "63429691.f224b",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4339.566909790039,
    "y": 5471.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "4766abce.851ac4",
        "ca35b158.85d38"
      ]
    ]
  },
  {
    "id": "4766abce.851ac4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4550.566909790039,
    "y": 5471.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2ab4c487.b40124"
      ]
    ]
  },
  {
    "id": "2ab4c487.b40124",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4706.566909790039,
    "y": 5467.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2bc22db1.d483d2",
        "b27ea187.400a38",
        "ca1c65a6.dca85"
      ]
    ]
  },
  {
    "id": "ca35b158.85d38",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4546.566909790039,
    "y": 5519.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e1bf2cff.d57f2"
      ]
    ]
  },
  {
    "id": "e1bf2cff.d57f2",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 4694.566909790039,
    "y": 5514.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b408049f.7933a",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5211.566421508789,
    "y": 5214.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "4f8a0bf3.f76a6c",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2378.566665649414,
    "y": 173.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "6a76544b.f753cc",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 2312.566665649414,
    "y": 209.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "23b662d9.16701e",
    "type": "comment",
    "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
    "info": "",
    "comments": "",
    "x": 2497.566665649414,
    "y": 136.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "3d0b458a.f9a2a2",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 4246.566421508789,
    "y": 6349.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "a3e7b437.8026b",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4379.566421508789,
    "y": 6397.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "2ab2c1b2.c4462e",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4198.566421508789,
    "y": 6455.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6310145f.4f2a84",
        "deaf1bfa.406858"
      ]
    ]
  },
  {
    "id": "6310145f.4f2a84",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4391.566421508789,
    "y": 6456.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "92986ec9.51c668"
      ]
    ]
  },
  {
    "id": "92986ec9.51c668",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Connectivity should have been created' />\n",
    "comments": "",
    "x": 4547.566421508789,
    "y": 6453.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "deaf1bfa.406858",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4395.566421508789,
    "y": 6500.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a4ec2716.41f19"
      ]
    ]
  },
  {
    "id": "a4ec2716.41f19",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4534.566421508789,
    "y": 6495.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9fd3ad0c.c5f0a",
        "4aae1198.db26d8",
        "b8ff0583.7b229",
        "35f40d66.777f92",
        "4c2ed97e.80e7a8",
        "1d9d64e4.a08beb",
        "fb131710.b3fbe",
        "fa9aa1ff.8bf6e",
        "c8446998.29dfe",
        "a215a7d6.657bc8",
        "977f17a0.9f41a",
        "5d58f01d.864e08",
        "ecfaffd6.100b2"
      ]
    ]
  },
  {
    "id": "fb131710.b3fbe",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4731.566421508789,
    "y": 7174.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "cd8a8557.f7b3c8",
        "49f465a0.b6d20c",
        "5fdb4c32.46cfb4"
      ]
    ]
  },
  {
    "id": "cd8a8557.f7b3c8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4926.566635131836,
    "y": 7150.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7e4f80d.5c6488"
      ]
    ]
  },
  {
    "id": "49f465a0.b6d20c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4919.057601928711,
    "y": 7186.659698486328,
    "z": "9718fe15.98603",
    "wires": [
      [
        "80117652.9958b8"
      ]
    ]
  },
  {
    "id": "5fdb4c32.46cfb4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4916.566635131836,
    "y": 7230.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7193c18c.ae073"
      ]
    ]
  },
  {
    "id": "7e4f80d.5c6488",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5098.566635131836,
    "y": 7148.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d9a6ee9f.5c31f8"
      ]
    ]
  },
  {
    "id": "80117652.9958b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5081.629013061523,
    "y": 7186.9454345703125,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "7193c18c.ae073",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5083.566635131836,
    "y": 7229.085662841797,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d9a6ee9f.5c31f8",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5339.566421508789,
    "y": 7182.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9aea7b31.b501a8"
      ]
    ]
  },
  {
    "id": "9aea7b31.b501a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5576.566421508789,
    "y": 7178.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "686e53e3.1ad1dc"
      ]
    ]
  },
  {
    "id": "2df6b745.3fe8d",
    "type": "switchNode",
    "name": "switch vpnuuid is for this slice",
    "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5843.566421508789,
    "y": 7144.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "3835a5ae.8b815a",
        "a4db2f80.721418"
      ]
    ]
  },
  {
    "id": "3835a5ae.8b815a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6024.566421508789,
    "y": 7170.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "686e53e3.1ad1dc"
      ]
    ]
  },
  {
    "id": "a4db2f80.721418",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6023.566421508789,
    "y": 7123.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "686e53e3.1ad1dc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4540.566635131836,
    "y": 7318.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a6487ee6.2cb7c"
      ]
    ]
  },
  {
    "id": "380ab70.5227a4a",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 5616.566421508789,
    "y": 7350.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "a81b3e84.443f78",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4829.566635131836,
    "y": 7086.085662841797,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "1d9d64e4.a08beb",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4713.566421508789,
    "y": 6970.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b1c30fd3.1d3b28",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5058.566421508789,
    "y": 6801.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "886001f.2b8eb8"
      ]
    ]
  },
  {
    "id": "886001f.2b8eb8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5278.566421508789,
    "y": 6807.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7a4c6acb.556084"
      ]
    ]
  },
  {
    "id": "7a4c6acb.556084",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5463.566421508789,
    "y": 6806.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "801921d3.c16518"
      ]
    ]
  },
  {
    "id": "801921d3.c16518",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5655.566421508789,
    "y": 6809.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a260b342.bdfc38"
      ]
    ]
  },
  {
    "id": "a260b342.bdfc38",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5864.566421508789,
    "y": 6807.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "fa9aa1ff.8bf6e",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4765.566421508789,
    "y": 6795.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "b1c30fd3.1d3b28"
      ]
    ]
  },
  {
    "id": "b8ff0583.7b229",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4773.566421508789,
    "y": 6688.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "be4d0129.981f9",
        "ca7acc4e.a2f178",
        "e6834a18.c1bb18"
      ]
    ]
  },
  {
    "id": "be4d0129.981f9",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5009.566421508789,
    "y": 6671.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "ca7acc4e.a2f178",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5006.566421508789,
    "y": 6712.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "e6834a18.c1bb18",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5020.566421508789,
    "y": 6752.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "35f40d66.777f92",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4709.566421508789,
    "y": 6847.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "4c2ed97e.80e7a8",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4717.566421508789,
    "y": 6905.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "4aae1198.db26d8",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4722.566421508789,
    "y": 6645.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "3d77fed3.ca6eba",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4837.566421508789,
    "y": 6597.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "a6487ee6.2cb7c",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4830.566635131836,
    "y": 7313.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ae63bb37.54dac",
        "b4511f5d.149aa8"
      ]
    ]
  },
  {
    "id": "ae63bb37.54dac",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5086.566635131836,
    "y": 7285.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "81398bf4.473028"
      ]
    ]
  },
  {
    "id": "b4511f5d.149aa8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5086.566635131836,
    "y": 7334.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "7de65a32.2588c4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5352.566635131836,
    "y": 7326.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "f817cc8b.d031a",
        "380ab70.5227a4a",
        "c6c09e71.9092c"
      ]
    ]
  },
  {
    "id": "1d61af20.5c7829",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 5744.566421508789,
    "y": 7404.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "c6c09e71.9092c",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<!--<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $gfp`' />\n\n<parameter name='operational-status' value='Modified' />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5714.566421508789,
    "y": 7464.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "f817cc8b.d031a",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 5621.566421508789,
    "y": 7292.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "eab327e7.a5f748",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3971.566665649414,
    "y": 5930.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "afc7e373.9dd788",
        "3d0b458a.f9a2a2",
        "a3e7b437.8026b",
        "2ab2c1b2.c4462e",
        "47c00ee.a0fdbf"
      ]
    ]
  },
  {
    "id": "b8d2a9f2.b00c88",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4714.566421508789,
    "y": 6745.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "c8446998.29dfe",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4837.566665649414,
    "y": 6475.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "13d35835.cdbb2",
    "type": "comment",
    "name": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "info": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "comments": "",
    "x": 4974.566665649414,
    "y": 6425.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "997f20e4.966598",
    "type": "save",
    "name": "save ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='type' value='root' />\n<parameter name='data-source' value='`$gfp`' />\n<parameter name='data-owner' value='`$tmp.aai.service-instance.service-instance-id`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6436.566665649414,
    "y": 1959.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "5c8518bd.0a436",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3702.566665649414,
    "y": 1353.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "53a463ea.1b0834",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3840.566665649414,
    "y": 1841.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "53592f4d.08ea8",
    "type": "comment",
    "name": "TEMPORARY REMOVING THE FOLLOWING TWO NODES",
    "info": "",
    "comments": "",
    "x": 6397.566665649414,
    "y": 2671.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "f18404c6.f7135",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3689.566665649414,
    "y": 4947.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "e65dde18.8f2e28",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3822.566665649414,
    "y": 4995.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "d070f297.71c91",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4367.566421508789,
    "y": 5075.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "dbaff1f0.67394",
        "46c5a5e9.bca6a4"
      ]
    ]
  },
  {
    "id": "dbaff1f0.67394",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4560.566421508789,
    "y": 5076.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "df79a6f0.9fe378"
      ]
    ]
  },
  {
    "id": "46c5a5e9.bca6a4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4564.566421508789,
    "y": 5120.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6414d7e3.ee4fd8"
      ]
    ]
  },
  {
    "id": "6414d7e3.ee4fd8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4703.566421508789,
    "y": 5115.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "49c135f9.c35534",
        "bf0f6300.a67238",
        "fa0dda8.0253328"
      ]
    ]
  },
  {
    "id": "df79a6f0.9fe378",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4703.566421508789,
    "y": 5072.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d6b231ff.4e48",
        "e479d260.5097c",
        "c8a578a.1c83e08",
        "b408049f.7933a"
      ]
    ]
  },
  {
    "id": "49c135f9.c35534",
    "type": "set",
    "name": "set prop.connectivity-domainA-uuid",
    "xml": "<set>\n<parameter name='uuid.connectivity-domainA-uuid' value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5097.566421508789,
    "y": 5366.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "f2d57861.b7d18",
    "type": "comment",
    "name": "populate connectivity-A variable in the context map",
    "info": "",
    "comments": "",
    "x": 5104.566421508789,
    "y": 5320.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "a215a7d6.657bc8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4894.566635131836,
    "y": 7035.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "bf0f6300.a67238",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5216.566421508789,
    "y": 5419.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "b27ea187.400a38",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5098.566421508789,
    "y": 5637.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "737e14df.0bf7ac",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3644.566665649414,
    "y": 4396.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "fe6ea6fb.83ee2",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3978.566665649414,
    "y": 4579.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "1e648504.a919f3",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3590.566665649414,
    "y": 4446.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "dc9ef631.89f33",
        "9e45960a.d8b928",
        "febbc6eb.2448e"
      ]
    ]
  },
  {
    "id": "9e45960a.d8b928",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3818.057632446289,
    "y": 4418.65966796875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "5d25632c.1d5374"
      ]
    ]
  },
  {
    "id": "febbc6eb.2448e",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3813.566665649414,
    "y": 4463.085632324219,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e99a952e.00d7c"
      ]
    ]
  },
  {
    "id": "5d25632c.1d5374",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3980.629165649414,
    "y": 4417.945373535156,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "e99a952e.00d7c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3981.566665649414,
    "y": 4463.085632324219,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "1d77f10f.5baf67",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3766.566665649414,
    "y": 4536.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "35c9f98a.610e5e",
        "fe6ea6fb.83ee2"
      ]
    ]
  },
  {
    "id": "dc9ef631.89f33",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3597.566665649414,
    "y": 4536.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "1d77f10f.5baf67"
      ]
    ]
  },
  {
    "id": "35c9f98a.610e5e",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 3955.566665649414,
    "y": 4528.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "518cc181.03ac48",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $middle-man-conn.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$middle-man-conn.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3797.566665649414,
    "y": 4823.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "5a5e18e8.ffce08",
    "type": "comment",
    "name": "We are doing modify but middle man does not exist ==> it is definitely a new logical link",
    "info": "",
    "comments": "",
    "x": 3580.566665649414,
    "y": 2906.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "47f11a92.b8ee4c",
    "type": "comment",
    "name": "We are doing modify and middle man exists, check if LEAF UNI already exists in AAI or not. If yes, consider the possible bw change. If it does not, then it is a new link needs to be added",
    "info": "",
    "comments": "",
    "x": 2785.566665649414,
    "y": 4468.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "a9808de.46ae97",
    "type": "exists",
    "name": "exists LEAF UNI",
    "xml": "<exists plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3208.566665649414,
    "y": 4741.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "8236161f.361ec",
        "f42c8ef.5dab47"
      ]
    ]
  },
  {
    "id": "89fb91c7.4bd6f",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3040.566665649414,
    "y": 4744.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a9808de.46ae97"
      ]
    ]
  },
  {
    "id": "f42c8ef.5dab47",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3371.566665649414,
    "y": 4760.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "10e6ecec.11b933"
      ]
    ]
  },
  {
    "id": "8236161f.361ec",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3407.566665649414,
    "y": 3367.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ac1b2d90.391b98"
      ]
    ]
  },
  {
    "id": "f9e3f20c.6b5eb8",
    "type": "switchNode",
    "name": "switch leafuni.data-source == gfp",
    "xml": "<switch test='`$tmp.aai.leafuni.data-source == $gfp`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3756.566665649414,
    "y": 3209.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "872bd81a.d26528",
        "9b2249c8.bc9018"
      ]
    ]
  },
  {
    "id": "872bd81a.d26528",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3961.566665649414,
    "y": 3205.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "9b2249c8.bc9018",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3963.566665649414,
    "y": 3255.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "dff51b02.8733d8"
      ]
    ]
  },
  {
    "id": "dff51b02.8733d8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4119.566665649414,
    "y": 3261.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "5f4129be.00541",
        "7f1b37a2.172688",
        "71ab4f0e.2a007",
        "8aeeffc.718ae8"
      ]
    ]
  },
  {
    "id": "5f4129be.00541",
    "type": "set",
    "name": "set bwModified",
    "xml": "<set>\n<parameter name='bwModified' value=\"true\" />\n\n\n",
    "comments": "",
    "x": 4345.566909790039,
    "y": 3002.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d8ea64.968cf5a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4844.566390991211,
    "y": 4299.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "140b25e4.abc76a",
        "c4a242e7.6ad35"
      ]
    ]
  },
  {
    "id": "c4a242e7.6ad35",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
    "comments": "",
    "x": 5046.566146850586,
    "y": 4266.085662841797,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "f3c554f9.aa8de8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4730.566635131836,
    "y": 4476.085418701172,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "a2deddc2.51b4b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4727.628768920898,
    "y": 4424.9454345703125,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "2a1af9c0.1651de",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.the-connectivity.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4310.566390991211,
    "y": 4299.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6645febe.81a0d"
      ]
    ]
  },
  {
    "id": "6645febe.81a0d",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.the-connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4515.566390991211,
    "y": 4299.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "1ad63798.bccb8"
      ]
    ]
  },
  {
    "id": "1ad63798.bccb8",
    "type": "outcome",
    "name": "vpn-binding",
    "xml": "<outcome value='vpn-binding'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4681.566390991211,
    "y": 4299.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d8ea64.968cf5a"
      ]
    ]
  },
  {
    "id": "140b25e4.abc76a",
    "type": "save",
    "name": "get vpn-binding from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.the-connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4353.566390991211,
    "y": 4377.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d5aa2b23.abf14",
        "b25d8065.0eeb5",
        "2e5be567.2683ca"
      ]
    ]
  },
  {
    "id": "d5aa2b23.abf14",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4564.566390991211,
    "y": 4379.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "dbaf0410.536798"
      ]
    ]
  },
  {
    "id": "b25d8065.0eeb5",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4565.057357788086,
    "y": 4424.659698486328,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a2deddc2.51b4b8"
      ]
    ]
  },
  {
    "id": "2e5be567.2683ca",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4562.566390991211,
    "y": 4468.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "f3c554f9.aa8de8"
      ]
    ]
  },
  {
    "id": "ac1b2d90.391b98",
    "type": "save",
    "name": "get LEAF uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.LEAF.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.leafuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3630.566665649414,
    "y": 3052.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "518020a8.e5908",
        "2f37bf62.6d766",
        "1d68f74a.0ce429"
      ]
    ]
  },
  {
    "id": "2f37bf62.6d766",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3858.057632446289,
    "y": 3024.65966796875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a23311e6.197e98"
      ]
    ]
  },
  {
    "id": "1d68f74a.0ce429",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3853.566665649414,
    "y": 3069.0856323242188,
    "z": "9718fe15.98603",
    "wires": [
      [
        "1f7edc05.06419c"
      ]
    ]
  },
  {
    "id": "a23311e6.197e98",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4020.629165649414,
    "y": 3023.9453735351562,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "1f7edc05.06419c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4021.566665649414,
    "y": 3069.0856323242188,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "518020a8.e5908",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3865.566665649414,
    "y": 3119.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "f9e3f20c.6b5eb8"
      ]
    ]
  },
  {
    "id": "3597d7fb.9d9fd",
    "type": "comment",
    "name": "Find LEAF and ROOT connectivity, then find vpn-bindings of each. adjust bw",
    "info": "",
    "comments": "",
    "x": 3755.449996948242,
    "y": 3309.969024658203,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "8b55165.21410e8",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3737.166763305664,
    "y": 3871.76904296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d35d1b04.286b5",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3875.166763305664,
    "y": 3929.76904296875,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "7f1b37a2.172688",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3453.166763305664,
    "y": 3611.1689453125,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2d37a713.1c4278",
        "c7b27212.2f5b88",
        "aaa5f9ec.d9ed6"
      ]
    ]
  },
  {
    "id": "26c98beb.9e8714",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3694.166763305664,
    "y": 4039.569091796875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "757df358.1ab404",
        "46ca33dc.1a72ec"
      ]
    ]
  },
  {
    "id": "757df358.1ab404",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3887.166763305664,
    "y": 4040.569091796875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "43e4ef70.2c83f"
      ]
    ]
  },
  {
    "id": "46ca33dc.1a72ec",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3891.166763305664,
    "y": 4084.569091796875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7ecc7e99.a8f718"
      ]
    ]
  },
  {
    "id": "7ecc7e99.a8f718",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4030.166763305664,
    "y": 4079.569091796875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2a1af9c0.1651de"
      ]
    ]
  },
  {
    "id": "43e4ef70.2c83f",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"LEAF CONN DOES NOT EXIST BUT IT SHOULD BE.\" />\n\n",
    "comments": "",
    "x": 4031.166763305664,
    "y": 4036.76904296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "71ab4f0e.2a007",
    "type": "switchNode",
    "name": "switch leafuni.data-source > gfp",
    "xml": "<switch test='`$tmp.aai.leafuni.data-source > $gfp`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4379.283706665039,
    "y": 3258.369140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e5e20266.b6ad18",
        "fa7ec0d3.484e4"
      ]
    ]
  },
  {
    "id": "e5e20266.b6ad18",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4578.450698852539,
    "y": 3324.968994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "c400bc3c.ac5968"
      ]
    ]
  },
  {
    "id": "fa7ec0d3.484e4",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4600.450698852539,
    "y": 3169.968994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "f79a9470.53a4c8"
      ]
    ]
  },
  {
    "id": "8aeeffc.718ae8",
    "type": "save",
    "name": "update LEAF UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />\n<parameter name='data-owner' value='`$tmp.aai.service-instance.service-instance-id`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4378.283706665039,
    "y": 3113.569091796875,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "b6c5ddb8.eb856",
    "type": "comment",
    "name": "update LEAF UNI with the new bw",
    "info": "",
    "comments": "",
    "x": 4394.450698852539,
    "y": 3066.968994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "ab07d3e7.b0f788",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 4949.216567993164,
    "y": 2521.968994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "6a6aa672.a79588",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5551.216567993164,
    "y": 2626.968994140625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "cbbe95bb.3b672",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4941.216323852539,
    "y": 2567.968994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "29f0d39b.7868dc",
        "a9cdc9f3.565c48",
        "bb4a2538.1336f8"
      ]
    ]
  },
  {
    "id": "a9cdc9f3.565c48",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5168.707290649414,
    "y": 2540.54296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "1908939b.bd4034"
      ]
    ]
  },
  {
    "id": "bb4a2538.1336f8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5164.216323852539,
    "y": 2584.9689331054688,
    "z": "9718fe15.98603",
    "wires": [
      [
        "92667393.c53a48"
      ]
    ]
  },
  {
    "id": "1908939b.bd4034",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5331.278823852539,
    "y": 2539.8286743164062,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "92667393.c53a48",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5332.216323852539,
    "y": 2584.9689331054688,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "881aa049.c716c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5329.216323852539,
    "y": 2634.968994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "462dc669.256da8",
        "6a6aa672.a79588"
      ]
    ]
  },
  {
    "id": "29f0d39b.7868dc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5160.216323852539,
    "y": 2634.968994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "881aa049.c716c"
      ]
    ]
  },
  {
    "id": "462dc669.256da8",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $tmp.delta`' />\n",
    "comments": "",
    "x": 5511.217056274414,
    "y": 2576.968994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "cf90a66f.fda158",
    "type": "comment",
    "name": "bw+ has increased ",
    "info": "",
    "comments": "",
    "x": 4592.449996948242,
    "y": 3131.969024658203,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "55a0d7dc.286418",
    "type": "comment",
    "name": "bw- has decreased",
    "info": "",
    "comments": "",
    "x": 4591.283706665039,
    "y": 3288.76904296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "4d5920d6.13a668",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5040.282974243164,
    "y": 2861.76904296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "88d6c65c.cf7f08",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5642.282974243164,
    "y": 2966.76904296875,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "d0b2cf41.bca298",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5032.282730102539,
    "y": 2907.76904296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "8d492b8.9c23958",
        "7af8c9ac.4fdff",
        "8f5e4c1.c47c63"
      ]
    ]
  },
  {
    "id": "7af8c9ac.4fdff",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5259.773696899414,
    "y": 2880.343017578125,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a556ac9c.f99378"
      ]
    ]
  },
  {
    "id": "8f5e4c1.c47c63",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5255.282730102539,
    "y": 2924.7689819335938,
    "z": "9718fe15.98603",
    "wires": [
      [
        "fb5f5c18.d85868"
      ]
    ]
  },
  {
    "id": "a556ac9c.f99378",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5422.345230102539,
    "y": 2879.6287231445312,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "fb5f5c18.d85868",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5423.282730102539,
    "y": 2924.7689819335938,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "1055bce3.28f203",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5420.282730102539,
    "y": 2974.76904296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "67fafdaf.ff6be4",
        "88d6c65c.cf7f08"
      ]
    ]
  },
  {
    "id": "8d492b8.9c23958",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5251.282730102539,
    "y": 2974.76904296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "1055bce3.28f203"
      ]
    ]
  },
  {
    "id": "67fafdaf.ff6be4",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source - $tmp.delta`' />\n",
    "comments": "",
    "x": 5602.283462524414,
    "y": 2916.76904296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "16d60a9.8d32af5",
    "type": "set",
    "name": "set delta",
    "xml": "<set>\n<parameter name='tmp.delta' value='`$tmp.aai.leafuni.data-source - $gfp`' />\n<parameter name='tmp.realdelta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.isBwIncreased' value='false' />\n\n\n",
    "comments": "",
    "x": 4957.282730102539,
    "y": 2820.76904296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "c400bc3c.ac5968",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4750.449996948242,
    "y": 3313.969024658203,
    "z": "9718fe15.98603",
    "wires": [
      [
        "16d60a9.8d32af5",
        "d0b2cf41.bca298",
        "8414e4a1.38b9c8"
      ]
    ]
  },
  {
    "id": "f79a9470.53a4c8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4771.183364868164,
    "y": 3140.76904296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "117ea4ef.18b79b",
        "cbbe95bb.3b672",
        "ba199ac4.fb848"
      ]
    ]
  },
  {
    "id": "117ea4ef.18b79b",
    "type": "set",
    "name": "set delta",
    "xml": "<set>\n<parameter name='tmp.delta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.realdelta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.isBwIncreased' value='true' />\n",
    "comments": "",
    "x": 4906.016128540039,
    "y": 2446.569091796875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "c54ad09e.8bf3a",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 4365.333267211914,
    "y": 3213.76904296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "2dd0c0ce.4b6dd8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3834.666732788086,
    "y": 4202.569549560547,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "f75e3970.5d2918",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3669.666732788086,
    "y": 4274.769500732422,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6558c3a1.aee6ec",
        "615d888.e8de878"
      ]
    ]
  },
  {
    "id": "6558c3a1.aee6ec",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3880.666732788086,
    "y": 4274.769500732422,
    "z": "9718fe15.98603",
    "wires": [
      [
        "dbe2bb07.4ff"
      ]
    ]
  },
  {
    "id": "615d888.e8de878",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3876.666732788086,
    "y": 4322.769500732422,
    "z": "9718fe15.98603",
    "wires": [
      [
        "981910a2.c0ad4"
      ]
    ]
  },
  {
    "id": "dbe2bb07.4ff",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4036.666732788086,
    "y": 4270.769500732422,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d5500d79.08788"
      ]
    ]
  },
  {
    "id": "981910a2.c0ad4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found but it should have been!' />\n",
    "comments": "",
    "x": 4024.666732788086,
    "y": 4317.769500732422,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "3bc11366.fbbc34",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4877.632827758789,
    "y": 4584.96826171875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "dd06399c.007818",
        "d4fdd67a.a817c8"
      ]
    ]
  },
  {
    "id": "d4fdd67a.a817c8",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
    "comments": "",
    "x": 5120.633071899414,
    "y": 4553.96826171875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "2be00ed8.b483fa",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4737.632827758789,
    "y": 4694.96826171875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "97d72fe9.69bac8"
      ]
    ]
  },
  {
    "id": "91c8662a.32a768",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4725.633071899414,
    "y": 4787.968505859375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d203ac94.87b14",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4727.695205688477,
    "y": 4742.828033447266,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d5500d79.08788",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.ROOT.connectivity.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4343.632827758789,
    "y": 4584.96826171875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "c8667f42.17971"
      ]
    ]
  },
  {
    "id": "c8667f42.17971",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.ROOT.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4548.632827758789,
    "y": 4584.96826171875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "459caa2c.0e6e04"
      ]
    ]
  },
  {
    "id": "459caa2c.0e6e04",
    "type": "outcome",
    "name": "vpn-binding",
    "xml": "<outcome value='vpn-binding'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4714.632827758789,
    "y": 4584.96826171875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "3bc11366.fbbc34"
      ]
    ]
  },
  {
    "id": "dd06399c.007818",
    "type": "save",
    "name": "get vpn-binding from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.ROOT.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4353.632827758789,
    "y": 4694.96826171875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "bdef323e.2e743",
        "8bfc1c1b.2feb4",
        "6eeff3cb.d5d2dc"
      ]
    ]
  },
  {
    "id": "bdef323e.2e743",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4564.632827758789,
    "y": 4696.96826171875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2be00ed8.b483fa"
      ]
    ]
  },
  {
    "id": "8bfc1c1b.2feb4",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4565.123794555664,
    "y": 4742.542297363281,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d203ac94.87b14"
      ]
    ]
  },
  {
    "id": "6eeff3cb.d5d2dc",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4562.632827758789,
    "y": 4785.96826171875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "91c8662a.32a768"
      ]
    ]
  },
  {
    "id": "b4556ca5.203ec",
    "type": "comment",
    "name": "Temporary skipping this check - to support multiple instances in one slice",
    "info": "",
    "comments": "",
    "x": 5973.449722290039,
    "y": 7084.169189453125,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "5b30bbfe.71d1cc",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 5241.916732788086,
    "y": 4315.368865966797,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "dbaf0410.536798",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4743.916976928711,
    "y": 4381.368865966797,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "817a92f2.d780d",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5274.916732788086,
    "y": 4383.368865966797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9dfe7d9b.36f16",
        "6633e166.0ef198"
      ]
    ]
  },
  {
    "id": "9dfe7d9b.36f16",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5399.916732788086,
    "y": 4281.368621826172,
    "z": "9718fe15.98603",
    "wires": [
      [
        "bef4e32d.a8f0f"
      ]
    ]
  },
  {
    "id": "6633e166.0ef198",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5518.916763305664,
    "y": 4355.36865234375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "13e3cfc5.6c211",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4487.599868774414,
    "y": 3927.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "c04b322f.90f188",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4832.599868774414,
    "y": 3789.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "641a94ad.cf9a7c"
      ]
    ]
  },
  {
    "id": "cb16b3c1.554ca8",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4539.599868774414,
    "y": 3783.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "c04b322f.90f188"
      ]
    ]
  },
  {
    "id": "61a224f4.1490f4",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4794.599868774414,
    "y": 3740.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "79714250.d2dcd4",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4483.599868774414,
    "y": 3835.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "accca5a7.e8bcb",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4491.599868774414,
    "y": 3880.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "4917ab18.c68984",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4488.599868774414,
    "y": 3733.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "641a94ad.cf9a7c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4741.599868774414,
    "y": 3857.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a41b4c9c.8533c8"
      ]
    ]
  },
  {
    "id": "a41b4c9c.8533c8",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4926.599868774414,
    "y": 3856.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "16d0f836.5619d"
      ]
    ]
  },
  {
    "id": "16d0f836.5619d",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5118.599868774414,
    "y": 3859.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "645ca090.154ad8"
      ]
    ]
  },
  {
    "id": "645ca090.154ad8",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5290.599868774414,
    "y": 3855.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "67efef93.94a62",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4666.599868774414,
    "y": 3970.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "2d37a713.1c4278",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4183.599868774414,
    "y": 3755.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "fc1ea1ac.e5e448",
        "e72f0644.170c1",
        "79714250.d2dcd4",
        "accca5a7.e8bcb",
        "13e3cfc5.6c211",
        "cb16b3c1.554ca8",
        "67efef93.94a62"
      ]
    ]
  },
  {
    "id": "9d25224b.2344f8",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4168.599868774414,
    "y": 3689.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "e72f0644.170c1",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4547.599868774414,
    "y": 3676.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e651547d.d99b88",
        "9ee7d7c1.7baf1",
        "61a224f4.1490f4"
      ]
    ]
  },
  {
    "id": "e651547d.d99b88",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4783.599868774414,
    "y": 3659.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "9ee7d7c1.7baf1",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4780.599868774414,
    "y": 3700.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "fc1ea1ac.e5e448",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4496.599868774414,
    "y": 3633.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "7b5e5ce4.837894",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 5225.999771118164,
    "y": 4682.485595703125,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "97d72fe9.69bac8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5014.999771118164,
    "y": 4744.485595703125,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9a139c6f.7e9338"
      ]
    ]
  },
  {
    "id": "9a139c6f.7e9338",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.vpn-binding.ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5258.999771118164,
    "y": 4750.485595703125,
    "z": "9718fe15.98603",
    "wires": [
      [
        "f77309ba.c91088",
        "14cb90c5.a4f8ff"
      ]
    ]
  },
  {
    "id": "f77309ba.c91088",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5489.999771118164,
    "y": 4728.485595703125,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d9be22a0.00a98"
      ]
    ]
  },
  {
    "id": "14cb90c5.a4f8ff",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5494.999771118164,
    "y": 4795.485595703125,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "414056d.7db8ba8",
    "type": "switchNode",
    "name": "switch tmp.isBwIncreased",
    "xml": "<switch test=\"`$tmp.isBwIncreased`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5743.883529663086,
    "y": 4293.167938232422,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7fdfcb8f.16a5bc",
        "c3a97bf3.cec48"
      ]
    ]
  },
  {
    "id": "7fdfcb8f.16a5bc",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5898.883560180664,
    "y": 4221.168212890625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "b797878.bae0cf8"
      ]
    ]
  },
  {
    "id": "c3a97bf3.cec48",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5899.883560180664,
    "y": 4354.168212890625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e250ecc5.35ab28"
      ]
    ]
  },
  {
    "id": "b797878.bae0cf8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6043.883560180664,
    "y": 4221.16845703125,
    "z": "9718fe15.98603",
    "wires": [
      [
        "424fa95d.ed7fe",
        "75e1d3fe.929f74"
      ]
    ]
  },
  {
    "id": "424fa95d.ed7fe",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.the-vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6336.883560180664,
    "y": 4199.168212890625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "75e1d3fe.929f74",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6288.533462524414,
    "y": 4246.485107421875,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "5dd8867f.439e3",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6361.883529663086,
    "y": 4148.167938232422,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "e250ecc5.35ab28",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6055.883560180664,
    "y": 4353.16845703125,
    "z": "9718fe15.98603",
    "wires": [
      [
        "417900a8.821de",
        "be5a71f5.125bd8"
      ]
    ]
  },
  {
    "id": "417900a8.821de",
    "type": "save",
    "name": "update the-vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.the-vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher - $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6348.883560180664,
    "y": 4331.168212890625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "be5a71f5.125bd8",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6300.533462524414,
    "y": 4378.485107421875,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "a603f2dd.a46cd8",
    "type": "comment",
    "name": "decrease the bw of the-vpn-binding and change status to modified",
    "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6372.883560180664,
    "y": 4292.168212890625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d9be22a0.00a98",
    "type": "switchNode",
    "name": "switch tmp.isBwIncreased",
    "xml": "<switch test=\"`$tmp.isBwIncreased`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5695.116470336914,
    "y": 4735.368896484375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "c2b73899.5086",
        "f61c39ed.e925c8"
      ]
    ]
  },
  {
    "id": "c2b73899.5086",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5890.116470336914,
    "y": 4663.368896484375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d6c79c19.937aa"
      ]
    ]
  },
  {
    "id": "f61c39ed.e925c8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5891.116470336914,
    "y": 4796.368896484375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "4edaf13a.b4d9f"
      ]
    ]
  },
  {
    "id": "d6c79c19.937aa",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6035.116470336914,
    "y": 4663.369140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d6b8ba93.8ff92",
        "f1f742e0.7a641"
      ]
    ]
  },
  {
    "id": "d6b8ba93.8ff92",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.vpn-binding.route-distinguisher + $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6328.116470336914,
    "y": 4641.368896484375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "f1f742e0.7a641",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6279.766372680664,
    "y": 4688.685791015625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "d36450e6.6d57c8",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6352.116470336914,
    "y": 4602.368896484375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "4edaf13a.b4d9f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6047.116470336914,
    "y": 4795.369140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7a3b5a2.2e1f624",
        "1ba425ad.b54daa"
      ]
    ]
  },
  {
    "id": "7a3b5a2.2e1f624",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.vpn-binding.route-distinguisher - $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6340.116470336914,
    "y": 4773.368896484375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "1ba425ad.b54daa",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6291.766372680664,
    "y": 4820.685791015625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "22900b75.03f974",
    "type": "comment",
    "name": "decrease the bw of the-vpn-binding and change status to modified",
    "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6364.116470336914,
    "y": 4734.368896484375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "ef554fdd.c7de28",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5102.966567993164,
    "y": 5475.569091796875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "fa0dda8.0253328",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5100.749771118164,
    "y": 5515.769287109375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "f06e1df.64a1e6",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 4976.000015258789,
    "y": 5700.252197265625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "ca1c65a6.dca85",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4973.783218383789,
    "y": 5740.452392578125,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "a99f468d.7b18e",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5073.116470336914,
    "y": 6024.368896484375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "8488a4f2.44d84",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4900.116470336914,
    "y": 6081.368896484375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7fa62708.b47fb8",
        "8128360f.d5f0f8"
      ]
    ]
  },
  {
    "id": "7fa62708.b47fb8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5111.116470336914,
    "y": 6081.368896484375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7522288d.71e8f8"
      ]
    ]
  },
  {
    "id": "8128360f.d5f0f8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5107.116470336914,
    "y": 6129.368896484375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "fb9502dd.0e71b"
      ]
    ]
  },
  {
    "id": "7522288d.71e8f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5267.116470336914,
    "y": 6077.368896484375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9f8e58e7.89aac",
        "d14d9fb3.031c",
        "ade8b0f8.453b68"
      ]
    ]
  },
  {
    "id": "fb9502dd.0e71b",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 5255.116470336914,
    "y": 6124.368896484375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "482690e8.af77d8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5533.000259399414,
    "y": 6177.252197265625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "ade8b0f8.453b68",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5530.783462524414,
    "y": 6217.452392578125,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "d14d9fb3.031c",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5650.116470336914,
    "y": 6129.368896484375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "9f8e58e7.89aac",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5521.116470336914,
    "y": 6077.368896484375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b5ec42e6.8d4a38",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4962.116470336914,
    "y": 5982.368896484375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "977f17a0.9f41a",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4609.449478149414,
    "y": 6069.368896484375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a99f468d.7b18e",
        "8488a4f2.44d84",
        "9cfb7864.e0e548",
        "98761b9f.ff6118"
      ]
    ]
  },
  {
    "id": "5d58f01d.864e08",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4953.199966430664,
    "y": 6538.368896484375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "b7ab7670.8f5828",
    "type": "comment",
    "name": "TODO: BUG -- DONE",
    "info": "momkene connectivity haye vasati ke dummy hastand ham\nvpn-binding dashte bashand ke too in path involve hast pas\nbayad bw aan niz update shavad.",
    "comments": "",
    "x": 3658.567123413086,
    "y": 3815.085662841797,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "c7b27212.2f5b88",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4411.100326538086,
    "y": 4089.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      [
        "88440014.089508",
        "6850bc1b.9b439c",
        "ea9e63cb.45924"
      ]
    ]
  },
  {
    "id": "46e39fd1.0b23",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4519.100570678711,
    "y": 4045.202362060547,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "88440014.089508",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4616.100326538086,
    "y": 4086.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      [
        "94bd21f9.ba5e08"
      ]
    ]
  },
  {
    "id": "6850bc1b.9b439c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4599.591293334961,
    "y": 4147.776397705078,
    "z": "9718fe15.98603",
    "wires": [
      [
        "c061eff6.efec1"
      ]
    ]
  },
  {
    "id": "ea9e63cb.45924",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4597.100326538086,
    "y": 4191.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      [
        "302c462f.876b7a"
      ]
    ]
  },
  {
    "id": "94bd21f9.ba5e08",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4784.100570678711,
    "y": 4081.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      [
        "72fd3d1f.5c9734"
      ]
    ]
  },
  {
    "id": "c061eff6.efec1",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4762.162704467773,
    "y": 4148.0621337890625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "302c462f.876b7a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4764.100326538086,
    "y": 4190.202362060547,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "72fd3d1f.5c9734",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5022.100570678711,
    "y": 4086.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e265f5c.115d288"
      ]
    ]
  },
  {
    "id": "e265f5c.115d288",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5256.100326538086,
    "y": 4093.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      [
        "817a92f2.d780d"
      ]
    ]
  },
  {
    "id": "aaa5f9ec.d9ed6",
    "type": "set",
    "name": "unset tmp.aai.all-vpn-bindings",
    "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value='' />\n",
    "comments": "",
    "x": 4389.800033569336,
    "y": 4015.202362060547,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "4e4373ae.4e8254",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='vpnbridx' start='0' end='`$tmp.aai.the-vpn-binding.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5672.949935913086,
    "y": 4103.785369873047,
    "z": "9718fe15.98603",
    "wires": [
      [
        "8eac4849.2274f8"
      ]
    ]
  },
  {
    "id": "8eac4849.2274f8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5864.949935913086,
    "y": 4092.785614013672,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a232365.4dda248"
      ]
    ]
  },
  {
    "id": "a232365.4dda248",
    "type": "outcome",
    "name": "connectivity",
    "xml": "<outcome value='connectivity'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6046.949935913086,
    "y": 4071.785614013672,
    "z": "9718fe15.98603",
    "wires": [
      [
        "992af4aa.8e2b6"
      ]
    ]
  },
  {
    "id": "992af4aa.8e2b6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 6208.949935913086,
    "y": 4060.785614013672,
    "z": "9718fe15.98603",
    "wires": [
      [
        "1e9c08fd.18a337",
        "74b54acc.d82234"
      ]
    ]
  },
  {
    "id": "1e9c08fd.18a337",
    "type": "set",
    "name": "unset tmp.the-connectivity",
    "xml": "<set>\n<parameter name='tmp.the-connectivity.' value='' />\n",
    "comments": "",
    "x": 6405.949935913086,
    "y": 3989.785614013672,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b0ee6567.2e3a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5579.900131225586,
    "y": 4218.785369873047,
    "z": "9718fe15.98603",
    "wires": [
      [
        "414056d.7db8ba8",
        "4e4373ae.4e8254",
        "1071a614.4e5e12",
        "8f9726f3.06c69"
      ]
    ]
  },
  {
    "id": "1071a614.4e5e12",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 5711.466537475586,
    "y": 3994.002410888672,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "8f9726f3.06c69",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 5703.466537475586,
    "y": 4043.002410888672,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "74b54acc.d82234",
    "type": "set",
    "name": "set tmp.the-connectivity.connectivity-id",
    "xml": "<set>\n<parameter name='tmp.the-connectivity.connectivity-id' value='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].relationship-data[0].relationship-value`' />\n",
    "comments": "",
    "x": 6411.416732788086,
    "y": 4099.002410888672,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "7fff9c38.345784",
    "type": "set",
    "name": "set vpnNameToSearch",
    "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
    "comments": "",
    "x": 5704.683334350586,
    "y": 3817.202362060547,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "aaa5e7eb.47b75",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5858.683334350586,
    "y": 3869.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "bef4e32d.a8f0f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5449.683334350586,
    "y": 3936.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      [
        "aaa5e7eb.47b75",
        "1d5352b7.2fb14d",
        "7fff9c38.345784"
      ]
    ]
  },
  {
    "id": "1d5352b7.2fb14d",
    "type": "switchNode",
    "name": "switch $foundVpnName",
    "xml": "<switch test=\"`$foundVpnName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5703.683334350586,
    "y": 3924.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      [
        "894732f.a692a5"
      ]
    ]
  },
  {
    "id": "894732f.a692a5",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5882.683334350586,
    "y": 3923.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      [
        "b0ee6567.2e3a8"
      ]
    ]
  },
  {
    "id": "81398bf4.473028",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4580.683334350586,
    "y": 7441.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6a1836f0.9e7b08",
        "edfac497.39017",
        "e285b49b.2789f8"
      ]
    ]
  },
  {
    "id": "e285b49b.2789f8",
    "type": "set",
    "name": "set vpnNameToSearch",
    "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
    "comments": "",
    "x": 4803.683334350586,
    "y": 7385.202362060547,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "6a1836f0.9e7b08",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4982.683334350586,
    "y": 7428.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "edfac497.39017",
    "type": "switchNode",
    "name": "switch $foundVpnName",
    "xml": "<switch test=\"`$foundVpnName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4827.683334350586,
    "y": 7483.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d5b486b.df173f8"
      ]
    ]
  },
  {
    "id": "d5b486b.df173f8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5006.683334350586,
    "y": 7482.202362060547,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7de65a32.2588c4"
      ]
    ]
  },
  {
    "id": "ecfaffd6.100b2",
    "type": "set",
    "name": "unset tmp.aai.all-vpn-bindings",
    "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value='' />\n",
    "comments": "",
    "x": 4737.683334350586,
    "y": 7121.202362060547,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "4b552ff.dab62d",
    "type": "set",
    "name": "unset secondary related variables",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n<parameter name='network-route-three' value=\"\" />\n<parameter name='tmp.aai.network-route-three.' value=\"\" />\n<parameter name='tmp.aai.network-route-C.' value=\"\" />\n",
    "comments": "",
    "x": 3303.2999420166016,
    "y": 515.65234375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "3dcf3da2.14e88a",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4078.399429321289,
    "y": 576.65234375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "bfde7d38.fed19"
      ]
    ]
  },
  {
    "id": "bfde7d38.fed19",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4247.399429321289,
    "y": 573.65234375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "30447223.2437ce",
        "12dff897.0ce0bf"
      ]
    ]
  },
  {
    "id": "30447223.2437ce",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4471.399429321289,
    "y": 606.65234375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "12dff897.0ce0bf",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4417.399429321289,
    "y": 646.65234375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "f46ebe04.450d9",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4043.399917602539,
    "y": 775.8523559570312,
    "z": "9718fe15.98603",
    "wires": [
      [
        "3c9b9865.e5691"
      ]
    ]
  },
  {
    "id": "3c9b9865.e5691",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4208.399185180664,
    "y": 780.8523559570312,
    "z": "9718fe15.98603",
    "wires": [
      [
        "4bcd87c1.d1b",
        "63ed5150.d5d24"
      ]
    ]
  },
  {
    "id": "4bcd87c1.d1b",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4455.399429321289,
    "y": 862.8523559570312,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "63ed5150.d5d24",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4401.399429321289,
    "y": 902.8523559570312,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "76a3b118.862498",
    "type": "save",
    "name": "get network-route-three from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-three'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-three\">",
    "comments": "",
    "outputs": 1,
    "x": 3286.399917602539,
    "y": 914.8523559570312,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7adb4c8f.c682bc",
        "7eb8fd1a.3f3194",
        "b860a47d.f11fd8"
      ]
    ]
  },
  {
    "id": "7adb4c8f.c682bc",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3528.399917602539,
    "y": 907.8523559570312,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "7eb8fd1a.3f3194",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3523.908981323242,
    "y": 950.2784118652344,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "b860a47d.f11fd8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3527.908950805664,
    "y": 998.2783813476562,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a6ff06d4.331218"
      ]
    ]
  },
  {
    "id": "a6ff06d4.331218",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3689.399917602539,
    "y": 938.8523559570312,
    "z": "9718fe15.98603",
    "wires": [
      [
        "32bc585c.c7728"
      ]
    ]
  },
  {
    "id": "32bc585c.c7728",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-three.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3860.399917602539,
    "y": 938.8525390625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e312a504.c3346",
        "450f492a.7498d8",
        "e7c48999.96bb5"
      ]
    ]
  },
  {
    "id": "e312a504.c3346",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4027.399673461914,
    "y": 848.8524780273438,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e34d64db.7a9328"
      ]
    ]
  },
  {
    "id": "450f492a.7498d8",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4029.399673461914,
    "y": 902.8524780273438,
    "z": "9718fe15.98603",
    "wires": [
      [
        "f1b929a4.9c9ce"
      ]
    ]
  },
  {
    "id": "e34d64db.7a9328",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4155.399673461914,
    "y": 848.8524780273438,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d0297dd0.c50e68",
        "9996be1d.2ba6f"
      ]
    ]
  },
  {
    "id": "f1b929a4.9c9ce",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4158.399673461914,
    "y": 901.8524780273438,
    "z": "9718fe15.98603",
    "wires": [
      [
        "55ecdb35.0e00cc",
        "c088cd20.720bd8"
      ]
    ]
  },
  {
    "id": "9996be1d.2ba6f",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4401.399429321289,
    "y": 987.8524780273438,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "55ecdb35.0e00cc",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4418.399429321289,
    "y": 1029.8524780273438,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "c088cd20.720bd8",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4403.399429321289,
    "y": 1067.8524780273438,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d0297dd0.c50e68",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4415.399429321289,
    "y": 947.8524780273438,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "5eec7036.1519e8",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4580.399429321289,
    "y": 963.8524780273438,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "e7c48999.96bb5",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3968.399917602539,
    "y": 993.852294921875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6b81c811.85e0f8"
      ]
    ]
  },
  {
    "id": "6b81c811.85e0f8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4142.399917602539,
    "y": 988.852294921875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2495f2a4.688896",
        "9470a6af.62de2"
      ]
    ]
  },
  {
    "id": "9470a6af.62de2",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4375.399429321289,
    "y": 1157.8522338867188,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "2495f2a4.688896",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4429.399429321289,
    "y": 1117.8522338867188,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b6c93789.479408",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4543.399429321289,
    "y": 1142.8522338867188,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "c1d74161.be2c8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3544.066665649414,
    "y": 2223.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "855df0cd.9bb95",
        "434e1396.d595c4"
      ]
    ]
  },
  {
    "id": "d130bfb5.a4da88",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3371.400161743164,
    "y": 2224.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "c1d74161.be2c8"
      ]
    ]
  },
  {
    "id": "bba37dac.291368",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3380.891128540039,
    "y": 2266.6597290039062,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "730fab1.8beaed4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3369.400161743164,
    "y": 2313.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "855df0cd.9bb95",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3830.400161743164,
    "y": 2227.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "55a8020a.690a64",
        "326effaf.bc448"
      ]
    ]
  },
  {
    "id": "326effaf.bc448",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4053.400161743164,
    "y": 2182.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ab5c47c3.fcb968"
      ]
    ]
  },
  {
    "id": "55a8020a.690a64",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4055.400161743164,
    "y": 2246.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "af7cae04.ba78a"
      ]
    ]
  },
  {
    "id": "fbc065ad.333e38",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-C.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-C.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3143.400161743164,
    "y": 2259.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d130bfb5.a4da88",
        "bba37dac.291368",
        "730fab1.8beaed4"
      ]
    ]
  },
  {
    "id": "a720f331.1ff0f",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3104.400161743164,
    "y": 2203.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "62eac021.71055",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3163.400161743164,
    "y": 1999.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "de7e4f57.82469",
        "33097b2f.e0f6dc"
      ]
    ]
  },
  {
    "id": "33097b2f.e0f6dc",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3386.400161743164,
    "y": 1985.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "55022710.99c7b"
      ]
    ]
  },
  {
    "id": "de7e4f57.82469",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3388.400161743164,
    "y": 2018.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "55022710.99c7b",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3534.400161743164,
    "y": 1978.085693359375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "225a6795.34ae6",
        "605cb253.51882c"
      ]
    ]
  },
  {
    "id": "225a6795.34ae6",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainC.pnf-name' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3728.400161743164,
    "y": 1981.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "434e1396.d595c4",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3781.400131225586,
    "y": 2350.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6aeddc31.02af0c"
      ]
    ]
  },
  {
    "id": "6aeddc31.02af0c",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3987.400131225586,
    "y": 2350.085662841797,
    "z": "9718fe15.98603",
    "wires": [
      [
        "1d98ffa3.9dac18"
      ]
    ]
  },
  {
    "id": "605cb253.51882c",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\"\n        pfx='tmp.aai.destination-secondary-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3750.400161743164,
    "y": 2049.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "da783639.0ff76",
        "86ac0aff.5f3f28",
        "cebbe4ca.ee77e"
      ]
    ]
  },
  {
    "id": "da783639.0ff76",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3945.9002838134766,
    "y": 2001.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "812fa062.6dc7c"
      ]
    ]
  },
  {
    "id": "86ac0aff.5f3f28",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3937.9002838134766,
    "y": 2056.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "8d0439b3.358a8"
      ]
    ]
  },
  {
    "id": "cebbe4ca.ee77e",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3942.9002838134766,
    "y": 2113.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ca5c6f17.cf3a7"
      ]
    ]
  },
  {
    "id": "ca5c6f17.cf3a7",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4094.9002838134766,
    "y": 2114.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "812fa062.6dc7c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4090.2826080322266,
    "y": 1998.7414855957031,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ad74d99d.0df72"
      ]
    ]
  },
  {
    "id": "28bc0683.b68302",
    "type": "set",
    "name": "set SECONDARY-ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-long' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-short' value=\"`$tmp.dst-secondary.pnf-name`\" />\n\n<parameter name='tmp.SECONDARY-ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-C.next-hop + '-' + $tmp.aai.network-route-C.logical-interface-id`\" />\n<parameter name='tmp.SECONDARY-ROOT.uni-tp-id' value=\"`$tmp.dst-secondary.ltpId`\" />\n",
    "comments": "",
    "x": 3166.066665649414,
    "y": 2338.085693359375,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "9656dd17.9b3ad",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3841.066635131836,
    "y": 2302.085662841797,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "af7cae04.ba78a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4214.400161743164,
    "y": 2265.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "ab5c47c3.fcb968",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4218.400161743164,
    "y": 2179.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9a6b61ac.f8e22",
        "26968708.bf0a2"
      ]
    ]
  },
  {
    "id": "1d98ffa3.9dac18",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4204.685775756836,
    "y": 2348.907440185547,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e0a8c937.0da4d"
      ]
    ]
  },
  {
    "id": "8d0439b3.358a8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4105.900283813477,
    "y": 2059.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "9a6b61ac.f8e22",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.ltpId' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n",
    "comments": "",
    "x": 4388.400161743164,
    "y": 2140.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "26968708.bf0a2",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.pnf-name' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n",
    "comments": "",
    "x": 4389.400161743164,
    "y": 2245.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "826c48fa.181fa",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4384.400161743164,
    "y": 2194.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "e0a8c937.0da4d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4411.517318725586,
    "y": 2338.4261169433594,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e11a9a35.e1ef78",
        "a5abc378.a6c95",
        "e2067ae4.4ae0a8"
      ]
    ]
  },
  {
    "id": "e11a9a35.e1ef78",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination-secondary.ttp-id' value=\"`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4626.517318725586,
    "y": 2300.4261169433594,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "a5abc378.a6c95",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination-secondary.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-secondary-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4623.517318725586,
    "y": 2339.4261169433594,
    "z": "9718fe15.98603",
    "wires": [
      [
        "153d06ec.f14b19"
      ]
    ]
  },
  {
    "id": "e2067ae4.4ae0a8",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4579.017318725586,
    "y": 2381.4261169433594,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "ff2bf803.a9fa88",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4672.400161743164,
    "y": 2017.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "a1443a9c.9bc758"
      ]
    ]
  },
  {
    "id": "ad74d99d.0df72",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4274.400161743164,
    "y": 2013.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "aec2208e.63a7a"
      ]
    ]
  },
  {
    "id": "aec2208e.63a7a",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4469.400161743164,
    "y": 2013.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ff2bf803.a9fa88",
        "8efacaf4.128aa8"
      ]
    ]
  },
  {
    "id": "8efacaf4.128aa8",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4674.400161743164,
    "y": 2090.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2140dc16.b34c34"
      ]
    ]
  },
  {
    "id": "153d06ec.f14b19",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4804.017318725586,
    "y": 2338.4261169433594,
    "z": "9718fe15.98603",
    "wires": [
      [
        "dc9300dc.915278"
      ]
    ]
  },
  {
    "id": "dc9300dc.915278",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4962.017318725586,
    "y": 2338.4261169433594,
    "z": "9718fe15.98603",
    "wires": [
      [
        "1236d7b2.067398"
      ]
    ]
  },
  {
    "id": "1236d7b2.067398",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination-secondary.tunnel-tp-id' value=\"`$tmp.aai.destination-secondary-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5169.017318725586,
    "y": 2338.4261169433594,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "a1443a9c.9bc758",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4849.400161743164,
    "y": 2009.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "206cd74a.090e9",
        "743406a2.17f9a"
      ]
    ]
  },
  {
    "id": "743406a2.17f9a",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainC.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainC.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5057.400161743164,
    "y": 2016.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "c6f1bea4.57dda",
        "1229be89.7bda19",
        "b62eac2a.e73c5"
      ]
    ]
  },
  {
    "id": "2140dc16.b34c34",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4851.400161743164,
    "y": 2082.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "348e5ae6.fa6196"
      ]
    ]
  },
  {
    "id": "206cd74a.090e9",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainC id",
    "xml": "<set>\n<parameter name='tmp.domainC.esr-thirdparty-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5087.400161743164,
    "y": 1964.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "348e5ae6.fa6196",
    "type": "set",
    "name": "set domainC ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainC.eth-network-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5086.400161743164,
    "y": 2206.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "c6f1bea4.57dda",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5267.400161743164,
    "y": 2007.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "55a3e51f.c94c6c"
      ]
    ]
  },
  {
    "id": "1229be89.7bda19",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5259.400161743164,
    "y": 2062.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "dd96fb81.a1be5"
      ]
    ]
  },
  {
    "id": "b62eac2a.e73c5",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5264.400161743164,
    "y": 2119.0858154296875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "367deba0.342ae4"
      ]
    ]
  },
  {
    "id": "367deba0.342ae4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5416.400161743164,
    "y": 2120.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "dd96fb81.a1be5",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5427.400161743164,
    "y": 2065.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "55a3e51f.c94c6c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5411.782485961914,
    "y": 2004.7414855957031,
    "z": "9718fe15.98603",
    "wires": [
      [
        "37dd91fc.28526e"
      ]
    ]
  },
  {
    "id": "37dd91fc.28526e",
    "type": "set",
    "name": "set controller domainC data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5626.400161743164,
    "y": 2001.0858154296875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d0d8e8f0.a69bb8",
    "type": "comment",
    "name": "Create SECONDARY-ROOT UNI",
    "info": "",
    "comments": "",
    "x": 5655.900161743164,
    "y": 2123.852294921875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "98d8658a.1dab08",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5628.016860961914,
    "y": 2172.968994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "420f2345.5b5d34"
      ]
    ]
  },
  {
    "id": "420f2345.5b5d34",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5819.016860961914,
    "y": 2176.968994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "661df626.a6b8e8"
      ]
    ]
  },
  {
    "id": "661df626.a6b8e8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5946.016860961914,
    "y": 2175.968994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "329453e7.3a09dc",
        "8b47742b.726f38"
      ]
    ]
  },
  {
    "id": "8b47742b.726f38",
    "type": "save",
    "name": "save SECONDARY-ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.SECONDARY-ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='type' value='secondary-root' />\n<parameter name='data-source' value='`$gfp`' />\n<parameter name='data-owner' value='`$tmp.aai.service-instance.service-instance-id`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6168.016860961914,
    "y": 2064.968994140625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "329453e7.3a09dc",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6163.900161743164,
    "y": 2123.852294921875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7670a585.4e8fa4",
        "7f78162d.05f38"
      ]
    ]
  },
  {
    "id": "7670a585.4e8fa4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6373.900161743164,
    "y": 2100.852294921875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "36156797.814718"
      ]
    ]
  },
  {
    "id": "36156797.814718",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6499.900161743164,
    "y": 2100.852294921875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "c10b0555.a1cbe"
      ]
    ]
  },
  {
    "id": "802f927b.0dcdb",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6504.900161743164,
    "y": 2149.852294921875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2a6e1393.0f0b94",
        "ec798eb.b40ea7",
        "21b7fb79.312cdc",
        "b8684fe1.88dea8"
      ]
    ]
  },
  {
    "id": "7f78162d.05f38",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6378.900161743164,
    "y": 2149.852294921875,
    "z": "9718fe15.98603",
    "wires": [
      [
        "802f927b.0dcdb"
      ]
    ]
  },
  {
    "id": "c10b0555.a1cbe",
    "type": "save",
    "name": "save connectivityB relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6827.900161743164,
    "y": 2097.852294921875,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "2a6e1393.0f0b94",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainC",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainC-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6780.900161743164,
    "y": 2188.852294921875,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "ec798eb.b40ea7",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='secondary-root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6728.900161743164,
    "y": 2230.852294921875,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "21b7fb79.312cdc",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6857.900161743164,
    "y": 2272.852294921875,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "9b3b3d66.43cb88",
    "type": "comment",
    "name": "Create SECONDARY-ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 6743.900161743164,
    "y": 2145.852294921875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b8684fe1.88dea8",
    "type": "save",
    "name": "save connectivityC relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6835.900161743164,
    "y": 2320.852294921875,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "d8f4cd5c.153e9",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6399.900161743164,
    "y": 2817.65234375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "1ca77427.cfd00c"
      ]
    ]
  },
  {
    "id": "1ca77427.cfd00c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6591.900161743164,
    "y": 2812.65234375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d48a28e3.978788"
      ]
    ]
  },
  {
    "id": "d48a28e3.978788",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6720.900161743164,
    "y": 2812.65234375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "cd4e9669.2bbe38"
      ]
    ]
  },
  {
    "id": "cd4e9669.2bbe38",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 7052.900161743164,
    "y": 2810.65234375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "96928e3.987df7",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5984.900161743164,
    "y": 3029.65234375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "181572ea.9107d5"
      ]
    ]
  },
  {
    "id": "181572ea.9107d5",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6164.900161743164,
    "y": 3028.65234375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "8cd8419f.cb3a9"
      ]
    ]
  },
  {
    "id": "8cd8419f.cb3a9",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6293.900161743164,
    "y": 3028.65234375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d6cc041.8a7c3f8"
      ]
    ]
  },
  {
    "id": "d6cc041.8a7c3f8",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6511.783462524414,
    "y": 3027.53564453125,
    "z": "9718fe15.98603",
    "wires": [
      [
        "b0604621.14aa3"
      ]
    ]
  },
  {
    "id": "b0604621.14aa3",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6726.783462524414,
    "y": 3027.53564453125,
    "z": "9718fe15.98603",
    "wires": [
      [
        "1b23239.265d75c"
      ]
    ]
  },
  {
    "id": "1b23239.265d75c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6858.783462524414,
    "y": 3027.53564453125,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e0661126.3d63c"
      ]
    ]
  },
  {
    "id": "e0661126.3d63c",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 7222.900161743164,
    "y": 3026.65234375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "ba199ac4.fb848",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4955.399185180664,
    "y": 2677.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "3b9234ec.069ca4"
      ]
    ]
  },
  {
    "id": "3b9234ec.069ca4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5135.399185180664,
    "y": 2676.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "9eae322e.b63d4"
      ]
    ]
  },
  {
    "id": "9eae322e.b63d4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5264.399185180664,
    "y": 2676.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d93117f0.529c08"
      ]
    ]
  },
  {
    "id": "eef4e51b.ad8f08",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5000.399185180664,
    "y": 2735.218994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d93117f0.529c08",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5030.399185180664,
    "y": 2768.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "cef39c15.c2efe8",
        "19cfaa23.53868e",
        "3979c231.eba74e"
      ]
    ]
  },
  {
    "id": "19cfaa23.53868e",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5211.890151977539,
    "y": 2745.793212890625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "11983801.6e819"
      ]
    ]
  },
  {
    "id": "3979c231.eba74e",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5200.399185180664,
    "y": 2785.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "df1ec346.4539a"
      ]
    ]
  },
  {
    "id": "11983801.6e819",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5371.461685180664,
    "y": 2744.078857421875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "df1ec346.4539a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5361.399185180664,
    "y": 2786.218994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "cef39c15.c2efe8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5205.399185180664,
    "y": 2822.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ce54950d.a0123"
      ]
    ]
  },
  {
    "id": "ce54950d.a0123",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5363.399185180664,
    "y": 2830.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "f7f8d3b0.147e88",
        "b341778e.b63ef8"
      ]
    ]
  },
  {
    "id": "f7f8d3b0.147e88",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 5524.399185180664,
    "y": 2762.218994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "b341778e.b63ef8",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5566.399185180664,
    "y": 2834.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "8414e4a1.38b9c8",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5042.399185180664,
    "y": 3035.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "671d16b.b80a7e8"
      ]
    ]
  },
  {
    "id": "671d16b.b80a7e8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5222.399185180664,
    "y": 3034.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "119e2009.a17608"
      ]
    ]
  },
  {
    "id": "119e2009.a17608",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5351.399185180664,
    "y": 3034.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "473f5087.37a1e8"
      ]
    ]
  },
  {
    "id": "5e936e89.558fa8",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5087.399185180664,
    "y": 3093.218994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "473f5087.37a1e8",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5117.399185180664,
    "y": 3126.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d9f85915.dda38",
        "24241f4e.c44408",
        "225969a9.a7207e"
      ]
    ]
  },
  {
    "id": "24241f4e.c44408",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5298.890151977539,
    "y": 3103.793212890625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "96c74d33.8dbf8"
      ]
    ]
  },
  {
    "id": "225969a9.a7207e",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5287.399185180664,
    "y": 3143.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "591af841.3626"
      ]
    ]
  },
  {
    "id": "96c74d33.8dbf8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5458.461685180664,
    "y": 3102.078857421875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "591af841.3626",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5448.399185180664,
    "y": 3144.218994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d9f85915.dda38",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5292.399185180664,
    "y": 3180.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "211d205d.25f7f"
      ]
    ]
  },
  {
    "id": "211d205d.25f7f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5450.399185180664,
    "y": 3188.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d0bfd54a.d36bc8",
        "7dc2fca0.94494c"
      ]
    ]
  },
  {
    "id": "d0bfd54a.d36bc8",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 5611.399185180664,
    "y": 3120.218994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "7dc2fca0.94494c",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5653.399185180664,
    "y": 3192.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "3f0ddd6.f3f1022",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3524.066665649414,
    "y": 4617.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "358e9751.c712f"
      ]
    ]
  },
  {
    "id": "358e9751.c712f",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3704.066665649414,
    "y": 4616.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "6884e019.44294"
      ]
    ]
  },
  {
    "id": "6884e019.44294",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3833.066665649414,
    "y": 4616.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "5116cf4b.8d29a"
      ]
    ]
  },
  {
    "id": "bd6b4020.6dbe8",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3569.066665649414,
    "y": 4675.218994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "5116cf4b.8d29a",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3599.066665649414,
    "y": 4708.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2e2530b5.6396c8",
        "a3a43577.5b69d",
        "ed68f855.e91bf8"
      ]
    ]
  },
  {
    "id": "a3a43577.5b69d",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3780.557632446289,
    "y": 4685.793212890625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "86842579.52f86"
      ]
    ]
  },
  {
    "id": "ed68f855.e91bf8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3769.066665649414,
    "y": 4725.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "73eac34a.dab10c"
      ]
    ]
  },
  {
    "id": "86842579.52f86",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3940.129165649414,
    "y": 4684.078857421875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "73eac34a.dab10c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3930.066665649414,
    "y": 4726.218994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "2e2530b5.6396c8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3774.066665649414,
    "y": 4762.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "744d2f9d.2ccba"
      ]
    ]
  },
  {
    "id": "744d2f9d.2ccba",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3932.066665649414,
    "y": 4770.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e108af78.2fc248",
        "9bbc731d.e00988"
      ]
    ]
  },
  {
    "id": "e108af78.2fc248",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 4093.066665649414,
    "y": 4702.218994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "9bbc731d.e00988",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4135.066665649414,
    "y": 4774.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "75777f0a.fb1b9",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4215.733657836914,
    "y": 5572.218994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "4f6ebd11.7928d4",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4370.733657836914,
    "y": 5613.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "53cb53b2.198aa4",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4186.733657836914,
    "y": 5671.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7b1794a5.b1fc24",
        "60cb3386.52366c"
      ]
    ]
  },
  {
    "id": "7b1794a5.b1fc24",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4422.733657836914,
    "y": 5655.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "d1b5ec1f.66461"
      ]
    ]
  },
  {
    "id": "60cb3386.52366c",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4421.733657836914,
    "y": 5703.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "d1b5ec1f.66461",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4566.733657836914,
    "y": 5657.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "2e676cc9.ce26a4",
        "6e286f3d.8e0a28",
        "e2964af9.ec57d8"
      ]
    ]
  },
  {
    "id": "2e676cc9.ce26a4",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 4978.733901977539,
    "y": 5792.218994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "6e286f3d.8e0a28",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5099.733901977539,
    "y": 5839.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "a459d12f.16fa1",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 4982.617691040039,
    "y": 5883.102294921875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "e2964af9.ec57d8",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4981.400894165039,
    "y": 5924.302490234375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "f2f8d85f.c68ad8",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4842.066665649414,
    "y": 6178.218994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "9cfb7864.e0e548",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5008.066665649414,
    "y": 6217.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "98761b9f.ff6118",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4847.066665649414,
    "y": 6267.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "ebc03603.139de",
        "22cd6c36.3aa1dc"
      ]
    ]
  },
  {
    "id": "ebc03603.139de",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5080.066665649414,
    "y": 6261.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "3bf7ac87.926a04"
      ]
    ]
  },
  {
    "id": "22cd6c36.3aa1dc",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5081.066665649414,
    "y": 6311.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "3bf7ac87.926a04",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5227.066665649414,
    "y": 6269.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7682c7bc.9b0958",
        "fc925053.188248",
        "d17759a6.e157b"
      ]
    ]
  },
  {
    "id": "7682c7bc.9b0958",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5474.066665649414,
    "y": 6257.218994140625,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "fc925053.188248",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5595.066665649414,
    "y": 6304.218994140625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "a868892a.829a98",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5477.950454711914,
    "y": 6348.102294921875,
    "z": "9718fe15.98603",
    "wires": []
  },
  {
    "id": "d17759a6.e157b",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5476.733657836914,
    "y": 6389.302490234375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "b6de4106.8135",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3604.066665649414,
    "y": 6162.652587890625,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "37dc60ca.62221",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2941.316665649414,
    "y": 6160.902587890625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "196d7b7.c07cd85",
        "bc377eb3.be507"
      ]
    ]
  },
  {
    "id": "196d7b7.c07cd85",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3132.316665649414,
    "y": 6164.902587890625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "65fedbab.47a65c"
      ]
    ]
  },
  {
    "id": "65fedbab.47a65c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3259.316665649414,
    "y": 6163.902587890625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "b6de4106.8135"
      ]
    ]
  },
  {
    "id": "bc377eb3.be507",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3128.316665649414,
    "y": 6234.902587890625,
    "z": "9718fe15.98603",
    "wires": [
      [
        "e0efce2f.f6bfe"
      ]
    ]
  },
  {
    "id": "7ecde40.b1b951c",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate-w-Protection",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate-w-Protection' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3677.816665649414,
    "y": 6233.986083984375,
    "z": "9718fe15.98603",
    "wires": [
      []
    ]
  },
  {
    "id": "e0efce2f.f6bfe",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3261.816665649414,
    "y": 6236.986083984375,
    "z": "9718fe15.98603",
    "wires": [
      [
        "7ecde40.b1b951c"
      ]
    ]
  }
]