[
  {
    "id": "9b0ef60b.7214f",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 179.56666564941406,
    "y": 189.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fb71b372.446598"
      ]
    ]
  },
  {
    "id": "fb71b372.446598",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 463.85235595703125,
    "y": 250.52385997772217,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "661c7873.62c16"
      ]
    ]
  },
  {
    "id": "661c7873.62c16",
    "type": "method",
    "name": "method cll-vnf-topology-operation-cll-modify",
    "xml": "<method rpc='cll-vnf-topology-operation-cll-modify' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 469.9952697753906,
    "y": 335.28578186035156,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f0354603.74586"
      ]
    ]
  },
  {
    "id": "f0354603.74586",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 819.5666656494141,
    "y": 394.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "729f4799.a6df6",
        "82d86696.e8f5a",
        "381a9eda.91673a"
      ]
    ]
  },
  {
    "id": "729f4799.a6df6",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1120.900161743164,
    "y": 665.2160491943359,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "82d86696.e8f5a",
    "type": "save",
    "name": "get service-instance from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
    "comments": "",
    "outputs": 1,
    "x": 1142.328628540039,
    "y": 367.6190643310547,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "19e3f412.c2895c",
        "22e3b9e.2e85d46",
        "d1fd3935.e60aa8"
      ]
    ]
  },
  {
    "id": "19e3f412.c2895c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1367.328628540039,
    "y": 225.6190643310547,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "bdfafca5.bdc978"
      ]
    ]
  },
  {
    "id": "22e3b9e.2e85d46",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1362.819595336914,
    "y": 295.19309997558594,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f555968c.0ca438"
      ]
    ]
  },
  {
    "id": "d1fd3935.e60aa8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1351.328628540039,
    "y": 341.6190643310547,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "cd958c5e.148ca8"
      ]
    ]
  },
  {
    "id": "60f90238.97edc4",
    "type": "comment",
    "name": "new for TransportSlicing",
    "info": "",
    "comments": "",
    "x": 1121.328628540039,
    "y": 255.6190643310547,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "381a9eda.91673a",
    "type": "execute",
    "name": "execute properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
    "comments": "",
    "outputs": 1,
    "x": 1109.328628540039,
    "y": 307.6190643310547,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "bdfafca5.bdc978",
    "type": "switchNode",
    "name": "switch allotted-resources_length != 0",
    "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1607.566665649414,
    "y": 222.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "1d20e341.a27c1d",
        "5ce58924.9a36f"
      ]
    ]
  },
  {
    "id": "f555968c.0ca438",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1517.6290435791016,
    "y": 298.14552307128906,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "cd958c5e.148ca8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1521.566665649414,
    "y": 342.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "1d20e341.a27c1d",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1812.566665649414,
    "y": 259.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e28a7a1e.c07b78"
      ]
    ]
  },
  {
    "id": "5ce58924.9a36f",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1822.566665649414,
    "y": 186.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "e28a7a1e.c07b78",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1805.566665649414,
    "y": 334.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fd95487b.da105",
        "526e7fc2.050288",
        "a11cf219.9bf18",
        "8ac4fdd4.d603a8",
        "c717d5f4.4fddc8"
      ]
    ]
  },
  {
    "id": "324358a6.ea813",
    "type": "save",
    "name": "get allotted-resource from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2291.566665649414,
    "y": 385.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6086efb9.edfcd",
        "9b93dfe7.0d77",
        "a7f7b2f5.24504"
      ]
    ]
  },
  {
    "id": "6086efb9.edfcd",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2507.566665649414,
    "y": 452.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "a12dc51a.620ef"
      ]
    ]
  },
  {
    "id": "9b93dfe7.0d77",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2508.057632446289,
    "y": 351.85972595214844,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "adc977fa.7cd608"
      ]
    ]
  },
  {
    "id": "a7f7b2f5.24504",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2503.566665649414,
    "y": 401.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "4d4bdb5a.3763ac"
      ]
    ]
  },
  {
    "id": "fd95487b.da105",
    "type": "for",
    "name": "for each allotted-resource",
    "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2008.566665649414,
    "y": 366.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "cc186f28.ba2c9",
        "324358a6.ea813",
        "ab78fc6f.8a0998",
        "1e0dcc9a.c7d15b"
      ]
    ]
  },
  {
    "id": "cc186f28.ba2c9",
    "type": "set",
    "name": "set the current allotted-resource-id",
    "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
    "comments": "",
    "x": 2288.566665649414,
    "y": 304.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "8ac4fdd4.d603a8",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
    "comments": "",
    "x": 1982.566665649414,
    "y": 316.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "526e7fc2.050288",
    "type": "get-resource",
    "name": "get-resource pnfs-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/pnfs?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
    "comments": "",
    "outputs": 1,
    "x": 2025.566665649414,
    "y": 175.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "a11cf219.9bf18",
    "type": "get-resource",
    "name": "get-resource logical-links",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
    "comments": "",
    "outputs": 1,
    "x": 2037.566665649414,
    "y": 216.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "2d1a927f.4e32b6",
    "type": "comment",
    "name": "The following two nodes are for PCE",
    "info": "",
    "comments": "",
    "x": 2062.566665649414,
    "y": 128.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "9e25d87e.938588",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
    "comments": "",
    "x": 1982.566665649414,
    "y": 262.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "adc977fa.7cd608",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 2686.566665649414,
    "y": 354.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "4d4bdb5a.3763ac",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 2686.504165649414,
    "y": 403.42601013183594,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "a12dc51a.620ef",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2688.504165649414,
    "y": 454.42601013183594,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e28b2f59.3a0188"
      ]
    ]
  },
  {
    "id": "e28b2f59.3a0188",
    "type": "save",
    "name": "get allotted-resource relationship from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3023.504165649414,
    "y": 223.426025390625,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5b54194d.44ebe",
        "aebf4283.d1be78",
        "4cc0a7b0.54364"
      ]
    ]
  },
  {
    "id": "aebf4283.d1be78",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3296.995132446289,
    "y": 116,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "bfbb6bff.50e7e8"
      ]
    ]
  },
  {
    "id": "bfbb6bff.50e7e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3474.566665649414,
    "y": 116.2857666015625,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "4cc0a7b0.54364",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3292.504165649414,
    "y": 165.426025390625,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "8ce95b42.618ca8"
      ]
    ]
  },
  {
    "id": "8ce95b42.618ca8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3474.504165649414,
    "y": 165.426025390625,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "5b54194d.44ebe",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3296.504165649414,
    "y": 216.426025390625,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6f465aa6.4f1ee4"
      ]
    ]
  },
  {
    "id": "6f465aa6.4f1ee4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3476.504165649414,
    "y": 216.426025390625,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "7a127cf4.cf8b34"
      ]
    ]
  },
  {
    "id": "7a127cf4.cf8b34",
    "type": "switchNode",
    "name": "switch allotted-resource.relationship-list not empty",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3042.566665649414,
    "y": 351.2857666015625,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "9cc4aaf6.859c",
        "9d86e661.45c7f"
      ]
    ]
  },
  {
    "id": "9d86e661.45c7f",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3352.566665649414,
    "y": 358.2857666015625,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "9cc4aaf6.859c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3351.566665649414,
    "y": 412.2857666015625,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c9c4f2a.9305f9"
      ]
    ]
  },
  {
    "id": "af10f438.0ffb48",
    "type": "outcome",
    "name": "network-policy",
    "xml": "<outcome value='network-policy'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4096.566665649414,
    "y": 366.2857666015625,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "96cf18f1.1cad5"
      ]
    ]
  },
  {
    "id": "96cf18f1.1cad5",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4273.566543579102,
    "y": 359.28564453125,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c590372d.ec562",
        "d84bff3f.0a18c8"
      ]
    ]
  },
  {
    "id": "c9c4f2a.9305f9",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3515.566665649414,
    "y": 338.2857666015625,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "ec6a7a84.d65408",
        "7d25e53c.8a468c"
      ]
    ]
  },
  {
    "id": "ec6a7a84.d65408",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3796.566665649414,
    "y": 294.2857666015625,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "7204f6fc.5ab2"
      ]
    ]
  },
  {
    "id": "7204f6fc.5ab2",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4058.566665649414,
    "y": 294.2857666015625,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "af10f438.0ffb48"
      ]
    ]
  },
  {
    "id": "c590372d.ec562",
    "type": "set",
    "name": "set the 1st network-policy-id",
    "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 4516.566543579102,
    "y": 316.28564453125,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "d84bff3f.0a18c8",
    "type": "save",
    "name": "get network-policy from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
    "comments": "",
    "outputs": 1,
    "x": 4505.566543579102,
    "y": 371.28564453125,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "bcf7cb3d.813c08",
        "241d629e.3937f6",
        "ab4a02d2.dd63f8"
      ]
    ]
  },
  {
    "id": "ab4a02d2.dd63f8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4836.566665649414,
    "y": 279.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6fe3d858.7ad19"
      ]
    ]
  },
  {
    "id": "6fe3d858.7ad19",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4985.138198852539,
    "y": 279.57151794433594,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3cab2fad.4b6d28",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4984.075698852539,
    "y": 323.71177673339844,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "241d629e.3937f6",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4825.075698852539,
    "y": 323.71177673339844,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3cab2fad.4b6d28"
      ]
    ]
  },
  {
    "id": "bcf7cb3d.813c08",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4832.075698852539,
    "y": 402.71177673339844,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c61a87d8.32a11"
      ]
    ]
  },
  {
    "id": "c61a87d8.32a11",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4971.075698852539,
    "y": 402.71177673339844,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "ab565ac9.d97978",
        "cf0bc947.03a4d"
      ]
    ]
  },
  {
    "id": "ab565ac9.d97978",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5176.566665649414,
    "y": 400.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "cf0bc947.03a4d",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5175.566665649414,
    "y": 446.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "7d25e53c.8a468c",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3613.566665649414,
    "y": 410.2857666015625,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "95ed8dc.322967"
      ]
    ]
  },
  {
    "id": "95ed8dc.322967",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3893.566665649414,
    "y": 410.2857666015625,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e85bd9f4.7a28d"
      ]
    ]
  },
  {
    "id": "e85bd9f4.7a28d",
    "type": "outcome",
    "name": "logical-link",
    "xml": "<outcome value='logical-link'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2264.5667877197266,
    "y": 841.2858734130859,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "53210c7d.ec4f8c"
      ]
    ]
  },
  {
    "id": "53210c7d.ec4f8c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2441.566665649414,
    "y": 834.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6d10b617.947758",
        "dd67d7f2.9348e"
      ]
    ]
  },
  {
    "id": "6d10b617.947758",
    "type": "set",
    "name": "set the current logical-link-name",
    "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 2684.566665649414,
    "y": 791.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "dd67d7f2.9348e",
    "type": "save",
    "name": "get logical-link from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
    "comments": "",
    "outputs": 1,
    "x": 2673.566665649414,
    "y": 846.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "7e4e9434.83a0d4",
        "9cee4acb.003668",
        "47c07099.1b14a8"
      ]
    ]
  },
  {
    "id": "7e4e9434.83a0d4",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2965.057632446289,
    "y": 824.8597259521484,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "bc050886.d2a05"
      ]
    ]
  },
  {
    "id": "9cee4acb.003668",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2953.566665649414,
    "y": 869.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c31212b9.83f5f8"
      ]
    ]
  },
  {
    "id": "bc050886.d2a05",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3113.629165649414,
    "y": 825.1454925537109,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "c31212b9.83f5f8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3112.566665649414,
    "y": 869.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "47c07099.1b14a8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2960.566665649414,
    "y": 948.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "a66b0cd4.00b53"
      ]
    ]
  },
  {
    "id": "a66b0cd4.00b53",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3099.566665649414,
    "y": 948.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "628231dc.fe1998",
        "40f53355.15a3d4",
        "6e7728cd.6d606",
        "591f4762.52be1",
        "72ab083b.a6528",
        "be414195.9b77c",
        "8abc6705.827928",
        "5f587418.c46734",
        "da60761c.d9f04",
        "fd9bd7ab.c92bd8",
        "b37c5dee.6ca208",
        "1bc9df09.d67e59",
        "6e895a21.1d4594",
        "707a9dca.527c64",
        "9cc0dadb.189ef",
        "e9c6a99.90dcbd8",
        "4a92500a.dfe688",
        "25934f35.38edd",
        "77f3463a.2b447"
      ]
    ]
  },
  {
    "id": "b0809281.c581e8",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3411.566665649414,
    "y": 498.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "628231dc.fe1998",
    "type": "execute",
    "name": "execute UUID generator for otn-tunnel-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3398.5665435791016,
    "y": 590.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "707a9dca.527c64",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 3355.5665435791016,
    "y": 635.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "40f53355.15a3d4",
    "type": "set",
    "name": "set network-route-one",
    "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
    "comments": "",
    "x": 3330.5665435791016,
    "y": 698.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "6e7728cd.6d606",
    "type": "set",
    "name": "set network-route-two",
    "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
    "comments": "",
    "x": 3331.5665435791016,
    "y": 753.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "591f4762.52be1",
    "type": "save",
    "name": "get network-route-one from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
    "comments": "",
    "outputs": 1,
    "x": 3347.5665435791016,
    "y": 801.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6d204f19.ffc268",
        "1689d04b.d0aa98",
        "34ef36cb.86ebd2"
      ]
    ]
  },
  {
    "id": "72ab083b.a6528",
    "type": "save",
    "name": "get network-route-two from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
    "comments": "",
    "outputs": 1,
    "x": 3342.566665649414,
    "y": 868.2856292724609,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "a5360717.582308",
        "a764163a.8df268",
        "84d2b76f.25f11"
      ]
    ]
  },
  {
    "id": "6d204f19.ffc268",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3588.566665649414,
    "y": 629.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "424235f5.63bc3c"
      ]
    ]
  },
  {
    "id": "1689d04b.d0aa98",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3584.075698852539,
    "y": 678.7117767333984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3044babb.9a7f0e"
      ]
    ]
  },
  {
    "id": "34ef36cb.86ebd2",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3588.075698852539,
    "y": 731.7117767333984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e8786087.fc4a5"
      ]
    ]
  },
  {
    "id": "424235f5.63bc3c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3737.138198852539,
    "y": 628.5715179443359,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3044babb.9a7f0e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3727.075698852539,
    "y": 678.7117767333984,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "a5360717.582308",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3592.566665649414,
    "y": 785.2856292724609,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "d832daa6.408e"
      ]
    ]
  },
  {
    "id": "a764163a.8df268",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3588.075698852539,
    "y": 834.7116546630859,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "b0e5525.e8ef43"
      ]
    ]
  },
  {
    "id": "84d2b76f.25f11",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3571.075698852539,
    "y": 882.7116546630859,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "8b568989.b50038"
      ]
    ]
  },
  {
    "id": "d832daa6.408e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3741.138198852539,
    "y": 784.5713958740234,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b0e5525.e8ef43",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3731.075698852539,
    "y": 834.7116546630859,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "e8786087.fc4a5",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3749.566665649414,
    "y": 731.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "66efb3a1.9fe73c"
      ]
    ]
  },
  {
    "id": "8b568989.b50038",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3724.566665649414,
    "y": 882.2856292724609,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "26894e1f.239b9a"
      ]
    ]
  },
  {
    "id": "66efb3a1.9fe73c",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3921.566665649414,
    "y": 731.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "a22f1b0d.edd33",
        "ab951b61.cb4cb8",
        "79c99b01.4060a4"
      ]
    ]
  },
  {
    "id": "26894e1f.239b9a",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3916.566665649414,
    "y": 816.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "a2c3d250.fc00d",
        "aa59cf58.a145d8",
        "fb5e94da.526bd"
      ]
    ]
  },
  {
    "id": "a22f1b0d.edd33",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4082.566177368164,
    "y": 467.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "2bc1e64e.d59032"
      ]
    ]
  },
  {
    "id": "ab951b61.cb4cb8",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4084.566177368164,
    "y": 521.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "453522b8.5dbac4"
      ]
    ]
  },
  {
    "id": "a2c3d250.fc00d",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4097.565933227539,
    "y": 689.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f5a4f507.86b44"
      ]
    ]
  },
  {
    "id": "aa59cf58.a145d8",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4099.565933227539,
    "y": 743.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "8148cd30.75333"
      ]
    ]
  },
  {
    "id": "fcdd9b76.8fa5f8",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4392.566177368164,
    "y": 419.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "a44710c1.f4b4c8",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4385.566177368164,
    "y": 517.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "5b86250b.1183b4",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4461.565933227539,
    "y": 716.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "154b4953.ab9fcf",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4465.565933227539,
    "y": 809.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3bb3037a.178754",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3543.566665649414,
    "y": 1232.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "10e4f75f.914479"
      ]
    ]
  },
  {
    "id": "8000d000.35dfa8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3553.057632446289,
    "y": 1274.8597869873047,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c201e6b8.a3178"
      ]
    ]
  },
  {
    "id": "89805004.2ac398",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3541.566665649414,
    "y": 1321.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f43a00.5422b6"
      ]
    ]
  },
  {
    "id": "7d1a072.a69ea78",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3243.566665649414,
    "y": 1194.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "8abc6705.827928",
    "type": "save",
    "name": "get p-interface-src from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3286.566665649414,
    "y": 1259.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3bb3037a.178754",
        "8000d000.35dfa8",
        "89805004.2ac398"
      ]
    ]
  },
  {
    "id": "be414195.9b77c",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3275.566665649414,
    "y": 1109.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c53ee6d9.d92aa8",
        "b00b21f6.61a17"
      ]
    ]
  },
  {
    "id": "b00b21f6.61a17",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3498.566665649414,
    "y": 1095.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "42f02ac3.9ec4a4"
      ]
    ]
  },
  {
    "id": "c53ee6d9.d92aa8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3500.566665649414,
    "y": 1128.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "dd03ebfe.8dbb"
      ]
    ]
  },
  {
    "id": "10e4f75f.914479",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3716.233169555664,
    "y": 1231.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e44801ab.1590c8",
        "fa4a5699.5e244"
      ]
    ]
  },
  {
    "id": "c201e6b8.a3178",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3706.6290435791016,
    "y": 1278.145523071289,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "f43a00.5422b6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3710.566665649414,
    "y": 1322.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "e44801ab.1590c8",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3980.566665649414,
    "y": 1282.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "16568eac.f132a9",
        "e40b1917.8979d8"
      ]
    ]
  },
  {
    "id": "e40b1917.8979d8",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4156.566665649414,
    "y": 1332.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "ac556463.ec12b8"
      ]
    ]
  },
  {
    "id": "16568eac.f132a9",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4158.566665649414,
    "y": 1396.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "97de31bb.b9a118"
      ]
    ]
  },
  {
    "id": "97de31bb.b9a118",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4320.566665649414,
    "y": 1392.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "ac556463.ec12b8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4321.566665649414,
    "y": 1329.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3ab9a413.979aa4",
        "75cbb82a.35584"
      ]
    ]
  },
  {
    "id": "dd03ebfe.8dbb",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3643.566665649414,
    "y": 1125.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "42f02ac3.9ec4a4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3646.566665649414,
    "y": 1088.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6046ec7d.2c3dac",
        "942aecd4.e6d53"
      ]
    ]
  },
  {
    "id": "6046ec7d.2c3dac",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3820.566665649414,
    "y": 1044.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "fa4a5699.5e244",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3692.566665649414,
    "y": 1413.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5ae5afb9.f0afa"
      ]
    ]
  },
  {
    "id": "5ae5afb9.f0afa",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3973.566665649414,
    "y": 1408.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "cfb3ee78.011c4"
      ]
    ]
  },
  {
    "id": "cfb3ee78.011c4",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4284.852310180664,
    "y": 1483.1075286865234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "658c69d5.ac8cf"
      ]
    ]
  },
  {
    "id": "942aecd4.e6d53",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3835.566665649414,
    "y": 1155.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "7f200322.76207c",
        "80c4e01c.7c07b8",
        "71ab8804.94dd5"
      ]
    ]
  },
  {
    "id": "7f200322.76207c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4031.0667877197266,
    "y": 1107.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "a99ba4fa.4ed1e8"
      ]
    ]
  },
  {
    "id": "80c4e01c.7c07b8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4023.0667877197266,
    "y": 1162.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "848293a0.71bc7"
      ]
    ]
  },
  {
    "id": "71ab8804.94dd5",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4028.0667877197266,
    "y": 1219.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f97b023f.267278"
      ]
    ]
  },
  {
    "id": "f97b023f.267278",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4180.066787719727,
    "y": 1220.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "848293a0.71bc7",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4191.066787719727,
    "y": 1165.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "a99ba4fa.4ed1e8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4175.449111938477,
    "y": 1104.941421508789,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "b504251b.7f7448"
      ]
    ]
  },
  {
    "id": "b504251b.7f7448",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4398.566909790039,
    "y": 1243.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "52eb8aa1.8ff274"
      ]
    ]
  },
  {
    "id": "75cbb82a.35584",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
    "comments": "",
    "x": 4491.566665649414,
    "y": 1287.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3ab9a413.979aa4",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
    "comments": "",
    "x": 4492.566665649414,
    "y": 1395.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b9ee3c01.a1e29",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4493.566665649414,
    "y": 1344.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "658c69d5.ac8cf",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4491.683853149414,
    "y": 1483.6260833740234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "aadf2b0a.6db3d",
        "61bc8b6e.22a73c",
        "30cdefe5.b26318"
      ]
    ]
  },
  {
    "id": "aadf2b0a.6db3d",
    "type": "set",
    "name": "set source ttp-id",
    "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4706.683853149414,
    "y": 1445.6260833740234,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "61bc8b6e.22a73c",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4703.683853149414,
    "y": 1484.6260833740234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fd577e5f.db1ba"
      ]
    ]
  },
  {
    "id": "30cdefe5.b26318",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4659.183853149414,
    "y": 1526.6260833740234,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "fd577e5f.db1ba",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4884.183853149414,
    "y": 1483.6260833740234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fa2d5efd.88ba08"
      ]
    ]
  },
  {
    "id": "ded6fafe.4074f8",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4796.566909790039,
    "y": 1247.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "afabdc9f.6d39f8"
      ]
    ]
  },
  {
    "id": "afabdc9f.6d39f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4973.566909790039,
    "y": 1239.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "d564a26c.9a8558",
        "3ff41e19.f0e01a"
      ]
    ]
  },
  {
    "id": "52eb8aa1.8ff274",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4593.566909790039,
    "y": 1243.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "ded6fafe.4074f8",
        "f56e57c9.6506a8"
      ]
    ]
  },
  {
    "id": "f56e57c9.6506a8",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4662.566909790039,
    "y": 1317.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f21dcf5d.336178"
      ]
    ]
  },
  {
    "id": "f21dcf5d.336178",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4858.566909790039,
    "y": 1317.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "132ca45a.eb5e34"
      ]
    ]
  },
  {
    "id": "fa2d5efd.88ba08",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5042.183853149414,
    "y": 1483.6260833740234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "b951f264.559ce"
      ]
    ]
  },
  {
    "id": "b951f264.559ce",
    "type": "set",
    "name": "set source tunnel tp ip",
    "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5249.183853149414,
    "y": 1483.6260833740234,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3ff41e19.f0e01a",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5198.566909790039,
    "y": 1235.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "a40a7be5.2be498",
        "d6b97145.3bf148",
        "ea85892.20b4178"
      ]
    ]
  },
  {
    "id": "d564a26c.9a8558",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainA id",
    "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5228.566909790039,
    "y": 1183.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "a40a7be5.2be498",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5408.566909790039,
    "y": 1226.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "d68ba68a.be89b8"
      ]
    ]
  },
  {
    "id": "d6b97145.3bf148",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5400.566909790039,
    "y": 1281.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "7c894f76.5a638"
      ]
    ]
  },
  {
    "id": "ea85892.20b4178",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5405.566909790039,
    "y": 1338.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "d37deda4.10b24"
      ]
    ]
  },
  {
    "id": "d37deda4.10b24",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5557.566909790039,
    "y": 1339.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "7c894f76.5a638",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5568.566909790039,
    "y": 1284.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "d68ba68a.be89b8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5552.949234008789,
    "y": 1223.941421508789,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "ff0f9afc.082318"
      ]
    ]
  },
  {
    "id": "132ca45a.eb5e34",
    "type": "set",
    "name": "set domainA ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5121.566909790039,
    "y": 1320.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "ff0f9afc.082318",
    "type": "set",
    "name": "set controller domainA data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5739.566909790039,
    "y": 1220.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "c100f1cf.959b9",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4380.566177368164,
    "y": 455.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "476d7cc2.2b9e3c",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4371.566177368164,
    "y": 553.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "2bc1e64e.d59032",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4205.566177368164,
    "y": 461.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fcdd9b76.8fa5f8",
        "c100f1cf.959b9"
      ]
    ]
  },
  {
    "id": "453522b8.5dbac4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4211.566177368164,
    "y": 525.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "a44710c1.f4b4c8",
        "476d7cc2.2b9e3c"
      ]
    ]
  },
  {
    "id": "f5a4f507.86b44",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4225.565933227539,
    "y": 689.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5b86250b.1183b4",
        "ee4f808.01bcf8"
      ]
    ]
  },
  {
    "id": "8148cd30.75333",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4228.565933227539,
    "y": 742.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "154b4953.ab9fcf",
        "f5de4dab.b0e37"
      ]
    ]
  },
  {
    "id": "ee4f808.01bcf8",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4447.565933227539,
    "y": 756.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "f5de4dab.b0e37",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4450.565933227539,
    "y": 847.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "fba24b6a.44ade",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3606.566665649414,
    "y": 1793.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6ab1e648.0c2108",
        "e98d774e.c7639"
      ]
    ]
  },
  {
    "id": "e055a781.15033",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3433.900161743164,
    "y": 1794.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fba24b6a.44ade"
      ]
    ]
  },
  {
    "id": "33450ab2.d72e86",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3443.391128540039,
    "y": 1836.8597869873047,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "279c15e9.8df2d2"
      ]
    ]
  },
  {
    "id": "14684e53.bc0682",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3431.900161743164,
    "y": 1883.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "7cf32ea0.24f2e8"
      ]
    ]
  },
  {
    "id": "279c15e9.8df2d2",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3596.9625396728516,
    "y": 1840.145523071289,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "7cf32ea0.24f2e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3600.900161743164,
    "y": 1884.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "6ab1e648.0c2108",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3892.900161743164,
    "y": 1797.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "daabf3e5.97bed8",
        "1e7b26c7.e7a121"
      ]
    ]
  },
  {
    "id": "1e7b26c7.e7a121",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4115.900161743164,
    "y": 1752.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "acfb9237.1cd6c8"
      ]
    ]
  },
  {
    "id": "daabf3e5.97bed8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4117.900161743164,
    "y": 1816.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "2bdd8bed.c7bcd4"
      ]
    ]
  },
  {
    "id": "2bdd8bed.c7bcd4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4276.900161743164,
    "y": 1835.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "acfb9237.1cd6c8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4280.900161743164,
    "y": 1749.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "26977aa5.25dd2e",
        "72fafff.27e4d"
      ]
    ]
  },
  {
    "id": "da60761c.d9f04",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3205.900161743164,
    "y": 1829.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e055a781.15033",
        "33450ab2.d72e86",
        "14684e53.bc0682"
      ]
    ]
  },
  {
    "id": "4b7ae9f1.8aec68",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3166.900161743164,
    "y": 1773.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "5f587418.c46734",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3218.900161743164,
    "y": 1575.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f9cab6f8.ebc12",
        "1ca010c1.fd862f"
      ]
    ]
  },
  {
    "id": "1ca010c1.fd862f",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3441.900161743164,
    "y": 1561.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c0d41dc2.2e9ce8"
      ]
    ]
  },
  {
    "id": "f9cab6f8.ebc12",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3443.900161743164,
    "y": 1594.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3ccca278.68559e"
      ]
    ]
  },
  {
    "id": "3ccca278.68559e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3586.900161743164,
    "y": 1591.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "c0d41dc2.2e9ce8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3589.900161743164,
    "y": 1554.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c99a0449.e56c2",
        "7083ce51.93a92"
      ]
    ]
  },
  {
    "id": "c99a0449.e56c2",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3783.900161743164,
    "y": 1557.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "e98d774e.c7639",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3836.900161743164,
    "y": 1916.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fd084df8.e98c58"
      ]
    ]
  },
  {
    "id": "fd084df8.e98c58",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4042.900161743164,
    "y": 1916.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6cb7488a.a222b"
      ]
    ]
  },
  {
    "id": "6cb7488a.a222b",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4260.185806274414,
    "y": 1915.1075286865234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "350b3e58.c792ea"
      ]
    ]
  },
  {
    "id": "7083ce51.93a92",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3805.900161743164,
    "y": 1625.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5d1bde7f.a2e988",
        "568d456e.886424",
        "4559cac2.72065c"
      ]
    ]
  },
  {
    "id": "5d1bde7f.a2e988",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4001.4002838134766,
    "y": 1577.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "7231501f.55645"
      ]
    ]
  },
  {
    "id": "568d456e.886424",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3993.4002838134766,
    "y": 1632.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "1fe97a53.6160f6"
      ]
    ]
  },
  {
    "id": "4559cac2.72065c",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3998.4002838134766,
    "y": 1689.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c16f7b5a.3ed008"
      ]
    ]
  },
  {
    "id": "c16f7b5a.3ed008",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4150.400283813477,
    "y": 1690.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "1fe97a53.6160f6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4161.400283813477,
    "y": 1635.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "7231501f.55645",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4145.782608032227,
    "y": 1574.9415435791016,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c3bee3fa.d3a9e"
      ]
    ]
  },
  {
    "id": "26977aa5.25dd2e",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
    "comments": "",
    "x": 4450.900161743164,
    "y": 1710.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "72fafff.27e4d",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
    "comments": "",
    "x": 4451.900161743164,
    "y": 1815.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3c2418c7.4572c8",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4446.900161743164,
    "y": 1764.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "350b3e58.c792ea",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4467.017349243164,
    "y": 1904.626205444336,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5da8c5d3.b9f55c",
        "1242abaf.e56384",
        "ed6b22ec.e3cd3"
      ]
    ]
  },
  {
    "id": "5da8c5d3.b9f55c",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4682.017349243164,
    "y": 1866.626205444336,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "1242abaf.e56384",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4679.017349243164,
    "y": 1905.626205444336,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "44aa2b45.5157d4"
      ]
    ]
  },
  {
    "id": "ed6b22ec.e3cd3",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4634.517349243164,
    "y": 1947.626205444336,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "44aa2b45.5157d4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4859.517349243164,
    "y": 1904.626205444336,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "cd8ad202.8d323"
      ]
    ]
  },
  {
    "id": "cd8ad202.8d323",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5017.517349243164,
    "y": 1904.626205444336,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3d8ba8c1.7feef8"
      ]
    ]
  },
  {
    "id": "3d8ba8c1.7feef8",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5224.517349243164,
    "y": 1904.626205444336,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "64248373.c0f1e4",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4727.900161743164,
    "y": 1593.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "ebf5d941.b9751"
      ]
    ]
  },
  {
    "id": "ebf5d941.b9751",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4904.900161743164,
    "y": 1585.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5f21b6d8.97a7a8",
        "a66d8cdf.7774c"
      ]
    ]
  },
  {
    "id": "c3bee3fa.d3a9e",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4329.900161743164,
    "y": 1589.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "768c4246.3384b4"
      ]
    ]
  },
  {
    "id": "768c4246.3384b4",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4524.900161743164,
    "y": 1589.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "64248373.c0f1e4",
        "d4d1382b.4bf1a8"
      ]
    ]
  },
  {
    "id": "a66d8cdf.7774c",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5112.900161743164,
    "y": 1592.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "798943c1.0b7f24",
        "dbd1300d.b2d4d8",
        "c22228e5.5f04a"
      ]
    ]
  },
  {
    "id": "4ab59831.7b5d28",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4906.900161743164,
    "y": 1658.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "b63665cd.e9bca8"
      ]
    ]
  },
  {
    "id": "d4d1382b.4bf1a8",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4729.900161743164,
    "y": 1666.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "4ab59831.7b5d28"
      ]
    ]
  },
  {
    "id": "5f21b6d8.97a7a8",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainB id",
    "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5142.900161743164,
    "y": 1540.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b63665cd.e9bca8",
    "type": "set",
    "name": "set domainB ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5088.900161743164,
    "y": 1722.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "798943c1.0b7f24",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5322.900161743164,
    "y": 1583.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "4408e043.c54b2"
      ]
    ]
  },
  {
    "id": "dbd1300d.b2d4d8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5314.900161743164,
    "y": 1638.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "90ad08da.8c4d18"
      ]
    ]
  },
  {
    "id": "c22228e5.5f04a",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5319.900161743164,
    "y": 1695.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "de4c591d.7f2f48"
      ]
    ]
  },
  {
    "id": "de4c591d.7f2f48",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5471.900161743164,
    "y": 1696.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "90ad08da.8c4d18",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5482.900161743164,
    "y": 1641.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "4408e043.c54b2",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5467.282485961914,
    "y": 1580.9415435791016,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "2133344e.893bec"
      ]
    ]
  },
  {
    "id": "2133344e.893bec",
    "type": "set",
    "name": "set controller domainB data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5681.900161743164,
    "y": 1577.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "fd9bd7ab.c92bd8",
    "type": "set",
    "name": "set LEAF stuff",
    "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop + '-' + $tmp.aai.network-route-A.logical-interface-id`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
    "comments": "",
    "x": 3270.566665649414,
    "y": 1399.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "6a9b0f1.984457",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4547.566177368164,
    "y": 539.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "2f61d3b4.f418bc",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4615.565933227539,
    "y": 741.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b37c5dee.6ca208",
    "type": "set",
    "name": "set ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop + '-' + $tmp.aai.network-route-B.logical-interface-id`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
    "comments": "",
    "x": 3166.566665649414,
    "y": 1960.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "1bc9df09.d67e59",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3428.566665649414,
    "y": 2873.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "6e895a21.1d4594",
    "type": "switchNode",
    "name": "switch found-middle-man?",
    "xml": "<switch test='`$found-middle-man`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3305.566665649414,
    "y": 2983.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "cef17f20.edf7e8",
        "6dda4254.968224"
      ]
    ]
  },
  {
    "id": "cef17f20.edf7e8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3489.566665649414,
    "y": 2962.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "d8fe6f8d.d7595"
      ]
    ]
  },
  {
    "id": "6dda4254.968224",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3025.566665649414,
    "y": 4548.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "d77e7161.5348c8"
      ]
    ]
  },
  {
    "id": "300daee4.3b0352",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3536.566665649414,
    "y": 5133.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "318b9beb.21378c",
        "1992e083.76e587",
        "aaed5b46.7e8eb",
        "c7aee100.ec3998",
        "b969bbc7.e53528",
        "54f08fa.71777f"
      ]
    ]
  },
  {
    "id": "d8fe6f8d.d7595",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6202.566665649414,
    "y": 1782.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "1a1f2023.50c9f8",
        "e814ac2.6d99cd",
        "27a9213f.e489d6",
        "904795f3.631878",
        "c284bcb.2b7c44",
        "1d8604a2.381ee3",
        "5946c797.be74d",
        "a66844b6.e099c",
        "37c7ecba.efaa4c",
        "72cc1cfb.a77694",
        "1e88893b.a079df",
        "f9c59fe9.ee503",
        "4573e73f.58afa8",
        "c53261d3.0987a8",
        "f109d109.e8eb",
        "4c9e5bd3.54a49c",
        "e1cb1e55.b0357",
        "e177a7a3.e48c7",
        "6fa889cc.c9cce",
        "c91e3a5e.c6511",
        "162cf27b.802c36",
        "5a5c80f6.6318b8"
      ]
    ]
  },
  {
    "id": "37c7ecba.efaa4c",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6573.566665649414,
    "y": 1705.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "1a1f2023.50c9f8",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6527.566665649414,
    "y": 1803.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "e814ac2.6d99cd",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6663.566665649414,
    "y": 1850.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "2ad7ea9.f129796",
    "type": "comment",
    "name": "Create ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 6494.566665649414,
    "y": 1654.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "942a9804.0c79c",
    "type": "comment",
    "name": "create middle man connectivity and ...",
    "info": "1- create middle man connectivity\n2- create relation with all connectivities\n   in the path\n3- put srcTtp (+dstTtp) somewhere in the\n   vpn-binding -> this is for later on to find\n   which OTN tunnel's bandwidth has to be increased.\n5- create UNIs\n4- create relationship to UNIs",
    "comments": "",
    "x": 6990.566665649414,
    "y": 2390.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "27a9213f.e489d6",
    "type": "execute",
    "name": "execute UUID generator for connectivity middle-man",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-middle-man-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6554.566665649414,
    "y": 2429.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "904795f3.631878",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-middle-man-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-middle-man-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<!--The followings are not needed for the middle-man-connectivity-->\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />-->\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='mdsc' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6502.566665649414,
    "y": 2480.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "c284bcb.2b7c44",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-middle-man-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-middle-man-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6638.566665649414,
    "y": 2527.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "887b2dbb.8eb65",
    "type": "comment",
    "name": "Create MIDDLE-MAN connectivity",
    "info": "",
    "comments": "",
    "x": 6495.566665649414,
    "y": 2389.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "8252fd61.bfc208",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6925.566665649414,
    "y": 2586.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "1d8604a2.381ee3",
    "type": "save",
    "name": "get middle-man connectivity from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $prop.connectivity-middle-man-uuid\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"middle-man-conn\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 6516.566665649414,
    "y": 2633.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "68a11957.d1e54",
        "98ce32f4.8ab98",
        "ceda9f28.da773"
      ]
    ]
  },
  {
    "id": "68a11957.d1e54",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6763.566665649414,
    "y": 2587.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "8252fd61.bfc208"
      ]
    ]
  },
  {
    "id": "98ce32f4.8ab98",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6764.057632446289,
    "y": 2632.8597869873047,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "9afbaf66.fb0d68"
      ]
    ]
  },
  {
    "id": "ceda9f28.da773",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6761.566665649414,
    "y": 2676.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3e284ec9.e9b522"
      ]
    ]
  },
  {
    "id": "9afbaf66.fb0d68",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 6926.629043579102,
    "y": 2633.145523071289,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3e284ec9.e9b522",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 6930.566665649414,
    "y": 2677.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "f109d109.e8eb",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6570.566665649414,
    "y": 2949.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "4c9e5bd3.54a49c",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6573.566665649414,
    "y": 2994.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "e177a7a3.e48c7",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6565.566665649414,
    "y": 2748.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "6fa889cc.c9cce",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6567.566665649414,
    "y": 2795.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "5dea74d5.1b4aa4",
    "type": "comment",
    "name": "The following two will be done in F1",
    "info": "",
    "comments": "",
    "x": 6486.566665649414,
    "y": 2902.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3dd8554.be5c5aa",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4486.566909790039,
    "y": 5295.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "318b9beb.21378c",
    "type": "switchNode",
    "name": "switch no-pce-call",
    "xml": "<switch test='`$no-pce-call`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3751.566665649414,
    "y": 5114.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "37cde52f.e57ab2",
        "655366f1.7fdc7"
      ]
    ]
  },
  {
    "id": "655366f1.7fdc7",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3923.566665649414,
    "y": 5111.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "828433f7.b11a2"
      ]
    ]
  },
  {
    "id": "37cde52f.e57ab2",
    "type": "outcomeFalse",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3875.566665649414,
    "y": 5958.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e6235853.96452"
      ]
    ]
  },
  {
    "id": "4ddc3818.58ee88",
    "type": "comment",
    "name": "1 --> PCE is needed",
    "info": "",
    "comments": "",
    "x": 3936.566665649414,
    "y": 5081.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "bc0b6e25.72063",
    "type": "comment",
    "name": "2 --> no need to call PCE",
    "info": "",
    "comments": "",
    "x": 3946.566665649414,
    "y": 5916.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "5946c797.be74d",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6572.566665649414,
    "y": 3128.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "828433f7.b11a2",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4099.566665649414,
    "y": 5113.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "ec3ed36f.33f8e",
        "2da9765.20a818a",
        "583fc579.afbe3c",
        "92f3ada6.6626b",
        "d0f2c5e0.41cd1",
        "80308a85.281f5",
        "3dd8554.be5c5aa",
        "b727caf7.37ccd",
        "9d76b5ce.608a08"
      ]
    ]
  },
  {
    "id": "730f8b58.f71bb4",
    "type": "comment",
    "name": "Use the middle-man-conn.eth-srv-name for the LEAF connectivity's eth srv name",
    "info": "",
    "comments": "",
    "x": 5543.566421508789,
    "y": 5038.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "ec3ed36f.33f8e",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4345.566909790039,
    "y": 5794.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "a66844b6.e099c",
    "type": "save",
    "name": "save connectivityB relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6579.566665649414,
    "y": 2044.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "723517cc.862aa8",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid=tmp.ROOT.uni-p-interface-long",
    "xml": "<set>\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />\n",
    "comments": "",
    "x": 6629.566665649414,
    "y": 1747.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "72cc1cfb.a77694",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6576.566665649414,
    "y": 1335.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "1e88893b.a079df",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6524.566665649414,
    "y": 1383.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "f9c59fe9.ee503",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6652.566665649414,
    "y": 1430.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "5271815d.5f082",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 6489.566665649414,
    "y": 1293.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "4573e73f.58afa8",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />",
    "comments": "",
    "outputs": 1,
    "x": 6486.566665649414,
    "y": 1521.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "c53261d3.0987a8",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6579.566665649414,
    "y": 1574.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "61b6e37e.ff4414",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 6470.566665649414,
    "y": 1477.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b4d51e76.274848",
    "type": "comment",
    "name": "Create ROOT UNI",
    "info": "",
    "comments": "",
    "x": 6476.566665649414,
    "y": 1927.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "92f3ada6.6626b",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4412.566421508789,
    "y": 5046.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "cb8799d5.d6fa78",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4396.566421508789,
    "y": 5002.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "baf89c3.a308c6",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 5143.566421508789,
    "y": 5033.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "6ac119cc.845568",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 5230.566421508789,
    "y": 5075.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "be6577a4.990a1",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$middle-man-conn.etht-svc-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 5178.566421508789,
    "y": 5123.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "ed1c0a9d.7a148",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5306.566421508789,
    "y": 5170.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "80308a85.281f5",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4474.566909790039,
    "y": 5337.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "43c35fa0.488f88",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4457.566909790039,
    "y": 5399.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "2da9765.20a818a",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4568.566909790039,
    "y": 5441.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "f1717ef6.023738",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5025.566421508789,
    "y": 5612.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "99843e38.83dd4",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4335.566421508789,
    "y": 6310.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "3c45c16a.44e536",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4268.566421508789,
    "y": 6264.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "ff6ff2f.c8fff1",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4217.566421508789,
    "y": 6215.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "1431401.84d5c4",
    "type": "save",
    "name": "save the-connectivity relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5000.566665649414,
    "y": 6421.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "583fc579.afbe3c",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4395.566909790039,
    "y": 5498.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "57091b18.0fc4d4",
        "6835f627.925db8"
      ]
    ]
  },
  {
    "id": "57091b18.0fc4d4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4606.566909790039,
    "y": 5498.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "328e270e.4a59d8"
      ]
    ]
  },
  {
    "id": "328e270e.4a59d8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4762.566909790039,
    "y": 5494.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f1717ef6.023738",
        "d4dec9b1.cf9de8",
        "6712b992.157"
      ]
    ]
  },
  {
    "id": "6835f627.925db8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4602.566909790039,
    "y": 5546.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "bc00cffe.21aeb8"
      ]
    ]
  },
  {
    "id": "bc00cffe.21aeb8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 4750.566909790039,
    "y": 5541.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "684d6198.d250c8",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5267.566421508789,
    "y": 5241.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "ab78fc6f.8a0998",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2434.566665649414,
    "y": 200.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "1e0dcc9a.c7d15b",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 2368.566665649414,
    "y": 236.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "7f3a574e.dafd48",
    "type": "comment",
    "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
    "info": "",
    "comments": "",
    "x": 2553.566665649414,
    "y": 163.28575134277344,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "131a46fd.415b69",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 4302.566421508789,
    "y": 6376.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "bd42462a.156a88",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4435.566421508789,
    "y": 6424.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "28f03df7.2bcada",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4254.566421508789,
    "y": 6482.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "81c1148f.4cc3d8",
        "1bb40996.4838a6"
      ]
    ]
  },
  {
    "id": "81c1148f.4cc3d8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4447.566421508789,
    "y": 6483.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5632e5bc.008fd4"
      ]
    ]
  },
  {
    "id": "5632e5bc.008fd4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Connectivity should have been created' />\n",
    "comments": "",
    "x": 4603.566421508789,
    "y": 6480.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "1bb40996.4838a6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4451.566421508789,
    "y": 6527.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "2400d348.1454e4"
      ]
    ]
  },
  {
    "id": "2400d348.1454e4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4590.566421508789,
    "y": 6522.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "1431401.84d5c4",
        "cfbbd347.67bf98",
        "4f0e8fb5.8e798",
        "e1e51f2c.3838b",
        "38f3723d.fc373e",
        "556b17f.21493e8",
        "72f64404.57e414",
        "4c65c6ba.14ece",
        "72bff017.143e6",
        "debab96e.421598",
        "e11abdc.71e19c",
        "6a0cb0e4.5bec78",
        "811fcd41.48413"
      ]
    ]
  },
  {
    "id": "72f64404.57e414",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4787.566421508789,
    "y": 7201.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f17dbf11.a99f78",
        "840879a8.da7ac",
        "ff33cdc7.aad138"
      ]
    ]
  },
  {
    "id": "f17dbf11.a99f78",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4982.566635131836,
    "y": 7177.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "9d7f152f.0d13"
      ]
    ]
  },
  {
    "id": "840879a8.da7ac",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4975.057601928711,
    "y": 7213.859756469727,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "722c6254.b53dd4"
      ]
    ]
  },
  {
    "id": "ff33cdc7.aad138",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4972.566635131836,
    "y": 7257.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "2dfdab6e.e9f304"
      ]
    ]
  },
  {
    "id": "9d7f152f.0d13",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5154.566635131836,
    "y": 7175.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f4de49b1.9e78c8"
      ]
    ]
  },
  {
    "id": "722c6254.b53dd4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5137.629013061523,
    "y": 7214.145492553711,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "2dfdab6e.e9f304",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5139.566635131836,
    "y": 7256.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "f4de49b1.9e78c8",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5395.566421508789,
    "y": 7209.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c3d85a4.1f615a8"
      ]
    ]
  },
  {
    "id": "c3d85a4.1f615a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5632.566421508789,
    "y": 7205.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f610bb15.d46c3"
      ]
    ]
  },
  {
    "id": "3165802b.467878",
    "type": "switchNode",
    "name": "switch vpnuuid is for this slice",
    "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5899.566421508789,
    "y": 7171.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fa2a5991.1b9ca",
        "bf56d405.cdd208"
      ]
    ]
  },
  {
    "id": "fa2a5991.1b9ca",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6080.566421508789,
    "y": 7197.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f610bb15.d46c3"
      ]
    ]
  },
  {
    "id": "bf56d405.cdd208",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6079.566421508789,
    "y": 7150.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "f610bb15.d46c3",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4596.566635131836,
    "y": 7345.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c29275cf.22abd8"
      ]
    ]
  },
  {
    "id": "424309da.5dae7",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 5672.566421508789,
    "y": 7377.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "37faaddd.0a2fe2",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4885.566635131836,
    "y": 7113.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "556b17f.21493e8",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4769.566421508789,
    "y": 6997.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "bbd937d0.174fa8",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5114.566421508789,
    "y": 6828.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "74d7f148.c83f28"
      ]
    ]
  },
  {
    "id": "74d7f148.c83f28",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5334.566421508789,
    "y": 6834.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e33037d6.9207c"
      ]
    ]
  },
  {
    "id": "e33037d6.9207c",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5519.566421508789,
    "y": 6833.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "ff68f8c5.ac398"
      ]
    ]
  },
  {
    "id": "ff68f8c5.ac398",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5711.566421508789,
    "y": 6836.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3023756a.3df6f2"
      ]
    ]
  },
  {
    "id": "3023756a.3df6f2",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5920.566421508789,
    "y": 6834.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "4c65c6ba.14ece",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4821.566421508789,
    "y": 6822.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "bbd937d0.174fa8"
      ]
    ]
  },
  {
    "id": "4f0e8fb5.8e798",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4829.566421508789,
    "y": 6715.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "689e25a7.4ec344",
        "fb96069a.99a898",
        "67a95680.dd059"
      ]
    ]
  },
  {
    "id": "689e25a7.4ec344",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5065.566421508789,
    "y": 6698.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "fb96069a.99a898",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5062.566421508789,
    "y": 6739.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "67a95680.dd059",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5076.566421508789,
    "y": 6779.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "e1e51f2c.3838b",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4765.566421508789,
    "y": 6874.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "38f3723d.fc373e",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4773.566421508789,
    "y": 6932.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "cfbbd347.67bf98",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4778.566421508789,
    "y": 6672.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b798d2b8.423e4",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4893.566421508789,
    "y": 6624.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "c29275cf.22abd8",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4886.566635131836,
    "y": 7340.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "48d3293f.1d09c8",
        "2e7c42e6.c2eade"
      ]
    ]
  },
  {
    "id": "48d3293f.1d09c8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5142.566635131836,
    "y": 7312.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fc947668.8a9d8"
      ]
    ]
  },
  {
    "id": "2e7c42e6.c2eade",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5142.566635131836,
    "y": 7361.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "86241828.71762",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5408.566635131836,
    "y": 7353.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "78fc3e29.1eba58",
        "424309da.5dae7",
        "7b230c0f.716d14"
      ]
    ]
  },
  {
    "id": "ec22280e.4e15f",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 5800.566421508789,
    "y": 7431.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "7b230c0f.716d14",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<!--<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $gfp`' />\n\n<parameter name='operational-status' value='Modified' />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5770.566421508789,
    "y": 7491.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "78fc3e29.1eba58",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 5677.566421508789,
    "y": 7319.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "e6235853.96452",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4027.566665649414,
    "y": 5957.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3c45c16a.44e536",
        "131a46fd.415b69",
        "bd42462a.156a88",
        "28f03df7.2bcada",
        "99843e38.83dd4"
      ]
    ]
  },
  {
    "id": "825ad15b.e200f",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4770.566421508789,
    "y": 6772.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "72bff017.143e6",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4893.566665649414,
    "y": 6502.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "218269db.41502e",
    "type": "comment",
    "name": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "info": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "comments": "",
    "x": 5030.566665649414,
    "y": 6452.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "e1cb1e55.b0357",
    "type": "save",
    "name": "save ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6492.566665649414,
    "y": 1986.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "d01f4492.e07e28",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3758.566665649414,
    "y": 1380.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "27d91ce4.eff5e4",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3896.566665649414,
    "y": 1868.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "bcdaf6d5.61613",
    "type": "comment",
    "name": "TEMPORARY REMOVING THE FOLLOWING TWO NODES",
    "info": "",
    "comments": "",
    "x": 6453.566665649414,
    "y": 2698.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "1992e083.76e587",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3745.566665649414,
    "y": 4974.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "aaed5b46.7e8eb",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3878.566665649414,
    "y": 5022.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "d0f2c5e0.41cd1",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4423.566421508789,
    "y": 5102.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c51b9855.45ff88",
        "4079da5.fe1c9a4"
      ]
    ]
  },
  {
    "id": "c51b9855.45ff88",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4616.566421508789,
    "y": 5103.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "69766fb9.fbb74"
      ]
    ]
  },
  {
    "id": "4079da5.fe1c9a4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4620.566421508789,
    "y": 5147.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "1a522b67.5bcd1d"
      ]
    ]
  },
  {
    "id": "1a522b67.5bcd1d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4759.566421508789,
    "y": 5142.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e1cf34bb.9518e",
        "6d11acf9.928044",
        "613e9b77.298d54"
      ]
    ]
  },
  {
    "id": "69766fb9.fbb74",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4759.566421508789,
    "y": 5099.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6ac119cc.845568",
        "be6577a4.990a1",
        "ed1c0a9d.7a148",
        "684d6198.d250c8"
      ]
    ]
  },
  {
    "id": "e1cf34bb.9518e",
    "type": "set",
    "name": "set prop.connectivity-domainA-uuid",
    "xml": "<set>\n<parameter name='uuid.connectivity-domainA-uuid' value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5153.566421508789,
    "y": 5393.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "63360813.209ad8",
    "type": "comment",
    "name": "populate connectivity-A variable in the context map",
    "info": "",
    "comments": "",
    "x": 5160.566421508789,
    "y": 5347.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "debab96e.421598",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4950.566635131836,
    "y": 7062.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "6d11acf9.928044",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5272.566421508789,
    "y": 5446.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "d4dec9b1.cf9de8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5154.566421508789,
    "y": 5664.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "dbce4650.6b5848",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3700.566665649414,
    "y": 4423.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "edcfccb6.0b10e8",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4034.566665649414,
    "y": 4606.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "c7aee100.ec3998",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3646.566665649414,
    "y": 4473.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "1339ee7e.d32932",
        "f08ce63a.aff18",
        "a999ee96.e09558"
      ]
    ]
  },
  {
    "id": "f08ce63a.aff18",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3874.057632446289,
    "y": 4445.859725952148,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "1c6fd05d.948d88"
      ]
    ]
  },
  {
    "id": "a999ee96.e09558",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3869.566665649414,
    "y": 4490.285690307617,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "1f86883b.9ad4a8"
      ]
    ]
  },
  {
    "id": "1c6fd05d.948d88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4036.629165649414,
    "y": 4445.145431518555,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "1f86883b.9ad4a8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4037.566665649414,
    "y": 4490.285690307617,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "1213361d.be12aa",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3822.566665649414,
    "y": 4563.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fbd53f4.dd8234",
        "edcfccb6.0b10e8"
      ]
    ]
  },
  {
    "id": "1339ee7e.d32932",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3653.566665649414,
    "y": 4563.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "1213361d.be12aa"
      ]
    ]
  },
  {
    "id": "fbd53f4.dd8234",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 4011.566665649414,
    "y": 4555.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b969bbc7.e53528",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $middle-man-conn.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$middle-man-conn.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3853.566665649414,
    "y": 4850.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "a6ad0dd0.a6fcc8",
    "type": "comment",
    "name": "We are doing modify but middle man does not exist ==> it is definitely a new logical link",
    "info": "",
    "comments": "",
    "x": 3636.566665649414,
    "y": 2933.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "d73dbef9.62ae5",
    "type": "comment",
    "name": "We are doing modify and middle man exists, check if LEAF UNI already exists in AAI or not. If yes, consider the possible bw change. If it does not, then it is a new link needs to be added",
    "info": "",
    "comments": "",
    "x": 2841.566665649414,
    "y": 4495.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "38b3d969.be8c96",
    "type": "exists",
    "name": "exists LEAF UNI",
    "xml": "<exists plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3264.566665649414,
    "y": 4768.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "4afa5be1.7f901c",
        "3036b28a.042a4e"
      ]
    ]
  },
  {
    "id": "d77e7161.5348c8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3096.566665649414,
    "y": 4771.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "38b3d969.be8c96"
      ]
    ]
  },
  {
    "id": "3036b28a.042a4e",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3427.566665649414,
    "y": 4787.285751342773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "300daee4.3b0352"
      ]
    ]
  },
  {
    "id": "4afa5be1.7f901c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3463.566665649414,
    "y": 3394.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "afe0131e.843c9"
      ]
    ]
  },
  {
    "id": "40724b83.4d51bc",
    "type": "switchNode",
    "name": "switch leafuni.data-source == gfp",
    "xml": "<switch test='`$tmp.aai.leafuni.data-source == $gfp`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3812.566665649414,
    "y": 3236.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "822b2d43.9a91a",
        "33ca94.ea4af56c"
      ]
    ]
  },
  {
    "id": "822b2d43.9a91a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4017.566665649414,
    "y": 3232.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "33ca94.ea4af56c",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4019.566665649414,
    "y": 3282.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "1d0af02e.93b4f"
      ]
    ]
  },
  {
    "id": "1d0af02e.93b4f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4175.566665649414,
    "y": 3288.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "523d0093.735cb",
        "21f4d27b.d11a96",
        "1c5f100e.a5d978",
        "2d4de683.3992d2"
      ]
    ]
  },
  {
    "id": "523d0093.735cb",
    "type": "set",
    "name": "set bwModified",
    "xml": "<set>\n<parameter name='bwModified' value=\"true\" />\n\n\n",
    "comments": "",
    "x": 4401.566909790039,
    "y": 3029.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "fce8efa1.5f12e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4900.566390991211,
    "y": 4326.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e3611e5a.49f6f",
        "7474f571.02042c"
      ]
    ]
  },
  {
    "id": "7474f571.02042c",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
    "comments": "",
    "x": 5102.566146850586,
    "y": 4293.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "c554c9c8.b91c38",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4786.566635131836,
    "y": 4503.28547668457,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "9c21225.8549a6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4783.628768920898,
    "y": 4452.145492553711,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "6669e686.3a92d",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.the-connectivity.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4366.566390991211,
    "y": 4326.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6cdd29ff.2176f"
      ]
    ]
  },
  {
    "id": "6cdd29ff.2176f",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.the-connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4571.566390991211,
    "y": 4326.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "462e489b.1c9ea8"
      ]
    ]
  },
  {
    "id": "462e489b.1c9ea8",
    "type": "outcome",
    "name": "vpn-binding",
    "xml": "<outcome value='vpn-binding'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4737.566390991211,
    "y": 4326.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fce8efa1.5f12e"
      ]
    ]
  },
  {
    "id": "e3611e5a.49f6f",
    "type": "save",
    "name": "get vpn-binding from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.the-connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4409.566390991211,
    "y": 4404.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5af860a5.71ed3",
        "234eb12a.7530fe",
        "358a6c9c.71984c"
      ]
    ]
  },
  {
    "id": "5af860a5.71ed3",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4620.566390991211,
    "y": 4406.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e32197a7.4c81d8"
      ]
    ]
  },
  {
    "id": "234eb12a.7530fe",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4621.057357788086,
    "y": 4451.859756469727,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "9c21225.8549a6"
      ]
    ]
  },
  {
    "id": "358a6c9c.71984c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4618.566390991211,
    "y": 4495.285720825195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c554c9c8.b91c38"
      ]
    ]
  },
  {
    "id": "afe0131e.843c9",
    "type": "save",
    "name": "get LEAF uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.LEAF.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.leafuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3686.566665649414,
    "y": 3079.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "9dbeb0e5.86c59",
        "ca19c457.91ce7",
        "a8db99d3.ea1d58"
      ]
    ]
  },
  {
    "id": "ca19c457.91ce7",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3914.057632446289,
    "y": 3051.8597259521484,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "940a0baf.b50538"
      ]
    ]
  },
  {
    "id": "a8db99d3.ea1d58",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3909.566665649414,
    "y": 3096.285690307617,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "199d9fc8.23d478"
      ]
    ]
  },
  {
    "id": "940a0baf.b50538",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4076.629165649414,
    "y": 3051.1454315185547,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "199d9fc8.23d478",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4077.566665649414,
    "y": 3096.285690307617,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "9dbeb0e5.86c59",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3921.566665649414,
    "y": 3146.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "40724b83.4d51bc"
      ]
    ]
  },
  {
    "id": "667c445f.dc3e5c",
    "type": "comment",
    "name": "Find LEAF and ROOT connectivity, then find vpn-bindings of each. adjust bw",
    "info": "",
    "comments": "",
    "x": 3811.449996948242,
    "y": 3337.1690826416016,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "7651a38e.4e7e44",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3793.166763305664,
    "y": 3898.9691009521484,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "e0666b60.cb174",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3931.166763305664,
    "y": 3956.9691009521484,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "21f4d27b.d11a96",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3509.166763305664,
    "y": 3638.3690032958984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "407839fb.167e2",
        "931a7a68.51c848",
        "f4ea682a.e63f08"
      ]
    ]
  },
  {
    "id": "91a690e7.1a5918",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3750.166763305664,
    "y": 4066.7691497802734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "34fa09a4.b2b1ae",
        "809131d.392dfd"
      ]
    ]
  },
  {
    "id": "34fa09a4.b2b1ae",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3943.166763305664,
    "y": 4067.7691497802734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "b77388f8.551df8"
      ]
    ]
  },
  {
    "id": "809131d.392dfd",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3947.166763305664,
    "y": 4111.769149780273,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "2e72f134.3b345e"
      ]
    ]
  },
  {
    "id": "2e72f134.3b345e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4086.166763305664,
    "y": 4106.769149780273,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6669e686.3a92d"
      ]
    ]
  },
  {
    "id": "b77388f8.551df8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"LEAF CONN DOES NOT EXIST BUT IT SHOULD BE.\" />\n\n",
    "comments": "",
    "x": 4087.166763305664,
    "y": 4063.9691009521484,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "1c5f100e.a5d978",
    "type": "switchNode",
    "name": "switch leafuni.data-source > gfp",
    "xml": "<switch test='`$tmp.aai.leafuni.data-source > $gfp`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4435.283706665039,
    "y": 3285.5691986083984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f17d25a9.fc3a28",
        "d1a832ec.f421b"
      ]
    ]
  },
  {
    "id": "f17d25a9.fc3a28",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4634.450698852539,
    "y": 3352.1690521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3ef002bf.b5c35e"
      ]
    ]
  },
  {
    "id": "d1a832ec.f421b",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4656.450698852539,
    "y": 3197.1690521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "d05f5529.96a4b8"
      ]
    ]
  },
  {
    "id": "2d4de683.3992d2",
    "type": "save",
    "name": "update LEAF UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4434.283706665039,
    "y": 3140.7691497802734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "e42871e4.7e7078",
    "type": "comment",
    "name": "update LEAF UNI with the new bw",
    "info": "",
    "comments": "",
    "x": 4450.450698852539,
    "y": 3094.1690521240234,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "dcbc2987.d3bdd",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5005.216567993164,
    "y": 2549.1690521240234,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "feb1ef44.b73648",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5607.216567993164,
    "y": 2654.1690521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "56698383.1dde24",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4997.216323852539,
    "y": 2595.1690521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "b538dd4e.00fce",
        "3917ea5e.68d896",
        "234d36ee.00b9a2"
      ]
    ]
  },
  {
    "id": "3917ea5e.68d896",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5224.707290649414,
    "y": 2567.7430267333984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "bb66fc72.62525"
      ]
    ]
  },
  {
    "id": "234d36ee.00b9a2",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5220.216323852539,
    "y": 2612.168991088867,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "2eceea5f.8355a6"
      ]
    ]
  },
  {
    "id": "bb66fc72.62525",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5387.278823852539,
    "y": 2567.0287322998047,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "2eceea5f.8355a6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5388.216323852539,
    "y": 2612.168991088867,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b5d59b15.1b765",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5385.216323852539,
    "y": 2662.1690521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "85d5ae48.70e33",
        "feb1ef44.b73648"
      ]
    ]
  },
  {
    "id": "b538dd4e.00fce",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5216.216323852539,
    "y": 2662.1690521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "b5d59b15.1b765"
      ]
    ]
  },
  {
    "id": "85d5ae48.70e33",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $tmp.delta`' />\n",
    "comments": "",
    "x": 5567.217056274414,
    "y": 2604.1690521240234,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3c4fd972.8c727e",
    "type": "comment",
    "name": "bw+ has increased ",
    "info": "",
    "comments": "",
    "x": 4648.449996948242,
    "y": 3159.1690826416016,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "9a2b9c1d.56f0c",
    "type": "comment",
    "name": "bw- has decreased",
    "info": "",
    "comments": "",
    "x": 4647.283706665039,
    "y": 3315.9691009521484,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "22475743.9e3838",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5096.282974243164,
    "y": 2888.9691009521484,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "791cfc48.d2aabc",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5698.282974243164,
    "y": 2993.9691009521484,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "b94b085c.7cb5a8",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5088.282730102539,
    "y": 2934.9691009521484,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "d976d76c.67e958",
        "8e60ee6f.c2d2f",
        "835f78f2.c41258"
      ]
    ]
  },
  {
    "id": "8e60ee6f.c2d2f",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5315.773696899414,
    "y": 2907.5430755615234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "bf2ec467.02c0d8"
      ]
    ]
  },
  {
    "id": "835f78f2.c41258",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5311.282730102539,
    "y": 2951.969039916992,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c322ac12.a985c8"
      ]
    ]
  },
  {
    "id": "bf2ec467.02c0d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5478.345230102539,
    "y": 2906.8287811279297,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "c322ac12.a985c8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5479.282730102539,
    "y": 2951.969039916992,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "380b5701.029218",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5476.282730102539,
    "y": 3001.9691009521484,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "2037a317.5823d4",
        "791cfc48.d2aabc"
      ]
    ]
  },
  {
    "id": "d976d76c.67e958",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5307.282730102539,
    "y": 3001.9691009521484,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "380b5701.029218"
      ]
    ]
  },
  {
    "id": "2037a317.5823d4",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source - $tmp.delta`' />\n",
    "comments": "",
    "x": 5658.283462524414,
    "y": 2943.9691009521484,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "d383ac36.342cc",
    "type": "set",
    "name": "set delta",
    "xml": "<set>\n<parameter name='tmp.delta' value='`$tmp.aai.leafuni.data-source - $gfp`' />\n<parameter name='tmp.realdelta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.isBwIncreased' value='false' />\n\n\n",
    "comments": "",
    "x": 5013.282730102539,
    "y": 2847.9691009521484,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3ef002bf.b5c35e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4806.449996948242,
    "y": 3341.1690826416016,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "d383ac36.342cc",
        "b94b085c.7cb5a8",
        "37f3e792.01b98"
      ]
    ]
  },
  {
    "id": "d05f5529.96a4b8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4827.183364868164,
    "y": 3167.9691009521484,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "30b48cfc.8858f4",
        "56698383.1dde24",
        "9f73e0e4.5bd9a8"
      ]
    ]
  },
  {
    "id": "30b48cfc.8858f4",
    "type": "set",
    "name": "set delta",
    "xml": "<set>\n<parameter name='tmp.delta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.realdelta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.isBwIncreased' value='true' />\n",
    "comments": "",
    "x": 4962.016128540039,
    "y": 2473.7691497802734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "eb34d49c.d22a8",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 4421.333267211914,
    "y": 3240.9691009521484,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "2675acce.b9a12c",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3890.666732788086,
    "y": 4229.769607543945,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "b63f121.ce4247",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3725.666732788086,
    "y": 4301.96955871582,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "8b9ac42e.1e08f",
        "109545ec.57786a"
      ]
    ]
  },
  {
    "id": "8b9ac42e.1e08f",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3936.666732788086,
    "y": 4301.96955871582,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "8bee6e1e.eff33"
      ]
    ]
  },
  {
    "id": "109545ec.57786a",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3932.666732788086,
    "y": 4349.96955871582,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "a4995391.fc5358"
      ]
    ]
  },
  {
    "id": "8bee6e1e.eff33",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4092.666732788086,
    "y": 4297.96955871582,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "b36b53d7.2d66a8"
      ]
    ]
  },
  {
    "id": "a4995391.fc5358",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found but it should have been!' />\n",
    "comments": "",
    "x": 4080.666732788086,
    "y": 4344.96955871582,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "294f0835.1325e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4933.632827758789,
    "y": 4612.168319702148,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "66149bc9.393fc4",
        "ca1fbeb5.c9d45"
      ]
    ]
  },
  {
    "id": "ca1fbeb5.c9d45",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
    "comments": "",
    "x": 5176.633071899414,
    "y": 4581.168319702148,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "fb61c0ac.1edc98",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4793.632827758789,
    "y": 4722.168319702148,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3b9c82f6.e6f406"
      ]
    ]
  },
  {
    "id": "ca5b121a.c4f29",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4781.633071899414,
    "y": 4815.168563842773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "27d3cdcb.a5be82",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4783.695205688477,
    "y": 4770.028091430664,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b36b53d7.2d66a8",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.ROOT.connectivity.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4399.632827758789,
    "y": 4612.168319702148,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "a0726a73.552d38"
      ]
    ]
  },
  {
    "id": "a0726a73.552d38",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.ROOT.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4604.632827758789,
    "y": 4612.168319702148,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c054f471.25372"
      ]
    ]
  },
  {
    "id": "c054f471.25372",
    "type": "outcome",
    "name": "vpn-binding",
    "xml": "<outcome value='vpn-binding'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4770.632827758789,
    "y": 4612.168319702148,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "294f0835.1325e"
      ]
    ]
  },
  {
    "id": "66149bc9.393fc4",
    "type": "save",
    "name": "get vpn-binding from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.ROOT.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4409.632827758789,
    "y": 4722.168319702148,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6e23d592.fd6b7c",
        "ebdcd4d0.c0565",
        "cbc774c8.750668"
      ]
    ]
  },
  {
    "id": "6e23d592.fd6b7c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4620.632827758789,
    "y": 4724.168319702148,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fb61c0ac.1edc98"
      ]
    ]
  },
  {
    "id": "ebdcd4d0.c0565",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4621.123794555664,
    "y": 4769.74235534668,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "27d3cdcb.a5be82"
      ]
    ]
  },
  {
    "id": "cbc774c8.750668",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4618.632827758789,
    "y": 4813.168319702148,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "ca5b121a.c4f29"
      ]
    ]
  },
  {
    "id": "c9811fe.3333a6",
    "type": "comment",
    "name": "Temporary skipping this check - to support multiple instances in one slice",
    "info": "",
    "comments": "",
    "x": 6029.449722290039,
    "y": 7111.369247436523,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "e4958a72.db4418",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 5297.916732788086,
    "y": 4342.568923950195,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "e32197a7.4c81d8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4799.916976928711,
    "y": 4408.568923950195,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "c808b6be.91a2f",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5330.916732788086,
    "y": 4410.568923950195,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "81cfd436.09d848",
        "56387492.e922bc"
      ]
    ]
  },
  {
    "id": "81cfd436.09d848",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5455.916732788086,
    "y": 4308.56867980957,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f77cd261.9bc248"
      ]
    ]
  },
  {
    "id": "56387492.e922bc",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5574.916763305664,
    "y": 4382.568710327148,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "ebf96cf8.b5e018",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4543.599868774414,
    "y": 3954.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "305ba790.74ff78",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4888.599868774414,
    "y": 3816.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "810cd856.9ccc78"
      ]
    ]
  },
  {
    "id": "c7beb2fc.58c5e",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4595.599868774414,
    "y": 3810.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "305ba790.74ff78"
      ]
    ]
  },
  {
    "id": "42cb0058.08b348",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4850.599868774414,
    "y": 3767.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "f96c39ea.1e754",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4539.599868774414,
    "y": 3862.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "9b7536d9.f58d3",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4547.599868774414,
    "y": 3907.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "78f36f08.9d23a",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4544.599868774414,
    "y": 3760.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "810cd856.9ccc78",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4797.599868774414,
    "y": 3884.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "842c0b07.9daf5"
      ]
    ]
  },
  {
    "id": "842c0b07.9daf5",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4982.599868774414,
    "y": 3883.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "effe4e96.61186"
      ]
    ]
  },
  {
    "id": "effe4e96.61186",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5174.599868774414,
    "y": 3886.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e837bc5d.d6f4a"
      ]
    ]
  },
  {
    "id": "e837bc5d.d6f4a",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5346.599868774414,
    "y": 3882.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "5ae03ba5.e05364",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4722.599868774414,
    "y": 3997.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "407839fb.167e2",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4239.599868774414,
    "y": 3782.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "873e71a3.8a59a",
        "2ae96c09.c29bbc",
        "f96c39ea.1e754",
        "9b7536d9.f58d3",
        "ebf96cf8.b5e018",
        "c7beb2fc.58c5e",
        "5ae03ba5.e05364"
      ]
    ]
  },
  {
    "id": "78165047.ec87e8",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4224.599868774414,
    "y": 3716.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "2ae96c09.c29bbc",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4603.599868774414,
    "y": 3703.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "d4c85a8.dd0a8a8",
        "e8890a4e.1d2fd",
        "42cb0058.08b348"
      ]
    ]
  },
  {
    "id": "d4c85a8.dd0a8a8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4839.599868774414,
    "y": 3686.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "e8890a4e.1d2fd",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4836.599868774414,
    "y": 3727.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "873e71a3.8a59a",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4552.599868774414,
    "y": 3660.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "86fc32b9.5b11e8",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 5281.999771118164,
    "y": 4709.685653686523,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3b9c82f6.e6f406",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5070.999771118164,
    "y": 4771.685653686523,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "1361709c.aa1da7"
      ]
    ]
  },
  {
    "id": "1361709c.aa1da7",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.vpn-binding.ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5314.999771118164,
    "y": 4777.685653686523,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "65e42246.3bc70c",
        "4c5853af.96f634"
      ]
    ]
  },
  {
    "id": "65e42246.3bc70c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5545.999771118164,
    "y": 4755.685653686523,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "86c13c.8334e6c8"
      ]
    ]
  },
  {
    "id": "4c5853af.96f634",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5550.999771118164,
    "y": 4822.685653686523,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "c5f7e346.0cad5",
    "type": "switchNode",
    "name": "switch tmp.isBwIncreased",
    "xml": "<switch test=\"`$tmp.isBwIncreased`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5799.883529663086,
    "y": 4320.36799621582,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "36b3fe84.38d7ba",
        "4dc5480c.f82fe8"
      ]
    ]
  },
  {
    "id": "36b3fe84.38d7ba",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5954.883560180664,
    "y": 4248.368270874023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "55b477cf.ef13f8"
      ]
    ]
  },
  {
    "id": "4dc5480c.f82fe8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5955.883560180664,
    "y": 4381.368270874023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c669d5e6.7b56e8"
      ]
    ]
  },
  {
    "id": "55b477cf.ef13f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6099.883560180664,
    "y": 4248.368515014648,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "13bb5bff.e1f664",
        "d1738758.598cd8"
      ]
    ]
  },
  {
    "id": "13bb5bff.e1f664",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.the-vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6392.883560180664,
    "y": 4226.368270874023,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "d1738758.598cd8",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6344.533462524414,
    "y": 4273.685165405273,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "c20dae0a.c8db1",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6417.883529663086,
    "y": 4175.36799621582,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "c669d5e6.7b56e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6111.883560180664,
    "y": 4380.368515014648,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fbd54f6b.bd5de8",
        "4b0d9778.02ef98"
      ]
    ]
  },
  {
    "id": "fbd54f6b.bd5de8",
    "type": "save",
    "name": "update the-vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.the-vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher - $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6404.883560180664,
    "y": 4358.368270874023,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "4b0d9778.02ef98",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6356.533462524414,
    "y": 4405.685165405273,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "2c35c11.f28a13e",
    "type": "comment",
    "name": "decrease the bw of the-vpn-binding and change status to modified",
    "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6428.883560180664,
    "y": 4319.368270874023,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "86c13c.8334e6c8",
    "type": "switchNode",
    "name": "switch tmp.isBwIncreased",
    "xml": "<switch test=\"`$tmp.isBwIncreased`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5751.116470336914,
    "y": 4762.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f84ec623.3e0358",
        "579a6f55.5876b8"
      ]
    ]
  },
  {
    "id": "f84ec623.3e0358",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5946.116470336914,
    "y": 4690.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "7ac296e6.db7d4"
      ]
    ]
  },
  {
    "id": "579a6f55.5876b8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5947.116470336914,
    "y": 4823.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "63acc8c1.d0489"
      ]
    ]
  },
  {
    "id": "7ac296e6.db7d4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6091.116470336914,
    "y": 4690.569198608398,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "7470326b.50fd4c",
        "6067f5da.462f2c"
      ]
    ]
  },
  {
    "id": "7470326b.50fd4c",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.vpn-binding.route-distinguisher + $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6384.116470336914,
    "y": 4668.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "6067f5da.462f2c",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6335.766372680664,
    "y": 4715.885848999023,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "b621fab3.fd22d8",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6408.116470336914,
    "y": 4629.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "63acc8c1.d0489",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6103.116470336914,
    "y": 4822.569198608398,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "ab9c7cb.6ee1c8",
        "478e555b.00c56c"
      ]
    ]
  },
  {
    "id": "ab9c7cb.6ee1c8",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.vpn-binding.route-distinguisher - $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6396.116470336914,
    "y": 4800.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "478e555b.00c56c",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6347.766372680664,
    "y": 4847.885848999023,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "57c5a214.d70e3c",
    "type": "comment",
    "name": "decrease the bw of the-vpn-binding and change status to modified",
    "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6420.116470336914,
    "y": 4761.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b34554cf.aa2d2",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5158.966567993164,
    "y": 5502.769149780273,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "613e9b77.298d54",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5156.749771118164,
    "y": 5542.969345092773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "95d677c9.726458",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5032.000015258789,
    "y": 5727.452255249023,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "6712b992.157",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5029.783218383789,
    "y": 5767.652450561523,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "abfdee17.12df08",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5129.116470336914,
    "y": 6051.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "1b1c3355.4ab2b5",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4956.116470336914,
    "y": 6108.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5c00f9d2.103a1",
        "4db44e39.57056"
      ]
    ]
  },
  {
    "id": "5c00f9d2.103a1",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5167.116470336914,
    "y": 6108.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e62c2a04.834ba8"
      ]
    ]
  },
  {
    "id": "4db44e39.57056",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5163.116470336914,
    "y": 6156.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "2dd9a1ca.3380de"
      ]
    ]
  },
  {
    "id": "e62c2a04.834ba8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5323.116470336914,
    "y": 6104.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "59a4f603.629458",
        "cf3067c2.3ee01",
        "b81f8f7c.c8bbe"
      ]
    ]
  },
  {
    "id": "2dd9a1ca.3380de",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 5311.116470336914,
    "y": 6151.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "4526cd48.9f1514",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5589.000259399414,
    "y": 6204.452255249023,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b81f8f7c.c8bbe",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5586.783462524414,
    "y": 6244.652450561523,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "cf3067c2.3ee01",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5706.116470336914,
    "y": 6156.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "59a4f603.629458",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5577.116470336914,
    "y": 6104.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "67b13c77.507314",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 5018.116470336914,
    "y": 6009.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "e11abdc.71e19c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4665.449478149414,
    "y": 6096.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "abfdee17.12df08",
        "1b1c3355.4ab2b5",
        "b5179b.b5811868",
        "8a0b9185.29b548"
      ]
    ]
  },
  {
    "id": "6a0cb0e4.5bec78",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5009.199966430664,
    "y": 6565.568954467773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "4b79bf18.1b12f8",
    "type": "comment",
    "name": "TODO: BUG -- DONE",
    "info": "momkene connectivity haye vasati ke dummy hastand ham\nvpn-binding dashte bashand ke too in path involve hast pas\nbayad bw aan niz update shavad.",
    "comments": "",
    "x": 3714.567123413086,
    "y": 3842.2857208251953,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "931a7a68.51c848",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4467.100326538086,
    "y": 4116.402420043945,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "810ab4c1.abf7e",
        "4e13a1b8.dde8c",
        "e5e81f70.f40458"
      ]
    ]
  },
  {
    "id": "c0e77edb.5b02c",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4575.100570678711,
    "y": 4072.4024200439453,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "810ab4c1.abf7e",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4672.100326538086,
    "y": 4113.402420043945,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fa4e460e.6cd96"
      ]
    ]
  },
  {
    "id": "4e13a1b8.dde8c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4655.591293334961,
    "y": 4174.976455688477,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "4d1c0281.9a84bc"
      ]
    ]
  },
  {
    "id": "e5e81f70.f40458",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4653.100326538086,
    "y": 4218.402420043945,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5961321d.8806a4"
      ]
    ]
  },
  {
    "id": "fa4e460e.6cd96",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4840.100570678711,
    "y": 4108.402420043945,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "4d09e7f7.7140b8"
      ]
    ]
  },
  {
    "id": "4d1c0281.9a84bc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4818.162704467773,
    "y": 4175.262191772461,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "5961321d.8806a4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4820.100326538086,
    "y": 4217.402420043945,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "4d09e7f7.7140b8",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5078.100570678711,
    "y": 4113.402420043945,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "45b87759.5a906"
      ]
    ]
  },
  {
    "id": "45b87759.5a906",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5312.100326538086,
    "y": 4120.402420043945,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c808b6be.91a2f"
      ]
    ]
  },
  {
    "id": "f4ea682a.e63f08",
    "type": "set",
    "name": "unset tmp.aai.all-vpn-bindings",
    "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value='' />\n",
    "comments": "",
    "x": 4445.800033569336,
    "y": 4042.4024200439453,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "1d230bf5.a23cfc",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='vpnbridx' start='0' end='`$tmp.aai.the-vpn-binding.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5728.949935913086,
    "y": 4130.985427856445,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "516d68ca.7c7f6"
      ]
    ]
  },
  {
    "id": "516d68ca.7c7f6",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5920.949935913086,
    "y": 4119.98567199707,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "39e7022f.c30a2e"
      ]
    ]
  },
  {
    "id": "39e7022f.c30a2e",
    "type": "outcome",
    "name": "connectivity",
    "xml": "<outcome value='connectivity'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6102.949935913086,
    "y": 4098.98567199707,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "455228ea.3ce16"
      ]
    ]
  },
  {
    "id": "455228ea.3ce16",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 6264.949935913086,
    "y": 4087.9856719970703,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "826e861c.8cb3f8",
        "78a2c33b.328edc"
      ]
    ]
  },
  {
    "id": "826e861c.8cb3f8",
    "type": "set",
    "name": "unset tmp.the-connectivity",
    "xml": "<set>\n<parameter name='tmp.the-connectivity.' value='' />\n",
    "comments": "",
    "x": 6461.949935913086,
    "y": 4016.9856719970703,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "d1bcb0d5.b833a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5635.900131225586,
    "y": 4245.985427856445,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c5f7e346.0cad5",
        "1d230bf5.a23cfc",
        "1966547c.c3884c",
        "d31d83e1.8d9b98"
      ]
    ]
  },
  {
    "id": "1966547c.c3884c",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 5767.466537475586,
    "y": 4021.2024688720703,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "d31d83e1.8d9b98",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 5759.466537475586,
    "y": 4070.2024688720703,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "78a2c33b.328edc",
    "type": "set",
    "name": "set tmp.the-connectivity.connectivity-id",
    "xml": "<set>\n<parameter name='tmp.the-connectivity.connectivity-id' value='`$tmp.aai.the-vpn-binding.relationship-list.relationship[$vpnbridx].relationship-data[0].relationship-value`' />\n",
    "comments": "",
    "x": 6467.416732788086,
    "y": 4126.20246887207,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b4318014.e1a038",
    "type": "set",
    "name": "set vpnNameToSearch",
    "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
    "comments": "",
    "x": 5760.683334350586,
    "y": 3844.4024200439453,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "985ed7d4.ec17a",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5914.683334350586,
    "y": 3896.4024200439453,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "f77cd261.9bc248",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5505.683334350586,
    "y": 3963.4024200439453,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "985ed7d4.ec17a",
        "543e7c89.750024",
        "b4318014.e1a038"
      ]
    ]
  },
  {
    "id": "543e7c89.750024",
    "type": "switchNode",
    "name": "switch $foundVpnName",
    "xml": "<switch test=\"`$foundVpnName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5759.683334350586,
    "y": 3951.4024200439453,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "8bf41864.55ad6"
      ]
    ]
  },
  {
    "id": "8bf41864.55ad6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5938.683334350586,
    "y": 3950.4024200439453,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "d1bcb0d5.b833a"
      ]
    ]
  },
  {
    "id": "fc947668.8a9d8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4636.683334350586,
    "y": 7468.402420043945,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "9818a5dd.1c569",
        "2b482f66.6e7e5",
        "43c9acaa.ef761c"
      ]
    ]
  },
  {
    "id": "43c9acaa.ef761c",
    "type": "set",
    "name": "set vpnNameToSearch",
    "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
    "comments": "",
    "x": 4859.683334350586,
    "y": 7412.402420043945,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "9818a5dd.1c569",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5038.683334350586,
    "y": 7455.402420043945,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "2b482f66.6e7e5",
    "type": "switchNode",
    "name": "switch $foundVpnName",
    "xml": "<switch test=\"`$foundVpnName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4883.683334350586,
    "y": 7510.402420043945,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e0a7a605.9205d8"
      ]
    ]
  },
  {
    "id": "e0a7a605.9205d8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5062.683334350586,
    "y": 7509.402420043945,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "86241828.71762"
      ]
    ]
  },
  {
    "id": "811fcd41.48413",
    "type": "set",
    "name": "unset tmp.aai.all-vpn-bindings",
    "xml": "<set>\n<parameter name='tmp.aai.all-vpn-bindings.' value='' />\n",
    "comments": "",
    "x": 4793.683334350586,
    "y": 7148.402420043945,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "9cc0dadb.189ef",
    "type": "set",
    "name": "unset secondary related variables",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n<parameter name='network-route-three' value=\"\" />\n<parameter name='tmp.aai.network-route-three.' value=\"\" />\n<parameter name='tmp.aai.network-route-C.' value=\"\" />\n",
    "comments": "",
    "x": 3359.2999420166016,
    "y": 542.8524017333984,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "79c99b01.4060a4",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4134.399429321289,
    "y": 603.8524017333984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "4bbb66bd.93eca"
      ]
    ]
  },
  {
    "id": "4bbb66bd.93eca",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4303.399429321289,
    "y": 600.8524017333984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "506bfd50.24ebdc",
        "e2033e30.afcd1"
      ]
    ]
  },
  {
    "id": "506bfd50.24ebdc",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4527.399429321289,
    "y": 633.8524017333984,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "e2033e30.afcd1",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4473.399429321289,
    "y": 673.8524017333984,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "fb5e94da.526bd",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4099.399917602539,
    "y": 803.0524139404297,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "2507bbe.52fb3c4"
      ]
    ]
  },
  {
    "id": "2507bbe.52fb3c4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4264.399185180664,
    "y": 808.0524139404297,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "93fd5f76.e542d8",
        "736d4375.48de7c"
      ]
    ]
  },
  {
    "id": "93fd5f76.e542d8",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4511.399429321289,
    "y": 890.0524139404297,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "736d4375.48de7c",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4457.399429321289,
    "y": 930.0524139404297,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "e9c6a99.90dcbd8",
    "type": "save",
    "name": "get network-route-three from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-three'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-three\">",
    "comments": "",
    "outputs": 1,
    "x": 3342.399917602539,
    "y": 942.0524139404297,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "554ea6a8.9888f",
        "3be7a41.d9c04dc",
        "65e70654.5cdcc8"
      ]
    ]
  },
  {
    "id": "554ea6a8.9888f",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3584.399917602539,
    "y": 935.0524139404297,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "3be7a41.d9c04dc",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3579.908981323242,
    "y": 977.4784698486328,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "65e70654.5cdcc8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3583.908950805664,
    "y": 1025.4784393310547,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "834a986c.4e7048"
      ]
    ]
  },
  {
    "id": "834a986c.4e7048",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3745.399917602539,
    "y": 966.0524139404297,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f5a8155b.186e1"
      ]
    ]
  },
  {
    "id": "f5a8155b.186e1",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-three.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3916.399917602539,
    "y": 966.0525970458984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "49a01940.91879",
        "fb61a82e.a48e6",
        "bf3bb014.cd44d"
      ]
    ]
  },
  {
    "id": "49a01940.91879",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4083.399673461914,
    "y": 876.0525360107422,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "13796778.1bcaa1"
      ]
    ]
  },
  {
    "id": "fb61a82e.a48e6",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4085.399673461914,
    "y": 930.0525360107422,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "dfa37602.2a592"
      ]
    ]
  },
  {
    "id": "13796778.1bcaa1",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4211.399673461914,
    "y": 876.0525360107422,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c61c7290.5d0048",
        "9330928e.78e4a8"
      ]
    ]
  },
  {
    "id": "dfa37602.2a592",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4214.399673461914,
    "y": 929.0525360107422,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "b3bef05d.261898",
        "4885c383.a5f124"
      ]
    ]
  },
  {
    "id": "9330928e.78e4a8",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4457.399429321289,
    "y": 1015.0525360107422,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b3bef05d.261898",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4474.399429321289,
    "y": 1057.0525360107422,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "4885c383.a5f124",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4459.399429321289,
    "y": 1095.0525360107422,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "c61c7290.5d0048",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4471.399429321289,
    "y": 975.0525360107422,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3c2a776f.fcd778",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4636.399429321289,
    "y": 991.0525360107422,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "bf3bb014.cd44d",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4024.399917602539,
    "y": 1021.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "4b490f7e.359388"
      ]
    ]
  },
  {
    "id": "4b490f7e.359388",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4198.399917602539,
    "y": 1016.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "14062c05.c0d224",
        "a29138d9.9f86a8"
      ]
    ]
  },
  {
    "id": "a29138d9.9f86a8",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4431.399429321289,
    "y": 1185.0522918701172,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "14062c05.c0d224",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4485.399429321289,
    "y": 1145.0522918701172,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "de8acab8.aa46c",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4599.399429321289,
    "y": 1170.0522918701172,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "fd1dbeb5.643a7",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3600.066665649414,
    "y": 2250.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c723b1c5.5db71",
        "935dac93.06ba68"
      ]
    ]
  },
  {
    "id": "bc4d7dbf.afb29",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3427.400161743164,
    "y": 2251.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "fd1dbeb5.643a7"
      ]
    ]
  },
  {
    "id": "e6ea02c1.c3c8b",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3436.891128540039,
    "y": 2293.8597869873047,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "4af5d292.f0e44c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3425.400161743164,
    "y": 2340.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "c723b1c5.5db71",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3886.400161743164,
    "y": 2254.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e1f3a987.bed2a8",
        "cd75a949.bbc878"
      ]
    ]
  },
  {
    "id": "cd75a949.bbc878",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4109.400161743164,
    "y": 2209.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c2b43a53.588108"
      ]
    ]
  },
  {
    "id": "e1f3a987.bed2a8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4111.400161743164,
    "y": 2273.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "183afe84.247bf9"
      ]
    ]
  },
  {
    "id": "25934f35.38edd",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-C.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-C.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3199.400161743164,
    "y": 2286.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "bc4d7dbf.afb29",
        "e6ea02c1.c3c8b",
        "4af5d292.f0e44c"
      ]
    ]
  },
  {
    "id": "e6f36ca.9e7909",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3160.400161743164,
    "y": 2230.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "4a92500a.dfe688",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3219.400161743164,
    "y": 2026.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f38e9f0f.aeb28",
        "c00bcf8d.007da8"
      ]
    ]
  },
  {
    "id": "c00bcf8d.007da8",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3442.400161743164,
    "y": 2012.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "8c221cd.f6641e"
      ]
    ]
  },
  {
    "id": "f38e9f0f.aeb28",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3444.400161743164,
    "y": 2045.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "8c221cd.f6641e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3590.400161743164,
    "y": 2005.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "7fdb72b7.69f4e4",
        "70d5d0aa.d1559"
      ]
    ]
  },
  {
    "id": "7fdb72b7.69f4e4",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainC.pnf-name' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3784.400161743164,
    "y": 2008.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "935dac93.06ba68",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3837.400131225586,
    "y": 2377.2857208251953,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "bb098115.17482"
      ]
    ]
  },
  {
    "id": "bb098115.17482",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4043.400131225586,
    "y": 2377.2857208251953,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "eb63cf64.6fcac8"
      ]
    ]
  },
  {
    "id": "70d5d0aa.d1559",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\"\n        pfx='tmp.aai.destination-secondary-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3806.400161743164,
    "y": 2076.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "4772aa88.8815f4",
        "2f88517d.a786fe",
        "a51a10da.7f1bc8"
      ]
    ]
  },
  {
    "id": "4772aa88.8815f4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4001.9002838134766,
    "y": 2028.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "bea56767.e75718"
      ]
    ]
  },
  {
    "id": "2f88517d.a786fe",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3993.9002838134766,
    "y": 2083.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3775c8.545c2238"
      ]
    ]
  },
  {
    "id": "a51a10da.7f1bc8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3998.9002838134766,
    "y": 2140.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "afbc062e.468e"
      ]
    ]
  },
  {
    "id": "afbc062e.468e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4150.900283813477,
    "y": 2141.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "bea56767.e75718",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4146.282608032227,
    "y": 2025.9415435791016,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "80389683.dd0d1"
      ]
    ]
  },
  {
    "id": "77f3463a.2b447",
    "type": "set",
    "name": "set SECONDARY-ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-long' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-short' value=\"`$tmp.dst-secondary.pnf-name`\" />\n\n<parameter name='tmp.SECONDARY-ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-C.next-hop + '-' + $tmp.aai.network-route-C.logical-interface-id`\" />\n<parameter name='tmp.SECONDARY-ROOT.uni-tp-id' value=\"`$tmp.dst-secondary.ltpId`\" />\n",
    "comments": "",
    "x": 3222.066665649414,
    "y": 2365.2857513427734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "75f1943f.b94b8c",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3897.066635131836,
    "y": 2329.2857208251953,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "183afe84.247bf9",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4270.400161743164,
    "y": 2292.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "c2b43a53.588108",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4274.400161743164,
    "y": 2206.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "62ce6308.22a894",
        "3f411974.bc06ee"
      ]
    ]
  },
  {
    "id": "eb63cf64.6fcac8",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4260.685775756836,
    "y": 2376.1074981689453,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "68a23803.3ba65"
      ]
    ]
  },
  {
    "id": "3775c8.545c2238",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4161.900283813477,
    "y": 2086.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "62ce6308.22a894",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.ltpId' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n",
    "comments": "",
    "x": 4444.400161743164,
    "y": 2167.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3f411974.bc06ee",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.pnf-name' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n",
    "comments": "",
    "x": 4445.400161743164,
    "y": 2272.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "6316b810.f1aee8",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4440.400161743164,
    "y": 2221.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "68a23803.3ba65",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4467.517318725586,
    "y": 2365.626174926758,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "affb5b24.b6cca8",
        "4a56bfa4.77eef",
        "2836e90b.67e1be"
      ]
    ]
  },
  {
    "id": "affb5b24.b6cca8",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination-secondary.ttp-id' value=\"`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4682.517318725586,
    "y": 2327.626174926758,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "4a56bfa4.77eef",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination-secondary.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-secondary-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4679.517318725586,
    "y": 2366.626174926758,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "963f6cd5.b5f28"
      ]
    ]
  },
  {
    "id": "2836e90b.67e1be",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4635.017318725586,
    "y": 2408.626174926758,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "2cd6b3b7.1e0b44",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4728.400161743164,
    "y": 2044.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "af33acb2.7cd3c"
      ]
    ]
  },
  {
    "id": "80389683.dd0d1",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4330.400161743164,
    "y": 2040.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6ef2734a.a2ab44"
      ]
    ]
  },
  {
    "id": "6ef2734a.a2ab44",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4525.400161743164,
    "y": 2040.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "2cd6b3b7.1e0b44",
        "a9acfdfb.534e9"
      ]
    ]
  },
  {
    "id": "a9acfdfb.534e9",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4730.400161743164,
    "y": 2117.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3ae5ea54.6e54a6"
      ]
    ]
  },
  {
    "id": "963f6cd5.b5f28",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4860.017318725586,
    "y": 2365.626174926758,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e92c023f.140be8"
      ]
    ]
  },
  {
    "id": "e92c023f.140be8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5018.017318725586,
    "y": 2365.626174926758,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "b67ecfac.fb906"
      ]
    ]
  },
  {
    "id": "b67ecfac.fb906",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination-secondary.tunnel-tp-id' value=\"`$tmp.aai.destination-secondary-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5225.017318725586,
    "y": 2365.626174926758,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "af33acb2.7cd3c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4905.400161743164,
    "y": 2036.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "21a9bcb5.4aa85c",
        "c4167bd6.551f58"
      ]
    ]
  },
  {
    "id": "c4167bd6.551f58",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainC.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainC.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5113.400161743164,
    "y": 2043.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "8ae061a9.0d8d7",
        "7fc92de3.a78f3c",
        "220302ba.be0f7e"
      ]
    ]
  },
  {
    "id": "3ae5ea54.6e54a6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4907.400161743164,
    "y": 2109.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "256fff1.5dd26"
      ]
    ]
  },
  {
    "id": "21a9bcb5.4aa85c",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainC id",
    "xml": "<set>\n<parameter name='tmp.domainC.esr-thirdparty-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5143.400161743164,
    "y": 1991.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "256fff1.5dd26",
    "type": "set",
    "name": "set domainC ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainC.eth-network-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5142.400161743164,
    "y": 2233.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "8ae061a9.0d8d7",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5323.400161743164,
    "y": 2034.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "9c166c79.f96aa8"
      ]
    ]
  },
  {
    "id": "7fc92de3.a78f3c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5315.400161743164,
    "y": 2089.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f289682c.7a8f28"
      ]
    ]
  },
  {
    "id": "220302ba.be0f7e",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5320.400161743164,
    "y": 2146.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "700667b1.628978"
      ]
    ]
  },
  {
    "id": "700667b1.628978",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5472.400161743164,
    "y": 2147.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "f289682c.7a8f28",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5483.400161743164,
    "y": 2092.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "9c166c79.f96aa8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5467.782485961914,
    "y": 2031.9415435791016,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "cc2fb272.8011c"
      ]
    ]
  },
  {
    "id": "cc2fb272.8011c",
    "type": "set",
    "name": "set controller domainC data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5682.400161743164,
    "y": 2028.285873413086,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "6be3a1db.a02ba8",
    "type": "comment",
    "name": "Create SECONDARY-ROOT UNI",
    "info": "",
    "comments": "",
    "x": 5711.900161743164,
    "y": 2151.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "c91e3a5e.c6511",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5684.016860961914,
    "y": 2200.1690521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "8269b8aa.68a3b"
      ]
    ]
  },
  {
    "id": "8269b8aa.68a3b",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5875.016860961914,
    "y": 2204.1690521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "8a849c85.456228"
      ]
    ]
  },
  {
    "id": "8a849c85.456228",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6002.016860961914,
    "y": 2203.1690521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5d5d757b.d8e52c",
        "a560a2f0.7f8828"
      ]
    ]
  },
  {
    "id": "a560a2f0.7f8828",
    "type": "save",
    "name": "save SECONDARY-ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.SECONDARY-ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='type' value='secondary-root' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6224.016860961914,
    "y": 2092.1690521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "5d5d757b.d8e52c",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6219.900161743164,
    "y": 2151.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "51d8510d.dcc058",
        "79e7df30.7f8138"
      ]
    ]
  },
  {
    "id": "51d8510d.dcc058",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6429.900161743164,
    "y": 2128.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "b3aa8483.9bdec"
      ]
    ]
  },
  {
    "id": "b3aa8483.9bdec",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6555.900161743164,
    "y": 2128.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "50564c45.182124"
      ]
    ]
  },
  {
    "id": "eaeffe9b.6e1578",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6560.900161743164,
    "y": 2177.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5ed2f363.68208c",
        "ad95a077.a4baa8",
        "283ec58.ad1d4ba",
        "ccdfc934.795ad8"
      ]
    ]
  },
  {
    "id": "79e7df30.7f8138",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6434.900161743164,
    "y": 2177.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "eaeffe9b.6e1578"
      ]
    ]
  },
  {
    "id": "50564c45.182124",
    "type": "save",
    "name": "save connectivityB relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6883.900161743164,
    "y": 2125.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "5ed2f363.68208c",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainC",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainC-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6836.900161743164,
    "y": 2216.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "ad95a077.a4baa8",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='secondary-root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6784.900161743164,
    "y": 2258.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "283ec58.ad1d4ba",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6913.900161743164,
    "y": 2300.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "192e2e3d.32bda2",
    "type": "comment",
    "name": "Create SECONDARY-ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 6799.900161743164,
    "y": 2173.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "ccdfc934.795ad8",
    "type": "save",
    "name": "save connectivityC relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6891.900161743164,
    "y": 2348.0523529052734,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "162cf27b.802c36",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6455.900161743164,
    "y": 2844.8524017333984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "b694c10f.97993"
      ]
    ]
  },
  {
    "id": "b694c10f.97993",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6647.900161743164,
    "y": 2839.8524017333984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5f9a1d2b.927d2c"
      ]
    ]
  },
  {
    "id": "5f9a1d2b.927d2c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6776.900161743164,
    "y": 2839.8524017333984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "2368c13a.48b366"
      ]
    ]
  },
  {
    "id": "2368c13a.48b366",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 7108.900161743164,
    "y": 2837.8524017333984,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "5a5c80f6.6318b8",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6040.900161743164,
    "y": 3056.8524017333984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c941a0b5.409658"
      ]
    ]
  },
  {
    "id": "c941a0b5.409658",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6220.900161743164,
    "y": 3055.8524017333984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e3672c28.52e2c"
      ]
    ]
  },
  {
    "id": "e3672c28.52e2c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6349.900161743164,
    "y": 3055.8524017333984,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "78510894.01d168"
      ]
    ]
  },
  {
    "id": "78510894.01d168",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6567.783462524414,
    "y": 3054.7357025146484,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "7f59bec0.83cea8"
      ]
    ]
  },
  {
    "id": "7f59bec0.83cea8",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6782.783462524414,
    "y": 3054.7357025146484,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "bd133df9.897ce8"
      ]
    ]
  },
  {
    "id": "bd133df9.897ce8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 6914.783462524414,
    "y": 3054.7357025146484,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "5e2761fa.54e448"
      ]
    ]
  },
  {
    "id": "5e2761fa.54e448",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 7278.900161743164,
    "y": 3053.8524017333984,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "9f73e0e4.5bd9a8",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5011.399185180664,
    "y": 2704.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3e0d324f.39029e"
      ]
    ]
  },
  {
    "id": "3e0d324f.39029e",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5191.399185180664,
    "y": 2703.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "2acf977a.ab8578"
      ]
    ]
  },
  {
    "id": "2acf977a.ab8578",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5320.399185180664,
    "y": 2703.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "94be4455.78db28"
      ]
    ]
  },
  {
    "id": "83e5c66f.42223",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5056.399185180664,
    "y": 2762.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "94be4455.78db28",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5086.399185180664,
    "y": 2795.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e215df2d.d0af58",
        "4a2bacef.6efd64",
        "5a609856.e771c"
      ]
    ]
  },
  {
    "id": "4a2bacef.6efd64",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5267.890151977539,
    "y": 2772.9932708740234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "8ad6e6e5.397628"
      ]
    ]
  },
  {
    "id": "5a609856.e771c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5256.399185180664,
    "y": 2812.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e676f166.0b9d7"
      ]
    ]
  },
  {
    "id": "8ad6e6e5.397628",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5427.461685180664,
    "y": 2771.2789154052734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "e676f166.0b9d7",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5417.399185180664,
    "y": 2813.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "e215df2d.d0af58",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5261.399185180664,
    "y": 2849.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c842a7cf.827af"
      ]
    ]
  },
  {
    "id": "c842a7cf.827af",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5419.399185180664,
    "y": 2857.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "c480afef.6388b8",
        "1261035b.27b08d"
      ]
    ]
  },
  {
    "id": "c480afef.6388b8",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 5580.399185180664,
    "y": 2789.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "1261035b.27b08d",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5622.399185180664,
    "y": 2861.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "37f3e792.01b98",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5098.399185180664,
    "y": 3062.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f8a6bae7.e43428"
      ]
    ]
  },
  {
    "id": "f8a6bae7.e43428",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5278.399185180664,
    "y": 3061.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "ebf9b17f.54212"
      ]
    ]
  },
  {
    "id": "ebf9b17f.54212",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5407.399185180664,
    "y": 3061.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "7632b9a7.046188"
      ]
    ]
  },
  {
    "id": "a3e62ac2.613cb8",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5143.399185180664,
    "y": 3120.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "7632b9a7.046188",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5173.399185180664,
    "y": 3153.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "aa9ebc0c.15b74",
        "34556fac.9550b8",
        "8f78cb97.869598"
      ]
    ]
  },
  {
    "id": "34556fac.9550b8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5354.890151977539,
    "y": 3130.9932708740234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "81becde2.b2238"
      ]
    ]
  },
  {
    "id": "8f78cb97.869598",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5343.399185180664,
    "y": 3170.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "1e2ed61a.69a74a"
      ]
    ]
  },
  {
    "id": "81becde2.b2238",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5514.461685180664,
    "y": 3129.2789154052734,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "1e2ed61a.69a74a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5504.399185180664,
    "y": 3171.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "aa9ebc0c.15b74",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5348.399185180664,
    "y": 3207.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "a5e9d80e.798b58"
      ]
    ]
  },
  {
    "id": "a5e9d80e.798b58",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5506.399185180664,
    "y": 3215.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f6d35763.a75968",
        "4c3e3376.aec354"
      ]
    ]
  },
  {
    "id": "f6d35763.a75968",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 5667.399185180664,
    "y": 3147.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "4c3e3376.aec354",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5709.399185180664,
    "y": 3219.4190521240234,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "54f08fa.71777f",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3580.066665649414,
    "y": 4644.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "f59f8a4e.ee5228"
      ]
    ]
  },
  {
    "id": "f59f8a4e.ee5228",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3760.066665649414,
    "y": 4643.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6dfc836d.44e47c"
      ]
    ]
  },
  {
    "id": "6dfc836d.44e47c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3889.066665649414,
    "y": 4643.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "84addd88.4602"
      ]
    ]
  },
  {
    "id": "8e14b0c3.7931e8",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3625.066665649414,
    "y": 4702.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "84addd88.4602",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3655.066665649414,
    "y": 4735.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "15dd9d01.198e13",
        "99598358.2ea178",
        "d0193baa.0b0ba8"
      ]
    ]
  },
  {
    "id": "99598358.2ea178",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3836.557632446289,
    "y": 4712.993270874023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "4987dd19.729c2c"
      ]
    ]
  },
  {
    "id": "d0193baa.0b0ba8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3825.066665649414,
    "y": 4752.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "4de60967.145d88"
      ]
    ]
  },
  {
    "id": "4987dd19.729c2c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3996.129165649414,
    "y": 4711.278915405273,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "4de60967.145d88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3986.066665649414,
    "y": 4753.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "15dd9d01.198e13",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3830.066665649414,
    "y": 4789.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "7135b7da.689598"
      ]
    ]
  },
  {
    "id": "7135b7da.689598",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3988.066665649414,
    "y": 4797.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "db75607b.34ec4",
        "368002b6.6c78de"
      ]
    ]
  },
  {
    "id": "db75607b.34ec4",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 4149.066665649414,
    "y": 4729.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "368002b6.6c78de",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4191.066665649414,
    "y": 4801.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "9630090a.96156",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4271.733657836914,
    "y": 5599.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b727caf7.37ccd",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4426.733657836914,
    "y": 5640.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "9d76b5ce.608a08",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4242.733657836914,
    "y": 5698.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "6c688e63.a06ce",
        "a407cbc4.6c0c8"
      ]
    ]
  },
  {
    "id": "6c688e63.a06ce",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4478.733657836914,
    "y": 5682.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "65c46de7.6d4354"
      ]
    ]
  },
  {
    "id": "a407cbc4.6c0c8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4477.733657836914,
    "y": 5730.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "65c46de7.6d4354",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4622.733657836914,
    "y": 5684.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "a13d8ec4.2f4c18",
        "3e4d3365.1256fc",
        "d2dac5fa.54c798"
      ]
    ]
  },
  {
    "id": "a13d8ec4.2f4c18",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5034.733901977539,
    "y": 5819.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "3e4d3365.1256fc",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5155.733901977539,
    "y": 5866.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "37767c8a.d0935c",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5038.617691040039,
    "y": 5910.302352905273,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "d2dac5fa.54c798",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5037.400894165039,
    "y": 5951.502548217773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "d0ed0f43.9ac178",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4898.066665649414,
    "y": 6205.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "b5179b.b5811868",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5064.066665649414,
    "y": 6244.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "8a0b9185.29b548",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4903.066665649414,
    "y": 6294.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "bb485e07.c51f48",
        "f5c035ca.78263"
      ]
    ]
  },
  {
    "id": "bb485e07.c51f48",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5136.066665649414,
    "y": 6288.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "3bbd1b25.f0fda4"
      ]
    ]
  },
  {
    "id": "f5c035ca.78263",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5137.066665649414,
    "y": 6338.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "3bbd1b25.f0fda4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5283.066665649414,
    "y": 6296.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "e99c4f39.622098",
        "424cf9d2.7701e8",
        "2a6230e2.ffd498"
      ]
    ]
  },
  {
    "id": "e99c4f39.622098",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5530.066665649414,
    "y": 6284.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "424cf9d2.7701e8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5651.066665649414,
    "y": 6331.419052124023,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "b810129e.2691f8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5533.950454711914,
    "y": 6375.302352905273,
    "z": "2414cd0b.85dac2",
    "wires": []
  },
  {
    "id": "2a6230e2.ffd498",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5532.733657836914,
    "y": 6416.502548217773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "a198d826.7242b",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3660.066665649414,
    "y": 6189.852645874023,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "c717d5f4.4fddc8",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2997.316665649414,
    "y": 6188.102645874023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "420e4506.143cfc",
        "beb3687c.2f0758"
      ]
    ]
  },
  {
    "id": "420e4506.143cfc",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3188.316665649414,
    "y": 6192.102645874023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "75f23708.93f968"
      ]
    ]
  },
  {
    "id": "75f23708.93f968",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3315.316665649414,
    "y": 6191.102645874023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "a198d826.7242b"
      ]
    ]
  },
  {
    "id": "beb3687c.2f0758",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3184.316665649414,
    "y": 6262.102645874023,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "befff12f.84551"
      ]
    ]
  },
  {
    "id": "41f38680.b5ae6",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate-w-Protection",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate-w-Protection' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3733.816665649414,
    "y": 6261.186141967773,
    "z": "2414cd0b.85dac2",
    "wires": [
      []
    ]
  },
  {
    "id": "befff12f.84551",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3317.816665649414,
    "y": 6264.186141967773,
    "z": "2414cd0b.85dac2",
    "wires": [
      [
        "41f38680.b5ae6"
      ]
    ]
  }
]