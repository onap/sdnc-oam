[
  {
    "id": "e621eef4.cd8d48",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 146,
    "y": 100,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "5137b88e.d87af"
      ]
    ]
  },
  {
    "id": "5137b88e.d87af",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 430.2856903076172,
    "y": 161.23810863494873,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ce96326b.b535f8"
      ]
    ]
  },
  {
    "id": "ce96326b.b535f8",
    "type": "method",
    "name": "method cll-vnf-topology-operation-cll-modify",
    "xml": "<method rpc='cll-vnf-topology-operation-cll-modify' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 436.42860412597656,
    "y": 246.00003051757812,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "b7cce22e.b85eb"
      ]
    ]
  },
  {
    "id": "b7cce22e.b85eb",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 786,
    "y": 305,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "42227f1d.ff6a08",
        "719e39ea.7d4d2",
        "ad74749f.3bbda"
      ]
    ]
  },
  {
    "id": "42227f1d.ff6a08",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1087.33349609375,
    "y": 575.9302978515625,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "719e39ea.7d4d2",
    "type": "save",
    "name": "get service-instance from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
    "comments": "",
    "outputs": 1,
    "x": 1108.761962890625,
    "y": 278.33331298828125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c1550efc.b74cd",
        "59d9b8f3.c672f8",
        "1a9d72a7.1ac33d"
      ]
    ]
  },
  {
    "id": "c1550efc.b74cd",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1333.761962890625,
    "y": 136.33331298828125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c25ad576.a55988"
      ]
    ]
  },
  {
    "id": "59d9b8f3.c672f8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1329.2529296875,
    "y": 205.9073486328125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c5236a8e.8fcb78"
      ]
    ]
  },
  {
    "id": "1a9d72a7.1ac33d",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1317.761962890625,
    "y": 252.33331298828125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "cebf9d48.2d23"
      ]
    ]
  },
  {
    "id": "742cc4f4.befaf4",
    "type": "comment",
    "name": "new for TransportSlicing",
    "info": "",
    "comments": "",
    "x": 1087.761962890625,
    "y": 166.33331298828125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "ad74749f.3bbda",
    "type": "execute",
    "name": "execute properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
    "comments": "",
    "outputs": 1,
    "x": 1075.761962890625,
    "y": 218.33331298828125,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "c25ad576.a55988",
    "type": "switchNode",
    "name": "switch allotted-resources_length != 0",
    "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1574,
    "y": 133,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "4f4f6457.1e4aa4",
        "5da7fc70.28ac2c"
      ]
    ]
  },
  {
    "id": "c5236a8e.8fcb78",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1484.0623779296875,
    "y": 208.85977172851562,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "cebf9d48.2d23",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1488,
    "y": 253,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "4f4f6457.1e4aa4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1779,
    "y": 170,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "25469631.b624fa"
      ]
    ]
  },
  {
    "id": "5da7fc70.28ac2c",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1789,
    "y": 97,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "25469631.b624fa",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1772,
    "y": 245,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a3f9c066.8f6f98",
        "a0f7473f.d23fe8",
        "dc772464.b9eb38",
        "796beb97.0c4de4",
        "52d5e6df.7a6948"
      ]
    ]
  },
  {
    "id": "3f08ab8e.dc612c",
    "type": "save",
    "name": "get allotted-resource from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2258,
    "y": 296,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "7db27beb.b640fc",
        "37eea1d.ba0815e",
        "9aa976b3.179a58"
      ]
    ]
  },
  {
    "id": "7db27beb.b640fc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2474,
    "y": 363,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "5eea79ce.34755"
      ]
    ]
  },
  {
    "id": "37eea1d.ba0815e",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2474.490966796875,
    "y": 262.573974609375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "2ecbbf0c.1ea018"
      ]
    ]
  },
  {
    "id": "9aa976b3.179a58",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2470,
    "y": 312,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a265198.4abd2e8"
      ]
    ]
  },
  {
    "id": "a3f9c066.8f6f98",
    "type": "for",
    "name": "for each allotted-resource",
    "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1975,
    "y": 277,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "31eb076e.43ecb",
        "3f08ab8e.dc612c",
        "2c19139d.1b72fc",
        "24e6a4ae.ee277c"
      ]
    ]
  },
  {
    "id": "31eb076e.43ecb",
    "type": "set",
    "name": "set the current allotted-resource-id",
    "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
    "comments": "",
    "x": 2255,
    "y": 215,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "796beb97.0c4de4",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
    "comments": "",
    "x": 1949,
    "y": 227,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "a0f7473f.d23fe8",
    "type": "get-resource",
    "name": "get-resource pnfs-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/pnfs?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
    "comments": "",
    "outputs": 1,
    "x": 1992,
    "y": 86,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "dc772464.b9eb38",
    "type": "get-resource",
    "name": "get-resource logical-links",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
    "comments": "",
    "outputs": 1,
    "x": 2004,
    "y": 127,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "5c36a24a.1b53d4",
    "type": "comment",
    "name": "The following two nodes are for PCE",
    "info": "",
    "comments": "",
    "x": 2029,
    "y": 39,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "45b74940.f8db1",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
    "comments": "",
    "x": 1949,
    "y": 173,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "2ecbbf0c.1ea018",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 2653,
    "y": 265,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "a265198.4abd2e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 2652.9375,
    "y": 314.1402587890625,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "5eea79ce.34755",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2654.9375,
    "y": 365.1402587890625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c6a94a58.c561c"
      ]
    ]
  },
  {
    "id": "c6a94a58.c561c",
    "type": "save",
    "name": "get allotted-resource relationship from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2947.9375,
    "y": 312.1402587890625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ec6a2655.48d45",
        "712e1966.36d6e8",
        "3dacde72.866102"
      ]
    ]
  },
  {
    "id": "712e1966.36d6e8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3221.428466796875,
    "y": 204.7142333984375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "df2b1006.9eb7f8"
      ]
    ]
  },
  {
    "id": "df2b1006.9eb7f8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3399,
    "y": 205,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "3dacde72.866102",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3216.9375,
    "y": 254.1402587890625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "5f8f39bd.4229a"
      ]
    ]
  },
  {
    "id": "5f8f39bd.4229a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3398.9375,
    "y": 254.1402587890625,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "ec6a2655.48d45",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3220.9375,
    "y": 305.1402587890625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "6e0b9d94.87db34"
      ]
    ]
  },
  {
    "id": "6e0b9d94.87db34",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3400.9375,
    "y": 305.1402587890625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "2c8651cc.72086e"
      ]
    ]
  },
  {
    "id": "2c8651cc.72086e",
    "type": "switchNode",
    "name": "switch allotted-resource.relationship-list not empty",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2967,
    "y": 440,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "870fb1ac.7a3748",
        "89946234.838048"
      ]
    ]
  },
  {
    "id": "89946234.838048",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3277,
    "y": 447,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "870fb1ac.7a3748",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3276,
    "y": 501,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "cd3a7965.655da8"
      ]
    ]
  },
  {
    "id": "df2cd421.7d5bf",
    "type": "outcome",
    "name": "network-policy",
    "xml": "<outcome value='network-policy'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4021,
    "y": 455,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "bcfd0609.c91ee"
      ]
    ]
  },
  {
    "id": "bcfd0609.c91ee",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4197.9998779296875,
    "y": 447.9998779296875,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "12f46999.b2c5d6",
        "f8cd059e.d4c72"
      ]
    ]
  },
  {
    "id": "cd3a7965.655da8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3440,
    "y": 427,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "bd1bee0.0c5829",
        "10113dad.89c1ca"
      ]
    ]
  },
  {
    "id": "bd1bee0.0c5829",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3721,
    "y": 383,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "b08f5d28.99f6d8"
      ]
    ]
  },
  {
    "id": "b08f5d28.99f6d8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3983,
    "y": 383,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "df2cd421.7d5bf"
      ]
    ]
  },
  {
    "id": "12f46999.b2c5d6",
    "type": "set",
    "name": "set the 1st network-policy-id",
    "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 4440.9998779296875,
    "y": 404.9998779296875,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "f8cd059e.d4c72",
    "type": "save",
    "name": "get network-policy from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
    "comments": "",
    "outputs": 1,
    "x": 4429.9998779296875,
    "y": 459.9998779296875,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "15139b9.c06bf64",
        "b4015405.9769",
        "29def152.0b9dae"
      ]
    ]
  },
  {
    "id": "29def152.0b9dae",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4683,
    "y": 346,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "220ef3fd.c7b134"
      ]
    ]
  },
  {
    "id": "220ef3fd.c7b134",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4831.571533203125,
    "y": 346.2857666015625,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "d3449945.7a9e68",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4830.509033203125,
    "y": 390.426025390625,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "b4015405.9769",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4671.509033203125,
    "y": 390.426025390625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "d3449945.7a9e68"
      ]
    ]
  },
  {
    "id": "15139b9.c06bf64",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4678.509033203125,
    "y": 469.426025390625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "5056b056.87e29"
      ]
    ]
  },
  {
    "id": "5056b056.87e29",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4817.509033203125,
    "y": 469.426025390625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "b058eb58.7f931",
        "9244d790.6180a"
      ]
    ]
  },
  {
    "id": "b058eb58.7f931",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5023,
    "y": 467,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "9244d790.6180a",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5022,
    "y": 513,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "10113dad.89c1ca",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3538,
    "y": 499,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "d6e4de4f.158168"
      ]
    ]
  },
  {
    "id": "d6e4de4f.158168",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3818,
    "y": 499,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "aee1198a.c056f"
      ]
    ]
  },
  {
    "id": "aee1198a.c056f",
    "type": "outcome",
    "name": "logical-link",
    "xml": "<outcome value='logical-link'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2231.0001220703125,
    "y": 752.0001220703125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "e0dc30a1.49a6b"
      ]
    ]
  },
  {
    "id": "e0dc30a1.49a6b",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2408,
    "y": 745,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ede7fb40.692cf",
        "de035f6e.5999f"
      ]
    ]
  },
  {
    "id": "ede7fb40.692cf",
    "type": "set",
    "name": "set the current logical-link-name",
    "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 2651,
    "y": 702,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "de035f6e.5999f",
    "type": "save",
    "name": "get logical-link from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
    "comments": "",
    "outputs": 1,
    "x": 2640,
    "y": 757,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "91b15c70.189168",
        "f983d1cd.751748",
        "e2731f07.c2a9e8"
      ]
    ]
  },
  {
    "id": "91b15c70.189168",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2931.490966796875,
    "y": 735.573974609375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "9ed0117f.e4187"
      ]
    ]
  },
  {
    "id": "f983d1cd.751748",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2920,
    "y": 780,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c1f1f22f.ac3cb"
      ]
    ]
  },
  {
    "id": "9ed0117f.e4187",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3080.0625,
    "y": 735.8597412109375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "c1f1f22f.ac3cb",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3079,
    "y": 780,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "e2731f07.c2a9e8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2927,
    "y": 859,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "7a39b25.5549b4c"
      ]
    ]
  },
  {
    "id": "7a39b25.5549b4c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3066,
    "y": 859,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "f25cc9ec.b05168",
        "a634b8ac.ea4e88",
        "1bb6ef49.bdd341",
        "a7071b50.c7486",
        "e80ddce6.4971e",
        "32d67853.ec65d",
        "a4a1e109.208d68",
        "8e7b1d45.48bf2",
        "c8257b0d.cf8598",
        "e4d1916e.82a0f",
        "e42c5746.0b4288",
        "e73ce695.7bd48",
        "9b16af83.d76cd8",
        "93a3aa4f.0f4e8"
      ]
    ]
  },
  {
    "id": "ae0c8d20.5892e8",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3380,
    "y": 665,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "f25cc9ec.b05168",
    "type": "execute",
    "name": "execute UUID generator for otn-tunnel-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3361,
    "y": 715,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "93a3aa4f.0f4e8",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 3318,
    "y": 760,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "a634b8ac.ea4e88",
    "type": "set",
    "name": "set network-route-one",
    "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
    "comments": "",
    "x": 3293,
    "y": 823,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "1bb6ef49.bdd341",
    "type": "set",
    "name": "set network-route-two",
    "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
    "comments": "",
    "x": 3294,
    "y": 878,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "a7071b50.c7486",
    "type": "save",
    "name": "get network-route-one from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
    "comments": "",
    "outputs": 1,
    "x": 3310,
    "y": 926,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "6881c546.e37ddc",
        "f8f6c69f.ac74d8",
        "d522feff.e8a5a"
      ]
    ]
  },
  {
    "id": "e80ddce6.4971e",
    "type": "save",
    "name": "get network-route-two from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
    "comments": "",
    "outputs": 1,
    "x": 3299,
    "y": 1012.9998779296875,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "9806969b.fc3ae",
        "65b603dc.721f64",
        "fd2316c5.747f38"
      ]
    ]
  },
  {
    "id": "6881c546.e37ddc",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3511,
    "y": 810,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "8a0e99df.d3a74"
      ]
    ]
  },
  {
    "id": "f8f6c69f.ac74d8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3506.509033203125,
    "y": 859.426025390625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "34078213.5a26be"
      ]
    ]
  },
  {
    "id": "d522feff.e8a5a",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3510.509033203125,
    "y": 912.426025390625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "f11965b9.9944c8"
      ]
    ]
  },
  {
    "id": "8a0e99df.d3a74",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3659.571533203125,
    "y": 809.2857666015625,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "34078213.5a26be",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3649.509033203125,
    "y": 859.426025390625,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "9806969b.fc3ae",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3522,
    "y": 982.9998779296875,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a6e046a6.757e98"
      ]
    ]
  },
  {
    "id": "65b603dc.721f64",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3517.509033203125,
    "y": 1032.4259033203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "45e0f2da.8f444c"
      ]
    ]
  },
  {
    "id": "fd2316c5.747f38",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3518.509033203125,
    "y": 1085.4259033203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "415f5150.f3e08"
      ]
    ]
  },
  {
    "id": "a6e046a6.757e98",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3670.571533203125,
    "y": 982.28564453125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "45e0f2da.8f444c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3660.509033203125,
    "y": 1032.4259033203125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "f11965b9.9944c8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3672,
    "y": 912,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "f51320c4.bcfce"
      ]
    ]
  },
  {
    "id": "415f5150.f3e08",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3672,
    "y": 1084.9998779296875,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "1cfd4758.0338b1"
      ]
    ]
  },
  {
    "id": "f51320c4.bcfce",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3844,
    "y": 912,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "89f8c0d6.b51fa8",
        "aead6b27.4c3a7"
      ]
    ]
  },
  {
    "id": "1cfd4758.0338b1",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3845,
    "y": 1085,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "5b9b8e64.ed3588",
        "226da409.894754"
      ]
    ]
  },
  {
    "id": "89f8c0d6.b51fa8",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4020,
    "y": 891,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "6cfb261d.1543a8"
      ]
    ]
  },
  {
    "id": "aead6b27.4c3a7",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4022,
    "y": 945,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "5cbc637f.f1f25c"
      ]
    ]
  },
  {
    "id": "5b9b8e64.ed3588",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4021,
    "y": 1055,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "1f3d6111.fb3d4f"
      ]
    ]
  },
  {
    "id": "226da409.894754",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4023,
    "y": 1109,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "27ea8b3.eb35a74"
      ]
    ]
  },
  {
    "id": "cf6b5beb.abd2a",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4330,
    "y": 843,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "ab5b8db7.2c0b2",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4323,
    "y": 941,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "d1673a3d.bf2ad",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4323,
    "y": 1028,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "6f54a53.db0de5c",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4327,
    "y": 1121,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "1814f478.bad66c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3554,
    "y": 1530,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "d9e53024.28f5e8"
      ]
    ]
  },
  {
    "id": "f9e21eb6.e051f",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3563.490966796875,
    "y": 1572.5740356445312,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "cd9fd29c.16f54"
      ]
    ]
  },
  {
    "id": "13935c82.38c04b",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3552,
    "y": 1619,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "fd85e1a6.4ce26"
      ]
    ]
  },
  {
    "id": "f8a45af2.8fc23",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3254,
    "y": 1492,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "a4a1e109.208d68",
    "type": "save",
    "name": "get p-interface-src from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3297,
    "y": 1557,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "1814f478.bad66c",
        "f9e21eb6.e051f",
        "13935c82.38c04b"
      ]
    ]
  },
  {
    "id": "32d67853.ec65d",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3298,
    "y": 1227,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "7cda231b.f03dc4",
        "15924723.6e7491"
      ]
    ]
  },
  {
    "id": "15924723.6e7491",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3521,
    "y": 1213,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "5b420eac.7f2e3"
      ]
    ]
  },
  {
    "id": "7cda231b.f03dc4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3523,
    "y": 1246,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "59d39de3.e2d86c"
      ]
    ]
  },
  {
    "id": "d9e53024.28f5e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3726.66650390625,
    "y": 1529,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "dfaba2c2.eca4e8",
        "4097fc0c.2ebcd4"
      ]
    ]
  },
  {
    "id": "cd9fd29c.16f54",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3717.0623779296875,
    "y": 1575.8597717285156,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "fd85e1a6.4ce26",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3721,
    "y": 1620,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "dfaba2c2.eca4e8",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3991,
    "y": 1513,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "8d48769f.5119e8",
        "8debbded.83326"
      ]
    ]
  },
  {
    "id": "8debbded.83326",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4214,
    "y": 1468,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "2541c31e.77739c"
      ]
    ]
  },
  {
    "id": "8d48769f.5119e8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4216,
    "y": 1532,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "2ddc4c0.3ed3fb4"
      ]
    ]
  },
  {
    "id": "2ddc4c0.3ed3fb4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4378,
    "y": 1528,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "2541c31e.77739c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4379,
    "y": 1465,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "147c7198.960c76",
        "5b133092.209f98"
      ]
    ]
  },
  {
    "id": "810155a4.74088",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3993,
    "y": 1672,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "c595cb5f.3ebc78",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4038,
    "y": 1582,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "d29a1dc3.4eeb5",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4121,
    "y": 1720,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "59d39de3.e2d86c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3666,
    "y": 1243,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "5b420eac.7f2e3",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3669,
    "y": 1206,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c6570a48.d5e8a",
        "fa28539a.6f35e"
      ]
    ]
  },
  {
    "id": "c6570a48.d5e8a",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3843,
    "y": 1162,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "4097fc0c.2ebcd4",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3945,
    "y": 1797,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "55bdaff8.d6fa7"
      ]
    ]
  },
  {
    "id": "55bdaff8.d6fa7",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4151,
    "y": 1797,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "13e441a4.daf476"
      ]
    ]
  },
  {
    "id": "13e441a4.daf476",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4366.28564453125,
    "y": 1796.82177734375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "9c1550de.a16d68"
      ]
    ]
  },
  {
    "id": "fa28539a.6f35e",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3858,
    "y": 1273,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "b1379be2.7c731",
        "98821e3.6cffa6",
        "93a11cc9.4e6df"
      ]
    ]
  },
  {
    "id": "b1379be2.7c731",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4053.5001220703125,
    "y": 1225,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "49daba06.206634"
      ]
    ]
  },
  {
    "id": "98821e3.6cffa6",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4045.5001220703125,
    "y": 1280,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "78abfa9e.41d134"
      ]
    ]
  },
  {
    "id": "93a11cc9.4e6df",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4050.5001220703125,
    "y": 1337,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ae2448ff.86872"
      ]
    ]
  },
  {
    "id": "ae2448ff.86872",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4202.5001220703125,
    "y": 1338,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "78abfa9e.41d134",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4213.5001220703125,
    "y": 1283,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "49daba06.206634",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4197.8824462890625,
    "y": 1222.6556701660156,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a244814e.1fdb1"
      ]
    ]
  },
  {
    "id": "a244814e.1fdb1",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4382,
    "y": 1237,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "6f66ca5.eff0fb4"
      ]
    ]
  },
  {
    "id": "5b133092.209f98",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
    "comments": "",
    "x": 4549,
    "y": 1423,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "147c7198.960c76",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
    "comments": "",
    "x": 4550,
    "y": 1531,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "83128f31.28dd3",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4551,
    "y": 1480,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "9c1550de.a16d68",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4573.1171875,
    "y": 1797.34033203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "3dd5d699.d7912a",
        "31d244a7.769454",
        "41228511.9d3d04"
      ]
    ]
  },
  {
    "id": "3dd5d699.d7912a",
    "type": "set",
    "name": "set source ttp-id",
    "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4788.1171875,
    "y": 1759.34033203125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "31d244a7.769454",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4785.1171875,
    "y": 1798.34033203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "3f687ffd.7ac738"
      ]
    ]
  },
  {
    "id": "41228511.9d3d04",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4740.6171875,
    "y": 1840.34033203125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "3f687ffd.7ac738",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4965.6171875,
    "y": 1797.34033203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "b1d8da7c.fb9068"
      ]
    ]
  },
  {
    "id": "73e89a58.b8a2f4",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4780,
    "y": 1241,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "35399481.176a44"
      ]
    ]
  },
  {
    "id": "35399481.176a44",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4957,
    "y": 1233,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "689257af.1e32e8",
        "cffc6960.3515f8"
      ]
    ]
  },
  {
    "id": "6f66ca5.eff0fb4",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4577,
    "y": 1237,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "73e89a58.b8a2f4",
        "8f00bdd8.7bfea8"
      ]
    ]
  },
  {
    "id": "8f00bdd8.7bfea8",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4783,
    "y": 1315,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "54b58f35.b7982"
      ]
    ]
  },
  {
    "id": "54b58f35.b7982",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4960,
    "y": 1307,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "bd4488b3.a3f2f8"
      ]
    ]
  },
  {
    "id": "b1d8da7c.fb9068",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5123.6171875,
    "y": 1797.34033203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "45f3cc43.b8716c"
      ]
    ]
  },
  {
    "id": "45f3cc43.b8716c",
    "type": "set",
    "name": "set source tunnel tp ip",
    "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5330.6171875,
    "y": 1797.34033203125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "cffc6960.3515f8",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5165,
    "y": 1240,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "4c1fabd5.3f0e34",
        "7bde9a25.02996c",
        "405a47f8.a7ca18"
      ]
    ]
  },
  {
    "id": "689257af.1e32e8",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainA id",
    "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5195,
    "y": 1188,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "4c1fabd5.3f0e34",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5375,
    "y": 1231,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "d4e512d1.26f248"
      ]
    ]
  },
  {
    "id": "7bde9a25.02996c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5367,
    "y": 1286,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ecb49f32.439908"
      ]
    ]
  },
  {
    "id": "405a47f8.a7ca18",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5372,
    "y": 1343,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "3104200a.eb8e7"
      ]
    ]
  },
  {
    "id": "3104200a.eb8e7",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5524,
    "y": 1344,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "ecb49f32.439908",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5535,
    "y": 1289,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "d4e512d1.26f248",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5519.38232421875,
    "y": 1228.6556701660156,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "7caf8ab2.26a4a4"
      ]
    ]
  },
  {
    "id": "bd4488b3.a3f2f8",
    "type": "set",
    "name": "set domainA ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5195,
    "y": 1431,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "7caf8ab2.26a4a4",
    "type": "set",
    "name": "set controller domainA data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5734,
    "y": 1225,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "65bbdfd5.3dc13",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4318,
    "y": 879,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "c089b95e.30fd28",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4309,
    "y": 977,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "6cfb261d.1543a8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4143,
    "y": 885,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "cf6b5beb.abd2a",
        "65bbdfd5.3dc13"
      ]
    ]
  },
  {
    "id": "5cbc637f.f1f25c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4149,
    "y": 949,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ab5b8db7.2c0b2",
        "c089b95e.30fd28"
      ]
    ]
  },
  {
    "id": "1f3d6111.fb3d4f",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4149,
    "y": 1055,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "d1673a3d.bf2ad",
        "4aa0587f.0931c"
      ]
    ]
  },
  {
    "id": "27ea8b3.eb35a74",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4152,
    "y": 1108,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "6f54a53.db0de5c",
        "21e23a32.325fde"
      ]
    ]
  },
  {
    "id": "4aa0587f.0931c",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4309,
    "y": 1068,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "21e23a32.325fde",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4312,
    "y": 1159,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "15f88e7e.38b0fa",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3684,
    "y": 2369,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "f975e555.4f0a2",
        "a7320af4.ed9d8"
      ]
    ]
  },
  {
    "id": "8b26e8b4.e3dba",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3511.33349609375,
    "y": 2370,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "15f88e7e.38b0fa"
      ]
    ]
  },
  {
    "id": "365caf9e.ae04d8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3520.824462890625,
    "y": 2412.5740356445312,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "10960619.7120e2"
      ]
    ]
  },
  {
    "id": "f6d27283.d43c08",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3509.33349609375,
    "y": 2459,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "f60d033c.caa1a"
      ]
    ]
  },
  {
    "id": "10960619.7120e2",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3674.3958740234375,
    "y": 2415.8597717285156,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "f60d033c.caa1a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3678.33349609375,
    "y": 2460,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "f975e555.4f0a2",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3970.33349609375,
    "y": 2373.0001220703125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "fb51a1db.aad5c",
        "a0fb7141.f8212"
      ]
    ]
  },
  {
    "id": "a0fb7141.f8212",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4193.33349609375,
    "y": 2328.0001220703125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "db58e724.c5bd7"
      ]
    ]
  },
  {
    "id": "fb51a1db.aad5c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4195.33349609375,
    "y": 2392.0001220703125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c50c321c.8bd388"
      ]
    ]
  },
  {
    "id": "c50c321c.8bd388",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4354.33349609375,
    "y": 2411.0001220703125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "db58e724.c5bd7",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4358.33349609375,
    "y": 2325.0001220703125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "b0670b4d.55e7b8",
        "6c9ffe8c.9af1e8"
      ]
    ]
  },
  {
    "id": "299e7ae7.513c9e",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3972.33349609375,
    "y": 2532.0001220703125,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "cbea16a7.2be638",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4017.33349609375,
    "y": 2442.0001220703125,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "3d100357.15f07c",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4099.33349609375,
    "y": 2597.0001220703125,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "c8257b0d.cf8598",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3283.33349609375,
    "y": 2405,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "8b26e8b4.e3dba",
        "365caf9e.ae04d8",
        "f6d27283.d43c08"
      ]
    ]
  },
  {
    "id": "e000777e.059758",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3244.33349609375,
    "y": 2349,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "8e7b1d45.48bf2",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3301.33349609375,
    "y": 2067.9998779296875,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "3e16baed.e61f9e",
        "718c7d79.85c5bc"
      ]
    ]
  },
  {
    "id": "718c7d79.85c5bc",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3524.33349609375,
    "y": 2053.9998779296875,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c56ba64b.9ec5c"
      ]
    ]
  },
  {
    "id": "3e16baed.e61f9e",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3526.33349609375,
    "y": 2086.9998779296875,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "8748d48a.d5e098"
      ]
    ]
  },
  {
    "id": "8748d48a.d5e098",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3669.33349609375,
    "y": 2083.9998779296875,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "c56ba64b.9ec5c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3672.33349609375,
    "y": 2046.9998779296875,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "883d33bf.bf29f",
        "dcb0b05e.f2669"
      ]
    ]
  },
  {
    "id": "883d33bf.bf29f",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3866.33349609375,
    "y": 2050,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "a7320af4.ed9d8",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3929.33349609375,
    "y": 2682,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "fd321c11.d40e7"
      ]
    ]
  },
  {
    "id": "fd321c11.d40e7",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4135.33349609375,
    "y": 2682,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "e08d51dc.da4c1"
      ]
    ]
  },
  {
    "id": "e08d51dc.da4c1",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4352.619140625,
    "y": 2680.82177734375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "10f977b0.bb1b3"
      ]
    ]
  },
  {
    "id": "dcb0b05e.f2669",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3888.33349609375,
    "y": 2118,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c9b4249e.0909d8",
        "9e2542d0.859f",
        "4dfd412.b843d4"
      ]
    ]
  },
  {
    "id": "c9b4249e.0909d8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4083.8336181640625,
    "y": 2070,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ade6b82e.1a55d"
      ]
    ]
  },
  {
    "id": "9e2542d0.859f",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4075.8336181640625,
    "y": 2125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "44f6f51.d8f8c8c"
      ]
    ]
  },
  {
    "id": "4dfd412.b843d4",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4080.8336181640625,
    "y": 2182,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "f041c0d3.954d68"
      ]
    ]
  },
  {
    "id": "f041c0d3.954d68",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4232.8336181640625,
    "y": 2183,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "44f6f51.d8f8c8c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4243.8336181640625,
    "y": 2128,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "ade6b82e.1a55d",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4228.2159423828125,
    "y": 2067.6556701660156,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "6075bcd4.2c69ac"
      ]
    ]
  },
  {
    "id": "b0670b4d.55e7b8",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
    "comments": "",
    "x": 4528.33349609375,
    "y": 2286.0001220703125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "6c9ffe8c.9af1e8",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
    "comments": "",
    "x": 4529.33349609375,
    "y": 2391.0001220703125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "f79c8df1.ba3188",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4524.33349609375,
    "y": 2340.0001220703125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "10f977b0.bb1b3",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4559.45068359375,
    "y": 2670.3404541015625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "20309de8.4632aa",
        "f73e5414.3285",
        "d0b059a0.487158"
      ]
    ]
  },
  {
    "id": "20309de8.4632aa",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4774.45068359375,
    "y": 2632.3404541015625,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "f73e5414.3285",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4771.45068359375,
    "y": 2671.3404541015625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "e534043d.5bd38"
      ]
    ]
  },
  {
    "id": "d0b059a0.487158",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4726.95068359375,
    "y": 2713.3404541015625,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "e534043d.5bd38",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4951.95068359375,
    "y": 2670.3404541015625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "e48a79a9.dd196"
      ]
    ]
  },
  {
    "id": "e48a79a9.dd196",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5109.95068359375,
    "y": 2670.3404541015625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "1f6fa1b2.460606"
      ]
    ]
  },
  {
    "id": "1f6fa1b2.460606",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5316.95068359375,
    "y": 2670.3404541015625,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "a30de028.b28d48",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4810.33349609375,
    "y": 2086,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ef5b074c.536d6"
      ]
    ]
  },
  {
    "id": "ef5b074c.536d6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4987.33349609375,
    "y": 2078,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c21d00de.e0733",
        "82588df6.f2c43"
      ]
    ]
  },
  {
    "id": "6075bcd4.2c69ac",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4412.33349609375,
    "y": 2082,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "9110b39.2ad945"
      ]
    ]
  },
  {
    "id": "9110b39.2ad945",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4607.33349609375,
    "y": 2082,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a30de028.b28d48",
        "8b328cb8.458cf8"
      ]
    ]
  },
  {
    "id": "82588df6.f2c43",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5195.33349609375,
    "y": 2085,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "815a30c0.42847",
        "e73296ce.c3274",
        "43d82526.bf146c"
      ]
    ]
  },
  {
    "id": "14ab331b.3a14dd",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4989.33349609375,
    "y": 2151,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "d397e592.0e40b"
      ]
    ]
  },
  {
    "id": "8b328cb8.458cf8",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4812.33349609375,
    "y": 2159,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "14ab331b.3a14dd"
      ]
    ]
  },
  {
    "id": "c21d00de.e0733",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainB id",
    "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5225.33349609375,
    "y": 2033,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "d397e592.0e40b",
    "type": "set",
    "name": "set domainB ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5224.33349609375,
    "y": 2275,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "815a30c0.42847",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5405.33349609375,
    "y": 2076,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "665156df.6f87a"
      ]
    ]
  },
  {
    "id": "e73296ce.c3274",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5397.33349609375,
    "y": 2131,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ae5fbc43.dedc3"
      ]
    ]
  },
  {
    "id": "43d82526.bf146c",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5402.33349609375,
    "y": 2188,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "75c235dd.25a9b4"
      ]
    ]
  },
  {
    "id": "75c235dd.25a9b4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5554.33349609375,
    "y": 2189,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "ae5fbc43.dedc3",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5565.33349609375,
    "y": 2134,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "665156df.6f87a",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5549.7158203125,
    "y": 2073.6556701660156,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "d81c240c.0e54a"
      ]
    ]
  },
  {
    "id": "d81c240c.0e54a",
    "type": "set",
    "name": "set controller domainB data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5764.33349609375,
    "y": 2070,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "e4d1916e.82a0f",
    "type": "set",
    "name": "set LEAF stuff",
    "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
    "comments": "",
    "x": 3263,
    "y": 1680,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "40d6ba08.05b09c",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4485,
    "y": 963,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "229afe55.f96f4a",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4477,
    "y": 1053,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "e42c5746.0b4288",
    "type": "set",
    "name": "set ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
    "comments": "",
    "x": 3244,
    "y": 2536,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "e73ce695.7bd48",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3395,
    "y": 2784,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "9b16af83.d76cd8",
    "type": "switchNode",
    "name": "switch found-middle-man?",
    "xml": "<switch test='`$found-middle-man`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3272,
    "y": 2894,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a884f3f1.0f482",
        "4d74d9a8.bbfb9"
      ]
    ]
  },
  {
    "id": "a884f3f1.0f482",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3456,
    "y": 2873,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "51c791fd.f5a538"
      ]
    ]
  },
  {
    "id": "4d74d9a8.bbfb9",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2992,
    "y": 4459,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "b3f9daed.71701"
      ]
    ]
  },
  {
    "id": "cc64efe3.d91b48",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3503,
    "y": 5044,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "b3fda79b.50166",
        "d6cce90e.618d6",
        "1292663a.8513e2",
        "99c42fc9.238f28",
        "978af086.86b638"
      ]
    ]
  },
  {
    "id": "51c791fd.f5a538",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6575,
    "y": 2903,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "dcfc3248.c259d8",
        "e0075324.e8eb9",
        "e518ac23.9dfc28",
        "537fab21.dec464",
        "c34912bf.eaaae",
        "afe65ba5.55b07",
        "aac07044.b000d8",
        "b8e3ea6a.2b3c98",
        "2ef08f21.6201e",
        "9901809f.3fcb1",
        "fb2dd54d.4da48",
        "2cb954fb.0ad334",
        "328265e5.ceed9a",
        "c5a55a83.29a8d8",
        "9aa98499.f86768",
        "387b0229.0d7006",
        "4295e286.bfc1e4",
        "d084e39e.bba608",
        "a403e16a.cb2408"
      ]
    ]
  },
  {
    "id": "2ef08f21.6201e",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6886,
    "y": 3258,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "dcfc3248.c259d8",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6840,
    "y": 3356,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "e0075324.e8eb9",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6976,
    "y": 3403,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "9cbf56aa.ad5218",
    "type": "comment",
    "name": "Create ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 6807,
    "y": 3207,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "2b713353.70ef7c",
    "type": "comment",
    "name": "create middle man connectivity and ...",
    "info": "1- create middle man connectivity\n2- create relation with all connectivities\n   in the path\n3- put srcTtp (+dstTtp) somewhere in the\n   vpn-binding -> this is for later on to find\n   which OTN tunnel's bandwidth has to be increased.\n5- create UNIs\n4- create relationship to UNIs",
    "comments": "",
    "x": 7333,
    "y": 3698,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "e518ac23.9dfc28",
    "type": "execute",
    "name": "execute UUID generator for connectivity middle-man",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-middle-man-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6897,
    "y": 3737,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "537fab21.dec464",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-middle-man-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-middle-man-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<!--The followings are not needed for the middle-man-connectivity-->\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />-->\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='mdsc' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6845,
    "y": 3788,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "c34912bf.eaaae",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-middle-man-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-middle-man-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6981,
    "y": 3835,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "60b2fbe4.e4d04c",
    "type": "comment",
    "name": "Create MIDDLE-MAN connectivity",
    "info": "",
    "comments": "",
    "x": 6838,
    "y": 3697,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "fcf93995.6af71",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 7268,
    "y": 3894,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "afe65ba5.55b07",
    "type": "save",
    "name": "get middle-man connectivity from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $prop.connectivity-middle-man-uuid\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"middle-man-conn\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 6859,
    "y": 3941,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "68159cb3.0ebba4",
        "c63fd2a4.712768",
        "3a361ef1.e7793a"
      ]
    ]
  },
  {
    "id": "68159cb3.0ebba4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 7106,
    "y": 3895,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "fcf93995.6af71"
      ]
    ]
  },
  {
    "id": "c63fd2a4.712768",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 7106.490966796875,
    "y": 3940.5740356445312,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a1ea132a.743c88"
      ]
    ]
  },
  {
    "id": "3a361ef1.e7793a",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 7104,
    "y": 3984,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "b000dcd9.6a6a6"
      ]
    ]
  },
  {
    "id": "a1ea132a.743c88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 7269.0623779296875,
    "y": 3940.8597717285156,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "b000dcd9.6a6a6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 7273,
    "y": 3985,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "9aa98499.f86768",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6916,
    "y": 4220,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "387b0229.0d7006",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6919,
    "y": 4265,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "d084e39e.bba608",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6908,
    "y": 4056,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "a403e16a.cb2408",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6910,
    "y": 4103,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "344300f.08239",
    "type": "comment",
    "name": "The following two will be done in F1",
    "info": "",
    "comments": "",
    "x": 6832,
    "y": 4173,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "b25b6055.f41fc",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4461.999755859375,
    "y": 5324,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "b3fda79b.50166",
    "type": "switchNode",
    "name": "switch no-pce-call",
    "xml": "<switch test='`$no-pce-call`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3718,
    "y": 5025,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "980c8526.303db",
        "36a09550.068efa"
      ]
    ]
  },
  {
    "id": "36a09550.068efa",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3890,
    "y": 5022,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "de34c1af.7b7ab"
      ]
    ]
  },
  {
    "id": "980c8526.303db",
    "type": "outcomeFalse",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3842,
    "y": 5869,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a5898926.6491f"
      ]
    ]
  },
  {
    "id": "8ada44e5.f9f04",
    "type": "comment",
    "name": "1 --> PCE is needed",
    "info": "",
    "comments": "",
    "x": 3903,
    "y": 4992,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "5e264f22.beeb98",
    "type": "comment",
    "name": "2 --> no need to call PCE",
    "info": "",
    "comments": "",
    "x": 3913,
    "y": 5827,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "aac07044.b000d8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6916,
    "y": 4329,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "de34c1af.7b7ab",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4066,
    "y": 5024,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "8283f1ca.0934e",
        "d88e7d60.d8e85",
        "d37e54c7.dc098",
        "74df2b94.0f2054",
        "e51131c0.7c711",
        "77a4c18.eb27d4",
        "b25b6055.f41fc"
      ]
    ]
  },
  {
    "id": "557f9fe2.05b59",
    "type": "comment",
    "name": "Use the middle-man-conn.eth-srv-name for the LEAF connectivity's eth srv name",
    "info": "",
    "comments": "",
    "x": 5509.999755859375,
    "y": 4949,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "8283f1ca.0934e",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4456.999755859375,
    "y": 5627,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "b8e3ea6a.2b3c98",
    "type": "save",
    "name": "save connectivityB relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6892,
    "y": 3597,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "f013f824.788458",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3376,
    "y": 1786,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "61df2559.b0a7f4",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-p-interface-short`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3283,
    "y": 1733,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "a02e380a.b3cf4",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid=tmp.ROOT.uni-p-interface-long",
    "xml": "<set>\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />\n",
    "comments": "",
    "x": 6942,
    "y": 3300,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "9901809f.3fcb1",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 6889,
    "y": 2888,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "fb2dd54d.4da48",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 6837,
    "y": 2936,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "2cb954fb.0ad334",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 6965,
    "y": 2983,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "d3975532.a6eff",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 6802,
    "y": 2846,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "328265e5.ceed9a",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />",
    "comments": "",
    "outputs": 1,
    "x": 6799,
    "y": 3074,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "c5a55a83.29a8d8",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 6892,
    "y": 3127,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "24258df6.dd1f32",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 6783,
    "y": 3030,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "9e59bbd5.dc241",
    "type": "comment",
    "name": "Create ROOT UNI",
    "info": "",
    "comments": "",
    "x": 6789,
    "y": 3480,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "74df2b94.0f2054",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4378.999755859375,
    "y": 4957,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "e382f150.3ff898",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4362.999755859375,
    "y": 4913,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "b5d28059.1f56c",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 5109.999755859375,
    "y": 4944,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "9a9628dc.017478",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 5196.999755859375,
    "y": 4986,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "73763019.23312",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$middle-man-conn.etht-svc-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 5144.999755859375,
    "y": 5034,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "8700555a.80709",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5272.999755859375,
    "y": 5081,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "77a4c18.eb27d4",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4449.999755859375,
    "y": 5366,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "d49ec047.690ff8",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4432.999755859375,
    "y": 5428,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "d88e7d60.d8e85",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4543.999755859375,
    "y": 5470,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "b06e730a.cb4f08",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 4991.999755859375,
    "y": 5523,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "86caea3e.0715e8",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4301.999755859375,
    "y": 6221,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "54495687.db6e08",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4234.999755859375,
    "y": 6175,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "eb729332.c66588",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4183.999755859375,
    "y": 6126,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "d4928728.f80f18",
    "type": "save",
    "name": "save the-connectivity relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4967,
    "y": 6332,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "d37e54c7.dc098",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4370.999755859375,
    "y": 5527,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "94ae8414.9a9908",
        "bf5ff48.5c73588"
      ]
    ]
  },
  {
    "id": "94ae8414.9a9908",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4581.999755859375,
    "y": 5527,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "62e35c20.8fafcc"
      ]
    ]
  },
  {
    "id": "62e35c20.8fafcc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4737.999755859375,
    "y": 5523,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "b06e730a.cb4f08",
        "4dbfd84e.baba9",
        "22a50e4b.58e402"
      ]
    ]
  },
  {
    "id": "bf5ff48.5c73588",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4577.999755859375,
    "y": 5575,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "98134483.cc3d7"
      ]
    ]
  },
  {
    "id": "98134483.cc3d7",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 4725.999755859375,
    "y": 5570,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "f71cc5a0.3af018",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5233.999755859375,
    "y": 5152,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "2c19139d.1b72fc",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2401,
    "y": 111,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "24e6a4ae.ee277c",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 2335,
    "y": 147,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "f4d12dd6.283218",
    "type": "comment",
    "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
    "info": "",
    "comments": "",
    "x": 2520,
    "y": 74,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "24b292e6.4df33e",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 4268.999755859375,
    "y": 6287,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "7a0aa2d.fce125c",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4401.999755859375,
    "y": 6335,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "50b3cc59.11db24",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4220.999755859375,
    "y": 6393,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "3d73c45f.10f0ec",
        "cd840dd8.7d1be8"
      ]
    ]
  },
  {
    "id": "3d73c45f.10f0ec",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4413.999755859375,
    "y": 6394,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "bd700c8c.0189e8"
      ]
    ]
  },
  {
    "id": "bd700c8c.0189e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Connectivity should have been created' />\n",
    "comments": "",
    "x": 4569.999755859375,
    "y": 6391,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "cd840dd8.7d1be8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4417.999755859375,
    "y": 6438,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a8ddf5df.ccbdb"
      ]
    ]
  },
  {
    "id": "a8ddf5df.ccbdb",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4556.999755859375,
    "y": 6433,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "d4928728.f80f18",
        "dd8d3775.a881a",
        "85ecad27.9bfc8",
        "72e32840.b04238",
        "704867e2.0c96c8",
        "27d3e822.44bc48",
        "e87bb1d8.7deca",
        "fd00316c.9df6b",
        "dbdf2c9.87c1b5",
        "4bb3191b.a6309",
        "6165612a.74a1f8",
        "901e2d41.157da8"
      ]
    ]
  },
  {
    "id": "e87bb1d8.7deca",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4753.999755859375,
    "y": 7112,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "50c2bb1d.1918b4",
        "5f510bf0.f61244",
        "bca3f050.7f93f"
      ]
    ]
  },
  {
    "id": "50c2bb1d.1918b4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4958.999755859375,
    "y": 7109,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "6803d387.7ac854"
      ]
    ]
  },
  {
    "id": "5f510bf0.f61244",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4942.49072265625,
    "y": 7170.574035644531,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "d60db86d.dbd268"
      ]
    ]
  },
  {
    "id": "bca3f050.7f93f",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4939.999755859375,
    "y": 7214,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "1f943971.7bdbb7"
      ]
    ]
  },
  {
    "id": "6803d387.7ac854",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5127,
    "y": 7104,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "90b83d2f.dffcf"
      ]
    ]
  },
  {
    "id": "d60db86d.dbd268",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5105.0621337890625,
    "y": 7170.859771728516,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "1f943971.7bdbb7",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5106.999755859375,
    "y": 7213,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "90b83d2f.dffcf",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5361.999755859375,
    "y": 7120,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "495a0b6e.3eb454"
      ]
    ]
  },
  {
    "id": "495a0b6e.3eb454",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5598.999755859375,
    "y": 7116,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "34e344a3.9ead3c"
      ]
    ]
  },
  {
    "id": "fe37ae21.64a32",
    "type": "switchNode",
    "name": "switch vpnuuid is for this slice",
    "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5865.999755859375,
    "y": 7082,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "f98c5893.919c78",
        "e901664c.c5fec"
      ]
    ]
  },
  {
    "id": "f98c5893.919c78",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6046.999755859375,
    "y": 7108,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "34e344a3.9ead3c"
      ]
    ]
  },
  {
    "id": "e901664c.c5fec",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6045.999755859375,
    "y": 7061,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "34e344a3.9ead3c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4789.999755859375,
    "y": 7383,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "254dab5b.54ef9c"
      ]
    ]
  },
  {
    "id": "9666a3e2.48dd48",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 5638.999755859375,
    "y": 7288,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "d1379ae2.1582e8",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4851.999755859375,
    "y": 7059,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "27d3e822.44bc48",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4735.999755859375,
    "y": 6908,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "e580aaa3.2d8a9",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5080.999755859375,
    "y": 6739,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ef9ad0a5.eedb18"
      ]
    ]
  },
  {
    "id": "ef9ad0a5.eedb18",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5300.999755859375,
    "y": 6745,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "5a7e6348.1665b4"
      ]
    ]
  },
  {
    "id": "5a7e6348.1665b4",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5485.999755859375,
    "y": 6744,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "da67f694.85343"
      ]
    ]
  },
  {
    "id": "da67f694.85343",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5677.999755859375,
    "y": 6747,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "4b28f457.fca6dc"
      ]
    ]
  },
  {
    "id": "4b28f457.fca6dc",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5886.999755859375,
    "y": 6745,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "fd00316c.9df6b",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4787.999755859375,
    "y": 6733,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "e580aaa3.2d8a9"
      ]
    ]
  },
  {
    "id": "85ecad27.9bfc8",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4795.999755859375,
    "y": 6626,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "bf91a387.2b3ef",
        "a3168ee5.a6eba",
        "a823346f.949088"
      ]
    ]
  },
  {
    "id": "bf91a387.2b3ef",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5031.999755859375,
    "y": 6609,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "a3168ee5.a6eba",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5028.999755859375,
    "y": 6650,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "a823346f.949088",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5042.999755859375,
    "y": 6690,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "72e32840.b04238",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4731.999755859375,
    "y": 6785,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "704867e2.0c96c8",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4739.999755859375,
    "y": 6843,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "dd8d3775.a881a",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4744.999755859375,
    "y": 6583,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "405773c0.604cf4",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4859.999755859375,
    "y": 6535,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "254dab5b.54ef9c",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5032.999755859375,
    "y": 7380,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c4177590.731478",
        "fbd9a21c.61ca1"
      ]
    ]
  },
  {
    "id": "c4177590.731478",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5261.999755859375,
    "y": 7357,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "7eaf264d.a29568"
      ]
    ]
  },
  {
    "id": "fbd9a21c.61ca1",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5261.999755859375,
    "y": 7406,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "7eaf264d.a29568",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5422.999755859375,
    "y": 7362,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "63b355d2.4342ec",
        "9666a3e2.48dd48",
        "ddab8936.6aed7"
      ]
    ]
  },
  {
    "id": "74f5cdfa.eb70bc",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 5766.999755859375,
    "y": 7342,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "ddab8936.6aed7",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<!--<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $gfp`' />\n\n<parameter name='operational-status' value='Modified' />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5736.999755859375,
    "y": 7402,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "63b355d2.4342ec",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 5643.999755859375,
    "y": 7230,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "a5898926.6491f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3994,
    "y": 5868,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "54495687.db6e08",
        "24b292e6.4df33e",
        "7a0aa2d.fce125c",
        "50b3cc59.11db24",
        "86caea3e.0715e8"
      ]
    ]
  },
  {
    "id": "2f70568d.ac5cfa",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4736.999755859375,
    "y": 6683,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "dbdf2c9.87c1b5",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4860,
    "y": 6413,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "9514e457.86bcb",
    "type": "comment",
    "name": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "info": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "comments": "",
    "x": 4997,
    "y": 6363,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "4295e286.bfc1e4",
    "type": "save",
    "name": "save ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6805,
    "y": 3539,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "68ccdecd.da9c28",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 4011,
    "y": 1764,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "604167bb.5b07c",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3989,
    "y": 2634,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "8e1315c9.c7504",
    "type": "comment",
    "name": "TEMPORARY REMOVING THE FOLLOWING TWO NODES",
    "info": "",
    "comments": "",
    "x": 6796,
    "y": 4006,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "52d5e6df.7a6948",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3501,
    "y": 6008,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "d6cce90e.618d6",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3712,
    "y": 4885,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "1292663a.8513e2",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3845,
    "y": 4933,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "e51131c0.7c711",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4389.999755859375,
    "y": 5013,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ed5f2a8f.0d1a9",
        "e9808943.cadcd8"
      ]
    ]
  },
  {
    "id": "ed5f2a8f.0d1a9",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4582.999755859375,
    "y": 5014,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "1ae9053e.f80b53"
      ]
    ]
  },
  {
    "id": "e9808943.cadcd8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4586.999755859375,
    "y": 5058,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "63eaf34c.bfa79c"
      ]
    ]
  },
  {
    "id": "63eaf34c.bfa79c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4725.999755859375,
    "y": 5053,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "5c22d3df.9e2c54",
        "cdccad8.628e65",
        "86db9e26.58f248"
      ]
    ]
  },
  {
    "id": "1ae9053e.f80b53",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4725.999755859375,
    "y": 5010,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "9a9628dc.017478",
        "73763019.23312",
        "8700555a.80709",
        "f71cc5a0.3af018"
      ]
    ]
  },
  {
    "id": "5c22d3df.9e2c54",
    "type": "set",
    "name": "set prop.connectivity-domainA-uuid",
    "xml": "<set>\n<parameter name='uuid.connectivity-domainA-uuid' value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5119.999755859375,
    "y": 5304,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "dc89033c.db42f",
    "type": "comment",
    "name": "populate connectivity-A variable in the context map",
    "info": "",
    "comments": "",
    "x": 5126.999755859375,
    "y": 5258,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "4bb3191b.a6309",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4924.999755859375,
    "y": 7008,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "cdccad8.628e65",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5238.999755859375,
    "y": 5357,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "4dbfd84e.baba9",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5120.999755859375,
    "y": 5575,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "aaf5216a.eeae28",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3676,
    "y": 4483,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "87b59262.19be68",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4010,
    "y": 4666,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "99c42fc9.238f28",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3622,
    "y": 4533,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "31595937.eb192e",
        "22ed3030.07f7",
        "665827a1.858f8"
      ]
    ]
  },
  {
    "id": "22ed3030.07f7",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3849.490966796875,
    "y": 4505.573974609375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "dc72fe1c.e68cb8"
      ]
    ]
  },
  {
    "id": "665827a1.858f8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3845,
    "y": 4549.999938964844,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a6baec30.078818"
      ]
    ]
  },
  {
    "id": "dc72fe1c.e68cb8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4012.0625,
    "y": 4504.859680175781,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "a6baec30.078818",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4013,
    "y": 4549.999938964844,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "cead87a8.8e6e18",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3798,
    "y": 4623,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "6dc71645.66cda8",
        "87b59262.19be68"
      ]
    ]
  },
  {
    "id": "31595937.eb192e",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3629,
    "y": 4623,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "cead87a8.8e6e18"
      ]
    ]
  },
  {
    "id": "6dc71645.66cda8",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 3987,
    "y": 4615,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "978af086.86b638",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $middle-man-conn.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$middle-man-conn.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3820,
    "y": 4761,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "b6303c7e.1a4d78",
    "type": "comment",
    "name": "We are doing modify but middle man does not exist ==> it is definitely a new logical link",
    "info": "",
    "comments": "",
    "x": 3603,
    "y": 2844,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "4a459c78.1597f4",
    "type": "comment",
    "name": "We are doing modify and middle man exists, check if LEAF UNI already exists in AAI or not. If yes, consider the possible bw change. If it does not, then it is a new link needs to be added",
    "info": "",
    "comments": "",
    "x": 3458,
    "y": 4411,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "53b126d5.31588",
    "type": "exists",
    "name": "exists LEAF UNI",
    "xml": "<exists plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3231,
    "y": 4679,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "60778167.b14ae8",
        "7c3e1eb0.4f5258"
      ]
    ]
  },
  {
    "id": "b3f9daed.71701",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3063,
    "y": 4682,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "53b126d5.31588"
      ]
    ]
  },
  {
    "id": "7c3e1eb0.4f5258",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3394,
    "y": 4698,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "cc64efe3.d91b48"
      ]
    ]
  },
  {
    "id": "60778167.b14ae8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3430,
    "y": 3305,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ba6991ee.d10c88"
      ]
    ]
  },
  {
    "id": "8a70b695.acfad8",
    "type": "switchNode",
    "name": "switch leafuni.data-source == gfp",
    "xml": "<switch test='`$tmp.aai.leafuni.data-source == $gfp`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3746,
    "y": 3357,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "e00e54ae.19df5",
        "8d19b4f.45dca48"
      ]
    ]
  },
  {
    "id": "e00e54ae.19df5",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3951,
    "y": 3353,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "8d19b4f.45dca48",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3953,
    "y": 3403,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "bfb5d522.1c8f"
      ]
    ]
  },
  {
    "id": "bfb5d522.1c8f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4109,
    "y": 3409,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "913a939f.a7796",
        "99a26dee.a8c93",
        "405f8638.47d8b",
        "7041bf45.3f922"
      ]
    ]
  },
  {
    "id": "913a939f.a7796",
    "type": "set",
    "name": "set bwModified",
    "xml": "<set>\n<parameter name='bwModified' value=\"true\" />\n\n\n",
    "comments": "",
    "x": 4335.000244140625,
    "y": 3150,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "1f1cb5e7.86a3a2",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4913.999755859375,
    "y": 4081,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "9334ab3f.b057e8",
        "830719d7.f425c"
      ]
    ]
  },
  {
    "id": "830719d7.f425c",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
    "comments": "",
    "x": 5156.99951171875,
    "y": 4030,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "4b5e092e.90e4a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4761,
    "y": 4305.999755859375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "a99f59e2.0b7f4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4758.0621337890625,
    "y": 4254.859771728516,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "47107257.07ed4c",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.the-connectivity.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4379.999755859375,
    "y": 4081,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "74f02dc6.f3e414"
      ]
    ]
  },
  {
    "id": "74f02dc6.f3e414",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.the-connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4584.999755859375,
    "y": 4081,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "1b38e917.2d37ff"
      ]
    ]
  },
  {
    "id": "1b38e917.2d37ff",
    "type": "outcome",
    "name": "vpn-binding",
    "xml": "<outcome value='vpn-binding'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4750.999755859375,
    "y": 4081,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "1f1cb5e7.86a3a2"
      ]
    ]
  },
  {
    "id": "9334ab3f.b057e8",
    "type": "save",
    "name": "get vpn-binding from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.the-connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4383.999755859375,
    "y": 4207,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "cee536c3.51917",
        "9ce1aec4.35a0f8",
        "3311b32f.fd5cec"
      ]
    ]
  },
  {
    "id": "cee536c3.51917",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4594.999755859375,
    "y": 4209,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "6ce9ff77.88c36"
      ]
    ]
  },
  {
    "id": "9ce1aec4.35a0f8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4595.49072265625,
    "y": 4254.574035644531,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a99f59e2.0b7f4"
      ]
    ]
  },
  {
    "id": "3311b32f.fd5cec",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4592.999755859375,
    "y": 4298,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "4b5e092e.90e4a"
      ]
    ]
  },
  {
    "id": "ba6991ee.d10c88",
    "type": "save",
    "name": "get LEAF uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.LEAF.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.leafuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3620,
    "y": 3200,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "3e6e8807.399b1",
        "6cb7f3.c190b00c",
        "4ea4467e.d45e28"
      ]
    ]
  },
  {
    "id": "6cb7f3.c190b00c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3847.490966796875,
    "y": 3172.573974609375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "3aa5489d.56185"
      ]
    ]
  },
  {
    "id": "4ea4467e.d45e28",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3843,
    "y": 3216.9999389648438,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "2d33201a.1cd89"
      ]
    ]
  },
  {
    "id": "3aa5489d.56185",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4010.0625,
    "y": 3171.8596801757812,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "2d33201a.1cd89",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4011,
    "y": 3216.9999389648438,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "3e6e8807.399b1",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3855,
    "y": 3267,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "8a70b695.acfad8"
      ]
    ]
  },
  {
    "id": "9229fa15.bd2d6",
    "type": "comment",
    "name": "Find LEAF and ROOT connectivity, then find vpn-bindings of each. adjust bw",
    "info": "",
    "comments": "",
    "x": 3744.883331298828,
    "y": 3457.883331298828,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "c7be917.1958a7",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3759.60009765625,
    "y": 3809.683349609375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "1c05cf82.c8b1",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3897.60009765625,
    "y": 3867.683349609375,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "99a26dee.a8c93",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3475.60009765625,
    "y": 3549.083251953125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c7be917.1958a7",
        "1c05cf82.c8b1",
        "469db255.7b4444",
        "efc1c364.4b4c58",
        "6f34f40.331fa0c",
        "1b1a4e3.a475eb2"
      ]
    ]
  },
  {
    "id": "469db255.7b4444",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3716.60009765625,
    "y": 3977.4833984375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "464367ed.3d00b",
        "e6e54b24.32fb6"
      ]
    ]
  },
  {
    "id": "464367ed.3d00b",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3909.60009765625,
    "y": 3978.4833984375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a3ebf193.e277d"
      ]
    ]
  },
  {
    "id": "e6e54b24.32fb6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3913.60009765625,
    "y": 4022.4833984375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "6798c9ca.f3748"
      ]
    ]
  },
  {
    "id": "6798c9ca.f3748",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4052.60009765625,
    "y": 4017.4833984375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "47107257.07ed4c"
      ]
    ]
  },
  {
    "id": "a3ebf193.e277d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"LEAF CONN DOES NOT EXIST BUT IT SHOULD BE.\" />\n\n",
    "comments": "",
    "x": 4053.60009765625,
    "y": 3974.683349609375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "405f8638.47d8b",
    "type": "switchNode",
    "name": "switch leafuni.data-source > gfp",
    "xml": "<switch test='`$tmp.aai.leafuni.data-source > $gfp`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4368.717041015625,
    "y": 3406.283447265625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "69419f95.d9df48",
        "ee782f6.725585"
      ]
    ]
  },
  {
    "id": "69419f95.d9df48",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4567.884033203125,
    "y": 3472.88330078125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "47d4988f.567e08"
      ]
    ]
  },
  {
    "id": "ee782f6.725585",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4589.884033203125,
    "y": 3317.88330078125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a0601673.d665f8"
      ]
    ]
  },
  {
    "id": "7041bf45.3f922",
    "type": "save",
    "name": "update LEAF UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4367.717041015625,
    "y": 3261.4833984375,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "e5025cb2.c9e55",
    "type": "comment",
    "name": "update LEAF UNI with the new bw",
    "info": "",
    "comments": "",
    "x": 4383.884033203125,
    "y": 3214.88330078125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "33a2f8f.d3c0e88",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5052.650634765625,
    "y": 3191.88330078125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "b9a113e7.d0095",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5654.650634765625,
    "y": 3296.88330078125,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "7bc84398.962aec",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5044.650390625,
    "y": 3237.88330078125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "e062888e.c155b",
        "d6caf7a3.a3e818",
        "20426568.d3347a"
      ]
    ]
  },
  {
    "id": "d6caf7a3.a3e818",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5272.141357421875,
    "y": 3210.457275390625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "77c8310f.81edd8"
      ]
    ]
  },
  {
    "id": "20426568.d3347a",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5267.650390625,
    "y": 3254.8832397460938,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "b2f89241.488ae8"
      ]
    ]
  },
  {
    "id": "77c8310f.81edd8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5434.712890625,
    "y": 3209.7429809570312,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "b2f89241.488ae8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5435.650390625,
    "y": 3254.8832397460938,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "b4c466e5.83e028",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5432.650390625,
    "y": 3304.88330078125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "b8d224b3.0d89f8",
        "b9a113e7.d0095"
      ]
    ]
  },
  {
    "id": "e062888e.c155b",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5263.650390625,
    "y": 3304.88330078125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "b4c466e5.83e028"
      ]
    ]
  },
  {
    "id": "b8d224b3.0d89f8",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $tmp.delta`' />\n",
    "comments": "",
    "x": 5614.651123046875,
    "y": 3246.88330078125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "200ee7db.1193b",
    "type": "comment",
    "name": "bw+ has increased ",
    "info": "",
    "comments": "",
    "x": 4581.883331298828,
    "y": 3279.883331298828,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "cfd7c155.3c953",
    "type": "comment",
    "name": "bw- has decreased",
    "info": "",
    "comments": "",
    "x": 4580.717041015625,
    "y": 3436.683349609375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "a3f905ae.3412d",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 5029.717041015625,
    "y": 3394.683349609375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "5d9da8bf.af3198",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5631.717041015625,
    "y": 3499.683349609375,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "a2a42ec7.6b9908",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 5021.716796875,
    "y": 3440.683349609375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "219cb518.4963a2",
        "a37936ca.d95308",
        "6315a679.c1d5a8"
      ]
    ]
  },
  {
    "id": "a37936ca.d95308",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5249.207763671875,
    "y": 3413.25732421875,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "21614efe.681032"
      ]
    ]
  },
  {
    "id": "6315a679.c1d5a8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5244.716796875,
    "y": 3457.6832885742188,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "f930a997.1bf728"
      ]
    ]
  },
  {
    "id": "21614efe.681032",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5411.779296875,
    "y": 3412.5430297851562,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "f930a997.1bf728",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5412.716796875,
    "y": 3457.6832885742188,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "58bbac12.21e334",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5409.716796875,
    "y": 3507.683349609375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c0a335ca.1c8908",
        "5d9da8bf.af3198"
      ]
    ]
  },
  {
    "id": "219cb518.4963a2",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5240.716796875,
    "y": 3507.683349609375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "58bbac12.21e334"
      ]
    ]
  },
  {
    "id": "c0a335ca.1c8908",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source - $tmp.delta`' />\n",
    "comments": "",
    "x": 5591.717529296875,
    "y": 3449.683349609375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "137c150b.cd5fd3",
    "type": "set",
    "name": "set delta",
    "xml": "<set>\n<parameter name='tmp.delta' value='`$tmp.aai.leafuni.data-source - $gfp`' />\n<parameter name='tmp.realdelta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.isBwIncreased' value='false' />\n\n\n",
    "comments": "",
    "x": 4946.716796875,
    "y": 3353.683349609375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "47d4988f.567e08",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4739.883331298828,
    "y": 3461.883331298828,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "137c150b.cd5fd3",
        "a2a42ec7.6b9908"
      ]
    ]
  },
  {
    "id": "a0601673.d665f8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4760.61669921875,
    "y": 3288.683349609375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "10246d12.f8d883",
        "7bc84398.962aec"
      ]
    ]
  },
  {
    "id": "10246d12.f8d883",
    "type": "set",
    "name": "set delta",
    "xml": "<set>\n<parameter name='tmp.delta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.realdelta' value='`$gfp - $tmp.aai.leafuni.data-source`' />\n<parameter name='tmp.isBwIncreased' value='true' />\n",
    "comments": "",
    "x": 4959.4501953125,
    "y": 3106.4833984375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "34d8fb24.fcb29c",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 4354.7666015625,
    "y": 3361.683349609375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "efc1c364.4b4c58",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3803.10009765625,
    "y": 4180.483642578125,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "6f34f40.331fa0c",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3638.10009765625,
    "y": 4252.68359375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "421e3ec9.1cf95",
        "db056196.ffcc18"
      ]
    ]
  },
  {
    "id": "421e3ec9.1cf95",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3849.10009765625,
    "y": 4252.68359375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ebf2f5dc.a6d998"
      ]
    ]
  },
  {
    "id": "db056196.ffcc18",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3845.10009765625,
    "y": 4300.68359375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "dd6eee2e.c4fa6"
      ]
    ]
  },
  {
    "id": "ebf2f5dc.a6d998",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4005.10009765625,
    "y": 4248.68359375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "33d1e42e.bb2424"
      ]
    ]
  },
  {
    "id": "dd6eee2e.c4fa6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found but it should have been!' />\n",
    "comments": "",
    "x": 3993.10009765625,
    "y": 4295.68359375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "fc79e006.6079c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4900.066162109375,
    "y": 4522.882568359375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c774ea44.ba62b",
        "4da3b32.e6aba4c"
      ]
    ]
  },
  {
    "id": "4da3b32.e6aba4c",
    "type": "set",
    "name": "unset tmp.aai.vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
    "comments": "",
    "x": 5143.06640625,
    "y": 4491.882568359375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "8e9b346.f926ac8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4760.066162109375,
    "y": 4632.882568359375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "d8bd194f.82e18"
      ]
    ]
  },
  {
    "id": "5987f578.7ab7ec",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4748.06640625,
    "y": 4725.8828125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "96788a5f.fb73d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4750.1285400390625,
    "y": 4680.742340087891,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "33d1e42e.bb2424",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.ROOT.connectivity.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4366.066162109375,
    "y": 4522.882568359375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "57073b47.b48554"
      ]
    ]
  },
  {
    "id": "57073b47.b48554",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.ROOT.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4571.066162109375,
    "y": 4522.882568359375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "38862adc.eccce6"
      ]
    ]
  },
  {
    "id": "38862adc.eccce6",
    "type": "outcome",
    "name": "vpn-binding",
    "xml": "<outcome value='vpn-binding'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4737.066162109375,
    "y": 4522.882568359375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "fc79e006.6079c"
      ]
    ]
  },
  {
    "id": "c774ea44.ba62b",
    "type": "save",
    "name": "get vpn-binding from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.ROOT.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4376.066162109375,
    "y": 4632.882568359375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "1cfab11c.2d8e77",
        "f94fa616.fec76",
        "4edf7dd3.8d7454"
      ]
    ]
  },
  {
    "id": "1cfab11c.2d8e77",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4587.066162109375,
    "y": 4634.882568359375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "8e9b346.f926ac8"
      ]
    ]
  },
  {
    "id": "f94fa616.fec76",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4587.55712890625,
    "y": 4680.456604003906,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "96788a5f.fb73d8"
      ]
    ]
  },
  {
    "id": "4edf7dd3.8d7454",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4585.066162109375,
    "y": 4723.882568359375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "5987f578.7ab7ec"
      ]
    ]
  },
  {
    "id": "2a950f62.a5b77",
    "type": "comment",
    "name": "Temporary skipping this check - to support multiple instances in one slice",
    "info": "",
    "comments": "",
    "x": 5995.883056640625,
    "y": 7022.08349609375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "80d2509.9388bb",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 5272.35009765625,
    "y": 4145.283203125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "6ce9ff77.88c36",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5061.35009765625,
    "y": 4207.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "6a93b09.0bf6b5"
      ]
    ]
  },
  {
    "id": "6a93b09.0bf6b5",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.vpn-binding.ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5305.35009765625,
    "y": 4213.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "df869d26.769e7",
        "54afff98.91fe6"
      ]
    ]
  },
  {
    "id": "df869d26.769e7",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5536.35009765625,
    "y": 4219.282958984375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "956fa960.98f36"
      ]
    ]
  },
  {
    "id": "54afff98.91fe6",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5541.35009765625,
    "y": 4293.282958984375,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "b25ba259.308448",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4510.033203125,
    "y": 3865,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "2595900.42e62f",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4855.033203125,
    "y": 3727,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "f7c79bc.ed2f368"
      ]
    ]
  },
  {
    "id": "2aa73f1e.d8378",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4562.033203125,
    "y": 3721,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "2595900.42e62f"
      ]
    ]
  },
  {
    "id": "a86c57e2.a366f8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4817.033203125,
    "y": 3678,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "4c9cebf4.1f804c",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4506.033203125,
    "y": 3773,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "92d67a36.4d6588",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4514.033203125,
    "y": 3818,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "3d955905.d1d126",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4511.033203125,
    "y": 3671,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "f7c79bc.ed2f368",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4764.033203125,
    "y": 3795,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "4caf1451.b1549c"
      ]
    ]
  },
  {
    "id": "4caf1451.b1549c",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4949.033203125,
    "y": 3794,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "6c72501.b5308b"
      ]
    ]
  },
  {
    "id": "6c72501.b5308b",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5141.033203125,
    "y": 3797,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a4a53b14.d840c8"
      ]
    ]
  },
  {
    "id": "a4a53b14.d840c8",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5313.033203125,
    "y": 3793,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "1ee93347.2464a5",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4689.033203125,
    "y": 3908,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "1b1a4e3.a475eb2",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4206.033203125,
    "y": 3693,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "6e002627.71f3d",
        "cc80a6e9.8d5da",
        "4c9cebf4.1f804c",
        "92d67a36.4d6588",
        "b25ba259.308448",
        "2aa73f1e.d8378",
        "1ee93347.2464a5"
      ]
    ]
  },
  {
    "id": "415f667b.eaf5b",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4191.033203125,
    "y": 3627,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "cc80a6e9.8d5da",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4570.033203125,
    "y": 3614,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "cd1fca4d.1735d8",
        "96e89105.72a848",
        "a86c57e2.a366f8"
      ]
    ]
  },
  {
    "id": "cd1fca4d.1735d8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4806.033203125,
    "y": 3597,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "96e89105.72a848",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4803.033203125,
    "y": 3638,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "6e002627.71f3d",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4519.033203125,
    "y": 3571,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "e62c93af.986d08",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 5248.43310546875,
    "y": 4620.39990234375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "d8bd194f.82e18",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5037.43310546875,
    "y": 4682.39990234375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c9e19536.e28d3"
      ]
    ]
  },
  {
    "id": "c9e19536.e28d3",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.vpn-binding.ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5281.43310546875,
    "y": 4688.39990234375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "2b2ae304.0b3ffc",
        "c6c47f59.8c703"
      ]
    ]
  },
  {
    "id": "2b2ae304.0b3ffc",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5512.43310546875,
    "y": 4666.39990234375,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ae674a71.79993"
      ]
    ]
  },
  {
    "id": "c6c47f59.8c703",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5517.43310546875,
    "y": 4733.39990234375,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "956fa960.98f36",
    "type": "switchNode",
    "name": "switch tmp.isBwIncreased",
    "xml": "<switch test=\"`$tmp.isBwIncreased`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5726.31689453125,
    "y": 4231.08251953125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "1ecd65d3.ab1d8a",
        "db311e45.3ec9c8"
      ]
    ]
  },
  {
    "id": "1ecd65d3.ab1d8a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5921.31689453125,
    "y": 4159.08251953125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "d1b82de4.09693"
      ]
    ]
  },
  {
    "id": "db311e45.3ec9c8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5922.31689453125,
    "y": 4292.08251953125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ef4d4c31.5752b8"
      ]
    ]
  },
  {
    "id": "d1b82de4.09693",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6066.31689453125,
    "y": 4159.082763671875,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "55d1eb40.89e1f4",
        "ab2949ce.172f58"
      ]
    ]
  },
  {
    "id": "55d1eb40.89e1f4",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.vpn-binding.route-distinguisher + $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6359.31689453125,
    "y": 4137.08251953125,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "ab2949ce.172f58",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6310.966796875,
    "y": 4184.3994140625,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "75b24fb6.238bf",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6383.31689453125,
    "y": 4098.08251953125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "ef4d4c31.5752b8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6078.31689453125,
    "y": 4291.082763671875,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c3994ac7.46bf7",
        "bad5aad4.351bf8"
      ]
    ]
  },
  {
    "id": "c3994ac7.46bf7",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.vpn-binding.route-distinguisher - $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6371.31689453125,
    "y": 4269.08251953125,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "bad5aad4.351bf8",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6322.966796875,
    "y": 4316.3994140625,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "999a7b18.8746a",
    "type": "comment",
    "name": "decrease the bw of the-vpn-binding and change status to modified",
    "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6395.31689453125,
    "y": 4230.08251953125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "ae674a71.79993",
    "type": "switchNode",
    "name": "switch tmp.isBwIncreased",
    "xml": "<switch test=\"`$tmp.isBwIncreased`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5717.5498046875,
    "y": 4673.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ec19a864.ea4d58",
        "d73a682a.7a7268"
      ]
    ]
  },
  {
    "id": "ec19a864.ea4d58",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5912.5498046875,
    "y": 4601.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "a6f4ca31.afd9c8"
      ]
    ]
  },
  {
    "id": "d73a682a.7a7268",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5913.5498046875,
    "y": 4734.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "3928fc2d.e43684"
      ]
    ]
  },
  {
    "id": "a6f4ca31.afd9c8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6057.5498046875,
    "y": 4601.283447265625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c910035e.3934c",
        "169e4263.459d16"
      ]
    ]
  },
  {
    "id": "c910035e.3934c",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.vpn-binding.route-distinguisher + $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6350.5498046875,
    "y": 4579.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "169e4263.459d16",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6302.19970703125,
    "y": 4626.60009765625,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "7e4549dd.7efbf",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6374.5498046875,
    "y": 4540.283203125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "3928fc2d.e43684",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6069.5498046875,
    "y": 4733.283447265625,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "e1457a0f.b9d6c8",
        "d5693b3e.f3011"
      ]
    ]
  },
  {
    "id": "e1457a0f.b9d6c8",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.vpn-binding.route-distinguisher - $tmp.delta`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 6362.5498046875,
    "y": 4711.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "d5693b3e.f3011",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<!--<parameter name='bandwidth-profile-name' value='`$gfp`' />-->\n<!--<parameter name='cir' value='`$gfp *1000000`' />-->\n<!--<parameter name='eir' value='`$gfp *1000000`' />-->\n",
    "comments": "",
    "outputs": 1,
    "x": 6314.19970703125,
    "y": 4758.60009765625,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "3c74357c.38d252",
    "type": "comment",
    "name": "decrease the bw of the-vpn-binding and change status to modified",
    "info": "decrease the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6386.5498046875,
    "y": 4672.283203125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "69e6b36a.f41024",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5125.39990234375,
    "y": 5413.4833984375,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "86db9e26.58f248",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5123.18310546875,
    "y": 5453.68359375,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "41cc1d.b64a83e4",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 4998.433349609375,
    "y": 5638.16650390625,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "22a50e4b.58e402",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4996.216552734375,
    "y": 5678.36669921875,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "c6ebbffd.4a2ec",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5100.5498046875,
    "y": 6121.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "49a56683.38e268",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4927.5498046875,
    "y": 6178.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "9a2158f1.e886e",
        "105a2de1.54e63a"
      ]
    ]
  },
  {
    "id": "9a2158f1.e886e",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5138.5498046875,
    "y": 6178.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "ffb5bb91.04465"
      ]
    ]
  },
  {
    "id": "105a2de1.54e63a",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5134.5498046875,
    "y": 6226.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "42935a.ea360ca8"
      ]
    ]
  },
  {
    "id": "ffb5bb91.04465",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5294.5498046875,
    "y": 6174.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "7f5bea08.d1b89c",
        "f5914753.58912",
        "9c4a57c9.e2032"
      ]
    ]
  },
  {
    "id": "42935a.ea360ca8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 5282.5498046875,
    "y": 6221.283203125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "37f65b5f.7df50c",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5560.43359375,
    "y": 6274.16650390625,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "9c4a57c9.e2032",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5558.216796875,
    "y": 6314.36669921875,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "f5914753.58912",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5677.5498046875,
    "y": 6226.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  },
  {
    "id": "7f5bea08.d1b89c",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5548.5498046875,
    "y": 6174.283203125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "e32403dd.64bd88",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4989.5498046875,
    "y": 6079.283203125,
    "z": "d1707f77.d9d96",
    "wires": []
  },
  {
    "id": "6165612a.74a1f8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4696.8828125,
    "y": 6161.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      [
        "c6ebbffd.4a2ec",
        "49a56683.38e268"
      ]
    ]
  },
  {
    "id": "901e2d41.157da8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4975.63330078125,
    "y": 6476.283203125,
    "z": "d1707f77.d9d96",
    "wires": [
      []
    ]
  }
]