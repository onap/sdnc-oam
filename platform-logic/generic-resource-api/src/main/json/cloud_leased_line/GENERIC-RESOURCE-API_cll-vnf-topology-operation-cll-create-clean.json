[
  {
    "id": "77a1d01c.aa0f88",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 168.56666564941406,
    "y": 174.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "1e3c1648.671ee2"
      ]
    ]
  },
  {
    "id": "1e3c1648.671ee2",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 452.85235595703125,
    "y": 235.8047742843628,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "cf91a24a.cfe63"
      ]
    ]
  },
  {
    "id": "cf91a24a.cfe63",
    "type": "method",
    "name": "method cll-vnf-topology-operation-cll-create-clean",
    "xml": "<method rpc='cll-vnf-topology-operation-cll-create-clean' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 458.9952697753906,
    "y": 320.5666961669922,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "8dc5a038.179a08"
      ]
    ]
  },
  {
    "id": "8dc5a038.179a08",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 808.5666656494141,
    "y": 379.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9b12be39.ac6768",
        "27bb57a4.5f987",
        "2a2da752.b59748"
      ]
    ]
  },
  {
    "id": "9b12be39.ac6768",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1109.900161743164,
    "y": 650.4969635009766,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "27bb57a4.5f987",
    "type": "save",
    "name": "get service-instance from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
    "comments": "",
    "outputs": 1,
    "x": 1131.328628540039,
    "y": 352.8999786376953,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "6a4d10dc.68d4a",
        "5691a128.aafbf8",
        "5af1bedf.a7a338"
      ]
    ]
  },
  {
    "id": "6a4d10dc.68d4a",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1356.328628540039,
    "y": 210.8999786376953,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "80bca2fd.976568"
      ]
    ]
  },
  {
    "id": "5691a128.aafbf8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1351.819595336914,
    "y": 280.47401428222656,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7f99fec5.4581e"
      ]
    ]
  },
  {
    "id": "5af1bedf.a7a338",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1340.328628540039,
    "y": 326.8999786376953,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "811c97ff.d24ba8"
      ]
    ]
  },
  {
    "id": "1663aedd.7a50f9",
    "type": "comment",
    "name": "new for TransportSlicing",
    "info": "",
    "comments": "",
    "x": 1110.328628540039,
    "y": 240.8999786376953,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "2a2da752.b59748",
    "type": "execute",
    "name": "execute properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
    "comments": "",
    "outputs": 1,
    "x": 1098.328628540039,
    "y": 292.8999786376953,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "80bca2fd.976568",
    "type": "switchNode",
    "name": "switch allotted-resources_length != 0",
    "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1596.566665649414,
    "y": 207.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9eedb337.58df9",
        "1db64f77.692391"
      ]
    ]
  },
  {
    "id": "7f99fec5.4581e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1506.6290435791016,
    "y": 283.4264373779297,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "811c97ff.d24ba8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1510.566665649414,
    "y": 327.56666564941406,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "9eedb337.58df9",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1801.566665649414,
    "y": 244.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "e3d32c54.b9a328"
      ]
    ]
  },
  {
    "id": "1db64f77.692391",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1811.566665649414,
    "y": 171.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "e3d32c54.b9a328",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1794.566665649414,
    "y": 319.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "bb266e42.d64ce8",
        "33816966.623666",
        "6367b887.741ef",
        "a5dc6d6.f390b9",
        "c617e6ee.8b983"
      ]
    ]
  },
  {
    "id": "410f1f1c.a0bc8",
    "type": "save",
    "name": "get allotted-resource from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2280.566665649414,
    "y": 370.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b15d3419.e56af8",
        "8179030d.1dc9b8",
        "c175e9c7.17a5f8"
      ]
    ]
  },
  {
    "id": "b15d3419.e56af8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2496.566665649414,
    "y": 437.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "e4dfd7bc.ebf1f8"
      ]
    ]
  },
  {
    "id": "8179030d.1dc9b8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2497.057632446289,
    "y": 337.14064025878906,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a4be790d.e1feb"
      ]
    ]
  },
  {
    "id": "c175e9c7.17a5f8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2492.566665649414,
    "y": 386.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7226e4d.271f21c"
      ]
    ]
  },
  {
    "id": "bb266e42.d64ce8",
    "type": "for",
    "name": "for each allotted-resource",
    "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1997.566665649414,
    "y": 351.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a610825f.3baab8",
        "410f1f1c.a0bc8",
        "5b668059.1f482",
        "989a0e11.127538"
      ]
    ]
  },
  {
    "id": "a610825f.3baab8",
    "type": "set",
    "name": "set the current allotted-resource-id",
    "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
    "comments": "",
    "x": 2277.566665649414,
    "y": 289.56666564941406,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "a5dc6d6.f390b9",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
    "comments": "",
    "x": 1971.566665649414,
    "y": 301.56666564941406,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "33816966.623666",
    "type": "get-resource",
    "name": "get-resource pnfs-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/pnfs?depth=0' depth = 0\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
    "comments": "",
    "outputs": 1,
    "x": 2014.566665649414,
    "y": 160.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "6367b887.741ef",
    "type": "get-resource",
    "name": "get-resource logical-links",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
    "comments": "",
    "outputs": 1,
    "x": 2026.566665649414,
    "y": 201.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "bc72be6f.8dc5b",
    "type": "comment",
    "name": "The following two nodes are for PCE",
    "info": "",
    "comments": "",
    "x": 2051.566665649414,
    "y": 113.56666564941406,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "999645ff.8d79f8",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
    "comments": "",
    "x": 1971.566665649414,
    "y": 247.56666564941406,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "a4be790d.e1feb",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 2675.566665649414,
    "y": 339.56666564941406,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "7226e4d.271f21c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 2675.504165649414,
    "y": 388.70692443847656,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "e4dfd7bc.ebf1f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2677.504165649414,
    "y": 439.70692443847656,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "4971434.1d7e03c"
      ]
    ]
  },
  {
    "id": "4971434.1d7e03c",
    "type": "save",
    "name": "get allotted-resource relationship from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2970.504165649414,
    "y": 386.70692443847656,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "24e6d7c1.5d2048",
        "3ed3e5cb.f1266a",
        "c01f466a.2c59b8"
      ]
    ]
  },
  {
    "id": "3ed3e5cb.f1266a",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3273.995101928711,
    "y": 119.28089904785156,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "23469507.c7cb02"
      ]
    ]
  },
  {
    "id": "23469507.c7cb02",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3451.566635131836,
    "y": 119.56666564941406,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "c01f466a.2c59b8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3269.504135131836,
    "y": 168.70692443847656,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "196361cf.857fbe"
      ]
    ]
  },
  {
    "id": "196361cf.857fbe",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3451.504135131836,
    "y": 168.70692443847656,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "24e6d7c1.5d2048",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3273.504135131836,
    "y": 219.70692443847656,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "51b732b0.20c4ec"
      ]
    ]
  },
  {
    "id": "51b732b0.20c4ec",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3453.504135131836,
    "y": 219.70692443847656,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b7af5f8.780582"
      ]
    ]
  },
  {
    "id": "b7af5f8.780582",
    "type": "switchNode",
    "name": "switch allotted-resource.relationship-list not empty",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2989.566665649414,
    "y": 514.5666656494141,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "73dd535b.21de04",
        "941bba5e.9658d"
      ]
    ]
  },
  {
    "id": "941bba5e.9658d",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3329.566635131836,
    "y": 361.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "73dd535b.21de04",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3328.566635131836,
    "y": 415.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "33242734.b6ef48"
      ]
    ]
  },
  {
    "id": "8e081bd8.979208",
    "type": "outcome",
    "name": "network-policy",
    "xml": "<outcome value='network-policy'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4073.566635131836,
    "y": 369.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "ce0fbf14.8d016"
      ]
    ]
  },
  {
    "id": "ce0fbf14.8d016",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4250.566513061523,
    "y": 362.56654357910156,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "1a44842.2180c7c",
        "958a84e8.9fbc48"
      ]
    ]
  },
  {
    "id": "33242734.b6ef48",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3492.566635131836,
    "y": 341.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "afaee3e0.e6df98",
        "db5b85f.aeb77f8"
      ]
    ]
  },
  {
    "id": "afaee3e0.e6df98",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3773.566635131836,
    "y": 297.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "c2880ab0.c73eb"
      ]
    ]
  },
  {
    "id": "c2880ab0.c73eb",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4035.566635131836,
    "y": 297.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "8e081bd8.979208"
      ]
    ]
  },
  {
    "id": "1a44842.2180c7c",
    "type": "set",
    "name": "set the 1st network-policy-id",
    "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 4493.566513061523,
    "y": 319.56654357910156,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "958a84e8.9fbc48",
    "type": "save",
    "name": "get network-policy from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
    "comments": "",
    "outputs": 1,
    "x": 4482.566513061523,
    "y": 374.56654357910156,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "4710cc76.36ad1c",
        "efa019b.ed98a68",
        "b08c41e4.127bd8"
      ]
    ]
  },
  {
    "id": "b08c41e4.127bd8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4733.566879272461,
    "y": 315.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7eb7952c.f46d84"
      ]
    ]
  },
  {
    "id": "7eb7952c.f46d84",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4882.138412475586,
    "y": 315.85243225097656,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "dd0313dc.1a2988",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4881.075912475586,
    "y": 359.99269104003906,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "efa019b.ed98a68",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4722.075912475586,
    "y": 359.99269104003906,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "dd0313dc.1a2988"
      ]
    ]
  },
  {
    "id": "4710cc76.36ad1c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4729.075912475586,
    "y": 438.99269104003906,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "fbbb1a1a.e2c5b8"
      ]
    ]
  },
  {
    "id": "fbbb1a1a.e2c5b8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4868.075912475586,
    "y": 438.99269104003906,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7a803641.fde268",
        "6a2b20cd.32701"
      ]
    ]
  },
  {
    "id": "7a803641.fde268",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5073.566879272461,
    "y": 436.56666564941406,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "6a2b20cd.32701",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5072.566879272461,
    "y": 482.56666564941406,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "db5b85f.aeb77f8",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3590.566635131836,
    "y": 413.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "3d651743.57b188"
      ]
    ]
  },
  {
    "id": "3d651743.57b188",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3870.566635131836,
    "y": 413.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "823d6ddb.3083e8"
      ]
    ]
  },
  {
    "id": "823d6ddb.3083e8",
    "type": "outcome",
    "name": "logical-link",
    "xml": "<outcome value='logical-link'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2253.5667877197266,
    "y": 826.5667877197266,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a4f7cdf6.5208e8"
      ]
    ]
  },
  {
    "id": "a4f7cdf6.5208e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2430.566665649414,
    "y": 819.5666656494141,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "eb8d4808.206a1",
        "4f79166b.81752"
      ]
    ]
  },
  {
    "id": "eb8d4808.206a1",
    "type": "set",
    "name": "set the current logical-link-name",
    "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 2673.566665649414,
    "y": 776.5666656494141,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "4f79166b.81752",
    "type": "save",
    "name": "get logical-link from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
    "comments": "",
    "outputs": 1,
    "x": 2662.566665649414,
    "y": 831.5666656494141,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "62989b79.9cfe9c",
        "1988a7a4.ff123",
        "85413e7a.b1b628"
      ]
    ]
  },
  {
    "id": "62989b79.9cfe9c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2954.057632446289,
    "y": 810.1406402587891,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f822b8e9.269d"
      ]
    ]
  },
  {
    "id": "1988a7a4.ff123",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2942.566665649414,
    "y": 854.5666656494141,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b1dab01.deaad5"
      ]
    ]
  },
  {
    "id": "f822b8e9.269d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3102.629165649414,
    "y": 810.4264068603516,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "b1dab01.deaad5",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3101.566665649414,
    "y": 854.5666656494141,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "85413e7a.b1b628",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2949.566665649414,
    "y": 933.5666656494141,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "fb178b5b.3c4ae8"
      ]
    ]
  },
  {
    "id": "fb178b5b.3c4ae8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3088.566665649414,
    "y": 933.5666656494141,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "e94ce0e6.cdcf4",
        "2a0a2d05.627212",
        "2d29cc30.4d633c",
        "8255fb50.a7b88",
        "ea28bb0a.303ea8",
        "4b5b0bf9.d92b04",
        "42798389.0acfb4",
        "29a6af57.132c2",
        "18652387.ef4d1c",
        "c49ed897.0159e8",
        "9d2ec307.fb07b8",
        "c81a19d9.9b256",
        "b5b402c1.c35e88",
        "84774758.102ed8",
        "17e6527f.ea49de",
        "c22e8ab9.0a6b88",
        "647f2e19.e50158",
        "9c75cfb6.9dae68",
        "9a8ce081.e6446",
        "c989c621.8b708",
        "88b89d66.20648"
      ]
    ]
  },
  {
    "id": "31581a8c.76364e",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3437.566665649414,
    "y": 467.56663513183594,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "e94ce0e6.cdcf4",
    "type": "execute",
    "name": "execute UUID generator for otn-tunnel-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3418.566604614258,
    "y": 546.5666351318359,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "84774758.102ed8",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 3375.566604614258,
    "y": 591.5666351318359,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "2a0a2d05.627212",
    "type": "set",
    "name": "set network-route-one",
    "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
    "comments": "",
    "x": 3340.566635131836,
    "y": 645.5666351318359,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "2d29cc30.4d633c",
    "type": "set",
    "name": "set network-route-two",
    "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
    "comments": "",
    "x": 3341.566635131836,
    "y": 700.5666351318359,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "8255fb50.a7b88",
    "type": "save",
    "name": "get network-route-one from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
    "comments": "",
    "outputs": 1,
    "x": 3339.566635131836,
    "y": 964.5666351318359,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "bc9dba3e.42915",
        "4ccb40e3.75eb",
        "6e77d52e.d49a5c"
      ]
    ]
  },
  {
    "id": "ea28bb0a.303ea8",
    "type": "save",
    "name": "get network-route-two from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
    "comments": "",
    "outputs": 1,
    "x": 3334.566635131836,
    "y": 1025.5665130615234,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "ddf0ef9b.af495",
        "d012a2e6.7e886",
        "c732ba74.e6ac38"
      ]
    ]
  },
  {
    "id": "bc9dba3e.42915",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3650.566635131836,
    "y": 735.5666351318359,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "d26a86c.70f36f8"
      ]
    ]
  },
  {
    "id": "4ccb40e3.75eb",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3646.075668334961,
    "y": 784.9926605224609,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "3592fdd4.1e4502"
      ]
    ]
  },
  {
    "id": "6e77d52e.d49a5c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3650.075668334961,
    "y": 837.9926605224609,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f6681e1c.b1626"
      ]
    ]
  },
  {
    "id": "d26a86c.70f36f8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3799.138168334961,
    "y": 734.8524017333984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "3592fdd4.1e4502",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3789.075668334961,
    "y": 784.9926605224609,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "ddf0ef9b.af495",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3612.566604614258,
    "y": 925.5664825439453,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "275632fb.e09a86"
      ]
    ]
  },
  {
    "id": "d012a2e6.7e886",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3608.075668334961,
    "y": 967.9925384521484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "984e984a.f448c8"
      ]
    ]
  },
  {
    "id": "c732ba74.e6ac38",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3609.075668334961,
    "y": 1020.9925384521484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "2eeb8181.d4367e"
      ]
    ]
  },
  {
    "id": "275632fb.e09a86",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3761.138137817383,
    "y": 924.8522491455078,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "984e984a.f448c8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3751.075668334961,
    "y": 967.9925384521484,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "f6681e1c.b1626",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3811.566635131836,
    "y": 837.5666351318359,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "caab91f.12177f"
      ]
    ]
  },
  {
    "id": "2eeb8181.d4367e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3762.566635131836,
    "y": 1020.5665130615234,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9eb76f3a.cfcbd8"
      ]
    ]
  },
  {
    "id": "caab91f.12177f",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3986.566635131836,
    "y": 811.5666351318359,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "2172bcb.4fd5b44",
        "c6b4aa53.9764a8",
        "fbdccf10.5fabc"
      ]
    ]
  },
  {
    "id": "9eb76f3a.cfcbd8",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3946.566635131836,
    "y": 928.5666351318359,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "572a469b.71d458",
        "b8b0db7f.0d0b98",
        "56529717.d57cf"
      ]
    ]
  },
  {
    "id": "2172bcb.4fd5b44",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4108.566635131836,
    "y": 596.5666351318359,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b34792b6.2f84b"
      ]
    ]
  },
  {
    "id": "c6b4aa53.9764a8",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4110.566635131836,
    "y": 650.5666351318359,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "8791b1f2.9fddd"
      ]
    ]
  },
  {
    "id": "572a469b.71d458",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4127.566665649414,
    "y": 866.5666656494141,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "2e043645.b8ff02"
      ]
    ]
  },
  {
    "id": "b8b0db7f.0d0b98",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4129.566665649414,
    "y": 920.5666656494141,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "8eeda316.6df7"
      ]
    ]
  },
  {
    "id": "9e47fb61.f661c8",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4418.566635131836,
    "y": 548.5666351318359,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "21b58670.3a1192",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4411.566635131836,
    "y": 646.5666351318359,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "d0dd5f40.4b5f38",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4429.566665649414,
    "y": 839.5666656494141,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "d70d7c37.e21f5",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4433.566665649414,
    "y": 932.5666656494141,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "a539fdfb.953e38",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3576.566665649414,
    "y": 1604.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7f7f51c3.cfe0e"
      ]
    ]
  },
  {
    "id": "a32c9d1e.59f95",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3586.057632446289,
    "y": 1647.1407012939453,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "ea2bacf1.80819"
      ]
    ]
  },
  {
    "id": "fb2990eb.3d37b8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3574.566665649414,
    "y": 1693.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "495659dd.a8b668"
      ]
    ]
  },
  {
    "id": "c88f575a.f847c",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3276.566665649414,
    "y": 1566.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "42798389.0acfb4",
    "type": "save",
    "name": "get p-interface-src from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3319.566665649414,
    "y": 1631.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a539fdfb.953e38",
        "a32c9d1e.59f95",
        "fb2990eb.3d37b8"
      ]
    ]
  },
  {
    "id": "4b5b0bf9.d92b04",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3320.566665649414,
    "y": 1301.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7927223e.403f8c",
        "cb61ec61.ad89d"
      ]
    ]
  },
  {
    "id": "cb61ec61.ad89d",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3541.566635131836,
    "y": 1354.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b9b2d4da.80c098"
      ]
    ]
  },
  {
    "id": "7927223e.403f8c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3543.566635131836,
    "y": 1387.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "3bca8d9d.c75392"
      ]
    ]
  },
  {
    "id": "7f7f51c3.cfe0e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3749.233169555664,
    "y": 1603.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f7adce7b.f663c8",
        "aab5a13f.7b9228"
      ]
    ]
  },
  {
    "id": "ea2bacf1.80819",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3739.6290435791016,
    "y": 1650.4264373779297,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "495659dd.a8b668",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3743.566665649414,
    "y": 1694.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "f7adce7b.f663c8",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4013.566665649414,
    "y": 1587.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "eba55ae6.b47008",
        "a5049a4a.932988"
      ]
    ]
  },
  {
    "id": "a5049a4a.932988",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4236.566665649414,
    "y": 1542.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b0af1c9f.1d33f"
      ]
    ]
  },
  {
    "id": "eba55ae6.b47008",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4238.566665649414,
    "y": 1606.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "3044898a.b774b6"
      ]
    ]
  },
  {
    "id": "3044898a.b774b6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4400.566665649414,
    "y": 1602.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "b0af1c9f.1d33f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4401.566665649414,
    "y": 1539.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "3cd7ef1e.9f6f38",
        "782ad12.44a143"
      ]
    ]
  },
  {
    "id": "3bca8d9d.c75392",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3686.566635131836,
    "y": 1384.566635131836,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "b9b2d4da.80c098",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3689.566635131836,
    "y": 1347.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "2e849446.924674",
        "15f06507.bc03a3"
      ]
    ]
  },
  {
    "id": "2e849446.924674",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3863.566635131836,
    "y": 1303.566635131836,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "aab5a13f.7b9228",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3962.566635131836,
    "y": 1697.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7f3dbf41.0b7cb"
      ]
    ]
  },
  {
    "id": "7f3dbf41.0b7cb",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4168.566635131836,
    "y": 1697.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "33161afe.bf5fb6"
      ]
    ]
  },
  {
    "id": "33161afe.bf5fb6",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4383.852279663086,
    "y": 1697.388412475586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "d1f5e6bd.d6c388"
      ]
    ]
  },
  {
    "id": "15f06507.bc03a3",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3878.566635131836,
    "y": 1414.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "609f91e1.96d3c",
        "c5dd830a.81bd98",
        "f762b67a.3d2c8"
      ]
    ]
  },
  {
    "id": "609f91e1.96d3c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4074.0667572021484,
    "y": 1366.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "964976f5.819d98"
      ]
    ]
  },
  {
    "id": "c5dd830a.81bd98",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4066.0667572021484,
    "y": 1421.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "bf5b62.bbb734a"
      ]
    ]
  },
  {
    "id": "f762b67a.3d2c8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4071.0667572021484,
    "y": 1478.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "bc48235e.ca1af8"
      ]
    ]
  },
  {
    "id": "bc48235e.ca1af8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4223.066757202148,
    "y": 1479.566635131836,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "bf5b62.bbb734a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4234.066757202148,
    "y": 1424.566635131836,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "964976f5.819d98",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4218.449081420898,
    "y": 1364.2223052978516,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "242018b6.f49c88"
      ]
    ]
  },
  {
    "id": "242018b6.f49c88",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4402.566635131836,
    "y": 1378.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "fc08eb6a.2320e"
      ]
    ]
  },
  {
    "id": "782ad12.44a143",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
    "comments": "",
    "x": 4571.566665649414,
    "y": 1497.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "3cd7ef1e.9f6f38",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
    "comments": "",
    "x": 4572.566665649414,
    "y": 1605.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "9dc8c404.7ec36",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4573.566665649414,
    "y": 1554.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "d1f5e6bd.d6c388",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4590.683822631836,
    "y": 1697.906967163086,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "333e33dc.560624",
        "7db36be0.62778c",
        "5d7040fa.99ac2"
      ]
    ]
  },
  {
    "id": "333e33dc.560624",
    "type": "set",
    "name": "set source ttp-id",
    "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4805.683822631836,
    "y": 1659.906967163086,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "7db36be0.62778c",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4802.683822631836,
    "y": 1698.906967163086,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "2d9a4fac.ae36b8"
      ]
    ]
  },
  {
    "id": "5d7040fa.99ac2",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4758.183822631836,
    "y": 1740.906967163086,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "2d9a4fac.ae36b8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4983.183822631836,
    "y": 1697.906967163086,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a4ece740.b4105"
      ]
    ]
  },
  {
    "id": "52e1d551.a483dc",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4802.566665649414,
    "y": 1315.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7de9311.18a165"
      ]
    ]
  },
  {
    "id": "7de9311.18a165",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4979.566665649414,
    "y": 1307.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "fff1a40e.199ba",
        "7abb7683.fa5358"
      ]
    ]
  },
  {
    "id": "fc08eb6a.2320e",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4597.566635131836,
    "y": 1378.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "52e1d551.a483dc",
        "6d2d083c.e53ec8"
      ]
    ]
  },
  {
    "id": "6d2d083c.e53ec8",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4805.566665649414,
    "y": 1389.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b42cfcde.f4ebc8"
      ]
    ]
  },
  {
    "id": "b42cfcde.f4ebc8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4982.566665649414,
    "y": 1381.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "e8e280e3.a65e5"
      ]
    ]
  },
  {
    "id": "a4ece740.b4105",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5141.183822631836,
    "y": 1697.906967163086,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "425d708e.783968"
      ]
    ]
  },
  {
    "id": "425d708e.783968",
    "type": "set",
    "name": "set source tunnel tp ip",
    "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5348.183822631836,
    "y": 1697.906967163086,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "7abb7683.fa5358",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5187.566665649414,
    "y": 1314.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "45403a46.69b7f4",
        "ab6bed09.5e53d",
        "1ce7c845.052f38"
      ]
    ]
  },
  {
    "id": "fff1a40e.199ba",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainA id",
    "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5217.566665649414,
    "y": 1262.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "45403a46.69b7f4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5397.566665649414,
    "y": 1305.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f2e23e54.aa63c8"
      ]
    ]
  },
  {
    "id": "ab6bed09.5e53d",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5389.566665649414,
    "y": 1360.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "29b1e9b9.e1584e"
      ]
    ]
  },
  {
    "id": "1ce7c845.052f38",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5394.566665649414,
    "y": 1417.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "26b11425.c22444"
      ]
    ]
  },
  {
    "id": "26b11425.c22444",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5546.566665649414,
    "y": 1418.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "29b1e9b9.e1584e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5557.566665649414,
    "y": 1363.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "f2e23e54.aa63c8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5541.948989868164,
    "y": 1303.2223358154297,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a969095b.c118"
      ]
    ]
  },
  {
    "id": "e8e280e3.a65e5",
    "type": "set",
    "name": "set domainA ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5217.566665649414,
    "y": 1505.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "a969095b.c118",
    "type": "set",
    "name": "set controller domainA data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5756.566665649414,
    "y": 1299.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "3c38a36b.8cf1d4",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4406.566635131836,
    "y": 584.5666351318359,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "66912289.29f5fc",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4397.566635131836,
    "y": 682.5666351318359,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "b34792b6.2f84b",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4231.566635131836,
    "y": 590.5666351318359,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9e47fb61.f661c8",
        "3c38a36b.8cf1d4"
      ]
    ]
  },
  {
    "id": "8791b1f2.9fddd",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4237.566635131836,
    "y": 654.5666351318359,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "21b58670.3a1192",
        "66912289.29f5fc"
      ]
    ]
  },
  {
    "id": "2e043645.b8ff02",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4255.566665649414,
    "y": 866.5666656494141,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "d0dd5f40.4b5f38",
        "fac3c269.3e8818"
      ]
    ]
  },
  {
    "id": "8eeda316.6df7",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4258.566665649414,
    "y": 919.5666656494141,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "d70d7c37.e21f5",
        "d978bf81.a682c8"
      ]
    ]
  },
  {
    "id": "fac3c269.3e8818",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4415.566665649414,
    "y": 879.5666656494141,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "d978bf81.a682c8",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4418.566665649414,
    "y": 970.5666656494141,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "98a290a7.380a3",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3710.566635131836,
    "y": 2097.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "e497858e.0123a",
        "498e60f5.55f178"
      ]
    ]
  },
  {
    "id": "7f085da3.5b6764",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3537.900131225586,
    "y": 2098.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "98a290a7.380a3"
      ]
    ]
  },
  {
    "id": "92e1b5b8.c9d748",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3547.391098022461,
    "y": 2141.140670776367,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b56c748b.ef0b98"
      ]
    ]
  },
  {
    "id": "67d077ec.f8e2b8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3535.900131225586,
    "y": 2187.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "531aab62.3c8d74"
      ]
    ]
  },
  {
    "id": "b56c748b.ef0b98",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3700.9625091552734,
    "y": 2144.4264068603516,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "531aab62.3c8d74",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3704.900131225586,
    "y": 2188.566635131836,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "e497858e.0123a",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3996.900131225586,
    "y": 2101.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f5003287.c43b28",
        "e21b6e0c.643e48"
      ]
    ]
  },
  {
    "id": "e21b6e0c.643e48",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4219.900131225586,
    "y": 2056.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "1c25bfa5.0e84a8"
      ]
    ]
  },
  {
    "id": "f5003287.c43b28",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4221.900131225586,
    "y": 2120.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9df0e8d3.70e7b"
      ]
    ]
  },
  {
    "id": "9df0e8d3.70e7b",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4380.900131225586,
    "y": 2139.5667572021484,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "1c25bfa5.0e84a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4384.900131225586,
    "y": 2053.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "15645f19.451cd9",
        "5b635208.85addc"
      ]
    ]
  },
  {
    "id": "18652387.ef4d1c",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3309.900131225586,
    "y": 2133.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7f085da3.5b6764",
        "92e1b5b8.c9d748",
        "67d077ec.f8e2b8"
      ]
    ]
  },
  {
    "id": "8fa3650.6227a18",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3270.900131225586,
    "y": 2077.566635131836,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "29a6af57.132c2",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3329.900131225586,
    "y": 1873.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7f4e16fd.13b25",
        "9c29704e.b9eca8"
      ]
    ]
  },
  {
    "id": "9c29704e.b9eca8",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3552.900131225586,
    "y": 1859.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "bb1e4e57.280888"
      ]
    ]
  },
  {
    "id": "7f4e16fd.13b25",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3554.900131225586,
    "y": 1892.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b75dfd73.636e48"
      ]
    ]
  },
  {
    "id": "b75dfd73.636e48",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3697.900131225586,
    "y": 1889.566635131836,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "bb1e4e57.280888",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3700.900131225586,
    "y": 1852.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "bda8773a.f12a1",
        "d5e4b6e4.115dd8"
      ]
    ]
  },
  {
    "id": "bda8773a.f12a1",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3894.900131225586,
    "y": 1855.5667572021484,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "498e60f5.55f178",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3947.900100708008,
    "y": 2224.566604614258,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f195472b.83ff2"
      ]
    ]
  },
  {
    "id": "f195472b.83ff2",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4153.900100708008,
    "y": 2224.566604614258,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "2e029795.f674f8"
      ]
    ]
  },
  {
    "id": "2e029795.f674f8",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4371.185745239258,
    "y": 2223.388381958008,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9d2261f5.b9fa08"
      ]
    ]
  },
  {
    "id": "d5e4b6e4.115dd8",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3916.900131225586,
    "y": 1923.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "6730b25.e0c5f4c",
        "c5d11aca.de4aa8",
        "359fd71e.08e5b"
      ]
    ]
  },
  {
    "id": "6730b25.e0c5f4c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4112.400253295898,
    "y": 1875.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "11cc1f31.73aba1"
      ]
    ]
  },
  {
    "id": "c5d11aca.de4aa8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4104.400253295898,
    "y": 1930.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "5b1bf93a.85704"
      ]
    ]
  },
  {
    "id": "359fd71e.08e5b",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4109.400253295898,
    "y": 1987.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "150deb8f.b69cd4"
      ]
    ]
  },
  {
    "id": "150deb8f.b69cd4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4261.400253295898,
    "y": 1988.5667572021484,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "5b1bf93a.85704",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4272.400253295898,
    "y": 1933.5667572021484,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "11cc1f31.73aba1",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4256.782577514648,
    "y": 1873.222427368164,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "cff6dd9b.8cbec"
      ]
    ]
  },
  {
    "id": "15645f19.451cd9",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
    "comments": "",
    "x": 4554.900131225586,
    "y": 2014.5667572021484,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "5b635208.85addc",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
    "comments": "",
    "x": 4555.900131225586,
    "y": 2119.5667572021484,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "f4c1e1b8.e7b4e8",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4550.900131225586,
    "y": 2068.5667572021484,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "9d2261f5.b9fa08",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4578.017288208008,
    "y": 2212.9070587158203,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "84d8ab80.c7c5d8",
        "e6773f2f.211b88",
        "2391fc90.5865f4"
      ]
    ]
  },
  {
    "id": "84d8ab80.c7c5d8",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4793.017288208008,
    "y": 2174.9070587158203,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "e6773f2f.211b88",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4790.017288208008,
    "y": 2213.9070587158203,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "e6f8fe6a.d80188"
      ]
    ]
  },
  {
    "id": "2391fc90.5865f4",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4745.517288208008,
    "y": 2255.9070587158203,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "e6f8fe6a.d80188",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4970.517288208008,
    "y": 2212.9070587158203,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "fdc72134.67c23"
      ]
    ]
  },
  {
    "id": "fdc72134.67c23",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5128.517288208008,
    "y": 2212.9070587158203,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "be11f8e.1056f08"
      ]
    ]
  },
  {
    "id": "be11f8e.1056f08",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5335.517288208008,
    "y": 2212.9070587158203,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "8905f8e1.68af1",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4838.900131225586,
    "y": 1891.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "ca38006f.4cfdd"
      ]
    ]
  },
  {
    "id": "ca38006f.4cfdd",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5015.900131225586,
    "y": 1883.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9fddc1a7.528c8",
        "516ef3bb.d53aec"
      ]
    ]
  },
  {
    "id": "cff6dd9b.8cbec",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4440.900131225586,
    "y": 1887.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "4e481827.26cf7"
      ]
    ]
  },
  {
    "id": "4e481827.26cf7",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4635.900131225586,
    "y": 1887.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "8905f8e1.68af1",
        "eb2add71.4c5b38"
      ]
    ]
  },
  {
    "id": "516ef3bb.d53aec",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5223.900131225586,
    "y": 1890.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "8f1e6966.2ed9b",
        "eb0b97a0.d2554",
        "8b053235.7e7848"
      ]
    ]
  },
  {
    "id": "13674b50.1cc875",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5017.900131225586,
    "y": 1956.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "fd136ece.b5724"
      ]
    ]
  },
  {
    "id": "eb2add71.4c5b38",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4840.900131225586,
    "y": 1964.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "13674b50.1cc875"
      ]
    ]
  },
  {
    "id": "9fddc1a7.528c8",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainB id",
    "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5253.900131225586,
    "y": 1838.5667572021484,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "fd136ece.b5724",
    "type": "set",
    "name": "set domainB ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5252.900131225586,
    "y": 2080.5667572021484,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "8f1e6966.2ed9b",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5433.900131225586,
    "y": 1881.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9db69d63.dc9d08"
      ]
    ]
  },
  {
    "id": "eb0b97a0.d2554",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5425.900131225586,
    "y": 1936.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "c57fd560.6db4a"
      ]
    ]
  },
  {
    "id": "8b053235.7e7848",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5430.900131225586,
    "y": 1993.5667572021484,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "6e911852.3a5e28"
      ]
    ]
  },
  {
    "id": "6e911852.3a5e28",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5582.900131225586,
    "y": 1994.5667572021484,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "c57fd560.6db4a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5593.900131225586,
    "y": 1939.5667572021484,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "9db69d63.dc9d08",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5578.282455444336,
    "y": 1879.222427368164,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "e6169acb.b321e8"
      ]
    ]
  },
  {
    "id": "e6169acb.b321e8",
    "type": "set",
    "name": "set controller domainB data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5792.900131225586,
    "y": 1875.5667572021484,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "c49ed897.0159e8",
    "type": "set",
    "name": "set LEAF stuff",
    "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop + '-' + $tmp.aai.network-route-A.logical-interface-id`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
    "comments": "",
    "x": 3277.566635131836,
    "y": 1694.566635131836,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "758e6e49.b62098",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4573.566635131836,
    "y": 668.5666351318359,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "ebf6202d.cf95a8",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4583.566665649414,
    "y": 864.5666656494141,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "9d2ec307.fb07b8",
    "type": "set",
    "name": "set ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop + '-' + $tmp.aai.network-route-B.logical-interface-id`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
    "comments": "",
    "x": 3280.566604614258,
    "y": 2202.566604614258,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "c81a19d9.9b256",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3417.566665649414,
    "y": 2858.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "b5b402c1.c35e88",
    "type": "switchNode",
    "name": "switch found-middle-man?",
    "xml": "<switch test='`$found-middle-man`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3294.566665649414,
    "y": 2968.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "1932a37.6a327dd",
        "e9120928.0c2298"
      ]
    ]
  },
  {
    "id": "1932a37.6a327dd",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3478.566665649414,
    "y": 2947.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "82607164.646368"
      ]
    ]
  },
  {
    "id": "e9120928.0c2298",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3370.566665649414,
    "y": 5125.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "ff313408.b74908"
      ]
    ]
  },
  {
    "id": "ff313408.b74908",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3525.566665649414,
    "y": 5118.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "172df7ad.1d8918",
        "e9491637.d51c9",
        "ed589f33.dee34",
        "8bbbb496.3df16",
        "581d9366.e6ee44",
        "f0668881.7d6d6"
      ]
    ]
  },
  {
    "id": "82607164.646368",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3621.566665649414,
    "y": 2947.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a3d597a8.021388",
        "2f89ad50.333c2a",
        "7f37398e.ac4788",
        "c4c44808.41f1d8",
        "7f311072.1019e",
        "a4b5361a.3a19d8",
        "22f4d985.fe3c1e",
        "dc9eeea6.2c8698",
        "7a27d008.22f4d",
        "7fc66b60.eeacbc",
        "4cc13ef6.adae78",
        "19fd1bdb.1b78e4",
        "d873f718.81f988",
        "cea863c0.4ccb38",
        "6825a3b9.0c4a74",
        "97368f95.9c3c68",
        "550c2be9.9018d4",
        "540352c5.31c62c",
        "87e2b691.2d12d8",
        "25259a32.c04fe6",
        "b87e18c5.0db5e8",
        "88b90ca8.e250c"
      ]
    ]
  },
  {
    "id": "7a27d008.22f4d",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3931.566665649414,
    "y": 3262.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "a3d597a8.021388",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3879.566665649414,
    "y": 3304.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "2f89ad50.333c2a",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4008.566665649414,
    "y": 3346.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "568e89f6.76041",
    "type": "comment",
    "name": "Create ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 3854.566665649414,
    "y": 3221.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "cfc92e2e.d4332",
    "type": "comment",
    "name": "create middle man connectivity and ...",
    "info": "1- create middle man connectivity\n2- create relation with all connectivities\n   in the path\n3- put srcTtp (+dstTtp) somewhere in the\n   vpn-binding -> this is for later on to find\n   which OTN tunnel's bandwidth has to be increased.\n5- create UNIs\n4- create relationship to UNIs",
    "comments": "",
    "x": 4379.566665649414,
    "y": 3742.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "7f37398e.ac4788",
    "type": "execute",
    "name": "execute UUID generator for connectivity middle-man",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-middle-man-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3943.566665649414,
    "y": 3781.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "c4c44808.41f1d8",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-middle-man-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-middle-man-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<!--The followings are not needed for the middle-man-connectivity-->\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />-->\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='mdsc' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3891.566665649414,
    "y": 3832.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "7f311072.1019e",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-middle-man-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-middle-man-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4027.566665649414,
    "y": 3879.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "b73302ea.6b3c9",
    "type": "comment",
    "name": "Create MIDDLE-MAN connectivity",
    "info": "",
    "comments": "",
    "x": 3884.566665649414,
    "y": 3741.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "f06d4892.086d48",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4314.566665649414,
    "y": 3938.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "a4b5361a.3a19d8",
    "type": "save",
    "name": "get middle-man connectivity from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $prop.connectivity-middle-man-uuid\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"middle-man-conn\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3905.566665649414,
    "y": 3985.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7c79fc80.066eb4",
        "c371f5b2.5890b8",
        "8674a08a.891028"
      ]
    ]
  },
  {
    "id": "7c79fc80.066eb4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4152.566665649414,
    "y": 3939.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f06d4892.086d48"
      ]
    ]
  },
  {
    "id": "c371f5b2.5890b8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4153.057632446289,
    "y": 3985.1407012939453,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f874dece.70a19"
      ]
    ]
  },
  {
    "id": "8674a08a.891028",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4150.566665649414,
    "y": 4028.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "395b0fd4.a6a4c"
      ]
    ]
  },
  {
    "id": "f874dece.70a19",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4315.629043579102,
    "y": 3985.4264373779297,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "395b0fd4.a6a4c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4319.566665649414,
    "y": 4029.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "6825a3b9.0c4a74",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3959.566665649414,
    "y": 4327.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "97368f95.9c3c68",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3962.566665649414,
    "y": 4372.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "540352c5.31c62c",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3954.566665649414,
    "y": 4100.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "87e2b691.2d12d8",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3956.566665649414,
    "y": 4147.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "de9883f2.40e1e",
    "type": "comment",
    "name": "The following two will be done in F1",
    "info": "",
    "comments": "",
    "x": 3875.566665649414,
    "y": 4280.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "8e94a286.9bf3d",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4485.566665649414,
    "y": 4946.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "172df7ad.1d8918",
    "type": "switchNode",
    "name": "switch no-pce-call",
    "xml": "<switch test='`$no-pce-call`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3740.566665649414,
    "y": 5099.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "42ddce9e.8ae7c",
        "527e3f0b.1dc1d"
      ]
    ]
  },
  {
    "id": "527e3f0b.1dc1d",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3912.566665649414,
    "y": 5096.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7bd89115.7af5d"
      ]
    ]
  },
  {
    "id": "42ddce9e.8ae7c",
    "type": "outcomeFalse",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3864.566665649414,
    "y": 5943.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "ba444b0.6d090b8"
      ]
    ]
  },
  {
    "id": "678feee9.54f5e",
    "type": "comment",
    "name": "1 --> PCE is needed",
    "info": "",
    "comments": "",
    "x": 3925.566665649414,
    "y": 5066.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "f4c6dae7.f846f8",
    "type": "comment",
    "name": "2 --> no need to call PCE",
    "info": "",
    "comments": "",
    "x": 3935.566665649414,
    "y": 5901.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "22f4d985.fe3c1e",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3958.566665649414,
    "y": 4475.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "7bd89115.7af5d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4088.566665649414,
    "y": 5098.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a830956d.47074",
        "1755eaf4.354305",
        "bc42d413.82595",
        "e6e246b3.ed891",
        "ea96eb7.ae6d798",
        "64dc9cdb.f55c8c",
        "8e94a286.9bf3d",
        "f715ac9f.9b32b8",
        "79d51ab0.5a125c"
      ]
    ]
  },
  {
    "id": "979e33e8.311e38",
    "type": "comment",
    "name": "Use the middle-man-conn.eth-srv-name for the LEAF connectivity's eth srv name",
    "info": "",
    "comments": "",
    "x": 5533.566665649414,
    "y": 4571.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "a830956d.47074",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4466.566665649414,
    "y": 5601.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "dc9eeea6.2c8698",
    "type": "save",
    "name": "save connectivityB relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3937.566665649414,
    "y": 3475.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "7fc66b60.eeacbc",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3935.566665649414,
    "y": 2932.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "4cc13ef6.adae78",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3883.566665649414,
    "y": 2980.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "19fd1bdb.1b78e4",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4011.566665649414,
    "y": 3027.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "49213484.6d2684",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 3848.566665649414,
    "y": 2890.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "d873f718.81f988",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />",
    "comments": "",
    "outputs": 1,
    "x": 3845.566665649414,
    "y": 3118.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "cea863c0.4ccb38",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3938.566665649414,
    "y": 3171.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "8a16772c.f0d08",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 3829.566665649414,
    "y": 3074.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "d8aa6375.55f12",
    "type": "comment",
    "name": "Create ROOT UNI",
    "info": "",
    "comments": "",
    "x": 3833.566665649414,
    "y": 3390.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "e6e246b3.ed891",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4402.566665649414,
    "y": 4579.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "546f5300.a4bc44",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4386.566665649414,
    "y": 4535.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "b36d849f.6b142",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 5133.566665649414,
    "y": 4566.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "df003672.bddd2",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 5220.566665649414,
    "y": 4608.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "dbb46179.c47f78",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$middle-man-conn.etht-svc-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 5168.566665649414,
    "y": 4656.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "837adbb2.1c01e8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5296.566665649414,
    "y": 4703.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "64dc9cdb.f55c8c",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4473.566665649414,
    "y": 4988.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "f767aa90.80364",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4456.566665649414,
    "y": 5050.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "1755eaf4.354305",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4567.566665649414,
    "y": 5092.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "4953b8d7.b454c8",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5015.566665649414,
    "y": 5145.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "b4d97863.c15da",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4325.566665649414,
    "y": 5843.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "d715f85a.00ec7",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4223.566665649414,
    "y": 5792.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "5114dbce.799f0c",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4207.566665649414,
    "y": 5748.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "a495cbe2.05f3",
    "type": "save",
    "name": "save the-connectivity relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4993.566665649414,
    "y": 6005.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "bc42d413.82595",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4394.566665649414,
    "y": 5149.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "5a8de4b.cef309c",
        "99b44375.9d0098"
      ]
    ]
  },
  {
    "id": "5a8de4b.cef309c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4605.566665649414,
    "y": 5149.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "41a866cb.6d5e88"
      ]
    ]
  },
  {
    "id": "41a866cb.6d5e88",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4761.566665649414,
    "y": 5145.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "4953b8d7.b454c8",
        "5f4b3cc4.eb62f4",
        "76c11af1.9e9b94"
      ]
    ]
  },
  {
    "id": "99b44375.9d0098",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4601.566665649414,
    "y": 5197.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "c40ddff0.38613"
      ]
    ]
  },
  {
    "id": "c40ddff0.38613",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 4749.566665649414,
    "y": 5192.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "e8bdf848.077f2",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5257.566665649414,
    "y": 4774.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "5b668059.1f482",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2423.566665649414,
    "y": 185.56666564941406,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "989a0e11.127538",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 2357.566665649414,
    "y": 221.56666564941406,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "e2d9aece.1465f",
    "type": "comment",
    "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
    "info": "",
    "comments": "",
    "x": 2542.566665649414,
    "y": 148.56666564941406,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "8228476b.dfc93",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 4292.566665649414,
    "y": 5909.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "394125b3.b0b57a",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4425.566665649414,
    "y": 5957.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "64250c00.f41444",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4244.566665649414,
    "y": 6015.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "24759095.ee144",
        "cef50f43.3e9f48"
      ]
    ]
  },
  {
    "id": "24759095.ee144",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4437.566665649414,
    "y": 6016.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "c0599a44.570328"
      ]
    ]
  },
  {
    "id": "c0599a44.570328",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Connectivity should have been created' />\n",
    "comments": "",
    "x": 4593.566665649414,
    "y": 6013.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "cef50f43.3e9f48",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4441.566665649414,
    "y": 6060.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "2c2e6801.1f5998"
      ]
    ]
  },
  {
    "id": "2c2e6801.1f5998",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4580.566665649414,
    "y": 6055.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a495cbe2.05f3",
        "d341cf2c.6ddc78",
        "882a079d.0537c8",
        "9acad1b0.c8f3c8",
        "1591d847.9e7b3",
        "2e348bab.75e0fc",
        "3c4d6cf1.e2588c",
        "cf206ffb.cf7668",
        "5a9ba33a.7d1a8c",
        "68c1a73b.58dcd8",
        "221756d1.77b252",
        "6b274a0f.281994"
      ]
    ]
  },
  {
    "id": "3c4d6cf1.e2588c",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4777.566665649414,
    "y": 6734.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f71173d.2556e9",
        "36d425a2.cca582",
        "63e9e58.35d851c"
      ]
    ]
  },
  {
    "id": "f71173d.2556e9",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4982.566665649414,
    "y": 6731.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "211a75a9.b19e7a"
      ]
    ]
  },
  {
    "id": "36d425a2.cca582",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4966.057632446289,
    "y": 6793.140701293945,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "2ef14bb4.55e2cc"
      ]
    ]
  },
  {
    "id": "63e9e58.35d851c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4963.566665649414,
    "y": 6836.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "61cb6aef.0faa54"
      ]
    ]
  },
  {
    "id": "211a75a9.b19e7a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5138.566665649414,
    "y": 6745.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "1dafef09.17b7d9"
      ]
    ]
  },
  {
    "id": "2ef14bb4.55e2cc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5128.629043579102,
    "y": 6793.42643737793,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "61cb6aef.0faa54",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5130.566665649414,
    "y": 6835.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "1dafef09.17b7d9",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5385.566665649414,
    "y": 6742.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "33d48bc3.4a3004"
      ]
    ]
  },
  {
    "id": "33d48bc3.4a3004",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5622.566665649414,
    "y": 6738.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "509c6355.839cf4"
      ]
    ]
  },
  {
    "id": "9a8b6da5.4a6238",
    "type": "switchNode",
    "name": "switch vpnuuid is for this slice",
    "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5865.566665649414,
    "y": 6710.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "4704615c.3c69f",
        "3a6fe540.e42ee2"
      ]
    ]
  },
  {
    "id": "4704615c.3c69f",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6070.566665649414,
    "y": 6730.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "509c6355.839cf4"
      ]
    ]
  },
  {
    "id": "3a6fe540.e42ee2",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6069.566665649414,
    "y": 6683.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "509c6355.839cf4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4813.566665649414,
    "y": 7005.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "867fbf45.6b76e8"
      ]
    ]
  },
  {
    "id": "b664359c.e37a3",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 6275.566635131836,
    "y": 6943.566635131836,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "125d4567.492113",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4875.566665649414,
    "y": 6681.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "2e348bab.75e0fc",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4757.566665649414,
    "y": 6569.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "cf763643.011b",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5102.566665649414,
    "y": 6400.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "e8f56973.27478"
      ]
    ]
  },
  {
    "id": "e8f56973.27478",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5322.566665649414,
    "y": 6406.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "fde5a354.539f28"
      ]
    ]
  },
  {
    "id": "fde5a354.539f28",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5509.566665649414,
    "y": 6366.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "575e4bf2.eff614"
      ]
    ]
  },
  {
    "id": "575e4bf2.eff614",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5701.566665649414,
    "y": 6369.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "d993f92.1703888"
      ]
    ]
  },
  {
    "id": "d993f92.1703888",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5910.566665649414,
    "y": 6367.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "cf206ffb.cf7668",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4809.566665649414,
    "y": 6394.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "cf763643.011b"
      ]
    ]
  },
  {
    "id": "882a079d.0537c8",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4817.566665649414,
    "y": 6287.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "bc620ade.df0f58",
        "6623a49b.f6c65c",
        "19b34b3d.8c8655"
      ]
    ]
  },
  {
    "id": "bc620ade.df0f58",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5053.566665649414,
    "y": 6270.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "6623a49b.f6c65c",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5050.566665649414,
    "y": 6311.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "19b34b3d.8c8655",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5064.566665649414,
    "y": 6351.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "9acad1b0.c8f3c8",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4753.566665649414,
    "y": 6446.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "1591d847.9e7b3",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4761.566665649414,
    "y": 6504.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "d341cf2c.6ddc78",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4766.566665649414,
    "y": 6244.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "2fabd91.b08d0a6",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4881.566665649414,
    "y": 6196.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "867fbf45.6b76e8",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5056.566665649414,
    "y": 7002.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "ca20f18b.d4eba8",
        "a546871e.5bfa7"
      ]
    ]
  },
  {
    "id": "ca20f18b.d4eba8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5285.566665649414,
    "y": 6979.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "4274d693.44e7"
      ]
    ]
  },
  {
    "id": "a546871e.5bfa7",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5285.566665649414,
    "y": 7028.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "9d07c8b0.2ee89",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6018.566635131836,
    "y": 7034.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "90c25785.3a5d5",
        "b664359c.e37a3",
        "9e3c844f.310898"
      ]
    ]
  },
  {
    "id": "8461f132.9df9d8",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6403.566635131836,
    "y": 6997.566635131836,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "9e3c844f.310898",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<!--<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $gfp`' />\n\n<parameter name='operational-status' value='Modified' />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6373.566635131836,
    "y": 7057.566635131836,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "90c25785.3a5d5",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 6280.566635131836,
    "y": 6885.566635131836,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "ba444b0.6d090b8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4016.566665649414,
    "y": 5942.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "d715f85a.00ec7",
        "8228476b.dfc93",
        "394125b3.b0b57a",
        "64250c00.f41444",
        "b4d97863.c15da"
      ]
    ]
  },
  {
    "id": "c0768f56.37d61",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4758.566665649414,
    "y": 6344.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "5a9ba33a.7d1a8c",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4886.566665649414,
    "y": 6086.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "42948c30.98f5ec",
    "type": "comment",
    "name": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "info": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "comments": "",
    "x": 5023.566665649414,
    "y": 6036.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "550c2be9.9018d4",
    "type": "save",
    "name": "save ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='type' value='root' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3850.566665649414,
    "y": 3429.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "371edf0a.6e17f",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 4028.566635131836,
    "y": 1664.566635131836,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "de567305.4a43d8",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 4007.566604614258,
    "y": 2176.566604614258,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "25146472.eb3624",
    "type": "comment",
    "name": "TEMPORARY REMOVING THE FOLLOWING TWO NODES",
    "info": "",
    "comments": "",
    "x": 3842.566665649414,
    "y": 4050.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "c5539a8b.106aa",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3932.566665649414,
    "y": 6430.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "e9491637.d51c9",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3734.566665649414,
    "y": 4959.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "ed589f33.dee34",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3867.566665649414,
    "y": 5007.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "ea96eb7.ae6d798",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4413.566665649414,
    "y": 4635.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a8f10916.be28b",
        "f59d19a8.d9c4d8"
      ]
    ]
  },
  {
    "id": "a8f10916.be28b",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4606.566665649414,
    "y": 4636.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f728dec2.62b3a"
      ]
    ]
  },
  {
    "id": "f59d19a8.d9c4d8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4610.566665649414,
    "y": 4680.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "c09bd16a.0b32d"
      ]
    ]
  },
  {
    "id": "c09bd16a.0b32d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4749.566665649414,
    "y": 4675.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "d9114bfc.f7bce",
        "6c2541da.5d16b8",
        "b22f3c73.35c508"
      ]
    ]
  },
  {
    "id": "f728dec2.62b3a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4749.566665649414,
    "y": 4632.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "df003672.bddd2",
        "dbb46179.c47f78",
        "837adbb2.1c01e8",
        "e8bdf848.077f2"
      ]
    ]
  },
  {
    "id": "d9114bfc.f7bce",
    "type": "set",
    "name": "set prop.connectivity-domainA-uuid",
    "xml": "<set>\n<parameter name='uuid.connectivity-domainA-uuid' value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5151.566909790039,
    "y": 4897.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "430a9d16.e4affc",
    "type": "comment",
    "name": "populate connectivity-A variable in the context map",
    "info": "",
    "comments": "",
    "x": 5158.566909790039,
    "y": 4851.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "68c1a73b.58dcd8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4948.566665649414,
    "y": 6630.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "6c2541da.5d16b8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5269.566909790039,
    "y": 4939.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "5f4b3cc4.eb62f4",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5144.566665649414,
    "y": 5197.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "c7484b6a.1b27e8",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3489.566665649414,
    "y": 4530.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "8eb23d5.90166c",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4011.566665649414,
    "y": 4631.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "8bbbb496.3df16",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3468.566665649414,
    "y": 4574.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a18c125a.02e14",
        "7f2705d6.db1694",
        "a9eb2c91.698e38"
      ]
    ]
  },
  {
    "id": "7f2705d6.db1694",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3657.057632446289,
    "y": 4543.140884399414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "2e3353bd.ee574c"
      ]
    ]
  },
  {
    "id": "a9eb2c91.698e38",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3645.566665649414,
    "y": 4582.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "5c8fdc07.865394"
      ]
    ]
  },
  {
    "id": "2e3353bd.ee574c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3816.629165649414,
    "y": 4541.426528930664,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "5c8fdc07.865394",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3806.566665649414,
    "y": 4583.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "9ccbfbe.3763808",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3808.566665649414,
    "y": 4627.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b718fb4d.1d2eb",
        "8eb23d5.90166c"
      ]
    ]
  },
  {
    "id": "a18c125a.02e14",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3650.566665649414,
    "y": 4619.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9ccbfbe.3763808"
      ]
    ]
  },
  {
    "id": "b718fb4d.1d2eb",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 3969.566665649414,
    "y": 4559.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "581d9366.e6ee44",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $middle-man-conn.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$middle-man-conn.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3834.566665649414,
    "y": 4898.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "3bda63fd.be934c",
    "type": "comment",
    "name": "Temporary skipping this check - to support multiple instances in one slice",
    "info": "",
    "comments": "",
    "x": 5949.449966430664,
    "y": 6648.449966430664,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "b22f3c73.35c508",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5149.233901977539,
    "y": 5035.650161743164,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "72bb0449.7c6c4c",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5151.450698852539,
    "y": 4995.449966430664,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "76c11af1.9e9b94",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5025.233657836914,
    "y": 5285.650161743164,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "9cb7b649.72fc8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5027.450454711914,
    "y": 5245.449966430664,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "ac700fc2.3e2c98",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5115.033462524414,
    "y": 5648.083267211914,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "9aeab5a.07483c8",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4942.033462524414,
    "y": 5705.083267211914,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7adad055.f81858",
        "1c623aa1.b56e9d"
      ]
    ]
  },
  {
    "id": "7adad055.f81858",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5153.033462524414,
    "y": 5705.083267211914,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "8b4d22b1.51563"
      ]
    ]
  },
  {
    "id": "1c623aa1.b56e9d",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5149.033462524414,
    "y": 5753.083267211914,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "1d139b8d.b9ffb4"
      ]
    ]
  },
  {
    "id": "8b4d22b1.51563",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5309.033462524414,
    "y": 5701.083267211914,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f5948089.056778",
        "eda1ec63.f88a8",
        "116803c1.b8c5c4"
      ]
    ]
  },
  {
    "id": "1d139b8d.b9ffb4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 5297.033462524414,
    "y": 5748.083267211914,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "fa3077ab.1dba8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5618.917251586914,
    "y": 5801.966567993164,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "116803c1.b8c5c4",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5622.700454711914,
    "y": 5840.166763305664,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "eda1ec63.f88a8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5729.033462524414,
    "y": 5753.083267211914,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "f5948089.056778",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5613.033462524414,
    "y": 5701.083267211914,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "d30afa49.07b758",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 5004.033462524414,
    "y": 5606.083267211914,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "221756d1.77b252",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4716.366470336914,
    "y": 5781.083267211914,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "ac700fc2.3e2c98",
        "9aeab5a.07483c8",
        "986cd5c9.02e9d",
        "cfe4284f.245dc"
      ]
    ]
  },
  {
    "id": "6b274a0f.281994",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5016.399673461914,
    "y": 6141.766860961914,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "9356e875.de45c8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5822.683334350586,
    "y": 6978.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "4274d693.44e7",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5441.683334350586,
    "y": 6981.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9356e875.de45c8",
        "f4fb32f5.290118",
        "fc73441.6e16238"
      ]
    ]
  },
  {
    "id": "f4fb32f5.290118",
    "type": "switchNode",
    "name": "switch $foundVpnName",
    "xml": "<switch test=\"`$foundVpnName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5667.683334350586,
    "y": 7033.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7d48e95d.36571"
      ]
    ]
  },
  {
    "id": "7d48e95d.36571",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5846.683334350586,
    "y": 7032.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9d07c8b0.2ee89"
      ]
    ]
  },
  {
    "id": "fc73441.6e16238",
    "type": "set",
    "name": "set vpnNameToSearch",
    "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
    "comments": "",
    "x": 5668.683334350586,
    "y": 6926.683334350586,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "c7583bfe.6dbd",
    "type": "notify",
    "name": "notify",
    "xml": "<notify plugin='' resource='' action='' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2662.683334350586,
    "y": 975.6833343505859,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "17e6527f.ea49de",
    "type": "set",
    "name": "set network-route-three",
    "xml": "<set>\n<parameter name='network-route-three' value=\"`$tmp.aai.logical-link.segment-id`\" />\n\n\n",
    "comments": "",
    "x": 3340.683334350586,
    "y": 751.6833343505859,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "4ef95e12.fd687",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3556.683334350586,
    "y": 1079.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "76cbe80c.f4e188",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3552.192398071289,
    "y": 1122.109390258789,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "2e93ec7e.d04c6c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3556.192367553711,
    "y": 1170.109359741211,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b4c3abcb.bb0aa8"
      ]
    ]
  },
  {
    "id": "b4c3abcb.bb0aa8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3713.683334350586,
    "y": 1169.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "c59d6859.c80d1"
      ]
    ]
  },
  {
    "id": "c59d6859.c80d1",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-three.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3883.683364868164,
    "y": 1172.6834869384766,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b806c285.3c1eb",
        "1890bb58.2d4ee5",
        "614f0a7f.a53cf4"
      ]
    ]
  },
  {
    "id": "b806c285.3c1eb",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4057.683334350586,
    "y": 1110.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "224fa1be.62b94e"
      ]
    ]
  },
  {
    "id": "1890bb58.2d4ee5",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4059.683334350586,
    "y": 1164.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "5ec2cf4e.ba2b2"
      ]
    ]
  },
  {
    "id": "224fa1be.62b94e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4185.683334350586,
    "y": 1110.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a900cf11.02bcd",
        "1c2b8eb2.2e6009"
      ]
    ]
  },
  {
    "id": "5ec2cf4e.ba2b2",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4188.683334350586,
    "y": 1163.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "459af4e0.72f56c",
        "8371ef21.19884"
      ]
    ]
  },
  {
    "id": "1c2b8eb2.2e6009",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4346.683334350586,
    "y": 1134.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "459af4e0.72f56c",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4363.683334350586,
    "y": 1176.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "8371ef21.19884",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4348.683334350586,
    "y": 1214.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "a900cf11.02bcd",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4360.683334350586,
    "y": 1094.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "f4867be8.a3739",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4525.683334350586,
    "y": 1110.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "c22e8ab9.0a6b88",
    "type": "save",
    "name": "get network-route-three from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-three'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-three\">",
    "comments": "",
    "outputs": 1,
    "x": 3316.683334350586,
    "y": 1096.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "4ef95e12.fd687",
        "76cbe80c.f4e188",
        "2e93ec7e.d04c6c"
      ]
    ]
  },
  {
    "id": "614f0a7f.a53cf4",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4002.683334350586,
    "y": 1228.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7f1b4232.b1cfb4"
      ]
    ]
  },
  {
    "id": "7f1b4232.b1cfb4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4176.683334350586,
    "y": 1223.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "838abc45.59f7a",
        "db00c52c.5ed268"
      ]
    ]
  },
  {
    "id": "db00c52c.5ed268",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4346.683334350586,
    "y": 1296.683334350586,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "838abc45.59f7a",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4400.683334350586,
    "y": 1256.683334350586,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "ff2b32b5.5b2a08",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4514.683334350586,
    "y": 1281.683334350586,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "56529717.d57cf",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4073.683334350586,
    "y": 984.6833343505859,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "ee2de2c6.4f08d8"
      ]
    ]
  },
  {
    "id": "ca426e77.b8a868",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4417.683334350586,
    "y": 1052.683334350586,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "f04a072d.a1bc78",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4471.683334350586,
    "y": 1012.6833343505859,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "494ac499.527a64",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4615.683334350586,
    "y": 1041.683334350586,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "ee2de2c6.4f08d8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4247.683334350586,
    "y": 979.6833343505859,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f04a072d.a1bc78",
        "ca426e77.b8a868"
      ]
    ]
  },
  {
    "id": "fbdccf10.5fabc",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4133.683334350586,
    "y": 722.6833343505859,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b0420846.4df49"
      ]
    ]
  },
  {
    "id": "6f89ab47.26e854",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4477.683334350586,
    "y": 790.6833343505859,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "bf3e885.5679178",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4531.683334350586,
    "y": 750.6833343505859,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "fd3136c3.1f9f9",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4645.683334350586,
    "y": 775.6833343505859,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "b0420846.4df49",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4307.683334350586,
    "y": 717.6833343505859,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "bf3e885.5679178",
        "6f89ab47.26e854"
      ]
    ]
  },
  {
    "id": "d5e167ce.f19998",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3714.683334350586,
    "y": 2599.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "eb74e655.05ff7",
        "e886ebc1.1661e8"
      ]
    ]
  },
  {
    "id": "47201997.7cc3c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3542.016830444336,
    "y": 2600.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "d5e167ce.f19998"
      ]
    ]
  },
  {
    "id": "164be473.b70384",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3551.507797241211,
    "y": 2643.257369995117,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "784aa04.7c1dfe",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3540.016830444336,
    "y": 2689.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "eb74e655.05ff7",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4001.016830444336,
    "y": 2603.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "3f64df6c.c641f8",
        "e65de275.42f878"
      ]
    ]
  },
  {
    "id": "e65de275.42f878",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4224.016830444336,
    "y": 2558.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "34b4944b.960704"
      ]
    ]
  },
  {
    "id": "3f64df6c.c641f8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4226.016830444336,
    "y": 2622.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "699d84d7.6602fc"
      ]
    ]
  },
  {
    "id": "9c75cfb6.9dae68",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-C.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-C.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3314.016830444336,
    "y": 2635.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "47201997.7cc3c",
        "164be473.b70384",
        "784aa04.7c1dfe"
      ]
    ]
  },
  {
    "id": "23b8fd1e.0cb2fa",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3275.016830444336,
    "y": 2579.683334350586,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "647f2e19.e50158",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3334.016830444336,
    "y": 2375.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "5e42c344.eae60c",
        "af9299b9.b3a958"
      ]
    ]
  },
  {
    "id": "af9299b9.b3a958",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3557.016830444336,
    "y": 2361.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9102a653.17d73"
      ]
    ]
  },
  {
    "id": "5e42c344.eae60c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3559.016830444336,
    "y": 2394.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "9102a653.17d73",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3705.016830444336,
    "y": 2354.683334350586,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9818833d.58ad9",
        "288d55d1.6f744a"
      ]
    ]
  },
  {
    "id": "9818833d.58ad9",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainC.pnf-name' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3899.016830444336,
    "y": 2357.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "e886ebc1.1661e8",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3952.016799926758,
    "y": 2726.683303833008,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f013a1b2.101138"
      ]
    ]
  },
  {
    "id": "f013a1b2.101138",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4158.016799926758,
    "y": 2726.683303833008,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "386bba62.16259e"
      ]
    ]
  },
  {
    "id": "288d55d1.6f744a",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\"\n        pfx='tmp.aai.destination-secondary-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3921.016830444336,
    "y": 2425.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "50cea31f.42d1c4",
        "35a7b03.f8d85d",
        "21702f57.67315"
      ]
    ]
  },
  {
    "id": "50cea31f.42d1c4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4116.516952514648,
    "y": 2377.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "295cc726.ea872"
      ]
    ]
  },
  {
    "id": "35a7b03.f8d85d",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4108.516952514648,
    "y": 2432.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "2c7fef61.a7451"
      ]
    ]
  },
  {
    "id": "21702f57.67315",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4113.516952514648,
    "y": 2489.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9bbdca0e.a0cf58"
      ]
    ]
  },
  {
    "id": "9bbdca0e.a0cf58",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4265.516952514648,
    "y": 2490.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "295cc726.ea872",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4260.899276733398,
    "y": 2375.339126586914,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "723c9a0.e71c268"
      ]
    ]
  },
  {
    "id": "9a8ce081.e6446",
    "type": "set",
    "name": "set SECONDARY-ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-long' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-short' value=\"`$tmp.dst-secondary.pnf-name`\" />\n\n<parameter name='tmp.SECONDARY-ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-C.next-hop + '-' + $tmp.aai.network-route-C.logical-interface-id`\" />\n<parameter name='tmp.SECONDARY-ROOT.uni-tp-id' value=\"`$tmp.dst-secondary.ltpId`\" />\n",
    "comments": "",
    "x": 3336.683334350586,
    "y": 2714.683334350586,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "c2ddeb07.7a6948",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 4011.683303833008,
    "y": 2678.683303833008,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "699d84d7.6602fc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4385.016830444336,
    "y": 2641.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "34b4944b.960704",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4389.016830444336,
    "y": 2555.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "276189b1.3ed3ce",
        "a978fa30.e2e848"
      ]
    ]
  },
  {
    "id": "386bba62.16259e",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4375.302444458008,
    "y": 2725.505081176758,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "89559da6.e6cb3"
      ]
    ]
  },
  {
    "id": "2c7fef61.a7451",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4276.516952514648,
    "y": 2435.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "276189b1.3ed3ce",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.ltpId' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n",
    "comments": "",
    "x": 4559.016830444336,
    "y": 2516.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "a978fa30.e2e848",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.pnf-name' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n",
    "comments": "",
    "x": 4560.016830444336,
    "y": 2621.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "1a2899c1.f9127e",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4555.016830444336,
    "y": 2570.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "89559da6.e6cb3",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4582.133987426758,
    "y": 2715.0237579345703,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "8f483fd3.15e2b",
        "5a0d7606.c42ec8",
        "f5ace162.1d1728"
      ]
    ]
  },
  {
    "id": "8f483fd3.15e2b",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination-secondary.ttp-id' value=\"`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4797.133987426758,
    "y": 2677.0237579345703,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "5a0d7606.c42ec8",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination-secondary.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-secondary-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4794.133987426758,
    "y": 2716.0237579345703,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "be061b72.c7b818"
      ]
    ]
  },
  {
    "id": "f5ace162.1d1728",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4749.633987426758,
    "y": 2758.0237579345703,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "b11d681f.057f4",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4843.016830444336,
    "y": 2393.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "530fa7ff.bc17d"
      ]
    ]
  },
  {
    "id": "723c9a0.e71c268",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4445.016830444336,
    "y": 2389.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "46b1f311.91a404"
      ]
    ]
  },
  {
    "id": "46b1f311.91a404",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4640.016830444336,
    "y": 2389.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b11d681f.057f4",
        "6f790d02.3c377c"
      ]
    ]
  },
  {
    "id": "6f790d02.3c377c",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4845.016830444336,
    "y": 2466.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "e6043cfa.36703"
      ]
    ]
  },
  {
    "id": "be061b72.c7b818",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4974.633987426758,
    "y": 2715.0237579345703,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "ce777f2e.3171a8"
      ]
    ]
  },
  {
    "id": "ce777f2e.3171a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5132.633987426758,
    "y": 2715.0237579345703,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "b697c93d.c44198"
      ]
    ]
  },
  {
    "id": "b697c93d.c44198",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination-secondary.tunnel-tp-id' value=\"`$tmp.aai.destination-secondary-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5339.633987426758,
    "y": 2715.0237579345703,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "530fa7ff.bc17d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5020.016830444336,
    "y": 2385.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "5455e2bb.51abf4",
        "38fcf2b0.31bbc6"
      ]
    ]
  },
  {
    "id": "38fcf2b0.31bbc6",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainC.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainC.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5228.016830444336,
    "y": 2392.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "46db257f.be5d5c",
        "10ef5dcf.987c42",
        "cdb4ea9.23d2198"
      ]
    ]
  },
  {
    "id": "e6043cfa.36703",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5022.016830444336,
    "y": 2458.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "dba257b1.4bfa28"
      ]
    ]
  },
  {
    "id": "5455e2bb.51abf4",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainC id",
    "xml": "<set>\n<parameter name='tmp.domainC.esr-thirdparty-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5258.016830444336,
    "y": 2340.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "dba257b1.4bfa28",
    "type": "set",
    "name": "set domainC ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainC.eth-network-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5257.016830444336,
    "y": 2582.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "46db257f.be5d5c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5438.016830444336,
    "y": 2383.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "40633d04.a1b504"
      ]
    ]
  },
  {
    "id": "10ef5dcf.987c42",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5430.016830444336,
    "y": 2438.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7af2b98b.8d665"
      ]
    ]
  },
  {
    "id": "cdb4ea9.23d2198",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5435.016830444336,
    "y": 2495.6834564208984,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f683ae7d.1eb048"
      ]
    ]
  },
  {
    "id": "f683ae7d.1eb048",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5587.016830444336,
    "y": 2496.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "7af2b98b.8d665",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5598.016830444336,
    "y": 2441.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "40633d04.a1b504",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5582.399154663086,
    "y": 2381.339126586914,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "8b20e4dc.c76628"
      ]
    ]
  },
  {
    "id": "8b20e4dc.c76628",
    "type": "set",
    "name": "set controller domainC data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5797.016830444336,
    "y": 2377.6834564208984,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "c989c621.8b708",
    "type": "switchNode",
    "name": "switch secondary empty?",
    "xml": "<switch test='`length($network-route-three) == 0`'>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3310.683334350586,
    "y": 850.6833343505859,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "c25ccae3.59498",
        "69b0287f.333378"
      ]
    ]
  },
  {
    "id": "c25ccae3.59498",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3432.683364868164,
    "y": 795.6833648681641,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "18001e31.10fe62"
      ]
    ]
  },
  {
    "id": "69b0287f.333378",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3419.683364868164,
    "y": 904.6833648681641,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "643ae015.6b3ff8"
      ]
    ]
  },
  {
    "id": "18001e31.10fe62",
    "type": "set",
    "name": "set hasSecondary false",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n\n\n",
    "comments": "",
    "x": 3647.683334350586,
    "y": 632.6833343505859,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "643ae015.6b3ff8",
    "type": "set",
    "name": "set hasSecondary true",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"true\" />\n\n\n",
    "comments": "",
    "x": 3643.683334350586,
    "y": 676.6833343505859,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "25259a32.c04fe6",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3840.683364868164,
    "y": 3576.683364868164,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "e17fd7c.5d8d2a8"
      ]
    ]
  },
  {
    "id": "e17fd7c.5d8d2a8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4031.683364868164,
    "y": 3580.683364868164,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "6f9d8ee6.40f9a8"
      ]
    ]
  },
  {
    "id": "6f9d8ee6.40f9a8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4158.683364868164,
    "y": 3579.683364868164,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "5d450f44.f186c8",
        "87679aab.884488"
      ]
    ]
  },
  {
    "id": "87679aab.884488",
    "type": "save",
    "name": "save SECONDARY-ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.SECONDARY-ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='type' value='secondary-root' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4380.683364868164,
    "y": 3468.683364868164,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "88b89d66.20648",
    "type": "set",
    "name": "unset secondary related variables",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n<parameter name='network-route-three' value=\"\" />\n<parameter name='tmp.aai.network-route-three.' value=\"\" />\n<parameter name='tmp.aai.network-route-C.' value=\"\" />\n",
    "comments": "",
    "x": 3385.566665649414,
    "y": 508.56666564941406,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "5d450f44.f186c8",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4376.566665649414,
    "y": 3527.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a8e3fac.bdef108",
        "d683cc3e.7534e8"
      ]
    ]
  },
  {
    "id": "a8e3fac.bdef108",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4586.566665649414,
    "y": 3504.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "d7e8440b.3d707"
      ]
    ]
  },
  {
    "id": "d7e8440b.3d707",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4712.566665649414,
    "y": 3504.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "23eff82f.a0dc88"
      ]
    ]
  },
  {
    "id": "a5367218.35d1e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4717.566665649414,
    "y": 3553.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "67e71008.eb1898",
        "df5e72dc.bc108",
        "728f0d90.8753cc",
        "8686c784.f837e"
      ]
    ]
  },
  {
    "id": "d683cc3e.7534e8",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4591.566665649414,
    "y": 3553.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a5367218.35d1e"
      ]
    ]
  },
  {
    "id": "23eff82f.a0dc88",
    "type": "save",
    "name": "save connectivityB relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5040.566665649414,
    "y": 3501.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "67e71008.eb1898",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainC",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainC-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4993.566665649414,
    "y": 3592.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "df5e72dc.bc108",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='secondary-root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 4941.566665649414,
    "y": 3634.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "728f0d90.8753cc",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5070.566665649414,
    "y": 3676.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "41be2f96.b765f8",
    "type": "comment",
    "name": "Create SECONDARY-ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 4956.566665649414,
    "y": 3549.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "8686c784.f837e",
    "type": "save",
    "name": "save connectivityC relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5048.566665649414,
    "y": 3724.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "561c7038.198b5",
    "type": "comment",
    "name": "Create SECONDARY-ROOT UNI",
    "info": "",
    "comments": "",
    "x": 3868.566665649414,
    "y": 3527.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "b87e18c5.0db5e8",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3843.566665649414,
    "y": 4198.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "be1f4e62.15aa38"
      ]
    ]
  },
  {
    "id": "be1f4e62.15aa38",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4035.566665649414,
    "y": 4193.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "a0659afe.abed3"
      ]
    ]
  },
  {
    "id": "a0659afe.abed3",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4164.566665649414,
    "y": 4193.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "aacb47f4.be072"
      ]
    ]
  },
  {
    "id": "aacb47f4.be072",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4496.566665649414,
    "y": 4191.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "88b90ca8.e250c",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3831.566665649414,
    "y": 4422.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "d69507e0.d93c6"
      ]
    ]
  },
  {
    "id": "d69507e0.d93c6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4011.566665649414,
    "y": 4421.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "280736a4.7aa0f2"
      ]
    ]
  },
  {
    "id": "280736a4.7aa0f2",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4140.566665649414,
    "y": 4421.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "ff5dea73.98b998"
      ]
    ]
  },
  {
    "id": "ff5dea73.98b998",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4358.449966430664,
    "y": 4420.449966430664,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "860e2e4b.61a0d8"
      ]
    ]
  },
  {
    "id": "860e2e4b.61a0d8",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4573.449966430664,
    "y": 4420.449966430664,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "3ff2617b.840e76"
      ]
    ]
  },
  {
    "id": "3ff2617b.840e76",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4705.449966430664,
    "y": 4420.449966430664,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "96149cb2.d633c"
      ]
    ]
  },
  {
    "id": "96149cb2.d633c",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5069.566665649414,
    "y": 4419.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "f0668881.7d6d6",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3506.566665649414,
    "y": 4677.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "2492336a.68b20c"
      ]
    ]
  },
  {
    "id": "2492336a.68b20c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3686.566665649414,
    "y": 4676.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "f54b8794.2acdd"
      ]
    ]
  },
  {
    "id": "f54b8794.2acdd",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3815.566665649414,
    "y": 4676.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "c3a4f53e.304d78"
      ]
    ]
  },
  {
    "id": "84f57def.b063a",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3551.566665649414,
    "y": 4735.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "cebbd661.72d4b8",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4117.566665649414,
    "y": 4834.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "c3a4f53e.304d78",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3581.566665649414,
    "y": 4768.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9d76d7ba.037948",
        "c6779daf.7d7a8",
        "62f3b274.175fb4"
      ]
    ]
  },
  {
    "id": "c6779daf.7d7a8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3763.057632446289,
    "y": 4746.140884399414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "168b9f85.394368"
      ]
    ]
  },
  {
    "id": "62f3b274.175fb4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3751.566665649414,
    "y": 4785.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "6d9d5aec.85fd34"
      ]
    ]
  },
  {
    "id": "168b9f85.394368",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3922.629165649414,
    "y": 4744.426528930664,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "6d9d5aec.85fd34",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3912.566665649414,
    "y": 4786.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "1514bf18.105d59",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3914.566665649414,
    "y": 4830.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "16719b54.ca935d",
        "cebbd661.72d4b8"
      ]
    ]
  },
  {
    "id": "9d76d7ba.037948",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3756.566665649414,
    "y": 4822.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "1514bf18.105d59"
      ]
    ]
  },
  {
    "id": "16719b54.ca935d",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 4075.566665649414,
    "y": 4762.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "993866bb.1b2058",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4441.566665649414,
    "y": 5330.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "f715ac9f.9b32b8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4596.566665649414,
    "y": 5371.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "c2d27f90.576768",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5039.566665649414,
    "y": 5419.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "79d51ab0.5a125c",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4412.566665649414,
    "y": 5429.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "fbb7e2aa.d5f0a8",
        "7443db3b.00f94c"
      ]
    ]
  },
  {
    "id": "fbb7e2aa.d5f0a8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4648.566665649414,
    "y": 5413.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "2a6159e8.abaf0e"
      ]
    ]
  },
  {
    "id": "2a6159e8.abaf0e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4792.566665649414,
    "y": 5415.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "c2d27f90.576768",
        "5c6afd36.faf1f4",
        "86183466.e0956"
      ]
    ]
  },
  {
    "id": "7443db3b.00f94c",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4647.566665649414,
    "y": 5461.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "5c6afd36.faf1f4",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5160.566665649414,
    "y": 5466.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "86183466.e0956",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5042.233657836914,
    "y": 5551.650161743164,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "85909b06.96d1d8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5043.450454711914,
    "y": 5510.449966430664,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "d5d61aed.e9642",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5574.566665649414,
    "y": 5898.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "cfe4284f.245dc",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4947.566665649414,
    "y": 5908.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "67276eef.04fd3",
        "9ce9471a.def67"
      ]
    ]
  },
  {
    "id": "67276eef.04fd3",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5180.566665649414,
    "y": 5902.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "7fd061d3.3dea5"
      ]
    ]
  },
  {
    "id": "7fd061d3.3dea5",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5327.566665649414,
    "y": 5910.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "d5d61aed.e9642",
        "f7e19ea0.d5ede",
        "ccb01b06.92e6a8"
      ]
    ]
  },
  {
    "id": "9ce9471a.def67",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5181.566665649414,
    "y": 5952.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "f7e19ea0.d5ede",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5695.566665649414,
    "y": 5945.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "ccb01b06.92e6a8",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5577.233657836914,
    "y": 6030.650161743164,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "e15ccbfd.b5904",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5578.450454711914,
    "y": 5989.449966430664,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "986cd5c9.02e9d",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5108.566665649414,
    "y": 5858.566665649414,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "b4899b08.51e5b",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4942.566665649414,
    "y": 5819.566665649414,
    "z": "294b5e8a.041612",
    "wires": []
  },
  {
    "id": "c617e6ee.8b983",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3269.816665649414,
    "y": 6428.816665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9cb4bafc.51db",
        "31675b48.f480a4"
      ]
    ]
  },
  {
    "id": "9cb4bafc.51db",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3460.816665649414,
    "y": 6432.816665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "4d6a56c7.6a325"
      ]
    ]
  },
  {
    "id": "4d6a56c7.6a325",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3587.816665649414,
    "y": 6431.816665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "c5539a8b.106aa"
      ]
    ]
  },
  {
    "id": "31675b48.f480a4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3456.816665649414,
    "y": 6502.816665649414,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "8a9f9d03.ba9c7"
      ]
    ]
  },
  {
    "id": "9f506842.a5d348",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate-w-Protection",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate-w-Protection' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4006.316665649414,
    "y": 6501.900161743164,
    "z": "294b5e8a.041612",
    "wires": [
      []
    ]
  },
  {
    "id": "8a9f9d03.ba9c7",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3590.316665649414,
    "y": 6504.900161743164,
    "z": "294b5e8a.041612",
    "wires": [
      [
        "9f506842.a5d348"
      ]
    ]
  }
]