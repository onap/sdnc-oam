[
  {
    "id": "401457dc.d91b78",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 112,
    "y": 81,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "a013fef2.6f2958"
      ]
    ]
  },
  {
    "id": "a013fef2.6f2958",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 396.2856903076172,
    "y": 142.23810863494873,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "6ff7b54f.12fd9c"
      ]
    ]
  },
  {
    "id": "6ff7b54f.12fd9c",
    "type": "method",
    "name": "method cll-vnf-topology-operation-cll-create-clean",
    "xml": "<method rpc='cll-vnf-topology-operation-cll-create-clean' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 402.42860412597656,
    "y": 227.00003051757812,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "515432f3.743c34"
      ]
    ]
  },
  {
    "id": "515432f3.743c34",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 752,
    "y": 286,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "dd15978c.a7e49",
        "818743.6c6790c",
        "ecb6f865.396d18"
      ]
    ]
  },
  {
    "id": "dd15978c.a7e49",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1053.33349609375,
    "y": 556.9302978515625,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "818743.6c6790c",
    "type": "save",
    "name": "get service-instance from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
    "comments": "",
    "outputs": 1,
    "x": 1074.761962890625,
    "y": 259.33331298828125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "5ecdc66f.f6a9f8",
        "a5115d.53bf7ea",
        "6a040cf4.34a5f4"
      ]
    ]
  },
  {
    "id": "5ecdc66f.f6a9f8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1299.761962890625,
    "y": 117.33331298828125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "79d6f337.acb234"
      ]
    ]
  },
  {
    "id": "a5115d.53bf7ea",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1295.2529296875,
    "y": 186.9073486328125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "5f1113a0.08e40c"
      ]
    ]
  },
  {
    "id": "6a040cf4.34a5f4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1283.761962890625,
    "y": 233.33331298828125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "90f3a407.501d38"
      ]
    ]
  },
  {
    "id": "de3b14d3.6ada2",
    "type": "comment",
    "name": "new for TransportSlicing",
    "info": "",
    "comments": "",
    "x": 1053.761962890625,
    "y": 147.33331298828125,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "ecb6f865.396d18",
    "type": "execute",
    "name": "execute properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
    "comments": "",
    "outputs": 1,
    "x": 1041.761962890625,
    "y": 199.33331298828125,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "79d6f337.acb234",
    "type": "switchNode",
    "name": "switch allotted-resources_length != 0",
    "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1540,
    "y": 114,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "43c20e21.f32cd8",
        "28c5af7a.923d38"
      ]
    ]
  },
  {
    "id": "5f1113a0.08e40c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1450.0623779296875,
    "y": 189.85977172851562,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "90f3a407.501d38",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1454,
    "y": 234,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "43c20e21.f32cd8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1745,
    "y": 151,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "80d61dda.518fc"
      ]
    ]
  },
  {
    "id": "28c5af7a.923d38",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1755,
    "y": 78,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "80d61dda.518fc",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1738,
    "y": 226,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "28653cf0.44562c",
        "75a68f8a.78ad9",
        "3bc8660b.b8496a",
        "1213b45b.844d1c",
        "2c9dde75.d2cff2"
      ]
    ]
  },
  {
    "id": "98945bed.eff0a8",
    "type": "save",
    "name": "get allotted-resource from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2224,
    "y": 277,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "2960f1eb.c720a6",
        "872a9fc7.c0cff",
        "8c06b22e.eee49"
      ]
    ]
  },
  {
    "id": "2960f1eb.c720a6",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2440,
    "y": 344,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "c7e960b7.dc23f"
      ]
    ]
  },
  {
    "id": "872a9fc7.c0cff",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2440.490966796875,
    "y": 243.573974609375,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "6cf8dc3d.cca5ac"
      ]
    ]
  },
  {
    "id": "8c06b22e.eee49",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2436,
    "y": 293,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "9afdf1e0.0463b"
      ]
    ]
  },
  {
    "id": "28653cf0.44562c",
    "type": "for",
    "name": "for each allotted-resource",
    "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1941,
    "y": 258,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "b0c3b925.5a198",
        "98945bed.eff0a8",
        "59db3330.69645c",
        "4ebbcee7.69b52"
      ]
    ]
  },
  {
    "id": "b0c3b925.5a198",
    "type": "set",
    "name": "set the current allotted-resource-id",
    "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
    "comments": "",
    "x": 2221,
    "y": 196,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "1213b45b.844d1c",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
    "comments": "",
    "x": 1915,
    "y": 208,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "75a68f8a.78ad9",
    "type": "get-resource",
    "name": "get-resource pnfs-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/pnfs?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
    "comments": "",
    "outputs": 1,
    "x": 1958,
    "y": 67,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "3bc8660b.b8496a",
    "type": "get-resource",
    "name": "get-resource logical-links",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
    "comments": "",
    "outputs": 1,
    "x": 1970,
    "y": 108,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "886bedb4.af1a3",
    "type": "comment",
    "name": "The following two nodes are for PCE",
    "info": "",
    "comments": "",
    "x": 1995,
    "y": 20,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "1506b37b.81c545",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
    "comments": "",
    "x": 1915,
    "y": 154,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "6cf8dc3d.cca5ac",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 2619,
    "y": 246,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "9afdf1e0.0463b",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 2618.9375,
    "y": 295.1402587890625,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "c7e960b7.dc23f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2620.9375,
    "y": 346.1402587890625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "39c57327.b8862c"
      ]
    ]
  },
  {
    "id": "39c57327.b8862c",
    "type": "save",
    "name": "get allotted-resource relationship from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2913.9375,
    "y": 293.1402587890625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "3bec086a.17141",
        "202b395f.8fc9be",
        "205a58b1.00a5c"
      ]
    ]
  },
  {
    "id": "202b395f.8fc9be",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3187.428466796875,
    "y": 185.7142333984375,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "113df3fa.92a3d4"
      ]
    ]
  },
  {
    "id": "113df3fa.92a3d4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3365,
    "y": 186,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "205a58b1.00a5c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3182.9375,
    "y": 235.1402587890625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "158df1dd.6f3716"
      ]
    ]
  },
  {
    "id": "158df1dd.6f3716",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3364.9375,
    "y": 235.1402587890625,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "3bec086a.17141",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3186.9375,
    "y": 286.1402587890625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "b7f25fb9.397e68"
      ]
    ]
  },
  {
    "id": "b7f25fb9.397e68",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3366.9375,
    "y": 286.1402587890625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "b5f441a1.12264"
      ]
    ]
  },
  {
    "id": "b5f441a1.12264",
    "type": "switchNode",
    "name": "switch allotted-resource.relationship-list not empty",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2933,
    "y": 421,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "8b1d1a2b.bf0fd8",
        "1b31225e.143a7e"
      ]
    ]
  },
  {
    "id": "1b31225e.143a7e",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3243,
    "y": 428,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "8b1d1a2b.bf0fd8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3242,
    "y": 482,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "f82eb181.80b6b8"
      ]
    ]
  },
  {
    "id": "a23264d4.676238",
    "type": "outcome",
    "name": "network-policy",
    "xml": "<outcome value='network-policy'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3987,
    "y": 436,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "ff9fd818.342fc"
      ]
    ]
  },
  {
    "id": "ff9fd818.342fc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4163.9998779296875,
    "y": 428.9998779296875,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "792ffad7.7e059c",
        "f4f213f7.1f09b"
      ]
    ]
  },
  {
    "id": "f82eb181.80b6b8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3406,
    "y": 408,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "ecdd8960.6c28f",
        "89ab1181.5cfe68"
      ]
    ]
  },
  {
    "id": "ecdd8960.6c28f",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3687,
    "y": 364,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "b496725b.6310f"
      ]
    ]
  },
  {
    "id": "b496725b.6310f",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3949,
    "y": 364,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "a23264d4.676238"
      ]
    ]
  },
  {
    "id": "792ffad7.7e059c",
    "type": "set",
    "name": "set the 1st network-policy-id",
    "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 4406.9998779296875,
    "y": 385.9998779296875,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "f4f213f7.1f09b",
    "type": "save",
    "name": "get network-policy from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
    "comments": "",
    "outputs": 1,
    "x": 4395.9998779296875,
    "y": 440.9998779296875,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "738543a5.e85744",
        "13a5e063.163af8",
        "e90bc7b5.1f09c"
      ]
    ]
  },
  {
    "id": "e90bc7b5.1f09c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4649,
    "y": 327,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "5d8fd93.58407a8"
      ]
    ]
  },
  {
    "id": "5d8fd93.58407a8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4797.571533203125,
    "y": 327.2857666015625,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "53518ce7.6d697c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4796.509033203125,
    "y": 371.426025390625,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "13a5e063.163af8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4637.509033203125,
    "y": 371.426025390625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "53518ce7.6d697c"
      ]
    ]
  },
  {
    "id": "738543a5.e85744",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4644.509033203125,
    "y": 450.426025390625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "937d3d5d.26f97"
      ]
    ]
  },
  {
    "id": "937d3d5d.26f97",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4783.509033203125,
    "y": 450.426025390625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "72f3c760.2ca228",
        "8ec14dfe.92b848"
      ]
    ]
  },
  {
    "id": "72f3c760.2ca228",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 4989,
    "y": 448,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "8ec14dfe.92b848",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 4988,
    "y": 494,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "89ab1181.5cfe68",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3504,
    "y": 480,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "f7fb6622.9ee6a8"
      ]
    ]
  },
  {
    "id": "f7fb6622.9ee6a8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3784,
    "y": 480,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "ae35e793.89faa8"
      ]
    ]
  },
  {
    "id": "ae35e793.89faa8",
    "type": "outcome",
    "name": "logical-link",
    "xml": "<outcome value='logical-link'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2197.0001220703125,
    "y": 733.0001220703125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "c9798d0a.ecd3b"
      ]
    ]
  },
  {
    "id": "c9798d0a.ecd3b",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2374,
    "y": 726,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "c196b024.7ddda8",
        "7125c66b.59e98"
      ]
    ]
  },
  {
    "id": "c196b024.7ddda8",
    "type": "set",
    "name": "set the current logical-link-name",
    "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 2617,
    "y": 683,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "7125c66b.59e98",
    "type": "save",
    "name": "get logical-link from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
    "comments": "",
    "outputs": 1,
    "x": 2606,
    "y": 738,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "9959c5db.04ddc8",
        "5c37ab7d.23ef4c",
        "360651b5.116166"
      ]
    ]
  },
  {
    "id": "9959c5db.04ddc8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2897.490966796875,
    "y": 716.573974609375,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "95b8ba37.0aee2"
      ]
    ]
  },
  {
    "id": "5c37ab7d.23ef4c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2886,
    "y": 761,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "f8728a74.d6db68"
      ]
    ]
  },
  {
    "id": "95b8ba37.0aee2",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3046.0625,
    "y": 716.8597412109375,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "f8728a74.d6db68",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3045,
    "y": 761,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "360651b5.116166",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2893,
    "y": 840,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "7326b1f2.1f515"
      ]
    ]
  },
  {
    "id": "7326b1f2.1f515",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3032,
    "y": 840,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "defc50da.4e3908",
        "b7df8e67.09b008",
        "8bf3b76.abce348",
        "25a0f8e1.052e18",
        "b381c251.6b96c",
        "89e7916b.fb9e18",
        "5511f093.c411d8",
        "d2628754.9207b8",
        "6481b806.b26798",
        "20bb7eae.be3a32",
        "9fcb0922.e08ed",
        "3db2acf8.6fe83c",
        "d8a34ec.a6346b",
        "2783e99.3726216"
      ]
    ]
  },
  {
    "id": "57e34af8.6ff4e4",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3346,
    "y": 646,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "defc50da.4e3908",
    "type": "execute",
    "name": "execute UUID generator for otn-tunnel-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3327,
    "y": 696,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "2783e99.3726216",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 3284,
    "y": 741,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "b7df8e67.09b008",
    "type": "set",
    "name": "set network-route-one",
    "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
    "comments": "",
    "x": 3259,
    "y": 804,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "8bf3b76.abce348",
    "type": "set",
    "name": "set network-route-two",
    "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
    "comments": "",
    "x": 3260,
    "y": 859,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "25a0f8e1.052e18",
    "type": "save",
    "name": "get network-route-one from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
    "comments": "",
    "outputs": 1,
    "x": 3276,
    "y": 907,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "bd8c7e03.e7323",
        "d55fdbac.2e4bb8",
        "1bd38601.f7d742"
      ]
    ]
  },
  {
    "id": "b381c251.6b96c",
    "type": "save",
    "name": "get network-route-two from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
    "comments": "",
    "outputs": 1,
    "x": 3265,
    "y": 993.9998779296875,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "1da7e0f.b56889f",
        "484d133e.c5022c",
        "511cb1cb.4e0758"
      ]
    ]
  },
  {
    "id": "bd8c7e03.e7323",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3477,
    "y": 791,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "2e4151be.e64316"
      ]
    ]
  },
  {
    "id": "d55fdbac.2e4bb8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3472.509033203125,
    "y": 840.426025390625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "13e83f49.acd859"
      ]
    ]
  },
  {
    "id": "1bd38601.f7d742",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3476.509033203125,
    "y": 893.426025390625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "bbf6b192.5183e"
      ]
    ]
  },
  {
    "id": "2e4151be.e64316",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3625.571533203125,
    "y": 790.2857666015625,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "13e83f49.acd859",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3615.509033203125,
    "y": 840.426025390625,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "1da7e0f.b56889f",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3488,
    "y": 963.9998779296875,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "27b6a672.93ff42"
      ]
    ]
  },
  {
    "id": "484d133e.c5022c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3483.509033203125,
    "y": 1013.4259033203125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "9dfa6094.6f7fc"
      ]
    ]
  },
  {
    "id": "511cb1cb.4e0758",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3484.509033203125,
    "y": 1066.4259033203125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "597eb63e.8508f8"
      ]
    ]
  },
  {
    "id": "27b6a672.93ff42",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3636.571533203125,
    "y": 963.28564453125,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "9dfa6094.6f7fc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3626.509033203125,
    "y": 1013.4259033203125,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "bbf6b192.5183e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3638,
    "y": 893,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "254a0cd4.86f82c"
      ]
    ]
  },
  {
    "id": "597eb63e.8508f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3638,
    "y": 1065.9998779296875,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "e889443b.6afcf"
      ]
    ]
  },
  {
    "id": "254a0cd4.86f82c",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3810,
    "y": 893,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "6d2ef37a.d5fd0c",
        "52c8f078.ee2cf"
      ]
    ]
  },
  {
    "id": "e889443b.6afcf",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3811,
    "y": 1066,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "a0b3468.4c1dbb8",
        "ed4bd4a4.7c002"
      ]
    ]
  },
  {
    "id": "6d2ef37a.d5fd0c",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3986,
    "y": 872,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "e77feac5.4ef39"
      ]
    ]
  },
  {
    "id": "52c8f078.ee2cf",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3988,
    "y": 926,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "dc5de667.94277"
      ]
    ]
  },
  {
    "id": "a0b3468.4c1dbb8",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3987,
    "y": 1036,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "79d85b32.4dba8c"
      ]
    ]
  },
  {
    "id": "ed4bd4a4.7c002",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3989,
    "y": 1090,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "5799e4b6.bb5c84"
      ]
    ]
  },
  {
    "id": "985f8e8b.05bee8",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4296,
    "y": 824,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "f70bc04c.4e53a8",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4289,
    "y": 922,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "279fdf30.7efb5",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4289,
    "y": 1009,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "59ab7a89.d7cd04",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4293,
    "y": 1102,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "88375125.392df",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3520,
    "y": 1511,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "70cb5f48.205d5"
      ]
    ]
  },
  {
    "id": "f9f9639f.39277",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3529.490966796875,
    "y": 1553.5740356445312,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "3188784d.74df2"
      ]
    ]
  },
  {
    "id": "5caadc0.419f8a4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3518,
    "y": 1600,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "150b9d67.7501b3"
      ]
    ]
  },
  {
    "id": "3a7a9a9d.f62dc6",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3220,
    "y": 1473,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "5511f093.c411d8",
    "type": "save",
    "name": "get p-interface-src from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3263,
    "y": 1538,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "88375125.392df",
        "f9f9639f.39277",
        "5caadc0.419f8a4"
      ]
    ]
  },
  {
    "id": "89e7916b.fb9e18",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3264,
    "y": 1208,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "e837ae68.fc604",
        "bb41717d.607c08"
      ]
    ]
  },
  {
    "id": "bb41717d.607c08",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3487,
    "y": 1194,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "d2362461.2f81"
      ]
    ]
  },
  {
    "id": "e837ae68.fc604",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3489,
    "y": 1227,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "3512d9a4.ea10d6"
      ]
    ]
  },
  {
    "id": "70cb5f48.205d5",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3692.66650390625,
    "y": 1510,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "e94025a.e4524d8",
        "c5dba695.8712a"
      ]
    ]
  },
  {
    "id": "3188784d.74df2",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3683.0623779296875,
    "y": 1556.8597717285156,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "150b9d67.7501b3",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3687,
    "y": 1601,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "e94025a.e4524d8",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3957,
    "y": 1494,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "e5529b75.8cebe8",
        "23d40330.51306c"
      ]
    ]
  },
  {
    "id": "23d40330.51306c",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4180,
    "y": 1449,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "3c287465.76fa9c"
      ]
    ]
  },
  {
    "id": "e5529b75.8cebe8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4182,
    "y": 1513,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "68bbdd27.0bc724"
      ]
    ]
  },
  {
    "id": "68bbdd27.0bc724",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4344,
    "y": 1509,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "3c287465.76fa9c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4345,
    "y": 1446,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "bdb7c671.344b18",
        "c34e936c.c687c"
      ]
    ]
  },
  {
    "id": "c36404f4.836da8",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3959,
    "y": 1653,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "b7b75306.125ca8",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4004,
    "y": 1563,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "6cc070b0.831948",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4087,
    "y": 1701,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "3512d9a4.ea10d6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3632,
    "y": 1224,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "d2362461.2f81",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3635,
    "y": 1187,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "e726be0e.35ac3",
        "2627d74c.d6bd68"
      ]
    ]
  },
  {
    "id": "e726be0e.35ac3",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3809,
    "y": 1143,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "c5dba695.8712a",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3911,
    "y": 1778,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "e649e24c.a2956"
      ]
    ]
  },
  {
    "id": "e649e24c.a2956",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4117,
    "y": 1778,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "b51c6327.c26b2"
      ]
    ]
  },
  {
    "id": "b51c6327.c26b2",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4332.28564453125,
    "y": 1777.82177734375,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "4a081ef3.a11e7"
      ]
    ]
  },
  {
    "id": "2627d74c.d6bd68",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3824,
    "y": 1254,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "e436419e.4fabd8",
        "652a3cad.15b09c",
        "70700ce3.d1704c"
      ]
    ]
  },
  {
    "id": "e436419e.4fabd8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4019.5001220703125,
    "y": 1206,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "cac46a50.7c9a2"
      ]
    ]
  },
  {
    "id": "652a3cad.15b09c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4011.5001220703125,
    "y": 1261,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "7a559df8.2fbb14"
      ]
    ]
  },
  {
    "id": "70700ce3.d1704c",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4016.5001220703125,
    "y": 1318,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "74d49b92.9fc25c"
      ]
    ]
  },
  {
    "id": "74d49b92.9fc25c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4168.5001220703125,
    "y": 1319,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "7a559df8.2fbb14",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4179.5001220703125,
    "y": 1264,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "cac46a50.7c9a2",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4163.8824462890625,
    "y": 1203.6556701660156,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "66f1613b.919fb"
      ]
    ]
  },
  {
    "id": "66f1613b.919fb",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4348,
    "y": 1218,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "c85b648c.95d8c8"
      ]
    ]
  },
  {
    "id": "c34e936c.c687c",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
    "comments": "",
    "x": 4515,
    "y": 1404,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "bdb7c671.344b18",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
    "comments": "",
    "x": 4516,
    "y": 1512,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "c2c86af0.87457",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4517,
    "y": 1461,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "4a081ef3.a11e7",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4539.1171875,
    "y": 1778.34033203125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "feabfc8a.6835d8",
        "3ad150ae.9686d8",
        "7f60aea1.758cf8"
      ]
    ]
  },
  {
    "id": "feabfc8a.6835d8",
    "type": "set",
    "name": "set source ttp-id",
    "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4754.1171875,
    "y": 1740.34033203125,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "3ad150ae.9686d8",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4751.1171875,
    "y": 1779.34033203125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "ee0e6ba7.1ab528"
      ]
    ]
  },
  {
    "id": "7f60aea1.758cf8",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4706.6171875,
    "y": 1821.34033203125,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "ee0e6ba7.1ab528",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4931.6171875,
    "y": 1778.34033203125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "f1c6f75a.7a676"
      ]
    ]
  },
  {
    "id": "3cd8e203.e194b6",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4746,
    "y": 1222,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "17b6f38.a7a3d8d"
      ]
    ]
  },
  {
    "id": "17b6f38.a7a3d8d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4923,
    "y": 1214,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "676933bd.3d8274",
        "263106c3.f9fd42"
      ]
    ]
  },
  {
    "id": "c85b648c.95d8c8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4543,
    "y": 1218,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "3cd8e203.e194b6",
        "a370dab4.6f2d18"
      ]
    ]
  },
  {
    "id": "a370dab4.6f2d18",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4749,
    "y": 1296,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "9dd5a5f0.afd2"
      ]
    ]
  },
  {
    "id": "9dd5a5f0.afd2",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4926,
    "y": 1288,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "fbf0fc4a.17b5c8"
      ]
    ]
  },
  {
    "id": "f1c6f75a.7a676",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5089.6171875,
    "y": 1778.34033203125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "3b33bb0c.f032cc"
      ]
    ]
  },
  {
    "id": "3b33bb0c.f032cc",
    "type": "set",
    "name": "set source tunnel tp ip",
    "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5296.6171875,
    "y": 1778.34033203125,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "263106c3.f9fd42",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5131,
    "y": 1221,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "ddcc8888.29b548",
        "db7fdb45.821a78",
        "ff56d5.bfda3928"
      ]
    ]
  },
  {
    "id": "676933bd.3d8274",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainA id",
    "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5161,
    "y": 1169,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "ddcc8888.29b548",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5341,
    "y": 1212,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "e7e5466f.7658a"
      ]
    ]
  },
  {
    "id": "db7fdb45.821a78",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5333,
    "y": 1267,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "1793a855.2047c"
      ]
    ]
  },
  {
    "id": "ff56d5.bfda3928",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5338,
    "y": 1324,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "81dadd48.c741d8"
      ]
    ]
  },
  {
    "id": "81dadd48.c741d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5490,
    "y": 1325,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "1793a855.2047c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5501,
    "y": 1270,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "e7e5466f.7658a",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5485.38232421875,
    "y": 1209.6556701660156,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "dde9f23c.0ef22"
      ]
    ]
  },
  {
    "id": "fbf0fc4a.17b5c8",
    "type": "set",
    "name": "set domainA ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5161,
    "y": 1412,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "dde9f23c.0ef22",
    "type": "set",
    "name": "set controller domainA data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5700,
    "y": 1206,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "f4910610.e101b8",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4284,
    "y": 860,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "f3cd87cd.165138",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4275,
    "y": 958,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "e77feac5.4ef39",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4109,
    "y": 866,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "985f8e8b.05bee8",
        "f4910610.e101b8"
      ]
    ]
  },
  {
    "id": "dc5de667.94277",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4115,
    "y": 930,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "f70bc04c.4e53a8",
        "f3cd87cd.165138"
      ]
    ]
  },
  {
    "id": "79d85b32.4dba8c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4115,
    "y": 1036,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "279fdf30.7efb5",
        "746b1d51.0e2bec"
      ]
    ]
  },
  {
    "id": "5799e4b6.bb5c84",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4118,
    "y": 1089,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "59ab7a89.d7cd04",
        "b63e0082.68a46"
      ]
    ]
  },
  {
    "id": "746b1d51.0e2bec",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4275,
    "y": 1049,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "b63e0082.68a46",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4278,
    "y": 1140,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "87a4f79d.f1b41",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3650,
    "y": 2350,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "8613884a.623e8",
        "df0137f0.20c7a8"
      ]
    ]
  },
  {
    "id": "af9ecc7.c2e763",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3477.33349609375,
    "y": 2351,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "87a4f79d.f1b41"
      ]
    ]
  },
  {
    "id": "53f2a3cf.4dd8a4",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3486.824462890625,
    "y": 2393.5740356445312,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "50bbbd16.7373fc"
      ]
    ]
  },
  {
    "id": "aba66972.a33e38",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3475.33349609375,
    "y": 2440,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "6c045770.56d3d"
      ]
    ]
  },
  {
    "id": "50bbbd16.7373fc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3640.3958740234375,
    "y": 2396.8597717285156,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "6c045770.56d3d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3644.33349609375,
    "y": 2441,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "8613884a.623e8",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3936.33349609375,
    "y": 2354.0001220703125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "d23083de.2cf1e",
        "7516fca6.f7fc04"
      ]
    ]
  },
  {
    "id": "7516fca6.f7fc04",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4159.33349609375,
    "y": 2309.0001220703125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "c66357b4.73185"
      ]
    ]
  },
  {
    "id": "d23083de.2cf1e",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4161.33349609375,
    "y": 2373.0001220703125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "a82df7d1.ae6a"
      ]
    ]
  },
  {
    "id": "a82df7d1.ae6a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4320.33349609375,
    "y": 2392.0001220703125,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "c66357b4.73185",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4324.33349609375,
    "y": 2306.0001220703125,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "dffb0ed6.823ba",
        "1dd3dd1b.7300fb"
      ]
    ]
  },
  {
    "id": "634f24c.033d45c",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3938.33349609375,
    "y": 2513.0001220703125,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "165310c1.3dcf57",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3983.33349609375,
    "y": 2423.0001220703125,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "1c4663ba.666f24",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4065.33349609375,
    "y": 2578.0001220703125,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "6481b806.b26798",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3249.33349609375,
    "y": 2386,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "af9ecc7.c2e763",
        "53f2a3cf.4dd8a4",
        "aba66972.a33e38"
      ]
    ]
  },
  {
    "id": "357b021d.ccef76",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3210.33349609375,
    "y": 2330,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "d2628754.9207b8",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3267.33349609375,
    "y": 2048.9998779296875,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "f940533a.3599b",
        "b0b7c077.9433c"
      ]
    ]
  },
  {
    "id": "b0b7c077.9433c",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3490.33349609375,
    "y": 2034.9998779296875,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "c06f7f13.a06918"
      ]
    ]
  },
  {
    "id": "f940533a.3599b",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3492.33349609375,
    "y": 2067.9998779296875,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "1b16d50a.3ac5a3"
      ]
    ]
  },
  {
    "id": "1b16d50a.3ac5a3",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3635.33349609375,
    "y": 2064.9998779296875,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "c06f7f13.a06918",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3638.33349609375,
    "y": 2027.9998779296875,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "f576457.60ef6b8",
        "57336dca.385a1c"
      ]
    ]
  },
  {
    "id": "f576457.60ef6b8",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3832.33349609375,
    "y": 2031,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "df0137f0.20c7a8",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3895.33349609375,
    "y": 2663,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "e2836384.c2ccb8"
      ]
    ]
  },
  {
    "id": "e2836384.c2ccb8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4101.33349609375,
    "y": 2663,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "fca69a38.03a91"
      ]
    ]
  },
  {
    "id": "fca69a38.03a91",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4318.619140625,
    "y": 2661.82177734375,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "7ea58eaa.2fe4c8"
      ]
    ]
  },
  {
    "id": "57336dca.385a1c",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3854.33349609375,
    "y": 2099,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "4f2611a4.8dfaa",
        "d01e89f4.899b8",
        "4dbe2024.2418c8"
      ]
    ]
  },
  {
    "id": "4f2611a4.8dfaa",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4049.8336181640625,
    "y": 2051,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "c7fe21e9.219fb"
      ]
    ]
  },
  {
    "id": "d01e89f4.899b8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4041.8336181640625,
    "y": 2106,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "711f5b9.04549a4"
      ]
    ]
  },
  {
    "id": "4dbe2024.2418c8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4046.8336181640625,
    "y": 2163,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "7a110b6a.211174"
      ]
    ]
  },
  {
    "id": "7a110b6a.211174",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4198.8336181640625,
    "y": 2164,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "711f5b9.04549a4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4209.8336181640625,
    "y": 2109,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "c7fe21e9.219fb",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4194.2159423828125,
    "y": 2048.6556701660156,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "5f7a4387.8903dc"
      ]
    ]
  },
  {
    "id": "dffb0ed6.823ba",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
    "comments": "",
    "x": 4494.33349609375,
    "y": 2267.0001220703125,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "1dd3dd1b.7300fb",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
    "comments": "",
    "x": 4495.33349609375,
    "y": 2372.0001220703125,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "132cb9b4.8d2256",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4490.33349609375,
    "y": 2321.0001220703125,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "7ea58eaa.2fe4c8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4525.45068359375,
    "y": 2651.3404541015625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "9217eff0.7fa96",
        "965ae906.eae45",
        "1b19b6f0.8ece39"
      ]
    ]
  },
  {
    "id": "9217eff0.7fa96",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4740.45068359375,
    "y": 2613.3404541015625,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "965ae906.eae45",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4737.45068359375,
    "y": 2652.3404541015625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "87f8942.95038e8"
      ]
    ]
  },
  {
    "id": "1b19b6f0.8ece39",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4692.95068359375,
    "y": 2694.3404541015625,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "87f8942.95038e8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4917.95068359375,
    "y": 2651.3404541015625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "65d1ff2e.3f2e18"
      ]
    ]
  },
  {
    "id": "65d1ff2e.3f2e18",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5075.95068359375,
    "y": 2651.3404541015625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "fedf1a96.f1456"
      ]
    ]
  },
  {
    "id": "fedf1a96.f1456",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5282.95068359375,
    "y": 2651.3404541015625,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "115bab50.32a055",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4776.33349609375,
    "y": 2067,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "e64c3553.0ae97"
      ]
    ]
  },
  {
    "id": "e64c3553.0ae97",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4953.33349609375,
    "y": 2059,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "a2d6f837.6f757",
        "eeac3b28.315368"
      ]
    ]
  },
  {
    "id": "5f7a4387.8903dc",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4378.33349609375,
    "y": 2063,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "bd77f52.650d108"
      ]
    ]
  },
  {
    "id": "bd77f52.650d108",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4573.33349609375,
    "y": 2063,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "115bab50.32a055",
        "c1dba387.605d3"
      ]
    ]
  },
  {
    "id": "eeac3b28.315368",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5161.33349609375,
    "y": 2066,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "fa5ccc46.c0c8e8",
        "7f544ab3.a923ac",
        "629c31b0.bf54b"
      ]
    ]
  },
  {
    "id": "3e060ac3.b125d6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4955.33349609375,
    "y": 2132,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "a8b3b7de.4e882"
      ]
    ]
  },
  {
    "id": "c1dba387.605d3",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4778.33349609375,
    "y": 2140,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "3e060ac3.b125d6"
      ]
    ]
  },
  {
    "id": "a2d6f837.6f757",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainB id",
    "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5191.33349609375,
    "y": 2014,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "a8b3b7de.4e882",
    "type": "set",
    "name": "set domainB ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5190.33349609375,
    "y": 2256,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "fa5ccc46.c0c8e8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5371.33349609375,
    "y": 2057,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "58f99424.7527f4"
      ]
    ]
  },
  {
    "id": "7f544ab3.a923ac",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5363.33349609375,
    "y": 2112,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "ffe0cce7.8e8ca"
      ]
    ]
  },
  {
    "id": "629c31b0.bf54b",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5368.33349609375,
    "y": 2169,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "cc8477b8.611dc8"
      ]
    ]
  },
  {
    "id": "cc8477b8.611dc8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5520.33349609375,
    "y": 2170,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "ffe0cce7.8e8ca",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5531.33349609375,
    "y": 2115,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "58f99424.7527f4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5515.7158203125,
    "y": 2054.6556701660156,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "f5242e64.71f82"
      ]
    ]
  },
  {
    "id": "f5242e64.71f82",
    "type": "set",
    "name": "set controller domainB data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5730.33349609375,
    "y": 2051,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "20bb7eae.be3a32",
    "type": "set",
    "name": "set LEAF stuff",
    "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
    "comments": "",
    "x": 3229,
    "y": 1661,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "7762f3ae.52a254",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4451,
    "y": 944,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "edff520.fc6aeb",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4443,
    "y": 1034,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "9fcb0922.e08ed",
    "type": "set",
    "name": "set ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
    "comments": "",
    "x": 3210,
    "y": 2517,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "3db2acf8.6fe83c",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3361,
    "y": 2765,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "d8a34ec.a6346b",
    "type": "switchNode",
    "name": "switch found-middle-man?",
    "xml": "<switch test='`$found-middle-man`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3238,
    "y": 2875,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "52347f79.8db4f",
        "cd09ff82.d8b0a8"
      ]
    ]
  },
  {
    "id": "52347f79.8db4f",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3422,
    "y": 2854,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "2a86c6f9.428e32"
      ]
    ]
  },
  {
    "id": "cd09ff82.d8b0a8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3314,
    "y": 5032,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "36762610.1073d2"
      ]
    ]
  },
  {
    "id": "36762610.1073d2",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3469,
    "y": 5025,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "ae52f9b0.eb7378",
        "6bdb71eb.cd7da",
        "5ba113f8.d2a564",
        "536ae5e9.b25a04",
        "5c19cae5.23f224"
      ]
    ]
  },
  {
    "id": "2a86c6f9.428e32",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3565,
    "y": 2854,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "60b7b56f.adea4c",
        "bdc41b3b.e9f9e8",
        "9a7dac44.d03ca8",
        "bedde447.35d04",
        "7fc21231.2a386c",
        "541e3cf1.3cdc4c",
        "8e19f306.cd166",
        "7aa2001.036a58",
        "fd1584d2.77bd18",
        "4d65e0ad.f66548",
        "799454e3.25827c",
        "ca44c46f.688fa8",
        "3e5313a9.d78034",
        "3f9a9e6f.0fc392",
        "f035278d.c09ef",
        "c934426f.9b2fb",
        "a387df7d.b7b76",
        "944ed400.3d2108",
        "e04ee2dc.c84258"
      ]
    ]
  },
  {
    "id": "fd1584d2.77bd18",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3876,
    "y": 3209,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "60b7b56f.adea4c",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3830,
    "y": 3307,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "bdc41b3b.e9f9e8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3966,
    "y": 3354,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "335c026d.7b6e86",
    "type": "comment",
    "name": "Create ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 3797,
    "y": 3158,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "15801117.33a03f",
    "type": "comment",
    "name": "create middle man connectivity and ...",
    "info": "1- create middle man connectivity\n2- create relation with all connectivities\n   in the path\n3- put srcTtp (+dstTtp) somewhere in the\n   vpn-binding -> this is for later on to find\n   which OTN tunnel's bandwidth has to be increased.\n5- create UNIs\n4- create relationship to UNIs",
    "comments": "",
    "x": 4323,
    "y": 3649,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "9a7dac44.d03ca8",
    "type": "execute",
    "name": "execute UUID generator for connectivity middle-man",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-middle-man-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3887,
    "y": 3688,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "bedde447.35d04",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-middle-man-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-middle-man-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<!--The followings are not needed for the middle-man-connectivity-->\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />-->\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='mdsc' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3835,
    "y": 3739,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "7fc21231.2a386c",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-middle-man-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-middle-man-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3971,
    "y": 3786,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "9c57f099.e1906",
    "type": "comment",
    "name": "Create MIDDLE-MAN connectivity",
    "info": "",
    "comments": "",
    "x": 3828,
    "y": 3648,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "c4862f6c.a2a29",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4258,
    "y": 3845,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "541e3cf1.3cdc4c",
    "type": "save",
    "name": "get middle-man connectivity from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $prop.connectivity-middle-man-uuid\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"middle-man-conn\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3849,
    "y": 3892,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "42cf0b77.2dec84",
        "81ea64e.302c518",
        "1a138015.57b74"
      ]
    ]
  },
  {
    "id": "42cf0b77.2dec84",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4096,
    "y": 3846,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "c4862f6c.a2a29"
      ]
    ]
  },
  {
    "id": "81ea64e.302c518",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4096.490966796875,
    "y": 3891.5740356445312,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "396ed743.e6ca6"
      ]
    ]
  },
  {
    "id": "1a138015.57b74",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4094,
    "y": 3935,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "f5385619.47f03"
      ]
    ]
  },
  {
    "id": "396ed743.e6ca6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4259.0623779296875,
    "y": 3891.8597717285156,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "f5385619.47f03",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4263,
    "y": 3936,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "f035278d.c09ef",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3906,
    "y": 4171,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "c934426f.9b2fb",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3909,
    "y": 4216,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "944ed400.3d2108",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3898,
    "y": 4007,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "e04ee2dc.c84258",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3900,
    "y": 4054,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "49a17204.cabfec",
    "type": "comment",
    "name": "The following two will be done in F1",
    "info": "",
    "comments": "",
    "x": 3822,
    "y": 4124,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "f9147a44.abd5d",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4429,
    "y": 4853,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "ae52f9b0.eb7378",
    "type": "switchNode",
    "name": "switch no-pce-call",
    "xml": "<switch test='`$no-pce-call`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3684,
    "y": 5006,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "2031568b.5c466a",
        "d5c3bda4.9d44d"
      ]
    ]
  },
  {
    "id": "d5c3bda4.9d44d",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3856,
    "y": 5003,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "3fb1d79b.8d6fb8"
      ]
    ]
  },
  {
    "id": "2031568b.5c466a",
    "type": "outcomeFalse",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3808,
    "y": 5850,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "ff5eb6bb.d3898"
      ]
    ]
  },
  {
    "id": "35005760.153d9",
    "type": "comment",
    "name": "1 --> PCE is needed",
    "info": "",
    "comments": "",
    "x": 3869,
    "y": 4973,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "53b6adea.273794",
    "type": "comment",
    "name": "2 --> no need to call PCE",
    "info": "",
    "comments": "",
    "x": 3879,
    "y": 5808,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "8e19f306.cd166",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3906,
    "y": 4280,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "3fb1d79b.8d6fb8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4032,
    "y": 5005,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "a4f5d754.33c548",
        "77d0a120.a8d4c8",
        "ea3dea31.55403",
        "faf54698.eda79",
        "e80f8be5.03c42",
        "3b266df3.e7977a",
        "f9147a44.abd5d"
      ]
    ]
  },
  {
    "id": "30197835.1bf978",
    "type": "comment",
    "name": "Use the middle-man-conn.eth-srv-name for the LEAF connectivity's eth srv name",
    "info": "",
    "comments": "",
    "x": 5477,
    "y": 4478,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "a4f5d754.33c548",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4424,
    "y": 5156,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "cce2d7d9.b9218",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3916,
    "y": 4335,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "7aa2001.036a58",
    "type": "save",
    "name": "save connectivityB relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3882,
    "y": 3548,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "2d8b9b70.b52efc",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3342,
    "y": 1767,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "26382876.b9a68",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-p-interface-short`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3249,
    "y": 1714,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "31c62db7.5b8522",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid=tmp.ROOT.uni-p-interface-long",
    "xml": "<set>\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />\n",
    "comments": "",
    "x": 3932,
    "y": 3251,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "4d65e0ad.f66548",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3879,
    "y": 2839,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "799454e3.25827c",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3827,
    "y": 2887,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "ca44c46f.688fa8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3955,
    "y": 2934,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "c038b97c.5e298",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 3792,
    "y": 2797,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "3e5313a9.d78034",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />",
    "comments": "",
    "outputs": 1,
    "x": 3789,
    "y": 3025,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "3f9a9e6f.0fc392",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3882,
    "y": 3078,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "281fc4fa.e1a84c",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 3773,
    "y": 2981,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "9dc1c6e1.2dba4",
    "type": "comment",
    "name": "Create ROOT UNI",
    "info": "",
    "comments": "",
    "x": 3779,
    "y": 3431,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "faf54698.eda79",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4346,
    "y": 4486,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "eb955021.5749d",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4330,
    "y": 4442,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "b9a6d392.b28d6",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 5077,
    "y": 4473,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "bed8a2a5.609b9",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 5164,
    "y": 4515,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "bbe5119a.b6b9a",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$middle-man-conn.etht-svc-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 5112,
    "y": 4563,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "2aa44f99.3f02c8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5240,
    "y": 4610,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "3b266df3.e7977a",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4417,
    "y": 4895,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "bd185a34.34e6a8",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4400,
    "y": 4957,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "77d0a120.a8d4c8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4511,
    "y": 4999,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "915b754b.45601",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 4959,
    "y": 5052,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "8cb093f8.38739",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4269,
    "y": 5750,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "90b420e2.468d1",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4167,
    "y": 5699,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "e890a410.6577f8",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4151,
    "y": 5655,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "ca407fe0.a74b58",
    "type": "save",
    "name": "save the-connectivity relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4957.999755859375,
    "y": 5853,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "ea3dea31.55403",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4338,
    "y": 5056,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "130129c6.4e6896",
        "c2790bbb.b39ef"
      ]
    ]
  },
  {
    "id": "130129c6.4e6896",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4549,
    "y": 5056,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "b2be4205.132768"
      ]
    ]
  },
  {
    "id": "b2be4205.132768",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4705,
    "y": 5052,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "915b754b.45601",
        "3264661d.b6671a",
        "cf1a8f36.08af8"
      ]
    ]
  },
  {
    "id": "c2790bbb.b39ef",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4545,
    "y": 5104,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "1090c9ed.cf8dde"
      ]
    ]
  },
  {
    "id": "1090c9ed.cf8dde",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 4693,
    "y": 5099,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "53ad7751.2dcd08",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5201,
    "y": 4681,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "59db3330.69645c",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2367,
    "y": 92,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "4ebbcee7.69b52",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 2301,
    "y": 128,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "4ea5390e.a52cc",
    "type": "comment",
    "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
    "info": "",
    "comments": "",
    "x": 2486,
    "y": 55,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "37299dd0.22785a",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 4236,
    "y": 5816,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "606aa5ab.2206bc",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4369,
    "y": 5864,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "17ac1f1.6d565e1",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4188,
    "y": 5922,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "7b13241a.22fd54",
        "f9b4895b.fbea48"
      ]
    ]
  },
  {
    "id": "7b13241a.22fd54",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4381,
    "y": 5923,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "827a3a72.ba4bd8"
      ]
    ]
  },
  {
    "id": "827a3a72.ba4bd8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Connectivity should have been created' />\n",
    "comments": "",
    "x": 4537,
    "y": 5920,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "f9b4895b.fbea48",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4385,
    "y": 5967,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "4c414c23.1dfa5c"
      ]
    ]
  },
  {
    "id": "4c414c23.1dfa5c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4524,
    "y": 5962,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "ca407fe0.a74b58",
        "87b885a5.5cf0c8",
        "7c94a6cd.50e738",
        "9f0fa012.5d1bf",
        "fafaba2.e8268c8",
        "25a2525f.49399e",
        "593dba4.344bf44",
        "90f4ba85.137fb",
        "52c2d3cf.976804",
        "274ef282.e256ee",
        "eba4a386.8ade58",
        "91ff8ca0.2410d8"
      ]
    ]
  },
  {
    "id": "593dba4.344bf44",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4721,
    "y": 6641,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "a83c7fc2.c5da78",
        "914d2791.9def8",
        "a0fd345.ac08f48"
      ]
    ]
  },
  {
    "id": "a83c7fc2.c5da78",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4926,
    "y": 6638,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "c1df45ea.8ba52"
      ]
    ]
  },
  {
    "id": "914d2791.9def8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4909.490966796875,
    "y": 6699.574035644531,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "119f1b5d.4e6f5d"
      ]
    ]
  },
  {
    "id": "a0fd345.ac08f48",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4907,
    "y": 6743,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "3791525f.f4d3fe"
      ]
    ]
  },
  {
    "id": "c1df45ea.8ba52",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5082,
    "y": 6652,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "78ac2a8d.cd0874"
      ]
    ]
  },
  {
    "id": "119f1b5d.4e6f5d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5072.0623779296875,
    "y": 6699.859771728516,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "3791525f.f4d3fe",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5074,
    "y": 6742,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "78ac2a8d.cd0874",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5329,
    "y": 6649,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "110b3f91.4725e8"
      ]
    ]
  },
  {
    "id": "110b3f91.4725e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5566,
    "y": 6645,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "e53605cc.b83c3"
      ]
    ]
  },
  {
    "id": "cf79f711.acd51",
    "type": "switchNode",
    "name": "switch vpnuuid is for this slice",
    "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5809,
    "y": 6617,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "f8a0a965.9fe23",
        "b32c6358.b77858"
      ]
    ]
  },
  {
    "id": "f8a0a965.9fe23",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6014,
    "y": 6637,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "e53605cc.b83c3"
      ]
    ]
  },
  {
    "id": "b32c6358.b77858",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6013,
    "y": 6590,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "e53605cc.b83c3",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4757,
    "y": 6912,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "d173aa3d.6dc13"
      ]
    ]
  },
  {
    "id": "fdc415c8.6a0598",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 5606,
    "y": 6817,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "37d800ad.83215",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4819,
    "y": 6588,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "25a2525f.49399e",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4703,
    "y": 6437,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "5323ec48.960894",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5048,
    "y": 6268,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "de0031e3.730958"
      ]
    ]
  },
  {
    "id": "de0031e3.730958",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5268,
    "y": 6274,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "2707e8d8.7ec9d"
      ]
    ]
  },
  {
    "id": "2707e8d8.7ec9d",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5453,
    "y": 6273,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "37890125.bbe60e"
      ]
    ]
  },
  {
    "id": "37890125.bbe60e",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5645,
    "y": 6276,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "95332efd.102e7"
      ]
    ]
  },
  {
    "id": "95332efd.102e7",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5854,
    "y": 6274,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "90f4ba85.137fb",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4755,
    "y": 6262,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "5323ec48.960894"
      ]
    ]
  },
  {
    "id": "7c94a6cd.50e738",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4763,
    "y": 6155,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "b0864a09.98f318",
        "a95b7f6b.2686a",
        "109466fa.601861"
      ]
    ]
  },
  {
    "id": "b0864a09.98f318",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4999,
    "y": 6138,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "a95b7f6b.2686a",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4996,
    "y": 6179,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "109466fa.601861",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5010,
    "y": 6219,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "9f0fa012.5d1bf",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4699,
    "y": 6314,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "fafaba2.e8268c8",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4707,
    "y": 6372,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "87b885a5.5cf0c8",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4712,
    "y": 6112,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "aa72fa33.6435d",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4827,
    "y": 6064,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "d173aa3d.6dc13",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5000,
    "y": 6909,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "cecd58a1.5c073",
        "a1afbc37.0664b8"
      ]
    ]
  },
  {
    "id": "cecd58a1.5c073",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5229,
    "y": 6886,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "217cc28.e6a45be"
      ]
    ]
  },
  {
    "id": "a1afbc37.0664b8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5229,
    "y": 6935,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "217cc28.e6a45be",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5390,
    "y": 6891,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "efcdc93a.a5e52",
        "fdc415c8.6a0598",
        "1d0e63ee.415bac"
      ]
    ]
  },
  {
    "id": "3c8e9462.ad4a14",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 5734,
    "y": 6871,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "1d0e63ee.415bac",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<!--<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $gfp`' />\n\n<parameter name='operational-status' value='Modified' />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5704,
    "y": 6931,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "efcdc93a.a5e52",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 5611,
    "y": 6759,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "ff5eb6bb.d3898",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3960,
    "y": 5849,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "90b420e2.468d1",
        "37299dd0.22785a",
        "606aa5ab.2206bc",
        "17ac1f1.6d565e1",
        "8cb093f8.38739"
      ]
    ]
  },
  {
    "id": "754638fa.2f5ed",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4704,
    "y": 6212,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "52c2d3cf.976804",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4850.999755859375,
    "y": 5934,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "6227c2aa.a1e1a4",
    "type": "comment",
    "name": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "info": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "comments": "",
    "x": 4987.999755859375,
    "y": 5884,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "a387df7d.b7b76",
    "type": "save",
    "name": "save ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3795,
    "y": 3490,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "a7eb3fa1.887168",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3977,
    "y": 1745,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "c5a9fcf9.09d1b",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3955,
    "y": 2615,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "7010bc9b.4157a4",
    "type": "comment",
    "name": "TEMPORARY REMOVING THE FOLLOWING TWO NODES",
    "info": "",
    "comments": "",
    "x": 3786,
    "y": 3957,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "2c9dde75.d2cff2",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3467,
    "y": 5989,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "6bdb71eb.cd7da",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3678,
    "y": 4866,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "5ba113f8.d2a564",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3811,
    "y": 4914,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "e80f8be5.03c42",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4357,
    "y": 4542,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "8d6edd02.689f",
        "977606e5.20b248"
      ]
    ]
  },
  {
    "id": "8d6edd02.689f",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4550,
    "y": 4543,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "5ee87f24.28a388"
      ]
    ]
  },
  {
    "id": "977606e5.20b248",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4554,
    "y": 4587,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "89bf54cd.2d4a38"
      ]
    ]
  },
  {
    "id": "89bf54cd.2d4a38",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4693,
    "y": 4582,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "32dd4db5.fb786a",
        "c09e6974.d8d248",
        "47355e53.0b694"
      ]
    ]
  },
  {
    "id": "5ee87f24.28a388",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4693,
    "y": 4539,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "bed8a2a5.609b9",
        "bbe5119a.b6b9a",
        "2aa44f99.3f02c8",
        "53ad7751.2dcd08"
      ]
    ]
  },
  {
    "id": "32dd4db5.fb786a",
    "type": "set",
    "name": "set prop.connectivity-domainA-uuid",
    "xml": "<set>\n<parameter name='uuid.connectivity-domainA-uuid' value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5095.000244140625,
    "y": 4804,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "62f002ed.2a5444",
    "type": "comment",
    "name": "populate connectivity-A variable in the context map",
    "info": "",
    "comments": "",
    "x": 5102.000244140625,
    "y": 4758,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "274ef282.e256ee",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4892,
    "y": 6537,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "c09e6974.d8d248",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5213.000244140625,
    "y": 4846,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "3264661d.b6671a",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5088,
    "y": 5104,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "7ec54c4d.3b77ec",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3642,
    "y": 4464,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "f9f5a12a.cd0cc",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3976,
    "y": 4647,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "536ae5e9.b25a04",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3588,
    "y": 4514,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "d61393d.72bde7",
        "afea424c.c72b88",
        "48da2e94.b0d678"
      ]
    ]
  },
  {
    "id": "afea424c.c72b88",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3815.490966796875,
    "y": 4486.573974609375,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "74d191cb.7bdf48"
      ]
    ]
  },
  {
    "id": "48da2e94.b0d678",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3811,
    "y": 4530.999938964844,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "d340d8ff.74286"
      ]
    ]
  },
  {
    "id": "74d191cb.7bdf48",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3978.0625,
    "y": 4485.859680175781,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "d340d8ff.74286",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3979,
    "y": 4530.999938964844,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "60eac93d.331ca",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3764,
    "y": 4604,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "a693b00.ef5e95",
        "f9f5a12a.cd0cc"
      ]
    ]
  },
  {
    "id": "d61393d.72bde7",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3595,
    "y": 4604,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "60eac93d.331ca"
      ]
    ]
  },
  {
    "id": "a693b00.ef5e95",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 3953,
    "y": 4596,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "5c19cae5.23f224",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $middle-man-conn.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$middle-man-conn.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3786,
    "y": 4742,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "a02818b5.44468",
    "type": "comment",
    "name": "Temporary skipping this check - to support multiple instances in one slice",
    "info": "",
    "comments": "",
    "x": 5892.88330078125,
    "y": 6554.88330078125,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "47355e53.0b694",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5092.667236328125,
    "y": 4942.08349609375,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "be1641a6.50b31",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5094.884033203125,
    "y": 4901.88330078125,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "cf1a8f36.08af8",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4968.6669921875,
    "y": 5192.08349609375,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "19ccdaa7.ec1b4d",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 4970.8837890625,
    "y": 5151.88330078125,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "66b615d7.25ca4c",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5063.466796875,
    "y": 5647.5166015625,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "ea12eeb9.12b1f",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4890.466796875,
    "y": 5704.5166015625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "7690697f.9ce41",
        "27f9c6d9.503242"
      ]
    ]
  },
  {
    "id": "7690697f.9ce41",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5101.466796875,
    "y": 5704.5166015625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "714a5cc9.4d7a1c"
      ]
    ]
  },
  {
    "id": "27f9c6d9.503242",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5097.466796875,
    "y": 5752.5166015625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "b6a962d8.a724e8"
      ]
    ]
  },
  {
    "id": "714a5cc9.4d7a1c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5257.466796875,
    "y": 5700.5166015625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "1ac18bef.6e71e4",
        "b2d3bd46.bdd318",
        "7d68f1ff.1c9d18"
      ]
    ]
  },
  {
    "id": "b6a962d8.a724e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 5245.466796875,
    "y": 5747.5166015625,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "a02cbc6f.9fe0b8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5523.3505859375,
    "y": 5800.39990234375,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "7d68f1ff.1c9d18",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5521.1337890625,
    "y": 5840.60009765625,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "b2d3bd46.bdd318",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5640.466796875,
    "y": 5752.5166015625,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  },
  {
    "id": "1ac18bef.6e71e4",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5511.466796875,
    "y": 5700.5166015625,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "a899461.9a784b8",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4952.466796875,
    "y": 5605.5166015625,
    "z": "211aaefb.d906ea",
    "wires": []
  },
  {
    "id": "eba4a386.8ade58",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4659.7998046875,
    "y": 5687.5166015625,
    "z": "211aaefb.d906ea",
    "wires": [
      [
        "66b615d7.25ca4c",
        "ea12eeb9.12b1f"
      ]
    ]
  },
  {
    "id": "91ff8ca0.2410d8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4980.832763671875,
    "y": 5989.2001953125,
    "z": "211aaefb.d906ea",
    "wires": [
      []
    ]
  }
]