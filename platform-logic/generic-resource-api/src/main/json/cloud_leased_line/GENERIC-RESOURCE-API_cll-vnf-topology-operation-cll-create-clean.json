[
  {
    "id": "760c3032.024ec8",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 176.56666564941406,
    "y": 129.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "5c65c97e.4fcce"
      ]
    ]
  },
  {
    "id": "5c65c97e.4fcce",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 460.85235595703125,
    "y": 190.8047742843628,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f52e4a2.8e9b7b8"
      ]
    ]
  },
  {
    "id": "f52e4a2.8e9b7b8",
    "type": "method",
    "name": "method cll-vnf-topology-operation-cll-create-clean",
    "xml": "<method rpc='cll-vnf-topology-operation-cll-create-clean' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 466.9952697753906,
    "y": 275.5666961669922,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f52145b6.00f26"
      ]
    ]
  },
  {
    "id": "f52145b6.00f26",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 816.5666656494141,
    "y": 334.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b781570d.1bdc6",
        "a3b9d436.7cd37",
        "916ad2e4.da3bd"
      ]
    ]
  },
  {
    "id": "b781570d.1bdc6",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1117.900161743164,
    "y": 605.4969635009766,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "a3b9d436.7cd37",
    "type": "save",
    "name": "get service-instance from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
    "comments": "",
    "outputs": 1,
    "x": 1139.328628540039,
    "y": 307.8999786376953,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "a44b76d8.232f78",
        "2fc87770.5a98b8",
        "d48f40d3.37656"
      ]
    ]
  },
  {
    "id": "a44b76d8.232f78",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1364.328628540039,
    "y": 165.8999786376953,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "a9f7ac5b.dc2e28"
      ]
    ]
  },
  {
    "id": "2fc87770.5a98b8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1359.819595336914,
    "y": 235.47401428222656,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "87351fcb.5849e"
      ]
    ]
  },
  {
    "id": "d48f40d3.37656",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1348.328628540039,
    "y": 281.8999786376953,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "81b461.b8b3eba"
      ]
    ]
  },
  {
    "id": "ed4dfd16.f55a8",
    "type": "comment",
    "name": "new for TransportSlicing",
    "info": "",
    "comments": "",
    "x": 1118.328628540039,
    "y": 195.8999786376953,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "916ad2e4.da3bd",
    "type": "execute",
    "name": "execute properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
    "comments": "",
    "outputs": 1,
    "x": 1106.328628540039,
    "y": 247.8999786376953,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "a9f7ac5b.dc2e28",
    "type": "switchNode",
    "name": "switch allotted-resources_length != 0",
    "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1604.566665649414,
    "y": 162.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9413aaeb.d092f",
        "4243f2e3.377954"
      ]
    ]
  },
  {
    "id": "87351fcb.5849e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1514.6290435791016,
    "y": 238.4264373779297,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "81b461.b8b3eba",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1518.566665649414,
    "y": 282.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "9413aaeb.d092f",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1809.566665649414,
    "y": 199.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "41ee935e.7af694"
      ]
    ]
  },
  {
    "id": "4243f2e3.377954",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1819.566665649414,
    "y": 126.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "41ee935e.7af694",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1802.566665649414,
    "y": 274.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "48c9f8b7.accfc",
        "4b70868c.ca77",
        "33568fb6.bac76",
        "ed1c5832.299138",
        "629500a0.f350c"
      ]
    ]
  },
  {
    "id": "911385ff.dcfb6",
    "type": "save",
    "name": "get allotted-resource from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2288.566665649414,
    "y": 325.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "7bf84f8a.19dac",
        "e93a24fd.89bb98",
        "b3019feb.2307b"
      ]
    ]
  },
  {
    "id": "7bf84f8a.19dac",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2504.566665649414,
    "y": 392.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "28ff285d.675018"
      ]
    ]
  },
  {
    "id": "e93a24fd.89bb98",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2505.057632446289,
    "y": 292.14064025878906,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "4ef0e01e.f3cdf"
      ]
    ]
  },
  {
    "id": "b3019feb.2307b",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2500.566665649414,
    "y": 341.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "2913a1dc.ae6786"
      ]
    ]
  },
  {
    "id": "48c9f8b7.accfc",
    "type": "for",
    "name": "for each allotted-resource",
    "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2005.566665649414,
    "y": 306.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "8b66b4b0.d208d8",
        "911385ff.dcfb6",
        "79257077.5f1ff8",
        "8a55fb57.dfc438"
      ]
    ]
  },
  {
    "id": "8b66b4b0.d208d8",
    "type": "set",
    "name": "set the current allotted-resource-id",
    "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
    "comments": "",
    "x": 2285.566665649414,
    "y": 244.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "ed1c5832.299138",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
    "comments": "",
    "x": 1979.566665649414,
    "y": 256.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "4b70868c.ca77",
    "type": "get-resource",
    "name": "get-resource pnfs-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/pnfs?depth=0' depth = 0\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
    "comments": "",
    "outputs": 1,
    "x": 2022.566665649414,
    "y": 115.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "33568fb6.bac76",
    "type": "get-resource",
    "name": "get-resource logical-links",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
    "comments": "",
    "outputs": 1,
    "x": 2034.566665649414,
    "y": 156.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "2a477cee.98364c",
    "type": "comment",
    "name": "The following two nodes are for PCE",
    "info": "",
    "comments": "",
    "x": 2059.566665649414,
    "y": 68.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "11e969ea.04e966",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
    "comments": "",
    "x": 1979.566665649414,
    "y": 202.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "4ef0e01e.f3cdf",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 2683.566665649414,
    "y": 294.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "2913a1dc.ae6786",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 2683.504165649414,
    "y": 343.70692443847656,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "28ff285d.675018",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2685.504165649414,
    "y": 394.70692443847656,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ef99d74f.4057d"
      ]
    ]
  },
  {
    "id": "ef99d74f.4057d",
    "type": "save",
    "name": "get allotted-resource relationship from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2978.504165649414,
    "y": 341.70692443847656,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "e456d5f.a155828",
        "7848fc63.19f06c",
        "64a94fba.40e7a"
      ]
    ]
  },
  {
    "id": "7848fc63.19f06c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3281.995101928711,
    "y": 74.28089904785156,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "afcd1c40.b768f"
      ]
    ]
  },
  {
    "id": "afcd1c40.b768f",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3459.566635131836,
    "y": 74.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "64a94fba.40e7a",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3277.504135131836,
    "y": 123.70692443847656,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9649b9cd.238c78"
      ]
    ]
  },
  {
    "id": "9649b9cd.238c78",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3459.504135131836,
    "y": 123.70692443847656,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "e456d5f.a155828",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3281.504135131836,
    "y": 174.70692443847656,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "8fd753ef.f9f648"
      ]
    ]
  },
  {
    "id": "8fd753ef.f9f648",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3461.504135131836,
    "y": 174.70692443847656,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f37cd8dc.622f28"
      ]
    ]
  },
  {
    "id": "f37cd8dc.622f28",
    "type": "switchNode",
    "name": "switch allotted-resource.relationship-list not empty",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2997.566665649414,
    "y": 469.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "d8de60b.2b55ea",
        "6b2e15a0.33589c"
      ]
    ]
  },
  {
    "id": "6b2e15a0.33589c",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3337.566635131836,
    "y": 316.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "d8de60b.2b55ea",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3336.566635131836,
    "y": 370.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "41425976.6167f8"
      ]
    ]
  },
  {
    "id": "d54e5594.aff43",
    "type": "outcome",
    "name": "network-policy",
    "xml": "<outcome value='network-policy'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4081.566635131836,
    "y": 324.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "20569ac4.3ebdd6"
      ]
    ]
  },
  {
    "id": "20569ac4.3ebdd6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4258.566513061523,
    "y": 317.56654357910156,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f7578f2.98aaff",
        "fec27249.f43818"
      ]
    ]
  },
  {
    "id": "41425976.6167f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3500.566635131836,
    "y": 296.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "bf1caed6.dba4d",
        "7892547.06584ac"
      ]
    ]
  },
  {
    "id": "bf1caed6.dba4d",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3781.566635131836,
    "y": 252.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "37857fb8.f82a48"
      ]
    ]
  },
  {
    "id": "37857fb8.f82a48",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4043.566635131836,
    "y": 252.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "d54e5594.aff43"
      ]
    ]
  },
  {
    "id": "f7578f2.98aaff",
    "type": "set",
    "name": "set the 1st network-policy-id",
    "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 4501.566513061523,
    "y": 274.56654357910156,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "fec27249.f43818",
    "type": "save",
    "name": "get network-policy from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
    "comments": "",
    "outputs": 1,
    "x": 4490.566513061523,
    "y": 329.56654357910156,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "7d11439b.9c402c",
        "1159889c.e4b977",
        "672fe755.7cac68"
      ]
    ]
  },
  {
    "id": "672fe755.7cac68",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4741.566879272461,
    "y": 270.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "8e6a85a9.42bd58"
      ]
    ]
  },
  {
    "id": "8e6a85a9.42bd58",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4890.138412475586,
    "y": 270.85243225097656,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "d22f2789.6a3cb",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4889.075912475586,
    "y": 314.99269104003906,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "1159889c.e4b977",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4730.075912475586,
    "y": 314.99269104003906,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "d22f2789.6a3cb"
      ]
    ]
  },
  {
    "id": "7d11439b.9c402c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4737.075912475586,
    "y": 393.99269104003906,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "1927fc16.6351c4"
      ]
    ]
  },
  {
    "id": "1927fc16.6351c4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4876.075912475586,
    "y": 393.99269104003906,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "4ec1a8d7.67b3c8",
        "4af48fa4.c20fa"
      ]
    ]
  },
  {
    "id": "4ec1a8d7.67b3c8",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5081.566879272461,
    "y": 391.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "4af48fa4.c20fa",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5080.566879272461,
    "y": 437.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "7892547.06584ac",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3598.566635131836,
    "y": 368.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ea9b4d5b.2a42f8"
      ]
    ]
  },
  {
    "id": "ea9b4d5b.2a42f8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3878.566635131836,
    "y": 368.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "476ea684.13443"
      ]
    ]
  },
  {
    "id": "476ea684.13443",
    "type": "outcome",
    "name": "logical-link",
    "xml": "<outcome value='logical-link'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2261.5667877197266,
    "y": 781.5667877197266,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "c7ca0b2.bde93f8"
      ]
    ]
  },
  {
    "id": "c7ca0b2.bde93f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2438.566665649414,
    "y": 774.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "86b11ccc.07eb1",
        "5c684ea4.22866"
      ]
    ]
  },
  {
    "id": "86b11ccc.07eb1",
    "type": "set",
    "name": "set the current logical-link-name",
    "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 2681.566665649414,
    "y": 731.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "5c684ea4.22866",
    "type": "save",
    "name": "get logical-link from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
    "comments": "",
    "outputs": 1,
    "x": 2670.566665649414,
    "y": 786.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "2c2754a5.0b7c2c",
        "9ab044d8.9332",
        "6aa476a7.c1db08"
      ]
    ]
  },
  {
    "id": "2c2754a5.0b7c2c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2962.057632446289,
    "y": 765.1406402587891,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "606104a3.7d17dc"
      ]
    ]
  },
  {
    "id": "9ab044d8.9332",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2950.566665649414,
    "y": 809.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "187a718c.4bcdf6"
      ]
    ]
  },
  {
    "id": "606104a3.7d17dc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3110.629165649414,
    "y": 765.4264068603516,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "187a718c.4bcdf6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3109.566665649414,
    "y": 809.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "6aa476a7.c1db08",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2957.566665649414,
    "y": 888.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9fd32ca0.d84048"
      ]
    ]
  },
  {
    "id": "9fd32ca0.d84048",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3096.566665649414,
    "y": 888.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "7a7db7d4.95d8d",
        "95e88e5b.59dc68",
        "ccbad682.f9f6e",
        "51c5f691.62046",
        "c524ae07.05ca4",
        "573995f0.c3e824",
        "40c97410.34efdc",
        "3ceacdf9.dad772",
        "37ff3aef.9a54ee",
        "a62852b2.29136",
        "e4c9b14e.e493e",
        "a5e91f89.51e28",
        "6a1545ce.c6f074",
        "fcc163b9.6d6e2",
        "c9e93381.966988",
        "5fc9799.82ba788",
        "7ebd6769.0b5428",
        "9fbb56ee.c43378",
        "387e5bde.fd50e4",
        "a78822a6.5321b",
        "a4c94b0b.1b4718"
      ]
    ]
  },
  {
    "id": "8a5fb9f9.eee92",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3445.566665649414,
    "y": 422.56663513183594,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "7a7db7d4.95d8d",
    "type": "execute",
    "name": "execute UUID generator for otn-tunnel-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3426.566604614258,
    "y": 501.56663513183594,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "fcc163b9.6d6e2",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 3383.566604614258,
    "y": 546.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "95e88e5b.59dc68",
    "type": "set",
    "name": "set network-route-one",
    "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
    "comments": "",
    "x": 3348.566635131836,
    "y": 600.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "ccbad682.f9f6e",
    "type": "set",
    "name": "set network-route-two",
    "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
    "comments": "",
    "x": 3349.566635131836,
    "y": 655.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "51c5f691.62046",
    "type": "save",
    "name": "get network-route-one from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
    "comments": "",
    "outputs": 1,
    "x": 3347.566635131836,
    "y": 919.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ab7d525c.39024",
        "e9514e17.b4663",
        "e95aa54a.0cb1c8"
      ]
    ]
  },
  {
    "id": "c524ae07.05ca4",
    "type": "save",
    "name": "get network-route-two from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
    "comments": "",
    "outputs": 1,
    "x": 3342.566635131836,
    "y": 980.5665130615234,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ba38cd77.3ddd8",
        "3fe85825.5036d",
        "4b77c928.b0503"
      ]
    ]
  },
  {
    "id": "ab7d525c.39024",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3658.566635131836,
    "y": 690.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "a41dfa2.144c608"
      ]
    ]
  },
  {
    "id": "e9514e17.b4663",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3654.075668334961,
    "y": 739.9926605224609,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "88fea61b.80803"
      ]
    ]
  },
  {
    "id": "e95aa54a.0cb1c8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3658.075668334961,
    "y": 792.9926605224609,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "5f495b77.8e475c"
      ]
    ]
  },
  {
    "id": "a41dfa2.144c608",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3807.138168334961,
    "y": 689.8524017333984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "88fea61b.80803",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3797.075668334961,
    "y": 739.9926605224609,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "ba38cd77.3ddd8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3620.566604614258,
    "y": 880.5664825439453,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "5d8c160b.0c4ea8"
      ]
    ]
  },
  {
    "id": "3fe85825.5036d",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3616.075668334961,
    "y": 922.9925384521484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b6433621.de36a"
      ]
    ]
  },
  {
    "id": "4b77c928.b0503",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3617.075668334961,
    "y": 975.9925384521484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "999aafa8.043a8"
      ]
    ]
  },
  {
    "id": "5d8c160b.0c4ea8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3769.138137817383,
    "y": 879.8522491455078,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "b6433621.de36a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3759.075668334961,
    "y": 922.9925384521484,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "5f495b77.8e475c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3819.566635131836,
    "y": 792.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f4d50ce3.687d98"
      ]
    ]
  },
  {
    "id": "999aafa8.043a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3770.566635131836,
    "y": 975.5665130615234,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "6c0d4a32.4f3524"
      ]
    ]
  },
  {
    "id": "f4d50ce3.687d98",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3994.566635131836,
    "y": 766.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "e8eddbb7.6cfbd",
        "54846c0d.33a74c",
        "b03ebc69.8e68d8"
      ]
    ]
  },
  {
    "id": "6c0d4a32.4f3524",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3954.566635131836,
    "y": 883.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "4f37a3d1.2e362c",
        "efd815b8.8e6db8",
        "65095290.735c7c"
      ]
    ]
  },
  {
    "id": "e8eddbb7.6cfbd",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4116.566635131836,
    "y": 551.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "c7edad0e.b216"
      ]
    ]
  },
  {
    "id": "54846c0d.33a74c",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4118.566635131836,
    "y": 605.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "d5f61daa.4b4388"
      ]
    ]
  },
  {
    "id": "4f37a3d1.2e362c",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4135.566665649414,
    "y": 821.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "81e90993.f1d9a8"
      ]
    ]
  },
  {
    "id": "efd815b8.8e6db8",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4137.566665649414,
    "y": 875.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "da2103e1.15169"
      ]
    ]
  },
  {
    "id": "f5d37541.2d47c8",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4426.566635131836,
    "y": 503.56663513183594,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "2bfe954c.51473a",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4419.566635131836,
    "y": 601.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "9391f162.46d07",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4437.566665649414,
    "y": 794.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "8da0410.b4be6c",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4441.566665649414,
    "y": 887.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "c685a00a.7f3668",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3584.566665649414,
    "y": 1559.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "3e8c64de.c5d6ac"
      ]
    ]
  },
  {
    "id": "c307eb50.c4efc",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3594.057632446289,
    "y": 1602.1407012939453,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "a457c21e.dc24c"
      ]
    ]
  },
  {
    "id": "fe413554.38fd68",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3582.566665649414,
    "y": 1648.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f7393df4.54a488"
      ]
    ]
  },
  {
    "id": "940c17a9.af2df",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3284.566665649414,
    "y": 1521.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "40c97410.34efdc",
    "type": "save",
    "name": "get p-interface-src from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3327.566665649414,
    "y": 1586.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "c685a00a.7f3668",
        "c307eb50.c4efc",
        "fe413554.38fd68"
      ]
    ]
  },
  {
    "id": "573995f0.c3e824",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3328.566665649414,
    "y": 1256.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ce053797.967e5",
        "1d8318a4.118f1f"
      ]
    ]
  },
  {
    "id": "1d8318a4.118f1f",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3549.566635131836,
    "y": 1309.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "d7acba72.b8d088"
      ]
    ]
  },
  {
    "id": "ce053797.967e5",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3551.566635131836,
    "y": 1342.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b936608f.415c9"
      ]
    ]
  },
  {
    "id": "3e8c64de.c5d6ac",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3757.233169555664,
    "y": 1558.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "61a62886.979d9",
        "69747a1f.4d36a4"
      ]
    ]
  },
  {
    "id": "a457c21e.dc24c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3747.6290435791016,
    "y": 1605.4264373779297,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "f7393df4.54a488",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3751.566665649414,
    "y": 1649.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "61a62886.979d9",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4021.566665649414,
    "y": 1542.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "d27c3919.e4f1e8",
        "744ce69a.cd2cd"
      ]
    ]
  },
  {
    "id": "744ce69a.cd2cd",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4244.566665649414,
    "y": 1497.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "d24d75df.899958"
      ]
    ]
  },
  {
    "id": "d27c3919.e4f1e8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4246.566665649414,
    "y": 1561.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "195cae09.6a270a"
      ]
    ]
  },
  {
    "id": "195cae09.6a270a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4408.566665649414,
    "y": 1557.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "d24d75df.899958",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4409.566665649414,
    "y": 1494.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "64761578.742944",
        "545ae19b.2a1238"
      ]
    ]
  },
  {
    "id": "b936608f.415c9",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3694.566635131836,
    "y": 1339.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "d7acba72.b8d088",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3697.566635131836,
    "y": 1302.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "66afead4.578fec",
        "d914a00d.43d42"
      ]
    ]
  },
  {
    "id": "66afead4.578fec",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3871.566635131836,
    "y": 1258.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "69747a1f.4d36a4",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3970.566635131836,
    "y": 1652.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "6692ad9d.63a244"
      ]
    ]
  },
  {
    "id": "6692ad9d.63a244",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4176.566635131836,
    "y": 1652.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "efeaf290.376e48"
      ]
    ]
  },
  {
    "id": "efeaf290.376e48",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4391.852279663086,
    "y": 1652.388412475586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9388038d.e5f508"
      ]
    ]
  },
  {
    "id": "d914a00d.43d42",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3886.566635131836,
    "y": 1369.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "3150a2ed.678f16",
        "5769f8b6.da962",
        "c8b63edf.598bb8"
      ]
    ]
  },
  {
    "id": "3150a2ed.678f16",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4082.0667572021484,
    "y": 1321.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "47f6939a.0cca7c"
      ]
    ]
  },
  {
    "id": "5769f8b6.da962",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4074.0667572021484,
    "y": 1376.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "dfce5624.4d0e8"
      ]
    ]
  },
  {
    "id": "c8b63edf.598bb8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4079.0667572021484,
    "y": 1433.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "16d53904.a69817"
      ]
    ]
  },
  {
    "id": "16d53904.a69817",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4231.066757202148,
    "y": 1434.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "dfce5624.4d0e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4242.066757202148,
    "y": 1379.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "47f6939a.0cca7c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4226.449081420898,
    "y": 1319.2223052978516,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "57719ed2.829e5"
      ]
    ]
  },
  {
    "id": "57719ed2.829e5",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4410.566635131836,
    "y": 1333.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "8b55301b.b943a8"
      ]
    ]
  },
  {
    "id": "545ae19b.2a1238",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
    "comments": "",
    "x": 4579.566665649414,
    "y": 1452.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "64761578.742944",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
    "comments": "",
    "x": 4580.566665649414,
    "y": 1560.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "3bbb3a78.1e825e",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4581.566665649414,
    "y": 1509.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "9388038d.e5f508",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4598.683822631836,
    "y": 1652.906967163086,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "13805827.ade3d",
        "a9502d93.1e2b78",
        "a1b1941b.f9c738"
      ]
    ]
  },
  {
    "id": "13805827.ade3d",
    "type": "set",
    "name": "set source ttp-id",
    "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4813.683822631836,
    "y": 1614.906967163086,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "a9502d93.1e2b78",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4810.683822631836,
    "y": 1653.906967163086,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b0dee9b7.4f5918"
      ]
    ]
  },
  {
    "id": "a1b1941b.f9c738",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4766.183822631836,
    "y": 1695.906967163086,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "b0dee9b7.4f5918",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4991.183822631836,
    "y": 1652.906967163086,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "915aa3e1.c4697"
      ]
    ]
  },
  {
    "id": "25f4a2bf.12e7a6",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4810.566665649414,
    "y": 1270.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "5118de9a.01dd88"
      ]
    ]
  },
  {
    "id": "5118de9a.01dd88",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4987.566665649414,
    "y": 1262.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "94a9a0f9.c59e58",
        "85408268.2c3368"
      ]
    ]
  },
  {
    "id": "8b55301b.b943a8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4605.566635131836,
    "y": 1333.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "25f4a2bf.12e7a6",
        "95e8d812.cc8ca8"
      ]
    ]
  },
  {
    "id": "95e8d812.cc8ca8",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4813.566665649414,
    "y": 1344.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f38eef5.12b7d1"
      ]
    ]
  },
  {
    "id": "f38eef5.12b7d1",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4990.566665649414,
    "y": 1336.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "c816565f.10d5d"
      ]
    ]
  },
  {
    "id": "915aa3e1.c4697",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5149.183822631836,
    "y": 1652.906967163086,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "6c003d6.b17f944"
      ]
    ]
  },
  {
    "id": "6c003d6.b17f944",
    "type": "set",
    "name": "set source tunnel tp ip",
    "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5356.183822631836,
    "y": 1652.906967163086,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "85408268.2c3368",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5195.566665649414,
    "y": 1269.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "53b236d8.1b02c",
        "4083b24b.fff034",
        "39446af.e663d96"
      ]
    ]
  },
  {
    "id": "94a9a0f9.c59e58",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainA id",
    "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5225.566665649414,
    "y": 1217.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "53b236d8.1b02c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5405.566665649414,
    "y": 1260.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "85a67c1c.71be78"
      ]
    ]
  },
  {
    "id": "4083b24b.fff034",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5397.566665649414,
    "y": 1315.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ef1cd568.ee18"
      ]
    ]
  },
  {
    "id": "39446af.e663d96",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5402.566665649414,
    "y": 1372.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9b4ff565.a53cd"
      ]
    ]
  },
  {
    "id": "9b4ff565.a53cd",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5554.566665649414,
    "y": 1373.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "ef1cd568.ee18",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5565.566665649414,
    "y": 1318.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "85a67c1c.71be78",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5549.948989868164,
    "y": 1258.2223358154297,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "53e9aeb2.242928"
      ]
    ]
  },
  {
    "id": "c816565f.10d5d",
    "type": "set",
    "name": "set domainA ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5225.566665649414,
    "y": 1460.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "53e9aeb2.242928",
    "type": "set",
    "name": "set controller domainA data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5764.566665649414,
    "y": 1254.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "bd4af2f9.e804e",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4414.566635131836,
    "y": 539.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "ff102e0b.75a238",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4405.566635131836,
    "y": 637.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "c7edad0e.b216",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4239.566635131836,
    "y": 545.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f5d37541.2d47c8",
        "bd4af2f9.e804e"
      ]
    ]
  },
  {
    "id": "d5f61daa.4b4388",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4245.566635131836,
    "y": 609.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "2bfe954c.51473a",
        "ff102e0b.75a238"
      ]
    ]
  },
  {
    "id": "81e90993.f1d9a8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4263.566665649414,
    "y": 821.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9391f162.46d07",
        "cb81a4f3.d6156"
      ]
    ]
  },
  {
    "id": "da2103e1.15169",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4266.566665649414,
    "y": 874.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "8da0410.b4be6c",
        "e6103926.96cb88"
      ]
    ]
  },
  {
    "id": "cb81a4f3.d6156",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4423.566665649414,
    "y": 834.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "e6103926.96cb88",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4426.566665649414,
    "y": 925.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "9fb68dad.7c92d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3718.566635131836,
    "y": 2052.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "931d0e50.a84728",
        "4385be6.d4f41c"
      ]
    ]
  },
  {
    "id": "62a0ff40.3fa718",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3545.900131225586,
    "y": 2053.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9fb68dad.7c92d"
      ]
    ]
  },
  {
    "id": "a9db3cf5.8c98a8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3555.391098022461,
    "y": 2096.140670776367,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b1d5af05.b8b6a"
      ]
    ]
  },
  {
    "id": "e64b0ffd.d5764",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3543.900131225586,
    "y": 2142.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "c5461a06.0ba95"
      ]
    ]
  },
  {
    "id": "b1d5af05.b8b6a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3708.9625091552734,
    "y": 2099.4264068603516,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "c5461a06.0ba95",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3712.900131225586,
    "y": 2143.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "931d0e50.a84728",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4004.900131225586,
    "y": 2056.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ff2f7e35.94528",
        "ccece71a.073de8"
      ]
    ]
  },
  {
    "id": "ccece71a.073de8",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4227.900131225586,
    "y": 2011.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "c18c40eb.b59cb8"
      ]
    ]
  },
  {
    "id": "ff2f7e35.94528",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4229.900131225586,
    "y": 2075.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "a47e6ec9.683da"
      ]
    ]
  },
  {
    "id": "a47e6ec9.683da",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4388.900131225586,
    "y": 2094.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "c18c40eb.b59cb8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4392.900131225586,
    "y": 2008.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "50191e6c.286e58",
        "e564295c.7502a8"
      ]
    ]
  },
  {
    "id": "37ff3aef.9a54ee",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3317.900131225586,
    "y": 2088.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "62a0ff40.3fa718",
        "a9db3cf5.8c98a8",
        "e64b0ffd.d5764"
      ]
    ]
  },
  {
    "id": "e2a5ba2c.d267c",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3278.900131225586,
    "y": 2032.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "3ceacdf9.dad772",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3337.900131225586,
    "y": 1828.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "fc191473.db2cb8",
        "44d4fd2b.8896cc"
      ]
    ]
  },
  {
    "id": "44d4fd2b.8896cc",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3560.900131225586,
    "y": 1814.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "e4dd083d.cd18f8"
      ]
    ]
  },
  {
    "id": "fc191473.db2cb8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3562.900131225586,
    "y": 1847.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "28eac456.f04cbc"
      ]
    ]
  },
  {
    "id": "28eac456.f04cbc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3705.900131225586,
    "y": 1844.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "e4dd083d.cd18f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3708.900131225586,
    "y": 1807.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "c8368cdf.b15f18",
        "26325ab5.37c516"
      ]
    ]
  },
  {
    "id": "c8368cdf.b15f18",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3902.900131225586,
    "y": 1810.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "4385be6.d4f41c",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3955.900100708008,
    "y": 2179.566604614258,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ab5afaa2.b8a2e"
      ]
    ]
  },
  {
    "id": "ab5afaa2.b8a2e",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4161.900100708008,
    "y": 2179.566604614258,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "8b90a37d.df48a8"
      ]
    ]
  },
  {
    "id": "8b90a37d.df48a8",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4379.185745239258,
    "y": 2178.388381958008,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9497250f.2d9438"
      ]
    ]
  },
  {
    "id": "26325ab5.37c516",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3924.900131225586,
    "y": 1878.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "572475c6.9df474",
        "8a4bcee9.a6e838",
        "52414e68.698aa8"
      ]
    ]
  },
  {
    "id": "572475c6.9df474",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4120.400253295898,
    "y": 1830.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "cc04a6ba.577058"
      ]
    ]
  },
  {
    "id": "8a4bcee9.a6e838",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4112.400253295898,
    "y": 1885.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "5bcad340.b7a94c"
      ]
    ]
  },
  {
    "id": "52414e68.698aa8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4117.400253295898,
    "y": 1942.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "78c91f5c.6a81a"
      ]
    ]
  },
  {
    "id": "78c91f5c.6a81a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4269.400253295898,
    "y": 1943.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "5bcad340.b7a94c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4280.400253295898,
    "y": 1888.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "cc04a6ba.577058",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4264.782577514648,
    "y": 1828.222427368164,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b056f70a.5ef0e"
      ]
    ]
  },
  {
    "id": "50191e6c.286e58",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
    "comments": "",
    "x": 4562.900131225586,
    "y": 1969.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "e564295c.7502a8",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
    "comments": "",
    "x": 4563.900131225586,
    "y": 2074.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "4a5f1f34.b170c",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4558.900131225586,
    "y": 2023.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "9497250f.2d9438",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4586.017288208008,
    "y": 2167.9070587158203,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "dc5203d6.63ee88",
        "bfaf928b.d789b",
        "75ef4dfa.4963fc"
      ]
    ]
  },
  {
    "id": "dc5203d6.63ee88",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4801.017288208008,
    "y": 2129.9070587158203,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "bfaf928b.d789b",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4798.017288208008,
    "y": 2168.9070587158203,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "6dd4b7bc.60078"
      ]
    ]
  },
  {
    "id": "75ef4dfa.4963fc",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4753.517288208008,
    "y": 2210.9070587158203,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "6dd4b7bc.60078",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4978.517288208008,
    "y": 2167.9070587158203,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f825fb77.fb7bc8"
      ]
    ]
  },
  {
    "id": "f825fb77.fb7bc8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5136.517288208008,
    "y": 2167.9070587158203,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "aa2ab587.72eca"
      ]
    ]
  },
  {
    "id": "aa2ab587.72eca",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5343.517288208008,
    "y": 2167.9070587158203,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "5ec77bbd.698654",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4846.900131225586,
    "y": 1846.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ef66532c.d6746"
      ]
    ]
  },
  {
    "id": "ef66532c.d6746",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5023.900131225586,
    "y": 1838.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f7a2f11b.7a291",
        "d2b30e12.01e548"
      ]
    ]
  },
  {
    "id": "b056f70a.5ef0e",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4448.900131225586,
    "y": 1842.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "658c9b9.fce64e4"
      ]
    ]
  },
  {
    "id": "658c9b9.fce64e4",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4643.900131225586,
    "y": 1842.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "5ec77bbd.698654",
        "d91be682.fd9ed8"
      ]
    ]
  },
  {
    "id": "d2b30e12.01e548",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5231.900131225586,
    "y": 1845.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "5cd3941f.991a64",
        "72be6080.49369",
        "27b21fad.3c3a98"
      ]
    ]
  },
  {
    "id": "a895224b.6a3d58",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5025.900131225586,
    "y": 1911.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "de5c0fa7.2ddfe8"
      ]
    ]
  },
  {
    "id": "d91be682.fd9ed8",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4848.900131225586,
    "y": 1919.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "a895224b.6a3d58"
      ]
    ]
  },
  {
    "id": "f7a2f11b.7a291",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainB id",
    "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5261.900131225586,
    "y": 1793.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "de5c0fa7.2ddfe8",
    "type": "set",
    "name": "set domainB ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5260.900131225586,
    "y": 2035.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "5cd3941f.991a64",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5441.900131225586,
    "y": 1836.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "2d963acb.7812d6"
      ]
    ]
  },
  {
    "id": "72be6080.49369",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5433.900131225586,
    "y": 1891.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "7809e6f0.3ba7a"
      ]
    ]
  },
  {
    "id": "27b21fad.3c3a98",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5438.900131225586,
    "y": 1948.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "76fc1345.ebf534"
      ]
    ]
  },
  {
    "id": "76fc1345.ebf534",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5590.900131225586,
    "y": 1949.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "7809e6f0.3ba7a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5601.900131225586,
    "y": 1894.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "2d963acb.7812d6",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5586.282455444336,
    "y": 1834.222427368164,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "3e96d581.6be972"
      ]
    ]
  },
  {
    "id": "3e96d581.6be972",
    "type": "set",
    "name": "set controller domainB data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5800.900131225586,
    "y": 1830.5667572021484,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "a62852b2.29136",
    "type": "set",
    "name": "set LEAF stuff",
    "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop + '-' + $tmp.aai.network-route-A.logical-interface-id`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
    "comments": "",
    "x": 3285.566635131836,
    "y": 1649.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "906a6d5d.cfc198",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4581.566635131836,
    "y": 623.5666351318359,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "c5fcfc8e.70af78",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4591.566665649414,
    "y": 819.5666656494141,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "e4c9b14e.e493e",
    "type": "set",
    "name": "set ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop + '-' + $tmp.aai.network-route-B.logical-interface-id`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
    "comments": "",
    "x": 3288.566604614258,
    "y": 2157.566604614258,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "a5e91f89.51e28",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3425.566665649414,
    "y": 2813.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "6a1545ce.c6f074",
    "type": "switchNode",
    "name": "switch found-middle-man?",
    "xml": "<switch test='`$found-middle-man`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3302.566665649414,
    "y": 2923.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "2a58524.cf6ab2e",
        "b22f43e3.b228e"
      ]
    ]
  },
  {
    "id": "2a58524.cf6ab2e",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3486.566665649414,
    "y": 2902.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "1fd47368.eaee3d"
      ]
    ]
  },
  {
    "id": "b22f43e3.b228e",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3378.566665649414,
    "y": 5080.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "bb1800d1.b22838"
      ]
    ]
  },
  {
    "id": "bb1800d1.b22838",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3533.566665649414,
    "y": 5073.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "eb692208.605d48",
        "fa1a129b.8e1e58",
        "8f8ab353.277fd8",
        "e967635e.d5f898",
        "a7e951fd.34174",
        "147222b6.72d4a5"
      ]
    ]
  },
  {
    "id": "1fd47368.eaee3d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3629.566665649414,
    "y": 2902.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "13be4810.27374",
        "2088078d.cb1e2",
        "e3bae41.89a4a98",
        "ed9405a6.bcc818",
        "fe194fc5.986bf",
        "c94ba2a6.6d9dc",
        "49793ec.cd6ce4",
        "5e8a3143.8db73",
        "faf103f5.4614f8",
        "88431892.8e89b8",
        "cac051ff.1079b",
        "8ab931f2.10742",
        "38387e07.eee06a",
        "c16c558d.bd7fa8",
        "773efcf1.a16054",
        "4610b0f7.2e9108",
        "9860b974.593a3",
        "e82d41b7.567df",
        "763bc2b5.d71f9c",
        "3cc87f7.3864a",
        "5fefabc6.f62f5c",
        "dbd95dbb.cf097"
      ]
    ]
  },
  {
    "id": "faf103f5.4614f8",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3939.566665649414,
    "y": 3217.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "13be4810.27374",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3887.566665649414,
    "y": 3259.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "2088078d.cb1e2",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4016.566665649414,
    "y": 3301.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "c56513f7.9839c8",
    "type": "comment",
    "name": "Create ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 3862.566665649414,
    "y": 3176.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "cb0612e7.fab918",
    "type": "comment",
    "name": "create middle man connectivity and ...",
    "info": "1- create middle man connectivity\n2- create relation with all connectivities\n   in the path\n3- put srcTtp (+dstTtp) somewhere in the\n   vpn-binding -> this is for later on to find\n   which OTN tunnel's bandwidth has to be increased.\n5- create UNIs\n4- create relationship to UNIs",
    "comments": "",
    "x": 4387.566665649414,
    "y": 3697.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "e3bae41.89a4a98",
    "type": "execute",
    "name": "execute UUID generator for connectivity middle-man",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-middle-man-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3951.566665649414,
    "y": 3736.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "ed9405a6.bcc818",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-middle-man-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-middle-man-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<!--The followings are not needed for the middle-man-connectivity-->\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />-->\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='mdsc' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3899.566665649414,
    "y": 3787.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "fe194fc5.986bf",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-middle-man-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-middle-man-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4035.566665649414,
    "y": 3834.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "3a844032.bf9ac",
    "type": "comment",
    "name": "Create MIDDLE-MAN connectivity",
    "info": "",
    "comments": "",
    "x": 3892.566665649414,
    "y": 3696.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "debaf07d.db6d5",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4322.566665649414,
    "y": 3893.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "c94ba2a6.6d9dc",
    "type": "save",
    "name": "get middle-man connectivity from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $prop.connectivity-middle-man-uuid\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"middle-man-conn\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3913.566665649414,
    "y": 3940.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "34b4bb6d.84f2ec",
        "39b05e8d.991162",
        "b7823394.4e1968"
      ]
    ]
  },
  {
    "id": "34b4bb6d.84f2ec",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4160.566665649414,
    "y": 3894.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "debaf07d.db6d5"
      ]
    ]
  },
  {
    "id": "39b05e8d.991162",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4161.057632446289,
    "y": 3940.1407012939453,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "483dd1d6.aa392"
      ]
    ]
  },
  {
    "id": "b7823394.4e1968",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4158.566665649414,
    "y": 3983.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "59b157ce.93edc"
      ]
    ]
  },
  {
    "id": "483dd1d6.aa392",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4323.629043579102,
    "y": 3940.4264373779297,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "59b157ce.93edc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4327.566665649414,
    "y": 3984.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "773efcf1.a16054",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3967.566665649414,
    "y": 4282.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "4610b0f7.2e9108",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3970.566665649414,
    "y": 4327.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "e82d41b7.567df",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3962.566665649414,
    "y": 4055.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "763bc2b5.d71f9c",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3964.566665649414,
    "y": 4102.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "e3efee4c.cbd228",
    "type": "comment",
    "name": "The following two will be done in F1",
    "info": "",
    "comments": "",
    "x": 3883.566665649414,
    "y": 4235.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "a86d756f.b96748",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4493.566665649414,
    "y": 4901.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "eb692208.605d48",
    "type": "switchNode",
    "name": "switch no-pce-call",
    "xml": "<switch test='`$no-pce-call`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3748.566665649414,
    "y": 5054.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "35961804.034dd",
        "1c6960fb.af77c7"
      ]
    ]
  },
  {
    "id": "1c6960fb.af77c7",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3920.566665649414,
    "y": 5051.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "44ac8602.f7b438"
      ]
    ]
  },
  {
    "id": "35961804.034dd",
    "type": "outcomeFalse",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3872.566665649414,
    "y": 5898.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "e66ef561.f9598"
      ]
    ]
  },
  {
    "id": "a7546f8d.e642f8",
    "type": "comment",
    "name": "1 --> PCE is needed",
    "info": "",
    "comments": "",
    "x": 3933.566665649414,
    "y": 5021.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "7377305c.6344e",
    "type": "comment",
    "name": "2 --> no need to call PCE",
    "info": "",
    "comments": "",
    "x": 3943.566665649414,
    "y": 5856.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "49793ec.cd6ce4",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3966.566665649414,
    "y": 4430.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "44ac8602.f7b438",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4096.566665649414,
    "y": 5053.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f2639d5b.9b3268",
        "eb43383.cb911c8",
        "b431bc46.f09eb8",
        "3f007800.f3335",
        "6651db46.728784",
        "ec10a332.513d58",
        "a86d756f.b96748",
        "128b476.c3c24b9",
        "b1e27ce1.629f7"
      ]
    ]
  },
  {
    "id": "3a4a9e77.4fc502",
    "type": "comment",
    "name": "Use the middle-man-conn.eth-srv-name for the LEAF connectivity's eth srv name",
    "info": "",
    "comments": "",
    "x": 5541.566665649414,
    "y": 4526.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "f2639d5b.9b3268",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4474.566665649414,
    "y": 5556.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "5e8a3143.8db73",
    "type": "save",
    "name": "save connectivityB relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3945.566665649414,
    "y": 3430.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "88431892.8e89b8",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3943.566665649414,
    "y": 2887.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "cac051ff.1079b",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3891.566665649414,
    "y": 2935.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "8ab931f2.10742",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4019.566665649414,
    "y": 2982.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "be22c48f.b88288",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 3856.566665649414,
    "y": 2845.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "38387e07.eee06a",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />\n<parameter name='data-owner' value='`$tmp.aai.service-instance.service-instance-id`' />",
    "comments": "",
    "outputs": 1,
    "x": 3853.566665649414,
    "y": 3073.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "c16c558d.bd7fa8",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3946.566665649414,
    "y": 3126.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "8249248d.fd861",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 3837.566665649414,
    "y": 3029.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "8a8f5ba9.d4da6",
    "type": "comment",
    "name": "Create ROOT UNI",
    "info": "",
    "comments": "",
    "x": 3841.566665649414,
    "y": 3345.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "3f007800.f3335",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />\n<parameter name='data-owner' value='`$tmp.aai.service-instance.service-instance-id`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4410.566665649414,
    "y": 4534.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "5bce380a.32d878",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4394.566665649414,
    "y": 4490.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "1b090d31.1314e3",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 5141.566665649414,
    "y": 4521.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "c30363c7.dd0dc",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 5228.566665649414,
    "y": 4563.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "10271018.94b4f8",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$middle-man-conn.etht-svc-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 5176.566665649414,
    "y": 4611.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "285754a8.44159c",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5304.566665649414,
    "y": 4658.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "ec10a332.513d58",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4481.566665649414,
    "y": 4943.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "572f6814.fa386",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4464.566665649414,
    "y": 5005.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "eb43383.cb911c8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4575.566665649414,
    "y": 5047.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "8c58cbc3.7f4b88",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5023.566665649414,
    "y": 5100.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "be5aff94.f7d12",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4333.566665649414,
    "y": 5798.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "526f34d0.18befc",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />\n<parameter name='data-owner' value='`$tmp.aai.service-instance.service-instance-id`' />",
    "comments": "",
    "outputs": 1,
    "x": 4231.566665649414,
    "y": 5747.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "6826024b.ca723c",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4215.566665649414,
    "y": 5703.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "be0ba193.2dd698",
    "type": "save",
    "name": "save the-connectivity relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5001.566665649414,
    "y": 5960.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "b431bc46.f09eb8",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4402.566665649414,
    "y": 5104.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "baf822c4.3f205",
        "32a48883.ef2b98"
      ]
    ]
  },
  {
    "id": "baf822c4.3f205",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4613.566665649414,
    "y": 5104.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "58c9a296.a42094"
      ]
    ]
  },
  {
    "id": "58c9a296.a42094",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4769.566665649414,
    "y": 5100.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "8c58cbc3.7f4b88",
        "3aab431e.930194",
        "c5e59db3.c67ea"
      ]
    ]
  },
  {
    "id": "32a48883.ef2b98",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4609.566665649414,
    "y": 5152.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "255e5d4d.31482a"
      ]
    ]
  },
  {
    "id": "255e5d4d.31482a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 4757.566665649414,
    "y": 5147.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "3647078f.866d7",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5265.566665649414,
    "y": 4729.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "79257077.5f1ff8",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2431.566665649414,
    "y": 140.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "8a55fb57.dfc438",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 2365.566665649414,
    "y": 176.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "d0423030.a4fb7",
    "type": "comment",
    "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
    "info": "",
    "comments": "",
    "x": 2550.566665649414,
    "y": 103.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "fad64a40.999cd8",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 4300.566665649414,
    "y": 5864.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "1f999717.41db99",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4433.566665649414,
    "y": 5912.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "c52167d8.94938",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4252.566665649414,
    "y": 5970.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "19e438e0.03d147",
        "34d88bae.811d0c"
      ]
    ]
  },
  {
    "id": "19e438e0.03d147",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4445.566665649414,
    "y": 5971.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "41319fcd.d8b348"
      ]
    ]
  },
  {
    "id": "41319fcd.d8b348",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Connectivity should have been created' />\n",
    "comments": "",
    "x": 4601.566665649414,
    "y": 5968.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "34d88bae.811d0c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4449.566665649414,
    "y": 6015.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9cc4dc7d.174798"
      ]
    ]
  },
  {
    "id": "9cc4dc7d.174798",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4588.566665649414,
    "y": 6010.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "be0ba193.2dd698",
        "9b687ead.d5262",
        "bb8d3610.613d68",
        "89f249f3.3e5608",
        "1d656b5f.37186d",
        "90bf2cc6.ca2d58",
        "517a964c.5fa06",
        "c8b3b99a.24ee1",
        "2487bbac.e2018c",
        "203e33ee.d272e4",
        "3c1017d1.449bb",
        "21e17170.9d1c4e"
      ]
    ]
  },
  {
    "id": "517a964c.5fa06",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4785.566665649414,
    "y": 6689.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f455e87a.bb05c8",
        "dc467c76.6e0b1",
        "26412110.73f856"
      ]
    ]
  },
  {
    "id": "f455e87a.bb05c8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4990.566665649414,
    "y": 6686.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "8ff8217a.525ad8"
      ]
    ]
  },
  {
    "id": "dc467c76.6e0b1",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4974.057632446289,
    "y": 6748.140701293945,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "2b587a1.cfe3f86"
      ]
    ]
  },
  {
    "id": "26412110.73f856",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4971.566665649414,
    "y": 6791.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b747b55e.88ecf8"
      ]
    ]
  },
  {
    "id": "8ff8217a.525ad8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5146.566665649414,
    "y": 6700.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "8429b279.d4cdf"
      ]
    ]
  },
  {
    "id": "2b587a1.cfe3f86",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5136.629043579102,
    "y": 6748.42643737793,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "b747b55e.88ecf8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5138.566665649414,
    "y": 6790.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "8429b279.d4cdf",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5393.566665649414,
    "y": 6697.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "1ddbd038.9357b"
      ]
    ]
  },
  {
    "id": "1ddbd038.9357b",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5630.566665649414,
    "y": 6693.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "7922b60b.c6e31"
      ]
    ]
  },
  {
    "id": "e0649c96.67ff88",
    "type": "switchNode",
    "name": "switch vpnuuid is for this slice",
    "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5873.566665649414,
    "y": 6665.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "6697bde5.6a73ec",
        "f1cd44ef.865458"
      ]
    ]
  },
  {
    "id": "6697bde5.6a73ec",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6078.566665649414,
    "y": 6685.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "7922b60b.c6e31"
      ]
    ]
  },
  {
    "id": "f1cd44ef.865458",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6077.566665649414,
    "y": 6638.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "7922b60b.c6e31",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4821.566665649414,
    "y": 6960.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b0b5d457.a97bd"
      ]
    ]
  },
  {
    "id": "1fa90257.6a5f2e",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 6283.566635131836,
    "y": 6898.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "a2de4936.eeff58",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4883.566665649414,
    "y": 6636.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "90bf2cc6.ca2d58",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4765.566665649414,
    "y": 6524.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "917753a8.ea741",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5110.566665649414,
    "y": 6355.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ddf721ac.b7eef8"
      ]
    ]
  },
  {
    "id": "ddf721ac.b7eef8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5330.566665649414,
    "y": 6361.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ff49769d.1bd52"
      ]
    ]
  },
  {
    "id": "ff49769d.1bd52",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5517.566665649414,
    "y": 6321.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "4e069c0d.3968f4"
      ]
    ]
  },
  {
    "id": "4e069c0d.3968f4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5709.566665649414,
    "y": 6324.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "2305c4b2.be932c"
      ]
    ]
  },
  {
    "id": "2305c4b2.be932c",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5918.566665649414,
    "y": 6322.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "c8b3b99a.24ee1",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4817.566665649414,
    "y": 6349.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "917753a8.ea741"
      ]
    ]
  },
  {
    "id": "bb8d3610.613d68",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4825.566665649414,
    "y": 6242.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ae57a65a.f0c818",
        "d5c36a0.e7a9398",
        "2780984c.5a15a"
      ]
    ]
  },
  {
    "id": "ae57a65a.f0c818",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5061.566665649414,
    "y": 6225.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "d5c36a0.e7a9398",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5058.566665649414,
    "y": 6266.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "2780984c.5a15a",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5072.566665649414,
    "y": 6306.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "89f249f3.3e5608",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4761.566665649414,
    "y": 6401.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "1d656b5f.37186d",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4769.566665649414,
    "y": 6459.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "9b687ead.d5262",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4774.566665649414,
    "y": 6199.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "201d95ad.f7c612",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4889.566665649414,
    "y": 6151.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "b0b5d457.a97bd",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5064.566665649414,
    "y": 6957.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "46f9fbf7.fbe6cc",
        "bab2d066.0ad5b"
      ]
    ]
  },
  {
    "id": "46f9fbf7.fbe6cc",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5293.566665649414,
    "y": 6934.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "66be0922.f0399"
      ]
    ]
  },
  {
    "id": "bab2d066.0ad5b",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5293.566665649414,
    "y": 6983.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "646b562c.1751a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 6026.566635131836,
    "y": 6989.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "898afc0c.eb00d8",
        "1fa90257.6a5f2e",
        "9d2bedee.a23cf"
      ]
    ]
  },
  {
    "id": "5bb30070.2c2c98",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6411.566635131836,
    "y": 6952.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "9d2bedee.a23cf",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<!--<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $gfp`' />\n\n<parameter name='operational-status' value='Modified' />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6381.566635131836,
    "y": 7012.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "898afc0c.eb00d8",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 6288.566635131836,
    "y": 6840.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "e66ef561.f9598",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4024.566665649414,
    "y": 5897.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "526f34d0.18befc",
        "fad64a40.999cd8",
        "1f999717.41db99",
        "c52167d8.94938",
        "be5aff94.f7d12"
      ]
    ]
  },
  {
    "id": "55c4563d.130918",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4766.566665649414,
    "y": 6299.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "2487bbac.e2018c",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4894.566665649414,
    "y": 6041.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "eef6a242.86b638",
    "type": "comment",
    "name": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "info": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "comments": "",
    "x": 5031.566665649414,
    "y": 5991.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "9860b974.593a3",
    "type": "save",
    "name": "save ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='type' value='root' />\n<parameter name='data-source' value='`$gfp`' />\n<parameter name='data-owner' value='`$tmp.aai.service-instance.service-instance-id`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3858.566665649414,
    "y": 3384.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "c96fd773.2e2468",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 4036.566635131836,
    "y": 1619.566635131836,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "e5b482c4.4ff96",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 4015.566604614258,
    "y": 2131.566604614258,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "58efc802.973c9",
    "type": "comment",
    "name": "TEMPORARY REMOVING THE FOLLOWING TWO NODES",
    "info": "",
    "comments": "",
    "x": 3850.566665649414,
    "y": 4005.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "517fe5d1.d6143c",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3940.566665649414,
    "y": 6385.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "fa1a129b.8e1e58",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3742.566665649414,
    "y": 4914.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "8f8ab353.277fd8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3875.566665649414,
    "y": 4962.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "6651db46.728784",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4421.566665649414,
    "y": 4590.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "894780c2.49e69",
        "859a7332.ec6f6"
      ]
    ]
  },
  {
    "id": "894780c2.49e69",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4614.566665649414,
    "y": 4591.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ba88b5a5.1ae688"
      ]
    ]
  },
  {
    "id": "859a7332.ec6f6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4618.566665649414,
    "y": 4635.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "99dc491a.da7278"
      ]
    ]
  },
  {
    "id": "99dc491a.da7278",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4757.566665649414,
    "y": 4630.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "8cf9ac68.b6fb08",
        "b04660b8.eae2",
        "fb45e770.b6fb4"
      ]
    ]
  },
  {
    "id": "ba88b5a5.1ae688",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4757.566665649414,
    "y": 4587.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "c30363c7.dd0dc",
        "10271018.94b4f8",
        "285754a8.44159c",
        "3647078f.866d7"
      ]
    ]
  },
  {
    "id": "8cf9ac68.b6fb08",
    "type": "set",
    "name": "set prop.connectivity-domainA-uuid",
    "xml": "<set>\n<parameter name='uuid.connectivity-domainA-uuid' value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5159.566909790039,
    "y": 4852.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "f52716f7.92c318",
    "type": "comment",
    "name": "populate connectivity-A variable in the context map",
    "info": "",
    "comments": "",
    "x": 5166.566909790039,
    "y": 4806.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "203e33ee.d272e4",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4956.566665649414,
    "y": 6585.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "b04660b8.eae2",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5277.566909790039,
    "y": 4894.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "3aab431e.930194",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5152.566665649414,
    "y": 5152.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "b6e6466d.f535c8",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3497.566665649414,
    "y": 4485.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "eb0222bd.49b5a",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4019.566665649414,
    "y": 4586.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "e967635e.d5f898",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3476.566665649414,
    "y": 4529.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "a0645295.c076d8",
        "9cfd1461.a062b8",
        "c3fd0eeb.1191a"
      ]
    ]
  },
  {
    "id": "9cfd1461.a062b8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3665.057632446289,
    "y": 4498.140884399414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "763a574e.7131"
      ]
    ]
  },
  {
    "id": "c3fd0eeb.1191a",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3653.566665649414,
    "y": 4537.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "64809ae2.7e048c"
      ]
    ]
  },
  {
    "id": "763a574e.7131",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3824.629165649414,
    "y": 4496.426528930664,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "64809ae2.7e048c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3814.566665649414,
    "y": 4538.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "9a196ab1.500e98",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3816.566665649414,
    "y": 4582.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "6eb0cd28.22b8f4",
        "eb0222bd.49b5a"
      ]
    ]
  },
  {
    "id": "a0645295.c076d8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3658.566665649414,
    "y": 4574.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9a196ab1.500e98"
      ]
    ]
  },
  {
    "id": "6eb0cd28.22b8f4",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 3977.566665649414,
    "y": 4514.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "a7e951fd.34174",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $middle-man-conn.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$middle-man-conn.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3842.566665649414,
    "y": 4853.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "a3ce23a7.48a0c8",
    "type": "comment",
    "name": "Temporary skipping this check - to support multiple instances in one slice",
    "info": "",
    "comments": "",
    "x": 5957.449966430664,
    "y": 6603.449966430664,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "fb45e770.b6fb4",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5157.233901977539,
    "y": 4990.650161743164,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "7a5a11e8.fe41c8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5159.450698852539,
    "y": 4950.449966430664,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "c5e59db3.c67ea",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5033.233657836914,
    "y": 5240.650161743164,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "57dbe634.714a18",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5035.450454711914,
    "y": 5200.449966430664,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "aa096a62.a00c18",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5123.033462524414,
    "y": 5603.083267211914,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "a1684c9.099dc3",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4950.033462524414,
    "y": 5660.083267211914,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "322ec37b.7f462c",
        "a4688844.be2738"
      ]
    ]
  },
  {
    "id": "322ec37b.7f462c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5161.033462524414,
    "y": 5660.083267211914,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "32e06877.2a572"
      ]
    ]
  },
  {
    "id": "a4688844.be2738",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5157.033462524414,
    "y": 5708.083267211914,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "748c1810.be501"
      ]
    ]
  },
  {
    "id": "32e06877.2a572",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5317.033462524414,
    "y": 5656.083267211914,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "c380fc3b.e6c15",
        "4e971f2e.5d2078",
        "7fabceea.e8bd9"
      ]
    ]
  },
  {
    "id": "748c1810.be501",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 5305.033462524414,
    "y": 5703.083267211914,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "bf0ec53.d08f2b8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5626.917251586914,
    "y": 5756.966567993164,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "7fabceea.e8bd9",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5630.700454711914,
    "y": 5795.166763305664,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "4e971f2e.5d2078",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5737.033462524414,
    "y": 5708.083267211914,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "c380fc3b.e6c15",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5621.033462524414,
    "y": 5656.083267211914,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "ddfb9582.3445a8",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 5012.033462524414,
    "y": 5561.083267211914,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "3c1017d1.449bb",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4724.366470336914,
    "y": 5736.083267211914,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "aa096a62.a00c18",
        "a1684c9.099dc3",
        "a4cbceb2.4df788",
        "9c03eaae.aa875"
      ]
    ]
  },
  {
    "id": "21e17170.9d1c4e",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5024.399673461914,
    "y": 6096.766860961914,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "bfe53aa3.d585a8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5830.683334350586,
    "y": 6933.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "66be0922.f0399",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5449.683334350586,
    "y": 6936.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "bfe53aa3.d585a8",
        "f8b29486.7e71d",
        "bf54edf8.ad3758"
      ]
    ]
  },
  {
    "id": "f8b29486.7e71d",
    "type": "switchNode",
    "name": "switch $foundVpnName",
    "xml": "<switch test=\"`$foundVpnName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5675.683334350586,
    "y": 6988.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "45d6980.5fa0ee8"
      ]
    ]
  },
  {
    "id": "45d6980.5fa0ee8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5854.683334350586,
    "y": 6987.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "646b562c.1751a8"
      ]
    ]
  },
  {
    "id": "bf54edf8.ad3758",
    "type": "set",
    "name": "set vpnNameToSearch",
    "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
    "comments": "",
    "x": 5676.683334350586,
    "y": 6881.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "7c0aae65.c25f7",
    "type": "notify",
    "name": "notify",
    "xml": "<notify plugin='' resource='' action='' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2670.683334350586,
    "y": 930.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "c9e93381.966988",
    "type": "set",
    "name": "set network-route-three",
    "xml": "<set>\n<parameter name='network-route-three' value=\"`$tmp.aai.logical-link.segment-id`\" />\n\n\n",
    "comments": "",
    "x": 3348.683334350586,
    "y": 706.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "18d11d50.cb3a7b",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3564.683334350586,
    "y": 1034.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "e2e500c.35b568",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3560.192398071289,
    "y": 1077.109390258789,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "ac92425e.1b5228",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3564.192367553711,
    "y": 1125.109359741211,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "74bd1e76.c1a798"
      ]
    ]
  },
  {
    "id": "74bd1e76.c1a798",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3721.683334350586,
    "y": 1124.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "75cda54f.508c54"
      ]
    ]
  },
  {
    "id": "75cda54f.508c54",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-three.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3891.683364868164,
    "y": 1127.6834869384766,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b5759425.3c5bd",
        "a5689d25.4480b8",
        "32c4f78e.6013e8"
      ]
    ]
  },
  {
    "id": "b5759425.3c5bd",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4065.683334350586,
    "y": 1065.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "e254226b.74faf"
      ]
    ]
  },
  {
    "id": "a5689d25.4480b8",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4067.683334350586,
    "y": 1119.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b214dc3a.ed1eb8"
      ]
    ]
  },
  {
    "id": "e254226b.74faf",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4193.683334350586,
    "y": 1065.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "1e63a796.08e87",
        "c1790587.ac9f08"
      ]
    ]
  },
  {
    "id": "b214dc3a.ed1eb8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4196.683334350586,
    "y": 1118.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ea9630d6.e1db68",
        "7cd0ca92.870d14"
      ]
    ]
  },
  {
    "id": "c1790587.ac9f08",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4354.683334350586,
    "y": 1089.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "ea9630d6.e1db68",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4371.683334350586,
    "y": 1131.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "7cd0ca92.870d14",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4356.683334350586,
    "y": 1169.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "1e63a796.08e87",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4368.683334350586,
    "y": 1049.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "5b64a8f4.eea95",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4533.683334350586,
    "y": 1065.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "5fc9799.82ba788",
    "type": "save",
    "name": "get network-route-three from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-three'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-three\">",
    "comments": "",
    "outputs": 1,
    "x": 3324.683334350586,
    "y": 1051.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "18d11d50.cb3a7b",
        "e2e500c.35b568",
        "ac92425e.1b5228"
      ]
    ]
  },
  {
    "id": "32c4f78e.6013e8",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4010.683334350586,
    "y": 1183.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "e8d5048b.eb9908"
      ]
    ]
  },
  {
    "id": "e8d5048b.eb9908",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4184.683334350586,
    "y": 1178.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "cbdde789.933e38",
        "ff9c265d.ccb66"
      ]
    ]
  },
  {
    "id": "ff9c265d.ccb66",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4354.683334350586,
    "y": 1251.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "cbdde789.933e38",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4408.683334350586,
    "y": 1211.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "fa28f519.9b734",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4522.683334350586,
    "y": 1236.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "65095290.735c7c",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4081.683334350586,
    "y": 939.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "6a27287d.2ebf6"
      ]
    ]
  },
  {
    "id": "d7809ac8.28364",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4425.683334350586,
    "y": 1007.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "38b369ba.8d91fe",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4479.683334350586,
    "y": 967.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "7d1c2c8b.bd9814",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4623.683334350586,
    "y": 996.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "6a27287d.2ebf6",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4255.683334350586,
    "y": 934.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "38b369ba.8d91fe",
        "d7809ac8.28364"
      ]
    ]
  },
  {
    "id": "b03ebc69.8e68d8",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4141.683334350586,
    "y": 677.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "e58f35e3.4b6a2"
      ]
    ]
  },
  {
    "id": "6a2c136e.692edc",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4485.683334350586,
    "y": 745.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "66ae94b1.018af4",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4539.683334350586,
    "y": 705.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "33be367d.fbce62",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4653.683334350586,
    "y": 730.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "e58f35e3.4b6a2",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4315.683334350586,
    "y": 672.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "66ae94b1.018af4",
        "6a2c136e.692edc"
      ]
    ]
  },
  {
    "id": "64cdb464.83135c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3722.683334350586,
    "y": 2554.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "7a3829d.42a01d8",
        "d03e5e53.5cee58"
      ]
    ]
  },
  {
    "id": "6e42edd4.58cd0c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3550.016830444336,
    "y": 2555.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "64cdb464.83135c"
      ]
    ]
  },
  {
    "id": "b61e07a3.0e4238",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3559.507797241211,
    "y": 2598.257369995117,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "2df3a08e.41f4c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3548.016830444336,
    "y": 2644.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "7a3829d.42a01d8",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4009.016830444336,
    "y": 2558.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "38c64779.e618f",
        "14f81708.27e459"
      ]
    ]
  },
  {
    "id": "14f81708.27e459",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4232.016830444336,
    "y": 2513.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "2753f3be.c9c924"
      ]
    ]
  },
  {
    "id": "38c64779.e618f",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4234.016830444336,
    "y": 2577.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "43ad3093.31a088"
      ]
    ]
  },
  {
    "id": "9fbb56ee.c43378",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-C.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-C.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3322.016830444336,
    "y": 2590.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "6e42edd4.58cd0c",
        "b61e07a3.0e4238",
        "2df3a08e.41f4c"
      ]
    ]
  },
  {
    "id": "ac1718b4.765b78",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3283.016830444336,
    "y": 2534.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "7ebd6769.0b5428",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3342.016830444336,
    "y": 2330.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "2f0a58a8.ee7038",
        "79cdcb97.546894"
      ]
    ]
  },
  {
    "id": "79cdcb97.546894",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3565.016830444336,
    "y": 2316.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "49eedb67.f00374"
      ]
    ]
  },
  {
    "id": "2f0a58a8.ee7038",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3567.016830444336,
    "y": 2349.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "49eedb67.f00374",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3713.016830444336,
    "y": 2309.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f5d93681.391ea",
        "66937670.413898"
      ]
    ]
  },
  {
    "id": "f5d93681.391ea",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainC.pnf-name' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3907.016830444336,
    "y": 2312.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "d03e5e53.5cee58",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3960.016799926758,
    "y": 2681.683303833008,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "1dfcba6a.928896"
      ]
    ]
  },
  {
    "id": "1dfcba6a.928896",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4166.016799926758,
    "y": 2681.683303833008,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ad7b62a1.1a3de8"
      ]
    ]
  },
  {
    "id": "66937670.413898",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\"\n        pfx='tmp.aai.destination-secondary-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3929.016830444336,
    "y": 2380.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "7e1c1529.6f1464",
        "e1251115.be77b",
        "d084db0e.513758"
      ]
    ]
  },
  {
    "id": "7e1c1529.6f1464",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4124.516952514648,
    "y": 2332.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "24a5d36d.06630c"
      ]
    ]
  },
  {
    "id": "e1251115.be77b",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4116.516952514648,
    "y": 2387.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "e4759099.9196a"
      ]
    ]
  },
  {
    "id": "d084db0e.513758",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4121.516952514648,
    "y": 2444.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "68e5ccfb.96ac94"
      ]
    ]
  },
  {
    "id": "68e5ccfb.96ac94",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4273.516952514648,
    "y": 2445.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "24a5d36d.06630c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4268.899276733398,
    "y": 2330.339126586914,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b2ff1ea.8d4406"
      ]
    ]
  },
  {
    "id": "387e5bde.fd50e4",
    "type": "set",
    "name": "set SECONDARY-ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-long' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-short' value=\"`$tmp.dst-secondary.pnf-name`\" />\n\n<parameter name='tmp.SECONDARY-ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-C.next-hop + '-' + $tmp.aai.network-route-C.logical-interface-id`\" />\n<parameter name='tmp.SECONDARY-ROOT.uni-tp-id' value=\"`$tmp.dst-secondary.ltpId`\" />\n",
    "comments": "",
    "x": 3344.683334350586,
    "y": 2669.683334350586,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "4cfd3be4.f62fcc",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 4019.683303833008,
    "y": 2633.683303833008,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "43ad3093.31a088",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4393.016830444336,
    "y": 2596.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "2753f3be.c9c924",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4397.016830444336,
    "y": 2510.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "a6bf1231.b0b2f8",
        "b6449bb5.90e018"
      ]
    ]
  },
  {
    "id": "ad7b62a1.1a3de8",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4383.302444458008,
    "y": 2680.505081176758,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "e5d22111.f520c"
      ]
    ]
  },
  {
    "id": "e4759099.9196a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4284.516952514648,
    "y": 2390.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "a6bf1231.b0b2f8",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.ltpId' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n",
    "comments": "",
    "x": 4567.016830444336,
    "y": 2471.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "b6449bb5.90e018",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.pnf-name' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n",
    "comments": "",
    "x": 4568.016830444336,
    "y": 2576.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "2544beb5.524cf2",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4563.016830444336,
    "y": 2525.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "e5d22111.f520c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4590.133987426758,
    "y": 2670.0237579345703,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "387e5354.258eec",
        "d91f6407.9298c8",
        "8a12363d.8f67b8"
      ]
    ]
  },
  {
    "id": "387e5354.258eec",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination-secondary.ttp-id' value=\"`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4805.133987426758,
    "y": 2632.0237579345703,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "d91f6407.9298c8",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination-secondary.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-secondary-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4802.133987426758,
    "y": 2671.0237579345703,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "824c0ca3.93f64"
      ]
    ]
  },
  {
    "id": "8a12363d.8f67b8",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4757.633987426758,
    "y": 2713.0237579345703,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "b23c99bf.cf2e8",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4851.016830444336,
    "y": 2348.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "97206b42.8c742"
      ]
    ]
  },
  {
    "id": "b2ff1ea.8d4406",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4453.016830444336,
    "y": 2344.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "3bc9e41b.32e2f4"
      ]
    ]
  },
  {
    "id": "3bc9e41b.32e2f4",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4648.016830444336,
    "y": 2344.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b23c99bf.cf2e8",
        "c333a868.fb119"
      ]
    ]
  },
  {
    "id": "c333a868.fb119",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4853.016830444336,
    "y": 2421.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "bd453b0b.71f93"
      ]
    ]
  },
  {
    "id": "824c0ca3.93f64",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4982.633987426758,
    "y": 2670.0237579345703,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "95206ee6.94dd"
      ]
    ]
  },
  {
    "id": "95206ee6.94dd",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5140.633987426758,
    "y": 2670.0237579345703,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "a1087d28.90e2f"
      ]
    ]
  },
  {
    "id": "a1087d28.90e2f",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination-secondary.tunnel-tp-id' value=\"`$tmp.aai.destination-secondary-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5347.633987426758,
    "y": 2670.0237579345703,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "97206b42.8c742",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5028.016830444336,
    "y": 2340.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "4cfed3d4.2e715c",
        "b3c82e8a.c152c"
      ]
    ]
  },
  {
    "id": "b3c82e8a.c152c",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainC.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainC.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5236.016830444336,
    "y": 2347.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "c3765dd7.98e19",
        "82480139.31c848",
        "da19380a.5cc67"
      ]
    ]
  },
  {
    "id": "bd453b0b.71f93",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5030.016830444336,
    "y": 2413.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "14471967.2bb00f"
      ]
    ]
  },
  {
    "id": "4cfed3d4.2e715c",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainC id",
    "xml": "<set>\n<parameter name='tmp.domainC.esr-thirdparty-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5266.016830444336,
    "y": 2295.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "14471967.2bb00f",
    "type": "set",
    "name": "set domainC ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainC.eth-network-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5265.016830444336,
    "y": 2537.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "c3765dd7.98e19",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5446.016830444336,
    "y": 2338.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "eb76aab.05915d8"
      ]
    ]
  },
  {
    "id": "82480139.31c848",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5438.016830444336,
    "y": 2393.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "3c8ef50f.dc9d5a"
      ]
    ]
  },
  {
    "id": "da19380a.5cc67",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5443.016830444336,
    "y": 2450.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "11ed4dc4.069aca"
      ]
    ]
  },
  {
    "id": "11ed4dc4.069aca",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5595.016830444336,
    "y": 2451.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "3c8ef50f.dc9d5a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5606.016830444336,
    "y": 2396.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "eb76aab.05915d8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5590.399154663086,
    "y": 2336.339126586914,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "57675f66.16eb5"
      ]
    ]
  },
  {
    "id": "57675f66.16eb5",
    "type": "set",
    "name": "set controller domainC data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5805.016830444336,
    "y": 2332.6834564208984,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "a78822a6.5321b",
    "type": "switchNode",
    "name": "switch secondary empty?",
    "xml": "<switch test='`length($network-route-three) == 0`'>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3318.683334350586,
    "y": 805.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ee3317c4.be6f98",
        "785558d0.46aa7"
      ]
    ]
  },
  {
    "id": "ee3317c4.be6f98",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3440.683364868164,
    "y": 750.6833648681641,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b70329ff.3ba71"
      ]
    ]
  },
  {
    "id": "785558d0.46aa7",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3427.683364868164,
    "y": 859.6833648681641,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "e7d34a7a.6aac6"
      ]
    ]
  },
  {
    "id": "b70329ff.3ba71",
    "type": "set",
    "name": "set hasSecondary false",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n\n\n",
    "comments": "",
    "x": 3655.683334350586,
    "y": 587.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "e7d34a7a.6aac6",
    "type": "set",
    "name": "set hasSecondary true",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"true\" />\n\n\n",
    "comments": "",
    "x": 3651.683334350586,
    "y": 631.6833343505859,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "3cc87f7.3864a",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3848.683364868164,
    "y": 3531.683364868164,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "f7171cc6.827928"
      ]
    ]
  },
  {
    "id": "f7171cc6.827928",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4039.683364868164,
    "y": 3535.683364868164,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "27271b87.886184"
      ]
    ]
  },
  {
    "id": "27271b87.886184",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4166.683364868164,
    "y": 3534.683364868164,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "90e47ea0.ecee8",
        "8a6c8ced.8f741"
      ]
    ]
  },
  {
    "id": "8a6c8ced.8f741",
    "type": "save",
    "name": "save SECONDARY-ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.SECONDARY-ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='type' value='secondary-root' />\n<parameter name='data-source' value='`$gfp`' />\n<parameter name='data-owner' value='`$tmp.aai.service-instance.service-instance-id`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4388.683364868164,
    "y": 3423.683364868164,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "a4c94b0b.1b4718",
    "type": "set",
    "name": "unset secondary related variables",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n<parameter name='network-route-three' value=\"\" />\n<parameter name='tmp.aai.network-route-three.' value=\"\" />\n<parameter name='tmp.aai.network-route-C.' value=\"\" />\n",
    "comments": "",
    "x": 3393.566665649414,
    "y": 463.56666564941406,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "90e47ea0.ecee8",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4384.566665649414,
    "y": 3482.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "61b6ba56.719bdc",
        "226a53c4.28be4c"
      ]
    ]
  },
  {
    "id": "61b6ba56.719bdc",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4594.566665649414,
    "y": 3459.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "3f2dca65.c993b6"
      ]
    ]
  },
  {
    "id": "3f2dca65.c993b6",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4720.566665649414,
    "y": 3459.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "812380f1.94aae8"
      ]
    ]
  },
  {
    "id": "32cc56e4.b47402",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4725.566665649414,
    "y": 3508.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "7de42311.cfc97c",
        "94a4f684.655798",
        "9102db37.03feb",
        "168bc7a3.f57628"
      ]
    ]
  },
  {
    "id": "226a53c4.28be4c",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4599.566665649414,
    "y": 3508.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "32cc56e4.b47402"
      ]
    ]
  },
  {
    "id": "812380f1.94aae8",
    "type": "save",
    "name": "save connectivityB relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5048.566665649414,
    "y": 3456.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "7de42311.cfc97c",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainC",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainC-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 5001.566665649414,
    "y": 3547.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "94a4f684.655798",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='secondary-root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 4949.566665649414,
    "y": 3589.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "9102db37.03feb",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5078.566665649414,
    "y": 3631.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "3c0b7ceb.8c4ecc",
    "type": "comment",
    "name": "Create SECONDARY-ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 4964.566665649414,
    "y": 3504.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "168bc7a3.f57628",
    "type": "save",
    "name": "save connectivityC relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5056.566665649414,
    "y": 3679.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "54d0b322.54c85c",
    "type": "comment",
    "name": "Create SECONDARY-ROOT UNI",
    "info": "",
    "comments": "",
    "x": 3876.566665649414,
    "y": 3482.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "5fefabc6.f62f5c",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3851.566665649414,
    "y": 4153.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b4ef06b7.1fe62"
      ]
    ]
  },
  {
    "id": "b4ef06b7.1fe62",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4043.566665649414,
    "y": 4148.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "815df3f1.7eb0f"
      ]
    ]
  },
  {
    "id": "815df3f1.7eb0f",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4172.566665649414,
    "y": 4148.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "67264e9c.83602"
      ]
    ]
  },
  {
    "id": "67264e9c.83602",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4504.566665649414,
    "y": 4146.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "dbd95dbb.cf097",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3839.566665649414,
    "y": 4377.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "aef64578.f3199"
      ]
    ]
  },
  {
    "id": "aef64578.f3199",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4019.566665649414,
    "y": 4376.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9830e38b.25b19"
      ]
    ]
  },
  {
    "id": "9830e38b.25b19",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4148.566665649414,
    "y": 4376.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "7d4e5c3a.fc6a0c"
      ]
    ]
  },
  {
    "id": "7d4e5c3a.fc6a0c",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4366.449966430664,
    "y": 4375.449966430664,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "1e59b518.b0bee3"
      ]
    ]
  },
  {
    "id": "1e59b518.b0bee3",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4581.449966430664,
    "y": 4375.449966430664,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "40af1183.5043e"
      ]
    ]
  },
  {
    "id": "40af1183.5043e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4713.449966430664,
    "y": 4375.449966430664,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9532f45e.79d66"
      ]
    ]
  },
  {
    "id": "9532f45e.79d66",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5077.566665649414,
    "y": 4374.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "147222b6.72d4a5",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3514.566665649414,
    "y": 4632.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "adad110b.2a8008"
      ]
    ]
  },
  {
    "id": "adad110b.2a8008",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3694.566665649414,
    "y": 4631.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "b9b6357c.7dc958"
      ]
    ]
  },
  {
    "id": "b9b6357c.7dc958",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3823.566665649414,
    "y": 4631.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "883d53e4.0057c"
      ]
    ]
  },
  {
    "id": "8f1b73bf.36d998",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3559.566665649414,
    "y": 4690.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "f9162d4b.d76cb",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4125.566665649414,
    "y": 4789.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "883d53e4.0057c",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3589.566665649414,
    "y": 4723.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "a081e505.7d3b8",
        "370b0cd4.1d67f4",
        "3bb246d3.6b0eb2"
      ]
    ]
  },
  {
    "id": "370b0cd4.1d67f4",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3771.057632446289,
    "y": 4701.140884399414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "21a39fa9.8cdbc"
      ]
    ]
  },
  {
    "id": "3bb246d3.6b0eb2",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3759.566665649414,
    "y": 4740.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "3acf6433.2f683c"
      ]
    ]
  },
  {
    "id": "21a39fa9.8cdbc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3930.629165649414,
    "y": 4699.426528930664,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "3acf6433.2f683c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3920.566665649414,
    "y": 4741.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "c435208e.fb61a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3922.566665649414,
    "y": 4785.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "6438caae.bf37d4",
        "f9162d4b.d76cb"
      ]
    ]
  },
  {
    "id": "a081e505.7d3b8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3764.566665649414,
    "y": 4777.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "c435208e.fb61a8"
      ]
    ]
  },
  {
    "id": "6438caae.bf37d4",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 4083.566665649414,
    "y": 4717.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "3f5c519e.52fcfe",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4449.566665649414,
    "y": 5285.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "128b476.c3c24b9",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4604.566665649414,
    "y": 5326.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "ef90095c.80a978",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5047.566665649414,
    "y": 5374.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "b1e27ce1.629f7",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4420.566665649414,
    "y": 5384.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "6c93874b.ea46a8",
        "a48ce649.08b9f8"
      ]
    ]
  },
  {
    "id": "6c93874b.ea46a8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4656.566665649414,
    "y": 5368.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "2bac874c.98bee"
      ]
    ]
  },
  {
    "id": "2bac874c.98bee",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4800.566665649414,
    "y": 5370.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "ef90095c.80a978",
        "900ede93.5cfd68",
        "c9e4ee74.f1da1"
      ]
    ]
  },
  {
    "id": "a48ce649.08b9f8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4655.566665649414,
    "y": 5416.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "900ede93.5cfd68",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5168.566665649414,
    "y": 5421.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "c9e4ee74.f1da1",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5050.233657836914,
    "y": 5506.650161743164,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "80a5d0bc.394668",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5051.450454711914,
    "y": 5465.449966430664,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "7af1ce17.a2c558",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5582.566665649414,
    "y": 5853.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "9c03eaae.aa875",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4955.566665649414,
    "y": 5863.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "c8852cc.de0315",
        "d3e42d04.fd0a28"
      ]
    ]
  },
  {
    "id": "c8852cc.de0315",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5188.566665649414,
    "y": 5857.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "3860ec82.4027f4"
      ]
    ]
  },
  {
    "id": "3860ec82.4027f4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5335.566665649414,
    "y": 5865.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "7af1ce17.a2c558",
        "cf788720.b865d8",
        "78c6b3da.3a0f94"
      ]
    ]
  },
  {
    "id": "d3e42d04.fd0a28",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5189.566665649414,
    "y": 5907.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "cf788720.b865d8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5703.566665649414,
    "y": 5900.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "78c6b3da.3a0f94",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5585.233657836914,
    "y": 5985.650161743164,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "187aa522.975483",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5586.450454711914,
    "y": 5944.449966430664,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "a4cbceb2.4df788",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5116.566665649414,
    "y": 5813.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "1eb398cf.3d4a57",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4950.566665649414,
    "y": 5774.566665649414,
    "z": "c7b9cd35.bfac88",
    "wires": []
  },
  {
    "id": "629500a0.f350c",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3277.816665649414,
    "y": 6383.816665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9cad2425.bfa4",
        "5e118a1d.622834"
      ]
    ]
  },
  {
    "id": "9cad2425.bfa4",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3468.816665649414,
    "y": 6387.816665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "eaa9d7ab.22184"
      ]
    ]
  },
  {
    "id": "eaa9d7ab.22184",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3595.816665649414,
    "y": 6386.816665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "517fe5d1.d6143c"
      ]
    ]
  },
  {
    "id": "5e118a1d.622834",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3464.816665649414,
    "y": 6457.816665649414,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "3146887c.847d98"
      ]
    ]
  },
  {
    "id": "9e160da7.86044",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate-w-Protection",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate-w-Protection' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4014.316665649414,
    "y": 6456.900161743164,
    "z": "c7b9cd35.bfac88",
    "wires": [
      []
    ]
  },
  {
    "id": "3146887c.847d98",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3598.316665649414,
    "y": 6459.900161743164,
    "z": "c7b9cd35.bfac88",
    "wires": [
      [
        "9e160da7.86044"
      ]
    ]
  }
]