[
  {
    "id": "934a37b5.570538",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 132.56666564941406,
    "y": 130,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "56cf7e3f.c20408"
      ]
    ]
  },
  {
    "id": "56cf7e3f.c20408",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 416.85235595703125,
    "y": 191.23810863494873,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "9d6f7a83.dd2e58"
      ]
    ]
  },
  {
    "id": "9d6f7a83.dd2e58",
    "type": "method",
    "name": "method cll-vnf-topology-operation-cll-create-clean",
    "xml": "<method rpc='cll-vnf-topology-operation-cll-create-clean' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 422.9952697753906,
    "y": 276.0000305175781,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "69ada9d9.f9e3c"
      ]
    ]
  },
  {
    "id": "69ada9d9.f9e3c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 772.5666656494141,
    "y": 335,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "8dd82f3b.b9fa5",
        "304cbf07.b12f58",
        "1a3f65b2.521b1a"
      ]
    ]
  },
  {
    "id": "8dd82f3b.b9fa5",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1073.900161743164,
    "y": 605.9302978515625,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "304cbf07.b12f58",
    "type": "save",
    "name": "get service-instance from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
    "comments": "",
    "outputs": 1,
    "x": 1095.328628540039,
    "y": 308.33331298828125,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c42506f9.b054",
        "15d85509.bac5fb",
        "c693218f.780828"
      ]
    ]
  },
  {
    "id": "c42506f9.b054",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1320.328628540039,
    "y": 166.33331298828125,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c432fa86.b14b18"
      ]
    ]
  },
  {
    "id": "15d85509.bac5fb",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1315.819595336914,
    "y": 235.9073486328125,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c16eebd5.51383"
      ]
    ]
  },
  {
    "id": "c693218f.780828",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1304.328628540039,
    "y": 282.33331298828125,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "3a0cbeb0.e80882"
      ]
    ]
  },
  {
    "id": "2b8d35c8.ebc05a",
    "type": "comment",
    "name": "new for TransportSlicing",
    "info": "",
    "comments": "",
    "x": 1074.328628540039,
    "y": 196.33331298828125,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "1a3f65b2.521b1a",
    "type": "execute",
    "name": "execute properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
    "comments": "",
    "outputs": 1,
    "x": 1062.328628540039,
    "y": 248.33331298828125,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "c432fa86.b14b18",
    "type": "switchNode",
    "name": "switch allotted-resources_length != 0",
    "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1560.566665649414,
    "y": 163,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1d921b54.6d01cd",
        "4b7292d8.462d44"
      ]
    ]
  },
  {
    "id": "c16eebd5.51383",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1470.6290435791016,
    "y": 238.85977172851562,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "3a0cbeb0.e80882",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1474.566665649414,
    "y": 283,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "1d921b54.6d01cd",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1765.566665649414,
    "y": 200,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "e73b29c9.cbd5e8"
      ]
    ]
  },
  {
    "id": "4b7292d8.462d44",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1775.566665649414,
    "y": 127,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "e73b29c9.cbd5e8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1758.566665649414,
    "y": 275,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "d6fcbbd7.6468b8",
        "8f5c7a9a.326598",
        "cd48af2d.929d6",
        "528e88db.403fc",
        "899de386.880988"
      ]
    ]
  },
  {
    "id": "1f336392.1dac3c",
    "type": "save",
    "name": "get allotted-resource from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2244.566665649414,
    "y": 326,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "923c23f1.638a98",
        "ba451af8.67c9c8",
        "2ed7be49.0a7032"
      ]
    ]
  },
  {
    "id": "923c23f1.638a98",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2460.566665649414,
    "y": 393,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c090e3a4.ec2058"
      ]
    ]
  },
  {
    "id": "ba451af8.67c9c8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2461.057632446289,
    "y": 292.573974609375,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "4c29ba0c.292a6c"
      ]
    ]
  },
  {
    "id": "2ed7be49.0a7032",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2456.566665649414,
    "y": 342,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "f2cd659.3fc4898"
      ]
    ]
  },
  {
    "id": "d6fcbbd7.6468b8",
    "type": "for",
    "name": "for each allotted-resource",
    "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1961.566665649414,
    "y": 307,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "419d8708.3b9078",
        "1f336392.1dac3c",
        "90827cac.7f3cc8",
        "e557ce2.09f823"
      ]
    ]
  },
  {
    "id": "419d8708.3b9078",
    "type": "set",
    "name": "set the current allotted-resource-id",
    "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
    "comments": "",
    "x": 2241.566665649414,
    "y": 245,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "528e88db.403fc",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
    "comments": "",
    "x": 1935.566665649414,
    "y": 257,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "8f5c7a9a.326598",
    "type": "get-resource",
    "name": "get-resource pnfs-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/pnfs?depth=0' depth = 0\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
    "comments": "",
    "outputs": 1,
    "x": 1978.566665649414,
    "y": 116,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "cd48af2d.929d6",
    "type": "get-resource",
    "name": "get-resource logical-links",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
    "comments": "",
    "outputs": 1,
    "x": 1990.566665649414,
    "y": 157,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "73efca11.a03e0c",
    "type": "comment",
    "name": "The following two nodes are for PCE",
    "info": "",
    "comments": "",
    "x": 2015.566665649414,
    "y": 69,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "19fb453a.d497cb",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
    "comments": "",
    "x": 1935.566665649414,
    "y": 203,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "4c29ba0c.292a6c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 2639.566665649414,
    "y": 295,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "f2cd659.3fc4898",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 2639.504165649414,
    "y": 344.1402587890625,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "c090e3a4.ec2058",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2641.504165649414,
    "y": 395.1402587890625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "383f413.f1d10be"
      ]
    ]
  },
  {
    "id": "383f413.f1d10be",
    "type": "save",
    "name": "get allotted-resource relationship from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2934.504165649414,
    "y": 342.1402587890625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "7f2204ba.ff0eac",
        "6593ad3c.c3a94c",
        "91d5dd73.0552a8"
      ]
    ]
  },
  {
    "id": "6593ad3c.c3a94c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3237.995101928711,
    "y": 74.7142333984375,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "578e5a01.301d74"
      ]
    ]
  },
  {
    "id": "578e5a01.301d74",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3415.566635131836,
    "y": 75,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "91d5dd73.0552a8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3233.504135131836,
    "y": 124.1402587890625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "3a340bd0.83bde4"
      ]
    ]
  },
  {
    "id": "3a340bd0.83bde4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3415.504135131836,
    "y": 124.1402587890625,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "7f2204ba.ff0eac",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3237.504135131836,
    "y": 175.1402587890625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5f6b46f2.1bbc28"
      ]
    ]
  },
  {
    "id": "5f6b46f2.1bbc28",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3417.504135131836,
    "y": 175.1402587890625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "432203ff.80791c"
      ]
    ]
  },
  {
    "id": "432203ff.80791c",
    "type": "switchNode",
    "name": "switch allotted-resource.relationship-list not empty",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2953.566665649414,
    "y": 470,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "25bf5884.d1bc1",
        "68d7ca3f.b9c4a4"
      ]
    ]
  },
  {
    "id": "68d7ca3f.b9c4a4",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3293.566635131836,
    "y": 317,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "25bf5884.d1bc1",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3292.566635131836,
    "y": 371,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "a4256717.8bdab"
      ]
    ]
  },
  {
    "id": "dc3dd60e.e6fb58",
    "type": "outcome",
    "name": "network-policy",
    "xml": "<outcome value='network-policy'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4037.566635131836,
    "y": 325,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "7a99d9c1.cc807"
      ]
    ]
  },
  {
    "id": "7a99d9c1.cc807",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4214.566513061523,
    "y": 317.9998779296875,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "54329230.9376a4",
        "e44ffd73.3caae8"
      ]
    ]
  },
  {
    "id": "a4256717.8bdab",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3456.566635131836,
    "y": 297,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "ab8d2f4.fb7de5",
        "6cd92abd.ea602c"
      ]
    ]
  },
  {
    "id": "ab8d2f4.fb7de5",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3737.566635131836,
    "y": 253,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "d2f6d2c1.0cd0b8"
      ]
    ]
  },
  {
    "id": "d2f6d2c1.0cd0b8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3999.566635131836,
    "y": 253,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "dc3dd60e.e6fb58"
      ]
    ]
  },
  {
    "id": "54329230.9376a4",
    "type": "set",
    "name": "set the 1st network-policy-id",
    "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 4457.566513061523,
    "y": 274.9998779296875,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "e44ffd73.3caae8",
    "type": "save",
    "name": "get network-policy from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
    "comments": "",
    "outputs": 1,
    "x": 4446.566513061523,
    "y": 329.9998779296875,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "9db3143c.c20748",
        "3f90e90d.8c4416",
        "767c00f3.c60f18"
      ]
    ]
  },
  {
    "id": "767c00f3.c60f18",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4697.566879272461,
    "y": 271,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "eb2a7a65.4a99c"
      ]
    ]
  },
  {
    "id": "eb2a7a65.4a99c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4846.138412475586,
    "y": 271.2857666015625,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "1d4fa709.d3c2b1",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4845.075912475586,
    "y": 315.426025390625,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "3f90e90d.8c4416",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4686.075912475586,
    "y": 315.426025390625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1d4fa709.d3c2b1"
      ]
    ]
  },
  {
    "id": "9db3143c.c20748",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4693.075912475586,
    "y": 394.426025390625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "d725abd1.c0b928"
      ]
    ]
  },
  {
    "id": "d725abd1.c0b928",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4832.075912475586,
    "y": 394.426025390625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "561b0f6d.fce1f8",
        "8702a1ee.cea5e8"
      ]
    ]
  },
  {
    "id": "561b0f6d.fce1f8",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5037.566879272461,
    "y": 392,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "8702a1ee.cea5e8",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5036.566879272461,
    "y": 438,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "6cd92abd.ea602c",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3554.566635131836,
    "y": 369,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "dd91e386.997658"
      ]
    ]
  },
  {
    "id": "dd91e386.997658",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3834.566635131836,
    "y": 369,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "d0b5ecff.91d928"
      ]
    ]
  },
  {
    "id": "d0b5ecff.91d928",
    "type": "outcome",
    "name": "logical-link",
    "xml": "<outcome value='logical-link'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2217.5667877197266,
    "y": 782.0001220703125,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "3175715f.1727f6"
      ]
    ]
  },
  {
    "id": "3175715f.1727f6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2394.566665649414,
    "y": 775,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "e36efc83.994d78",
        "41c74306.d5cc9c"
      ]
    ]
  },
  {
    "id": "e36efc83.994d78",
    "type": "set",
    "name": "set the current logical-link-name",
    "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 2637.566665649414,
    "y": 732,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "41c74306.d5cc9c",
    "type": "save",
    "name": "get logical-link from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
    "comments": "",
    "outputs": 1,
    "x": 2626.566665649414,
    "y": 787,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "9d68f10f.bd8b8",
        "dffb55fa.85b55",
        "c53e6e84.05ac9"
      ]
    ]
  },
  {
    "id": "9d68f10f.bd8b8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2918.057632446289,
    "y": 765.573974609375,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "b9d2eb35.931cc8"
      ]
    ]
  },
  {
    "id": "dffb55fa.85b55",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2906.566665649414,
    "y": 810,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "e6924452.e6205"
      ]
    ]
  },
  {
    "id": "b9d2eb35.931cc8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3066.629165649414,
    "y": 765.8597412109375,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "e6924452.e6205",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3065.566665649414,
    "y": 810,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "c53e6e84.05ac9",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2913.566665649414,
    "y": 889,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "361f88a3.058c08"
      ]
    ]
  },
  {
    "id": "361f88a3.058c08",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3052.566665649414,
    "y": 889,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "936c7f50.057838",
        "fff97b6b.1650f8",
        "40c59221.de8304",
        "da2087d.3780d78",
        "db5a893f.6acb2",
        "855375ef.856b78",
        "bd585daa.5b0d3",
        "d3754757.4f2538",
        "dd28e890.6f37f",
        "10147ab3.fed6fd",
        "425867c4.b0a9",
        "e3e1a44c.9927b8",
        "4a62d4e.fca9aac",
        "2ae40328.466974",
        "f71bee39.3d2f68",
        "6cb3b80a.d81b1",
        "7411f30.15b1c8c",
        "59ced5c4.1cbb54",
        "b2338e3d.f752e8",
        "8b07e19d.5f94",
        "877b276.88c73d8"
      ]
    ]
  },
  {
    "id": "b5bad4b9.685ad8",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3401.566665649414,
    "y": 422.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "936c7f50.057838",
    "type": "execute",
    "name": "execute UUID generator for otn-tunnel-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3382.566604614258,
    "y": 501.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "2ae40328.466974",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 3339.566604614258,
    "y": 546.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "fff97b6b.1650f8",
    "type": "set",
    "name": "set network-route-one",
    "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
    "comments": "",
    "x": 3304.566635131836,
    "y": 600.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "40c59221.de8304",
    "type": "set",
    "name": "set network-route-two",
    "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
    "comments": "",
    "x": 3305.566635131836,
    "y": 655.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "da2087d.3780d78",
    "type": "save",
    "name": "get network-route-one from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
    "comments": "",
    "outputs": 1,
    "x": 3303.566635131836,
    "y": 919.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "969278b.6dcd308",
        "8ef50320.33a2f",
        "bc9f501b.616458"
      ]
    ]
  },
  {
    "id": "db5a893f.6acb2",
    "type": "save",
    "name": "get network-route-two from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
    "comments": "",
    "outputs": 1,
    "x": 3298.566635131836,
    "y": 980.9998474121094,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "3f6dc76b.2c189",
        "8fe533b.8ccffd",
        "17823dcb.715f8a"
      ]
    ]
  },
  {
    "id": "969278b.6dcd308",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3614.566635131836,
    "y": 690.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "9ca5fa1b.024df8"
      ]
    ]
  },
  {
    "id": "8ef50320.33a2f",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3610.075668334961,
    "y": 740.4259948730469,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "e39d355.b4f33c8"
      ]
    ]
  },
  {
    "id": "bc9f501b.616458",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3614.075668334961,
    "y": 793.4259948730469,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "e84899ba.db50e8"
      ]
    ]
  },
  {
    "id": "9ca5fa1b.024df8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3763.138168334961,
    "y": 690.2857360839844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "e39d355.b4f33c8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3753.075668334961,
    "y": 740.4259948730469,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "3f6dc76b.2c189",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3576.566604614258,
    "y": 880.9998168945312,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "62e0b7bc.37a4e"
      ]
    ]
  },
  {
    "id": "8fe533b.8ccffd",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3572.075668334961,
    "y": 923.4258728027344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "ac864505.12601"
      ]
    ]
  },
  {
    "id": "17823dcb.715f8a",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3573.075668334961,
    "y": 976.4258728027344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "bed44813.048dd"
      ]
    ]
  },
  {
    "id": "62e0b7bc.37a4e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3725.138137817383,
    "y": 880.2855834960938,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "ac864505.12601",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3715.075668334961,
    "y": 923.4258728027344,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "e84899ba.db50e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3775.566635131836,
    "y": 792.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "f9db2337.8fb9d"
      ]
    ]
  },
  {
    "id": "bed44813.048dd",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3726.566635131836,
    "y": 975.9998474121094,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "423a02cf.14e434"
      ]
    ]
  },
  {
    "id": "f9db2337.8fb9d",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3950.566635131836,
    "y": 766.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "2c035f93.775ae8",
        "a1971f98.6ccb48",
        "dd62b4eb.26fb1"
      ]
    ]
  },
  {
    "id": "423a02cf.14e434",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3910.566635131836,
    "y": 883.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "9f546ca0.9d33e8",
        "2ec96d4e.1ca132",
        "cb966d3f.bcf358"
      ]
    ]
  },
  {
    "id": "2c035f93.775ae8",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4072.566635131836,
    "y": 551.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "6429cd23.35e7c4"
      ]
    ]
  },
  {
    "id": "a1971f98.6ccb48",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4074.566635131836,
    "y": 605.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "17c9fbf5.2a0a34"
      ]
    ]
  },
  {
    "id": "9f546ca0.9d33e8",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4091.566665649414,
    "y": 822,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "22d232ad.fa9d6e"
      ]
    ]
  },
  {
    "id": "2ec96d4e.1ca132",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4093.566665649414,
    "y": 876,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5c001c7.14606e4"
      ]
    ]
  },
  {
    "id": "d98ccbbe.37e04",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4382.566635131836,
    "y": 503.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "449eb720.722948",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4375.566635131836,
    "y": 601.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "83bfbc5.ae6994",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4393.566665649414,
    "y": 795,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "5244a859.c728e8",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4397.566665649414,
    "y": 888,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "6ca3f458.2d99d4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3540.566665649414,
    "y": 1560,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "3eea4372.1c5814"
      ]
    ]
  },
  {
    "id": "662947db.2b96e8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3550.057632446289,
    "y": 1602.5740356445312,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "f28295e0.d2c148"
      ]
    ]
  },
  {
    "id": "5677884d.d93c78",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3538.566665649414,
    "y": 1649,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "f900f622.22fda"
      ]
    ]
  },
  {
    "id": "eddb7de7.123d5",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3240.566665649414,
    "y": 1522,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "bd585daa.5b0d3",
    "type": "save",
    "name": "get p-interface-src from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3283.566665649414,
    "y": 1587,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "6ca3f458.2d99d4",
        "662947db.2b96e8",
        "5677884d.d93c78"
      ]
    ]
  },
  {
    "id": "855375ef.856b78",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3284.566665649414,
    "y": 1257,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "74d070ad.2d8b38",
        "f1856675.64f168"
      ]
    ]
  },
  {
    "id": "f1856675.64f168",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3505.566635131836,
    "y": 1309.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "77f0bbcf.b75e0c"
      ]
    ]
  },
  {
    "id": "74d070ad.2d8b38",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3507.566635131836,
    "y": 1342.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "6e268d43.53f934"
      ]
    ]
  },
  {
    "id": "3eea4372.1c5814",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3713.233169555664,
    "y": 1559,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "f48e6ddf.17618",
        "cc30c632.26f008"
      ]
    ]
  },
  {
    "id": "f28295e0.d2c148",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3703.6290435791016,
    "y": 1605.8597717285156,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "f900f622.22fda",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3707.566665649414,
    "y": 1650,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "f48e6ddf.17618",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3977.566665649414,
    "y": 1543,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c31fbd4a.4c152",
        "ca57bc98.e008f"
      ]
    ]
  },
  {
    "id": "ca57bc98.e008f",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4200.566665649414,
    "y": 1498,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "ae27226e.c1211"
      ]
    ]
  },
  {
    "id": "c31fbd4a.4c152",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4202.566665649414,
    "y": 1562,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "48b6888c.1688c8"
      ]
    ]
  },
  {
    "id": "48b6888c.1688c8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4364.566665649414,
    "y": 1558,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "ae27226e.c1211",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4365.566665649414,
    "y": 1495,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "dc9805ea.b1d968",
        "e17a88a7.3a0c68"
      ]
    ]
  },
  {
    "id": "6e268d43.53f934",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3650.566635131836,
    "y": 1339.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "77f0bbcf.b75e0c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3653.566635131836,
    "y": 1302.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "6b41cb54.146c7c",
        "2227088d.da8978"
      ]
    ]
  },
  {
    "id": "6b41cb54.146c7c",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3827.566635131836,
    "y": 1258.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "cc30c632.26f008",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3926.566635131836,
    "y": 1652.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "4c51d8d9.7e50e"
      ]
    ]
  },
  {
    "id": "4c51d8d9.7e50e",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4132.566635131836,
    "y": 1652.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "ea6dd5aa.f54cc"
      ]
    ]
  },
  {
    "id": "ea6dd5aa.f54cc",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4347.852279663086,
    "y": 1652.8217468261719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "878f0a88.cc7f28"
      ]
    ]
  },
  {
    "id": "2227088d.da8978",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3842.566635131836,
    "y": 1369.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "a1b22fed.dd46f",
        "39006ff3.e4d42",
        "90a88d63.a0deb"
      ]
    ]
  },
  {
    "id": "a1b22fed.dd46f",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4038.0667572021484,
    "y": 1321.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "11cc8b93.732e94"
      ]
    ]
  },
  {
    "id": "39006ff3.e4d42",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4030.0667572021484,
    "y": 1376.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "dc84c818.c1238"
      ]
    ]
  },
  {
    "id": "90a88d63.a0deb",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4035.0667572021484,
    "y": 1433.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5b4aec5c.78ea6c"
      ]
    ]
  },
  {
    "id": "5b4aec5c.78ea6c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4187.066757202148,
    "y": 1434.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "dc84c818.c1238",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4198.066757202148,
    "y": 1379.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "11cc8b93.732e94",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4182.449081420898,
    "y": 1319.6556396484375,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "3dd6ac8d.e6d824"
      ]
    ]
  },
  {
    "id": "3dd6ac8d.e6d824",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4366.566635131836,
    "y": 1333.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "2c6d0561.1001da"
      ]
    ]
  },
  {
    "id": "e17a88a7.3a0c68",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
    "comments": "",
    "x": 4535.566665649414,
    "y": 1453,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "dc9805ea.b1d968",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
    "comments": "",
    "x": 4536.566665649414,
    "y": 1561,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "4eccdb3c.a00b8c",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4537.566665649414,
    "y": 1510,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "878f0a88.cc7f28",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4554.683822631836,
    "y": 1653.3403015136719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "a6df4a7c.6d4298",
        "e55c6491.d1cf5",
        "7eb455b8.997c94"
      ]
    ]
  },
  {
    "id": "a6df4a7c.6d4298",
    "type": "set",
    "name": "set source ttp-id",
    "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4769.683822631836,
    "y": 1615.3403015136719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "e55c6491.d1cf5",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4766.683822631836,
    "y": 1654.3403015136719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5121fcc7.d1555c"
      ]
    ]
  },
  {
    "id": "7eb455b8.997c94",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4722.183822631836,
    "y": 1696.3403015136719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "5121fcc7.d1555c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4947.183822631836,
    "y": 1653.3403015136719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "dcdffb31.a68748"
      ]
    ]
  },
  {
    "id": "ee290dd7.3447b8",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4766.566665649414,
    "y": 1271,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "f5c3f7a5.0472d8"
      ]
    ]
  },
  {
    "id": "f5c3f7a5.0472d8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4943.566665649414,
    "y": 1263,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "92327400.5b0ea",
        "7dac197a.3be828"
      ]
    ]
  },
  {
    "id": "2c6d0561.1001da",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4561.566635131836,
    "y": 1333.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "ee290dd7.3447b8",
        "97637af.969a388"
      ]
    ]
  },
  {
    "id": "97637af.969a388",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4769.566665649414,
    "y": 1345,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "2b94ab82.f6af74"
      ]
    ]
  },
  {
    "id": "2b94ab82.f6af74",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4946.566665649414,
    "y": 1337,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "a745e5da.a32578"
      ]
    ]
  },
  {
    "id": "dcdffb31.a68748",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5105.183822631836,
    "y": 1653.3403015136719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "f0d23e06.a32c6"
      ]
    ]
  },
  {
    "id": "f0d23e06.a32c6",
    "type": "set",
    "name": "set source tunnel tp ip",
    "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5312.183822631836,
    "y": 1653.3403015136719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "7dac197a.3be828",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5151.566665649414,
    "y": 1270,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "36ef2efb.214b2a",
        "a6a3aa1c.6f7288",
        "f4089fab.088a2"
      ]
    ]
  },
  {
    "id": "92327400.5b0ea",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainA id",
    "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5181.566665649414,
    "y": 1218,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "36ef2efb.214b2a",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5361.566665649414,
    "y": 1261,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "8d49602b.5cbbb8"
      ]
    ]
  },
  {
    "id": "a6a3aa1c.6f7288",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5353.566665649414,
    "y": 1316,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "2502bb8.26e4744"
      ]
    ]
  },
  {
    "id": "f4089fab.088a2",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5358.566665649414,
    "y": 1373,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "192598bd.b5d887"
      ]
    ]
  },
  {
    "id": "192598bd.b5d887",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5510.566665649414,
    "y": 1374,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "2502bb8.26e4744",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5521.566665649414,
    "y": 1319,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "8d49602b.5cbbb8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5505.948989868164,
    "y": 1258.6556701660156,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "34dd56c8.a561f2"
      ]
    ]
  },
  {
    "id": "a745e5da.a32578",
    "type": "set",
    "name": "set domainA ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5181.566665649414,
    "y": 1461,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "34dd56c8.a561f2",
    "type": "set",
    "name": "set controller domainA data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5720.566665649414,
    "y": 1255,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "9cc65469.2e5488",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4370.566635131836,
    "y": 539.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "bae36160.d0fbc",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4361.566635131836,
    "y": 637.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "6429cd23.35e7c4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4195.566635131836,
    "y": 545.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "d98ccbbe.37e04",
        "9cc65469.2e5488"
      ]
    ]
  },
  {
    "id": "17c9fbf5.2a0a34",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4201.566635131836,
    "y": 609.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "449eb720.722948",
        "bae36160.d0fbc"
      ]
    ]
  },
  {
    "id": "22d232ad.fa9d6e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4219.566665649414,
    "y": 822,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "83bfbc5.ae6994",
        "7c60504e.d38f7"
      ]
    ]
  },
  {
    "id": "5c001c7.14606e4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4222.566665649414,
    "y": 875,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5244a859.c728e8",
        "9835c9a0.4caf78"
      ]
    ]
  },
  {
    "id": "7c60504e.d38f7",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4379.566665649414,
    "y": 835,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "9835c9a0.4caf78",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4382.566665649414,
    "y": 926,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "c2220864.024798",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3674.566635131836,
    "y": 2052.999969482422,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "b80ff39a.5788d",
        "d5ffb970.fa1968"
      ]
    ]
  },
  {
    "id": "db8ae4f9.347f",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3501.900131225586,
    "y": 2053.999969482422,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c2220864.024798"
      ]
    ]
  },
  {
    "id": "4d1c7431.f53f04",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3511.391098022461,
    "y": 2096.574005126953,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c720d68c.d6ef88"
      ]
    ]
  },
  {
    "id": "f027027b.1605f8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3499.900131225586,
    "y": 2142.999969482422,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "174ecc35.cb4194"
      ]
    ]
  },
  {
    "id": "c720d68c.d6ef88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3664.9625091552734,
    "y": 2099.8597412109375,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "174ecc35.cb4194",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3668.900131225586,
    "y": 2143.999969482422,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "b80ff39a.5788d",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3960.900131225586,
    "y": 2057.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "f5a758df.e8e0d8",
        "83d46017.2ef77"
      ]
    ]
  },
  {
    "id": "83d46017.2ef77",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4183.900131225586,
    "y": 2012.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "128bbd7c.ee7803"
      ]
    ]
  },
  {
    "id": "f5a758df.e8e0d8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4185.900131225586,
    "y": 2076.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "7922a686.9432f8"
      ]
    ]
  },
  {
    "id": "7922a686.9432f8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4344.900131225586,
    "y": 2095.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "128bbd7c.ee7803",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4348.900131225586,
    "y": 2009.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "ecc94bdb.36f218",
        "70d8643e.5fc584"
      ]
    ]
  },
  {
    "id": "dd28e890.6f37f",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3273.900131225586,
    "y": 2088.999969482422,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "db8ae4f9.347f",
        "4d1c7431.f53f04",
        "f027027b.1605f8"
      ]
    ]
  },
  {
    "id": "6cb9de7.531902",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3234.900131225586,
    "y": 2032.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "d3754757.4f2538",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3293.900131225586,
    "y": 1828.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c926dd8a.c40d78",
        "b866a3cd.1307c8"
      ]
    ]
  },
  {
    "id": "b866a3cd.1307c8",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3516.900131225586,
    "y": 1814.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "963b51c2.5c60a8"
      ]
    ]
  },
  {
    "id": "c926dd8a.c40d78",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3518.900131225586,
    "y": 1847.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "288c4b3e.38e3ac"
      ]
    ]
  },
  {
    "id": "288c4b3e.38e3ac",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3661.900131225586,
    "y": 1844.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "963b51c2.5c60a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3664.900131225586,
    "y": 1807.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "dba238c.ade58c8",
        "11c5499c.e33516"
      ]
    ]
  },
  {
    "id": "dba238c.ade58c8",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3858.900131225586,
    "y": 1811.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "d5ffb970.fa1968",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3911.900100708008,
    "y": 2179.9999389648438,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "8ab0c323.e760e"
      ]
    ]
  },
  {
    "id": "8ab0c323.e760e",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4117.900100708008,
    "y": 2179.9999389648438,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "ef601430.2ce96"
      ]
    ]
  },
  {
    "id": "ef601430.2ce96",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4335.185745239258,
    "y": 2178.8217163085938,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "e64538ad.e88608"
      ]
    ]
  },
  {
    "id": "11c5499c.e33516",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3880.900131225586,
    "y": 1879.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "72da73e.01fae8c",
        "1bf4f20c.844916",
        "c2abc766.4ac0f"
      ]
    ]
  },
  {
    "id": "72da73e.01fae8c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4076.4002532958984,
    "y": 1831.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "e5dd1f31.8ac458"
      ]
    ]
  },
  {
    "id": "1bf4f20c.844916",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4068.4002532958984,
    "y": 1886.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "2c7c5a6c.8f4a66"
      ]
    ]
  },
  {
    "id": "c2abc766.4ac0f",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4073.4002532958984,
    "y": 1943.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "a0f15b8e.a7ebb"
      ]
    ]
  },
  {
    "id": "a0f15b8e.a7ebb",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4225.400253295898,
    "y": 1944.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "2c7c5a6c.8f4a66",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4236.400253295898,
    "y": 1889.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "e5dd1f31.8ac458",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4220.782577514648,
    "y": 1828.65576171875,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5bc7c506.3f7314"
      ]
    ]
  },
  {
    "id": "ecc94bdb.36f218",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
    "comments": "",
    "x": 4518.900131225586,
    "y": 1970.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "70d8643e.5fc584",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
    "comments": "",
    "x": 4519.900131225586,
    "y": 2075.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "75e052b3.6ff0fc",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4514.900131225586,
    "y": 2024.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "e64538ad.e88608",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4542.017288208008,
    "y": 2168.3403930664062,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "58b39a0b.a28104",
        "908d048a.fd0138",
        "5394d746.97415"
      ]
    ]
  },
  {
    "id": "58b39a0b.a28104",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4757.017288208008,
    "y": 2130.3403930664062,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "908d048a.fd0138",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4754.017288208008,
    "y": 2169.3403930664062,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "160d9213.6a516e"
      ]
    ]
  },
  {
    "id": "5394d746.97415",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4709.517288208008,
    "y": 2211.3403930664062,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "160d9213.6a516e",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4934.517288208008,
    "y": 2168.3403930664062,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "2403cbf1.90bae4"
      ]
    ]
  },
  {
    "id": "2403cbf1.90bae4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5092.517288208008,
    "y": 2168.3403930664062,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "15dae2c1.fe6bdd"
      ]
    ]
  },
  {
    "id": "15dae2c1.fe6bdd",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5299.517288208008,
    "y": 2168.3403930664062,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "e7ce121f.269bb",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4802.900131225586,
    "y": 1847.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "30725ca7.222ea4"
      ]
    ]
  },
  {
    "id": "30725ca7.222ea4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4979.900131225586,
    "y": 1839.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "82bc9190.99083",
        "c6a75ef3.9aa488"
      ]
    ]
  },
  {
    "id": "5bc7c506.3f7314",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4404.900131225586,
    "y": 1843.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "9e2fa3d8.88246"
      ]
    ]
  },
  {
    "id": "9e2fa3d8.88246",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4599.900131225586,
    "y": 1843.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "e7ce121f.269bb",
        "87abf2c8.a21648"
      ]
    ]
  },
  {
    "id": "c6a75ef3.9aa488",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5187.900131225586,
    "y": 1846.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "d33681ca.12c55",
        "54cfcb70.c20a5c",
        "76901bc2.c646ec"
      ]
    ]
  },
  {
    "id": "c7485083.08e3d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4981.900131225586,
    "y": 1912.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "9f7ab33f.3d3ee8"
      ]
    ]
  },
  {
    "id": "87abf2c8.a21648",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4804.900131225586,
    "y": 1920.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c7485083.08e3d"
      ]
    ]
  },
  {
    "id": "82bc9190.99083",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainB id",
    "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5217.900131225586,
    "y": 1794.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "9f7ab33f.3d3ee8",
    "type": "set",
    "name": "set domainB ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5216.900131225586,
    "y": 2036.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "d33681ca.12c55",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5397.900131225586,
    "y": 1837.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "52bdc174.53236"
      ]
    ]
  },
  {
    "id": "54cfcb70.c20a5c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5389.900131225586,
    "y": 1892.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "da0362e9.7cf8b8"
      ]
    ]
  },
  {
    "id": "76901bc2.c646ec",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5394.900131225586,
    "y": 1949.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "656ad13e.13aaf8"
      ]
    ]
  },
  {
    "id": "656ad13e.13aaf8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5546.900131225586,
    "y": 1950.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "da0362e9.7cf8b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5557.900131225586,
    "y": 1895.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "52bdc174.53236",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5542.282455444336,
    "y": 1834.65576171875,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "2dd4dc53.801b1c"
      ]
    ]
  },
  {
    "id": "2dd4dc53.801b1c",
    "type": "set",
    "name": "set controller domainB data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5756.900131225586,
    "y": 1831.0000915527344,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "10147ab3.fed6fd",
    "type": "set",
    "name": "set LEAF stuff",
    "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop + '-' + $tmp.aai.network-route-A.logical-interface-id`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
    "comments": "",
    "x": 3241.566635131836,
    "y": 1649.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "bb3da11a.4b756",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4537.566635131836,
    "y": 623.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "550747e5.fd6e4",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4547.566665649414,
    "y": 820,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "425867c4.b0a9",
    "type": "set",
    "name": "set ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop + '-' + $tmp.aai.network-route-B.logical-interface-id`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
    "comments": "",
    "x": 3244.566604614258,
    "y": 2157.9999389648438,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "e3e1a44c.9927b8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3381.566665649414,
    "y": 2814,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "4a62d4e.fca9aac",
    "type": "switchNode",
    "name": "switch found-middle-man?",
    "xml": "<switch test='`$found-middle-man`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3258.566665649414,
    "y": 2924,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "81493f2.f26234",
        "6c24115d.c6e7c"
      ]
    ]
  },
  {
    "id": "81493f2.f26234",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3442.566665649414,
    "y": 2903,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "3aff0eaf.ff7b7a"
      ]
    ]
  },
  {
    "id": "6c24115d.c6e7c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3334.566665649414,
    "y": 5081,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5bc4950a.db01dc"
      ]
    ]
  },
  {
    "id": "5bc4950a.db01dc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3489.566665649414,
    "y": 5074,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "2f2701b5.2dac16",
        "316110e0.e54cc",
        "b160de6d.e8ced8",
        "595e7f4b.3b8bd8",
        "8bf8bc6f.53ce6",
        "1e2222c.7b917dd"
      ]
    ]
  },
  {
    "id": "3aff0eaf.ff7b7a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3585.566665649414,
    "y": 2903,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5168a07f.a36df8",
        "6c599b75.a60fcc",
        "35850a83.44a89e",
        "ae160236.4157c8",
        "b7fd9c88.558b98",
        "6e041a0e.19b3cc",
        "612f5852.aaa57",
        "8d9898f5.dd7e",
        "638e1104.d7c428",
        "d797d3a4.8fe9",
        "ce4e4e08.0ce56",
        "a4cacc19.7d376",
        "57e31ea9.c7173",
        "bf6be8f0.fb6c88",
        "982a1a56.4966b8",
        "8feec705.936fd8",
        "eb6eb29c.21a438",
        "cad73781.1cf898",
        "bdd8ea07.2740c",
        "8877dbf4.9fef7",
        "374b533b.d2c934",
        "e008f489.a45f08"
      ]
    ]
  },
  {
    "id": "638e1104.d7c428",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3895.566665649414,
    "y": 3218,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "5168a07f.a36df8",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3843.566665649414,
    "y": 3260,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "6c599b75.a60fcc",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3972.566665649414,
    "y": 3302,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "e80dd6ae.f178",
    "type": "comment",
    "name": "Create ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 3818.566665649414,
    "y": 3177,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "b4b36e39.27fc08",
    "type": "comment",
    "name": "create middle man connectivity and ...",
    "info": "1- create middle man connectivity\n2- create relation with all connectivities\n   in the path\n3- put srcTtp (+dstTtp) somewhere in the\n   vpn-binding -> this is for later on to find\n   which OTN tunnel's bandwidth has to be increased.\n5- create UNIs\n4- create relationship to UNIs",
    "comments": "",
    "x": 4343.566665649414,
    "y": 3698,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "35850a83.44a89e",
    "type": "execute",
    "name": "execute UUID generator for connectivity middle-man",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-middle-man-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3907.566665649414,
    "y": 3737,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "ae160236.4157c8",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-middle-man-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-middle-man-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<!--The followings are not needed for the middle-man-connectivity-->\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />-->\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='mdsc' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3855.566665649414,
    "y": 3788,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "b7fd9c88.558b98",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-middle-man-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-middle-man-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3991.566665649414,
    "y": 3835,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "f07a7af4.49b438",
    "type": "comment",
    "name": "Create MIDDLE-MAN connectivity",
    "info": "",
    "comments": "",
    "x": 3848.566665649414,
    "y": 3697,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "d7c1d718.25aef8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4278.566665649414,
    "y": 3894,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "6e041a0e.19b3cc",
    "type": "save",
    "name": "get middle-man connectivity from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $prop.connectivity-middle-man-uuid\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"middle-man-conn\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3869.566665649414,
    "y": 3941,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "3be15b0.8cc9ea6",
        "8fcafedd.8f9ff8",
        "74f3c2d6.5194d4"
      ]
    ]
  },
  {
    "id": "3be15b0.8cc9ea6",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4116.566665649414,
    "y": 3895,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "d7c1d718.25aef8"
      ]
    ]
  },
  {
    "id": "8fcafedd.8f9ff8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4117.057632446289,
    "y": 3940.5740356445312,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "535b8241.bba134"
      ]
    ]
  },
  {
    "id": "74f3c2d6.5194d4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4114.566665649414,
    "y": 3984,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "4abd8099.5640c"
      ]
    ]
  },
  {
    "id": "535b8241.bba134",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4279.629043579102,
    "y": 3940.8597717285156,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "4abd8099.5640c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4283.566665649414,
    "y": 3985,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "982a1a56.4966b8",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3923.566665649414,
    "y": 4283,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "8feec705.936fd8",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3926.566665649414,
    "y": 4328,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "cad73781.1cf898",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3918.566665649414,
    "y": 4056,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "bdd8ea07.2740c",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3920.566665649414,
    "y": 4103,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "b21853e4.c6418",
    "type": "comment",
    "name": "The following two will be done in F1",
    "info": "",
    "comments": "",
    "x": 3839.566665649414,
    "y": 4236,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "f1842c11.743b7",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4449.566665649414,
    "y": 4902,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "2f2701b5.2dac16",
    "type": "switchNode",
    "name": "switch no-pce-call",
    "xml": "<switch test='`$no-pce-call`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3704.566665649414,
    "y": 5055,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "bb4138b0.4e1d88",
        "3497566e.93319a"
      ]
    ]
  },
  {
    "id": "3497566e.93319a",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3876.566665649414,
    "y": 5052,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c7f4755e.39d608"
      ]
    ]
  },
  {
    "id": "bb4138b0.4e1d88",
    "type": "outcomeFalse",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3828.566665649414,
    "y": 5899,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "6c4c0ada.7452e4"
      ]
    ]
  },
  {
    "id": "4c3530ee.3fa66",
    "type": "comment",
    "name": "1 --> PCE is needed",
    "info": "",
    "comments": "",
    "x": 3889.566665649414,
    "y": 5022,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "56d0be77.8f738",
    "type": "comment",
    "name": "2 --> no need to call PCE",
    "info": "",
    "comments": "",
    "x": 3899.566665649414,
    "y": 5857,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "612f5852.aaa57",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3922.566665649414,
    "y": 4431,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "c7f4755e.39d608",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4052.566665649414,
    "y": 5054,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "230e1b13.237ccc",
        "5181bb49.6fa9a4",
        "fd0048f2.8665c8",
        "78647ab5.49b354",
        "f0982e54.06c37",
        "828e934c.bce518",
        "f1842c11.743b7",
        "76d94500.85b34c",
        "66bf889f.a4f118"
      ]
    ]
  },
  {
    "id": "ae961dcf.a0b6c",
    "type": "comment",
    "name": "Use the middle-man-conn.eth-srv-name for the LEAF connectivity's eth srv name",
    "info": "",
    "comments": "",
    "x": 5497.566665649414,
    "y": 4527,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "230e1b13.237ccc",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4430.566665649414,
    "y": 5557,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "8d9898f5.dd7e",
    "type": "save",
    "name": "save connectivityB relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3901.566665649414,
    "y": 3431,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "d797d3a4.8fe9",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3899.566665649414,
    "y": 2888,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "ce4e4e08.0ce56",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3847.566665649414,
    "y": 2936,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "a4cacc19.7d376",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3975.566665649414,
    "y": 2983,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "ae968df.974b9f",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 3812.566665649414,
    "y": 2846,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "57e31ea9.c7173",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />",
    "comments": "",
    "outputs": 1,
    "x": 3809.566665649414,
    "y": 3074,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "bf6be8f0.fb6c88",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3902.566665649414,
    "y": 3127,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "155d8942.126f0f",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 3793.566665649414,
    "y": 3030,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "eda430a0.e8a4b8",
    "type": "comment",
    "name": "Create ROOT UNI",
    "info": "",
    "comments": "",
    "x": 3797.566665649414,
    "y": 3346,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "78647ab5.49b354",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4366.566665649414,
    "y": 4535,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "db99df8c.8021",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4350.566665649414,
    "y": 4491,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "fea8fd97.74e2c8",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 5097.566665649414,
    "y": 4522,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "5a0b429f.b8f42c",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 5184.566665649414,
    "y": 4564,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "5930a956.25a2b",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$middle-man-conn.etht-svc-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 5132.566665649414,
    "y": 4612,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "8f7ba394.827068",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5260.566665649414,
    "y": 4659,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "828e934c.bce518",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4437.566665649414,
    "y": 4944,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "29a2a107.550e86",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4420.566665649414,
    "y": 5006,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "5181bb49.6fa9a4",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4531.566665649414,
    "y": 5048,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "a3e1b718.3ad9",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 4979.566665649414,
    "y": 5101,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "778aa80b.aa4e1",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4289.566665649414,
    "y": 5799,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "5829dcc0.7722b4",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4187.566665649414,
    "y": 5748,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "e74f47d7.82472",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4171.566665649414,
    "y": 5704,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "edf4200a.b4f218",
    "type": "save",
    "name": "save the-connectivity relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4957.566665649414,
    "y": 5961,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "fd0048f2.8665c8",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4358.566665649414,
    "y": 5105,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "ad0bda8.59e5ba8",
        "a82a76f3.4e09c"
      ]
    ]
  },
  {
    "id": "ad0bda8.59e5ba8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4569.566665649414,
    "y": 5105,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "85a5596f.5bdcf8"
      ]
    ]
  },
  {
    "id": "85a5596f.5bdcf8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4725.566665649414,
    "y": 5101,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "a3e1b718.3ad9",
        "31466e0d.9a3dba",
        "19c788e0.a62557"
      ]
    ]
  },
  {
    "id": "a82a76f3.4e09c",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4565.566665649414,
    "y": 5153,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "9fc5ee1f.667928"
      ]
    ]
  },
  {
    "id": "9fc5ee1f.667928",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 4713.566665649414,
    "y": 5148,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "4161f07f.2b4a78",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5221.566665649414,
    "y": 4730,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "90827cac.7f3cc8",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2387.566665649414,
    "y": 141,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "e557ce2.09f823",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 2321.566665649414,
    "y": 177,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "47435c42.bdd92c",
    "type": "comment",
    "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
    "info": "",
    "comments": "",
    "x": 2506.566665649414,
    "y": 104,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "b6d8895e.58d1b",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 4256.566665649414,
    "y": 5865,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "c1456abb.063048",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4389.566665649414,
    "y": 5913,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "da4c1b48.fae9f8",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4208.566665649414,
    "y": 5971,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "86ae7c06.4b48",
        "7bcdf21f.be49d4"
      ]
    ]
  },
  {
    "id": "86ae7c06.4b48",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4401.566665649414,
    "y": 5972,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "97f7b4f.de4c2c8"
      ]
    ]
  },
  {
    "id": "97f7b4f.de4c2c8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Connectivity should have been created' />\n",
    "comments": "",
    "x": 4557.566665649414,
    "y": 5969,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "7bcdf21f.be49d4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4405.566665649414,
    "y": 6016,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c9f63d74.2677a"
      ]
    ]
  },
  {
    "id": "c9f63d74.2677a",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4544.566665649414,
    "y": 6011,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "edf4200a.b4f218",
        "684d5c9e.960e44",
        "fa17bed2.102338",
        "4394fc56.b0a524",
        "c58358a8.9796d8",
        "f1d05d51.ef74a8",
        "9dd9cb2c.0f6d38",
        "e3b520b5.76f3e",
        "1492db48.4787f5",
        "4433eaac.652284",
        "5e482e7e.e4be78",
        "b03c5831.d4c5f"
      ]
    ]
  },
  {
    "id": "9dd9cb2c.0f6d38",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4741.566665649414,
    "y": 6690,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1b9180c4.9f766f",
        "3223a99b.bae36e",
        "f1d0a095.e9e33"
      ]
    ]
  },
  {
    "id": "1b9180c4.9f766f",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4946.566665649414,
    "y": 6687,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "901d20b6.63b228"
      ]
    ]
  },
  {
    "id": "3223a99b.bae36e",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4930.057632446289,
    "y": 6748.574035644531,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "74136956.3d8c9"
      ]
    ]
  },
  {
    "id": "f1d0a095.e9e33",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4927.566665649414,
    "y": 6792,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c0df29cc.8ad0d8"
      ]
    ]
  },
  {
    "id": "901d20b6.63b228",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5102.566665649414,
    "y": 6701,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1ef77bcc.af8c2c"
      ]
    ]
  },
  {
    "id": "74136956.3d8c9",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5092.629043579102,
    "y": 6748.859771728516,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "c0df29cc.8ad0d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5094.566665649414,
    "y": 6791,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "1ef77bcc.af8c2c",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5349.566665649414,
    "y": 6698,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "77c4c783.c3eb4"
      ]
    ]
  },
  {
    "id": "77c4c783.c3eb4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5586.566665649414,
    "y": 6694,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "aa349c90.ef423"
      ]
    ]
  },
  {
    "id": "41bd4d7e.8e8f9c",
    "type": "switchNode",
    "name": "switch vpnuuid is for this slice",
    "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5829.566665649414,
    "y": 6666,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "858dc053.37b33",
        "5e74f51.5b7928c"
      ]
    ]
  },
  {
    "id": "858dc053.37b33",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6034.566665649414,
    "y": 6686,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "aa349c90.ef423"
      ]
    ]
  },
  {
    "id": "5e74f51.5b7928c",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6033.566665649414,
    "y": 6639,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "aa349c90.ef423",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4777.566665649414,
    "y": 6961,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "b674f90b.943ea8"
      ]
    ]
  },
  {
    "id": "4b6f312b.4e491",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 6239.566635131836,
    "y": 6898.999969482422,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "e9dae4fe.64e148",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4839.566665649414,
    "y": 6637,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "f1d05d51.ef74a8",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4721.566665649414,
    "y": 6525,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "87a0032d.5441b8",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5066.566665649414,
    "y": 6356,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "e7a622d1.3aac3"
      ]
    ]
  },
  {
    "id": "e7a622d1.3aac3",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5286.566665649414,
    "y": 6362,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "d7851175.526278"
      ]
    ]
  },
  {
    "id": "d7851175.526278",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5473.566665649414,
    "y": 6322,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "56e3e30c.886de4"
      ]
    ]
  },
  {
    "id": "56e3e30c.886de4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5665.566665649414,
    "y": 6325,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c0a5fdcc.0dad4"
      ]
    ]
  },
  {
    "id": "c0a5fdcc.0dad4",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5874.566665649414,
    "y": 6323,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "e3b520b5.76f3e",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4773.566665649414,
    "y": 6350,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "87a0032d.5441b8"
      ]
    ]
  },
  {
    "id": "fa17bed2.102338",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4781.566665649414,
    "y": 6243,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "b854c35b.ab4dd8",
        "6917c22f.3449c4",
        "56393d6a.f28b34"
      ]
    ]
  },
  {
    "id": "b854c35b.ab4dd8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5017.566665649414,
    "y": 6226,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "6917c22f.3449c4",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5014.566665649414,
    "y": 6267,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "56393d6a.f28b34",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5028.566665649414,
    "y": 6307,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "4394fc56.b0a524",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4717.566665649414,
    "y": 6402,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "c58358a8.9796d8",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4725.566665649414,
    "y": 6460,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "684d5c9e.960e44",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4730.566665649414,
    "y": 6200,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "4f9189d2.f34a8",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4845.566665649414,
    "y": 6152,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "b674f90b.943ea8",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5020.566665649414,
    "y": 6958,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "f695cd31.082f9",
        "a92f49c6.640148"
      ]
    ]
  },
  {
    "id": "f695cd31.082f9",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5249.566665649414,
    "y": 6935,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "fe65cd53.d11278"
      ]
    ]
  },
  {
    "id": "a92f49c6.640148",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5249.566665649414,
    "y": 6984,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "8c69c55b.110248",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5982.566635131836,
    "y": 6989.999969482422,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "aeda0706.1d102",
        "4b6f312b.4e491",
        "eebb4557.9c03c"
      ]
    ]
  },
  {
    "id": "ca7dd8b0.fcddf",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6367.566635131836,
    "y": 6952.999969482422,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "eebb4557.9c03c",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<!--<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $gfp`' />\n\n<parameter name='operational-status' value='Modified' />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6337.566635131836,
    "y": 7012.999969482422,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "aeda0706.1d102",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 6244.566635131836,
    "y": 6840.999969482422,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "6c4c0ada.7452e4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3980.566665649414,
    "y": 5898,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5829dcc0.7722b4",
        "b6d8895e.58d1b",
        "c1456abb.063048",
        "da4c1b48.fae9f8",
        "778aa80b.aa4e1"
      ]
    ]
  },
  {
    "id": "146e3d98.17031a",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4722.566665649414,
    "y": 6300,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "1492db48.4787f5",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4850.566665649414,
    "y": 6042,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "cc643bc5.4660a",
    "type": "comment",
    "name": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "info": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "comments": "",
    "x": 4987.566665649414,
    "y": 5992,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "eb6eb29c.21a438",
    "type": "save",
    "name": "save ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='type' value='root' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3814.566665649414,
    "y": 3385,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "3ddb9817.a2345",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3992.566635131836,
    "y": 1619.9999694824219,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "87712f4d.617c48",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3971.566604614258,
    "y": 2131.9999389648438,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "4a9500be.eb8d5",
    "type": "comment",
    "name": "TEMPORARY REMOVING THE FOLLOWING TWO NODES",
    "info": "",
    "comments": "",
    "x": 3806.566665649414,
    "y": 4006,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "1cb779c6.3641ce",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3896.566665649414,
    "y": 6386,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "316110e0.e54cc",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3698.566665649414,
    "y": 4915,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "b160de6d.e8ced8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3831.566665649414,
    "y": 4963,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "f0982e54.06c37",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4377.566665649414,
    "y": 4591,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c8f13ad.170ba48",
        "e5fec2af.744f18"
      ]
    ]
  },
  {
    "id": "c8f13ad.170ba48",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4570.566665649414,
    "y": 4592,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "7d8426b0.28b2e8"
      ]
    ]
  },
  {
    "id": "e5fec2af.744f18",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4574.566665649414,
    "y": 4636,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "bbb62c5.19c455"
      ]
    ]
  },
  {
    "id": "bbb62c5.19c455",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4713.566665649414,
    "y": 4631,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "fdbb486.bd6db38",
        "ecce0ba1.70791",
        "5cdec210.c3723c"
      ]
    ]
  },
  {
    "id": "7d8426b0.28b2e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4713.566665649414,
    "y": 4588,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5a0b429f.b8f42c",
        "5930a956.25a2b",
        "8f7ba394.827068",
        "4161f07f.2b4a78"
      ]
    ]
  },
  {
    "id": "fdbb486.bd6db38",
    "type": "set",
    "name": "set prop.connectivity-domainA-uuid",
    "xml": "<set>\n<parameter name='uuid.connectivity-domainA-uuid' value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5115.566909790039,
    "y": 4853,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "1b42c685.843199",
    "type": "comment",
    "name": "populate connectivity-A variable in the context map",
    "info": "",
    "comments": "",
    "x": 5122.566909790039,
    "y": 4807,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "4433eaac.652284",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4912.566665649414,
    "y": 6586,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "ecce0ba1.70791",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5233.566909790039,
    "y": 4895,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "31466e0d.9a3dba",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5108.566665649414,
    "y": 5153,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "c7cb9f6d.ac734",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3453.566665649414,
    "y": 4486,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "9ba8b5cc.a415f",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3975.566665649414,
    "y": 4587,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "595e7f4b.3b8bd8",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3432.566665649414,
    "y": 4530,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "2a6568f7.a02838",
        "9843c265.208d4",
        "db80e493.f550d"
      ]
    ]
  },
  {
    "id": "9843c265.208d4",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3621.057632446289,
    "y": 4498.57421875,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "d1fd8036.140ed8"
      ]
    ]
  },
  {
    "id": "db80e493.f550d",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3609.566665649414,
    "y": 4538,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "b0bc7666.9d27d8"
      ]
    ]
  },
  {
    "id": "d1fd8036.140ed8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3780.629165649414,
    "y": 4496.85986328125,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "b0bc7666.9d27d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3770.566665649414,
    "y": 4539,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "aa03472e.31d4e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3772.566665649414,
    "y": 4583,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "4ba9a34f.8b45e4",
        "9ba8b5cc.a415f"
      ]
    ]
  },
  {
    "id": "2a6568f7.a02838",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3614.566665649414,
    "y": 4575,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "aa03472e.31d4e8"
      ]
    ]
  },
  {
    "id": "4ba9a34f.8b45e4",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 3933.566665649414,
    "y": 4515,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "8bf8bc6f.53ce6",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $middle-man-conn.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$middle-man-conn.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3798.566665649414,
    "y": 4854,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "d58a2a07.e32878",
    "type": "comment",
    "name": "Temporary skipping this check - to support multiple instances in one slice",
    "info": "",
    "comments": "",
    "x": 5913.449966430664,
    "y": 6603.88330078125,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "5cdec210.c3723c",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5113.233901977539,
    "y": 4991.08349609375,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "7d691c73.0a445c",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5115.450698852539,
    "y": 4950.88330078125,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "19c788e0.a62557",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4989.233657836914,
    "y": 5241.08349609375,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "b53673c2.40ae68",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 4991.450454711914,
    "y": 5200.88330078125,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "cb99e55a.09312",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5079.033462524414,
    "y": 5603.5166015625,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "b6bbe449.e349b8",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4906.033462524414,
    "y": 5660.5166015625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "9f020db8.9d3b98",
        "42fb1006.cd98b"
      ]
    ]
  },
  {
    "id": "9f020db8.9d3b98",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5117.033462524414,
    "y": 5660.5166015625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "406d3b53.ee3654"
      ]
    ]
  },
  {
    "id": "42fb1006.cd98b",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5113.033462524414,
    "y": 5708.5166015625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "fa70895e.520cf8"
      ]
    ]
  },
  {
    "id": "406d3b53.ee3654",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5273.033462524414,
    "y": 5656.5166015625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "8249d2ac.0a73f8",
        "2838a041.93c678",
        "45d14641.c6458"
      ]
    ]
  },
  {
    "id": "fa70895e.520cf8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 5261.033462524414,
    "y": 5703.5166015625,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "f332f23.f01a81",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5582.917251586914,
    "y": 5757.39990234375,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "45d14641.c6458",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5586.700454711914,
    "y": 5795.60009765625,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "2838a041.93c678",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5693.033462524414,
    "y": 5708.5166015625,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "8249d2ac.0a73f8",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5577.033462524414,
    "y": 5656.5166015625,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "3aa78165.d5c51e",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4968.033462524414,
    "y": 5561.5166015625,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "5e482e7e.e4be78",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4680.366470336914,
    "y": 5736.5166015625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "cb99e55a.09312",
        "b6bbe449.e349b8",
        "5021b590.5d75e4",
        "316a2790.87ce5"
      ]
    ]
  },
  {
    "id": "b03c5831.d4c5f",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4980.399673461914,
    "y": 6097.2001953125,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "b60a5a20.1568d",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5786.683334350586,
    "y": 6934.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "fe65cd53.d11278",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5405.683334350586,
    "y": 6937.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "b60a5a20.1568d",
        "364f2ed4.be66d2",
        "3daa885e.628288"
      ]
    ]
  },
  {
    "id": "364f2ed4.be66d2",
    "type": "switchNode",
    "name": "switch $foundVpnName",
    "xml": "<switch test=\"`$foundVpnName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5631.683334350586,
    "y": 6989.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1f12c870.4650c"
      ]
    ]
  },
  {
    "id": "1f12c870.4650c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5810.683334350586,
    "y": 6988.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "8c69c55b.110248"
      ]
    ]
  },
  {
    "id": "3daa885e.628288",
    "type": "set",
    "name": "set vpnNameToSearch",
    "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
    "comments": "",
    "x": 5632.683334350586,
    "y": 6882.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "651f3c1e.ddf684",
    "type": "notify",
    "name": "notify",
    "xml": "<notify plugin='' resource='' action='' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2626.683334350586,
    "y": 931.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "f71bee39.3d2f68",
    "type": "set",
    "name": "set network-route-three",
    "xml": "<set>\n<parameter name='network-route-three' value=\"`$tmp.aai.logical-link.segment-id`\" />\n\n\n",
    "comments": "",
    "x": 3304.683334350586,
    "y": 707.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "1f090c0d.f20bac",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3520.683334350586,
    "y": 1035.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "4c96009f.d63af8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3516.192398071289,
    "y": 1077.542724609375,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "30702b44.ca2744",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3520.192367553711,
    "y": 1125.5426940917969,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "f0fe90c1.1ee158"
      ]
    ]
  },
  {
    "id": "f0fe90c1.1ee158",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3677.683334350586,
    "y": 1125.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "24f554c8.25b494"
      ]
    ]
  },
  {
    "id": "24f554c8.25b494",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-three.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3847.683364868164,
    "y": 1128.1168212890625,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "92b753af.8b83b",
        "e0d04b94.0a949",
        "3f783acd.f1212e"
      ]
    ]
  },
  {
    "id": "92b753af.8b83b",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4021.683334350586,
    "y": 1066.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "34be9217.24bb7e"
      ]
    ]
  },
  {
    "id": "e0d04b94.0a949",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4023.683334350586,
    "y": 1120.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1a5ec0d1.1d1527"
      ]
    ]
  },
  {
    "id": "34be9217.24bb7e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4149.683334350586,
    "y": 1066.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c2e9a46e.2fa128",
        "d3171aa3.cb0078"
      ]
    ]
  },
  {
    "id": "1a5ec0d1.1d1527",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4152.683334350586,
    "y": 1119.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1fb8ea51.9b1c8e",
        "b9df456c.24fc38"
      ]
    ]
  },
  {
    "id": "d3171aa3.cb0078",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4310.683334350586,
    "y": 1090.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "1fb8ea51.9b1c8e",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4327.683334350586,
    "y": 1132.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "b9df456c.24fc38",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4312.683334350586,
    "y": 1170.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "c2e9a46e.2fa128",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4324.683334350586,
    "y": 1050.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "dc69c361.915968",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4489.683334350586,
    "y": 1066.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "6cb3b80a.d81b1",
    "type": "save",
    "name": "get network-route-three from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-three'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-three\">",
    "comments": "",
    "outputs": 1,
    "x": 3280.683334350586,
    "y": 1052.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1f090c0d.f20bac",
        "4c96009f.d63af8",
        "30702b44.ca2744"
      ]
    ]
  },
  {
    "id": "3f783acd.f1212e",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3966.683334350586,
    "y": 1184.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "ce69203c.a7c0d"
      ]
    ]
  },
  {
    "id": "ce69203c.a7c0d",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4140.683334350586,
    "y": 1179.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "77a19b24.92e3d4",
        "6c3b4ea8.3b622"
      ]
    ]
  },
  {
    "id": "6c3b4ea8.3b622",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4310.683334350586,
    "y": 1252.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "77a19b24.92e3d4",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4364.683334350586,
    "y": 1212.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "a7c6adcc.5c3908",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4478.683334350586,
    "y": 1237.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "cb966d3f.bcf358",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4037.683334350586,
    "y": 940.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "359af935.19ef46"
      ]
    ]
  },
  {
    "id": "ca572ac1.2b94f8",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4381.683334350586,
    "y": 1008.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "60fff9bd.2ccfe",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4435.683334350586,
    "y": 968.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "74e2fab5.3910b4",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4579.683334350586,
    "y": 997.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "359af935.19ef46",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4211.683334350586,
    "y": 935.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "60fff9bd.2ccfe",
        "ca572ac1.2b94f8"
      ]
    ]
  },
  {
    "id": "dd62b4eb.26fb1",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4097.683334350586,
    "y": 678.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "eaab099.c2c5e78"
      ]
    ]
  },
  {
    "id": "44f31aac.78bf4c",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4441.683334350586,
    "y": 746.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "e00b5614.1b212",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4495.683334350586,
    "y": 706.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "fb8145.224d2eb8",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4609.683334350586,
    "y": 731.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "eaab099.c2c5e78",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4271.683334350586,
    "y": 673.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "e00b5614.1b212",
        "44f31aac.78bf4c"
      ]
    ]
  },
  {
    "id": "47b6d6c0.771098",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3678.683334350586,
    "y": 2555.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "d5c762a3.e1b22",
        "cd80f814.c17fb8"
      ]
    ]
  },
  {
    "id": "6a53c92c.c39ad8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3506.016830444336,
    "y": 2556.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "47b6d6c0.771098"
      ]
    ]
  },
  {
    "id": "15ee64d.915489b",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3515.507797241211,
    "y": 2598.690704345703,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "ffc72b13.54b308",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3504.016830444336,
    "y": 2645.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "d5c762a3.e1b22",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3965.016830444336,
    "y": 2559.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "39f97b3f.483dec",
        "a10b377c.8904d8"
      ]
    ]
  },
  {
    "id": "a10b377c.8904d8",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4188.016830444336,
    "y": 2514.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1c79745.54c4b0c"
      ]
    ]
  },
  {
    "id": "39f97b3f.483dec",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4190.016830444336,
    "y": 2578.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5e26eb53.994624"
      ]
    ]
  },
  {
    "id": "59ced5c4.1cbb54",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-C.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-C.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3278.016830444336,
    "y": 2591.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "6a53c92c.c39ad8",
        "15ee64d.915489b",
        "ffc72b13.54b308"
      ]
    ]
  },
  {
    "id": "bf53a639.73b6d8",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3239.016830444336,
    "y": 2535.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "7411f30.15b1c8c",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3298.016830444336,
    "y": 2331.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "dd801267.ae8a78",
        "2c468159.26cb9e"
      ]
    ]
  },
  {
    "id": "2c468159.26cb9e",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3521.016830444336,
    "y": 2317.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1f5c2f54.7e50d9"
      ]
    ]
  },
  {
    "id": "dd801267.ae8a78",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3523.016830444336,
    "y": 2350.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "1f5c2f54.7e50d9",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3669.016830444336,
    "y": 2310.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "33d7ee91.be9492",
        "2cd16653.cccd12"
      ]
    ]
  },
  {
    "id": "33d7ee91.be9492",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainC.pnf-name' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3863.016830444336,
    "y": 2313.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "cd80f814.c17fb8",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3916.016799926758,
    "y": 2682.1166381835938,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "f197c90a.b0bfd8"
      ]
    ]
  },
  {
    "id": "f197c90a.b0bfd8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4122.016799926758,
    "y": 2682.1166381835938,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "ee87c14f.7e00c8"
      ]
    ]
  },
  {
    "id": "2cd16653.cccd12",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\"\n        pfx='tmp.aai.destination-secondary-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3885.016830444336,
    "y": 2381.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "b86ed6f1.7f482",
        "f1a441ce.e5665",
        "de4f03bc.b1dad"
      ]
    ]
  },
  {
    "id": "b86ed6f1.7f482",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4080.5169525146484,
    "y": 2333.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "4728dd3.dc78424"
      ]
    ]
  },
  {
    "id": "f1a441ce.e5665",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4072.5169525146484,
    "y": 2388.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "250a014d.a07c5e"
      ]
    ]
  },
  {
    "id": "de4f03bc.b1dad",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4077.5169525146484,
    "y": 2445.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c4850afb.039ba"
      ]
    ]
  },
  {
    "id": "c4850afb.039ba",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4229.516952514648,
    "y": 2446.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "4728dd3.dc78424",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4224.899276733398,
    "y": 2330.7724609375,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "f5f74636.92701"
      ]
    ]
  },
  {
    "id": "b2338e3d.f752e8",
    "type": "set",
    "name": "set SECONDARY-ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-long' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-short' value=\"`$tmp.dst-secondary.pnf-name`\" />\n\n<parameter name='tmp.SECONDARY-ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-C.next-hop + '-' + $tmp.aai.network-route-C.logical-interface-id`\" />\n<parameter name='tmp.SECONDARY-ROOT.uni-tp-id' value=\"`$tmp.dst-secondary.ltpId`\" />\n",
    "comments": "",
    "x": 3300.683334350586,
    "y": 2670.116668701172,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "b3bc28cb.23625",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3975.683303833008,
    "y": 2634.1166381835938,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "5e26eb53.994624",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4349.016830444336,
    "y": 2597.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "1c79745.54c4b0c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4353.016830444336,
    "y": 2511.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "fe7cdeb0.daac9",
        "34c0d4b1.5c7dfc"
      ]
    ]
  },
  {
    "id": "ee87c14f.7e00c8",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4339.302444458008,
    "y": 2680.9384155273438,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "fc8a72d4.98e42"
      ]
    ]
  },
  {
    "id": "250a014d.a07c5e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4240.516952514648,
    "y": 2391.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "fe7cdeb0.daac9",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.ltpId' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n",
    "comments": "",
    "x": 4523.016830444336,
    "y": 2472.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "34c0d4b1.5c7dfc",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.pnf-name' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n",
    "comments": "",
    "x": 4524.016830444336,
    "y": 2577.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "6a8cd207.c1e8c4",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4519.016830444336,
    "y": 2526.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "fc8a72d4.98e42",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4546.133987426758,
    "y": 2670.4570922851562,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "8f4cacd5.ce6228",
        "4e56644.a64779c",
        "68f649.e92691b8"
      ]
    ]
  },
  {
    "id": "8f4cacd5.ce6228",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination-secondary.ttp-id' value=\"`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4761.133987426758,
    "y": 2632.4570922851562,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "4e56644.a64779c",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination-secondary.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-secondary-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4758.133987426758,
    "y": 2671.4570922851562,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "9a6ae8ae.1adf3"
      ]
    ]
  },
  {
    "id": "68f649.e92691b8",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4713.633987426758,
    "y": 2713.4570922851562,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "d8d22b92.e3f9c8",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4807.016830444336,
    "y": 2349.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "8d5de697.738fb"
      ]
    ]
  },
  {
    "id": "f5f74636.92701",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4409.016830444336,
    "y": 2345.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "458de584.eb17d4"
      ]
    ]
  },
  {
    "id": "458de584.eb17d4",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4604.016830444336,
    "y": 2345.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "d8d22b92.e3f9c8",
        "aa17b1cc.ebb808"
      ]
    ]
  },
  {
    "id": "aa17b1cc.ebb808",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4809.016830444336,
    "y": 2422.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "74ed71f8.f337d8"
      ]
    ]
  },
  {
    "id": "9a6ae8ae.1adf3",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4938.633987426758,
    "y": 2670.4570922851562,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "48cbb65c.c75f18"
      ]
    ]
  },
  {
    "id": "48cbb65c.c75f18",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5096.633987426758,
    "y": 2670.4570922851562,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5d1f9a1.a44f9e4"
      ]
    ]
  },
  {
    "id": "5d1f9a1.a44f9e4",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination-secondary.tunnel-tp-id' value=\"`$tmp.aai.destination-secondary-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5303.633987426758,
    "y": 2670.4570922851562,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "8d5de697.738fb",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4984.016830444336,
    "y": 2341.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "557f2b2a.e4488c",
        "b7eb9cb4.7bd228"
      ]
    ]
  },
  {
    "id": "b7eb9cb4.7bd228",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainC.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainC.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5192.016830444336,
    "y": 2348.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "2cc0f80f.8e664",
        "e33c4c36.9c6408",
        "decf6255.02de4"
      ]
    ]
  },
  {
    "id": "74ed71f8.f337d8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4986.016830444336,
    "y": 2414.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "ddc00f08.8fee3"
      ]
    ]
  },
  {
    "id": "557f2b2a.e4488c",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainC id",
    "xml": "<set>\n<parameter name='tmp.domainC.esr-thirdparty-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5222.016830444336,
    "y": 2296.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "ddc00f08.8fee3",
    "type": "set",
    "name": "set domainC ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainC.eth-network-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5221.016830444336,
    "y": 2538.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "2cc0f80f.8e664",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5402.016830444336,
    "y": 2339.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "aada8b04.37bbe"
      ]
    ]
  },
  {
    "id": "e33c4c36.9c6408",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5394.016830444336,
    "y": 2394.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "52b0fc34.6385e4"
      ]
    ]
  },
  {
    "id": "decf6255.02de4",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5399.016830444336,
    "y": 2451.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1d0f9aee.0f2085"
      ]
    ]
  },
  {
    "id": "1d0f9aee.0f2085",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5551.016830444336,
    "y": 2452.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "52b0fc34.6385e4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5562.016830444336,
    "y": 2397.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "aada8b04.37bbe",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5546.399154663086,
    "y": 2336.7724609375,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "b0a8403b.df77f8"
      ]
    ]
  },
  {
    "id": "b0a8403b.df77f8",
    "type": "set",
    "name": "set controller domainC data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5761.016830444336,
    "y": 2333.1167907714844,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "8b07e19d.5f94",
    "type": "switchNode",
    "name": "switch secondary empty?",
    "xml": "<switch test='`length($network-route-three) == 0`'>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3274.683334350586,
    "y": 806.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "ba76d6d3.05fe9",
        "fe627d30.e07a9"
      ]
    ]
  },
  {
    "id": "ba76d6d3.05fe9",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3396.683364868164,
    "y": 751.11669921875,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "aae22e84.83191"
      ]
    ]
  },
  {
    "id": "fe627d30.e07a9",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3383.683364868164,
    "y": 860.11669921875,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "652bcf4e.b1513"
      ]
    ]
  },
  {
    "id": "aae22e84.83191",
    "type": "set",
    "name": "set hasSecondary false",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n\n\n",
    "comments": "",
    "x": 3611.683334350586,
    "y": 588.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "652bcf4e.b1513",
    "type": "set",
    "name": "set hasSecondary true",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"true\" />\n\n\n",
    "comments": "",
    "x": 3607.683334350586,
    "y": 632.1166687011719,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "8877dbf4.9fef7",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3804.683364868164,
    "y": 3532.11669921875,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "8a807ecd.e2d688"
      ]
    ]
  },
  {
    "id": "8a807ecd.e2d688",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3995.683364868164,
    "y": 3536.11669921875,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "157127d1.cb4078"
      ]
    ]
  },
  {
    "id": "157127d1.cb4078",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4122.683364868164,
    "y": 3535.11669921875,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "75df7ed7.bf083",
        "34e17ebd.74d332"
      ]
    ]
  },
  {
    "id": "34e17ebd.74d332",
    "type": "save",
    "name": "save SECONDARY-ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.SECONDARY-ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='type' value='secondary-root' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4344.683364868164,
    "y": 3424.11669921875,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "877b276.88c73d8",
    "type": "set",
    "name": "unset secondary related variables",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n<parameter name='network-route-three' value=\"\" />\n<parameter name='tmp.aai.network-route-three.' value=\"\" />\n<parameter name='tmp.aai.network-route-C.' value=\"\" />\n",
    "comments": "",
    "x": 3349.566665649414,
    "y": 464,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "75df7ed7.bf083",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4340.566665649414,
    "y": 3483,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "298158e5.1b02b8",
        "8816a027.c5ad7"
      ]
    ]
  },
  {
    "id": "298158e5.1b02b8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4550.566665649414,
    "y": 3460,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "2754d16a.8d72ae"
      ]
    ]
  },
  {
    "id": "2754d16a.8d72ae",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4676.566665649414,
    "y": 3460,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1ec26074.15dbf"
      ]
    ]
  },
  {
    "id": "7bc2899d.3cc8d",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4681.566665649414,
    "y": 3509,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "4336d7d0.b3e05",
        "60df6ba0.591fdc",
        "73d9646c.b91d7c",
        "81cba3c.9ee8de"
      ]
    ]
  },
  {
    "id": "8816a027.c5ad7",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4555.566665649414,
    "y": 3509,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "7bc2899d.3cc8d"
      ]
    ]
  },
  {
    "id": "1ec26074.15dbf",
    "type": "save",
    "name": "save connectivityB relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5004.566665649414,
    "y": 3457,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "4336d7d0.b3e05",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainC",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainC-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4957.566665649414,
    "y": 3548,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "60df6ba0.591fdc",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='secondary-root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$vnf-topology-operation-input.service-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 4905.566665649414,
    "y": 3590,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "73d9646c.b91d7c",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5034.566665649414,
    "y": 3632,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "63767aff.e83474",
    "type": "comment",
    "name": "Create SECONDARY-ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 4920.566665649414,
    "y": 3505,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "81cba3c.9ee8de",
    "type": "save",
    "name": "save connectivityC relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5012.566665649414,
    "y": 3680,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "238550a0.c6cd18",
    "type": "comment",
    "name": "Create SECONDARY-ROOT UNI",
    "info": "",
    "comments": "",
    "x": 3832.566665649414,
    "y": 3483,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "374b533b.d2c934",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3807.566665649414,
    "y": 4154,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "42d7b44a.367424"
      ]
    ]
  },
  {
    "id": "42d7b44a.367424",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3999.566665649414,
    "y": 4149,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "aa122d60.47dec8"
      ]
    ]
  },
  {
    "id": "aa122d60.47dec8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4128.566665649414,
    "y": 4149,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "bc496cc4.1ac428"
      ]
    ]
  },
  {
    "id": "bc496cc4.1ac428",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4460.566665649414,
    "y": 4147,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "e008f489.a45f08",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3795.566665649414,
    "y": 4378,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "7e1de7f3.95bcb"
      ]
    ]
  },
  {
    "id": "7e1de7f3.95bcb",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3975.566665649414,
    "y": 4377,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5cd7b855.2a4ef"
      ]
    ]
  },
  {
    "id": "5cd7b855.2a4ef",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4104.566665649414,
    "y": 4377,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "e3d19dba.c0bd7"
      ]
    ]
  },
  {
    "id": "e3d19dba.c0bd7",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4322.449966430664,
    "y": 4375.88330078125,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "53c7d161.8eb9"
      ]
    ]
  },
  {
    "id": "53c7d161.8eb9",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4537.449966430664,
    "y": 4375.88330078125,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "fbe01cc.5b1afe"
      ]
    ]
  },
  {
    "id": "fbe01cc.5b1afe",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4669.449966430664,
    "y": 4375.88330078125,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "2bf4a87a.e670f8"
      ]
    ]
  },
  {
    "id": "2bf4a87a.e670f8",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5033.566665649414,
    "y": 4375,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "1e2222c.7b917dd",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3470.566665649414,
    "y": 4633,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "99a3a0e8.0b0e08"
      ]
    ]
  },
  {
    "id": "99a3a0e8.0b0e08",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3650.566665649414,
    "y": 4632,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "34a5a7ab.8782f"
      ]
    ]
  },
  {
    "id": "34a5a7ab.8782f",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3779.566665649414,
    "y": 4632,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "41dd40eb.c66e7"
      ]
    ]
  },
  {
    "id": "1e73a5a2.1f85da",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3515.566665649414,
    "y": 4691,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "d18a7342.6feac8",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4081.566665649414,
    "y": 4790,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "41dd40eb.c66e7",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3545.566665649414,
    "y": 4724,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "f4cc70f5.9b6bc",
        "ce8af9cd.332b9",
        "130dfbc3.4a6c5c"
      ]
    ]
  },
  {
    "id": "ce8af9cd.332b9",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3727.057632446289,
    "y": 4701.57421875,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "3c80b807.6a4d88"
      ]
    ]
  },
  {
    "id": "130dfbc3.4a6c5c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3715.566665649414,
    "y": 4741,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c80f59b7.c8277"
      ]
    ]
  },
  {
    "id": "3c80b807.6a4d88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3886.629165649414,
    "y": 4699.85986328125,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "c80f59b7.c8277",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3876.566665649414,
    "y": 4742,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "96ee8bec.e5c4a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3878.566665649414,
    "y": 4786,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "60b9b66c.eef658",
        "d18a7342.6feac8"
      ]
    ]
  },
  {
    "id": "f4cc70f5.9b6bc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3720.566665649414,
    "y": 4778,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "96ee8bec.e5c4a8"
      ]
    ]
  },
  {
    "id": "60b9b66c.eef658",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 4039.566665649414,
    "y": 4718,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "eedd5a70.956fd8",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4405.566665649414,
    "y": 5286,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "76d94500.85b34c",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4560.566665649414,
    "y": 5327,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "5f94b51d.236064",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5003.566665649414,
    "y": 5375,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "66bf889f.a4f118",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4376.566665649414,
    "y": 5385,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "b509f4ce.23c808",
        "425be1a9.ccccd8"
      ]
    ]
  },
  {
    "id": "b509f4ce.23c808",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4612.566665649414,
    "y": 5369,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1cce9d9d.44252a"
      ]
    ]
  },
  {
    "id": "1cce9d9d.44252a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4756.566665649414,
    "y": 5371,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "5f94b51d.236064",
        "efe8a2f7.303938",
        "b992a481.10f3f"
      ]
    ]
  },
  {
    "id": "425be1a9.ccccd8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4611.566665649414,
    "y": 5417,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "efe8a2f7.303938",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5124.566665649414,
    "y": 5422,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "b992a481.10f3f",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5006.233657836914,
    "y": 5507.08349609375,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "3dbfccd3.2b6904",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5007.450454711914,
    "y": 5465.88330078125,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "c4e3627c.f5b198",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5538.566665649414,
    "y": 5854,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "316a2790.87ce5",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4911.566665649414,
    "y": 5864,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "2b91cb0d.4b878c",
        "b9e860d6.0863a"
      ]
    ]
  },
  {
    "id": "2b91cb0d.4b878c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5144.566665649414,
    "y": 5858,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "617327bf.d18368"
      ]
    ]
  },
  {
    "id": "617327bf.d18368",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5291.566665649414,
    "y": 5866,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "c4e3627c.f5b198",
        "7767e038.8b5bf",
        "5189b1c7.a8726"
      ]
    ]
  },
  {
    "id": "b9e860d6.0863a",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5145.566665649414,
    "y": 5908,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "7767e038.8b5bf",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5659.566665649414,
    "y": 5901,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "5189b1c7.a8726",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5541.233657836914,
    "y": 5986.08349609375,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "be3f8000.1758f8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5542.450454711914,
    "y": 5944.88330078125,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "5021b590.5d75e4",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5072.566665649414,
    "y": 5814,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "92959871.fa0e08",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4906.566665649414,
    "y": 5775,
    "z": "8bc654d2.f0dde",
    "wires": []
  },
  {
    "id": "899de386.880988",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3233.816665649414,
    "y": 6384.25,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1f7a42c6.29cf15",
        "5608d8df.18871"
      ]
    ]
  },
  {
    "id": "1f7a42c6.29cf15",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3424.816665649414,
    "y": 6388.25,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "d6990f3f.a131a8"
      ]
    ]
  },
  {
    "id": "d6990f3f.a131a8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3551.816665649414,
    "y": 6387.25,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "1cb779c6.3641ce"
      ]
    ]
  },
  {
    "id": "5608d8df.18871",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3420.816665649414,
    "y": 6458.25,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "9d5d9d30.3fbe28"
      ]
    ]
  },
  {
    "id": "60292317.f03774",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate-w-Protection",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate-w-Protection' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3970.316665649414,
    "y": 6457.33349609375,
    "z": "8bc654d2.f0dde",
    "wires": [
      []
    ]
  },
  {
    "id": "9d5d9d30.3fbe28",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3554.316665649414,
    "y": 6460.33349609375,
    "z": "8bc654d2.f0dde",
    "wires": [
      [
        "60292317.f03774"
      ]
    ]
  }
]