[
    {
        "id": "4a2a1676.3e3ca",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 107,
        "y": 137,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "4dd41696.2f452"
            ]
        ]
    },
    {
        "id": "4dd41696.2f452",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 391.2856903076172,
        "y": 198.23810863494873,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "44e593d9.2efad4"
            ]
        ]
    },
    {
        "id": "44e593d9.2efad4",
        "type": "method",
        "name": "method cll-vnf-topology-operation-cll-create-clean",
        "xml": "<method rpc='cll-vnf-topology-operation-cll-create-clean' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 397.42860412597656,
        "y": 283.0000305175781,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "49513b93.fc23ac"
            ]
        ]
    },
    {
        "id": "49513b93.fc23ac",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 747,
        "y": 342,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b2135089.199e6",
                "23db3db6.da8e02",
                "2b8995d5.8b0c7a"
            ]
        ]
    },
    {
        "id": "b2135089.199e6",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1048.33349609375,
        "y": 612.9302978515625,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "23db3db6.da8e02",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1069.761962890625,
        "y": 315.33331298828125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b4c73c35.f93038",
                "3d5524fd.e8ecb4",
                "65a2b99e.db6b"
            ]
        ]
    },
    {
        "id": "b4c73c35.f93038",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1294.761962890625,
        "y": 173.33331298828125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "8dbada70.49fdc8"
            ]
        ]
    },
    {
        "id": "3d5524fd.e8ecb4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1290.2529296875,
        "y": 242.9073486328125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "57a109f4.ebf0e8"
            ]
        ]
    },
    {
        "id": "65a2b99e.db6b",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1278.761962890625,
        "y": 289.33331298828125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "60bf0db6.5a7ed4"
            ]
        ]
    },
    {
        "id": "b4e2ba33.09b93",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1048.761962890625,
        "y": 203.33331298828125,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "2b8995d5.8b0c7a",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1036.761962890625,
        "y": 255.33331298828125,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "8dbada70.49fdc8",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1535,
        "y": 170,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "d1591597.ec80d8",
                "57531373.e3de34"
            ]
        ]
    },
    {
        "id": "57a109f4.ebf0e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1445.0623779296875,
        "y": 245.85977172851562,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "60bf0db6.5a7ed4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1449,
        "y": 290,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "d1591597.ec80d8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1740,
        "y": 207,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "4fdc9fba.45ecc"
            ]
        ]
    },
    {
        "id": "57531373.e3de34",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1750,
        "y": 134,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "4fdc9fba.45ecc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1733,
        "y": 282,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "a7b4edd.d51559",
                "2c272659.3a51ba",
                "5c772a63.5a0db4",
                "289d87b9.bd6eb8",
                "58aa906f.8d52e"
            ]
        ]
    },
    {
        "id": "23486bfb.15b8c4",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2219,
        "y": 333,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "7220fecb.3a8288",
                "32198bbf.43a4fc",
                "5d55cc38.78e3ec"
            ]
        ]
    },
    {
        "id": "7220fecb.3a8288",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2435,
        "y": 400,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "fa7f120f.655768"
            ]
        ]
    },
    {
        "id": "32198bbf.43a4fc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2435.490966796875,
        "y": 299.573974609375,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b28e6d20.f339e8"
            ]
        ]
    },
    {
        "id": "5d55cc38.78e3ec",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2431,
        "y": 349,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "3d8a7dac.ce2c6a"
            ]
        ]
    },
    {
        "id": "a7b4edd.d51559",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1936,
        "y": 314,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "88b22f1d.3626",
                "23486bfb.15b8c4",
                "8ffbf90a.9a2a4",
                "9ccad127.ffcf6"
            ]
        ]
    },
    {
        "id": "88b22f1d.3626",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2216,
        "y": 252,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "289d87b9.bd6eb8",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
        "comments": "",
        "x": 1910,
        "y": 264,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "2c272659.3a51ba",
        "type": "get-resource",
        "name": "get-resource pnfs-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/pnfs?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
        "comments": "",
        "outputs": 1,
        "x": 1953,
        "y": 123,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "5c772a63.5a0db4",
        "type": "get-resource",
        "name": "get-resource logical-links",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
        "comments": "",
        "outputs": 1,
        "x": 1965,
        "y": 164,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "7c71ad84.2ad9d4",
        "type": "comment",
        "name": "The following two nodes are for PCE",
        "info": "",
        "comments": "",
        "x": 1990,
        "y": 76,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "f16230fe.988a5",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
        "comments": "",
        "x": 1910,
        "y": 210,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "b28e6d20.f339e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2614,
        "y": 302,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "3d8a7dac.ce2c6a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2613.9375,
        "y": 351.1402587890625,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "fa7f120f.655768",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2615.9375,
        "y": 402.1402587890625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "e41c6870.5c2ef8"
            ]
        ]
    },
    {
        "id": "e41c6870.5c2ef8",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2908.9375,
        "y": 349.1402587890625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "54a2b596.71e144",
                "d130d716.0cf7a",
                "2cc5b868.058328"
            ]
        ]
    },
    {
        "id": "d130d716.0cf7a",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3182.428466796875,
        "y": 241.7142333984375,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b3a5f124.2cf16"
            ]
        ]
    },
    {
        "id": "b3a5f124.2cf16",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3360,
        "y": 242,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "2cc5b868.058328",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3177.9375,
        "y": 291.1402587890625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "c7a34562.68f14"
            ]
        ]
    },
    {
        "id": "c7a34562.68f14",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3359.9375,
        "y": 291.1402587890625,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "54a2b596.71e144",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3181.9375,
        "y": 342.1402587890625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "bd0a4532.c3f628"
            ]
        ]
    },
    {
        "id": "bd0a4532.c3f628",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3361.9375,
        "y": 342.1402587890625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "f545f705.e2438"
            ]
        ]
    },
    {
        "id": "f545f705.e2438",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2928,
        "y": 477,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "333578f7.b029b",
                "a1ea266d.8059"
            ]
        ]
    },
    {
        "id": "a1ea266d.8059",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3238,
        "y": 484,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "333578f7.b029b",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3237,
        "y": 538,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "76551384.dcd284"
            ]
        ]
    },
    {
        "id": "b7449756.393128",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3982,
        "y": 492,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "497604b.3da63fc"
            ]
        ]
    },
    {
        "id": "497604b.3da63fc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4158.9998779296875,
        "y": 484.9998779296875,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "5622eb31.c6aaa4",
                "f42a71d2.4e018"
            ]
        ]
    },
    {
        "id": "76551384.dcd284",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3401,
        "y": 464,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "4cba462a.39c2",
                "cfce2e8c.cb8c08"
            ]
        ]
    },
    {
        "id": "4cba462a.39c2",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3682,
        "y": 420,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "96ce5ffe.418c6"
            ]
        ]
    },
    {
        "id": "96ce5ffe.418c6",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3944,
        "y": 420,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b7449756.393128"
            ]
        ]
    },
    {
        "id": "5622eb31.c6aaa4",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 4401.9998779296875,
        "y": 441.9998779296875,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "f42a71d2.4e018",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 4390.9998779296875,
        "y": 496.9998779296875,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "d27d0859.022f28",
                "109e108a.071aff",
                "335266e0.15cee2"
            ]
        ]
    },
    {
        "id": "335266e0.15cee2",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4644,
        "y": 383,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "a7539c87.81698"
            ]
        ]
    },
    {
        "id": "a7539c87.81698",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4792.571533203125,
        "y": 383.2857666015625,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "3deb078.64eee78",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4791.509033203125,
        "y": 427.426025390625,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "109e108a.071aff",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4632.509033203125,
        "y": 427.426025390625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "3deb078.64eee78"
            ]
        ]
    },
    {
        "id": "d27d0859.022f28",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4639.509033203125,
        "y": 506.426025390625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "fa515a9e.7b382"
            ]
        ]
    },
    {
        "id": "fa515a9e.7b382",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4778.509033203125,
        "y": 506.426025390625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "f8e42c4e.db7c",
                "af21638c.1e4978"
            ]
        ]
    },
    {
        "id": "f8e42c4e.db7c",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4984,
        "y": 504,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "af21638c.1e4978",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4983,
        "y": 550,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "cfce2e8c.cb8c08",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3499,
        "y": 536,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "d81e40de.4db928"
            ]
        ]
    },
    {
        "id": "d81e40de.4db928",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3779,
        "y": 536,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "5031094a.3c0128"
            ]
        ]
    },
    {
        "id": "5031094a.3c0128",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2192.0001220703125,
        "y": 789.0001220703125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "e73c28db.21f4e"
            ]
        ]
    },
    {
        "id": "e73c28db.21f4e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2369,
        "y": 782,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "315e52b1.1cc22e",
                "35f8f7f9.459f"
            ]
        ]
    },
    {
        "id": "315e52b1.1cc22e",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 2612,
        "y": 739,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "35f8f7f9.459f",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 2601,
        "y": 794,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "d939ca6a.3080e8",
                "9cfbb845.158be",
                "6d8b4fc3.7b3018"
            ]
        ]
    },
    {
        "id": "d939ca6a.3080e8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2892.490966796875,
        "y": 772.573974609375,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "107f7ba4.2d7e2c"
            ]
        ]
    },
    {
        "id": "9cfbb845.158be",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2881,
        "y": 817,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "acf32404.78571"
            ]
        ]
    },
    {
        "id": "107f7ba4.2d7e2c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3041.0625,
        "y": 772.8597412109375,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "acf32404.78571",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3040,
        "y": 817,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "6d8b4fc3.7b3018",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2888,
        "y": 896,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "5fee2f71.e558f"
            ]
        ]
    },
    {
        "id": "5fee2f71.e558f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3027,
        "y": 896,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "eaccb004.7e72b",
                "eb22e702.6eba4",
                "86c2cb32.4be2a",
                "1855e375.e26f95",
                "a98465a.ebb3518",
                "c39134de.e7bb78",
                "2345afcc.0ac648",
                "a5a8afe4.995398",
                "2419d5d3.394c4a",
                "7c523485.24203c",
                "6836f0a.48b871",
                "b794c846.a3a7a8",
                "2e62e80b.5f4db"
            ]
        ]
    },
    {
        "id": "ecf79c2.e9d746",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3341,
        "y": 702,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "eaccb004.7e72b",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3322,
        "y": 752,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "c7da7bbe.4fbda",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 3279,
        "y": 797,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "eb22e702.6eba4",
        "type": "set",
        "name": "set network-route-one",
        "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
        "comments": "",
        "x": 3254,
        "y": 860,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "86c2cb32.4be2a",
        "type": "set",
        "name": "set network-route-two",
        "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 3255,
        "y": 915,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "1855e375.e26f95",
        "type": "save",
        "name": "get network-route-one from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
        "comments": "",
        "outputs": 1,
        "x": 3271,
        "y": 963,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "a1f10f8e.c2622",
                "ab6386aa.ce2908",
                "465cfd34.a22f5c"
            ]
        ]
    },
    {
        "id": "a98465a.ebb3518",
        "type": "save",
        "name": "get network-route-two from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
        "comments": "",
        "outputs": 1,
        "x": 3260,
        "y": 1049.9998779296875,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "1727bd6.343d1c3",
                "193b021d.8148b6",
                "fa057cc5.1269c"
            ]
        ]
    },
    {
        "id": "a1f10f8e.c2622",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3472,
        "y": 847,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "ef53d37a.78768"
            ]
        ]
    },
    {
        "id": "ab6386aa.ce2908",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3467.509033203125,
        "y": 896.426025390625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "2e203f6c.c03ed"
            ]
        ]
    },
    {
        "id": "465cfd34.a22f5c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3471.509033203125,
        "y": 949.426025390625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "187fdc98.499a83"
            ]
        ]
    },
    {
        "id": "ef53d37a.78768",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3620.571533203125,
        "y": 846.2857666015625,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "2e203f6c.c03ed",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3610.509033203125,
        "y": 896.426025390625,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "1727bd6.343d1c3",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3483,
        "y": 1019.9998779296875,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "d09d8aa1.f9ab4"
            ]
        ]
    },
    {
        "id": "193b021d.8148b6",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3478.509033203125,
        "y": 1069.4259033203125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b9e292a1.c9c0e8"
            ]
        ]
    },
    {
        "id": "fa057cc5.1269c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3479.509033203125,
        "y": 1122.4259033203125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "eb27f87a.b5a63"
            ]
        ]
    },
    {
        "id": "d09d8aa1.f9ab4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3631.571533203125,
        "y": 1019.28564453125,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "b9e292a1.c9c0e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3621.509033203125,
        "y": 1069.4259033203125,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "187fdc98.499a83",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3633,
        "y": 949,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "c01f8fee.f337d8"
            ]
        ]
    },
    {
        "id": "eb27f87a.b5a63",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3633,
        "y": 1121.9998779296875,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "1b75ad85.419ffa"
            ]
        ]
    },
    {
        "id": "c01f8fee.f337d8",
        "type": "switchNode",
        "name": "switch nr type",
        "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3805,
        "y": 949,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "363c4a34.666d16",
                "db7701b7.1114a8"
            ]
        ]
    },
    {
        "id": "1b75ad85.419ffa",
        "type": "switchNode",
        "name": "switch nr type",
        "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3806,
        "y": 1122,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "be2b6c76.ff3af8",
                "8a677a0d.0b4e4"
            ]
        ]
    },
    {
        "id": "363c4a34.666d16",
        "type": "outcome",
        "name": "ROOT",
        "xml": "<outcome value='ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3981,
        "y": 928,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "91c5280b.7efb48"
            ]
        ]
    },
    {
        "id": "db7701b7.1114a8",
        "type": "outcome",
        "name": "LEAF",
        "xml": "<outcome value='LEAF'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3983,
        "y": 982,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "feb127dc.b0fca"
            ]
        ]
    },
    {
        "id": "be2b6c76.ff3af8",
        "type": "outcome",
        "name": "ROOT",
        "xml": "<outcome value='ROOT'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3982,
        "y": 1092,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "66434378.88cb14"
            ]
        ]
    },
    {
        "id": "8a677a0d.0b4e4",
        "type": "outcome",
        "name": "LEAF",
        "xml": "<outcome value='LEAF'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3984,
        "y": 1146,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "7a8a47a9.7cb0d8"
            ]
        ]
    },
    {
        "id": "9215f524.47a16",
        "type": "set",
        "name": "set network-route-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4291,
        "y": 880,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "c685113.a58967",
        "type": "set",
        "name": "set network-route-LEAF",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4284,
        "y": 978,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "9ce6893.2318f78",
        "type": "set",
        "name": "set network-route-ROOT",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4284,
        "y": 1065,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "82c37441.0afd98",
        "type": "set",
        "name": "set network-route-LEAF",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4288,
        "y": 1158,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "33d383f1.734384",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3515,
        "y": 1567,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "538c6639.6c6368"
            ]
        ]
    },
    {
        "id": "1103f778.e68a59",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3524.490966796875,
        "y": 1609.5740356445312,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "a7a47c61.df546"
            ]
        ]
    },
    {
        "id": "e542ccd0.a278f8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3513,
        "y": 1656,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "754b02d5.434a64"
            ]
        ]
    },
    {
        "id": "9291fa20.ad2b7",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3215,
        "y": 1529,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "2345afcc.0ac648",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3258,
        "y": 1594,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "33d383f1.734384",
                "1103f778.e68a59",
                "e542ccd0.a278f8"
            ]
        ]
    },
    {
        "id": "c39134de.e7bb78",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3259,
        "y": 1264,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "846097ad.2e1c3",
                "39e06a12.c523ae"
            ]
        ]
    },
    {
        "id": "39e06a12.c523ae",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3482,
        "y": 1250,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "f0966fa1.0b829"
            ]
        ]
    },
    {
        "id": "846097ad.2e1c3",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3484,
        "y": 1283,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "36674d51.b9eb9a"
            ]
        ]
    },
    {
        "id": "538c6639.6c6368",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3687.66650390625,
        "y": 1566,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "6fff18a2.92ea08",
                "f3044461.d6a5a8"
            ]
        ]
    },
    {
        "id": "a7a47c61.df546",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3678.0623779296875,
        "y": 1612.8597717285156,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "754b02d5.434a64",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3682,
        "y": 1657,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "6fff18a2.92ea08",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3952,
        "y": 1550,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "d1ee9b94.2f27a",
                "6eb5b0d3.7baf78"
            ]
        ]
    },
    {
        "id": "6eb5b0d3.7baf78",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4175,
        "y": 1505,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "f1c76342.65c028"
            ]
        ]
    },
    {
        "id": "d1ee9b94.2f27a",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4177,
        "y": 1569,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "7b8cb4e4.928c34"
            ]
        ]
    },
    {
        "id": "7b8cb4e4.928c34",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4339,
        "y": 1565,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "f1c76342.65c028",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4340,
        "y": 1502,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "2b4fe89a.1b97b",
                "666bc5e4.57107c"
            ]
        ]
    },
    {
        "id": "272ec148.b5240e",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3954,
        "y": 1709,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "5865c90a.cd5358",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3999,
        "y": 1619,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "cab25a0.579bfa8",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4082,
        "y": 1757,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "36674d51.b9eb9a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3627,
        "y": 1280,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "f0966fa1.0b829",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3630,
        "y": 1243,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "1289ab88.c47cfc",
                "43b7d27f.a3c314"
            ]
        ]
    },
    {
        "id": "1289ab88.c47cfc",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3804,
        "y": 1199,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "f3044461.d6a5a8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3906,
        "y": 1834,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "1efd3cc0.01265b"
            ]
        ]
    },
    {
        "id": "1efd3cc0.01265b",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4112,
        "y": 1834,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "42b8e904.3e26e8"
            ]
        ]
    },
    {
        "id": "42b8e904.3e26e8",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4327.28564453125,
        "y": 1833.82177734375,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "c27d35dc.5f20a"
            ]
        ]
    },
    {
        "id": "43b7d27f.a3c314",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3819,
        "y": 1310,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "818754d0.62847",
                "ffd47564.1fe1e",
                "154b0ca5.d55e4b"
            ]
        ]
    },
    {
        "id": "818754d0.62847",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4014.5001220703125,
        "y": 1262,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "c3499a0a.3a08a"
            ]
        ]
    },
    {
        "id": "ffd47564.1fe1e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4006.5001220703125,
        "y": 1317,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "deee5298.4209e"
            ]
        ]
    },
    {
        "id": "154b0ca5.d55e4b",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4011.5001220703125,
        "y": 1374,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "a4184f75.2f4fc8"
            ]
        ]
    },
    {
        "id": "a4184f75.2f4fc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4163.5001220703125,
        "y": 1375,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "deee5298.4209e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4174.5001220703125,
        "y": 1320,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "c3499a0a.3a08a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4158.8824462890625,
        "y": 1259.6556701660156,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "ece91d8.33480e"
            ]
        ]
    },
    {
        "id": "ece91d8.33480e",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4343,
        "y": 1274,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "3d2e74e0.b28254"
            ]
        ]
    },
    {
        "id": "666bc5e4.57107c",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 4510,
        "y": 1460,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "2b4fe89a.1b97b",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 4511,
        "y": 1568,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "990e20c9.dc548",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4512,
        "y": 1517,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "c27d35dc.5f20a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4534.1171875,
        "y": 1834.34033203125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "4705b8ac.369ff8",
                "140bf681.97f4d1",
                "169362ec.4e0805"
            ]
        ]
    },
    {
        "id": "4705b8ac.369ff8",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4749.1171875,
        "y": 1796.34033203125,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "140bf681.97f4d1",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4746.1171875,
        "y": 1835.34033203125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "44788f51.dcb608"
            ]
        ]
    },
    {
        "id": "169362ec.4e0805",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4701.6171875,
        "y": 1877.34033203125,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "44788f51.dcb608",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4926.6171875,
        "y": 1834.34033203125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "96d5e3b9.3b004"
            ]
        ]
    },
    {
        "id": "a25be771.e58d08",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4741,
        "y": 1278,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "766cd179.71ceb"
            ]
        ]
    },
    {
        "id": "766cd179.71ceb",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4918,
        "y": 1270,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "4a39420e.bbc88c",
                "db93fd8f.b0686"
            ]
        ]
    },
    {
        "id": "3d2e74e0.b28254",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4538,
        "y": 1274,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "a25be771.e58d08",
                "a5fe54fc.22f278"
            ]
        ]
    },
    {
        "id": "a5fe54fc.22f278",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4744,
        "y": 1352,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b8ffc162.40264"
            ]
        ]
    },
    {
        "id": "b8ffc162.40264",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4921,
        "y": 1344,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "401010e9.39d95"
            ]
        ]
    },
    {
        "id": "96d5e3b9.3b004",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5084.6171875,
        "y": 1834.34033203125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "8dcf461b.b0a6b8"
            ]
        ]
    },
    {
        "id": "8dcf461b.b0a6b8",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5291.6171875,
        "y": 1834.34033203125,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "db93fd8f.b0686",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5126,
        "y": 1277,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "1554906a.f71e68",
                "e44344a3.bb67b8",
                "e5d285d7.a1a42"
            ]
        ]
    },
    {
        "id": "4a39420e.bbc88c",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5156,
        "y": 1225,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "1554906a.f71e68",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5336,
        "y": 1268,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "169a2bda.d46874"
            ]
        ]
    },
    {
        "id": "e44344a3.bb67b8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5328,
        "y": 1323,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "81a51254.f91678"
            ]
        ]
    },
    {
        "id": "e5d285d7.a1a42",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5333,
        "y": 1380,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "318f7e74.4a0292"
            ]
        ]
    },
    {
        "id": "318f7e74.4a0292",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5485,
        "y": 1381,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "81a51254.f91678",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5496,
        "y": 1326,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "169a2bda.d46874",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5480.38232421875,
        "y": 1265.6556701660156,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "40d562bc.5b73a4"
            ]
        ]
    },
    {
        "id": "401010e9.39d95",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5156,
        "y": 1468,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "40d562bc.5b73a4",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5695,
        "y": 1262,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "8e9cd61c.43d1a",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4279,
        "y": 916,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "ecfdf50c.08026",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
        "comments": "",
        "x": 4270,
        "y": 1014,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "91c5280b.7efb48",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4104,
        "y": 922,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "9215f524.47a16",
                "8e9cd61c.43d1a"
            ]
        ]
    },
    {
        "id": "feb127dc.b0fca",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4110,
        "y": 986,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "c685113.a58967",
                "ecfdf50c.08026"
            ]
        ]
    },
    {
        "id": "66434378.88cb14",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4110,
        "y": 1092,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "9ce6893.2318f78",
                "caa465e0.6dcff"
            ]
        ]
    },
    {
        "id": "7a8a47a9.7cb0d8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4113,
        "y": 1145,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "82c37441.0afd98",
                "7e59d376.e30294"
            ]
        ]
    },
    {
        "id": "caa465e0.6dcff",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4270,
        "y": 1105,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "7e59d376.e30294",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
        "comments": "",
        "x": 4273,
        "y": 1196,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "c59f074a.c0fcd",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3645,
        "y": 2406,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "e6449278.7ffcc8",
                "87feacf7.c38bf8"
            ]
        ]
    },
    {
        "id": "504f1aa.eb8e864",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3472.33349609375,
        "y": 2407,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "c59f074a.c0fcd"
            ]
        ]
    },
    {
        "id": "a37a9324.8cee68",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3481.824462890625,
        "y": 2449.5740356445312,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "2466115d.057356"
            ]
        ]
    },
    {
        "id": "73c3286f.8eb8c8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3470.33349609375,
        "y": 2496,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "e7809543.d60ec"
            ]
        ]
    },
    {
        "id": "2466115d.057356",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3635.3958740234375,
        "y": 2452.8597717285156,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "e7809543.d60ec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3639.33349609375,
        "y": 2497,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "e6449278.7ffcc8",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3931.33349609375,
        "y": 2410.0001220703125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b831939d.d94",
                "5cb920bb.aff4d"
            ]
        ]
    },
    {
        "id": "5cb920bb.aff4d",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4154.33349609375,
        "y": 2365.0001220703125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "cf6e6c99.56f7a"
            ]
        ]
    },
    {
        "id": "b831939d.d94",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4156.33349609375,
        "y": 2429.0001220703125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "3583978e.f629a8"
            ]
        ]
    },
    {
        "id": "3583978e.f629a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4315.33349609375,
        "y": 2448.0001220703125,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "cf6e6c99.56f7a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4319.33349609375,
        "y": 2362.0001220703125,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "528dc079.e1b708",
                "ef41d4a6.237198"
            ]
        ]
    },
    {
        "id": "70e4a574.f2fbdc",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3933.33349609375,
        "y": 2569.0001220703125,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "6fa4c461.e1732c",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3978.33349609375,
        "y": 2479.0001220703125,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "418cf3ce.c7d714",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4060.33349609375,
        "y": 2634.0001220703125,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "2419d5d3.394c4a",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3244.33349609375,
        "y": 2442,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "504f1aa.eb8e864",
                "a37a9324.8cee68",
                "73c3286f.8eb8c8"
            ]
        ]
    },
    {
        "id": "b8dec384.717cf",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3205.33349609375,
        "y": 2386,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "a5a8afe4.995398",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3262.33349609375,
        "y": 2104.9998779296875,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "9c54fa6.d2aa308",
                "ba5d54d9.fee348"
            ]
        ]
    },
    {
        "id": "ba5d54d9.fee348",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3485.33349609375,
        "y": 2090.9998779296875,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "64c87509.eed4dc"
            ]
        ]
    },
    {
        "id": "9c54fa6.d2aa308",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3487.33349609375,
        "y": 2123.9998779296875,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "bff9d45d.398f6"
            ]
        ]
    },
    {
        "id": "bff9d45d.398f6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3630.33349609375,
        "y": 2120.9998779296875,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "64c87509.eed4dc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3633.33349609375,
        "y": 2083.9998779296875,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "68ddabff.26f77c",
                "3932be0c.eefdc2"
            ]
        ]
    },
    {
        "id": "68ddabff.26f77c",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3827.33349609375,
        "y": 2087,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "87feacf7.c38bf8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3890.33349609375,
        "y": 2719,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "1be50176.34f787"
            ]
        ]
    },
    {
        "id": "1be50176.34f787",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4096.33349609375,
        "y": 2719,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "e1f7ff3.daa43"
            ]
        ]
    },
    {
        "id": "e1f7ff3.daa43",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4313.619140625,
        "y": 2717.82177734375,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "2a02e2d9.dc0d9e"
            ]
        ]
    },
    {
        "id": "3932be0c.eefdc2",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3849.33349609375,
        "y": 2155,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "2d0f7089.d1dde8",
                "fd005c4a.d8bf",
                "939e8fdc.7e7718"
            ]
        ]
    },
    {
        "id": "2d0f7089.d1dde8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4044.8336181640625,
        "y": 2107,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "30cca3a0.b1e984"
            ]
        ]
    },
    {
        "id": "fd005c4a.d8bf",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4036.8336181640625,
        "y": 2162,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "13a9ea53.f74e26"
            ]
        ]
    },
    {
        "id": "939e8fdc.7e7718",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4041.8336181640625,
        "y": 2219,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "7b021b51.27b804"
            ]
        ]
    },
    {
        "id": "7b021b51.27b804",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4193.8336181640625,
        "y": 2220,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "13a9ea53.f74e26",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4204.8336181640625,
        "y": 2165,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "30cca3a0.b1e984",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4189.2159423828125,
        "y": 2104.6556701660156,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b6ffbea1.954de"
            ]
        ]
    },
    {
        "id": "528dc079.e1b708",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 4489.33349609375,
        "y": 2323.0001220703125,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "ef41d4a6.237198",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 4490.33349609375,
        "y": 2428.0001220703125,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "442d43d7.782e7c",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4485.33349609375,
        "y": 2377.0001220703125,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "2a02e2d9.dc0d9e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4520.45068359375,
        "y": 2707.3404541015625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "c9847dda.408b8",
                "34fbe7b.83d4898",
                "25621ae5.b8be26"
            ]
        ]
    },
    {
        "id": "c9847dda.408b8",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4735.45068359375,
        "y": 2669.3404541015625,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "34fbe7b.83d4898",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4732.45068359375,
        "y": 2708.3404541015625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "57e83a4e.a0aa6c"
            ]
        ]
    },
    {
        "id": "25621ae5.b8be26",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4687.95068359375,
        "y": 2750.3404541015625,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "57e83a4e.a0aa6c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4912.95068359375,
        "y": 2707.3404541015625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "1bf054a.fc9602b"
            ]
        ]
    },
    {
        "id": "1bf054a.fc9602b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5070.95068359375,
        "y": 2707.3404541015625,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "84673a73.b83338"
            ]
        ]
    },
    {
        "id": "84673a73.b83338",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5277.95068359375,
        "y": 2707.3404541015625,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "d76262ee.41fc78",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4771.33349609375,
        "y": 2123,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "16ae4cb2.9049f3"
            ]
        ]
    },
    {
        "id": "16ae4cb2.9049f3",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4948.33349609375,
        "y": 2115,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "e86ea938.d56ff",
                "3118b07d.f07b4"
            ]
        ]
    },
    {
        "id": "b6ffbea1.954de",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4373.33349609375,
        "y": 2119,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b9078c68.40a298"
            ]
        ]
    },
    {
        "id": "b9078c68.40a298",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4568.33349609375,
        "y": 2119,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "d76262ee.41fc78",
                "b2b1c906.01de2"
            ]
        ]
    },
    {
        "id": "3118b07d.f07b4",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5156.33349609375,
        "y": 2122,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "6c958b0a.19f5a4",
                "118baae.84358d5",
                "1250b3fe.a83aa4"
            ]
        ]
    },
    {
        "id": "a44d9faa.fe0e4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4950.33349609375,
        "y": 2188,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b2c88a89.6bb6d"
            ]
        ]
    },
    {
        "id": "b2b1c906.01de2",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4773.33349609375,
        "y": 2196,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "a44d9faa.fe0e4"
            ]
        ]
    },
    {
        "id": "e86ea938.d56ff",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5186.33349609375,
        "y": 2070,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "b2c88a89.6bb6d",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5185.33349609375,
        "y": 2312,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "6c958b0a.19f5a4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5366.33349609375,
        "y": 2113,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "2e246f5a.b4103"
            ]
        ]
    },
    {
        "id": "118baae.84358d5",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5358.33349609375,
        "y": 2168,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "66d6dc00.1bed6c"
            ]
        ]
    },
    {
        "id": "1250b3fe.a83aa4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5363.33349609375,
        "y": 2225,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "795bee7e.95831"
            ]
        ]
    },
    {
        "id": "795bee7e.95831",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5515.33349609375,
        "y": 2226,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "66d6dc00.1bed6c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5526.33349609375,
        "y": 2171,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "2e246f5a.b4103",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5510.7158203125,
        "y": 2110.6556701660156,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "c7de596d.cf628"
            ]
        ]
    },
    {
        "id": "c7de596d.cf628",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5725.33349609375,
        "y": 2107,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "7c523485.24203c",
        "type": "set",
        "name": "set LEAF stuff",
        "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
        "comments": "",
        "x": 3224,
        "y": 1717,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "fded3756.dad178",
        "type": "comment",
        "name": "This is it (should be)",
        "info": "",
        "comments": "",
        "x": 4446,
        "y": 1000,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "3766add2.8d805a",
        "type": "comment",
        "name": "This is it (should be)",
        "info": "",
        "comments": "",
        "x": 4438,
        "y": 1090,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "6836f0a.48b871",
        "type": "set",
        "name": "set ROOT stuff",
        "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
        "comments": "",
        "x": 3205,
        "y": 2573,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "b794c846.a3a7a8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3356,
        "y": 2821,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "2e62e80b.5f4db",
        "type": "switchNode",
        "name": "switch found-middle-man?",
        "xml": "<switch test='`$found-middle-man`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3233,
        "y": 2931,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "91c4e5f7.8ea498",
                "651d0ecc.91f9"
            ]
        ]
    },
    {
        "id": "91c4e5f7.8ea498",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3417,
        "y": 2910,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "e83ca4b2.702b38"
            ]
        ]
    },
    {
        "id": "651d0ecc.91f9",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3348,
        "y": 4835,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "e7980e09.0eb63"
            ]
        ]
    },
    {
        "id": "e7980e09.0eb63",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3503,
        "y": 4828,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "1aa8a9f7.34b03e",
                "b0ed6ff1.30772",
                "727be5c.c27771c"
            ]
        ]
    },
    {
        "id": "e83ca4b2.702b38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3560,
        "y": 2910,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "d8bbc948.15f3d",
                "4c5911e7.00bf",
                "12a3e526.881a1b",
                "832127bd.deb14",
                "310c39f.91bd146",
                "10ac9372.85589d",
                "eff2b9f.ec05748",
                "e161ec1a.4abce",
                "9f446fe.9ec171",
                "53557e78.f7c168",
                "a884ac0.a40fdd8",
                "7b528859.fb04",
                "4b76c053.d564f8",
                "90ff1f35.eee16",
                "1b3c7e18.ddb16a",
                "3e78a7bc.55ca98",
                "8cf629c6.d63328"
            ]
        ]
    },
    {
        "id": "9f446fe.9ec171",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3871,
        "y": 3265,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "d8bbc948.15f3d",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3825,
        "y": 3363,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "4c5911e7.00bf",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 3961,
        "y": 3410,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "ec410c1b.c077a8",
        "type": "comment",
        "name": "Create ROOT connectivity",
        "info": "",
        "comments": "",
        "x": 3792,
        "y": 3214,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "d6af901.13a67f",
        "type": "comment",
        "name": "create middle man connectivity and ...",
        "info": "1- create middle man connectivity\n2- create relation with all connectivities\n   in the path\n3- put srcTtp (+dstTtp) somewhere in the\n   vpn-binding -> this is for later on to find\n   which OTN tunnel's bandwidth has to be increased.\n5- create UNIs\n4- create relationship to UNIs",
        "comments": "",
        "x": 4318,
        "y": 3705,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "12a3e526.881a1b",
        "type": "execute",
        "name": "execute UUID generator for connectivity middle-man",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-middle-man-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3882,
        "y": 3744,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "832127bd.deb14",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-middle-man-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-middle-man-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<!--The followings are not needed for the middle-man-connectivity-->\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />-->\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='mdsc' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3830,
        "y": 3795,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "310c39f.91bd146",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-middle-man-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-middle-man-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 3966,
        "y": 3842,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "dff7d863.27131",
        "type": "comment",
        "name": "Create MIDDLE-MAN connectivity",
        "info": "",
        "comments": "",
        "x": 3823,
        "y": 3704,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "7b814ee5.031238",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4253,
        "y": 3901,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "10ac9372.85589d",
        "type": "save",
        "name": "get middle-man connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $prop.connectivity-middle-man-uuid\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"middle-man-conn\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3844,
        "y": 3948,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "7001b67.e717f48",
                "2d31ff61.2f04d",
                "ccc557b3.890908"
            ]
        ]
    },
    {
        "id": "7001b67.e717f48",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4091,
        "y": 3902,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "7b814ee5.031238"
            ]
        ]
    },
    {
        "id": "2d31ff61.2f04d",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4091.490966796875,
        "y": 3947.5740356445312,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "cf949a05.c89aa8"
            ]
        ]
    },
    {
        "id": "ccc557b3.890908",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4089,
        "y": 3991,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "e98195a6.6d12"
            ]
        ]
    },
    {
        "id": "cf949a05.c89aa8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4254.0623779296875,
        "y": 3947.8597717285156,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "e98195a6.6d12",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4258,
        "y": 3992,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "1b3c7e18.ddb16a",
        "type": "save",
        "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3901,
        "y": 4227,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "3e78a7bc.55ca98",
        "type": "save",
        "name": "save middle-man-conn relationship to connectivity-ROOT, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3904,
        "y": 4272,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "15c4d898.5d69ef",
        "type": "save",
        "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3893,
        "y": 4063,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "b9514e95.f8a09",
        "type": "save",
        "name": "save middle-man-conn relationship to UNI-ROOT, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3895,
        "y": 4110,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "c557914b.681778",
        "type": "comment",
        "name": "The following two will be done in F1",
        "info": "",
        "comments": "",
        "x": 3817,
        "y": 4180,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "55d807b9.9e0f1",
        "type": "save",
        "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4424,
        "y": 4909,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "1aa8a9f7.34b03e",
        "type": "switchNode",
        "name": "switch no-pce-call",
        "xml": "<switch test='`$no-pce-call`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3718,
        "y": 4809,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "449091f.4415ef",
                "1ea76e22.242bea"
            ]
        ]
    },
    {
        "id": "1ea76e22.242bea",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3890,
        "y": 4806,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "8b1b5cc1.1af92"
            ]
        ]
    },
    {
        "id": "449091f.4415ef",
        "type": "outcomeFalse",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3803,
        "y": 5906,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "6b1cb253.86fb4c"
            ]
        ]
    },
    {
        "id": "c26b2751.5ae09",
        "type": "comment",
        "name": "1 --> PCE is needed",
        "info": "",
        "comments": "",
        "x": 3903,
        "y": 4776,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "ace6e9f0.39e568",
        "type": "comment",
        "name": "2 --> no need to call PCE",
        "info": "",
        "comments": "",
        "x": 3874,
        "y": 5864,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "eff2b9f.ec05748",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3901,
        "y": 4336,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "8b1b5cc1.1af92",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4066,
        "y": 4808,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "92650fb7.4fb248",
                "32b221b8.94e72e",
                "c940cf7e.ee51b",
                "dce0cedd.454b5",
                "5ecdaa6f.e24ff4",
                "3829dc12.3b5b24"
            ]
        ]
    },
    {
        "id": "6001979f.e727",
        "type": "comment",
        "name": "Use the middle-man-conn.eth-srv-name for the LEAF connectivity's eth srv name",
        "info": "",
        "comments": "",
        "x": 5472,
        "y": 4534,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "92650fb7.4fb248",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4419,
        "y": 5212,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "4d81f93.f62ae88",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3911,
        "y": 4391,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "9c2b0edc.50b4c",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4447,
        "y": 5263,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "e161ec1a.4abce",
        "type": "save",
        "name": "save connectivityB relationship to UNI-ROOT, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3877,
        "y": 3604,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "d5e12d5f.415ec",
        "type": "save",
        "name": "save connectivityA relationship to UNI-LEAF, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3337,
        "y": 1823,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "47f64a4f.cc38f4",
        "type": "save",
        "name": "save LEAF UNI in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-p-interface-short`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3244,
        "y": 1770,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "461bf5c9.7233b4",
        "type": "set",
        "name": "set prop.connectivity-domainB-uuid=tmp.ROOT.uni-p-interface-long",
        "xml": "<set>\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />\n",
        "comments": "",
        "x": 3927,
        "y": 3307,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "53557e78.f7c168",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3874,
        "y": 2895,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "a884ac0.a40fdd8",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3822,
        "y": 2943,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "7b528859.fb04",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 3950,
        "y": 2990,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "145ad0a4.4a593f",
        "type": "comment",
        "name": "Create LEAF connectivity",
        "info": "",
        "comments": "",
        "x": 3787,
        "y": 2853,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "4b76c053.d564f8",
        "type": "save",
        "name": "save LEAF UNI in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3784,
        "y": 3081,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "90ff1f35.eee16",
        "type": "save",
        "name": "save connectivityA relationship to UNI-LEAF, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3877,
        "y": 3134,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "f9c3a7e4.4b967",
        "type": "comment",
        "name": "Create LEAF UNI",
        "info": "",
        "comments": "",
        "x": 3768,
        "y": 3037,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "c6c09b88.1384d8",
        "type": "comment",
        "name": "Create ROOT UNI",
        "info": "",
        "comments": "",
        "x": 3774,
        "y": 3487,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "dce0cedd.454b5",
        "type": "save",
        "name": "save LEAF UNI in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4341,
        "y": 4542,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "d819a295.d1d948",
        "type": "comment",
        "name": "Create LEAF UNI",
        "info": "",
        "comments": "",
        "x": 4325,
        "y": 4498,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "8a0e3e5f.c139f",
        "type": "comment",
        "name": "Create LEAF connectivity",
        "info": "",
        "comments": "",
        "x": 5072,
        "y": 4529,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "3d40af5d.b5351",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5159,
        "y": 4571,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "113bf6b.aca4d89",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$middle-man-conn.etht-svc-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 5107,
        "y": 4619,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "e3b325e.735f958",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 5235,
        "y": 4666,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "3829dc12.3b5b24",
        "type": "save",
        "name": "save connectivityA relationship to UNI-LEAF, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4412,
        "y": 4951,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "78032561.382d8c",
        "type": "comment",
        "name": "populate connectivity-B variable in the context map",
        "info": "",
        "comments": "",
        "x": 4395,
        "y": 5013,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "32b221b8.94e72e",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4506,
        "y": 5055,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "ddb22b48.c7951",
        "type": "set",
        "name": "set prop.connectivity-domainB-uuid",
        "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
        "comments": "",
        "x": 4954,
        "y": 5108,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "8dae734b.2f3cf",
        "type": "save",
        "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4264,
        "y": 5806,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "6b696600.0c94ac",
        "type": "save",
        "name": "save LEAF UNI in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4162,
        "y": 5755,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "63a3c79e.874c38",
        "type": "comment",
        "name": "Create LEAF UNI",
        "info": "",
        "comments": "",
        "x": 4146,
        "y": 5711,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "f7343942.604c5",
        "type": "save",
        "name": "save the-connectivity relationship to UNI-LEAF, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4921,
        "y": 5967,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "c940cf7e.ee51b",
        "type": "switchNode",
        "name": "switch found-root-connectivity",
        "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4333,
        "y": 5112,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b0427d82.5bfe9",
                "b8ae94d3.c9ad9"
            ]
        ]
    },
    {
        "id": "b0427d82.5bfe9",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4544,
        "y": 5112,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "25de2beb.6b950c"
            ]
        ]
    },
    {
        "id": "25de2beb.6b950c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4700,
        "y": 5108,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "ddb22b48.c7951"
            ]
        ]
    },
    {
        "id": "b8ae94d3.c9ad9",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4540,
        "y": 5160,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "bc7f369f.c4ff98"
            ]
        ]
    },
    {
        "id": "bc7f369f.c4ff98",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
        "comments": "",
        "x": 4688,
        "y": 5155,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "9a0e4d6a.9ad2e",
        "type": "save",
        "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 5196,
        "y": 4737,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "8ffbf90a.9a2a4",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2362,
        "y": 148,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "9ccad127.ffcf6",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 2296,
        "y": 184,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "9431421f.8473c8",
        "type": "comment",
        "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
        "info": "",
        "comments": "",
        "x": 2481,
        "y": 111,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "4acaf17d.83ce3",
        "type": "set",
        "name": "set current-provider-id and current-cvlan-id",
        "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
        "comments": "",
        "x": 4231,
        "y": 5872,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "26219883.65a92",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4364,
        "y": 5920,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "1d162fbe.3673a",
        "type": "switchNode",
        "name": "switch found-connectivity?",
        "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4183,
        "y": 5978,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b4622dbc.20b678",
                "1a01b81f.922a4"
            ]
        ]
    },
    {
        "id": "b4622dbc.20b678",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4376,
        "y": 5979,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b10bfde8.027e5"
            ]
        ]
    },
    {
        "id": "b10bfde8.027e5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Connectivity should have been created' />\n",
        "comments": "",
        "x": 4532,
        "y": 5976,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "1a01b81f.922a4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4380,
        "y": 6023,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "6ceb0be5.2a433c"
            ]
        ]
    },
    {
        "id": "6ceb0be5.2a433c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4519,
        "y": 6018,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "f7343942.604c5",
                "c05fdbdc.265b6",
                "97927bbc.dcd8c8",
                "1cb127d3.5a2788",
                "f2b1cf37.e0a26",
                "8f16ceb.590e9b",
                "60b731fb.d0503",
                "bcde9e56.e926a",
                "c55840d4.91858",
                "9ff86b70.d2fcb"
            ]
        ]
    },
    {
        "id": "60b731fb.d0503",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 4716,
        "y": 6697,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "cedc6e.0697a39",
                "a047ea62.8c149",
                "e7b3fd60.6832b8"
            ]
        ]
    },
    {
        "id": "cedc6e.0697a39",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4921,
        "y": 6694,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "193246bb.dba7e9"
            ]
        ]
    },
    {
        "id": "a047ea62.8c149",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4904.490966796875,
        "y": 6755.574035644531,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "6166d474.1f401c"
            ]
        ]
    },
    {
        "id": "e7b3fd60.6832b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4902,
        "y": 6799,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "a8cf7040.6462c8"
            ]
        ]
    },
    {
        "id": "193246bb.dba7e9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5077,
        "y": 6708,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "8ab9510b.66ea08"
            ]
        ]
    },
    {
        "id": "6166d474.1f401c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 5067.0623779296875,
        "y": 6755.859771728516,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "a8cf7040.6462c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 5069,
        "y": 6798,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "8ab9510b.66ea08",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5324,
        "y": 6705,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "4468378.6607f48"
            ]
        ]
    },
    {
        "id": "4468378.6607f48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5561,
        "y": 6701,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "fb8fcf56.6ea2f8"
            ]
        ]
    },
    {
        "id": "fb8fcf56.6ea2f8",
        "type": "switchNode",
        "name": "switch vpnuuid is for this slice",
        "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5808,
        "y": 6703,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "b35a7d25.7fd0a",
                "74f376ab.a729f"
            ]
        ]
    },
    {
        "id": "b35a7d25.7fd0a",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6009,
        "y": 6693,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "53ea7250.143694"
            ]
        ]
    },
    {
        "id": "74f376ab.a729f",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6008,
        "y": 6646,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "53ea7250.143694",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4752,
        "y": 6968,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "2651f488.54465c"
            ]
        ]
    },
    {
        "id": "26dbc9a6.ab4616",
        "type": "set",
        "name": "set tmp.aai.the-vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
        "comments": "",
        "x": 5601,
        "y": 6873,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "fba4365f.21d6b",
        "type": "comment",
        "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
        "info": "",
        "comments": "",
        "x": 4814,
        "y": 6644,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "8f16ceb.590e9b",
        "type": "set",
        "name": "set srcTtp OTN layer",
        "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
        "comments": "",
        "x": 4698,
        "y": 6493,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "db5a4ceb.707c88",
        "type": "switchNode",
        "name": "switch provider-id domainA",
        "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5043,
        "y": 6324,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "45fd9533.be2acc"
            ]
        ]
    },
    {
        "id": "45fd9533.be2acc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5263,
        "y": 6330,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "530fb98.e048cc8"
            ]
        ]
    },
    {
        "id": "530fb98.e048cc8",
        "type": "switchNode",
        "name": "switch te-topo-id",
        "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5448,
        "y": 6329,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "36abe2fe.4a9a96"
            ]
        ]
    },
    {
        "id": "36abe2fe.4a9a96",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5640,
        "y": 6332,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "75415a60.e2b3b4"
            ]
        ]
    },
    {
        "id": "75415a60.e2b3b4",
        "type": "set",
        "name": "set otnTopoIdSrc",
        "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
        "comments": "",
        "x": 5849,
        "y": 6330,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "bcde9e56.e926a",
        "type": "for",
        "name": "for netwidx..allNetworksList_length",
        "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 4750,
        "y": 6318,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "db5a4ceb.707c88"
            ]
        ]
    },
    {
        "id": "97927bbc.dcd8c8",
        "type": "get-resource",
        "name": "get-resource network-resources-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
        "comments": "",
        "outputs": 1,
        "x": 4758,
        "y": 6211,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "2440c6c.5eeb4ba",
                "8721d82f.3e0a3",
                "3f152fd2.1f0f28"
            ]
        ]
    },
    {
        "id": "2440c6c.5eeb4ba",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4994,
        "y": 6194,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "8721d82f.3e0a3",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4991,
        "y": 6235,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "3f152fd2.1f0f28",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5005,
        "y": 6275,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "1cb127d3.5a2788",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
        "comments": "",
        "x": 4694,
        "y": 6370,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "f2b1cf37.e0a26",
        "type": "set",
        "name": "set tmp.pce-src-node",
        "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
        "comments": "",
        "x": 4702,
        "y": 6428,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "c05fdbdc.265b6",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
        "comments": "",
        "x": 4707,
        "y": 6168,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "b11f8629.171c6",
        "type": "comment",
        "name": "The following section is to find srcTtp OTN layer (its long name)",
        "info": "The following section is to find srcTtp OTN layer (its long name)",
        "comments": "",
        "x": 4822,
        "y": 6120,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "2651f488.54465c",
        "type": "switchNode",
        "name": "switch ops-note is srcTtpOtnLayer",
        "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4995,
        "y": 6965,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "69eb57bf.22dfc8",
                "815687f4.685f18"
            ]
        ]
    },
    {
        "id": "69eb57bf.22dfc8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5224,
        "y": 6942,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "3784edbf.83acfa"
            ]
        ]
    },
    {
        "id": "815687f4.685f18",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5224,
        "y": 6991,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "3784edbf.83acfa",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5385,
        "y": 6947,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "6a238d9a.9b2fec",
                "26dbc9a6.ab4616",
                "2310374c.1d397"
            ]
        ]
    },
    {
        "id": "bb082a0b.0ed128",
        "type": "comment",
        "name": "increase the bw of the-vpn-binding and change status to modified",
        "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
        "comments": "",
        "x": 5729,
        "y": 6927,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "2310374c.1d397",
        "type": "save",
        "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<!--<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $gfp`' />\n\n<parameter name='operational-status' value='Modified' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5699,
        "y": 6987,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "6a238d9a.9b2fec",
        "type": "set",
        "name": "unset tmp.aai.the-vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
        "comments": "",
        "x": 5606,
        "y": 6815,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "6b1cb253.86fb4c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3955,
        "y": 5905,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "6b696600.0c94ac",
                "4acaf17d.83ce3",
                "26219883.65a92",
                "1d162fbe.3673a"
            ]
        ]
    },
    {
        "id": "4a1e792c.5d4bf8",
        "type": "set",
        "name": "unset otnTopoIdSrc",
        "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
        "comments": "",
        "x": 4699,
        "y": 6268,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "c55840d4.91858",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 4814,
        "y": 6048,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "f6160d91.b00c5",
        "type": "comment",
        "name": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
        "info": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
        "comments": "",
        "x": 4951,
        "y": 5998,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "d896a0c9.160fe8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4278,
        "y": 6108,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "8cf629c6.d63328",
        "type": "save",
        "name": "save ROOT UNI in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 3790,
        "y": 3546,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "b2b24558.6d75f8",
        "type": "comment",
        "name": "NOT NEEDED ANYMORE?",
        "info": "",
        "comments": "",
        "x": 3972,
        "y": 1801,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "bb31c80c.f29398",
        "type": "comment",
        "name": "NOT NEEDED ANYMORE?",
        "info": "",
        "comments": "",
        "x": 3950,
        "y": 2671,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "f5dbe745.5a7ca",
        "type": "comment",
        "name": "TEMPORARY REMOVING THE FOLLOWING TWO NODES",
        "info": "",
        "comments": "",
        "x": 3781,
        "y": 4013,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "58aa906f.8d52e",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3462,
        "y": 6045,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "b0ed6ff1.30772",
        "type": "set",
        "name": "set current-provider-id and current-cvlan-id",
        "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
        "comments": "",
        "x": 3712,
        "y": 4669,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "727be5c.c27771c",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3845,
        "y": 4717,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    },
    {
        "id": "5ecdaa6f.e24ff4",
        "type": "switchNode",
        "name": "switch found-connectivity?",
        "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4352,
        "y": 4598,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "27ad8f3e.2bb148",
                "1abb8af.fa663f5"
            ]
        ]
    },
    {
        "id": "27ad8f3e.2bb148",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4545,
        "y": 4599,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "c5f554a7.be6918"
            ]
        ]
    },
    {
        "id": "1abb8af.fa663f5",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4549,
        "y": 4643,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "359fab60.1e1edc"
            ]
        ]
    },
    {
        "id": "359fab60.1e1edc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4688,
        "y": 4638,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "9fca53b1.0733f"
            ]
        ]
    },
    {
        "id": "c5f554a7.be6918",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4688,
        "y": 4595,
        "z": "2902829f.18c74e",
        "wires": [
            [
                "3d40af5d.b5351",
                "113bf6b.aca4d89",
                "e3b325e.735f958",
                "9a0e4d6a.9ad2e"
            ]
        ]
    },
    {
        "id": "9fca53b1.0733f",
        "type": "set",
        "name": "set prop.connectivity-domainA-uuid",
        "xml": "<set>\n<parameter name='uuid.connectivity-domainA-uuid' value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n",
        "comments": "",
        "x": 5082,
        "y": 4889,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "fa5528e4.cedd58",
        "type": "comment",
        "name": "populate connectivity-A variable in the context map",
        "info": "",
        "comments": "",
        "x": 5089,
        "y": 4843,
        "z": "2902829f.18c74e",
        "wires": []
    },
    {
        "id": "9ff86b70.d2fcb",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4887,
        "y": 6593,
        "z": "2902829f.18c74e",
        "wires": [
            []
        ]
    }
]