[
  {
    "id": "458f4ac.c4718b4",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 134.88333129882812,
    "y": 96.88333129882812,
    "z": "4456793a.59a288",
    "wires": [
      [
        "2b796419.174294"
      ]
    ]
  },
  {
    "id": "2b796419.174294",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 419.1690216064453,
    "y": 158.12143993377686,
    "z": "4456793a.59a288",
    "wires": [
      [
        "81638429.4a926"
      ]
    ]
  },
  {
    "id": "81638429.4a926",
    "type": "method",
    "name": "method cll-vnf-topology-operation-cll-create-clean",
    "xml": "<method rpc='cll-vnf-topology-operation-cll-create-clean' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 425.3119354248047,
    "y": 242.88336181640625,
    "z": "4456793a.59a288",
    "wires": [
      [
        "49ee9c33.493f7c"
      ]
    ]
  },
  {
    "id": "49ee9c33.493f7c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 774.8833312988281,
    "y": 301.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "a4831915.5eaaa",
        "7639e853.9511c8",
        "a54eb7d5.3629"
      ]
    ]
  },
  {
    "id": "a4831915.5eaaa",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1076.2168273925781,
    "y": 572.8136291503906,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "7639e853.9511c8",
    "type": "save",
    "name": "get service-instance from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
    "comments": "",
    "outputs": 1,
    "x": 1097.6452941894531,
    "y": 275.2166442871094,
    "z": "4456793a.59a288",
    "wires": [
      [
        "46a7c921.f80be8",
        "fa1c1252.bcac98",
        "22347b09.105eec"
      ]
    ]
  },
  {
    "id": "46a7c921.f80be8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1322.6452941894531,
    "y": 133.21664428710938,
    "z": "4456793a.59a288",
    "wires": [
      [
        "f818b9cf.ba44c"
      ]
    ]
  },
  {
    "id": "fa1c1252.bcac98",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1318.1362609863281,
    "y": 202.79067993164062,
    "z": "4456793a.59a288",
    "wires": [
      [
        "7ac2bf1b.1c3bb8"
      ]
    ]
  },
  {
    "id": "22347b09.105eec",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1306.6452941894531,
    "y": 249.21664428710938,
    "z": "4456793a.59a288",
    "wires": [
      [
        "9932a9c7.205738"
      ]
    ]
  },
  {
    "id": "3db9725e.eccbce",
    "type": "comment",
    "name": "new for TransportSlicing",
    "info": "",
    "comments": "",
    "x": 1076.6452941894531,
    "y": 163.21664428710938,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "a54eb7d5.3629",
    "type": "execute",
    "name": "execute properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
    "comments": "",
    "outputs": 1,
    "x": 1064.6452941894531,
    "y": 215.21664428710938,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "f818b9cf.ba44c",
    "type": "switchNode",
    "name": "switch allotted-resources_length != 0",
    "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1562.8833312988281,
    "y": 129.88333129882812,
    "z": "4456793a.59a288",
    "wires": [
      [
        "8e919d6f.673508",
        "51e0925d.04913c"
      ]
    ]
  },
  {
    "id": "7ac2bf1b.1c3bb8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1472.9457092285156,
    "y": 205.74310302734375,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "9932a9c7.205738",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1476.8833312988281,
    "y": 249.88333129882812,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "8e919d6f.673508",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1767.8833312988281,
    "y": 166.88333129882812,
    "z": "4456793a.59a288",
    "wires": [
      [
        "68453177.cb78b8"
      ]
    ]
  },
  {
    "id": "51e0925d.04913c",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1777.8833312988281,
    "y": 93.88333129882812,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "68453177.cb78b8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1760.8833312988281,
    "y": 241.88333129882812,
    "z": "4456793a.59a288",
    "wires": [
      [
        "a82eb2b4.74145",
        "2f11fd49.33bf4a",
        "3f7479d2.cf6ebe",
        "9bc906e5.702fc8",
        "a8e7354f.a1833"
      ]
    ]
  },
  {
    "id": "c81e4e53.d33bf",
    "type": "save",
    "name": "get allotted-resource from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2246.883331298828,
    "y": 292.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "93e1f14a.5a9588",
        "d05d8571.8f54d8",
        "43bb6a89.efb504"
      ]
    ]
  },
  {
    "id": "93e1f14a.5a9588",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2462.883331298828,
    "y": 359.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "29fa3a31.28ab1e"
      ]
    ]
  },
  {
    "id": "d05d8571.8f54d8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2463.374298095703,
    "y": 259.4573059082031,
    "z": "4456793a.59a288",
    "wires": [
      [
        "9a07cfe7.b03588"
      ]
    ]
  },
  {
    "id": "43bb6a89.efb504",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2458.883331298828,
    "y": 308.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "b1a3ba46.e979e8"
      ]
    ]
  },
  {
    "id": "a82eb2b4.74145",
    "type": "for",
    "name": "for each allotted-resource",
    "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1963.8833312988281,
    "y": 273.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "9e7211a2.fa3648",
        "c81e4e53.d33bf",
        "d050303.0f4a3d",
        "c2f95f80.985fc"
      ]
    ]
  },
  {
    "id": "9e7211a2.fa3648",
    "type": "set",
    "name": "set the current allotted-resource-id",
    "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
    "comments": "",
    "x": 2243.883331298828,
    "y": 211.88333129882812,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "9bc906e5.702fc8",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
    "comments": "",
    "x": 1937.8833312988281,
    "y": 223.88333129882812,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "2f11fd49.33bf4a",
    "type": "get-resource",
    "name": "get-resource pnfs-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/pnfs?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
    "comments": "",
    "outputs": 1,
    "x": 1980.8833312988281,
    "y": 82.88333129882812,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "3f7479d2.cf6ebe",
    "type": "get-resource",
    "name": "get-resource logical-links",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
    "comments": "",
    "outputs": 1,
    "x": 1992.8833312988281,
    "y": 123.88333129882812,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "ea819687.b3e55",
    "type": "comment",
    "name": "The following two nodes are for PCE",
    "info": "",
    "comments": "",
    "x": 2017.8833312988281,
    "y": 35.883331298828125,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "a0a17876.3d9168",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
    "comments": "",
    "x": 1937.8833312988281,
    "y": 169.88333129882812,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "9a07cfe7.b03588",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 2641.883331298828,
    "y": 261.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "b1a3ba46.e979e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 2641.820831298828,
    "y": 311.0235900878906,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "29fa3a31.28ab1e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2643.820831298828,
    "y": 362.0235900878906,
    "z": "4456793a.59a288",
    "wires": [
      [
        "ccdb352a.c0afb"
      ]
    ]
  },
  {
    "id": "ccdb352a.c0afb",
    "type": "save",
    "name": "get allotted-resource relationship from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2936.820831298828,
    "y": 309.0235900878906,
    "z": "4456793a.59a288",
    "wires": [
      [
        "1d1c178.a002b69",
        "a96469cb.c566d8",
        "1d270f4d.7f92d9"
      ]
    ]
  },
  {
    "id": "a96469cb.c566d8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3210.311798095703,
    "y": 201.59756469726562,
    "z": "4456793a.59a288",
    "wires": [
      [
        "a9051800.9d7288"
      ]
    ]
  },
  {
    "id": "a9051800.9d7288",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3387.883331298828,
    "y": 201.88333129882812,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "1d270f4d.7f92d9",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3205.820831298828,
    "y": 251.02359008789062,
    "z": "4456793a.59a288",
    "wires": [
      [
        "74b9715b.81c6"
      ]
    ]
  },
  {
    "id": "74b9715b.81c6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3387.820831298828,
    "y": 251.02359008789062,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "1d1c178.a002b69",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3209.820831298828,
    "y": 302.0235900878906,
    "z": "4456793a.59a288",
    "wires": [
      [
        "dea72b0a.7f4d98"
      ]
    ]
  },
  {
    "id": "dea72b0a.7f4d98",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3389.820831298828,
    "y": 302.0235900878906,
    "z": "4456793a.59a288",
    "wires": [
      [
        "1a6bb71b.cc26c9"
      ]
    ]
  },
  {
    "id": "1a6bb71b.cc26c9",
    "type": "switchNode",
    "name": "switch allotted-resource.relationship-list not empty",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2955.883331298828,
    "y": 436.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "24693fb2.e93b7",
        "a9c05c16.6229b8"
      ]
    ]
  },
  {
    "id": "a9c05c16.6229b8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3265.883331298828,
    "y": 443.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "24693fb2.e93b7",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3264.883331298828,
    "y": 497.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "54d9e040.3e5a2"
      ]
    ]
  },
  {
    "id": "7514cb1e.22b7cc",
    "type": "outcome",
    "name": "network-policy",
    "xml": "<outcome value='network-policy'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4009.883331298828,
    "y": 451.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "1a1e9340.1cb465"
      ]
    ]
  },
  {
    "id": "1a1e9340.1cb465",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4186.883209228516,
    "y": 444.8832092285156,
    "z": "4456793a.59a288",
    "wires": [
      [
        "1cd3fabc.2c7055",
        "df5b418a.0dd23"
      ]
    ]
  },
  {
    "id": "54d9e040.3e5a2",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3428.883331298828,
    "y": 423.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "dde05d5d.d568e8",
        "89905857.784518"
      ]
    ]
  },
  {
    "id": "dde05d5d.d568e8",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3709.883331298828,
    "y": 379.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "abe51cd7.f8f208"
      ]
    ]
  },
  {
    "id": "abe51cd7.f8f208",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3971.883331298828,
    "y": 379.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "7514cb1e.22b7cc"
      ]
    ]
  },
  {
    "id": "1cd3fabc.2c7055",
    "type": "set",
    "name": "set the 1st network-policy-id",
    "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 4429.883209228516,
    "y": 401.8832092285156,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "df5b418a.0dd23",
    "type": "save",
    "name": "get network-policy from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
    "comments": "",
    "outputs": 1,
    "x": 4418.883209228516,
    "y": 456.8832092285156,
    "z": "4456793a.59a288",
    "wires": [
      [
        "b1c8bb90.0c2e78",
        "2f32ddcf.c1426a",
        "a81fdee7.10c348"
      ]
    ]
  },
  {
    "id": "a81fdee7.10c348",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4671.883331298828,
    "y": 342.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "933dded8.905d48"
      ]
    ]
  },
  {
    "id": "933dded8.905d48",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4820.454864501953,
    "y": 343.1690979003906,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "4ff8891b.b27e6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4819.392364501953,
    "y": 387.3093566894531,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "2f32ddcf.c1426a",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4660.392364501953,
    "y": 387.3093566894531,
    "z": "4456793a.59a288",
    "wires": [
      [
        "4ff8891b.b27e6"
      ]
    ]
  },
  {
    "id": "b1c8bb90.0c2e78",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4667.392364501953,
    "y": 466.3093566894531,
    "z": "4456793a.59a288",
    "wires": [
      [
        "9b0431ef.52336"
      ]
    ]
  },
  {
    "id": "9b0431ef.52336",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4806.392364501953,
    "y": 466.3093566894531,
    "z": "4456793a.59a288",
    "wires": [
      [
        "30420590.b9ff82",
        "80a75b67.8413b8"
      ]
    ]
  },
  {
    "id": "30420590.b9ff82",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5011.883331298828,
    "y": 463.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "80a75b67.8413b8",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5010.883331298828,
    "y": 509.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "89905857.784518",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3526.883331298828,
    "y": 495.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "b46dcd3d.f4afe8"
      ]
    ]
  },
  {
    "id": "b46dcd3d.f4afe8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3806.883331298828,
    "y": 495.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "f685aa80.8cfb4"
      ]
    ]
  },
  {
    "id": "f685aa80.8cfb4",
    "type": "outcome",
    "name": "logical-link",
    "xml": "<outcome value='logical-link'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2219.8834533691406,
    "y": 748.8834533691406,
    "z": "4456793a.59a288",
    "wires": [
      [
        "a18b2354.2da15"
      ]
    ]
  },
  {
    "id": "a18b2354.2da15",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2396.883331298828,
    "y": 741.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "ea2df6b1.4ac208",
        "5238e333.611ed4"
      ]
    ]
  },
  {
    "id": "ea2df6b1.4ac208",
    "type": "set",
    "name": "set the current logical-link-name",
    "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 2639.883331298828,
    "y": 698.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "5238e333.611ed4",
    "type": "save",
    "name": "get logical-link from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
    "comments": "",
    "outputs": 1,
    "x": 2628.883331298828,
    "y": 753.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "d29bd2a6.f0278",
        "aae66833.e493",
        "51948363.691cec"
      ]
    ]
  },
  {
    "id": "d29bd2a6.f0278",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2920.374298095703,
    "y": 732.4573059082031,
    "z": "4456793a.59a288",
    "wires": [
      [
        "a5baff8.5c15f"
      ]
    ]
  },
  {
    "id": "aae66833.e493",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2908.883331298828,
    "y": 776.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "590adc04.7c8c64"
      ]
    ]
  },
  {
    "id": "a5baff8.5c15f",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3068.945831298828,
    "y": 732.7430725097656,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "590adc04.7c8c64",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3067.883331298828,
    "y": 776.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "51948363.691cec",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2915.883331298828,
    "y": 855.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "138db6d7.8d5031"
      ]
    ]
  },
  {
    "id": "138db6d7.8d5031",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3054.883331298828,
    "y": 855.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "7a4c5f2f.9027d8",
        "f3e41369.61302",
        "bb0c73ed.00d09",
        "8e9b40a2.60b6c",
        "bda9878c.43ffc8",
        "746b18d4.be3d18",
        "15698ad5.b40d3d",
        "3d22a200.42e29e",
        "ff1965cc.9c6318",
        "a8011cb7.dd8288",
        "60be6b60.c49e7c",
        "77fe2bdc.eed0c4",
        "c658e7ef.0b11d8",
        "d48a24b6.db8ce8"
      ]
    ]
  },
  {
    "id": "f45cdd5f.c90798",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3368.883331298828,
    "y": 661.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "7a4c5f2f.9027d8",
    "type": "execute",
    "name": "execute UUID generator for otn-tunnel-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3349.883331298828,
    "y": 711.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "d48a24b6.db8ce8",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 3306.883331298828,
    "y": 756.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "f3e41369.61302",
    "type": "set",
    "name": "set network-route-one",
    "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
    "comments": "",
    "x": 3281.883331298828,
    "y": 819.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "bb0c73ed.00d09",
    "type": "set",
    "name": "set network-route-two",
    "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
    "comments": "",
    "x": 3282.883331298828,
    "y": 874.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "8e9b40a2.60b6c",
    "type": "save",
    "name": "get network-route-one from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
    "comments": "",
    "outputs": 1,
    "x": 3298.883331298828,
    "y": 922.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "5e527f7c.215cc8",
        "e57980fe.5f9758",
        "d6304ea1.fb76e"
      ]
    ]
  },
  {
    "id": "bda9878c.43ffc8",
    "type": "save",
    "name": "get network-route-two from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
    "comments": "",
    "outputs": 1,
    "x": 3287.883331298828,
    "y": 1009.8832092285156,
    "z": "4456793a.59a288",
    "wires": [
      [
        "be8da30d.6c1bf8",
        "59df3d01.4ec704",
        "23f36ff9.6f46c"
      ]
    ]
  },
  {
    "id": "5e527f7c.215cc8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3499.883331298828,
    "y": 806.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "7280738b.1a48a4"
      ]
    ]
  },
  {
    "id": "e57980fe.5f9758",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3495.392364501953,
    "y": 856.3093566894531,
    "z": "4456793a.59a288",
    "wires": [
      [
        "74f46c1.d313d14"
      ]
    ]
  },
  {
    "id": "d6304ea1.fb76e",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3499.392364501953,
    "y": 909.3093566894531,
    "z": "4456793a.59a288",
    "wires": [
      [
        "1f52b8ab.2e56cf"
      ]
    ]
  },
  {
    "id": "7280738b.1a48a4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3648.454864501953,
    "y": 806.1690979003906,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "74f46c1.d313d14",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3638.392364501953,
    "y": 856.3093566894531,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "be8da30d.6c1bf8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3510.883331298828,
    "y": 979.8832092285156,
    "z": "4456793a.59a288",
    "wires": [
      [
        "4c2e6e70.a93be8"
      ]
    ]
  },
  {
    "id": "59df3d01.4ec704",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3506.392364501953,
    "y": 1029.3092346191406,
    "z": "4456793a.59a288",
    "wires": [
      [
        "25d04654.5e839a"
      ]
    ]
  },
  {
    "id": "23f36ff9.6f46c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3507.392364501953,
    "y": 1082.3092346191406,
    "z": "4456793a.59a288",
    "wires": [
      [
        "e7e2a18.77a626"
      ]
    ]
  },
  {
    "id": "4c2e6e70.a93be8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3659.454864501953,
    "y": 979.1689758300781,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "25d04654.5e839a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3649.392364501953,
    "y": 1029.3092346191406,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "1f52b8ab.2e56cf",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3660.883331298828,
    "y": 908.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "37185a88.04a7d6"
      ]
    ]
  },
  {
    "id": "e7e2a18.77a626",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3660.883331298828,
    "y": 1081.8832092285156,
    "z": "4456793a.59a288",
    "wires": [
      [
        "2a90b49d.030114"
      ]
    ]
  },
  {
    "id": "37185a88.04a7d6",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3832.883331298828,
    "y": 908.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "b7871daf.9b4e8",
        "5be956df.30349"
      ]
    ]
  },
  {
    "id": "2a90b49d.030114",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3833.883331298828,
    "y": 1081.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "7b05f3d6.ed8c14",
        "ed6ce3d.aa0b8a"
      ]
    ]
  },
  {
    "id": "b7871daf.9b4e8",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4008.883331298828,
    "y": 887.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "52465f0e.0c996"
      ]
    ]
  },
  {
    "id": "5be956df.30349",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4010.883331298828,
    "y": 941.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "98cbb890.5e8b88"
      ]
    ]
  },
  {
    "id": "7b05f3d6.ed8c14",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4009.883331298828,
    "y": 1051.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "d0104e32.ac2ab8"
      ]
    ]
  },
  {
    "id": "ed6ce3d.aa0b8a",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4011.883331298828,
    "y": 1105.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "8e259d5c.262c5"
      ]
    ]
  },
  {
    "id": "c68d1d99.71ec4",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4318.883331298828,
    "y": 839.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "97074ecd.08e3c8",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4311.883331298828,
    "y": 937.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "be8be686.f85c68",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4311.883331298828,
    "y": 1024.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "3fa3de22.b5b33a",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4315.883331298828,
    "y": 1117.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "bd818350.b1a8a8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3542.883331298828,
    "y": 1526.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "56ff5ea8.b777"
      ]
    ]
  },
  {
    "id": "ec755270.8f35e8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3552.374298095703,
    "y": 1569.4573669433594,
    "z": "4456793a.59a288",
    "wires": [
      [
        "e382dfde.5b31d8"
      ]
    ]
  },
  {
    "id": "c9437d33.ef4e6",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3540.883331298828,
    "y": 1615.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "f857e1e2.07be58"
      ]
    ]
  },
  {
    "id": "5760f0e8.25dba",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3242.883331298828,
    "y": 1488.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "15698ad5.b40d3d",
    "type": "save",
    "name": "get p-interface-src from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3285.883331298828,
    "y": 1553.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "bd818350.b1a8a8",
        "ec755270.8f35e8",
        "c9437d33.ef4e6"
      ]
    ]
  },
  {
    "id": "746b18d4.be3d18",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3286.883331298828,
    "y": 1223.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "16a316bf.36aa51",
        "5dc43b13.af0e5c"
      ]
    ]
  },
  {
    "id": "5dc43b13.af0e5c",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3509.883331298828,
    "y": 1209.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "4015e76.5fd6098"
      ]
    ]
  },
  {
    "id": "16a316bf.36aa51",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3511.883331298828,
    "y": 1242.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "f3f89c52.21e5b8"
      ]
    ]
  },
  {
    "id": "56ff5ea8.b777",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3715.549835205078,
    "y": 1525.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "286978b9.608f5",
        "e1e71113.50d348"
      ]
    ]
  },
  {
    "id": "e382dfde.5b31d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3705.9457092285156,
    "y": 1572.7431030273438,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "f857e1e2.07be58",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3709.883331298828,
    "y": 1616.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "286978b9.608f5",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3979.883331298828,
    "y": 1509.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "5b0e63ee.a3ecd4",
        "22c0e5a9.26fd0a"
      ]
    ]
  },
  {
    "id": "22c0e5a9.26fd0a",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4202.883331298828,
    "y": 1464.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "bad02ed0.d565e8"
      ]
    ]
  },
  {
    "id": "5b0e63ee.a3ecd4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4204.883331298828,
    "y": 1528.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "cba8e08.e7cb12"
      ]
    ]
  },
  {
    "id": "cba8e08.e7cb12",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4366.883331298828,
    "y": 1524.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "bad02ed0.d565e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4367.883331298828,
    "y": 1461.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "14c7dbb3.7bb934",
        "ad8d4f98.026b1"
      ]
    ]
  },
  {
    "id": "b0538c9f.9cd51",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3981.883331298828,
    "y": 1668.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "4ca2f9ab.45ab7",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4026.883331298828,
    "y": 1578.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "ecb8fc16.8423f8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4109.883331298828,
    "y": 1716.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "f3f89c52.21e5b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3654.883331298828,
    "y": 1239.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "4015e76.5fd6098",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3657.883331298828,
    "y": 1202.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "ebd7b0f3.96fde8",
        "1cc07a61.1b7696"
      ]
    ]
  },
  {
    "id": "ebd7b0f3.96fde8",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3831.883331298828,
    "y": 1158.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "e1e71113.50d348",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3933.883331298828,
    "y": 1793.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "bc68df19.413ab"
      ]
    ]
  },
  {
    "id": "bc68df19.413ab",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4139.883331298828,
    "y": 1793.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "50ca2971.ea36d8"
      ]
    ]
  },
  {
    "id": "50ca2971.ea36d8",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4355.168975830078,
    "y": 1793.7051086425781,
    "z": "4456793a.59a288",
    "wires": [
      [
        "9aafd9b7.eaf6"
      ]
    ]
  },
  {
    "id": "1cc07a61.1b7696",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3846.883331298828,
    "y": 1269.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "502e27f2.360128",
        "613a0c37.ee93fc",
        "15983fe1.c65378"
      ]
    ]
  },
  {
    "id": "502e27f2.360128",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4042.3834533691406,
    "y": 1221.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "ab759fb6.dae2a8"
      ]
    ]
  },
  {
    "id": "613a0c37.ee93fc",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4034.3834533691406,
    "y": 1276.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "bc752416.e0cbc"
      ]
    ]
  },
  {
    "id": "15983fe1.c65378",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4039.3834533691406,
    "y": 1333.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "9670670b.649c48"
      ]
    ]
  },
  {
    "id": "9670670b.649c48",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4191.383453369141,
    "y": 1334.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "bc752416.e0cbc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4202.383453369141,
    "y": 1279.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "ab759fb6.dae2a8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4186.765777587891,
    "y": 1219.5390014648438,
    "z": "4456793a.59a288",
    "wires": [
      [
        "fbc120c8.3124d8"
      ]
    ]
  },
  {
    "id": "fbc120c8.3124d8",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4370.883331298828,
    "y": 1233.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "df89787f.a5a578"
      ]
    ]
  },
  {
    "id": "ad8d4f98.026b1",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
    "comments": "",
    "x": 4537.883331298828,
    "y": 1419.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "14c7dbb3.7bb934",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
    "comments": "",
    "x": 4538.883331298828,
    "y": 1527.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "832f55b4.d525f",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4539.883331298828,
    "y": 1476.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "9aafd9b7.eaf6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4562.000518798828,
    "y": 1794.2236633300781,
    "z": "4456793a.59a288",
    "wires": [
      [
        "f4bf2a88.8e07c8",
        "84226d1d.c53f58",
        "5135c34e.c2878c"
      ]
    ]
  },
  {
    "id": "f4bf2a88.8e07c8",
    "type": "set",
    "name": "set source ttp-id",
    "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4777.000518798828,
    "y": 1756.2236633300781,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "84226d1d.c53f58",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4774.000518798828,
    "y": 1795.2236633300781,
    "z": "4456793a.59a288",
    "wires": [
      [
        "9d44e19c.6d7318"
      ]
    ]
  },
  {
    "id": "5135c34e.c2878c",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4729.500518798828,
    "y": 1837.2236633300781,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "9d44e19c.6d7318",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4954.500518798828,
    "y": 1794.2236633300781,
    "z": "4456793a.59a288",
    "wires": [
      [
        "29687f0b.c77f5"
      ]
    ]
  },
  {
    "id": "a2ec001d.4a7fb8",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4768.883331298828,
    "y": 1237.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "6f5c9a68.97563c"
      ]
    ]
  },
  {
    "id": "6f5c9a68.97563c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4945.883331298828,
    "y": 1229.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "7ae681af.873ac8",
        "9549ff73.9a1cc8"
      ]
    ]
  },
  {
    "id": "df89787f.a5a578",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4565.883331298828,
    "y": 1233.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "a2ec001d.4a7fb8",
        "bc76afd9.40381"
      ]
    ]
  },
  {
    "id": "bc76afd9.40381",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4771.883331298828,
    "y": 1311.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "1ac8b93a.8f9647"
      ]
    ]
  },
  {
    "id": "1ac8b93a.8f9647",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4948.883331298828,
    "y": 1303.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "12ac39b2.69f38e"
      ]
    ]
  },
  {
    "id": "29687f0b.c77f5",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5112.500518798828,
    "y": 1794.2236633300781,
    "z": "4456793a.59a288",
    "wires": [
      [
        "6aef1ca3.67a3dc"
      ]
    ]
  },
  {
    "id": "6aef1ca3.67a3dc",
    "type": "set",
    "name": "set source tunnel tp ip",
    "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5319.500518798828,
    "y": 1794.2236633300781,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "9549ff73.9a1cc8",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5153.883331298828,
    "y": 1236.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "1ca68d2c.42a1b3",
        "79238f45.d528a",
        "b580a25b.41384"
      ]
    ]
  },
  {
    "id": "7ae681af.873ac8",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainA id",
    "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5183.883331298828,
    "y": 1184.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "1ca68d2c.42a1b3",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5363.883331298828,
    "y": 1227.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "1cf65ad.e3b2e25"
      ]
    ]
  },
  {
    "id": "79238f45.d528a",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5355.883331298828,
    "y": 1282.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "55debd4.7dcf144"
      ]
    ]
  },
  {
    "id": "b580a25b.41384",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5360.883331298828,
    "y": 1339.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "277b43ae.d3d8bc"
      ]
    ]
  },
  {
    "id": "277b43ae.d3d8bc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5512.883331298828,
    "y": 1340.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "55debd4.7dcf144",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5523.883331298828,
    "y": 1285.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "1cf65ad.e3b2e25",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5508.265655517578,
    "y": 1225.5390014648438,
    "z": "4456793a.59a288",
    "wires": [
      [
        "293b0137.5d1d8e"
      ]
    ]
  },
  {
    "id": "12ac39b2.69f38e",
    "type": "set",
    "name": "set domainA ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5183.883331298828,
    "y": 1427.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "293b0137.5d1d8e",
    "type": "set",
    "name": "set controller domainA data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5722.883331298828,
    "y": 1221.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "f12c4ac3.acc2d",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4306.883331298828,
    "y": 875.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "23d5a8e8.6a48d8",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4297.883331298828,
    "y": 973.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "52465f0e.0c996",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4131.883331298828,
    "y": 881.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "c68d1d99.71ec4",
        "f12c4ac3.acc2d"
      ]
    ]
  },
  {
    "id": "98cbb890.5e8b88",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4137.883331298828,
    "y": 945.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "97074ecd.08e3c8",
        "23d5a8e8.6a48d8"
      ]
    ]
  },
  {
    "id": "d0104e32.ac2ab8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4137.883331298828,
    "y": 1051.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "be8be686.f85c68",
        "e50dfba7.f60328"
      ]
    ]
  },
  {
    "id": "8e259d5c.262c5",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4140.883331298828,
    "y": 1104.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      [
        "3fa3de22.b5b33a",
        "6c2da806.3569b"
      ]
    ]
  },
  {
    "id": "e50dfba7.f60328",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4297.883331298828,
    "y": 1064.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "6c2da806.3569b",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4300.883331298828,
    "y": 1155.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "b9324a20.74a63",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3672.883331298828,
    "y": 2365.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "f10be91.1b09d98",
        "d09bd461.c7ba88"
      ]
    ]
  },
  {
    "id": "56bce95e.90bfe",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3500.216827392578,
    "y": 2366.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "b9324a20.74a63"
      ]
    ]
  },
  {
    "id": "aea1bf99.8fdcc",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3509.707794189453,
    "y": 2409.4573669433594,
    "z": "4456793a.59a288",
    "wires": [
      [
        "29a46b5c.88b5bc"
      ]
    ]
  },
  {
    "id": "87e0206.8796c6",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3498.216827392578,
    "y": 2455.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "1d955e57.2601ca"
      ]
    ]
  },
  {
    "id": "29a46b5c.88b5bc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3663.2792053222656,
    "y": 2412.7431030273438,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "1d955e57.2601ca",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3667.216827392578,
    "y": 2456.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "f10be91.1b09d98",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3959.216827392578,
    "y": 2369.8834533691406,
    "z": "4456793a.59a288",
    "wires": [
      [
        "fda7c536.3acee",
        "c79b96a2.97ef58"
      ]
    ]
  },
  {
    "id": "c79b96a2.97ef58",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4182.216827392578,
    "y": 2324.8834533691406,
    "z": "4456793a.59a288",
    "wires": [
      [
        "81ad908f.6a16e"
      ]
    ]
  },
  {
    "id": "fda7c536.3acee",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4184.216827392578,
    "y": 2388.8834533691406,
    "z": "4456793a.59a288",
    "wires": [
      [
        "e8b14d91.9e5c88"
      ]
    ]
  },
  {
    "id": "e8b14d91.9e5c88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4343.216827392578,
    "y": 2407.8834533691406,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "81ad908f.6a16e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4347.216827392578,
    "y": 2321.8834533691406,
    "z": "4456793a.59a288",
    "wires": [
      [
        "cad9326b.b2da",
        "3eb5f127.732d1e"
      ]
    ]
  },
  {
    "id": "cf8b334d.12d69",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3961.216827392578,
    "y": 2528.8834533691406,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "a51bfc6c.2ab4b",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4006.216827392578,
    "y": 2438.8834533691406,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "5d70457e.e444e4",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4088.216827392578,
    "y": 2593.8834533691406,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "ff1965cc.9c6318",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3272.216827392578,
    "y": 2401.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "56bce95e.90bfe",
        "aea1bf99.8fdcc",
        "87e0206.8796c6"
      ]
    ]
  },
  {
    "id": "e04ad761.fdc11",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3233.216827392578,
    "y": 2345.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "3d22a200.42e29e",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3290.216827392578,
    "y": 2064.8832092285156,
    "z": "4456793a.59a288",
    "wires": [
      [
        "f0778891.f400f",
        "2be980fe.83d6b8"
      ]
    ]
  },
  {
    "id": "2be980fe.83d6b8",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3513.216827392578,
    "y": 2050.8832092285156,
    "z": "4456793a.59a288",
    "wires": [
      [
        "1ec9f8d.bab6807"
      ]
    ]
  },
  {
    "id": "f0778891.f400f",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3515.216827392578,
    "y": 2083.8832092285156,
    "z": "4456793a.59a288",
    "wires": [
      [
        "45edb459.c45c8c"
      ]
    ]
  },
  {
    "id": "45edb459.c45c8c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3658.216827392578,
    "y": 2080.8832092285156,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "1ec9f8d.bab6807",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3661.216827392578,
    "y": 2043.8832092285156,
    "z": "4456793a.59a288",
    "wires": [
      [
        "8bf99b8b.4af368",
        "57c842ba.83379c"
      ]
    ]
  },
  {
    "id": "8bf99b8b.4af368",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3855.216827392578,
    "y": 2046.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "d09bd461.c7ba88",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3918.216827392578,
    "y": 2678.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "adbd165.7c69a68"
      ]
    ]
  },
  {
    "id": "adbd165.7c69a68",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4124.216827392578,
    "y": 2678.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "9b58a38.dc3806"
      ]
    ]
  },
  {
    "id": "9b58a38.dc3806",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4341.502471923828,
    "y": 2677.705108642578,
    "z": "4456793a.59a288",
    "wires": [
      [
        "ec0e6199.3c529"
      ]
    ]
  },
  {
    "id": "57c842ba.83379c",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3877.216827392578,
    "y": 2114.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "34626e8a.0bbe1a",
        "390dcffe.f00898",
        "4d1fe4fe.2890ec"
      ]
    ]
  },
  {
    "id": "34626e8a.0bbe1a",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4072.7169494628906,
    "y": 2066.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "95be6ff8.bea0e"
      ]
    ]
  },
  {
    "id": "390dcffe.f00898",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4064.7169494628906,
    "y": 2121.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "46312f08.59959"
      ]
    ]
  },
  {
    "id": "4d1fe4fe.2890ec",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4069.7169494628906,
    "y": 2178.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "15450853.01aa88"
      ]
    ]
  },
  {
    "id": "15450853.01aa88",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4221.716949462891,
    "y": 2179.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "46312f08.59959",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4232.716949462891,
    "y": 2124.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "95be6ff8.bea0e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4217.099273681641,
    "y": 2064.5390014648438,
    "z": "4456793a.59a288",
    "wires": [
      [
        "691678af.c2875"
      ]
    ]
  },
  {
    "id": "cad9326b.b2da",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
    "comments": "",
    "x": 4517.216827392578,
    "y": 2282.8834533691406,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "3eb5f127.732d1e",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
    "comments": "",
    "x": 4518.216827392578,
    "y": 2387.8834533691406,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "bf01d807.ca2a6",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4513.216827392578,
    "y": 2336.8834533691406,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "ec0e6199.3c529",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4548.334014892578,
    "y": 2667.2237854003906,
    "z": "4456793a.59a288",
    "wires": [
      [
        "310c30a2.98cdd8",
        "f852afcd.3e249",
        "77117052.72541"
      ]
    ]
  },
  {
    "id": "310c30a2.98cdd8",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4763.334014892578,
    "y": 2629.2237854003906,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "f852afcd.3e249",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4760.334014892578,
    "y": 2668.2237854003906,
    "z": "4456793a.59a288",
    "wires": [
      [
        "8dd58be1.de6918"
      ]
    ]
  },
  {
    "id": "77117052.72541",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4715.834014892578,
    "y": 2710.2237854003906,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "8dd58be1.de6918",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4940.834014892578,
    "y": 2667.2237854003906,
    "z": "4456793a.59a288",
    "wires": [
      [
        "bf6de4b9.07a8d8"
      ]
    ]
  },
  {
    "id": "bf6de4b9.07a8d8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5098.834014892578,
    "y": 2667.2237854003906,
    "z": "4456793a.59a288",
    "wires": [
      [
        "4337b0b8.5fd258"
      ]
    ]
  },
  {
    "id": "4337b0b8.5fd258",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5305.834014892578,
    "y": 2667.2237854003906,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "290c1291.0be836",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4799.216827392578,
    "y": 2082.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "4a42d224.6e916c"
      ]
    ]
  },
  {
    "id": "4a42d224.6e916c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4976.216827392578,
    "y": 2074.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "44500a36.8314c4",
        "edf4775.6feec88"
      ]
    ]
  },
  {
    "id": "691678af.c2875",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4401.216827392578,
    "y": 2078.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "e26ac43.7b22838"
      ]
    ]
  },
  {
    "id": "e26ac43.7b22838",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4596.216827392578,
    "y": 2078.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "290c1291.0be836",
        "91efe90a.a989f"
      ]
    ]
  },
  {
    "id": "edf4775.6feec88",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5184.216827392578,
    "y": 2081.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "ccc8d651.608a58",
        "4c1a6f18.7cad4",
        "d7a69532.21f81"
      ]
    ]
  },
  {
    "id": "1e83e9df.5f1ca6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4978.216827392578,
    "y": 2147.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "36af6584.4e4842"
      ]
    ]
  },
  {
    "id": "91efe90a.a989f",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4801.216827392578,
    "y": 2155.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "1e83e9df.5f1ca6"
      ]
    ]
  },
  {
    "id": "44500a36.8314c4",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainB id",
    "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5214.216827392578,
    "y": 2029.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "36af6584.4e4842",
    "type": "set",
    "name": "set domainB ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5213.216827392578,
    "y": 2271.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "ccc8d651.608a58",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5394.216827392578,
    "y": 2072.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "39681472.975784"
      ]
    ]
  },
  {
    "id": "4c1a6f18.7cad4",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5386.216827392578,
    "y": 2127.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "bc7c4cb6.e261e8"
      ]
    ]
  },
  {
    "id": "d7a69532.21f81",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5391.216827392578,
    "y": 2184.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "10a038dd.f22947"
      ]
    ]
  },
  {
    "id": "10a038dd.f22947",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5543.216827392578,
    "y": 2185.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "bc7c4cb6.e261e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5554.216827392578,
    "y": 2130.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "39681472.975784",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5538.599151611328,
    "y": 2070.5390014648438,
    "z": "4456793a.59a288",
    "wires": [
      [
        "19f3508c.df2467"
      ]
    ]
  },
  {
    "id": "19f3508c.df2467",
    "type": "set",
    "name": "set controller domainB data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5753.216827392578,
    "y": 2066.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "a8011cb7.dd8288",
    "type": "set",
    "name": "set LEAF stuff",
    "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop + '-' + $tmp.aai.network-route-A.logical-interface-id`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
    "comments": "",
    "x": 3251.883331298828,
    "y": 1676.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "48c20a24.e1d944",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4473.883331298828,
    "y": 959.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "33f8c668.c00922",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4465.883331298828,
    "y": 1049.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "60be6b60.c49e7c",
    "type": "set",
    "name": "set ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop + '-' + $tmp.aai.network-route-B.logical-interface-id`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
    "comments": "",
    "x": 3232.883331298828,
    "y": 2532.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "77fe2bdc.eed0c4",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3383.883331298828,
    "y": 2780.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "c658e7ef.0b11d8",
    "type": "switchNode",
    "name": "switch found-middle-man?",
    "xml": "<switch test='`$found-middle-man`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3260.883331298828,
    "y": 2890.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "5eb047e9.2f7668",
        "a0bb1c61.b88728"
      ]
    ]
  },
  {
    "id": "5eb047e9.2f7668",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3444.883331298828,
    "y": 2869.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "fb1841e2.6264"
      ]
    ]
  },
  {
    "id": "a0bb1c61.b88728",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3336.883331298828,
    "y": 5047.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "4d88182e.2579a"
      ]
    ]
  },
  {
    "id": "4d88182e.2579a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3491.883331298828,
    "y": 5040.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "44d48088.590d78",
        "a2dd9c19.75287",
        "906b118c.b5ca4",
        "80cc4c1e.a6bfe",
        "3d1de5ec.2ac45a"
      ]
    ]
  },
  {
    "id": "fb1841e2.6264",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3587.883331298828,
    "y": 2869.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "e6eab534.0772a8",
        "b10b9835.71fc5",
        "9c84ab4f.a1a008",
        "50925bce.958aec",
        "eab645cb.c973",
        "74310cc1.794b3c",
        "b442de01.03d108",
        "a559e6ec.97fea8",
        "c65cb0db.1db578",
        "c0792f26.4d13b8",
        "e82ea719.e6f068",
        "c4a1bace.0d4bb",
        "8f561f42.000fe8",
        "aa738c85.1c137",
        "54d18bcb.0986c4",
        "4494cc45.3ce764",
        "b937ed07.a77618",
        "d5c180c8.9f0b08",
        "123d53b6.2c62dc"
      ]
    ]
  },
  {
    "id": "c65cb0db.1db578",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3898.883331298828,
    "y": 3224.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "e6eab534.0772a8",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3852.883331298828,
    "y": 3322.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "b10b9835.71fc5",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3988.883331298828,
    "y": 3369.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "6e8e8040.0d64",
    "type": "comment",
    "name": "Create ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 3819.883331298828,
    "y": 3173.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "69147836.dfe478",
    "type": "comment",
    "name": "create middle man connectivity and ...",
    "info": "1- create middle man connectivity\n2- create relation with all connectivities\n   in the path\n3- put srcTtp (+dstTtp) somewhere in the\n   vpn-binding -> this is for later on to find\n   which OTN tunnel's bandwidth has to be increased.\n5- create UNIs\n4- create relationship to UNIs",
    "comments": "",
    "x": 4345.883331298828,
    "y": 3664.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "9c84ab4f.a1a008",
    "type": "execute",
    "name": "execute UUID generator for connectivity middle-man",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-middle-man-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3909.883331298828,
    "y": 3703.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "50925bce.958aec",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-middle-man-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-middle-man-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<!--The followings are not needed for the middle-man-connectivity-->\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />-->\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='mdsc' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3857.883331298828,
    "y": 3754.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "eab645cb.c973",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-middle-man-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-middle-man-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3993.883331298828,
    "y": 3801.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "921a5ccf.2b2f38",
    "type": "comment",
    "name": "Create MIDDLE-MAN connectivity",
    "info": "",
    "comments": "",
    "x": 3850.883331298828,
    "y": 3663.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "8fa15646.014b68",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4280.883331298828,
    "y": 3860.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "74310cc1.794b3c",
    "type": "save",
    "name": "get middle-man connectivity from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $prop.connectivity-middle-man-uuid\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"middle-man-conn\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3871.883331298828,
    "y": 3907.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "9785079b.24c0f8",
        "81e9c000.43765",
        "377b8f18.e7499"
      ]
    ]
  },
  {
    "id": "9785079b.24c0f8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4118.883331298828,
    "y": 3861.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "8fa15646.014b68"
      ]
    ]
  },
  {
    "id": "81e9c000.43765",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4119.374298095703,
    "y": 3907.4573669433594,
    "z": "4456793a.59a288",
    "wires": [
      [
        "b389b203.4af2"
      ]
    ]
  },
  {
    "id": "377b8f18.e7499",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4116.883331298828,
    "y": 3950.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "7f887f7.029e08"
      ]
    ]
  },
  {
    "id": "b389b203.4af2",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4281.945709228516,
    "y": 3907.7431030273438,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "7f887f7.029e08",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4285.883331298828,
    "y": 3951.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "54d18bcb.0986c4",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3928.883331298828,
    "y": 4186.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "4494cc45.3ce764",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3931.883331298828,
    "y": 4231.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "d5c180c8.9f0b08",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3920.883331298828,
    "y": 4022.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "123d53b6.2c62dc",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3922.883331298828,
    "y": 4069.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "8369bd06.57f78",
    "type": "comment",
    "name": "The following two will be done in F1",
    "info": "",
    "comments": "",
    "x": 3844.883331298828,
    "y": 4139.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "487123e4.9cc8ac",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4451.883331298828,
    "y": 4868.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "44d48088.590d78",
    "type": "switchNode",
    "name": "switch no-pce-call",
    "xml": "<switch test='`$no-pce-call`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3706.883331298828,
    "y": 5021.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "876b39f.35a52c8",
        "8bc7cacf.04871"
      ]
    ]
  },
  {
    "id": "8bc7cacf.04871",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3878.883331298828,
    "y": 5018.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "682f4705.be7878"
      ]
    ]
  },
  {
    "id": "876b39f.35a52c8",
    "type": "outcomeFalse",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3830.883331298828,
    "y": 5865.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "dd90ad1a.7eef1"
      ]
    ]
  },
  {
    "id": "270e251f.118d82",
    "type": "comment",
    "name": "1 --> PCE is needed",
    "info": "",
    "comments": "",
    "x": 3891.883331298828,
    "y": 4988.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "4e629c01.10676c",
    "type": "comment",
    "name": "2 --> no need to call PCE",
    "info": "",
    "comments": "",
    "x": 3901.883331298828,
    "y": 5823.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "b442de01.03d108",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3928.883331298828,
    "y": 4295.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "682f4705.be7878",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4054.883331298828,
    "y": 5020.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "bf69d5f0.d5943",
        "50051e09.5a44c8",
        "d933fbbc.703308",
        "52cab496.bab24c",
        "86c9672.840f818",
        "81a4b89b.48797",
        "487123e4.9cc8ac"
      ]
    ]
  },
  {
    "id": "b674f25b.3aa2a8",
    "type": "comment",
    "name": "Use the middle-man-conn.eth-srv-name for the LEAF connectivity's eth srv name",
    "info": "",
    "comments": "",
    "x": 5499.883331298828,
    "y": 4493.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "bf69d5f0.d5943",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4446.883331298828,
    "y": 5171.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "5c84b550.a10344",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3938.883331298828,
    "y": 4350.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "a559e6ec.97fea8",
    "type": "save",
    "name": "save connectivityB relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3904.883331298828,
    "y": 3563.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "ce126dd2.e4e358",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3364.883331298828,
    "y": 1782.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "b48deb35.d704b8",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-p-interface-short`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3271.883331298828,
    "y": 1729.8833312988281,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "dfa7cbf8.916408",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid=tmp.ROOT.uni-p-interface-long",
    "xml": "<set>\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />\n",
    "comments": "",
    "x": 3954.883331298828,
    "y": 3266.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "c0792f26.4d13b8",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3901.883331298828,
    "y": 2854.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "e82ea719.e6f068",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3849.883331298828,
    "y": 2902.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "c4a1bace.0d4bb",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3977.883331298828,
    "y": 2949.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "c598b640.a89e8",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 3814.883331298828,
    "y": 2812.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "8f561f42.000fe8",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />",
    "comments": "",
    "outputs": 1,
    "x": 3811.883331298828,
    "y": 3040.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "aa738c85.1c137",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3904.883331298828,
    "y": 3093.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "b51a7f91.5cff9",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 3795.883331298828,
    "y": 2996.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "4ec3384a.676a5",
    "type": "comment",
    "name": "Create ROOT UNI",
    "info": "",
    "comments": "",
    "x": 3801.883331298828,
    "y": 3446.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "52cab496.bab24c",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4368.883331298828,
    "y": 4501.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "1646f155.836fb7",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4352.883331298828,
    "y": 4457.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "778ce84a.a3568",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 5099.883331298828,
    "y": 4488.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "b61f10f5.eeecf",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 5186.883331298828,
    "y": 4530.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "90640d99.12302",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$middle-man-conn.etht-svc-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 5134.883331298828,
    "y": 4578.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "42e8372d.d506e",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5262.883331298828,
    "y": 4625.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "81a4b89b.48797",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4439.883331298828,
    "y": 4910.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "a53bc0fc.34d448",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4422.883331298828,
    "y": 4972.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "50051e09.5a44c8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4533.883331298828,
    "y": 5014.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "3073b323.349b7c",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 4981.883331298828,
    "y": 5067.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "dbdd7c00.c39698",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4291.883331298828,
    "y": 5765.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "1d6ec4bb.ad8c0b",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4189.883331298828,
    "y": 5714.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "41eb9866.4372",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4173.883331298828,
    "y": 5670.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "c54f6272.9ba24",
    "type": "save",
    "name": "save the-connectivity relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4980.883087158203,
    "y": 5868.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "d933fbbc.703308",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4360.883331298828,
    "y": 5071.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "4c2996a3.75ee88",
        "d5943bd2.ad1f5"
      ]
    ]
  },
  {
    "id": "4c2996a3.75ee88",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4571.883331298828,
    "y": 5071.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "8f5805d9.890fd8"
      ]
    ]
  },
  {
    "id": "8f5805d9.890fd8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4727.883331298828,
    "y": 5067.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "3073b323.349b7c",
        "7eeebeb3.54b298",
        "eadd33f3.5f43"
      ]
    ]
  },
  {
    "id": "d5943bd2.ad1f5",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4567.883331298828,
    "y": 5119.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "329fba30.af81ce"
      ]
    ]
  },
  {
    "id": "329fba30.af81ce",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 4715.883331298828,
    "y": 5114.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "7679135b.31e8e4",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5223.883331298828,
    "y": 4696.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "d050303.0f4a3d",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2389.883331298828,
    "y": 107.88333129882812,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "c2f95f80.985fc",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 2323.883331298828,
    "y": 143.88333129882812,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "360465cd.d1fc3a",
    "type": "comment",
    "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
    "info": "",
    "comments": "",
    "x": 2508.883331298828,
    "y": 70.88333129882812,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "33673680.57cf72",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 4258.883331298828,
    "y": 5831.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "e2cec405.b0409",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4391.883331298828,
    "y": 5879.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "6e2ab292.566884",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4210.883331298828,
    "y": 5937.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "9073e816.ad482",
        "45d66689.aaaf7"
      ]
    ]
  },
  {
    "id": "9073e816.ad482",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4403.883331298828,
    "y": 5938.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "db09f17e.79bb3"
      ]
    ]
  },
  {
    "id": "db09f17e.79bb3",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Connectivity should have been created' />\n",
    "comments": "",
    "x": 4559.883331298828,
    "y": 5935.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "45d66689.aaaf7",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4407.883331298828,
    "y": 5982.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "2adb498f.b3f97e"
      ]
    ]
  },
  {
    "id": "2adb498f.b3f97e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4546.883331298828,
    "y": 5977.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "c54f6272.9ba24",
        "6998ca1d.92c5d4",
        "15021f96.80eb18",
        "e6e1dbd3.6e0a6",
        "67962261.2516d4",
        "1b601be6.7f6134",
        "27a83227.012ede",
        "b320b0e.20770d",
        "34955381.c5797c",
        "9ca77368.01f7",
        "6922fe88.2fe5f8",
        "4514c9c4.eaef1"
      ]
    ]
  },
  {
    "id": "27a83227.012ede",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4743.883331298828,
    "y": 6656.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "c2308ca7.57dff",
        "aeb0b0d0.9dedb8",
        "b67a59a3.18fb1"
      ]
    ]
  },
  {
    "id": "c2308ca7.57dff",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4948.883331298828,
    "y": 6653.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "eeeb2441.6710c8"
      ]
    ]
  },
  {
    "id": "aeb0b0d0.9dedb8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4932.374298095703,
    "y": 6715.457366943359,
    "z": "4456793a.59a288",
    "wires": [
      [
        "77e5496.94ba0b8"
      ]
    ]
  },
  {
    "id": "b67a59a3.18fb1",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4929.883331298828,
    "y": 6758.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "f70b29bb.3fb788"
      ]
    ]
  },
  {
    "id": "eeeb2441.6710c8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5104.883331298828,
    "y": 6667.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "a3bf8aa6.020cb8"
      ]
    ]
  },
  {
    "id": "77e5496.94ba0b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5094.945709228516,
    "y": 6715.743103027344,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "f70b29bb.3fb788",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5096.883331298828,
    "y": 6757.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "a3bf8aa6.020cb8",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5351.883331298828,
    "y": 6664.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "8a5692b6.b002c8"
      ]
    ]
  },
  {
    "id": "8a5692b6.b002c8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5588.883331298828,
    "y": 6660.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "eabc4609.9defb"
      ]
    ]
  },
  {
    "id": "98f388ed.2cda7",
    "type": "switchNode",
    "name": "switch vpnuuid is for this slice",
    "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5831.883331298828,
    "y": 6632.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "6a0ae6a2.ba9fb",
        "25f881ea.6e0566"
      ]
    ]
  },
  {
    "id": "6a0ae6a2.ba9fb",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6036.883331298828,
    "y": 6652.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "eabc4609.9defb"
      ]
    ]
  },
  {
    "id": "25f881ea.6e0566",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6035.883331298828,
    "y": 6605.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "eabc4609.9defb",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4779.883331298828,
    "y": 6927.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "392e3f81.e0a6a8"
      ]
    ]
  },
  {
    "id": "f8de35a7.d0325",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 6241.88330078125,
    "y": 6865.88330078125,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "8d84ad9.3a159d",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4841.883331298828,
    "y": 6603.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "1b601be6.7f6134",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4725.883331298828,
    "y": 6452.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "6e7ae435.b7607c",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5070.883331298828,
    "y": 6283.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "82ed19a6.aafd78"
      ]
    ]
  },
  {
    "id": "82ed19a6.aafd78",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5290.883331298828,
    "y": 6289.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "fa1ec726.b4647"
      ]
    ]
  },
  {
    "id": "fa1ec726.b4647",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5475.883331298828,
    "y": 6288.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "46306bd4.ee79e4"
      ]
    ]
  },
  {
    "id": "46306bd4.ee79e4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5667.883331298828,
    "y": 6291.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "3b3ddb68.994c3c"
      ]
    ]
  },
  {
    "id": "3b3ddb68.994c3c",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5876.883331298828,
    "y": 6289.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "b320b0e.20770d",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4777.883331298828,
    "y": 6277.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "6e7ae435.b7607c"
      ]
    ]
  },
  {
    "id": "15021f96.80eb18",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4785.883331298828,
    "y": 6170.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "90de6696.037bd8",
        "ce29f9bd.7d263",
        "94bbebf0.09f428"
      ]
    ]
  },
  {
    "id": "90de6696.037bd8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5021.883331298828,
    "y": 6153.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "ce29f9bd.7d263",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5018.883331298828,
    "y": 6194.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "94bbebf0.09f428",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5032.883331298828,
    "y": 6234.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "e6e1dbd3.6e0a6",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4721.883331298828,
    "y": 6329.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "67962261.2516d4",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4729.883331298828,
    "y": 6387.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "6998ca1d.92c5d4",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4734.883331298828,
    "y": 6127.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "94b4d538.041a9",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4849.883331298828,
    "y": 6079.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "392e3f81.e0a6a8",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5022.883331298828,
    "y": 6924.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "84fb2e7.f2e54d",
        "113d3615.17adaa"
      ]
    ]
  },
  {
    "id": "84fb2e7.f2e54d",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5251.883331298828,
    "y": 6901.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "c3b316fd.fba0a8"
      ]
    ]
  },
  {
    "id": "113d3615.17adaa",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5251.883331298828,
    "y": 6950.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "b6424391.0ceee8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5984.88330078125,
    "y": 6956.88330078125,
    "z": "4456793a.59a288",
    "wires": [
      [
        "1cb2d5ed.65008a",
        "f8de35a7.d0325",
        "515cca2b.2a6e8c"
      ]
    ]
  },
  {
    "id": "b0305853.25009",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6369.88330078125,
    "y": 6919.88330078125,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "515cca2b.2a6e8c",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<!--<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $gfp`' />\n\n<parameter name='operational-status' value='Modified' />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6339.88330078125,
    "y": 6979.88330078125,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "1cb2d5ed.65008a",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 6246.88330078125,
    "y": 6807.88330078125,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "dd90ad1a.7eef1",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3982.883331298828,
    "y": 5864.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "1d6ec4bb.ad8c0b",
        "33673680.57cf72",
        "e2cec405.b0409",
        "6e2ab292.566884",
        "dbdd7c00.c39698"
      ]
    ]
  },
  {
    "id": "74fcf6b5.dbb39",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4726.883331298828,
    "y": 6227.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "34955381.c5797c",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4873.883087158203,
    "y": 5949.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "2a032dd9.9380b2",
    "type": "comment",
    "name": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "info": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "comments": "",
    "x": 5010.883087158203,
    "y": 5899.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "b937ed07.a77618",
    "type": "save",
    "name": "save ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3817.883331298828,
    "y": 3505.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "3dd82151.976f0e",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3999.883331298828,
    "y": 1760.8833312988281,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "6b6522.bc964ae",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3977.883331298828,
    "y": 2630.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "195c3e5b.085da2",
    "type": "comment",
    "name": "TEMPORARY REMOVING THE FOLLOWING TWO NODES",
    "info": "",
    "comments": "",
    "x": 3808.883331298828,
    "y": 3972.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "a8e7354f.a1833",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3489.883331298828,
    "y": 6004.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "a2dd9c19.75287",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3700.883331298828,
    "y": 4881.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "906b118c.b5ca4",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3833.883331298828,
    "y": 4929.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "86c9672.840f818",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4379.883331298828,
    "y": 4557.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "b9a92126.1d0eb",
        "e7523195.456808"
      ]
    ]
  },
  {
    "id": "b9a92126.1d0eb",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4572.883331298828,
    "y": 4558.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "71a4d763.a9eac"
      ]
    ]
  },
  {
    "id": "e7523195.456808",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4576.883331298828,
    "y": 4602.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "6742a953.fe0d28"
      ]
    ]
  },
  {
    "id": "6742a953.fe0d28",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4715.883331298828,
    "y": 4597.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "34f2cb8a.7f3954",
        "50607a4b.9927b4",
        "d6e6e1de.8f0598"
      ]
    ]
  },
  {
    "id": "71a4d763.a9eac",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4715.883331298828,
    "y": 4554.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "b61f10f5.eeecf",
        "90640d99.12302",
        "42e8372d.d506e",
        "7679135b.31e8e4"
      ]
    ]
  },
  {
    "id": "34f2cb8a.7f3954",
    "type": "set",
    "name": "set prop.connectivity-domainA-uuid",
    "xml": "<set>\n<parameter name='uuid.connectivity-domainA-uuid' value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5117.883575439453,
    "y": 4819.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "9d0b91dc.02ae8",
    "type": "comment",
    "name": "populate connectivity-A variable in the context map",
    "info": "",
    "comments": "",
    "x": 5124.883575439453,
    "y": 4773.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "9ca77368.01f7",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4914.883331298828,
    "y": 6552.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "50607a4b.9927b4",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5235.883575439453,
    "y": 4861.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "7eeebeb3.54b298",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5110.883331298828,
    "y": 5119.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "d039e4e7.e91be8",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3664.883331298828,
    "y": 4479.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "3c0dfd8f.f0eaca",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3998.883331298828,
    "y": 4662.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "80cc4c1e.a6bfe",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3610.883331298828,
    "y": 4529.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "ef8f5d34.35bfc8",
        "7b54fcfe.00d69c",
        "e9708f34.58ed3"
      ]
    ]
  },
  {
    "id": "7b54fcfe.00d69c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3838.374298095703,
    "y": 4502.457305908203,
    "z": "4456793a.59a288",
    "wires": [
      [
        "edc83f73.f7df38"
      ]
    ]
  },
  {
    "id": "e9708f34.58ed3",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3833.883331298828,
    "y": 4546.883270263672,
    "z": "4456793a.59a288",
    "wires": [
      [
        "a66e06b4.3bd7c"
      ]
    ]
  },
  {
    "id": "edc83f73.f7df38",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4000.945831298828,
    "y": 4501.743011474609,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "a66e06b4.3bd7c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4001.883331298828,
    "y": 4546.883270263672,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "fa42d876.f3bfc8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3786.883331298828,
    "y": 4619.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "b660a30a.8893a8",
        "3c0dfd8f.f0eaca"
      ]
    ]
  },
  {
    "id": "ef8f5d34.35bfc8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3617.883331298828,
    "y": 4619.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      [
        "fa42d876.f3bfc8"
      ]
    ]
  },
  {
    "id": "b660a30a.8893a8",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 3975.883331298828,
    "y": 4611.883331298828,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "3d1de5ec.2ac45a",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $middle-man-conn.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$middle-man-conn.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3808.883331298828,
    "y": 4757.883331298828,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "25e4380.733ab48",
    "type": "comment",
    "name": "Temporary skipping this check - to support multiple instances in one slice",
    "info": "",
    "comments": "",
    "x": 5915.766632080078,
    "y": 6570.766632080078,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "d6e6e1de.8f0598",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5115.550567626953,
    "y": 4957.966827392578,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "924c8eb8.8bcc2",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5117.767364501953,
    "y": 4917.766632080078,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "eadd33f3.5f43",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4991.550323486328,
    "y": 5207.966827392578,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "33d164e6.6e7844",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 4993.767120361328,
    "y": 5167.766632080078,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "3216abfb.82724c",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5086.350128173828,
    "y": 5663.399932861328,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "723b66c7.37bb08",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4913.350128173828,
    "y": 5720.399932861328,
    "z": "4456793a.59a288",
    "wires": [
      [
        "4b59f245.4d6edc",
        "fb820a66.06fc1"
      ]
    ]
  },
  {
    "id": "4b59f245.4d6edc",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5124.350128173828,
    "y": 5720.399932861328,
    "z": "4456793a.59a288",
    "wires": [
      [
        "95f01780.285928"
      ]
    ]
  },
  {
    "id": "fb820a66.06fc1",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5120.350128173828,
    "y": 5768.399932861328,
    "z": "4456793a.59a288",
    "wires": [
      [
        "ceaa430d.e25cf8"
      ]
    ]
  },
  {
    "id": "95f01780.285928",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5280.350128173828,
    "y": 5716.399932861328,
    "z": "4456793a.59a288",
    "wires": [
      [
        "363f2480.f640d4",
        "ec57c9d5.e1e658",
        "18db1f41.a7c409"
      ]
    ]
  },
  {
    "id": "ceaa430d.e25cf8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 5268.350128173828,
    "y": 5763.399932861328,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "7a15e8cb.5f6df8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5546.233917236328,
    "y": 5816.283233642578,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "18db1f41.a7c409",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5544.017120361328,
    "y": 5856.483428955078,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "ec57c9d5.e1e658",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5663.350128173828,
    "y": 5768.399932861328,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "363f2480.f640d4",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5534.350128173828,
    "y": 5716.399932861328,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "60039858.187258",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4975.350128173828,
    "y": 5621.399932861328,
    "z": "4456793a.59a288",
    "wires": []
  },
  {
    "id": "6922fe88.2fe5f8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4682.683135986328,
    "y": 5703.399932861328,
    "z": "4456793a.59a288",
    "wires": [
      [
        "3216abfb.82724c",
        "723b66c7.37bb08"
      ]
    ]
  },
  {
    "id": "4514c9c4.eaef1",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5003.716094970703,
    "y": 6005.083526611328,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "d7548734.759b08",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5789,
    "y": 6901,
    "z": "4456793a.59a288",
    "wires": [
      []
    ]
  },
  {
    "id": "c3b316fd.fba0a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5408,
    "y": 6904,
    "z": "4456793a.59a288",
    "wires": [
      [
        "d7548734.759b08",
        "d42bdb23.7a5dc8",
        "40573be3.cee89c"
      ]
    ]
  },
  {
    "id": "d42bdb23.7a5dc8",
    "type": "switchNode",
    "name": "switch $foundVpnName",
    "xml": "<switch test=\"`$foundVpnName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5634,
    "y": 6956,
    "z": "4456793a.59a288",
    "wires": [
      [
        "4a08f8b2.c71278"
      ]
    ]
  },
  {
    "id": "4a08f8b2.c71278",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5813,
    "y": 6955,
    "z": "4456793a.59a288",
    "wires": [
      [
        "b6424391.0ceee8"
      ]
    ]
  },
  {
    "id": "40573be3.cee89c",
    "type": "set",
    "name": "set vpnNameToSearch",
    "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
    "comments": "",
    "x": 5635,
    "y": 6849,
    "z": "4456793a.59a288",
    "wires": []
  }
]