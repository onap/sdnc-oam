[
  {
    "id": "eebfe6b4.36c4f8",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 140,
    "y": 119,
    "z": "f8944603.71553",
    "wires": [
      [
        "f39097a1.daa63"
      ]
    ]
  },
  {
    "id": "f39097a1.daa63",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 424.2856903076172,
    "y": 180.23810863494873,
    "z": "f8944603.71553",
    "wires": [
      [
        "af444c12.6df4"
      ]
    ]
  },
  {
    "id": "af444c12.6df4",
    "type": "method",
    "name": "method cll-vnf-topology-operation-cll-create-clean",
    "xml": "<method rpc='cll-vnf-topology-operation-cll-create-clean' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 430.42860412597656,
    "y": 265.0000305175781,
    "z": "f8944603.71553",
    "wires": [
      [
        "cd7fb41b.b80af8"
      ]
    ]
  },
  {
    "id": "cd7fb41b.b80af8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 780,
    "y": 324,
    "z": "f8944603.71553",
    "wires": [
      [
        "1330d7b6.40f6",
        "327e5a08.352bde",
        "b36ceae.9917d98"
      ]
    ]
  },
  {
    "id": "1330d7b6.40f6",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1081.33349609375,
    "y": 594.9302978515625,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "327e5a08.352bde",
    "type": "save",
    "name": "get service-instance from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
    "comments": "",
    "outputs": 1,
    "x": 1102.761962890625,
    "y": 297.33331298828125,
    "z": "f8944603.71553",
    "wires": [
      [
        "393ddb72.9cdaac",
        "27423ab.7bf7dc6",
        "e70357b.8e78fa8"
      ]
    ]
  },
  {
    "id": "393ddb72.9cdaac",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1327.761962890625,
    "y": 155.33331298828125,
    "z": "f8944603.71553",
    "wires": [
      [
        "db827fdb.ec8a7"
      ]
    ]
  },
  {
    "id": "27423ab.7bf7dc6",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1323.2529296875,
    "y": 224.9073486328125,
    "z": "f8944603.71553",
    "wires": [
      [
        "2aba6522.745fa2"
      ]
    ]
  },
  {
    "id": "e70357b.8e78fa8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1311.761962890625,
    "y": 271.33331298828125,
    "z": "f8944603.71553",
    "wires": [
      [
        "85c2ab27.5d7c"
      ]
    ]
  },
  {
    "id": "d67dd652.2acc48",
    "type": "comment",
    "name": "new for TransportSlicing",
    "info": "",
    "comments": "",
    "x": 1081.761962890625,
    "y": 185.33331298828125,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "b36ceae.9917d98",
    "type": "execute",
    "name": "execute properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
    "comments": "",
    "outputs": 1,
    "x": 1069.761962890625,
    "y": 237.33331298828125,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "db827fdb.ec8a7",
    "type": "switchNode",
    "name": "switch allotted-resources_length != 0",
    "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1568,
    "y": 152,
    "z": "f8944603.71553",
    "wires": [
      [
        "cb5b5e94.b15ef8",
        "b997ad22.d70e8"
      ]
    ]
  },
  {
    "id": "2aba6522.745fa2",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 1478.0623779296875,
    "y": 227.85977172851562,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "85c2ab27.5d7c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 1482,
    "y": 272,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "cb5b5e94.b15ef8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1773,
    "y": 189,
    "z": "f8944603.71553",
    "wires": [
      [
        "3cb72715.02a808"
      ]
    ]
  },
  {
    "id": "b997ad22.d70e8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1783,
    "y": 116,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "3cb72715.02a808",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1766,
    "y": 264,
    "z": "f8944603.71553",
    "wires": [
      [
        "ebf5f2d6.b4c7b8",
        "490f1cae.a20b64",
        "b4dd975f.8385a8",
        "43a803a5.2842f4",
        "651a17c0.63b678"
      ]
    ]
  },
  {
    "id": "d707b8ba.d22b28",
    "type": "save",
    "name": "get allotted-resource from aai",
    "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2252,
    "y": 315,
    "z": "f8944603.71553",
    "wires": [
      [
        "3717142f.9eacbc",
        "81f224b1.8ce278",
        "360e18d9.8e8878"
      ]
    ]
  },
  {
    "id": "3717142f.9eacbc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2468,
    "y": 382,
    "z": "f8944603.71553",
    "wires": [
      [
        "90fe9f39.2d3b48"
      ]
    ]
  },
  {
    "id": "81f224b1.8ce278",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2468.490966796875,
    "y": 281.573974609375,
    "z": "f8944603.71553",
    "wires": [
      [
        "fa7677d5.848dd"
      ]
    ]
  },
  {
    "id": "360e18d9.8e8878",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2464,
    "y": 331,
    "z": "f8944603.71553",
    "wires": [
      [
        "72c2923b.56a34c"
      ]
    ]
  },
  {
    "id": "ebf5f2d6.b4c7b8",
    "type": "for",
    "name": "for each allotted-resource",
    "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1969,
    "y": 296,
    "z": "f8944603.71553",
    "wires": [
      [
        "618e3f4f.a42bf",
        "d707b8ba.d22b28",
        "e8527008.db6228",
        "a669b945.663408"
      ]
    ]
  },
  {
    "id": "618e3f4f.a42bf",
    "type": "set",
    "name": "set the current allotted-resource-id",
    "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
    "comments": "",
    "x": 2249,
    "y": 234,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "43a803a5.2842f4",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
    "comments": "",
    "x": 1943,
    "y": 246,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "490f1cae.a20b64",
    "type": "get-resource",
    "name": "get-resource pnfs-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/pnfs?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
    "comments": "",
    "outputs": 1,
    "x": 1986,
    "y": 105,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "b4dd975f.8385a8",
    "type": "get-resource",
    "name": "get-resource logical-links",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
    "comments": "",
    "outputs": 1,
    "x": 1998,
    "y": 146,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "d38afd8a.8bc96",
    "type": "comment",
    "name": "The following two nodes are for PCE",
    "info": "",
    "comments": "",
    "x": 2023,
    "y": 58,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "8fedb211.a1c3d8",
    "type": "set",
    "name": "set tmp.arr",
    "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
    "comments": "",
    "x": 1943,
    "y": 192,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "fa7677d5.848dd",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 2647,
    "y": 284,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "72c2923b.56a34c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 2646.9375,
    "y": 333.1402587890625,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "90fe9f39.2d3b48",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2648.9375,
    "y": 384.1402587890625,
    "z": "f8944603.71553",
    "wires": [
      [
        "458d5965.a3abf"
      ]
    ]
  },
  {
    "id": "458d5965.a3abf",
    "type": "save",
    "name": "get allotted-resource relationship from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2941.9375,
    "y": 331.1402587890625,
    "z": "f8944603.71553",
    "wires": [
      [
        "9e8135ff.08a04",
        "11480c56.53825c",
        "c18b528b.950eb"
      ]
    ]
  },
  {
    "id": "11480c56.53825c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3245.428436279297,
    "y": 63.7142333984375,
    "z": "f8944603.71553",
    "wires": [
      [
        "fafa91c8.b89"
      ]
    ]
  },
  {
    "id": "fafa91c8.b89",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3422.999969482422,
    "y": 64,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "c18b528b.950eb",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3240.937469482422,
    "y": 113.1402587890625,
    "z": "f8944603.71553",
    "wires": [
      [
        "c9c4d95e.e78bc8"
      ]
    ]
  },
  {
    "id": "c9c4d95e.e78bc8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3422.937469482422,
    "y": 113.1402587890625,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "9e8135ff.08a04",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3244.937469482422,
    "y": 164.1402587890625,
    "z": "f8944603.71553",
    "wires": [
      [
        "249c683e.fa6548"
      ]
    ]
  },
  {
    "id": "249c683e.fa6548",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3424.937469482422,
    "y": 164.1402587890625,
    "z": "f8944603.71553",
    "wires": [
      [
        "8380148b.ccdda"
      ]
    ]
  },
  {
    "id": "8380148b.ccdda",
    "type": "switchNode",
    "name": "switch allotted-resource.relationship-list not empty",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2961,
    "y": 459,
    "z": "f8944603.71553",
    "wires": [
      [
        "f9f860ee.48ada",
        "3ee71a32.7e39ae"
      ]
    ]
  },
  {
    "id": "3ee71a32.7e39ae",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3300.999969482422,
    "y": 306,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "f9f860ee.48ada",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3299.999969482422,
    "y": 360,
    "z": "f8944603.71553",
    "wires": [
      [
        "88c3b86.63e2c48"
      ]
    ]
  },
  {
    "id": "b0fb22ca.f9ce1",
    "type": "outcome",
    "name": "network-policy",
    "xml": "<outcome value='network-policy'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4044.999969482422,
    "y": 314,
    "z": "f8944603.71553",
    "wires": [
      [
        "5f3f920d.e5225c"
      ]
    ]
  },
  {
    "id": "5f3f920d.e5225c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4221.999847412109,
    "y": 306.9998779296875,
    "z": "f8944603.71553",
    "wires": [
      [
        "8197a230.f5fc28",
        "add943b3.661de"
      ]
    ]
  },
  {
    "id": "88c3b86.63e2c48",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3463.999969482422,
    "y": 286,
    "z": "f8944603.71553",
    "wires": [
      [
        "b1327250.c3733",
        "de9a0d51.d824a"
      ]
    ]
  },
  {
    "id": "b1327250.c3733",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3744.999969482422,
    "y": 242,
    "z": "f8944603.71553",
    "wires": [
      [
        "64d386dc.4f4038"
      ]
    ]
  },
  {
    "id": "64d386dc.4f4038",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4006.999969482422,
    "y": 242,
    "z": "f8944603.71553",
    "wires": [
      [
        "b0fb22ca.f9ce1"
      ]
    ]
  },
  {
    "id": "8197a230.f5fc28",
    "type": "set",
    "name": "set the 1st network-policy-id",
    "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 4464.999847412109,
    "y": 263.9998779296875,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "add943b3.661de",
    "type": "save",
    "name": "get network-policy from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
    "comments": "",
    "outputs": 1,
    "x": 4453.999847412109,
    "y": 318.9998779296875,
    "z": "f8944603.71553",
    "wires": [
      [
        "584012e4.8af54c",
        "84e11e56.e2a698",
        "b5114711.48fe28"
      ]
    ]
  },
  {
    "id": "b5114711.48fe28",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4705.000213623047,
    "y": 260,
    "z": "f8944603.71553",
    "wires": [
      [
        "3ff18282.41fa7e"
      ]
    ]
  },
  {
    "id": "3ff18282.41fa7e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4853.571746826172,
    "y": 260.2857666015625,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "576f251.536f1dc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4852.509246826172,
    "y": 304.426025390625,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "84e11e56.e2a698",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4693.509246826172,
    "y": 304.426025390625,
    "z": "f8944603.71553",
    "wires": [
      [
        "576f251.536f1dc"
      ]
    ]
  },
  {
    "id": "584012e4.8af54c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4700.509246826172,
    "y": 383.426025390625,
    "z": "f8944603.71553",
    "wires": [
      [
        "84e0295.fec0058"
      ]
    ]
  },
  {
    "id": "84e0295.fec0058",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4839.509246826172,
    "y": 383.426025390625,
    "z": "f8944603.71553",
    "wires": [
      [
        "40dc732c.a37574",
        "72f9e36c.5c6004"
      ]
    ]
  },
  {
    "id": "40dc732c.a37574",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5045.000213623047,
    "y": 381,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "72f9e36c.5c6004",
    "type": "set",
    "name": "set the max bandwidth",
    "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
    "comments": "",
    "x": 5044.000213623047,
    "y": 427,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "de9a0d51.d824a",
    "type": "for",
    "name": "for each allotted-resource relationship",
    "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3561.999969482422,
    "y": 358,
    "z": "f8944603.71553",
    "wires": [
      [
        "1f9cf648.b23842"
      ]
    ]
  },
  {
    "id": "1f9cf648.b23842",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3841.999969482422,
    "y": 358,
    "z": "f8944603.71553",
    "wires": [
      [
        "9a7f86a9.e4bc3"
      ]
    ]
  },
  {
    "id": "9a7f86a9.e4bc3",
    "type": "outcome",
    "name": "logical-link",
    "xml": "<outcome value='logical-link'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2225.0001220703125,
    "y": 771.0001220703125,
    "z": "f8944603.71553",
    "wires": [
      [
        "a00c69ca.adce48"
      ]
    ]
  },
  {
    "id": "a00c69ca.adce48",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2402,
    "y": 764,
    "z": "f8944603.71553",
    "wires": [
      [
        "b1915aed.463e4",
        "2d618162.692d86"
      ]
    ]
  },
  {
    "id": "b1915aed.463e4",
    "type": "set",
    "name": "set the current logical-link-name",
    "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
    "comments": "",
    "x": 2645,
    "y": 721,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "2d618162.692d86",
    "type": "save",
    "name": "get logical-link from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
    "comments": "",
    "outputs": 1,
    "x": 2634,
    "y": 776,
    "z": "f8944603.71553",
    "wires": [
      [
        "e482931e.42ecd",
        "ed5f6487.2f87b",
        "f8d33751.7b5a4"
      ]
    ]
  },
  {
    "id": "e482931e.42ecd",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2925.490966796875,
    "y": 754.573974609375,
    "z": "f8944603.71553",
    "wires": [
      [
        "57635b4b.26640c"
      ]
    ]
  },
  {
    "id": "ed5f6487.2f87b",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2914,
    "y": 799,
    "z": "f8944603.71553",
    "wires": [
      [
        "a7b92e8f.8c52e8"
      ]
    ]
  },
  {
    "id": "57635b4b.26640c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3074.0625,
    "y": 754.8597412109375,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "a7b92e8f.8c52e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3073,
    "y": 799,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "f8d33751.7b5a4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2921,
    "y": 878,
    "z": "f8944603.71553",
    "wires": [
      [
        "98a40400.3efa78"
      ]
    ]
  },
  {
    "id": "98a40400.3efa78",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3060,
    "y": 878,
    "z": "f8944603.71553",
    "wires": [
      [
        "71736994.8ef448",
        "262a2cdd.1722ec",
        "6dffa8a4.87ef28",
        "19dc8ab.73ff975",
        "442ee5c4.7ebc14",
        "55e39af5.a2b61c",
        "22efa8c9.c8576",
        "d6e1611b.9ddcf",
        "b18620c8.640928",
        "11e0f934.faeab7",
        "b71f57a7.e2a288",
        "f7d11626.bd108",
        "7d22810d.66642",
        "5fc2699f.6720b8",
        "d4db1de6.243c9",
        "4c9f1a43.e137e4",
        "f953800.9cf34",
        "1931dff5.72d728",
        "be1fed24.75522",
        "3ab03c8.bdf8544",
        "d566dc7.835f6a"
      ]
    ]
  },
  {
    "id": "8992052.d396a78",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3409,
    "y": 411.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "71736994.8ef448",
    "type": "execute",
    "name": "execute UUID generator for otn-tunnel-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3389.9999389648438,
    "y": 490.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "5fc2699f.6720b8",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 3346.9999389648438,
    "y": 535.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "262a2cdd.1722ec",
    "type": "set",
    "name": "set network-route-one",
    "xml": "<set>\n<parameter name='network-route-one' value=\"`$tmp.aai.logical-link.link-name`\" />\n\n\n",
    "comments": "",
    "x": 3311.999969482422,
    "y": 589.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "6dffa8a4.87ef28",
    "type": "set",
    "name": "set network-route-two",
    "xml": "<set>\n<parameter name='network-route-two' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
    "comments": "",
    "x": 3312.999969482422,
    "y": 644.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "19dc8ab.73ff975",
    "type": "save",
    "name": "get network-route-one from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-one'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-one\">",
    "comments": "",
    "outputs": 1,
    "x": 3310.999969482422,
    "y": 908.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "6a238476.e2fb94",
        "535decdf.f72024",
        "ae1cf5c7.80a6f8"
      ]
    ]
  },
  {
    "id": "442ee5c4.7ebc14",
    "type": "save",
    "name": "get network-route-two from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-two'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-two\">",
    "comments": "",
    "outputs": 1,
    "x": 3305.999969482422,
    "y": 969.9998474121094,
    "z": "f8944603.71553",
    "wires": [
      [
        "3acf80af.f43f8",
        "d256cf0d.9aea78",
        "e101efde.aba"
      ]
    ]
  },
  {
    "id": "6a238476.e2fb94",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3621.999969482422,
    "y": 679.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "ab9f09fe.f29c98"
      ]
    ]
  },
  {
    "id": "535decdf.f72024",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3617.509002685547,
    "y": 729.4259948730469,
    "z": "f8944603.71553",
    "wires": [
      [
        "e4e6f924.884bf"
      ]
    ]
  },
  {
    "id": "ae1cf5c7.80a6f8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3621.509002685547,
    "y": 782.4259948730469,
    "z": "f8944603.71553",
    "wires": [
      [
        "ab5ff9c2.10c8a"
      ]
    ]
  },
  {
    "id": "ab9f09fe.f29c98",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3770.571502685547,
    "y": 679.2857360839844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "e4e6f924.884bf",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3760.509002685547,
    "y": 729.4259948730469,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "3acf80af.f43f8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3583.9999389648438,
    "y": 869.9998168945312,
    "z": "f8944603.71553",
    "wires": [
      [
        "87a2e14c.f364a"
      ]
    ]
  },
  {
    "id": "d256cf0d.9aea78",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3579.509002685547,
    "y": 912.4258728027344,
    "z": "f8944603.71553",
    "wires": [
      [
        "98a18e9a.d4f5a"
      ]
    ]
  },
  {
    "id": "e101efde.aba",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3580.509002685547,
    "y": 965.4258728027344,
    "z": "f8944603.71553",
    "wires": [
      [
        "4d45fe17.38da58"
      ]
    ]
  },
  {
    "id": "87a2e14c.f364a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3732.5714721679688,
    "y": 869.2855834960938,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "98a18e9a.d4f5a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3722.509002685547,
    "y": 912.4258728027344,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "ab5ff9c2.10c8a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3782.999969482422,
    "y": 781.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "84478c6a.6d587"
      ]
    ]
  },
  {
    "id": "4d45fe17.38da58",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3733.999969482422,
    "y": 964.9998474121094,
    "z": "f8944603.71553",
    "wires": [
      [
        "2dfc998d.a2b3e6"
      ]
    ]
  },
  {
    "id": "84478c6a.6d587",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-one.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3957.999969482422,
    "y": 755.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "be084505.b458",
        "5b2d2057.dd8c4",
        "83ce05e.7f315f8"
      ]
    ]
  },
  {
    "id": "2dfc998d.a2b3e6",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-two.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3917.999969482422,
    "y": 872.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "27a94561.e70e32",
        "e39a6c9c.1e6dd8",
        "fe4b773c.0eae98"
      ]
    ]
  },
  {
    "id": "be084505.b458",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4079.999969482422,
    "y": 540.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "86b880d.ad45d"
      ]
    ]
  },
  {
    "id": "5b2d2057.dd8c4",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4081.999969482422,
    "y": 594.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "10eaea8a.998afd"
      ]
    ]
  },
  {
    "id": "27a94561.e70e32",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4099,
    "y": 811,
    "z": "f8944603.71553",
    "wires": [
      [
        "e84921e.f8ecce"
      ]
    ]
  },
  {
    "id": "e39a6c9c.1e6dd8",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4101,
    "y": 865,
    "z": "f8944603.71553",
    "wires": [
      [
        "b7ebf9b7.e2f348"
      ]
    ]
  },
  {
    "id": "4ebe65d0.3ec92c",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4389.999969482422,
    "y": 492.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "b5b3e89e.18b28",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4382.999969482422,
    "y": 590.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "81270995.5d712",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4401,
    "y": 784,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "7db54dd4.f36624",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4405,
    "y": 877,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "3464c217.ddf82e",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3548,
    "y": 1549,
    "z": "f8944603.71553",
    "wires": [
      [
        "5c2f3801.4eed3"
      ]
    ]
  },
  {
    "id": "e12bcc6e.caae8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3557.490966796875,
    "y": 1591.5740356445312,
    "z": "f8944603.71553",
    "wires": [
      [
        "fb3f4046.01bc4"
      ]
    ]
  },
  {
    "id": "a3a68564.d1334",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3546,
    "y": 1638,
    "z": "f8944603.71553",
    "wires": [
      [
        "9f68f9be.d7aab8"
      ]
    ]
  },
  {
    "id": "8a9b7f74.e3a568",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3248,
    "y": 1511,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "22efa8c9.c8576",
    "type": "save",
    "name": "get p-interface-src from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3291,
    "y": 1576,
    "z": "f8944603.71553",
    "wires": [
      [
        "3464c217.ddf82e",
        "e12bcc6e.caae8",
        "a3a68564.d1334"
      ]
    ]
  },
  {
    "id": "55e39af5.a2b61c",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3292,
    "y": 1246,
    "z": "f8944603.71553",
    "wires": [
      [
        "cbe70d53.b79168",
        "9e0cb899.0e0f"
      ]
    ]
  },
  {
    "id": "9e0cb899.0e0f",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3512.999969482422,
    "y": 1298.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "300fab87.54654c"
      ]
    ]
  },
  {
    "id": "cbe70d53.b79168",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3514.999969482422,
    "y": 1331.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "ad0b83ff.4cb308"
      ]
    ]
  },
  {
    "id": "5c2f3801.4eed3",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3720.66650390625,
    "y": 1548,
    "z": "f8944603.71553",
    "wires": [
      [
        "fe2c6692.47101",
        "9af14a91.b12a68"
      ]
    ]
  },
  {
    "id": "fb3f4046.01bc4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3711.0623779296875,
    "y": 1594.8597717285156,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "9f68f9be.d7aab8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3715,
    "y": 1639,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "fe2c6692.47101",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3985,
    "y": 1532,
    "z": "f8944603.71553",
    "wires": [
      [
        "37956c14.cf1964",
        "7f26a273.a5f25c"
      ]
    ]
  },
  {
    "id": "7f26a273.a5f25c",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4208,
    "y": 1487,
    "z": "f8944603.71553",
    "wires": [
      [
        "d180abab.fe69a"
      ]
    ]
  },
  {
    "id": "37956c14.cf1964",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4210,
    "y": 1551,
    "z": "f8944603.71553",
    "wires": [
      [
        "11875f6b.e538c1"
      ]
    ]
  },
  {
    "id": "11875f6b.e538c1",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4372,
    "y": 1547,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "d180abab.fe69a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4373,
    "y": 1484,
    "z": "f8944603.71553",
    "wires": [
      [
        "c42ee54d.ec9ea",
        "e2dee17e.90746"
      ]
    ]
  },
  {
    "id": "ad0b83ff.4cb308",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3657.999969482422,
    "y": 1328.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "300fab87.54654c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3660.999969482422,
    "y": 1291.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "844bb618.6c32e8",
        "99a55ff.3057da"
      ]
    ]
  },
  {
    "id": "844bb618.6c32e8",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3834.999969482422,
    "y": 1247.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "9af14a91.b12a68",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3933.999969482422,
    "y": 1641.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "1b19176e.822411"
      ]
    ]
  },
  {
    "id": "1b19176e.822411",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4139.999969482422,
    "y": 1641.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "c875ac48.6e9"
      ]
    ]
  },
  {
    "id": "c875ac48.6e9",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4355.285614013672,
    "y": 1641.8217468261719,
    "z": "f8944603.71553",
    "wires": [
      [
        "6e0bf03.4de201"
      ]
    ]
  },
  {
    "id": "99a55ff.3057da",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3849.999969482422,
    "y": 1358.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "26c5a31d.0e26c4",
        "1dba38b8.e09647",
        "703777cb.7523f"
      ]
    ]
  },
  {
    "id": "26c5a31d.0e26c4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4045.5000915527344,
    "y": 1310.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "3f157e84.d62172"
      ]
    ]
  },
  {
    "id": "1dba38b8.e09647",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4037.5000915527344,
    "y": 1365.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "7126adde.e76d1c"
      ]
    ]
  },
  {
    "id": "703777cb.7523f",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4042.5000915527344,
    "y": 1422.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "f85ce86b.434b48"
      ]
    ]
  },
  {
    "id": "f85ce86b.434b48",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4194.500091552734,
    "y": 1423.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "7126adde.e76d1c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4205.500091552734,
    "y": 1368.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "3f157e84.d62172",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4189.882415771484,
    "y": 1308.6556396484375,
    "z": "f8944603.71553",
    "wires": [
      [
        "61a6617b.c1f918"
      ]
    ]
  },
  {
    "id": "61a6617b.c1f918",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4373.999969482422,
    "y": 1322.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "c94ffafa.dcbd38"
      ]
    ]
  },
  {
    "id": "e2dee17e.90746",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
    "comments": "",
    "x": 4543,
    "y": 1442,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "c42ee54d.ec9ea",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
    "comments": "",
    "x": 4544,
    "y": 1550,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "a1e5e819.9ba388",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4545,
    "y": 1499,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "6e0bf03.4de201",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4562.117156982422,
    "y": 1642.3403015136719,
    "z": "f8944603.71553",
    "wires": [
      [
        "663b6226.995afc",
        "dd7e9ff0.ed3a48",
        "21e8d5ce.795f42"
      ]
    ]
  },
  {
    "id": "663b6226.995afc",
    "type": "set",
    "name": "set source ttp-id",
    "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4777.117156982422,
    "y": 1604.3403015136719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "dd7e9ff0.ed3a48",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4774.117156982422,
    "y": 1643.3403015136719,
    "z": "f8944603.71553",
    "wires": [
      [
        "49a01492.84fe34"
      ]
    ]
  },
  {
    "id": "21e8d5ce.795f42",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4729.617156982422,
    "y": 1685.3403015136719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "49a01492.84fe34",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4954.617156982422,
    "y": 1642.3403015136719,
    "z": "f8944603.71553",
    "wires": [
      [
        "292cacf5.882694"
      ]
    ]
  },
  {
    "id": "ccfcf164.268f1",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4774,
    "y": 1260,
    "z": "f8944603.71553",
    "wires": [
      [
        "c88ef5fa.00d8b"
      ]
    ]
  },
  {
    "id": "c88ef5fa.00d8b",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4951,
    "y": 1252,
    "z": "f8944603.71553",
    "wires": [
      [
        "889b0a64.f04af",
        "b7b819bd.9ab3a"
      ]
    ]
  },
  {
    "id": "c94ffafa.dcbd38",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4568.999969482422,
    "y": 1322.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "ccfcf164.268f1",
        "109fb904.331fef"
      ]
    ]
  },
  {
    "id": "109fb904.331fef",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4777,
    "y": 1334,
    "z": "f8944603.71553",
    "wires": [
      [
        "c72b69fd.2d015"
      ]
    ]
  },
  {
    "id": "c72b69fd.2d015",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4954,
    "y": 1326,
    "z": "f8944603.71553",
    "wires": [
      [
        "7fcaaf72.ffd618"
      ]
    ]
  },
  {
    "id": "292cacf5.882694",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5112.617156982422,
    "y": 1642.3403015136719,
    "z": "f8944603.71553",
    "wires": [
      [
        "63e30873.d5c4b8"
      ]
    ]
  },
  {
    "id": "63e30873.d5c4b8",
    "type": "set",
    "name": "set source tunnel tp ip",
    "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5319.617156982422,
    "y": 1642.3403015136719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "b7b819bd.9ab3a",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5159,
    "y": 1259,
    "z": "f8944603.71553",
    "wires": [
      [
        "b062763c.d2a4c",
        "54b52301.01aeac",
        "c657b443.273d9"
      ]
    ]
  },
  {
    "id": "889b0a64.f04af",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainA id",
    "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5189,
    "y": 1207,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "b062763c.d2a4c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5369,
    "y": 1250,
    "z": "f8944603.71553",
    "wires": [
      [
        "be5642b7.4ae158"
      ]
    ]
  },
  {
    "id": "54b52301.01aeac",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5361,
    "y": 1305,
    "z": "f8944603.71553",
    "wires": [
      [
        "4c818fe4.79442"
      ]
    ]
  },
  {
    "id": "c657b443.273d9",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5366,
    "y": 1362,
    "z": "f8944603.71553",
    "wires": [
      [
        "efb52045.6ba93"
      ]
    ]
  },
  {
    "id": "efb52045.6ba93",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5518,
    "y": 1363,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "4c818fe4.79442",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5529,
    "y": 1308,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "be5642b7.4ae158",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5513.38232421875,
    "y": 1247.6556701660156,
    "z": "f8944603.71553",
    "wires": [
      [
        "6763b660.709548"
      ]
    ]
  },
  {
    "id": "7fcaaf72.ffd618",
    "type": "set",
    "name": "set domainA ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5189,
    "y": 1450,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "6763b660.709548",
    "type": "set",
    "name": "set controller domainA data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5728,
    "y": 1244,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "1bc82fcd.e38b3",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4377.999969482422,
    "y": 528.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "1ea9819.2a7577e",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4368.999969482422,
    "y": 626.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "86b880d.ad45d",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4202.999969482422,
    "y": 534.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "4ebe65d0.3ec92c",
        "1bc82fcd.e38b3"
      ]
    ]
  },
  {
    "id": "10eaea8a.998afd",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4208.999969482422,
    "y": 598.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "b5b3e89e.18b28",
        "1ea9819.2a7577e"
      ]
    ]
  },
  {
    "id": "e84921e.f8ecce",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4227,
    "y": 811,
    "z": "f8944603.71553",
    "wires": [
      [
        "81270995.5d712",
        "aacd9933.603dc8"
      ]
    ]
  },
  {
    "id": "b7ebf9b7.e2f348",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4230,
    "y": 864,
    "z": "f8944603.71553",
    "wires": [
      [
        "7db54dd4.f36624",
        "bffe7efa.872038"
      ]
    ]
  },
  {
    "id": "aacd9933.603dc8",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4387,
    "y": 824,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "bffe7efa.872038",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4390,
    "y": 915,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "786dd6d1.bb9f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3681.999969482422,
    "y": 2041.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "ced1d6e7.1761a",
        "debfaec3.11449"
      ]
    ]
  },
  {
    "id": "4b469f00.bbd698",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3509.333465576172,
    "y": 2042.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "786dd6d1.bb9f"
      ]
    ]
  },
  {
    "id": "abe29976.f7b82",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3518.824432373047,
    "y": 2085.574005126953,
    "z": "f8944603.71553",
    "wires": [
      [
        "fd5b7bb5.9eb778"
      ]
    ]
  },
  {
    "id": "df5e24e1.4bbfc8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3507.333465576172,
    "y": 2131.999969482422,
    "z": "f8944603.71553",
    "wires": [
      [
        "8efc96df.7aca9"
      ]
    ]
  },
  {
    "id": "fd5b7bb5.9eb778",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3672.3958435058594,
    "y": 2088.8597412109375,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "8efc96df.7aca9",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3676.333465576172,
    "y": 2132.999969482422,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "ced1d6e7.1761a",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3968.333465576172,
    "y": 2046.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "8ff8205e.94493",
        "d23599ca.696b88"
      ]
    ]
  },
  {
    "id": "d23599ca.696b88",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4191.333465576172,
    "y": 2001.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "9c58fe22.c1b4f8"
      ]
    ]
  },
  {
    "id": "8ff8205e.94493",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4193.333465576172,
    "y": 2065.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "f9f53a1b.e6879"
      ]
    ]
  },
  {
    "id": "f9f53a1b.e6879",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4352.333465576172,
    "y": 2084.0000915527344,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "9c58fe22.c1b4f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4356.333465576172,
    "y": 1998.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "a3891ddf.35707",
        "dedb2135.03f5b8"
      ]
    ]
  },
  {
    "id": "b18620c8.640928",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3281.333465576172,
    "y": 2077.999969482422,
    "z": "f8944603.71553",
    "wires": [
      [
        "4b469f00.bbd698",
        "abe29976.f7b82",
        "df5e24e1.4bbfc8"
      ]
    ]
  },
  {
    "id": "2363f2d1.c22566",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3242.333465576172,
    "y": 2021.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "d6e1611b.9ddcf",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3301.333465576172,
    "y": 1817.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "cf2f2f41.e3b378",
        "39e668ff.f44578"
      ]
    ]
  },
  {
    "id": "39e668ff.f44578",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3524.333465576172,
    "y": 1803.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "a19c910d.573ee"
      ]
    ]
  },
  {
    "id": "cf2f2f41.e3b378",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3526.333465576172,
    "y": 1836.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "13f310d4.058aff"
      ]
    ]
  },
  {
    "id": "13f310d4.058aff",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 3669.333465576172,
    "y": 1833.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "a19c910d.573ee",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3672.333465576172,
    "y": 1796.9999694824219,
    "z": "f8944603.71553",
    "wires": [
      [
        "f7d74c47.1bc978",
        "f5bac544.61fa48"
      ]
    ]
  },
  {
    "id": "f7d74c47.1bc978",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3866.333465576172,
    "y": 1800.0000915527344,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "debfaec3.11449",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3919.3334350585938,
    "y": 2168.9999389648438,
    "z": "f8944603.71553",
    "wires": [
      [
        "9615e6c.711fd18"
      ]
    ]
  },
  {
    "id": "9615e6c.711fd18",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4125.333435058594,
    "y": 2168.9999389648438,
    "z": "f8944603.71553",
    "wires": [
      [
        "cbe4341f.004078"
      ]
    ]
  },
  {
    "id": "cbe4341f.004078",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4342.619079589844,
    "y": 2167.8217163085938,
    "z": "f8944603.71553",
    "wires": [
      [
        "c7f950c4.309208"
      ]
    ]
  },
  {
    "id": "f5bac544.61fa48",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3888.333465576172,
    "y": 1868.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "2c3b0cc0.e9a8bc",
        "964d0d68.ea7238",
        "c9fecb15.92dc4"
      ]
    ]
  },
  {
    "id": "2c3b0cc0.e9a8bc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4083.8335876464844,
    "y": 1820.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "d8e08a6a.bad6c"
      ]
    ]
  },
  {
    "id": "964d0d68.ea7238",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4075.8335876464844,
    "y": 1875.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "30330606.c5c78a"
      ]
    ]
  },
  {
    "id": "c9fecb15.92dc4",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4080.8335876464844,
    "y": 1932.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "7d5217b1.764cf"
      ]
    ]
  },
  {
    "id": "7d5217b1.764cf",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4232.833587646484,
    "y": 1933.0000915527344,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "30330606.c5c78a",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4243.833587646484,
    "y": 1878.0000915527344,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "d8e08a6a.bad6c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4228.215911865234,
    "y": 1817.65576171875,
    "z": "f8944603.71553",
    "wires": [
      [
        "57c065bf.a4bd5c"
      ]
    ]
  },
  {
    "id": "a3891ddf.35707",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
    "comments": "",
    "x": 4526.333465576172,
    "y": 1959.0000915527344,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "dedb2135.03f5b8",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
    "comments": "",
    "x": 4527.333465576172,
    "y": 2064.0000915527344,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "cd4b037.d584a",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4522.333465576172,
    "y": 2013.0000915527344,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "c7f950c4.309208",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4549.450622558594,
    "y": 2157.3403930664062,
    "z": "f8944603.71553",
    "wires": [
      [
        "dd90bf13.7024b8",
        "71302a26.8b2194",
        "1d143619.b4c942"
      ]
    ]
  },
  {
    "id": "dd90bf13.7024b8",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4764.450622558594,
    "y": 2119.3403930664062,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "71302a26.8b2194",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4761.450622558594,
    "y": 2158.3403930664062,
    "z": "f8944603.71553",
    "wires": [
      [
        "d8986410.1ab67"
      ]
    ]
  },
  {
    "id": "1d143619.b4c942",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4716.950622558594,
    "y": 2200.3403930664062,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "d8986410.1ab67",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4941.950622558594,
    "y": 2157.3403930664062,
    "z": "f8944603.71553",
    "wires": [
      [
        "ce977a1e.eca43"
      ]
    ]
  },
  {
    "id": "ce977a1e.eca43",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5099.950622558594,
    "y": 2157.3403930664062,
    "z": "f8944603.71553",
    "wires": [
      [
        "fad51809.c9b758"
      ]
    ]
  },
  {
    "id": "fad51809.c9b758",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5306.950622558594,
    "y": 2157.3403930664062,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "3e817052.af0e48",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4810.333465576172,
    "y": 1836.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "41d964fa.bed18c"
      ]
    ]
  },
  {
    "id": "41d964fa.bed18c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4987.333465576172,
    "y": 1828.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "286abe4.161a1c2",
        "51859ea0.e5a788"
      ]
    ]
  },
  {
    "id": "57c065bf.a4bd5c",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4412.333465576172,
    "y": 1832.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "89b46226.1281f"
      ]
    ]
  },
  {
    "id": "89b46226.1281f",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4607.333465576172,
    "y": 1832.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "3e817052.af0e48",
        "56bdf4f5.249c24"
      ]
    ]
  },
  {
    "id": "51859ea0.e5a788",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5195.333465576172,
    "y": 1835.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "d1ce3d2f.531928",
        "ba2a8dba.a8d52",
        "4ba192d1.030d84"
      ]
    ]
  },
  {
    "id": "f8a3b14d.675a5",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4989.333465576172,
    "y": 1901.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "25c16268.66f006"
      ]
    ]
  },
  {
    "id": "56bdf4f5.249c24",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4812.333465576172,
    "y": 1909.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "f8a3b14d.675a5"
      ]
    ]
  },
  {
    "id": "286abe4.161a1c2",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainB id",
    "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5225.333465576172,
    "y": 1783.0000915527344,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "25c16268.66f006",
    "type": "set",
    "name": "set domainB ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5224.333465576172,
    "y": 2025.0000915527344,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "d1ce3d2f.531928",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5405.333465576172,
    "y": 1826.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "9d788655.20f98"
      ]
    ]
  },
  {
    "id": "ba2a8dba.a8d52",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5397.333465576172,
    "y": 1881.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "96363bdc.091"
      ]
    ]
  },
  {
    "id": "4ba192d1.030d84",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5402.333465576172,
    "y": 1938.0000915527344,
    "z": "f8944603.71553",
    "wires": [
      [
        "6a0588e1.3fd2b8"
      ]
    ]
  },
  {
    "id": "6a0588e1.3fd2b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5554.333465576172,
    "y": 1939.0000915527344,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "96363bdc.091",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5565.333465576172,
    "y": 1884.0000915527344,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "9d788655.20f98",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5549.715789794922,
    "y": 1823.65576171875,
    "z": "f8944603.71553",
    "wires": [
      [
        "f42174ac.a42b5"
      ]
    ]
  },
  {
    "id": "f42174ac.a42b5",
    "type": "set",
    "name": "set controller domainB data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5764.333465576172,
    "y": 1820.0000915527344,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "11e0f934.faeab7",
    "type": "set",
    "name": "set LEAF stuff",
    "xml": "<set>\n<parameter name='tmp.LEAF.pnf-name-long' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n\n<!--<parameter name='tmp.LEAF.pnf-name-short' value=\"`$param-prefix-domainA-pnfName[8]`\" />-->\n<parameter name='tmp.LEAF.pnf-name-short' value=\"`$tmp.src.pnf-name`\" />\n\n<parameter name='tmp.LEAF.uni-p-interface-long' value=\"`$tmp.aai.network-route-A.next-hop + '-' + $tmp.aai.network-route-A.logical-interface-id`\" />\n<parameter name='tmp.LEAF.uni-tp-id' value=\"`$tmp.src.ltpId`\" />\n",
    "comments": "",
    "x": 3248.999969482422,
    "y": 1638.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "87d62238.4ede38",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4544.999969482422,
    "y": 612.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "da6b2335.2cb2",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4555,
    "y": 809,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "b71f57a7.e2a288",
    "type": "set",
    "name": "set ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.ROOT.pnf-name-long' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.ROOT.pnf-name-short' value=\"`$tmp.dst.pnf-name`\" />\n\n<parameter name='tmp.ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-B.next-hop + '-' + $tmp.aai.network-route-B.logical-interface-id`\" />\n<parameter name='tmp.ROOT.uni-tp-id' value=\"`$tmp.dst.ltpId`\" />\n",
    "comments": "",
    "x": 3251.9999389648438,
    "y": 2146.9999389648438,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "f7d11626.bd108",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-logic",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-logic' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3389,
    "y": 2803,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "7d22810d.66642",
    "type": "switchNode",
    "name": "switch found-middle-man?",
    "xml": "<switch test='`$found-middle-man`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3266,
    "y": 2913,
    "z": "f8944603.71553",
    "wires": [
      [
        "74458dfb.e82acc",
        "6d43d493.c2ab14"
      ]
    ]
  },
  {
    "id": "74458dfb.e82acc",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3450,
    "y": 2892,
    "z": "f8944603.71553",
    "wires": [
      [
        "bd8c7362.5e86a8"
      ]
    ]
  },
  {
    "id": "6d43d493.c2ab14",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3342,
    "y": 5070,
    "z": "f8944603.71553",
    "wires": [
      [
        "f235a0e0.02a8"
      ]
    ]
  },
  {
    "id": "f235a0e0.02a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3497,
    "y": 5063,
    "z": "f8944603.71553",
    "wires": [
      [
        "69d3ed18.577c3c",
        "f2a7dc4a.68ede",
        "a789852e.51cd48",
        "434bd8c2.bae4f8",
        "cd1fc06c.124968",
        "c32fbe2a.4ce3f"
      ]
    ]
  },
  {
    "id": "bd8c7362.5e86a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3593,
    "y": 2892,
    "z": "f8944603.71553",
    "wires": [
      [
        "edf6563f.502118",
        "59e68189.ade8e8",
        "39d89d00.a48b3c",
        "f51c657e.c3fcc8",
        "3b5e2d55.c49c42",
        "c40c923d.ffb318",
        "3d1335ab.d13122",
        "441ba30c.ae2a1c",
        "5bfaebb4.b0d114",
        "32f3c697.c51f22",
        "f60b0d1b.343218",
        "51fbee04.79f4f",
        "a2a5771a.032e88",
        "a39c337f.4b8598",
        "f9369eb9.dd61b",
        "dad20130.739d78",
        "124ab46d.2d752c",
        "fdfcc8c4.b3e8a8",
        "8b9dcfa3.01c508",
        "87dcb71b.a618f",
        "286f0ec8.852352",
        "2bbca6cc.0ec622"
      ]
    ]
  },
  {
    "id": "5bfaebb4.b0d114",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainB",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3903,
    "y": 3207,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "edf6563f.502118",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3851,
    "y": 3249,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "59e68189.ade8e8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3980,
    "y": 3291,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "c425c4b.b5f8838",
    "type": "comment",
    "name": "Create ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 3826,
    "y": 3166,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "78e08e98.7c634",
    "type": "comment",
    "name": "create middle man connectivity and ...",
    "info": "1- create middle man connectivity\n2- create relation with all connectivities\n   in the path\n3- put srcTtp (+dstTtp) somewhere in the\n   vpn-binding -> this is for later on to find\n   which OTN tunnel's bandwidth has to be increased.\n5- create UNIs\n4- create relationship to UNIs",
    "comments": "",
    "x": 4351,
    "y": 3687,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "39d89d00.a48b3c",
    "type": "execute",
    "name": "execute UUID generator for connectivity middle-man",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-middle-man-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3915,
    "y": 3726,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "f51c657e.c3fcc8",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-middle-man-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-middle-man-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<!--The followings are not needed for the middle-man-connectivity-->\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />-->\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='mdsc' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3863,
    "y": 3777,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "3b5e2d55.c49c42",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-middle-man-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-middle-man-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3999,
    "y": 3824,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "62d7e2a.9cbc61c",
    "type": "comment",
    "name": "Create MIDDLE-MAN connectivity",
    "info": "",
    "comments": "",
    "x": 3856,
    "y": 3686,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "1f0597e7.f750d8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4286,
    "y": 3883,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "c40c923d.ffb318",
    "type": "save",
    "name": "get middle-man connectivity from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $prop.connectivity-middle-man-uuid\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"middle-man-conn\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3877,
    "y": 3930,
    "z": "f8944603.71553",
    "wires": [
      [
        "b2dc6149.43ec28",
        "f8c162ee.8e2a8",
        "a8c36503.377908"
      ]
    ]
  },
  {
    "id": "b2dc6149.43ec28",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4124,
    "y": 3884,
    "z": "f8944603.71553",
    "wires": [
      [
        "1f0597e7.f750d8"
      ]
    ]
  },
  {
    "id": "f8c162ee.8e2a8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4124.490966796875,
    "y": 3929.5740356445312,
    "z": "f8944603.71553",
    "wires": [
      [
        "244505cb.7c97da"
      ]
    ]
  },
  {
    "id": "a8c36503.377908",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4122,
    "y": 3973,
    "z": "f8944603.71553",
    "wires": [
      [
        "fac0a6c3.57a578"
      ]
    ]
  },
  {
    "id": "244505cb.7c97da",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 4287.0623779296875,
    "y": 3929.8597717285156,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "fac0a6c3.57a578",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 4291,
    "y": 3974,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "f9369eb9.dd61b",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3931,
    "y": 4272,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "dad20130.739d78",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3934,
    "y": 4317,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "fdfcc8c4.b3e8a8",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3926,
    "y": 4045,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "8b9dcfa3.01c508",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3928,
    "y": 4092,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "ed841a30.7664d",
    "type": "comment",
    "name": "The following two will be done in F1",
    "info": "",
    "comments": "",
    "x": 3847,
    "y": 4225,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "7144ff5f.c519e8",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4457,
    "y": 4891,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "69d3ed18.577c3c",
    "type": "switchNode",
    "name": "switch no-pce-call",
    "xml": "<switch test='`$no-pce-call`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3712,
    "y": 5044,
    "z": "f8944603.71553",
    "wires": [
      [
        "ae7574f4.3ebe3",
        "8bd2d4fd.8c4f1"
      ]
    ]
  },
  {
    "id": "8bd2d4fd.8c4f1",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3884,
    "y": 5041,
    "z": "f8944603.71553",
    "wires": [
      [
        "439959aa.a8d0e"
      ]
    ]
  },
  {
    "id": "ae7574f4.3ebe3",
    "type": "outcomeFalse",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3836,
    "y": 5888,
    "z": "f8944603.71553",
    "wires": [
      [
        "b05d129.ef1b1f"
      ]
    ]
  },
  {
    "id": "bbd89123.3c84c8",
    "type": "comment",
    "name": "1 --> PCE is needed",
    "info": "",
    "comments": "",
    "x": 3897,
    "y": 5011,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "88e636e4.0ad278",
    "type": "comment",
    "name": "2 --> no need to call PCE",
    "info": "",
    "comments": "",
    "x": 3907,
    "y": 5846,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "3d1335ab.d13122",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3930,
    "y": 4420,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "439959aa.a8d0e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4060,
    "y": 5043,
    "z": "f8944603.71553",
    "wires": [
      [
        "398ca5b9.10ae92",
        "26315d76.5ba5da",
        "70413194.4e4218",
        "36f7b692.fe5f9a",
        "23762b83.94d65c",
        "1981b041.f96778",
        "7144ff5f.c519e8",
        "d1a4e2c9.15ac9",
        "24040f90.d6a4"
      ]
    ]
  },
  {
    "id": "9b6d23e8.2f4c1",
    "type": "comment",
    "name": "Use the middle-man-conn.eth-srv-name for the LEAF connectivity's eth srv name",
    "info": "",
    "comments": "",
    "x": 5505,
    "y": 4516,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "398ca5b9.10ae92",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4438,
    "y": 5546,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "441ba30c.ae2a1c",
    "type": "save",
    "name": "save connectivityB relationship to UNI-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3909,
    "y": 3420,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "32f3c697.c51f22",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 3907,
    "y": 2877,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "f60b0d1b.343218",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 3855,
    "y": 2925,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "51fbee04.79f4f",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3983,
    "y": 2972,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "f3326814.1ece9",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 3820,
    "y": 2835,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "a2a5771a.032e88",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />",
    "comments": "",
    "outputs": 1,
    "x": 3817,
    "y": 3063,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "a39c337f.4b8598",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 3910,
    "y": 3116,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "71641615.6f44c8",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 3801,
    "y": 3019,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "11067d29.f83e4b",
    "type": "comment",
    "name": "Create ROOT UNI",
    "info": "",
    "comments": "",
    "x": 3805,
    "y": 3335,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "36f7b692.fe5f9a",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4374,
    "y": 4524,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "fa6ec7f0.b5b858",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4358,
    "y": 4480,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "87e40dc2.3dae2",
    "type": "comment",
    "name": "Create LEAF connectivity",
    "info": "",
    "comments": "",
    "x": 5105,
    "y": 4511,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "a4406b4c.17bbc",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainA",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 5192,
    "y": 4553,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "18ca4a3.634f536",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$middle-man-conn.etht-svc-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='vpn-type' value='leaf' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 5140,
    "y": 4601,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "b4f57662.21d798",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5268,
    "y": 4648,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "1981b041.f96778",
    "type": "save",
    "name": "save connectivityA relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4445,
    "y": 4933,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "1ff0ab3b.554fd5",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4428,
    "y": 4995,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "26315d76.5ba5da",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4539,
    "y": 5037,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "99476299.d65948",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 4987,
    "y": 5090,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "7e1b41de.44cf5",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4297,
    "y": 5788,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "99207b39.65e8d8",
    "type": "save",
    "name": "save LEAF UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.LEAF.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.LEAF.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.LEAF.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n<parameter name='type' value='leaf' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4195,
    "y": 5737,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "fc9d3b48.0b961",
    "type": "comment",
    "name": "Create LEAF UNI",
    "info": "",
    "comments": "",
    "x": 4179,
    "y": 5693,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "cdbca407.a3714",
    "type": "save",
    "name": "save the-connectivity relationship to UNI-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.LEAF.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.LEAF.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4965,
    "y": 5950,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "70413194.4e4218",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4366,
    "y": 5094,
    "z": "f8944603.71553",
    "wires": [
      [
        "9e68e3f9.d79778",
        "3f3ed24c.0decee"
      ]
    ]
  },
  {
    "id": "9e68e3f9.d79778",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4577,
    "y": 5094,
    "z": "f8944603.71553",
    "wires": [
      [
        "e924e4da.1f13b"
      ]
    ]
  },
  {
    "id": "e924e4da.1f13b",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4733,
    "y": 5090,
    "z": "f8944603.71553",
    "wires": [
      [
        "99476299.d65948",
        "259aff1b.d97a1",
        "b61f1c95.4694d"
      ]
    ]
  },
  {
    "id": "3f3ed24c.0decee",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4573,
    "y": 5142,
    "z": "f8944603.71553",
    "wires": [
      [
        "6bc2c49e.5247fc"
      ]
    ]
  },
  {
    "id": "6bc2c49e.5247fc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 4721,
    "y": 5137,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "540d81b.ac8608",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-LEAF, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5229,
    "y": 4719,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "e8527008.db6228",
    "type": "execute",
    "name": "execute UUID generator for ethernet-service-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2395,
    "y": 130,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "a669b945.663408",
    "type": "set",
    "name": "set new ethernet-service-name",
    "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
    "comments": "",
    "x": 2329,
    "y": 166,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "ba20200a.599368",
    "type": "comment",
    "name": "The following two nodes are to make sure all connectivities for an E-Tree have same etht-srv-name",
    "info": "",
    "comments": "",
    "x": 2514,
    "y": 93,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "f5cafc97.3be338",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 4264,
    "y": 5854,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "433677c1.52ee48",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4397,
    "y": 5902,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "fabf4cab.b217e",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4216,
    "y": 5960,
    "z": "f8944603.71553",
    "wires": [
      [
        "d58843e6.45b67",
        "5480ce12.618198"
      ]
    ]
  },
  {
    "id": "d58843e6.45b67",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4409,
    "y": 5961,
    "z": "f8944603.71553",
    "wires": [
      [
        "3584d606.ea3b92"
      ]
    ]
  },
  {
    "id": "3584d606.ea3b92",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Connectivity should have been created' />\n",
    "comments": "",
    "x": 4565,
    "y": 5958,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "5480ce12.618198",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4413,
    "y": 6005,
    "z": "f8944603.71553",
    "wires": [
      [
        "2c5800b.fe6138"
      ]
    ]
  },
  {
    "id": "2c5800b.fe6138",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4552,
    "y": 6000,
    "z": "f8944603.71553",
    "wires": [
      [
        "cdbca407.a3714",
        "908326bd.db0de8",
        "252b791f.9db75e",
        "275b22ee.4a806e",
        "331c47e0.bff598",
        "cf9d9601.e8d088",
        "b92b2881.bc3e18",
        "19e51740.b8f8a1",
        "2ded21f8.219046",
        "a0a762d0.469c28",
        "60c16c76.a98d34",
        "8396080f.a7f6c8"
      ]
    ]
  },
  {
    "id": "b92b2881.bc3e18",
    "type": "save",
    "name": "get all-vpn-bindings from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 4749,
    "y": 6679,
    "z": "f8944603.71553",
    "wires": [
      [
        "b068e9a3.d4db4",
        "b79debc6.f268c",
        "599f79e1.6940a8"
      ]
    ]
  },
  {
    "id": "b068e9a3.d4db4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4954,
    "y": 6676,
    "z": "f8944603.71553",
    "wires": [
      [
        "be7eb0d3.672b2"
      ]
    ]
  },
  {
    "id": "b79debc6.f268c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4937.490966796875,
    "y": 6737.574035644531,
    "z": "f8944603.71553",
    "wires": [
      [
        "7384abca.e83424"
      ]
    ]
  },
  {
    "id": "599f79e1.6940a8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4935,
    "y": 6781,
    "z": "f8944603.71553",
    "wires": [
      [
        "5c72f79d.0cafa"
      ]
    ]
  },
  {
    "id": "be7eb0d3.672b2",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5110,
    "y": 6690,
    "z": "f8944603.71553",
    "wires": [
      [
        "477f7936.afbf38"
      ]
    ]
  },
  {
    "id": "7384abca.e83424",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 5100.0623779296875,
    "y": 6737.859771728516,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "5c72f79d.0cafa",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 5102,
    "y": 6780,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "477f7936.afbf38",
    "type": "for",
    "name": "for vpnidx in all-vpn-bindings",
    "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 5357,
    "y": 6687,
    "z": "f8944603.71553",
    "wires": [
      [
        "8d0d8dd8.5dff18"
      ]
    ]
  },
  {
    "id": "8d0d8dd8.5dff18",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5594,
    "y": 6683,
    "z": "f8944603.71553",
    "wires": [
      [
        "234239f1.092ec6"
      ]
    ]
  },
  {
    "id": "af0f93b9.f63018",
    "type": "switchNode",
    "name": "switch vpnuuid is for this slice",
    "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].slice-id == $tmp.aai.service-instance.service-instance-id `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5837,
    "y": 6655,
    "z": "f8944603.71553",
    "wires": [
      [
        "1906307e.4f6708",
        "7e26fbb1.9c733c"
      ]
    ]
  },
  {
    "id": "1906307e.4f6708",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6042,
    "y": 6675,
    "z": "f8944603.71553",
    "wires": [
      [
        "234239f1.092ec6"
      ]
    ]
  },
  {
    "id": "7e26fbb1.9c733c",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 6041,
    "y": 6628,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "234239f1.092ec6",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4785,
    "y": 6950,
    "z": "f8944603.71553",
    "wires": [
      [
        "9c243a63.6beae8"
      ]
    ]
  },
  {
    "id": "7d275a16.b90c94",
    "type": "set",
    "name": "set tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].`\" />\n",
    "comments": "",
    "x": 6246.999969482422,
    "y": 6887.999969482422,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "62c83b20.7bb344",
    "type": "comment",
    "name": "find all OTNs that have srcTtpOtnLayer and increase their bandwidth",
    "info": "",
    "comments": "",
    "x": 4847,
    "y": 6626,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "cf9d9601.e8d088",
    "type": "set",
    "name": "set srcTtp OTN layer",
    "xml": "<set>\n<!--<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node + '-' + -->\n<!--                                             $param-prefix-domainA[$param-prefix-domainA_length -2] + '-' +-->\n<!--                                             $tmp.source.ttp-id`\" />-->\n\n<parameter name='tmp.srcTtpOtnLayer' value=\"`$tmp.pce-src-node`\" />\n\n\n",
    "comments": "",
    "x": 4729,
    "y": 6514,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "fb325d12.16a73",
    "type": "switchNode",
    "name": "switch provider-id domainA",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].provider-id == $param-prefix-domainA-pnfName[2]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5074,
    "y": 6345,
    "z": "f8944603.71553",
    "wires": [
      [
        "2ae3447b.0a1c44"
      ]
    ]
  },
  {
    "id": "2ae3447b.0a1c44",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5294,
    "y": 6351,
    "z": "f8944603.71553",
    "wires": [
      [
        "47fb23b1.c734fc"
      ]
    ]
  },
  {
    "id": "47fb23b1.c734fc",
    "type": "switchNode",
    "name": "switch te-topo-id",
    "xml": "<switch test='`$allNetworksList.network-resource[$netwidx].te-topo-id != $param-prefix-domainA-pnfName[6]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5481,
    "y": 6311,
    "z": "f8944603.71553",
    "wires": [
      [
        "504a47cd.0300d8"
      ]
    ]
  },
  {
    "id": "504a47cd.0300d8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5673,
    "y": 6314,
    "z": "f8944603.71553",
    "wires": [
      [
        "70b7cd06.f487e4"
      ]
    ]
  },
  {
    "id": "70b7cd06.f487e4",
    "type": "set",
    "name": "set otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='`$allNetworksList.network-resource[$netwidx].te-topo-id`' />\n",
    "comments": "",
    "x": 5882,
    "y": 6312,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "19e51740.b8f8a1",
    "type": "for",
    "name": "for netwidx..allNetworksList_length",
    "xml": "<for index='netwidx' start='0' end='`$allNetworksList.network-resource_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 4781,
    "y": 6339,
    "z": "f8944603.71553",
    "wires": [
      [
        "fb325d12.16a73"
      ]
    ]
  },
  {
    "id": "252b791f.9db75e",
    "type": "get-resource",
    "name": "get-resource network-resources-list",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-resources\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v24/network/network-resources?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"allNetworksList\" >",
    "comments": "",
    "outputs": 1,
    "x": 4789,
    "y": 6232,
    "z": "f8944603.71553",
    "wires": [
      [
        "ab2e0e9b.e6e2a",
        "175d6a26.e8f2ae",
        "30472c6d.7bfeec"
      ]
    ]
  },
  {
    "id": "ab2e0e9b.e6e2a",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5025,
    "y": 6215,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "175d6a26.e8f2ae",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5022,
    "y": 6256,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "30472c6d.7bfeec",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5036,
    "y": 6296,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "275b22ee.4a806e",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='tmp.pce-src-node.' value='' />\n",
    "comments": "",
    "x": 4725,
    "y": 6391,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "331c47e0.bff598",
    "type": "set",
    "name": "set tmp.pce-src-node",
    "xml": "<set>\n<!--<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[1] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[2] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[3] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[4] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[5] + '-' +-->\n<!--                                                   1 + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[7] + '-' +-->\n<!--                                                   $param-prefix-domainA-pnfName[8]`\" />-->\n\n<parameter name='tmp.pce-src-node' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $otnTopoIdSrc + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />",
    "comments": "",
    "x": 4733,
    "y": 6449,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "908326bd.db0de8",
    "type": "set",
    "name": "unset parameters",
    "xml": "<set>\n<parameter name='allNetworksList.' value='' />\n",
    "comments": "",
    "x": 4738,
    "y": 6189,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "8ef1afe7.71ad38",
    "type": "comment",
    "name": "The following section is to find srcTtp OTN layer (its long name)",
    "info": "The following section is to find srcTtp OTN layer (its long name)",
    "comments": "",
    "x": 4853,
    "y": 6141,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "9c243a63.6beae8",
    "type": "switchNode",
    "name": "switch ops-note is srcTtpOtnLayer",
    "xml": "<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.srcTtpOtnLayer `\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5028,
    "y": 6947,
    "z": "f8944603.71553",
    "wires": [
      [
        "14533561.0c5673",
        "af779ea0.7fb81"
      ]
    ]
  },
  {
    "id": "14533561.0c5673",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5257,
    "y": 6924,
    "z": "f8944603.71553",
    "wires": [
      [
        "55635f65.d76ee8"
      ]
    ]
  },
  {
    "id": "af779ea0.7fb81",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5257,
    "y": 6973,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "494eed0f.99eb84",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5989.999969482422,
    "y": 6978.999969482422,
    "z": "f8944603.71553",
    "wires": [
      [
        "6ed262af.6482c4",
        "7d275a16.b90c94",
        "ea085aad.03ece"
      ]
    ]
  },
  {
    "id": "eb8bdae2.80aaf8",
    "type": "comment",
    "name": "increase the bw of the-vpn-binding and change status to modified",
    "info": "increase the bw of the-vpn-binding\nchange status to modified\n",
    "comments": "",
    "x": 6374.999969482422,
    "y": 6941.999969482422,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "ea085aad.03ece",
    "type": "save",
    "name": "update vpn-binding otnIdx resource (aka. OTN) in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.the-vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.the-vpn-binding.vpn-id`' />\n<!--<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />-->\n<parameter name='customer-vpn-id' value='`$newToBeUsedMaxtpn`' />\n<parameter name='route-distinguisher' value='`$tmp.aai.the-vpn-binding.route-distinguisher + $gfp`' />\n\n<parameter name='operational-status' value='Modified' />\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 6344.999969482422,
    "y": 7001.999969482422,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "6ed262af.6482c4",
    "type": "set",
    "name": "unset tmp.aai.the-vpn-binding",
    "xml": "<set>\n<parameter name='tmp.aai.the-vpn-binding.' value=\"\" />\n",
    "comments": "",
    "x": 6251.999969482422,
    "y": 6829.999969482422,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "b05d129.ef1b1f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 3988,
    "y": 5887,
    "z": "f8944603.71553",
    "wires": [
      [
        "99207b39.65e8d8",
        "f5cafc97.3be338",
        "433677c1.52ee48",
        "fabf4cab.b217e",
        "7e1b41de.44cf5"
      ]
    ]
  },
  {
    "id": "e2f1cfff.a8b258",
    "type": "set",
    "name": "unset otnTopoIdSrc",
    "xml": "<set>\n<parameter name='otnTopoIdSrc' value='' />\n",
    "comments": "",
    "x": 4730,
    "y": 6289,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "2ded21f8.219046",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.the-connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.the-connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4858,
    "y": 6031,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "4a18264c.6d9e",
    "type": "comment",
    "name": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "info": "Update the existing eth-srv by adding the new LEAF UNI into its list of endpoints",
    "comments": "",
    "x": 4995,
    "y": 5981,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "124ab46d.2d752c",
    "type": "save",
    "name": "save ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n<parameter name='type' value='root' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3822,
    "y": 3374,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "826efc02.44c7b",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3999.999969482422,
    "y": 1608.9999694824219,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "3746cfac.cfad98",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3978.9999389648438,
    "y": 2120.9999389648438,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "b5ea3d16.fd41f",
    "type": "comment",
    "name": "TEMPORARY REMOVING THE FOLLOWING TWO NODES",
    "info": "",
    "comments": "",
    "x": 3814,
    "y": 3995,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "9d7f2116.baeda",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3904,
    "y": 6375,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "f2a7dc4a.68ede",
    "type": "set",
    "name": "set current-provider-id and current-cvlan-id",
    "xml": "<set>\n<parameter name='tmp.current-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='tmp.current-cvlan-id' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<!--<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />-->\n<!--<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />-->\n<!--<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />-->\n<!--<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />-->\n<!--<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->",
    "comments": "",
    "x": 3706,
    "y": 4904,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "a789852e.51cd48",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-connectivity",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-connectivity' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3839,
    "y": 4952,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "23762b83.94d65c",
    "type": "switchNode",
    "name": "switch found-connectivity?",
    "xml": "\n<switch test=\"`$found-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4385,
    "y": 4580,
    "z": "f8944603.71553",
    "wires": [
      [
        "e4f34350.306628",
        "84eda9bb.13e58"
      ]
    ]
  },
  {
    "id": "e4f34350.306628",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4578,
    "y": 4581,
    "z": "f8944603.71553",
    "wires": [
      [
        "d93f9a59.274b5"
      ]
    ]
  },
  {
    "id": "84eda9bb.13e58",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4582,
    "y": 4625,
    "z": "f8944603.71553",
    "wires": [
      [
        "fa8add54.9c2898"
      ]
    ]
  },
  {
    "id": "fa8add54.9c2898",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4721,
    "y": 4620,
    "z": "f8944603.71553",
    "wires": [
      [
        "48346123.4f10a8",
        "5e210590.033b4c",
        "140ccb32.dd72dd"
      ]
    ]
  },
  {
    "id": "d93f9a59.274b5",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4721,
    "y": 4577,
    "z": "f8944603.71553",
    "wires": [
      [
        "a4406b4c.17bbc",
        "18ca4a3.634f536",
        "b4f57662.21d798",
        "540d81b.ac8608"
      ]
    ]
  },
  {
    "id": "48346123.4f10a8",
    "type": "set",
    "name": "set prop.connectivity-domainA-uuid",
    "xml": "<set>\n<parameter name='uuid.connectivity-domainA-uuid' value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5123.000244140625,
    "y": 4842,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "54a11c60.7fd1ec",
    "type": "comment",
    "name": "populate connectivity-A variable in the context map",
    "info": "",
    "comments": "",
    "x": 5130.000244140625,
    "y": 4796,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "a0a762d0.469c28",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-find-maximum-used-tpn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4920,
    "y": 6575,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "5e210590.033b4c",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5241.000244140625,
    "y": 4884,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "259aff1b.d97a1",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5116,
    "y": 5142,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "80314ddc.393748",
    "type": "comment",
    "name": "Update ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3461,
    "y": 4475,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "d1326c21.abc33",
    "type": "save",
    "name": "update ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 3983,
    "y": 4576,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "434bd8c2.bae4f8",
    "type": "save",
    "name": "get root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.rootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3440,
    "y": 4519,
    "z": "f8944603.71553",
    "wires": [
      [
        "7ea7dff4.93abc",
        "616c8d40.285e14",
        "ffe0a536.7eaff8"
      ]
    ]
  },
  {
    "id": "616c8d40.285e14",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3628.490966796875,
    "y": 4487.57421875,
    "z": "f8944603.71553",
    "wires": [
      [
        "739b53.f4a4fcac"
      ]
    ]
  },
  {
    "id": "ffe0a536.7eaff8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3617,
    "y": 4527,
    "z": "f8944603.71553",
    "wires": [
      [
        "68d1064e.ebb3b8"
      ]
    ]
  },
  {
    "id": "739b53.f4a4fcac",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3788.0625,
    "y": 4485.85986328125,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "68d1064e.ebb3b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3778,
    "y": 4528,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "aedbd8f5.94f11",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3780,
    "y": 4572,
    "z": "f8944603.71553",
    "wires": [
      [
        "530f885c.d5a28",
        "d1326c21.abc33"
      ]
    ]
  },
  {
    "id": "7ea7dff4.93abc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3622,
    "y": 4564,
    "z": "f8944603.71553",
    "wires": [
      [
        "aedbd8f5.94f11"
      ]
    ]
  },
  {
    "id": "530f885c.d5a28",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.rootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 3941,
    "y": 4504,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "cd1fc06c.124968",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $middle-man-conn.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$middle-man-conn.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 3806,
    "y": 4843,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "ac8fc812.ca8b88",
    "type": "comment",
    "name": "Temporary skipping this check - to support multiple instances in one slice",
    "info": "",
    "comments": "",
    "x": 5920.88330078125,
    "y": 6592.88330078125,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "140ccb32.dd72dd",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5120.667236328125,
    "y": 4980.08349609375,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "60fccea7.c83a28",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5122.884033203125,
    "y": 4939.88330078125,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "b61f1c95.4694d",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4996.6669921875,
    "y": 5230.08349609375,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "82a40a13.767da8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 4998.8837890625,
    "y": 5189.88330078125,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "91bd4596.74f628",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5086.466796875,
    "y": 5592.5166015625,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "f50c2a2e.93dfe8",
    "type": "switchNode",
    "name": "switch found-root-connectivity",
    "xml": "\n<switch test=\"`$found-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4913.466796875,
    "y": 5649.5166015625,
    "z": "f8944603.71553",
    "wires": [
      [
        "8646fa93.554c38",
        "a6ded94a.e3e54"
      ]
    ]
  },
  {
    "id": "8646fa93.554c38",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5124.466796875,
    "y": 5649.5166015625,
    "z": "f8944603.71553",
    "wires": [
      [
        "258b63bd.85fb7c"
      ]
    ]
  },
  {
    "id": "a6ded94a.e3e54",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5120.466796875,
    "y": 5697.5166015625,
    "z": "f8944603.71553",
    "wires": [
      [
        "d925f9fa.8153b8"
      ]
    ]
  },
  {
    "id": "258b63bd.85fb7c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5280.466796875,
    "y": 5645.5166015625,
    "z": "f8944603.71553",
    "wires": [
      [
        "8d6cf51e.6059f8",
        "44488697.cdb02",
        "c9ce352b.46ce88"
      ]
    ]
  },
  {
    "id": "d925f9fa.8153b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='Root Connectivity was not found' />\n",
    "comments": "",
    "x": 5268.466796875,
    "y": 5692.5166015625,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "df7464c9.77f0d",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5590.3505859375,
    "y": 5746.39990234375,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "c9ce352b.46ce88",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5594.1337890625,
    "y": 5784.60009765625,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "44488697.cdb02",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5700.466796875,
    "y": 5697.5166015625,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "8d6cf51e.6059f8",
    "type": "set",
    "name": "set prop.connectivity-domainB-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.aai.ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5584.466796875,
    "y": 5645.5166015625,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "7e224339.ebcda4",
    "type": "comment",
    "name": "populate connectivity-B variable in the context map",
    "info": "",
    "comments": "",
    "x": 4975.466796875,
    "y": 5550.5166015625,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "60c16c76.a98d34",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4687.7998046875,
    "y": 5725.5166015625,
    "z": "f8944603.71553",
    "wires": [
      [
        "91bd4596.74f628",
        "f50c2a2e.93dfe8",
        "b08c7802.5d204",
        "7492e58a.da53dc"
      ]
    ]
  },
  {
    "id": "8396080f.a7f6c8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.the-connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.the-connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 4987.8330078125,
    "y": 6086.2001953125,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "e07ba4bc.bfaae8",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-searchVpnName",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-searchVpnName' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5794.116668701172,
    "y": 6923.116668701172,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "55635f65.d76ee8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5413.116668701172,
    "y": 6926.116668701172,
    "z": "f8944603.71553",
    "wires": [
      [
        "e07ba4bc.bfaae8",
        "d0282e45.27576",
        "be279863.754a6"
      ]
    ]
  },
  {
    "id": "d0282e45.27576",
    "type": "switchNode",
    "name": "switch $foundVpnName",
    "xml": "<switch test=\"`$foundVpnName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5639.116668701172,
    "y": 6978.116668701172,
    "z": "f8944603.71553",
    "wires": [
      [
        "adb0d898.09cba8"
      ]
    ]
  },
  {
    "id": "adb0d898.09cba8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5818.116668701172,
    "y": 6977.116668701172,
    "z": "f8944603.71553",
    "wires": [
      [
        "494eed0f.99eb84"
      ]
    ]
  },
  {
    "id": "be279863.754a6",
    "type": "set",
    "name": "set vpnNameToSearch",
    "xml": "<set>\n<parameter name='vpnNameToSearch' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-name`\" />\n",
    "comments": "",
    "x": 5640.116668701172,
    "y": 6871.116668701172,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "3cd9264c.3cdbea",
    "type": "notify",
    "name": "notify",
    "xml": "<notify plugin='' resource='' action='' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2634.116668701172,
    "y": 920.1166687011719,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "d4db1de6.243c9",
    "type": "set",
    "name": "set network-route-three",
    "xml": "<set>\n<parameter name='network-route-three' value=\"`$tmp.aai.logical-link.segment-id`\" />\n\n\n",
    "comments": "",
    "x": 3312.116668701172,
    "y": 696.1166687011719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "b2eea3d4.d83b2",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3528.116668701172,
    "y": 1024.1166687011719,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "c92a9c74.6d8cb",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3523.625732421875,
    "y": 1066.542724609375,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "be6d3c2.c1bdfc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3527.625701904297,
    "y": 1114.5426940917969,
    "z": "f8944603.71553",
    "wires": [
      [
        "82044de7.824378"
      ]
    ]
  },
  {
    "id": "82044de7.824378",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3685.116668701172,
    "y": 1114.1166687011719,
    "z": "f8944603.71553",
    "wires": [
      [
        "9732d3c5.76e0c8"
      ]
    ]
  },
  {
    "id": "9732d3c5.76e0c8",
    "type": "switchNode",
    "name": "switch nr type",
    "xml": "<switch test='`$tmp.aai.network-route-three.type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3855.11669921875,
    "y": 1117.1168212890625,
    "z": "f8944603.71553",
    "wires": [
      [
        "7d1d73b.5c3fc8c",
        "8cd6f95a.d7c4d",
        "68098f91.a64618"
      ]
    ]
  },
  {
    "id": "7d1d73b.5c3fc8c",
    "type": "outcome",
    "name": "ROOT",
    "xml": "<outcome value='ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4029.116668701172,
    "y": 1055.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "a9479bec.894888"
      ]
    ]
  },
  {
    "id": "8cd6f95a.d7c4d",
    "type": "outcome",
    "name": "LEAF",
    "xml": "<outcome value='LEAF'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4031.116668701172,
    "y": 1109.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "d844935e.741748"
      ]
    ]
  },
  {
    "id": "a9479bec.894888",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4157.116668701172,
    "y": 1055.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "7a232bae.539a2c",
        "19f7263a.0f2e72"
      ]
    ]
  },
  {
    "id": "d844935e.741748",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4160.116668701172,
    "y": 1108.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "e31191f4.c7e44",
        "c783c2e3.52d62"
      ]
    ]
  },
  {
    "id": "19f7263a.0f2e72",
    "type": "set",
    "name": "set network-route-B",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-B.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4318.116668701172,
    "y": 1079.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "e31191f4.c7e44",
    "type": "set",
    "name": "set network-route-LEAF",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-LEAF.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4335.116668701172,
    "y": 1121.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "c783c2e3.52d62",
    "type": "set",
    "name": "set network-route-A",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-A.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4320.116668701172,
    "y": 1159.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "7a232bae.539a2c",
    "type": "set",
    "name": "set network-route-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4332.116668701172,
    "y": 1039.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "5dbb2ad5.55ee04",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4497.116668701172,
    "y": 1055.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "4c9f1a43.e137e4",
    "type": "save",
    "name": "get network-route-three from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-three'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-three\">",
    "comments": "",
    "outputs": 1,
    "x": 3288.116668701172,
    "y": 1041.1166687011719,
    "z": "f8944603.71553",
    "wires": [
      [
        "b2eea3d4.d83b2",
        "c92a9c74.6d8cb",
        "be6d3c2.c1bdfc"
      ]
    ]
  },
  {
    "id": "68098f91.a64618",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3974.116668701172,
    "y": 1173.1166687011719,
    "z": "f8944603.71553",
    "wires": [
      [
        "3baeb12d.78947e"
      ]
    ]
  },
  {
    "id": "3baeb12d.78947e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4148.116668701172,
    "y": 1168.1166687011719,
    "z": "f8944603.71553",
    "wires": [
      [
        "f32a06d7.18ee6",
        "9c8c5f6f.4f4828"
      ]
    ]
  },
  {
    "id": "9c8c5f6f.4f4828",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4318.116668701172,
    "y": 1241.1166687011719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "f32a06d7.18ee6",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-three.`\" />\n\n\n",
    "comments": "",
    "x": 4372.116668701172,
    "y": 1201.1166687011719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "89b3411b.fe2cb",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4486.116668701172,
    "y": 1226.1166687011719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "fe4b773c.0eae98",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4045.116668701172,
    "y": 929.1166687011719,
    "z": "f8944603.71553",
    "wires": [
      [
        "a6d4107d.6655f"
      ]
    ]
  },
  {
    "id": "e8ae3a08.56b988",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4389.116668701172,
    "y": 997.1166687011719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "8ecb2104.b1fc58",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-two.`\" />\n\n\n",
    "comments": "",
    "x": 4443.116668701172,
    "y": 957.1166687011719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "a817660e.e9d2",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4587.116668701172,
    "y": 986.1166687011719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "a6d4107d.6655f",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4219.116668701172,
    "y": 924.1166687011719,
    "z": "f8944603.71553",
    "wires": [
      [
        "8ecb2104.b1fc58",
        "e8ae3a08.56b988"
      ]
    ]
  },
  {
    "id": "83ce05e.7f315f8",
    "type": "outcome",
    "name": "SECONDARY-ROOT",
    "xml": "<outcome value='SECONDARY-ROOT'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4105.116668701172,
    "y": 667.1166687011719,
    "z": "f8944603.71553",
    "wires": [
      [
        "d03cb873.c57328"
      ]
    ]
  },
  {
    "id": "2049e56d.3172ca",
    "type": "set",
    "name": "set network-route-C",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-C.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4449.116668701172,
    "y": 735.1166687011719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "6995e48e.171b9c",
    "type": "set",
    "name": "set network-route-SECONDARY-ROOT",
    "xml": "<set>\n<parameter name='tmp.aai.network-route-SECONDARY-ROOT.' value=\"`$tmp.aai.network-route-one.`\" />\n\n\n",
    "comments": "",
    "x": 4503.116668701172,
    "y": 695.1166687011719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "80fe4b30.9273d",
    "type": "comment",
    "name": "This is it (should be)",
    "info": "",
    "comments": "",
    "x": 4617.116668701172,
    "y": 720.1166687011719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "d03cb873.c57328",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4279.116668701172,
    "y": 662.1166687011719,
    "z": "f8944603.71553",
    "wires": [
      [
        "6995e48e.171b9c",
        "2049e56d.3172ca"
      ]
    ]
  },
  {
    "id": "d8eb368d.7e35e8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3686.116668701172,
    "y": 2544.116668701172,
    "z": "f8944603.71553",
    "wires": [
      [
        "9d31c4f.62b63b8",
        "42d540.6e2552c"
      ]
    ]
  },
  {
    "id": "4acebe87.51a2e",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3513.450164794922,
    "y": 2545.116668701172,
    "z": "f8944603.71553",
    "wires": [
      [
        "d8eb368d.7e35e8"
      ]
    ]
  },
  {
    "id": "faf79ca9.39c718",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3522.941131591797,
    "y": 2587.690704345703,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "760b8826.a76aa",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3511.450164794922,
    "y": 2634.116668701172,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "9d31c4f.62b63b8",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC\"/>\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3972.450164794922,
    "y": 2548.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "beea1414.622ca8",
        "e0900c85.f5153"
      ]
    ]
  },
  {
    "id": "e0900c85.f5153",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4195.450164794922,
    "y": 2503.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "b1fce547.cdefa8"
      ]
    ]
  },
  {
    "id": "beea1414.622ca8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4197.450164794922,
    "y": 2567.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "1f2077c9.d2f12"
      ]
    ]
  },
  {
    "id": "1931dff5.72d728",
    "type": "save",
    "name": "get p-interface-dst from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-C.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-C.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3285.450164794922,
    "y": 2580.116668701172,
    "z": "f8944603.71553",
    "wires": [
      [
        "4acebe87.51a2e",
        "faf79ca9.39c718",
        "760b8826.a76aa"
      ]
    ]
  },
  {
    "id": "20a2805c.f7ce68",
    "type": "comment",
    "name": "Question?",
    "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
    "comments": "",
    "x": 3246.450164794922,
    "y": 2524.116668701172,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "f953800.9cf34",
    "type": "execute",
    "name": "execute split tp-id to get pnf-name",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-C.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainC-pnfName\"/>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3305.450164794922,
    "y": 2320.116668701172,
    "z": "f8944603.71553",
    "wires": [
      [
        "1523d633.28a802",
        "23587c7d.fbba4c"
      ]
    ]
  },
  {
    "id": "23587c7d.fbba4c",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3528.450164794922,
    "y": 2306.116668701172,
    "z": "f8944603.71553",
    "wires": [
      [
        "c7b4b7e7.8e8b78"
      ]
    ]
  },
  {
    "id": "1523d633.28a802",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3530.450164794922,
    "y": 2339.116668701172,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "c7b4b7e7.8e8b78",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3676.450164794922,
    "y": 2299.116668701172,
    "z": "f8944603.71553",
    "wires": [
      [
        "cb965cfe.67a2f",
        "1a7add8d.af97ca"
      ]
    ]
  },
  {
    "id": "cb965cfe.67a2f",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst.domainC.pnf-name' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n",
    "comments": "",
    "x": 3870.450164794922,
    "y": 2302.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "42d540.6e2552c",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 3923.4501342773438,
    "y": 2671.1166381835938,
    "z": "f8944603.71553",
    "wires": [
      [
        "b84e7511.3844a8"
      ]
    ]
  },
  {
    "id": "b84e7511.3844a8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4129.450134277344,
    "y": 2671.1166381835938,
    "z": "f8944603.71553",
    "wires": [
      [
        "ac19c527.29aaf8"
      ]
    ]
  },
  {
    "id": "1a7add8d.af97ca",
    "type": "get-resource",
    "name": "get-resource src pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainC.pnf-name\"\n        pfx='tmp.aai.destination-secondary-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
    "comments": "",
    "outputs": 1,
    "x": 3892.450164794922,
    "y": 2370.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "c6c93f82.1aa228",
        "f4da497f.0275c8",
        "6e9758a5.eabec"
      ]
    ]
  },
  {
    "id": "c6c93f82.1aa228",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4087.9502868652344,
    "y": 2322.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "a1f1dc1c.4be4e8"
      ]
    ]
  },
  {
    "id": "f4da497f.0275c8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4079.9502868652344,
    "y": 2377.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "dd2530b3.0ce388"
      ]
    ]
  },
  {
    "id": "6e9758a5.eabec",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4084.9502868652344,
    "y": 2434.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "35cb1b46.9ab3ac"
      ]
    ]
  },
  {
    "id": "35cb1b46.9ab3ac",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4236.950286865234,
    "y": 2435.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "a1f1dc1c.4be4e8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4232.332611083984,
    "y": 2319.7724609375,
    "z": "f8944603.71553",
    "wires": [
      [
        "807e8aa5.b5f288"
      ]
    ]
  },
  {
    "id": "be1fed24.75522",
    "type": "set",
    "name": "set SECONDARY-ROOT stuff",
    "xml": "<set>\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-long' value=\"`$param-prefix-domainC-pnfName[0] + '-' +\n                                                   $param-prefix-domainC-pnfName[1] + '-' +\n                                                   $param-prefix-domainC-pnfName[2] + '-' +\n                                                   $param-prefix-domainC-pnfName[3] + '-' +\n                                                   $param-prefix-domainC-pnfName[4] + '-' +\n                                                   $param-prefix-domainC-pnfName[5] + '-' +\n                                                   $param-prefix-domainC-pnfName[6] + '-' +\n                                                   $param-prefix-domainC-pnfName[7] + '-' +\n                                                   $param-prefix-domainC-pnfName[8]`\" />\n\n<!--<parameter name='tmp.ROOT.pnf-name-short' value=\"`$param-prefix-domainB-pnfName[8]`\" />-->\n<parameter name='tmp.SECONDARY-ROOT.pnf-name-short' value=\"`$tmp.dst-secondary.pnf-name`\" />\n\n<parameter name='tmp.SECONDARY-ROOT.uni-p-interface-long' value=\"`$tmp.aai.network-route-C.next-hop + '-' + $tmp.aai.network-route-C.logical-interface-id`\" />\n<parameter name='tmp.SECONDARY-ROOT.uni-tp-id' value=\"`$tmp.dst-secondary.ltpId`\" />\n",
    "comments": "",
    "x": 3308.116668701172,
    "y": 2659.116668701172,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "89002347.f12fb8",
    "type": "comment",
    "name": "NOT NEEDED ANYMORE?",
    "info": "",
    "comments": "",
    "x": 3983.1166381835938,
    "y": 2623.1166381835938,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "1f2077c9.d2f12",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 4356.450164794922,
    "y": 2586.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "b1fce547.cdefa8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4360.450164794922,
    "y": 2500.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "9ddcbad2.3cd968",
        "a4909c74.16b3c"
      ]
    ]
  },
  {
    "id": "ac19c527.29aaf8",
    "type": "outcome",
    "name": "tunnel-termination-point",
    "xml": "<outcome value='tunnel-termination-point'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4346.735778808594,
    "y": 2669.9384155273438,
    "z": "f8944603.71553",
    "wires": [
      [
        "aecc45b1.07799"
      ]
    ]
  },
  {
    "id": "dd2530b3.0ce388",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 4247.950286865234,
    "y": 2380.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "9ddcbad2.3cd968",
    "type": "set",
    "name": "set ltpId",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.ltpId' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n",
    "comments": "",
    "x": 4530.450164794922,
    "y": 2461.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "a4909c74.16b3c",
    "type": "set",
    "name": "set pnf-name",
    "xml": "<set>\n<parameter name='tmp.dst-secondary.pnf-name' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n",
    "comments": "",
    "x": 4531.450164794922,
    "y": 2566.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "90f369e0.1f5ea",
    "type": "comment",
    "name": "TODO: FIXME",
    "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
    "comments": "",
    "x": 4526.450164794922,
    "y": 2515.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "aecc45b1.07799",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4553.567321777344,
    "y": 2659.4570922851562,
    "z": "f8944603.71553",
    "wires": [
      [
        "d7d46b6.f157298",
        "a76ccf28.3b019",
        "6d38c2ba.e73f94"
      ]
    ]
  },
  {
    "id": "d7d46b6.f157298",
    "type": "set",
    "name": "set destination ttp-id",
    "xml": "<set>\n<parameter name='tmp.destination-secondary.ttp-id' value=\"`$tmp.aai.network-route-C.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 4768.567321777344,
    "y": 2621.4570922851562,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "a76ccf28.3b019",
    "type": "get-resource",
    "name": "get-resource src TTP",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination-secondary.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-secondary-ttp' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4765.567321777344,
    "y": 2660.4570922851562,
    "z": "f8944603.71553",
    "wires": [
      [
        "af66a72d.a68048"
      ]
    ]
  },
  {
    "id": "6d38c2ba.e73f94",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 4721.067321777344,
    "y": 2702.4570922851562,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "56aae750.4bf18",
    "type": "outcome",
    "name": "esr-thirdparty-sdnc",
    "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4814.450164794922,
    "y": 2338.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "df2c6ab5.f8c7a"
      ]
    ]
  },
  {
    "id": "807e8aa5.b5f288",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 4416.450164794922,
    "y": 2334.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "83815f42.db62e8"
      ]
    ]
  },
  {
    "id": "83815f42.db62e8",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4611.450164794922,
    "y": 2334.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "56aae750.4bf18",
        "ace3955f.b78118"
      ]
    ]
  },
  {
    "id": "ace3955f.b78118",
    "type": "outcome",
    "name": "network-resource",
    "xml": "<outcome value='network-resource'>",
    "comments": "",
    "outputs": 1,
    "x": 4816.450164794922,
    "y": 2411.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "86fe5017.1c8158"
      ]
    ]
  },
  {
    "id": "af66a72d.a68048",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4946.067321777344,
    "y": 2659.4570922851562,
    "z": "f8944603.71553",
    "wires": [
      [
        "73b98dcb.d53e2c"
      ]
    ]
  },
  {
    "id": "73b98dcb.d53e2c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 5104.067321777344,
    "y": 2659.4570922851562,
    "z": "f8944603.71553",
    "wires": [
      [
        "35f64a50.ea71a6"
      ]
    ]
  },
  {
    "id": "35f64a50.ea71a6",
    "type": "set",
    "name": "set destination tunnel tp ip",
    "xml": "<set>\n<parameter name='destination-secondary.tunnel-tp-id' value=\"`$tmp.aai.destination-secondary-ttp.tunnel-tp-id`\" />\n",
    "comments": "",
    "x": 5311.067321777344,
    "y": 2659.4570922851562,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "df2c6ab5.f8c7a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4991.450164794922,
    "y": 2330.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "b41095a1.9dd71",
        "c294b821.4082d"
      ]
    ]
  },
  {
    "id": "c294b821.4082d",
    "type": "execute",
    "name": "get esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainC.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainC.esr-thirdparty-sdnc' local-only='false' >",
    "comments": "",
    "outputs": 1,
    "x": 5199.450164794922,
    "y": 2337.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "cbd53666.7a192",
        "70f8105c.8c53c8",
        "d07f4c5c.e57d28"
      ]
    ]
  },
  {
    "id": "86fe5017.1c8158",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 4993.450164794922,
    "y": 2403.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "29792fa0.312a5"
      ]
    ]
  },
  {
    "id": "b41095a1.9dd71",
    "type": "set",
    "name": "set esr-thirdparty-sdnc domainC id",
    "xml": "<set>\n<parameter name='tmp.domainC.esr-thirdparty-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5229.450164794922,
    "y": 2285.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "29792fa0.312a5",
    "type": "set",
    "name": "set domainC ethernet layer network-id",
    "xml": "<set>\n<parameter name='tmp.domainC.eth-network-id' value=\"`$tmp.aai.destination-secondary-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 5228.450164794922,
    "y": 2527.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "cbd53666.7a192",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5409.450164794922,
    "y": 2328.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "12fe1a85.5f5265"
      ]
    ]
  },
  {
    "id": "70f8105c.8c53c8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5401.450164794922,
    "y": 2383.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "720591da.7ff908"
      ]
    ]
  },
  {
    "id": "d07f4c5c.e57d28",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5406.450164794922,
    "y": 2440.1167907714844,
    "z": "f8944603.71553",
    "wires": [
      [
        "50fd00db.804e78"
      ]
    ]
  },
  {
    "id": "50fd00db.804e78",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5558.450164794922,
    "y": 2441.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "720591da.7ff908",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 5569.450164794922,
    "y": 2386.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "12fe1a85.5f5265",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 5553.832489013672,
    "y": 2325.7724609375,
    "z": "f8944603.71553",
    "wires": [
      [
        "d4fbd78f.a8b058"
      ]
    ]
  },
  {
    "id": "d4fbd78f.a8b058",
    "type": "set",
    "name": "set controller domainC data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainC.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
    "comments": "",
    "x": 5768.450164794922,
    "y": 2322.1167907714844,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "3ab03c8.bdf8544",
    "type": "switchNode",
    "name": "switch secondary empty?",
    "xml": "<switch test='`length($network-route-three) == 0`'>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3282.116668701172,
    "y": 795.1166687011719,
    "z": "f8944603.71553",
    "wires": [
      [
        "7806cbe6.64ea14",
        "91bd4861.b38048"
      ]
    ]
  },
  {
    "id": "7806cbe6.64ea14",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3404.11669921875,
    "y": 740.11669921875,
    "z": "f8944603.71553",
    "wires": [
      [
        "4d1b7d4.397bf04"
      ]
    ]
  },
  {
    "id": "91bd4861.b38048",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3391.11669921875,
    "y": 849.11669921875,
    "z": "f8944603.71553",
    "wires": [
      [
        "a8d8fc87.45b9a"
      ]
    ]
  },
  {
    "id": "4d1b7d4.397bf04",
    "type": "set",
    "name": "set hasSecondary false",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n\n\n",
    "comments": "",
    "x": 3619.116668701172,
    "y": 577.1166687011719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "a8d8fc87.45b9a",
    "type": "set",
    "name": "set hasSecondary true",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"true\" />\n\n\n",
    "comments": "",
    "x": 3615.116668701172,
    "y": 621.1166687011719,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "87dcb71b.a618f",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3812.11669921875,
    "y": 3521.11669921875,
    "z": "f8944603.71553",
    "wires": [
      [
        "9a1c6f33.80c0c"
      ]
    ]
  },
  {
    "id": "9a1c6f33.80c0c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4003.11669921875,
    "y": 3525.11669921875,
    "z": "f8944603.71553",
    "wires": [
      [
        "8de09ee3.1f82b8"
      ]
    ]
  },
  {
    "id": "8de09ee3.1f82b8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4130.11669921875,
    "y": 3524.11669921875,
    "z": "f8944603.71553",
    "wires": [
      [
        "cc59ae49.952b8",
        "3b72359b.f45e6a"
      ]
    ]
  },
  {
    "id": "3b72359b.f45e6a",
    "type": "save",
    "name": "save SECONDARY-ROOT UNI in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='tp-id' value='`$tmp.SECONDARY-ROOT.uni-tp-id`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='type' value='secondary-root' />\n<parameter name='data-source' value='`$gfp`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4352.11669921875,
    "y": 3413.11669921875,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "d566dc7.835f6a",
    "type": "set",
    "name": "unset secondary related variables",
    "xml": "<set>\n<parameter name='hasSecondary' value=\"false\" />\n<parameter name='network-route-three' value=\"\" />\n<parameter name='tmp.aai.network-route-three.' value=\"\" />\n<parameter name='tmp.aai.network-route-C.' value=\"\" />\n",
    "comments": "",
    "x": 3357,
    "y": 453,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "cc59ae49.952b8",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4348,
    "y": 3472,
    "z": "f8944603.71553",
    "wires": [
      [
        "e0cf290a.3bb57",
        "91bee9e5.bd12c8"
      ]
    ]
  },
  {
    "id": "e0cf290a.3bb57",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4558,
    "y": 3449,
    "z": "f8944603.71553",
    "wires": [
      [
        "2e6c4f7b.89f37"
      ]
    ]
  },
  {
    "id": "2e6c4f7b.89f37",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4684,
    "y": 3449,
    "z": "f8944603.71553",
    "wires": [
      [
        "e80cf077.13626"
      ]
    ]
  },
  {
    "id": "eb956f81.674a8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4689,
    "y": 3498,
    "z": "f8944603.71553",
    "wires": [
      [
        "538ba095.13ecb8",
        "a894e133.03a62",
        "bbac82b0.611ad8",
        "5d08bff9.d57b18"
      ]
    ]
  },
  {
    "id": "91bee9e5.bd12c8",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4563,
    "y": 3498,
    "z": "f8944603.71553",
    "wires": [
      [
        "eb956f81.674a8"
      ]
    ]
  },
  {
    "id": "e80cf077.13626",
    "type": "save",
    "name": "save connectivityB relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5012,
    "y": 3446,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "538ba095.13ecb8",
    "type": "execute",
    "name": "execute UUID generator for connectivity domainC",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainC-uuid\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 4965,
    "y": 3537,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "a894e133.03a62",
    "type": "save",
    "name": "save connectivity resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' -->\n<!--      key='connectivity.connectivity-id = $tmp.ROOT.uni-p-interface-long'>-->\n<!--<parameter name='connectivity-id' value='`$tmp.ROOT.uni-p-interface-long`' />-->\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainC[$param-prefix-domainC_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-C.logical-interface-id`' />\n<parameter name='color-aware' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='vpn-type' value='secondary-root' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
    "comments": "",
    "outputs": 1,
    "x": 4913,
    "y": 3579,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "bbac82b0.611ad8",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5042,
    "y": 3621,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "7be6dab9.621efc",
    "type": "comment",
    "name": "Create SECONDARY-ROOT connectivity",
    "info": "",
    "comments": "",
    "x": 4928,
    "y": 3494,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "5d08bff9.d57b18",
    "type": "save",
    "name": "save connectivityC relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5020,
    "y": 3669,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "748bc1ca.c78678",
    "type": "comment",
    "name": "Create SECONDARY-ROOT UNI",
    "info": "",
    "comments": "",
    "x": 3840,
    "y": 3472,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "286f0ec8.852352",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3815,
    "y": 4143,
    "z": "f8944603.71553",
    "wires": [
      [
        "d7543b1f.0223a"
      ]
    ]
  },
  {
    "id": "d7543b1f.0223a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4007,
    "y": 4138,
    "z": "f8944603.71553",
    "wires": [
      [
        "8aacb5a.7bd82c8"
      ]
    ]
  },
  {
    "id": "8aacb5a.7bd82c8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4136,
    "y": 4138,
    "z": "f8944603.71553",
    "wires": [
      [
        "9ecf386c.da77f"
      ]
    ]
  },
  {
    "id": "9ecf386c.da77f",
    "type": "save",
    "name": "save middle-man-conn relationship to UNI-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"uni\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/unis/uni/' + $tmp.SECONDARY-ROOT.uni-p-interface-long`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"uni.id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.SECONDARY-ROOT.uni-p-interface-long`\" />",
    "comments": "",
    "outputs": 1,
    "x": 4468,
    "y": 4136,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "2bbca6cc.0ec622",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3803,
    "y": 4367,
    "z": "f8944603.71553",
    "wires": [
      [
        "85f62fba.be3af8"
      ]
    ]
  },
  {
    "id": "85f62fba.be3af8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3983,
    "y": 4366,
    "z": "f8944603.71553",
    "wires": [
      [
        "f0b10235.e7e788"
      ]
    ]
  },
  {
    "id": "f0b10235.e7e788",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4112,
    "y": 4366,
    "z": "f8944603.71553",
    "wires": [
      [
        "ccf3ecf0.96a2b"
      ]
    ]
  },
  {
    "id": "ccf3ecf0.96a2b",
    "type": "switchNode",
    "name": "switch 2-ROOTS in same domain?",
    "xml": "<!-- This is to check the provider-id of ROOt and SECONDARY-ROOT-->\n<switch test='`$param-prefix-domainB[$param-prefix-domainB_length -9] == $param-prefix-domainC[$param-prefix-domainC_length -9]`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4329.88330078125,
    "y": 4364.88330078125,
    "z": "f8944603.71553",
    "wires": [
      [
        "cabe89a7.9d69e"
      ]
    ]
  },
  {
    "id": "cabe89a7.9d69e",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4544.88330078125,
    "y": 4364.88330078125,
    "z": "f8944603.71553",
    "wires": [
      [
        "760290ae.a21e"
      ]
    ]
  },
  {
    "id": "760290ae.a21e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 4676.88330078125,
    "y": 4364.88330078125,
    "z": "f8944603.71553",
    "wires": [
      [
        "d0b7affb.c1db2"
      ]
    ]
  },
  {
    "id": "d0b7affb.c1db2",
    "type": "save",
    "name": "save middle-man-conn relationship to connectivity-SECONDARY-ROOT, in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity:relationship-list' \n      key='connectivity.connectivity-id = $middle-man-conn.connectivity-id' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainC-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainC-uuid`\" />",
    "comments": "",
    "outputs": 1,
    "x": 5041,
    "y": 4364,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "c32fbe2a.4ce3f",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3478,
    "y": 4622,
    "z": "f8944603.71553",
    "wires": [
      [
        "f2b98ff2.538df8"
      ]
    ]
  },
  {
    "id": "f2b98ff2.538df8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3658,
    "y": 4621,
    "z": "f8944603.71553",
    "wires": [
      [
        "44866831.1c971"
      ]
    ]
  },
  {
    "id": "44866831.1c971",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3787,
    "y": 4621,
    "z": "f8944603.71553",
    "wires": [
      [
        "531a8e91.6c36e8"
      ]
    ]
  },
  {
    "id": "6aa2083f.c88dc",
    "type": "comment",
    "name": "Update SECONDARY-ROOT UNI's bw",
    "info": "",
    "comments": "",
    "x": 3523,
    "y": 4680,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "5db121cf.f62b2",
    "type": "save",
    "name": "update S-ROOT UNI in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='uni' \n      key='uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long'>\n<parameter name='id' value='`$tmp.SECONDARY-ROOT.uni-p-interface-long`' />\n<parameter name='data-source' value='`$tmp.newbw`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 4089,
    "y": 4779,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "531a8e91.6c36e8",
    "type": "save",
    "name": "get S-root uni from aai",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"uni\"\n\t    key=\"uni.id = $tmp.SECONDARY-ROOT.uni-p-interface-long\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.secondaryrootuni\" >\n",
    "comments": "",
    "outputs": 1,
    "x": 3553,
    "y": 4713,
    "z": "f8944603.71553",
    "wires": [
      [
        "5ffa37b0.a29d98",
        "2e65d2b6.ac2056",
        "b5462b77.92e368"
      ]
    ]
  },
  {
    "id": "2e65d2b6.ac2056",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3734.490966796875,
    "y": 4690.57421875,
    "z": "f8944603.71553",
    "wires": [
      [
        "5fe821cf.842878"
      ]
    ]
  },
  {
    "id": "b5462b77.92e368",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3723,
    "y": 4730,
    "z": "f8944603.71553",
    "wires": [
      [
        "6ea658d1.17df7"
      ]
    ]
  },
  {
    "id": "5fe821cf.842878",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
    "comments": "",
    "x": 3894.0625,
    "y": 4688.85986328125,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "6ea658d1.17df7",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
    "comments": "",
    "x": 3884,
    "y": 4731,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "4792a0c5.aeb76",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 3886,
    "y": 4775,
    "z": "f8944603.71553",
    "wires": [
      [
        "78930237.780be4",
        "5db121cf.f62b2"
      ]
    ]
  },
  {
    "id": "5ffa37b0.a29d98",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3728,
    "y": 4767,
    "z": "f8944603.71553",
    "wires": [
      [
        "4792a0c5.aeb76"
      ]
    ]
  },
  {
    "id": "78930237.780be4",
    "type": "set",
    "name": "set new bw",
    "xml": "<set>\n<parameter name='tmp.newbw' value='`$tmp.aai.secondaryrootuni.data-source + $gfp`' />\n",
    "comments": "",
    "x": 4047,
    "y": 4707,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "74408c25.ef5164",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4413,
    "y": 5275,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "d1a4e2c9.15ac9",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4568,
    "y": 5316,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "748b1299.fd2144",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5011,
    "y": 5364,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "24040f90.d6a4",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4384,
    "y": 5374,
    "z": "f8944603.71553",
    "wires": [
      [
        "f8d36d32.9ac71",
        "9cd0c03a.a311a"
      ]
    ]
  },
  {
    "id": "f8d36d32.9ac71",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4620,
    "y": 5358,
    "z": "f8944603.71553",
    "wires": [
      [
        "d753b8f.12e03c8"
      ]
    ]
  },
  {
    "id": "d753b8f.12e03c8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 4764,
    "y": 5360,
    "z": "f8944603.71553",
    "wires": [
      [
        "748b1299.fd2144",
        "9643625b.90e238",
        "c3f4caa.3b73cb8"
      ]
    ]
  },
  {
    "id": "9cd0c03a.a311a",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 4619,
    "y": 5406,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "9643625b.90e238",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5132,
    "y": 5411,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "c3f4caa.3b73cb8",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5013.6669921875,
    "y": 5496.08349609375,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "433011d7.349ae8",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5014.8837890625,
    "y": 5454.88330078125,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "e2691c6e.49966",
    "type": "set",
    "name": "set prop.connectivity-domainC-uuid",
    "xml": "<set>\n<!--<parameter name='prop.connectivity-domainB-uuid' value=\"`$tmp.ROOT.uni-p-interface-long`\" />-->\n<!--OR-->\n<parameter name='prop.connectivity-domainC-uuid' value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n",
    "comments": "",
    "x": 5546,
    "y": 5843,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "7492e58a.da53dc",
    "type": "switchNode",
    "name": "switch found-secondary-root-connectivity",
    "xml": "\n<switch test=\"`$found-secondary-root-connectivity`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 4919,
    "y": 5853,
    "z": "f8944603.71553",
    "wires": [
      [
        "7d7daf2e.06b168",
        "1dddd00a.b82ef8"
      ]
    ]
  },
  {
    "id": "7d7daf2e.06b168",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5152,
    "y": 5847,
    "z": "f8944603.71553",
    "wires": [
      [
        "51e74c47.c309bc"
      ]
    ]
  },
  {
    "id": "51e74c47.c309bc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic='true'>",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 5299,
    "y": 5855,
    "z": "f8944603.71553",
    "wires": [
      [
        "e2691c6e.49966",
        "f2071b27.722968",
        "ce8449a1.6c0af8"
      ]
    ]
  },
  {
    "id": "1dddd00a.b82ef8",
    "type": "outcomeFalse",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 5153,
    "y": 5897,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "f2071b27.722968",
    "type": "save",
    "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$tmp.aai.SECONDARY-ROOT.connectivity.connectivity-id`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
    "comments": "",
    "outputs": 1,
    "x": 5667,
    "y": 5890,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "ce8449a1.6c0af8",
    "type": "save",
    "name": "update connectivity resource in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainC-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainC-uuid`' />\n<parameter name='operational-status' value='Modified' />\n",
    "comments": "",
    "outputs": 1,
    "x": 5548.6669921875,
    "y": 5975.08349609375,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "6cf05b70.9ecfd4",
    "type": "comment",
    "name": "Update connectivity status to modified",
    "info": "",
    "comments": "",
    "x": 5549.8837890625,
    "y": 5933.88330078125,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "b08c7802.5d204",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-helper-find-SECONDARY-ROOT-conn' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 5080,
    "y": 5803,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "e97fbec2.db6de",
    "type": "comment",
    "name": "populate connectivity-C variable in the context map",
    "info": "",
    "comments": "",
    "x": 4914,
    "y": 5764,
    "z": "f8944603.71553",
    "wires": []
  },
  {
    "id": "651a17c0.63b678",
    "type": "switchNode",
    "name": "switch $hasSecondary",
    "xml": "<switch test='`$hasSecondary`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3241.25,
    "y": 6373.25,
    "z": "f8944603.71553",
    "wires": [
      [
        "74077cd7.2a1a94",
        "f3174188.6084b"
      ]
    ]
  },
  {
    "id": "74077cd7.2a1a94",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3432.25,
    "y": 6377.25,
    "z": "f8944603.71553",
    "wires": [
      [
        "f2351c78.3536d"
      ]
    ]
  },
  {
    "id": "f2351c78.3536d",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3559.25,
    "y": 6376.25,
    "z": "f8944603.71553",
    "wires": [
      [
        "9d7f2116.baeda"
      ]
    ]
  },
  {
    "id": "f3174188.6084b",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3428.25,
    "y": 6447.25,
    "z": "f8944603.71553",
    "wires": [
      [
        "84ee4e22.34786"
      ]
    ]
  },
  {
    "id": "bf4fd4bd.d3efb",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:cll-vnf-topology-operation-cll-F1-activate-w-Protection",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='cll-vnf-topology-operation-cll-F1-activate-w-Protection' mode='sync' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 3977.75,
    "y": 6446.33349609375,
    "z": "f8944603.71553",
    "wires": [
      []
    ]
  },
  {
    "id": "84ee4e22.34786",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 3561.75,
    "y": 6449.33349609375,
    "z": "f8944603.71553",
    "wires": [
      [
        "bf4fd4bd.d3efb"
      ]
    ]
  }
]