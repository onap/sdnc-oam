[
    {
        "id": "1592c321.65d18d",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 288.4998779296875,
        "y": 20,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "4a11b3e8.84859c"
            ]
        ]
    },
    {
        "id": "4a11b3e8.84859c",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 182.49988174438477,
        "y": 92.0000171661377,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "a835fb36.b5f568"
            ]
        ]
    },
    {
        "id": "a835fb36.b5f568",
        "type": "method",
        "name": "sotn-attachment-topology-operation-activate",
        "xml": "<method rpc='sotn-attachment-topology-operation-activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 170.5,
        "y": 180,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "9bb4e67f.cf26d8"
            ]
        ]
    },
    {
        "id": "9bb4e67f.cf26d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 186.5,
        "y": 735.0002446174622,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "f4efd3fb.e2f86",
                "138c574d.6dee59",
                "3e8781be.34f35e",
                "8508262.99888d8",
                "b5bc88d0.47fae8",
                "b70b088.42361f8",
                "82610b40.52c0f8",
                "724aaddf.f5bc64",
                "5f93bf13.27d92",
                "d62ecc6b.96c9a",
                "2096aa5d.6673a6",
                "29934780.d10e88",
                "119f4083.39b30f",
                "cd594c8e.5dee4",
                "b813f59a.5b8678",
                "49ffd6c8.7e0888",
                "7cb750cf.10f7f",
                "aa342b28.7af828",
                "292f49ca.a0fbb6",
                "90bcf240.f06fb"
            ]
        ]
    },
    {
        "id": "f4efd3fb.e2f86",
        "type": "set",
        "name": "set tmp.ar.allotted-resource-id,etc",
        "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
        "comments": "",
        "x": 583.4934387207031,
        "y": 133.9934868812561,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "a64c555d.938478",
        "type": "comment",
        "name": "set tmp ar-id to fetch resource from MDSAL",
        "info": "",
        "comments": "",
        "x": 597.9536285400391,
        "y": 87.02528285980225,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "138c574d.6dee59",
        "type": "set",
        "name": "set tmp.ar.self-link",
        "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:connection-attachment-allotted-resources/connection-attachment-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/connection-attachment-topology/'` \" />\n\n",
        "comments": "",
        "x": 537.4933776855469,
        "y": 226.99349212646484,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "b5bc88d0.47fae8",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 543.7552680969238,
        "y": 314.6602210998535,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "3e8781be.34f35e",
        "type": "execute",
        "name": "generate allotted-resource tmp.ar-url",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 590.7553253173828,
        "y": 402.6602249145508,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "fb01c109.e361",
        "type": "comment",
        "name": "GET connection-attachment-allotted-resource from mdsal",
        "info": "",
        "comments": "",
        "x": 622.8081359863281,
        "y": 522.5386590957642,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "649570b2.8161a",
        "type": "comment",
        "name": "Used for setting output to API Handler",
        "info": "",
        "comments": "",
        "x": 576.9932861328125,
        "y": 182.993501663208,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "eb2bb91a.23f1c8",
        "type": "comment",
        "name": "Obtain different URL, template location etc",
        "info": "For saving resource information to MDSAL & for AAI",
        "comments": "",
        "x": 594.9932518005371,
        "y": 268.8823823928833,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "e616f54a.1a1338",
        "type": "comment",
        "name": "Used to Get AR by id to MDSAL, same as self-link",
        "info": "",
        "comments": "",
        "x": 620.9932708740234,
        "y": 355.8823413848877,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "6d235d2d.3f5b34",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1097.166669845581,
        "y": 550.9999847412109,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "438ef585.0258ec"
            ]
        ]
    },
    {
        "id": "438ef585.0258ec",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1241.166748046875,
        "y": 508.4999027252197,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "d7798047.9f7ea"
            ]
        ]
    },
    {
        "id": "d7798047.9f7ea",
        "type": "switchNode",
        "name": "switch cr length",
        "xml": "<switch test='`$mdsal-ar.connection-attachment-allotted-resource_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1410.0241718292236,
        "y": 506.11907386779785,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "25f8747f.615cdc",
                "7b484968.c5c3c8"
            ]
        ]
    },
    {
        "id": "25f8747f.615cdc",
        "type": "other",
        "name": "outcome 1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1565.357307434082,
        "y": 478.1189889907837,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "2381fa57.56d296"
            ]
        ]
    },
    {
        "id": "2381fa57.56d296",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic='true'>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1723.8811111450195,
        "y": 476.02383613586426,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "72632243.35b7ac",
                "caeee0d.4911a2",
                "85382ee7.a7e67"
            ]
        ]
    },
    {
        "id": "1eb71a3a.b0ec76",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Connection attachment resource not exist\" />\n    \n",
        "comments": "",
        "x": 1664.01904296875,
        "y": 583.0660705566406,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "2ede014.ee6b2fe",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1089.0184726715088,
        "y": 586.0660696029663,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "e9ad5a05.d07ec8"
            ]
        ]
    },
    {
        "id": "e9ad5a05.d07ec8",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1269.0184230804443,
        "y": 586.7326202392578,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "1eb71a3a.b0ec76"
            ]
        ]
    },
    {
        "id": "7b484968.c5c3c8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1556.6853103637695,
        "y": 537.3993635177612,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "1eb71a3a.b0ec76"
            ]
        ]
    },
    {
        "id": "72632243.35b7ac",
        "type": "set",
        "name": "set connection-attachment-ar from get",
        "xml": "<set>\n<parameter name='connection-attachment-ar.' value='$mdsal-ar.connection-attachment-allotted-resource[0].' />\n",
        "comments": "",
        "x": 1970.944564819336,
        "y": 449.00008821487427,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "85382ee7.a7e67",
        "type": "set",
        "name": "set oper-status",
        "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-ar.allotted-resource-status.rpc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
        "comments": "",
        "x": 1904.944595336914,
        "y": 522.4285907745361,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "caeee0d.4911a2",
        "type": "switchNode",
        "name": "switch order-status",
        "xml": "<switch test='`$connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1914.9443740844727,
        "y": 488.0000247955322,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "3c4fa6a4.494c4a",
                "7ce18851.c47778",
                "4b972638.5b71c8"
            ]
        ]
    },
    {
        "id": "3c4fa6a4.494c4a",
        "type": "outcome",
        "name": "outcome Created",
        "xml": "<outcome value='Created'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2150.5444564819336,
        "y": 482.0000557899475,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "c338e19d.9ba2f"
            ]
        ]
    },
    {
        "id": "4b972638.5b71c8",
        "type": "outcome",
        "name": "outcome Other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2144.2589569091797,
        "y": 562.4286904335022,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "abaf309c.92117"
            ]
        ]
    },
    {
        "id": "c338e19d.9ba2f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2309.0151290893555,
        "y": 482.37571144104004,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "abaf309c.92117",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" \n    value=\"`'Existing connection-attachment-allotted-resource with order status of ' + $connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status + '.'`\" />\n",
        "comments": "",
        "x": 2320.1667709350586,
        "y": 561.0000896453857,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "f8271a2a.9ac4b8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:sotn-get-saved-ar-param",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sotn-get-saved-ar-param' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 807.8029289245605,
        "y": 633.4936046600342,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "b70b088.42361f8",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 501.8090286254883,
        "y": 634.4999752044678,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "f8271a2a.9ac4b8"
            ]
        ]
    },
    {
        "id": "624b5e1.6ea06a",
        "type": "comment",
        "name": "GET parent-service-data from mdsal to check existence of other End point",
        "info": "",
        "comments": "",
        "x": 675.000244140625,
        "y": 668.5317525863647,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "c573dc4c.049bc",
        "type": "for",
        "name": "for pidx..mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[]",
        "xml": "<for index='pidx' start='0' end='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1580.685073852539,
        "y": 832.0042300224304,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "742c29ae.6e67d8"
            ]
        ]
    },
    {
        "id": "8508262.99888d8",
        "type": "switchNode",
        "name": "switch mdsal-psd.service-data.provided-allotted-resources_length",
        "xml": "<switch test='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 664.6840972900391,
        "y": 939.7182664871216,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "10adee9e.157311",
                "6a78a440.6f22fc",
                "70cdf584.f7b39c"
            ]
        ]
    },
    {
        "id": "10adee9e.157311",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 992.8271179199219,
        "y": 1012.5755405426025,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "27d0cdd0.613e42"
            ]
        ]
    },
    {
        "id": "a1b096d8.7a77a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1176.9543800354004,
        "y": 871.7015495300293,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "c573dc4c.049bc",
                "5886912e.0496e"
            ]
        ]
    },
    {
        "id": "742c29ae.6e67d8",
        "type": "switchNode",
        "name": "switch allotted-resource-id",
        "xml": "<switch test=\"`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$pidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2020.796401977539,
        "y": 829.0040321350098,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "71bfc0ef.231be",
                "d62d7351.88822"
            ]
        ]
    },
    {
        "id": "71bfc0ef.231be",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2193.606616973877,
        "y": 800.4686470031738,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "ef1a0ac0.854a98"
            ]
        ]
    },
    {
        "id": "702e631.6d7c19c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2342.367088317871,
        "y": 857.3257341384888,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "c9df318e.48972"
            ]
        ]
    },
    {
        "id": "c9df318e.48972",
        "type": "set",
        "name": "set tmp.pidx and ptx.consumed-ar",
        "xml": "<set>\n<parameter name='tmp.pidx' value='`$pidx`' />\n<parameter name='tmp.provided-ar.' value='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$pidx].`' />\n<parameter name='tmp.found-in-ar' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
        "comments": "",
        "x": 2577.2245140075684,
        "y": 855.8972663879395,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "ce48f89.5e11b08",
        "type": "comment",
        "name": "Check existence of other AR in parent service data",
        "info": "Check if other allotted resource is available.",
        "comments": "",
        "x": 597.9624137878418,
        "y": 833.8929615020752,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "6a78a440.6f22fc",
        "type": "other",
        "name": "outcome 1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1007.4795875549316,
        "y": 951.6772241592407,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "2c49e35e.1fc8bc"
            ]
        ]
    },
    {
        "id": "27d0cdd0.613e42",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: End points not available\" />\n    \n",
        "comments": "",
        "x": 1152.4794654846191,
        "y": 1011.67746925354,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "70cdf584.f7b39c",
        "type": "other",
        "name": "outcome 2",
        "xml": "<outcome value='2'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1002.4794006347656,
        "y": 872.6772499084473,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "a1b096d8.7a77a8"
            ]
        ]
    },
    {
        "id": "ef1a0ac0.854a98",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2351.590831756592,
        "y": 799.6773900985718,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "d62d7351.88822",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2200.590473175049,
        "y": 856.6772499084473,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "702e631.6d7c19c"
            ]
        ]
    },
    {
        "id": "5886912e.0496e",
        "type": "switchNode",
        "name": "switch tmp.found-in-ar",
        "xml": "<switch test='`$tmp.found-in-ar`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1389.479377746582,
        "y": 925.4550676345825,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "a220db43.f5eb78"
            ]
        ]
    },
    {
        "id": "a220db43.f5eb78",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1560.4794120788574,
        "y": 926.5662889480591,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "98afd88.67a1a28"
            ]
        ]
    },
    {
        "id": "98afd88.67a1a28",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1709.479507446289,
        "y": 926.5662879943848,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "5db9f65b.6ce138",
                "10770dde.9e85f2"
            ]
        ]
    },
    {
        "id": "590d4c4.a9730b4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2455.5973320007324,
        "y": 942.7951421737671,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "6dd3049a.75459c"
            ]
        ]
    },
    {
        "id": "90f110cb.f207a",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2447.44913482666,
        "y": 977.8612270355225,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "a9caa93.547d658"
            ]
        ]
    },
    {
        "id": "3cbfbe65.60d722",
        "type": "switchNode",
        "name": "switch mdsal-psd.service-data.networks_length",
        "xml": "<switch test='`$mdsal-psd.service-data.networks.network_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1452.8128814697266,
        "y": 1026.899908065796,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "1e3fbb97.b5d614",
                "94cba83a.49b418"
            ]
        ]
    },
    {
        "id": "94cba83a.49b418",
        "type": "other",
        "name": "outcome 1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1716.812728881836,
        "y": 1006.7886543273926,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "bb7d5c2c.d8024"
            ]
        ]
    },
    {
        "id": "1e3fbb97.b5d614",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1706.8127899169922,
        "y": 1054.788625717163,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "4c45c7f8.f08e18"
            ]
        ]
    },
    {
        "id": "4c45c7f8.f08e18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Incorrect state found more then 1 network\" />\n    \n",
        "comments": "",
        "x": 1845.4651336669922,
        "y": 1056.890386581421,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "47119356.6ef55c",
        "type": "set",
        "name": "set tmp.network.",
        "xml": "<set>\n<parameter name='tmp.network.' value='`$mdsal-psd.service-data.networks.network[0].`' />\n\n\n",
        "comments": "",
        "x": 2078.2575874328613,
        "y": 1007.7888240814209,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "2c49e35e.1fc8bc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1174.9238967895508,
        "y": 950.7884912490845,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "3cbfbe65.60d722"
            ]
        ]
    },
    {
        "id": "bb7d5c2c.d8024",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1875.5904998779297,
        "y": 1009.7884883880615,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "47119356.6ef55c",
                "73ec5c3e.c5f794"
            ]
        ]
    },
    {
        "id": "73ec5c3e.c5f794",
        "type": "for",
        "name": "for nidx..tmp.network.network-data.network-request-input.network...[]",
        "xml": "<for index='nidx' start='0' end='`$tmp.network.network-data.network-request-input.network-input-parameters.param_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 2238.5905380249023,
        "y": 1055.7886428833008,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "19c867c3.3abcd8"
            ]
        ]
    },
    {
        "id": "19c867c3.3abcd8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2285.1466064453125,
        "y": 1286.7884521484375,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "2d62bf18.8487f",
                "73ad37e4.6b9e18",
                "33e591b4.f746fe",
                "8f4772f4.3804d",
                "71052d71.b60ea4",
                "e1e2eefb.4977e",
                "ee4a5e59.4052c",
                "f4c35fc9.05d37",
                "cba1cc42.5f531",
                "72041fd4.5dfe5"
            ]
        ]
    },
    {
        "id": "2d62bf18.8487f",
        "type": "switchNode",
        "name": "switch access-node-id",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'access-node-id'`\">",
        "comments": "",
        "outputs": 1,
        "x": 2561.65682220459,
        "y": 1128.7991995811462,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "c659ce67.e570b"
            ]
        ]
    },
    {
        "id": "c659ce67.e570b",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2750.656448364258,
        "y": 1130.7990641593933,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "9d23069.1bd2df8"
            ]
        ]
    },
    {
        "id": "9d23069.1bd2df8",
        "type": "set",
        "name": "set tmp.found-in-network tmp.ep-available",
        "xml": "<set>\n<parameter name='tmp.found-in-network' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
        "comments": "",
        "x": 3003.656623840332,
        "y": 1130.3991103172302,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "73ad37e4.6b9e18",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 2535.6462745666504,
        "y": 1502.7884907722473,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "29934780.d10e88",
        "type": "switchNode",
        "name": "switch tmp.ep-available",
        "xml": "<switch test='`$tmp.ep-available`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 527.8126983642578,
        "y": 1135.232801437378,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "1a85ad2b.130bf3",
                "9df76a91.462648"
            ]
        ]
    },
    {
        "id": "9df76a91.462648",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 746.4794178009033,
        "y": 1184.5661582946777,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "4ac02839.13fe88"
            ]
        ]
    },
    {
        "id": "1a85ad2b.130bf3",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 751.3682193756104,
        "y": 1093.566219329834,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "87eec7e4.4b01d8"
            ]
        ]
    },
    {
        "id": "87eec7e4.4b01d8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 898.3682155609131,
        "y": 1095.4550323486328,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "4ac02839.13fe88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 916.5905055999756,
        "y": 1182.5661163330078,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "ed0f9c9b.650fb",
                "c85dcae.25fb738",
                "19baea04.2b4bc6"
            ]
        ]
    },
    {
        "id": "ed0f9c9b.650fb",
        "type": "switchNode",
        "name": "switch tmp.found-in-ar",
        "xml": "<switch test='`$tmp.found-in-ar`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1142.7015190124512,
        "y": 1149.5661163330078,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "71f3b699.e8e078",
                "6f937246.6ef77c"
            ]
        ]
    },
    {
        "id": "71f3b699.e8e078",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1338.1459655761719,
        "y": 1127.566177368164,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "458232b2.b369fc"
            ]
        ]
    },
    {
        "id": "6f937246.6ef77c",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1335.1458740234375,
        "y": 1175.566162109375,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "f78c85bb.1ce8f8"
            ]
        ]
    },
    {
        "id": "458232b2.b369fc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1525.7016296386719,
        "y": 1124.566177368164,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "3f4c1b3f.6b56c4"
            ]
        ]
    },
    {
        "id": "f78c85bb.1ce8f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1522.7015380859375,
        "y": 1174.566162109375,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "6a54ca9c.c5add4"
            ]
        ]
    },
    {
        "id": "bb9cb01b.16072",
        "type": "comment",
        "name": "GET connection-attachment-ar to store AR data from mdsal",
        "info": "",
        "comments": "",
        "x": 2020.4725914001465,
        "y": 400.50394773483276,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "a1218a5e.0164c8",
        "type": "comment",
        "name": "Set source end point",
        "info": "",
        "comments": "",
        "x": 509.9724884033203,
        "y": 489.2539677619934,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "82610b40.52c0f8",
        "type": "set",
        "name": "set tmp.ar.parent-service-instance-id",
        "xml": "<set>\n<parameter name='tmp.ar.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n\n",
        "comments": "",
        "x": 575.4687042236328,
        "y": 709.0000905990601,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "a7cb0cea.d533b",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 935.4688568115234,
        "y": 780.0000772476196,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "50b90926.59b1c8"
            ]
        ]
    },
    {
        "id": "3fb193b7.956aac",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 927.3206596374512,
        "y": 815.066162109375,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "e0f4c874.0bf2b8"
            ]
        ]
    },
    {
        "id": "e0f4c874.0bf2b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Parent service data not available\" />\n    \n",
        "comments": "",
        "x": 1073.469440460205,
        "y": 814.3335733413696,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "50b90926.59b1c8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1066.468952178955,
        "y": 780.0001382827759,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "a9caa93.547d658",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN provided attachment resource not found\" />\n    \n",
        "comments": "",
        "x": 2597.4691848754883,
        "y": 978.00026512146,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "6dd3049a.75459c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2582.469306945801,
        "y": 945.0002498626709,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "724aaddf.f5bc64",
        "type": "set",
        "name": "set tmp.found-in-ar tmp.found-in-network tmp.ep-available to false",
        "xml": "<set>\n<parameter name='tmp.found-in-ar' value='false' />\n<parameter name='tmp.found-in-network' value='false' />\n<parameter name='tmp.ep-available' value='false' />",
        "comments": "",
        "x": 661.4686431884766,
        "y": 882.0000648498535,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "227d7a10.3e1646",
        "type": "comment",
        "name": "If other EP exists set destination end point",
        "info": "Check if other allotted resource is available.",
        "comments": "",
        "x": 563.9685211181641,
        "y": 1049.0000133514404,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "efcf4f79.6c86c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1318.468765258789,
        "y": 1387.0002946853638,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "c265e218.1a32e",
                "5400e90e.101998",
                "5e5c4feb.28b41",
                "de8489d9.c254f8",
                "f95e6d13.12884",
                "fa76a0b6.41668",
                "3627042a.26a17c",
                "457277b7.d13308"
            ]
        ]
    },
    {
        "id": "c265e218.1a32e",
        "type": "switchNode",
        "name": "switch access-node-id",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-node-id'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1560.9790668487549,
        "y": 1257.010691165924,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "e5ab5291.07d1b"
            ]
        ]
    },
    {
        "id": "5400e90e.101998",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1533.9690189361572,
        "y": 1562.0006546974182,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "5e5c4feb.28b41",
        "type": "switchNode",
        "name": "switch access-ltp-id",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-ltp-id'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1552.4688968658447,
        "y": 1300.7782225608826,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "337a5943.c19086"
            ]
        ]
    },
    {
        "id": "de8489d9.c254f8",
        "type": "switchNode",
        "name": "switch clientSignal",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'clientSignal'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1546.4689350128174,
        "y": 1346.778269290924,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "8ba71c6d.40298"
            ]
        ]
    },
    {
        "id": "f95e6d13.12884",
        "type": "switchNode",
        "name": "switch cVLAN",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'cVLAN'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1530.4584369659424,
        "y": 1385.767771244049,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "f00218b6.2ec418"
            ]
        ]
    },
    {
        "id": "e5ab5291.07d1b",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1738.6909809112549,
        "y": 1257.6670632362366,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "74d1f4fb.2fd52c"
            ]
        ]
    },
    {
        "id": "74d1f4fb.2fd52c",
        "type": "set",
        "name": "set dst-access-node-id",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$tmp.ep.parameters.param[$idx].value`' />",
        "comments": "",
        "x": 1913.6909809112549,
        "y": 1257.267038345337,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "337a5943.c19086",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1734.1808490753174,
        "y": 1300.434519290924,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "c3e4cb2e.520b48"
            ]
        ]
    },
    {
        "id": "8ba71c6d.40298",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1734.1808490753174,
        "y": 1346.434519290924,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "bd80b930.a1ef78"
            ]
        ]
    },
    {
        "id": "f00218b6.2ec418",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1734.1703510284424,
        "y": 1385.4241433143616,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "68dce559.6da17c"
            ]
        ]
    },
    {
        "id": "c85dcae.25fb738",
        "type": "for",
        "name": "for idx..tmp.ep.parameters[]",
        "xml": "<for index='idx' start='0' end='`$tmp.ep.parameters.param_length`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1171.4686279296875,
        "y": 1275,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "efcf4f79.6c86c"
            ]
        ]
    },
    {
        "id": "3f4c1b3f.6b56c4",
        "type": "set",
        "name": "set tmp.ep.parameters",
        "xml": "<set>\n<parameter name='tmp.ep.parameters.' value='`$mdsal-other-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.`' />\n",
        "comments": "",
        "x": 1737.4686832427979,
        "y": 1124.0000743865967,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "6a54ca9c.c5add4",
        "type": "set",
        "name": "set tmp.ep.parameters",
        "xml": "<set>\n<parameter name='tmp.ep.parameters.' value='`$tmp.network.network-data.network-request-input.network-input-parameters.`' />\n",
        "comments": "",
        "x": 1734.4685916900635,
        "y": 1170.0000591278076,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "c3e4cb2e.520b48",
        "type": "set",
        "name": "set dst-access-node-id",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$tmp.ep.parameters.param[$idx].value`' />",
        "comments": "",
        "x": 1911.4688129425049,
        "y": 1300.0003151893616,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "bd80b930.a1ef78",
        "type": "set",
        "name": "set dst-clientSignal",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.clientSignal' value='`$tmp.ep.parameters.param[$idx].value`' />",
        "comments": "",
        "x": 1905.4688129425049,
        "y": 1344.0003151893616,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "68dce559.6da17c",
        "type": "set",
        "name": "set dst-cVLAN",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.cVLAN' value='`$tmp.ep.parameters.param[$idx].value`' />",
        "comments": "",
        "x": 1896.4688129425049,
        "y": 1383.0003151893616,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "969e9f8.ed9d16",
        "type": "comment",
        "name": "Get controller info and send request",
        "info": "",
        "comments": "",
        "x": 1736.5,
        "y": 1887.5451354980469,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "3ad2eafe.422e66",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 750.2310523986816,
        "y": 2077.9537086486816,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "f668d990.794bd8"
            ]
        ]
    },
    {
        "id": "f668d990.794bd8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
        "comments": "",
        "x": 916.7548732757568,
        "y": 2104.5727157592773,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "f65f4b69.0c87f8",
        "type": "failure",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 752.3262805938721,
        "y": 2125.715551376343,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "f668d990.794bd8"
            ]
        ]
    },
    {
        "id": "bb87ba79.a3bb28",
        "type": "comment",
        "name": "Save Resource to AAI",
        "info": "",
        "comments": "",
        "x": 509.77857398986816,
        "y": 2055.3028717041016,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "aa342b28.7af828",
        "type": "set",
        "name": "set output to api handler",
        "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='connection-attachment-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $connection-attachment-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
        "comments": "",
        "x": 539.0463924407959,
        "y": 1987.8283529281616,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "90bcf240.f06fb",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 499.4595642089844,
        "y": 2173.4441413879395,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "7cb750cf.10f7f",
        "type": "execute",
        "name": "execute RestApiCallNode - PUT AR by id",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.sotn-attachment.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />",
        "comments": "",
        "outputs": 1,
        "x": 591.7784748077393,
        "y": 1912.4692058563232,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "ab96927c.26098",
                "85fd2aa6.e68dd8",
                "4066273a.9660b8"
            ]
        ]
    },
    {
        "id": "ab96927c.26098",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 846.4198970794678,
        "y": 1956.8006000518799,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "404ff108.ba67f"
            ]
        ]
    },
    {
        "id": "85fd2aa6.e68dd8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 848.4199199676514,
        "y": 1915.3005641922355,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "404ff108.ba67f"
            ]
        ]
    },
    {
        "id": "4066273a.9660b8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 852.1700038909912,
        "y": 1866.6577167510986,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "aea2aaad.5af458"
            ]
        ]
    },
    {
        "id": "404ff108.ba67f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
        "comments": "",
        "x": 1007.1700229644775,
        "y": 1935.050630569458,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "aea2aaad.5af458",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 979.82594871521,
        "y": 1868.8498849868774,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "119f4083.39b30f",
        "type": "set",
        "name": "set ar-data",
        "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-status.action' value=\"`$connection-attachment-topology-operation-input.request-information.request-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-name' value=\"connection-attachment-topology-operation\" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-action' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$connection-attachment-topology-operation-input.request-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$connection-attachment-topology-operation-input.service-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.` \" />",
        "comments": "",
        "x": 493.9920902252197,
        "y": 1746.8501069545746,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "b813f59a.5b8678",
        "type": "execute",
        "name": "execute getTime",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 511.27793312072754,
        "y": 1819.4697046279907,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "49ffd6c8.7e0888",
        "type": "set",
        "name": "set allotted-resource-oper-status",
        "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='Active' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-topology-operation-input.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
        "comments": "",
        "x": 561.2650127410889,
        "y": 1856.4207849502563,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "cd594c8e.5dee4",
        "type": "set",
        "name": "set model-data",
        "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.connection-attachment-topology.onap-model-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.` \" />",
        "comments": "",
        "x": 507.83363151550293,
        "y": 1786.024757385254,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "c1c93a84.2d66c8",
        "type": "comment",
        "name": "Prepare data for allotted-resource addition to MDSAL",
        "info": "This will add to allotted-resource which is present inside service.",
        "comments": "",
        "x": 606.666971206665,
        "y": 1696.0247094631195,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "fc153b5.45e36c8",
        "type": "comment",
        "name": "Add to allotted-resources in mdsal",
        "info": "",
        "comments": "",
        "x": 548.2467975616455,
        "y": 1663.4380111694336,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "292f49ca.a0fbb6",
        "type": "update",
        "name": "update AAI allotted-resource",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $connection-attachment-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $connection-attachment-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $connection-attachment-topology-operation-input.service-information.service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"description\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-type`\" />\n\t<parameter name=\"selflink\" value=\"`$tmp.ar.self-link`\" />\n\t<parameter name=\"model-invariant-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-invariant-uuid`\" />\n\t<parameter name=\"model-version-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-uuid`\" />\n\t<parameter name=\"operational-status\" value=\"Active\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 550.7229747772217,
        "y": 2103.7550144195557,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "3ad2eafe.422e66",
                "f65f4b69.0c87f8"
            ]
        ]
    },
    {
        "id": "44838a68.e3f4a4",
        "type": "execute",
        "name": "execute RestApiCallNode getPath from OOF",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.oof-getpath.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.oof.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.oof.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1359.4729347229004,
        "y": 1666.2546663284302,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "8feecee7.f7b8f",
                "c09916f5.4dd3b8"
            ]
        ]
    },
    {
        "id": "8feecee7.f7b8f",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1599.4730758666992,
        "y": 1690.254635810852,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "271a3509.bae85a"
            ]
        ]
    },
    {
        "id": "db04b321.857bf",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing OOF api\" />\n",
        "comments": "",
        "x": 1738.4731101989746,
        "y": 1639.2547273635864,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "c09916f5.4dd3b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1598.4728622436523,
        "y": 1639.254726409912,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "db04b321.857bf"
            ]
        ]
    },
    {
        "id": "d496b020.59331",
        "type": "comment",
        "name": "Get VPNs from OOF",
        "info": "",
        "comments": "",
        "x": 1330.976734161377,
        "y": 1622.2586660385132,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "875e091e.112a28",
        "type": "for",
        "name": "for vidx..oof.vpns_length[]",
        "xml": "<for index='vidx' start='0' end='`$oof.vpns_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 1296.4727783203125,
        "y": 1819.50439453125,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "1160a470.b981dc"
            ]
        ]
    },
    {
        "id": "a6f413f4.2dbde",
        "type": "comment",
        "name": "Loop through VPN and configure them",
        "info": "",
        "comments": "",
        "x": 1363.97314453125,
        "y": 1944.0047607421875,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "33e591b4.f746fe",
        "type": "switchNode",
        "name": "switch name",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'name'`\">\n                \n",
        "comments": "",
        "outputs": 1,
        "x": 2539.2569580078125,
        "y": 1220.121826171875,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "fefec129.1a946"
            ]
        ]
    },
    {
        "id": "fefec129.1a946",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2728.2569274902344,
        "y": 1220.121811389923,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "da9036e.ed842c8"
            ]
        ]
    },
    {
        "id": "da9036e.ed842c8",
        "type": "set",
        "name": "set etht-svc-name & bandwidth-profile-name",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-name' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n<parameter name='ietf-eth-tran-service_etht-svc.globals.etht-svc-bandwidth-profiles[0].bandwidth-profile-name' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n<parameter name='ietf-eth-tran-service:etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].ingress-egress-bandwidth-profile-name' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n<parameter name='ietf-eth-tran-service:etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].ingress-egress-bandwidth-profile-name' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />",
        "comments": "",
        "x": 2969.2572441101074,
        "y": 1219.7218661308289,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "8f4772f4.3804d",
        "type": "switchNode",
        "name": "switch description",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'description'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2552.096836090088,
        "y": 1255.1219210624695,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "bdba2279.933c5"
            ]
        ]
    },
    {
        "id": "bdba2279.933c5",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2727.0969009399414,
        "y": 1257.1219067573547,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "15473631.096f4a"
            ]
        ]
    },
    {
        "id": "15473631.096f4a",
        "type": "set",
        "name": "set etht-svc-descr",
        "xml": "<set>\n<parameter name='prop.global.sotn.etht-svc-descr' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
        "comments": "",
        "x": 2883.43021774292,
        "y": 1254.5829815864563,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "71052d71.b60ea4",
        "type": "switchNode",
        "name": "switch tenantId",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'tenantId'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2547.4790992736816,
        "y": 1288.4553112983704,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "2fff6651.22d4aa"
            ]
        ]
    },
    {
        "id": "2fff6651.22d4aa",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2725.479103088379,
        "y": 1292.4551892280579,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "341c1315.ec130c"
            ]
        ]
    },
    {
        "id": "341c1315.ec130c",
        "type": "set",
        "name": "set tenantId",
        "xml": "<set>\n<parameter name='prop.global.sotn.tenantId' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
        "comments": "",
        "x": 2863.479290008545,
        "y": 1289.0551648139954,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "ee4a5e59.4052c",
        "type": "switchNode",
        "name": "switch cir",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'cir'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2530.3186988830566,
        "y": 1361.4552664756775,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "bb5d7516.d68688"
            ]
        ]
    },
    {
        "id": "bb5d7516.d68688",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2725.31876373291,
        "y": 1362.4552664756775,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "18d23c42.2bc7f4"
            ]
        ]
    },
    {
        "id": "18d23c42.2bc7f4",
        "type": "set",
        "name": "set cir",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.globals.etht-svc-bandwidth-profiles[0].CIR' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />",
        "comments": "",
        "x": 2849.6522636413574,
        "y": 1360.916341304779,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "e1e2eefb.4977e",
        "type": "switchNode",
        "name": "switch vpnType",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'vpnType'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2544.6269874572754,
        "y": 1324.232976436615,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "b92f279d.32d1a8"
            ]
        ]
    },
    {
        "id": "b92f279d.32d1a8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2726.6271743774414,
        "y": 1327.232961177826,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "8e6d1cb4.ebcd3"
            ]
        ]
    },
    {
        "id": "8e6d1cb4.ebcd3",
        "type": "set",
        "name": "set vpnType",
        "xml": "<set>\n<parameter name='prop.global.sotn.vpnType' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
        "comments": "",
        "x": 2865.9609375,
        "y": 1323.6942138671875,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "f4c35fc9.05d37",
        "type": "switchNode",
        "name": "switch eir",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'eir'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2525.609043121338,
        "y": 1395.1531739234924,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "ee9fe516.151a28"
            ]
        ]
    },
    {
        "id": "ee9fe516.151a28",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2725.60929107666,
        "y": 1398.1531128883362,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "9e62a536.145d18"
            ]
        ]
    },
    {
        "id": "9e62a536.145d18",
        "type": "set",
        "name": "set eir",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.globals.etht-svc-bandwidth-profiles[0].EIR' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />",
        "comments": "",
        "x": 2848.94291305542,
        "y": 1397.6141724586487,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "cba1cc42.5f531",
        "type": "switchNode",
        "name": "switch colorAware",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'colorAware'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2550.6096534729004,
        "y": 1429.1530528068542,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "8c7ce4c9.3b9858"
            ]
        ]
    },
    {
        "id": "8c7ce4c9.3b9858",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2721.609474182129,
        "y": 1435.1529912948608,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "ea14676f.196358"
            ]
        ]
    },
    {
        "id": "ea14676f.196358",
        "type": "set",
        "name": "set colorAware",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.globals.etht-svc-bandwidth-profiles[0].color-aware' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />",
        "comments": "",
        "x": 2869.9427909851074,
        "y": 1435.6142039299011,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "72041fd4.5dfe5",
        "type": "switchNode",
        "name": "switch couplingFlag",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'couplingFlag'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2552.609592437744,
        "y": 1465.1531147956848,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "edb0b54f.f71f98"
            ]
        ]
    },
    {
        "id": "edb0b54f.f71f98",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2724.609474182129,
        "y": 1474.1530842781067,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "25910765.2f1228"
            ]
        ]
    },
    {
        "id": "25910765.2f1228",
        "type": "set",
        "name": "set couplingFlag",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.globals.etht-svc-bandwidth-profiles[0].coupling-flag' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
        "comments": "",
        "x": 2877.9427909851074,
        "y": 1474.6142048835754,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "c665a0de.53656",
        "type": "comment",
        "name": "Check if other EP exists in SOTNConnectionResource",
        "info": "",
        "comments": "",
        "x": 2669.3125,
        "y": 1072.7884521484375,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "e6ae0285.7c87e",
        "type": "comment",
        "name": "Get other global parameters from network",
        "info": "",
        "comments": "",
        "x": 2605.312255859375,
        "y": 1158.7884521484375,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "fa76a0b6.41668",
        "type": "switchNode",
        "name": "switch access-provider-id",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-provider-id'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1568.0347309112549,
        "y": 1431.2329812049866,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "5aebed6a.0d2014"
            ]
        ]
    },
    {
        "id": "5aebed6a.0d2014",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1755.0347309112549,
        "y": 1427.2329812049866,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "66d857f0.46d1b8"
            ]
        ]
    },
    {
        "id": "66d857f0.46d1b8",
        "type": "set",
        "name": "set access-provider-id",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
        "comments": "",
        "x": 1923.0347309112549,
        "y": 1427.8329873085022,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "3627042a.26a17c",
        "type": "switchNode",
        "name": "switch access-client-id",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-client-id'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1559.034746170044,
        "y": 1474.2434296607971,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "432a66f4.782f38"
            ]
        ]
    },
    {
        "id": "432a66f4.782f38",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1746.034746170044,
        "y": 1470.2434296607971,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "a0df62e5.3bb7d"
            ]
        ]
    },
    {
        "id": "a0df62e5.3bb7d",
        "type": "set",
        "name": "set access-client-id",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
        "comments": "",
        "x": 1914.034746170044,
        "y": 1470.8434357643127,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "457277b7.d13308",
        "type": "switchNode",
        "name": "switch access-topology-id",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-topology-id'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1572.0346908569336,
        "y": 1516.2434606552124,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "d07c98a8.7e8e08"
            ]
        ]
    },
    {
        "id": "d07c98a8.7e8e08",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1759.0346908569336,
        "y": 1512.2434606552124,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "a2f53851.d94748"
            ]
        ]
    },
    {
        "id": "a2f53851.d94748",
        "type": "set",
        "name": "set access-topology-id",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
        "comments": "",
        "x": 1927.0346908569336,
        "y": 1512.843466758728,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "1160a470.b981dc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1392,
        "y": 2167.545135498047,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "2cd446f7.28d39a",
                "2877f2b3.bb7c1e",
                "e0ac9112.45a79",
                "907fb3cc.1e099",
                "471c5cb3.903c54",
                "56f3c680.4d6ac8",
                "6e85b988.1a51e8",
                "bb0a2d9f.80ce5",
                "d15e4e35.318c3",
                "11aa487b.b6f238",
                "231efb4.afd0d04",
                "76d8812c.617d9",
                "5f9f6f9e.4868f"
            ]
        ]
    },
    {
        "id": "22e2e398.9329dc",
        "type": "set",
        "name": "set controller data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
        "comments": "",
        "x": 2144.5,
        "y": 1887.5451354980469,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "bb0a2d9f.80ce5",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.thirdparty-sdnc-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1728.5,
        "y": 1927.5451354980469,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "8280902d.793d1",
                "3935fb24.f30c94",
                "4d239d39.341e34"
            ]
        ]
    },
    {
        "id": "8280902d.793d1",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1974.5,
        "y": 1887.5451354980469,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "22e2e398.9329dc"
            ]
        ]
    },
    {
        "id": "3935fb24.f30c94",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1978.5,
        "y": 1927.5451354980469,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "14321a03.83d186"
            ]
        ]
    },
    {
        "id": "4d239d39.341e34",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1970.5,
        "y": 1967.5451354980469,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "c06081d6.4903b"
            ]
        ]
    },
    {
        "id": "14321a03.83d186",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 2128.5,
        "y": 1927.5451354980469,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "c06081d6.4903b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 2128.5,
        "y": 1967.5451354980469,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "6e85b988.1a51e8",
        "type": "get-resource",
        "name": "get-resource pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $oof.vpn.access-node-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.pnf' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1680,
        "y": 1807.5451354980469,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "d3f5063c.00c168",
                "fc7e670e.2897c8",
                "d1229555.0b82d8"
            ]
        ]
    },
    {
        "id": "d3f5063c.00c168",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1974.5,
        "y": 1767.5451354980469,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "2c7d7d35.ce8132"
            ]
        ]
    },
    {
        "id": "fc7e670e.2897c8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1978.5,
        "y": 1807.5451354980469,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "e057bff0.b9b2e"
            ]
        ]
    },
    {
        "id": "d1229555.0b82d8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1970.5,
        "y": 1847.5451354980469,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "e151fa60.4c2138"
            ]
        ]
    },
    {
        "id": "e057bff0.b9b2e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2128.5,
        "y": 1807.5451354980469,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "e151fa60.4c2138",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2128.5,
        "y": 1847.5451354980469,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "2c7d7d35.ce8132",
        "type": "set",
        "name": "set tmp.thirdparty-sdnc-id",
        "xml": "<set>\n<parameter name='tmp.thirdparty-sdnc-id' value=\"`$tmp.aai.pnf.relationship-list.relationship[0].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 2168,
        "y": 1767.5451354980469,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "f40a7f54.e4ae4",
        "type": "comment",
        "name": "get domain controller information",
        "info": "",
        "comments": "",
        "x": 1727,
        "y": 1767.5451354980469,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "d15e4e35.318c3",
        "type": "set",
        "name": "set oof.vpn",
        "xml": "<set>\n<parameter name='oof.vpn.' value='`$oof.vpns[$vidx].`' />",
        "comments": "",
        "x": 1663.5,
        "y": 1727.5451354980469,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "2877f2b3.bb7c1e",
        "type": "save",
        "name": "save VPN resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.vpnName' >\n<parameter name='vpn-id' value='`$tmp.vpnName`' />\n<parameter name='vpn-name' value='`$tmp.vpnName`' />\n<parameter name='access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='src-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name='dst-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$oof.vpn.dst-access-ltp-id`' />\n<parameter name='vpn-type' value='`$prop.global.sotn.vpnType`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />",
        "comments": "",
        "outputs": 1,
        "x": 1710,
        "y": 2287.545135498047,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "e0ac9112.45a79",
        "type": "set",
        "name": "set tmp.vpnName",
        "xml": "<set>\n<parameter name='tmp.vpnName' value=\"`$oof.vpn.access-node-id + '-' + $ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-name`\" />",
        "comments": "",
        "x": 1684,
        "y": 2247.545135498047,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "907fb3cc.1e099",
        "type": "save",
        "name": "save connectivity relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $mdsal-psd.service-data.networks.network[0].network-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$mdsal-psd.service-data.networks.network[0].network-id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1740.5,
        "y": 2327.545135498047,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "2cd446f7.28d39a",
        "type": "set",
        "name": "set src-ltpId dst-ltpId",
        "xml": "<set>\n<parameter name='src-ltpId' value=\"`'nodeId-' + $oof.vpn.access-node-id + '-ltpId-' + $oof.vpn.src-access-ltp-id`\" />\n<parameter name='dst-ltpId' value=\"`'nodeId-' + $oof.vpn.access-node-id + '-ltpId-' + $oof.vpn.dst-access-ltp-id`\" />",
        "comments": "",
        "x": 1692,
        "y": 2367.545135498047,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "471c5cb3.903c54",
        "type": "save",
        "name": "save srcLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $src-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-ltpId`\" />\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1725.5,
        "y": 2407.545135498047,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "56f3c680.4d6ac8",
        "type": "save",
        "name": "save dstLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $dst-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$dst-ltpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1725.5,
        "y": 2447.545135498047,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "5f93bf13.27d92",
        "type": "execute",
        "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 717.5038146972656,
        "y": 569.0039119720459,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "6d235d2d.3f5b34",
                "2ede014.ee6b2fe"
            ]
        ]
    },
    {
        "id": "d62ecc6b.96c9a",
        "type": "execute",
        "name": "execute RestApiCallNode - get-resource parent service data",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-psd`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-psd\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 644.5039672851562,
        "y": 796.004075050354,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "a7cb0cea.d533b",
                "3fb193b7.956aac"
            ]
        ]
    },
    {
        "id": "2096aa5d.6673a6",
        "type": "execute",
        "name": "get parent-service-data url",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-psd\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.parent-service-instance-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 544.5038757324219,
        "y": 759.0039081573486,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "5db9f65b.6ce138",
        "type": "execute",
        "name": "generate tmp.ar-other-url-connection",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-other-url-connection\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.provided-ar.allotted-resource-id`\"/>\n    \n\n",
        "comments": "",
        "outputs": 1,
        "x": 1958.500228881836,
        "y": 915.3334693908691,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "10770dde.9e85f2",
        "type": "execute",
        "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-other-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-other-ar\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2095.5008697509766,
        "y": 957.8333339691162,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "590d4c4.a9730b4",
                "90f110cb.f207a"
            ]
        ]
    },
    {
        "id": "271a3509.bae85a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1720.5001487731934,
        "y": 1681.0001192092896,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "19baea04.2b4bc6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1097.4687614440918,
        "y": 1706.0003032684326,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "44838a68.e3f4a4",
                "875e091e.112a28",
                "2da2f041.faa77"
            ]
        ]
    },
    {
        "id": "7ce18851.c47778",
        "type": "outcome",
        "name": "outcome PendingDelete",
        "xml": "<outcome value='PendingDelete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2171.531219482422,
        "y": 521.0312976837158,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "b3259760.d104a8"
            ]
        ]
    },
    {
        "id": "b3259760.d104a8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2355.5312309265137,
        "y": 517.0312976837158,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "231efb4.afd0d04",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-ltp-id' value='`$oof.vpn.dst-access-ltp-id`' />\n\n",
        "comments": "",
        "x": 1698.5,
        "y": 2127.545135498047,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "11aa487b.b6f238",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<parameter name='ietf-eth-tran-service_etht-svc.globals.etht-svc-bandwidth-profiles[0].bandwidth-profile-type' value='ietf-eth-tran-types:mef-10-bwp' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-type' value='ietf-eth-tran-types:p2p-svc' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].admin-status' value='ietf-te-types:tunnel-state-up' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].access-port-id' value='0' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[0].service-classification-type' value='ietf-eth-tran-types:port-classification' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].access-port-id' value='1' />\n<parameter name='ietf-eth-tran-service_etht-svc.etht-svc-instances[0].etht-svc-access-ports[1].service-classification-type' value='ietf-eth-tran-types:port-classification' />",
        "comments": "",
        "x": 1674,
        "y": 2087.545135498047,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "76d8812c.617d9",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1741,
        "y": 2027.5451354980469,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "28e6097d.f18f66",
                "429d5ce2.699e34"
            ]
        ]
    },
    {
        "id": "28e6097d.f18f66",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1974.5,
        "y": 2007.5451354980469,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "d759b183.63acc"
            ]
        ]
    },
    {
        "id": "429d5ce2.699e34",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1970.5,
        "y": 2047.5451354980469,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "416db0c0.1f06a"
            ]
        ]
    },
    {
        "id": "416db0c0.1f06a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
        "comments": "",
        "x": 2128.5,
        "y": 2047.5451354980469,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "d759b183.63acc",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 2125,
        "y": 2007.5451354980469,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "b1a35b6.4a065a8",
        "type": "execute",
        "name": "execute RestconfApiCallNode Create ethernet Service with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfapicall.RestconfApiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2251,
        "y": 2187.545135498047,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "ce699ed8.331d3",
                "67e1539f.61873c"
            ]
        ]
    },
    {
        "id": "ce699ed8.331d3",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2594.5,
        "y": 2187.545135498047,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "1f773548.b9616b"
            ]
        ]
    },
    {
        "id": "1f773548.b9616b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2752,
        "y": 2187.545135498047,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    },
    {
        "id": "ba2ddead.c1f28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 2748.5,
        "y": 2147.545135498047,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "67e1539f.61873c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2590.5,
        "y": 2147.545135498047,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "ba2ddead.c1f28"
            ]
        ]
    },
    {
        "id": "5f9f6f9e.4868f",
        "type": "switchNode",
        "name": "switch prop.sdncRestApi.token_id",
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1734,
        "y": 2167.545135498047,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "baa18b7c.b7a658",
                "f30c82f1.4adc7"
            ]
        ]
    },
    {
        "id": "baa18b7c.b7a658",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1946.8438301086426,
        "y": 2147.66703414917,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "acadca1.2119438"
            ]
        ]
    },
    {
        "id": "f30c82f1.4adc7",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1950.5,
        "y": 2187.545135498047,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "b1a35b6.4a065a8"
            ]
        ]
    },
    {
        "id": "acadca1.2119438",
        "type": "execute",
        "name": "execute RestconfApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfapicall.RestconfApiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 2261,
        "y": 2147.545135498047,
        "z": "c76379fa.c61278",
        "wires": [
            [
                "67e1539f.61873c",
                "ce699ed8.331d3"
            ]
        ]
    },
    {
        "id": "c286888e.830438",
        "type": "comment",
        "name": "save vpn and its relation to AAI",
        "info": "",
        "comments": "",
        "x": 1722,
        "y": 2207.545135498047,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "826cde67.4b0b2",
        "type": "comment",
        "name": "call OOF for otn tunnel path computation",
        "info": "",
        "comments": "",
        "x": 1359,
        "y": 1725,
        "z": "c76379fa.c61278",
        "wires": []
    },
    {
        "id": "2da2f041.faa77",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:sotn-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sotn-get-otn-tunnel-path-from-oof' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1304,
        "y": 1766,
        "z": "c76379fa.c61278",
        "wires": [
            []
        ]
    }
]