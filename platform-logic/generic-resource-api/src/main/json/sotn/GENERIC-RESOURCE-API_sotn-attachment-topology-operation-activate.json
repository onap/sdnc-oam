[
  {
    "id": "8d664378.cbb4f",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 118.03125,
    "y": 76.99999761581421,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "99e747dc.b38c98"
      ]
    ]
  },
  {
    "id": "99e747dc.b38c98",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 330.03125381469727,
    "y": 149.0000147819519,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "677572d7.6cd7ac"
      ]
    ]
  },
  {
    "id": "677572d7.6cd7ac",
    "type": "method",
    "name": "sotn-attachment-topology-operation-activate",
    "xml": "<method rpc='sotn-attachment-topology-operation-activate' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 318.0313720703125,
    "y": 236.9999976158142,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "10091edb.6afce1"
      ]
    ]
  },
  {
    "id": "10091edb.6afce1",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 334.0313720703125,
    "y": 792.0002422332764,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "d8983068.d1e09",
        "b09c24ef.ef1828",
        "ab6f9b8e.89d568",
        "2e23abdc.47fd94",
        "9144dc70.a7ea8",
        "4e152126.794ef",
        "f5e8e1c8.46298",
        "e64a37c7.f66948",
        "c941958.f53f068",
        "4e69710c.777f7",
        "7b1a01af.62e07",
        "8f0a4580.6d9e98",
        "e420c4c5.b6aac8",
        "9257aeaa.1b50e",
        "31063248.d169de",
        "f27d2f2b.5f557",
        "e5693b1c.1aac88",
        "625b8a7b.c27e14",
        "8bb4a5cf.68ff78",
        "b625537f.a1fdd"
      ]
    ]
  },
  {
    "id": "d8983068.d1e09",
    "type": "set",
    "name": "set tmp.ar.allotted-resource-id,etc",
    "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
    "comments": "",
    "x": 731.0248107910156,
    "y": 190.9934844970703,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "5f587b8.9c56784",
    "type": "comment",
    "name": "set tmp ar-id to fetch resource from MDSAL",
    "info": "",
    "comments": "",
    "x": 759.9851226806641,
    "y": 155.02528047561646,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "b09c24ef.ef1828",
    "type": "set",
    "name": "set tmp.ar.self-link",
    "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:connection-attachment-allotted-resources/connection-attachment-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/connection-attachment-topology/'` \" />\n\n",
    "comments": "",
    "x": 685.0247497558594,
    "y": 283.99348974227905,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "9144dc70.a7ea8",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 691.2866401672363,
    "y": 371.6602187156677,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "ab6f9b8e.89d568",
    "type": "execute",
    "name": "generate allotted-resource tmp.ar-url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 738.2866973876953,
    "y": 459.660222530365,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "bdc75564.630b58",
    "type": "comment",
    "name": "GET connection-attachment-allotted-resource from mdsal",
    "info": "",
    "comments": "",
    "x": 784.8396301269531,
    "y": 590.5386567115784,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "79296d26.4fef24",
    "type": "comment",
    "name": "Used for setting output to API Handler",
    "info": "",
    "comments": "",
    "x": 739.0247802734375,
    "y": 250.99349927902222,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "b691a7f5.2ca838",
    "type": "comment",
    "name": "Obtain different URL, template location etc",
    "info": "For saving resource information to MDSAL & for AAI",
    "comments": "",
    "x": 757.0247459411621,
    "y": 336.8823800086975,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "ea7f6398.951af",
    "type": "comment",
    "name": "Used to Get AR by id to MDSAL, same as self-link",
    "info": "",
    "comments": "",
    "x": 783.0247650146484,
    "y": 423.8823390007019,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "bf04a12d.5ab3a",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1244.6980419158936,
    "y": 607.9999823570251,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "e36a35e0.a85518"
      ]
    ]
  },
  {
    "id": "e36a35e0.a85518",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1388.6981201171875,
    "y": 565.4999003410339,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "1bc51818.822678"
      ]
    ]
  },
  {
    "id": "1bc51818.822678",
    "type": "switchNode",
    "name": "switch cr length",
    "xml": "<switch test='`$mdsal-ar.connection-attachment-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1557.5555438995361,
    "y": 563.1190714836121,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "c5872f2b.0b178",
        "aded6823.7e7e38"
      ]
    ]
  },
  {
    "id": "c5872f2b.0b178",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1712.8886795043945,
    "y": 535.1189866065979,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "79a53162.640b2"
      ]
    ]
  },
  {
    "id": "79a53162.640b2",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic='true'>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1871.412483215332,
    "y": 533.0238337516785,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "9be5dc3a.28978",
        "5722f7fa.de6bf8",
        "f5d4df71.72bd9"
      ]
    ]
  },
  {
    "id": "e3ccef9e.d8f5c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Connection attachment resource not exist\" />\n    \n",
    "comments": "",
    "x": 1811.5504150390625,
    "y": 640.0660681724548,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "5803dc5e.f9b2f4",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1236.5498447418213,
    "y": 643.0660672187805,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "19f8e68c.c0f139"
      ]
    ]
  },
  {
    "id": "19f8e68c.c0f139",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1416.5497951507568,
    "y": 643.732617855072,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "e3ccef9e.d8f5c"
      ]
    ]
  },
  {
    "id": "aded6823.7e7e38",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1704.216682434082,
    "y": 594.3993611335754,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "e3ccef9e.d8f5c"
      ]
    ]
  },
  {
    "id": "9be5dc3a.28978",
    "type": "set",
    "name": "set connection-attachment-ar from get",
    "xml": "<set>\n<parameter name='connection-attachment-ar.' value='$mdsal-ar.connection-attachment-allotted-resource[0].' />\n",
    "comments": "",
    "x": 2118.4759368896484,
    "y": 506.0000858306885,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "f5d4df71.72bd9",
    "type": "set",
    "name": "set oper-status",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-ar.allotted-resource-status.rpc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
    "comments": "",
    "x": 2052.4759674072266,
    "y": 579.4285883903503,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "5722f7fa.de6bf8",
    "type": "switchNode",
    "name": "switch order-status",
    "xml": "<switch test='`$connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2062.475746154785,
    "y": 545.0000224113464,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "f7f47d29.7c18f",
        "6f0c573a.005228",
        "d906524b.eeb18"
      ]
    ]
  },
  {
    "id": "f7f47d29.7c18f",
    "type": "outcome",
    "name": "outcome Created",
    "xml": "<outcome value='Created'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2298.075828552246,
    "y": 539.0000534057617,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "75eaa69a.304108"
      ]
    ]
  },
  {
    "id": "6f0c573a.005228",
    "type": "outcome",
    "name": "outcome Other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2291.790328979492,
    "y": 619.4286880493164,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "e10d29a3.c09e38"
      ]
    ]
  },
  {
    "id": "75eaa69a.304108",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2456.546501159668,
    "y": 539.3757090568542,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "e10d29a3.c09e38",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" \n    value=\"`'Existing connection-attachment-allotted-resource with order status of ' + $connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status + '.'`\" />\n",
    "comments": "",
    "x": 2467.698143005371,
    "y": 618.0000872612,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "bc697557.abf938",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:sotn-get-saved-ar-param",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='sotn-get-saved-ar-param' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 955.334300994873,
    "y": 690.4936022758484,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "4e152126.794ef",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 649.3404006958008,
    "y": 691.499972820282,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "bc697557.abf938"
      ]
    ]
  },
  {
    "id": "1f3fc1a6.135f3e",
    "type": "comment",
    "name": "GET parent-service-data from mdsal to check existence of other End point",
    "info": "",
    "comments": "",
    "x": 837.03173828125,
    "y": 736.531750202179,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "3cf6b4b1.6a71dc",
    "type": "for",
    "name": "for pidx..mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[]",
    "xml": "<for index='pidx' start='0' end='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1728.2164459228516,
    "y": 889.0042276382446,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "3bbeaaa4.0cfa26"
      ]
    ]
  },
  {
    "id": "2e23abdc.47fd94",
    "type": "switchNode",
    "name": "switch mdsal-psd.service-data.provided-allotted-resources_length",
    "xml": "<switch test='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 812.2154693603516,
    "y": 996.7182641029358,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "6ff9a0ff.dcfb4",
        "ff1c3916.739028",
        "d0c138a.b8484c8"
      ]
    ]
  },
  {
    "id": "6ff9a0ff.dcfb4",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1140.3584899902344,
    "y": 1069.5755381584167,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "499e037f.3c991c"
      ]
    ]
  },
  {
    "id": "fb95619e.dd7a7",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1324.485752105713,
    "y": 928.7015471458435,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "3cf6b4b1.6a71dc",
        "ec079e89.408ea"
      ]
    ]
  },
  {
    "id": "3bbeaaa4.0cfa26",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$pidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2168.3277740478516,
    "y": 886.004029750824,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "3cfb776.1a6dc88",
        "a6d574db.37ec88"
      ]
    ]
  },
  {
    "id": "3cfb776.1a6dc88",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2341.1379890441895,
    "y": 857.468644618988,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "4685a336.4a051c"
      ]
    ]
  },
  {
    "id": "fb81e999.e435b8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2489.8984603881836,
    "y": 914.325731754303,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "7ed4750e.b1d6fc"
      ]
    ]
  },
  {
    "id": "7ed4750e.b1d6fc",
    "type": "set",
    "name": "set tmp.pidx and ptx.consumed-ar",
    "xml": "<set>\n<parameter name='tmp.pidx' value='`$pidx`' />\n<parameter name='tmp.provided-ar.' value='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$pidx].`' />\n<parameter name='tmp.found-in-ar' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
    "comments": "",
    "x": 2724.755886077881,
    "y": 912.8972640037537,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "ee9aeb2c.6677a8",
    "type": "comment",
    "name": "Check existence of other AR in parent service data",
    "info": "Check if other allotted resource is available.",
    "comments": "",
    "x": 759.9939079284668,
    "y": 901.8929591178894,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "ff1c3916.739028",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1155.0109596252441,
    "y": 1008.6772217750549,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "d35c3b1d.717fa8"
      ]
    ]
  },
  {
    "id": "499e037f.3c991c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: End points not available\" />\n    \n",
    "comments": "",
    "x": 1300.0108375549316,
    "y": 1068.6774668693542,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "d0c138a.b8484c8",
    "type": "other",
    "name": "outcome 2",
    "xml": "<outcome value='2'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1150.0107727050781,
    "y": 929.6772475242615,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "fb95619e.dd7a7"
      ]
    ]
  },
  {
    "id": "4685a336.4a051c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2499.1222038269043,
    "y": 856.677387714386,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "a6d574db.37ec88",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2348.1218452453613,
    "y": 913.6772475242615,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "fb81e999.e435b8"
      ]
    ]
  },
  {
    "id": "ec079e89.408ea",
    "type": "switchNode",
    "name": "switch tmp.found-in-ar",
    "xml": "<switch test='`$tmp.found-in-ar`'>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1537.0107498168945,
    "y": 982.4550652503967,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "ad2dc2ca.dac11"
      ]
    ]
  },
  {
    "id": "ad2dc2ca.dac11",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1708.01078414917,
    "y": 983.5662865638733,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "94734e1b.67d7d"
      ]
    ]
  },
  {
    "id": "94734e1b.67d7d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1857.0108795166016,
    "y": 983.566285610199,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "da051cb.7908ce",
        "511eded7.ee48c"
      ]
    ]
  },
  {
    "id": "df822a12.2f4cb8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2603.128704071045,
    "y": 999.7951397895813,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "8bd33391.e91a4"
      ]
    ]
  },
  {
    "id": "6d247d3c.af7454",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2594.9805068969727,
    "y": 1034.8612246513367,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "c9893a00.c28658"
      ]
    ]
  },
  {
    "id": "92501bf7.64e188",
    "type": "switchNode",
    "name": "switch mdsal-psd.service-data.networks_length",
    "xml": "<switch test='`$mdsal-psd.service-data.networks.network_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1600.344253540039,
    "y": 1083.89990568161,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "7eda2112.68c74",
        "8c5ad16c.a0bce"
      ]
    ]
  },
  {
    "id": "8c5ad16c.a0bce",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1864.3441009521484,
    "y": 1063.7886519432068,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "c88c0702.2f3eb8"
      ]
    ]
  },
  {
    "id": "7eda2112.68c74",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1854.3441619873047,
    "y": 1111.7886233329773,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "4b5ebe1.f906a4"
      ]
    ]
  },
  {
    "id": "4b5ebe1.f906a4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Incorrect state found more then 1 network\" />\n    \n",
    "comments": "",
    "x": 1992.9965057373047,
    "y": 1113.890384197235,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "8c1e1bd2.c7dff8",
    "type": "set",
    "name": "set tmp.network.",
    "xml": "<set>\n<parameter name='tmp.network.' value='`$mdsal-psd.service-data.networks.network[0].`' />\n\n\n",
    "comments": "",
    "x": 2225.788959503174,
    "y": 1064.788821697235,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "d35c3b1d.717fa8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1322.4552688598633,
    "y": 1007.7884888648987,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "92501bf7.64e188"
      ]
    ]
  },
  {
    "id": "c88c0702.2f3eb8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2023.1218719482422,
    "y": 1066.7884860038757,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "8c1e1bd2.c7dff8",
        "57349ad5.ce57b4"
      ]
    ]
  },
  {
    "id": "57349ad5.ce57b4",
    "type": "for",
    "name": "for nidx..tmp.network.network-data.network-request-input.network...[]",
    "xml": "<for index='nidx' start='0' end='`$tmp.network.network-data.network-request-input.network-input-parameters.param_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 2386.121910095215,
    "y": 1112.788640499115,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "9ba86c57.e6af5"
      ]
    ]
  },
  {
    "id": "9ba86c57.e6af5",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2432.677978515625,
    "y": 1343.7884497642517,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "919483e8.df2a",
        "d15629b3.f55828",
        "5656fc8f.8dd814",
        "831174d3.18ba68",
        "28da2331.d9adbc",
        "5b35ac60.b06374",
        "8c9ddaa9.6e1178",
        "cc2b2a86.fe9858",
        "95f6d795.6654c8",
        "12d0e2b2.41538d"
      ]
    ]
  },
  {
    "id": "919483e8.df2a",
    "type": "switchNode",
    "name": "switch access-node-id",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'access-node-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 2709.1881942749023,
    "y": 1185.7991971969604,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "d89910f0.04363"
      ]
    ]
  },
  {
    "id": "d89910f0.04363",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2898.1878204345703,
    "y": 1187.7990617752075,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "7fb07ab0.8731f4"
      ]
    ]
  },
  {
    "id": "7fb07ab0.8731f4",
    "type": "set",
    "name": "set tmp.found-in-network tmp.ep-available",
    "xml": "<set>\n<parameter name='tmp.found-in-network' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
    "comments": "",
    "x": 3151.1879959106445,
    "y": 1187.3991079330444,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "d15629b3.f55828",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 2683.177646636963,
    "y": 1559.7884883880615,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "8f0a4580.6d9e98",
    "type": "switchNode",
    "name": "switch tmp.ep-available",
    "xml": "<switch test='`$tmp.ep-available`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 675.3440704345703,
    "y": 1192.2327990531921,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "a1aab633.7afd48",
        "17b3ac8c.83db93"
      ]
    ]
  },
  {
    "id": "17b3ac8c.83db93",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 894.0107898712158,
    "y": 1241.566155910492,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "6fbe74b1.19033c"
      ]
    ]
  },
  {
    "id": "a1aab633.7afd48",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 898.8995914459229,
    "y": 1150.5662169456482,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "afc8882a.f41778"
      ]
    ]
  },
  {
    "id": "afc8882a.f41778",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1045.8995876312256,
    "y": 1152.455029964447,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "6fbe74b1.19033c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1064.121877670288,
    "y": 1239.566113948822,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "55f0cf15.57d45",
        "34353928.90fd66",
        "ef27420c.8613d"
      ]
    ]
  },
  {
    "id": "55f0cf15.57d45",
    "type": "switchNode",
    "name": "switch tmp.found-in-ar",
    "xml": "<switch test='`$tmp.found-in-ar`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1290.2328910827637,
    "y": 1206.566113948822,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "6afed8e9.c144d8",
        "d5770178.0518a"
      ]
    ]
  },
  {
    "id": "6afed8e9.c144d8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1485.6773376464844,
    "y": 1184.5661749839783,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "1eed655b.bd97fb"
      ]
    ]
  },
  {
    "id": "d5770178.0518a",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1482.67724609375,
    "y": 1232.5661597251892,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "b7fae121.44ba7"
      ]
    ]
  },
  {
    "id": "1eed655b.bd97fb",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1673.2330017089844,
    "y": 1181.5661749839783,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "f7779e2d.37621"
      ]
    ]
  },
  {
    "id": "b7fae121.44ba7",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1670.23291015625,
    "y": 1231.5661597251892,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "b98ba5f6.13f1f8"
      ]
    ]
  },
  {
    "id": "62f66369.cc0c1c",
    "type": "comment",
    "name": "GET connection-attachment-ar to store AR data from mdsal",
    "info": "",
    "comments": "",
    "x": 2182.5040855407715,
    "y": 468.503945350647,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "9290cc56.5053",
    "type": "comment",
    "name": "Set source end point",
    "info": "",
    "comments": "",
    "x": 672.0039825439453,
    "y": 557.2539653778076,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "f5e8e1c8.46298",
    "type": "set",
    "name": "set tmp.ar.parent-service-instance-id",
    "xml": "<set>\n<parameter name='tmp.ar.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n\n",
    "comments": "",
    "x": 723.0000762939453,
    "y": 766.0000882148743,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "d0475d22.15b97",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1083.000228881836,
    "y": 837.0000748634338,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "623d8d28.212994"
      ]
    ]
  },
  {
    "id": "b0b29ede.9f732",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1074.8520317077637,
    "y": 872.0661597251892,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "962f738f.25f05"
      ]
    ]
  },
  {
    "id": "962f738f.25f05",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Parent service data not available\" />\n    \n",
    "comments": "",
    "x": 1221.0008125305176,
    "y": 871.3335709571838,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "623d8d28.212994",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1214.0003242492676,
    "y": 837.0001358985901,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "c9893a00.c28658",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN provided attachment resource not found\" />\n    \n",
    "comments": "",
    "x": 2745.000556945801,
    "y": 1035.0002627372742,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "8bd33391.e91a4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2730.0006790161133,
    "y": 1002.0002474784851,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "e64a37c7.f66948",
    "type": "set",
    "name": "set tmp.found-in-ar tmp.found-in-network tmp.ep-available to false",
    "xml": "<set>\n<parameter name='tmp.found-in-ar' value='false' />\n<parameter name='tmp.found-in-network' value='false' />\n<parameter name='tmp.ep-available' value='false' />",
    "comments": "",
    "x": 809.0000152587891,
    "y": 939.0000624656677,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "fc331758.5b2778",
    "type": "comment",
    "name": "If other EP exists set destination end point",
    "info": "Check if other allotted resource is available.",
    "comments": "",
    "x": 726.0000152587891,
    "y": 1117.0000109672546,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "93383afb.68afc8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1466.0001373291016,
    "y": 1444.000292301178,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "23230d18.7a6212",
        "a2526066.96f0c",
        "93d759ca.c80638",
        "cfe2307e.244ab",
        "b727775.7f84888",
        "373cb481.0be6cc",
        "9ebd0cde.5ee4a",
        "3f0a30ad.0a05f"
      ]
    ]
  },
  {
    "id": "23230d18.7a6212",
    "type": "switchNode",
    "name": "switch access-node-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-node-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1708.5104389190674,
    "y": 1314.0106887817383,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "6e6de50.27a681c"
      ]
    ]
  },
  {
    "id": "a2526066.96f0c",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1681.5003910064697,
    "y": 1619.0006523132324,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "93d759ca.c80638",
    "type": "switchNode",
    "name": "switch access-ltp-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-ltp-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1700.0002689361572,
    "y": 1357.7782201766968,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "4537bdaa.d5e104"
      ]
    ]
  },
  {
    "id": "cfe2307e.244ab",
    "type": "switchNode",
    "name": "switch clientSignal",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'clientSignal'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1694.0003070831299,
    "y": 1403.7782669067383,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "7a3fa09e.aa469"
      ]
    ]
  },
  {
    "id": "b727775.7f84888",
    "type": "switchNode",
    "name": "switch cVLAN",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'cVLAN'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1677.9898090362549,
    "y": 1442.7677688598633,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "97596f16.2d148"
      ]
    ]
  },
  {
    "id": "6e6de50.27a681c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1886.2223529815674,
    "y": 1314.6670608520508,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "98c866c4.5a0d58"
      ]
    ]
  },
  {
    "id": "98c866c4.5a0d58",
    "type": "set",
    "name": "set dst-access-node-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2061.2223529815674,
    "y": 1314.2670359611511,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "4537bdaa.d5e104",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1881.7122211456299,
    "y": 1357.4345169067383,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "779f9f70.9b8e"
      ]
    ]
  },
  {
    "id": "7a3fa09e.aa469",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1881.7122211456299,
    "y": 1403.4345169067383,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "f9bbfd69.a91aa"
      ]
    ]
  },
  {
    "id": "97596f16.2d148",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1881.7017230987549,
    "y": 1442.4241409301758,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "9e73cdad.1270d"
      ]
    ]
  },
  {
    "id": "34353928.90fd66",
    "type": "for",
    "name": "for idx..tmp.ep.parameters[]",
    "xml": "<for index='idx' start='0' end='`$tmp.ep.parameters.param_length`'>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1319,
    "y": 1331.9999976158142,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "93383afb.68afc8"
      ]
    ]
  },
  {
    "id": "f7779e2d.37621",
    "type": "set",
    "name": "set tmp.ep.parameters",
    "xml": "<set>\n<parameter name='tmp.ep.parameters.' value='`$mdsal-other-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.`' />\n",
    "comments": "",
    "x": 1885.0000553131104,
    "y": 1181.000072002411,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "b98ba5f6.13f1f8",
    "type": "set",
    "name": "set tmp.ep.parameters",
    "xml": "<set>\n<parameter name='tmp.ep.parameters.' value='`$tmp.network.network-data.network-request-input.network-input-parameters.`' />\n",
    "comments": "",
    "x": 1881.999963760376,
    "y": 1227.0000567436218,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "779f9f70.9b8e",
    "type": "set",
    "name": "set dst-access-node-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2059.0001850128174,
    "y": 1357.0003128051758,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "f9bbfd69.a91aa",
    "type": "set",
    "name": "set dst-clientSignal",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.clientSignal' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2053.0001850128174,
    "y": 1401.0003128051758,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "9e73cdad.1270d",
    "type": "set",
    "name": "set dst-cVLAN",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.cVLAN' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2044.0001850128174,
    "y": 1440.0003128051758,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "9a68bff2.8c292",
    "type": "comment",
    "name": "Get controller info and send request",
    "info": "",
    "comments": "",
    "x": 1926.000057220459,
    "y": 1911.0001511573792,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "aa539917.f17c98",
    "type": "execute",
    "name": "execute RestApiCallNode Create ethernet Service",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 2464.0008239746094,
    "y": 2179.0013360977173,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "129cac0c.055ac4",
        "470289f4.54d198"
      ]
    ]
  },
  {
    "id": "129cac0c.055ac4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2797.000648498535,
    "y": 2188.0015811920166,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "540c8068.f38"
      ]
    ]
  },
  {
    "id": "540c8068.f38",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 2945.000648498535,
    "y": 2186.001459121704,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "86d52886.e02b08",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
    "comments": "",
    "x": 2927.0006790161133,
    "y": 2133.001519203186,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "470289f4.54d198",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2788.000587463379,
    "y": 2133.001519203186,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "86d52886.e02b08"
      ]
    ]
  },
  {
    "id": "d001a7e2.45abd8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 897.7624244689941,
    "y": 2134.953706264496,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "f4c6242e.026e78"
      ]
    ]
  },
  {
    "id": "f4c6242e.026e78",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments": "",
    "x": 1064.2862453460693,
    "y": 2161.5727133750916,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "5249365f.05f8c8",
    "type": "failure",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 899.8576526641846,
    "y": 2182.715548992157,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "f4c6242e.026e78"
      ]
    ]
  },
  {
    "id": "f04e271d.103d68",
    "type": "comment",
    "name": "Save Resource to AAI",
    "info": "",
    "comments": "",
    "x": 671.8100681304932,
    "y": 2123.3028693199158,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "625b8a7b.c27e14",
    "type": "set",
    "name": "set output to api handler",
    "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='connection-attachment-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $connection-attachment-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments": "",
    "x": 686.5777645111084,
    "y": 2044.8283505439758,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "b625537f.a1fdd",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 646.9909362792969,
    "y": 2230.4441390037537,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "e5693b1c.1aac88",
    "type": "execute",
    "name": "execute RestApiCallNode - PUT AR by id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.sotn-attachment.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 739.3098468780518,
    "y": 1969.4692034721375,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "cfef9f3f.14c39",
        "72aa50f4.96321",
        "28a18b03.896b34"
      ]
    ]
  },
  {
    "id": "cfef9f3f.14c39",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 993.9512691497803,
    "y": 2013.800597667694,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "492ba4ec.f6b39c"
      ]
    ]
  },
  {
    "id": "72aa50f4.96321",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 995.9512920379639,
    "y": 1972.3005618080497,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "492ba4ec.f6b39c"
      ]
    ]
  },
  {
    "id": "28a18b03.896b34",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 999.7013759613037,
    "y": 1923.6577143669128,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "85d2ed51.1b8c4"
      ]
    ]
  },
  {
    "id": "492ba4ec.f6b39c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
    "comments": "",
    "x": 1154.70139503479,
    "y": 1992.0506281852722,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "85d2ed51.1b8c4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1127.3573207855225,
    "y": 1925.8498826026917,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "e420c4c5.b6aac8",
    "type": "set",
    "name": "set ar-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-status.action' value=\"`$connection-attachment-topology-operation-input.request-information.request-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-name' value=\"connection-attachment-topology-operation\" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-action' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$connection-attachment-topology-operation-input.request-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$connection-attachment-topology-operation-input.service-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.` \" />",
    "comments": "",
    "x": 641.5234622955322,
    "y": 1803.8501045703888,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "31063248.d169de",
    "type": "execute",
    "name": "execute getTime",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 658.80930519104,
    "y": 1876.469702243805,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "f27d2f2b.5f557",
    "type": "set",
    "name": "set allotted-resource-oper-status",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='Active' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-topology-operation-input.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
    "comments": "",
    "x": 708.7963848114014,
    "y": 1913.4207825660706,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "9257aeaa.1b50e",
    "type": "set",
    "name": "set model-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.connection-attachment-topology.onap-model-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.` \" />",
    "comments": "",
    "x": 655.3650035858154,
    "y": 1843.0247550010681,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "32d6bb38.221fd4",
    "type": "comment",
    "name": "Prepare data for allotted-resource addition to MDSAL",
    "info": "This will add to allotted-resource which is present inside service.",
    "comments": "",
    "x": 768.69846534729,
    "y": 1764.0247070789337,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "8d90c1db.edb92",
    "type": "comment",
    "name": "Add to allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 710.2782917022705,
    "y": 1731.4380087852478,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "8bb4a5cf.68ff78",
    "type": "update",
    "name": "update AAI allotted-resource",
    "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $connection-attachment-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $connection-attachment-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $connection-attachment-topology-operation-input.service-information.service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"description\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-type`\" />\n\t<parameter name=\"selflink\" value=\"`$tmp.ar.self-link`\" />\n\t<parameter name=\"model-invariant-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-invariant-uuid`\" />\n\t<parameter name=\"model-version-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-uuid`\" />\n\t<parameter name=\"operational-status\" value=\"Active\" />\n",
    "comments": "",
    "outputs": 1,
    "x": 698.2543468475342,
    "y": 2160.75501203537,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "d001a7e2.45abd8",
        "5249365f.05f8c8"
      ]
    ]
  },
  {
    "id": "f242ac55.63689",
    "type": "execute",
    "name": "execute RestApiCallNode getPath from OOF",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.oof-getpath.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.oof.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.oof.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1507.004306793213,
    "y": 1723.2546639442444,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "8ebd53f.a1c8db",
        "4a1f8620.db9dd8"
      ]
    ]
  },
  {
    "id": "8ebd53f.a1c8db",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1747.0044479370117,
    "y": 1747.2546334266663,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "386f994c.1e59a6"
      ]
    ]
  },
  {
    "id": "2728f3f1.18be8c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing OOF api\" />\n",
    "comments": "",
    "x": 1886.004482269287,
    "y": 1696.2547249794006,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "4a1f8620.db9dd8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1746.0042343139648,
    "y": 1696.2547240257263,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "2728f3f1.18be8c"
      ]
    ]
  },
  {
    "id": "f4212815.8844c8",
    "type": "comment",
    "name": "Get VPNs from OOF",
    "info": "",
    "comments": "",
    "x": 1493.008228302002,
    "y": 1690.2586636543274,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "30312f10.31bce",
    "type": "for",
    "name": "for vidx..oof.vpns_length[]",
    "xml": "<for index='vidx' start='0' end='`$oof.vpns_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 1447.004150390625,
    "y": 1805.5043921470642,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "6a968eb5.e990c"
      ]
    ]
  },
  {
    "id": "50ffe7da.bf4678",
    "type": "comment",
    "name": "Loop through VPN and configure them",
    "info": "",
    "comments": "",
    "x": 1493.0046005249023,
    "y": 1940.0047698020935,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "5656fc8f.8dd814",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'name'`\">\n                \n",
    "comments": "",
    "outputs": 1,
    "x": 2686.788330078125,
    "y": 1277.1218237876892,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "55653cd7.ec43f4"
      ]
    ]
  },
  {
    "id": "55653cd7.ec43f4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2875.788299560547,
    "y": 1277.1218090057373,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "5525b0a7.6138f"
      ]
    ]
  },
  {
    "id": "5525b0a7.6138f",
    "type": "set",
    "name": "set etht-svc-name & bandwidth-profile-name",
    "xml": "<set>\n<parameter name='prop.global.sotn.etht-svc-name' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n<parameter name='prop.global.sotn.bandwidth-profile-name' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 3116.78861618042,
    "y": 1276.721863746643,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "831174d3.18ba68",
    "type": "switchNode",
    "name": "switch description",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'description'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2699.6282081604004,
    "y": 1312.1219186782837,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "3b411fae.953a4"
      ]
    ]
  },
  {
    "id": "3b411fae.953a4",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2874.628273010254,
    "y": 1314.121904373169,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "8774460.14dcdb8"
      ]
    ]
  },
  {
    "id": "8774460.14dcdb8",
    "type": "set",
    "name": "set etht-svc-descr",
    "xml": "<set>\n<parameter name='prop.global.sotn.etht-svc-descr' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 3030.9615898132324,
    "y": 1311.5829792022705,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "28da2331.d9adbc",
    "type": "switchNode",
    "name": "switch tenantId",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'tenantId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2695.010471343994,
    "y": 1345.4553089141846,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "ada04353.d80d1"
      ]
    ]
  },
  {
    "id": "ada04353.d80d1",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2873.0104751586914,
    "y": 1349.455186843872,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "cee74467.1a9228"
      ]
    ]
  },
  {
    "id": "cee74467.1a9228",
    "type": "set",
    "name": "set tenantId",
    "xml": "<set>\n<parameter name='prop.global.sotn.tenantId' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 3011.0106620788574,
    "y": 1346.0551624298096,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "8c9ddaa9.6e1178",
    "type": "switchNode",
    "name": "switch cir",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'cir'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2677.850070953369,
    "y": 1418.4552640914917,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "cd954fdf.ea0ed"
      ]
    ]
  },
  {
    "id": "cd954fdf.ea0ed",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2872.8501358032227,
    "y": 1419.4552640914917,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "31bd7e24.629462"
      ]
    ]
  },
  {
    "id": "31bd7e24.629462",
    "type": "set",
    "name": "set cir",
    "xml": "<set>\n<parameter name='prop.sotn.cir' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 2997.18363571167,
    "y": 1417.9163389205933,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "5b35ac60.b06374",
    "type": "switchNode",
    "name": "switch vpnType",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'vpnType'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2692.158359527588,
    "y": 1381.2329740524292,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "1d4c9619.a6669a"
      ]
    ]
  },
  {
    "id": "1d4c9619.a6669a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2874.158546447754,
    "y": 1384.2329587936401,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "bd64b5e6.539838"
      ]
    ]
  },
  {
    "id": "bd64b5e6.539838",
    "type": "set",
    "name": "set vpnType",
    "xml": "<set>\n<parameter name='prop.global.sotn.vpnType' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 3010.492290496826,
    "y": 1380.694200515747,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "cc2b2a86.fe9858",
    "type": "switchNode",
    "name": "switch eir",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'eir'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2673.1404151916504,
    "y": 1452.1531715393066,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "203ce537.bd8b2a"
      ]
    ]
  },
  {
    "id": "203ce537.bd8b2a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2873.1406631469727,
    "y": 1455.1531105041504,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "7faf1119.e88e9"
      ]
    ]
  },
  {
    "id": "7faf1119.e88e9",
    "type": "set",
    "name": "set eir",
    "xml": "<set>\n<parameter name='prop.global.sotn.eir' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 2996.4742851257324,
    "y": 1454.614170074463,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "95f6d795.6654c8",
    "type": "switchNode",
    "name": "switch colorAware",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'colorAware'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2698.141025543213,
    "y": 1486.1530504226685,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "b60ea4bb.5cc238"
      ]
    ]
  },
  {
    "id": "b60ea4bb.5cc238",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2869.1408462524414,
    "y": 1492.152988910675,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "6d5c307a.1a01c"
      ]
    ]
  },
  {
    "id": "6d5c307a.1a01c",
    "type": "set",
    "name": "set colorAware",
    "xml": "<set>\n<parameter name='prop.global.sotn.colorAware' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 3017.47416305542,
    "y": 1492.6142015457153,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "12d0e2b2.41538d",
    "type": "switchNode",
    "name": "switch couplingFlag",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'couplingFlag'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2700.1409645080566,
    "y": 1522.153112411499,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "9768f5df.e54b58"
      ]
    ]
  },
  {
    "id": "9768f5df.e54b58",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2872.1408462524414,
    "y": 1531.153081893921,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "9d447a7c.f87728"
      ]
    ]
  },
  {
    "id": "9d447a7c.f87728",
    "type": "set",
    "name": "set couplingFlag",
    "xml": "<set>\n<parameter name='prop.global.sotn.couplingFlag' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 3025.47416305542,
    "y": 1531.6142024993896,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "23c26849.b1be88",
    "type": "comment",
    "name": "Check if other EP exists in SOTNConnectionResource",
    "info": "",
    "comments": "",
    "x": 2831.343994140625,
    "y": 1140.7884497642517,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "1c7f6b36.0dde35",
    "type": "comment",
    "name": "Get other global parameters from network",
    "info": "",
    "comments": "",
    "x": 2767.34375,
    "y": 1226.7884497642517,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "373cb481.0be6cc",
    "type": "switchNode",
    "name": "switch access-provider-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-provider-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1715.5661029815674,
    "y": 1488.2329788208008,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "ff1ef452.ac6398"
      ]
    ]
  },
  {
    "id": "ff1ef452.ac6398",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1902.5661029815674,
    "y": 1484.2329788208008,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "ed2e9db3.52782"
      ]
    ]
  },
  {
    "id": "ed2e9db3.52782",
    "type": "set",
    "name": "set access-provider-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 2070.5661029815674,
    "y": 1484.8329849243164,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "9ebd0cde.5ee4a",
    "type": "switchNode",
    "name": "switch access-client-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-client-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1706.5661182403564,
    "y": 1531.2434272766113,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "6a1f9494.a9099c"
      ]
    ]
  },
  {
    "id": "6a1f9494.a9099c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1893.5661182403564,
    "y": 1527.2434272766113,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "5c104369.10385c"
      ]
    ]
  },
  {
    "id": "5c104369.10385c",
    "type": "set",
    "name": "set access-client-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 2061.5661182403564,
    "y": 1527.843433380127,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "3f0a30ad.0a05f",
    "type": "switchNode",
    "name": "switch access-topology-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-topology-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1719.566062927246,
    "y": 1573.2434582710266,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "b8481b61.974128"
      ]
    ]
  },
  {
    "id": "b8481b61.974128",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1906.566062927246,
    "y": 1569.2434582710266,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "cd99ec59.16d01"
      ]
    ]
  },
  {
    "id": "cd99ec59.16d01",
    "type": "set",
    "name": "set access-topology-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 2074.566062927246,
    "y": 1569.8434643745422,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "6a968eb5.e990c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1670.121467590332,
    "y": 1842.3444514274597,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "25415b54.636c54",
        "a5206342.9aba",
        "51f40b71.957074",
        "f753496f.fd6098",
        "a5fc88b6.7da8a8",
        "48526f97.44c48",
        "e2b95315.238d5",
        "1f7c3b05.6c25b5",
        "15600759.2f8af9",
        "38b5d1f7.8043be",
        "3f572112.50e40e"
      ]
    ]
  },
  {
    "id": "94168d9.4338d7",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 2311.566131591797,
    "y": 1906.67764377594,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "1f7c3b05.6c25b5",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.thirdparty-sdnc-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1928.0660400390625,
    "y": 1943.6775832176208,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "530a02a.35bc5fc",
        "69cd2500.075b9c",
        "30e7132.e91f7ec"
      ]
    ]
  },
  {
    "id": "530a02a.35bc5fc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2148.065975189209,
    "y": 1907.6775522232056,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "94168d9.4338d7"
      ]
    ]
  },
  {
    "id": "69cd2500.075b9c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2157.556915283203,
    "y": 1948.251558303833,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "5bd73e6e.fe56f"
      ]
    ]
  },
  {
    "id": "30e7132.e91f7ec",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2152.889892578125,
    "y": 1984.5848712921143,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "af020f5f.af078"
      ]
    ]
  },
  {
    "id": "5bd73e6e.fe56f",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 2304.1282653808594,
    "y": 1944.5373849868774,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "af020f5f.af078",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 2307.6625366210938,
    "y": 1986.024019241333,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "e2b95315.238d5",
    "type": "get-resource",
    "name": "get-resource pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $oof.vpn.access-node-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.pnf' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1873.565933227539,
    "y": 1852.6772270202637,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "14ef11a9.e55e2e",
        "226a17e2.188c38",
        "6e24acbd.f1e944"
      ]
    ]
  },
  {
    "id": "14ef11a9.e55e2e",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2055.5659790039062,
    "y": 1797.6773371696472,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "24ab4d52.5b5102"
      ]
    ]
  },
  {
    "id": "226a17e2.188c38",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2056.0568809509277,
    "y": 1835.2514338493347,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "c7278eff.a4e77"
      ]
    ]
  },
  {
    "id": "6e24acbd.f1e944",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2047.389892578125,
    "y": 1868.5848088264465,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "86f1cee5.6a47d"
      ]
    ]
  },
  {
    "id": "c7278eff.a4e77",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 2203.628505706787,
    "y": 1834.5373225212097,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "86f1cee5.6a47d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 2201.1625366210938,
    "y": 1868.0239567756653,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "24ab4d52.5b5102",
    "type": "set",
    "name": "set tmp.thirdparty-sdnc-id",
    "xml": "<set>\n<parameter name='tmp.thirdparty-sdnc-id' value=\"`$tmp.aai.pnf.relationship-list.relationship[0].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 2240.5659790039062,
    "y": 1796.6774592399597,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "c836a451.421728",
    "type": "comment",
    "name": "get domain controller information",
    "info": "",
    "comments": "",
    "x": 1924.0698471069336,
    "y": 1819.681182384491,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "15600759.2f8af9",
    "type": "set",
    "name": "set oof.vpn",
    "xml": "<set>\n<parameter name='oof.vpn.' value='`$oof.vpns[$vidx].`' />",
    "comments": "",
    "x": 1885.565933227539,
    "y": 1773.7883105278015,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "a5206342.9aba",
    "type": "save",
    "name": "save VPN resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.vpnName' >\n<parameter name='vpn-id' value='`$tmp.vpnName`' />\n<parameter name='vpn-name' value='`$tmp.vpnName`' />\n<parameter name='access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='src-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name='dst-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$oof.vpn.dst-access-ltp-id`' />\n<parameter name='vpn-type' value='`$prop.global.sotn.vpnType`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />",
    "comments": "",
    "outputs": 1,
    "x": 1900.0314102172852,
    "y": 2350.750671863556,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "51f40b71.957074",
    "type": "set",
    "name": "set tmp.vpnName",
    "xml": "<set>\n<parameter name='tmp.vpnName' value=\"`$oof.vpn.access-node-id + '-' + $prop.global.sotn.etht-svc-name`\" />",
    "comments": "",
    "x": 1876.5314102172852,
    "y": 2303.2503685951233,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "f753496f.fd6098",
    "type": "save",
    "name": "save connectivity relationship in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $mdsal-psd.service-data.networks.network[0].network-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$mdsal-psd.service-data.networks.network[0].network-id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1935.0314102172852,
    "y": 2395.750427722931,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "b6eef9a7.432da8",
    "type": "comment",
    "name": "save vpn and its relation to AAI",
    "info": "",
    "comments": "",
    "x": 1918.031608581543,
    "y": 2264.7506375312805,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "25415b54.636c54",
    "type": "set",
    "name": "set src-ltpId dst-ltpId",
    "xml": "<set>\n<parameter name='src-ltpId' value=\"`'nodeId-' + $oof.vpn.access-node-id + '-ltpId-' + $oof.vpn.src-access-ltp-id`\" />\n<parameter name='dst-ltpId' value=\"`'nodeId-' + $oof.vpn.access-node-id + '-ltpId-' + $oof.vpn.dst-access-ltp-id`\" />",
    "comments": "",
    "x": 1887.0314407348633,
    "y": 2435.750547885895,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "a5fc88b6.7da8a8",
    "type": "save",
    "name": "save srcLTP relationship in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $src-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-ltpId`\" />\n\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1921.0316925048828,
    "y": 2475.50075674057,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "48526f97.44c48",
    "type": "save",
    "name": "save dstLTP relationship in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $dst-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$dst-ltpId`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1919.0315246582031,
    "y": 2521.2505955696106,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "c941958.f53f068",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 865.0351867675781,
    "y": 626.0039095878601,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "bf04a12d.5ab3a",
        "5803dc5e.f9b2f4"
      ]
    ]
  },
  {
    "id": "4e69710c.777f7",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource parent service data",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-psd`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-psd\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 792.0353393554688,
    "y": 853.0040726661682,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "d0475d22.15b97",
        "b0b29ede.9f732"
      ]
    ]
  },
  {
    "id": "7b1a01af.62e07",
    "type": "execute",
    "name": "get parent-service-data url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-psd\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.parent-service-instance-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 692.0352478027344,
    "y": 816.0039057731628,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "da051cb.7908ce",
    "type": "execute",
    "name": "generate tmp.ar-other-url-connection",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-other-url-connection\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.provided-ar.allotted-resource-id`\"/>\n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2106.0316009521484,
    "y": 972.3334670066833,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "511eded7.ee48c",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-other-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-other-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2243.032241821289,
    "y": 1014.8333315849304,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "df822a12.2f4cb8",
        "6d247d3c.af7454"
      ]
    ]
  },
  {
    "id": "386f994c.1e59a6",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1868.0315208435059,
    "y": 1738.0001168251038,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "ef27420c.8613d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1245.0001335144043,
    "y": 1763.0003008842468,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "f242ac55.63689",
        "30312f10.31bce"
      ]
    ]
  },
  {
    "id": "d906524b.eeb18",
    "type": "outcome",
    "name": "outcome PendingDelete",
    "xml": "<outcome value='PendingDelete'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2319.0625915527344,
    "y": 578.03129529953,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "e6b0a51.a605158"
      ]
    ]
  },
  {
    "id": "e6b0a51.a605158",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2503.062602996826,
    "y": 574.03129529953,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "38b5d1f7.8043be",
    "type": "execute",
    "name": "execute RestApiCallNode Get token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
    "comments": "",
    "outputs": 1,
    "x": 1948.5351867675781,
    "y": 2070.003924846649,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "e9cfbd0.6beca4",
        "329096c7.0b55ba"
      ]
    ]
  },
  {
    "id": "e9cfbd0.6beca4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2183.535186767578,
    "y": 2048.003924846649,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "44854a0f.60c554"
      ]
    ]
  },
  {
    "id": "329096c7.0b55ba",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2175.785186767578,
    "y": 2101.6468081474304,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "8f0a300b.e6801"
      ]
    ]
  },
  {
    "id": "44854a0f.60c554",
    "type": "set",
    "name": "set token-id",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
    "comments": "",
    "x": 2337.535186767578,
    "y": 2049.003924846649,
    "z": "e47fc805.c5c588",
    "wires": []
  },
  {
    "id": "3f572112.50e40e",
    "type": "switchNode",
    "name": "switch prop.sdncRestApi.token_id",
    "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1951.5312194824219,
    "y": 2167.031491279602,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "71416b24.4767f4",
        "95a4ed31.47c83"
      ]
    ]
  },
  {
    "id": "71416b24.4767f4",
    "type": "other",
    "name": "Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 2177.531467437744,
    "y": 2143.0313682556152,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "9a737a81.94bba8"
      ]
    ]
  },
  {
    "id": "95a4ed31.47c83",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2171.5313453674316,
    "y": 2206.5313692092896,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "aa539917.f17c98"
      ]
    ]
  },
  {
    "id": "8f0a300b.e6801",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2334.53125,
    "y": 2099.03125,
    "z": "e47fc805.c5c588",
    "wires": [
      []
    ]
  },
  {
    "id": "9a737a81.94bba8",
    "type": "execute",
    "name": "execute RestApiCallNode Create ethernet Service",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2465.53125,
    "y": 2140.03125,
    "z": "e47fc805.c5c588",
    "wires": [
      [
        "470289f4.54d198",
        "129cac0c.055ac4"
      ]
    ]
  }
]
