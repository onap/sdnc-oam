[
    {
        "id": "856df3f7.e848d",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 287.9998779296875,
        "y": 432.4548645019531,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "c3ac539a.75d23"
            ]
        ]
    },
    {
        "id": "c3ac539a.75d23",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 181.99988174438477,
        "y": 504.4548816680908,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "42cf8419.06f25c"
            ]
        ]
    },
    {
        "id": "42cf8419.06f25c",
        "type": "method",
        "name": "sotn-attachment-topology-operation-activate",
        "xml": "<method rpc='sotn-attachment-topology-operation-activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 170,
        "y": 592.4548645019531,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "44229f8c.39b5a"
            ]
        ]
    },
    {
        "id": "44229f8c.39b5a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 186,
        "y": 1147.4551091194153,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "ba9e8375.777f",
                "15d45773.32c279",
                "a32bd31f.e0ecd",
                "d86c13ce.944c4",
                "47caa47d.16426c",
                "759ba274.db6d0c",
                "4c87cfa1.02c6c",
                "b760f3b3.babf2",
                "b571fb6b.8ab608",
                "b52dba2d.a71bc8",
                "76fbe2f6.cb133c",
                "c339c30c.1d058",
                "6927072b.434fa8",
                "fecc8e1.3af3a7",
                "71a15b15.32e354",
                "7f03f367.f1262c",
                "be2b6004.6abeb",
                "e4d724bf.bef2c8",
                "2c5393b4.18384c",
                "a54e0786.d45e68"
            ]
        ]
    },
    {
        "id": "ba9e8375.777f",
        "type": "set",
        "name": "set tmp.ar.allotted-resource-id,etc",
        "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
        "comments": "",
        "x": 582.9934387207031,
        "y": 546.4483513832092,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "8dfc51c4.4907a",
        "type": "comment",
        "name": "set tmp ar-id to fetch resource from MDSAL",
        "info": "",
        "comments": "",
        "x": 597.4536285400391,
        "y": 499.48014736175537,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "15d45773.32c279",
        "type": "set",
        "name": "set tmp.ar.self-link",
        "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:connection-attachment-allotted-resources/connection-attachment-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/connection-attachment-topology/'` \" />\n\n",
        "comments": "",
        "x": 536.9933776855469,
        "y": 639.448356628418,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "47caa47d.16426c",
        "type": "execute",
        "name": "execute Properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
        "comments": "",
        "outputs": 1,
        "x": 543.2552680969238,
        "y": 727.1150856018066,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "a32bd31f.e0ecd",
        "type": "execute",
        "name": "generate allotted-resource tmp.ar-url",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 590.2553253173828,
        "y": 815.1150894165039,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "722a6658.bf16e8",
        "type": "comment",
        "name": "GET connection-attachment-allotted-resource from mdsal",
        "info": "",
        "comments": "",
        "x": 622.3081359863281,
        "y": 934.9935235977173,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "f15283c1.aa42d",
        "type": "comment",
        "name": "Used for setting output to API Handler",
        "info": "",
        "comments": "",
        "x": 576.4932861328125,
        "y": 595.4483661651611,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "56bc8415.3a63fc",
        "type": "comment",
        "name": "Obtain different URL, template location etc",
        "info": "For saving resource information to MDSAL & for AAI",
        "comments": "",
        "x": 594.4932518005371,
        "y": 681.3372468948364,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "d454f4dd.1be708",
        "type": "comment",
        "name": "Used to Get AR by id to MDSAL, same as self-link",
        "info": "",
        "comments": "",
        "x": 620.4932708740234,
        "y": 768.3372058868408,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "860a625.2d0bba",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1096.666669845581,
        "y": 963.4548492431641,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "23f7f9e5.e74c26"
            ]
        ]
    },
    {
        "id": "23f7f9e5.e74c26",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1240.666748046875,
        "y": 920.9547672271729,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "50c8dc73.ad5724"
            ]
        ]
    },
    {
        "id": "50c8dc73.ad5724",
        "type": "switchNode",
        "name": "switch cr length",
        "xml": "<switch test='`$mdsal-ar.connection-attachment-allotted-resource_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1409.5241718292236,
        "y": 918.573938369751,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "c054c953.458078",
                "79145839.1bfe98"
            ]
        ]
    },
    {
        "id": "c054c953.458078",
        "type": "other",
        "name": "outcome 1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1564.857307434082,
        "y": 890.5738534927368,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "46a60f4d.34912"
            ]
        ]
    },
    {
        "id": "46a60f4d.34912",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic='true'>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1723.3811111450195,
        "y": 888.4787006378174,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "df6acc2d.ff6de",
                "612880e0.04607",
                "cfe330b5.d7e03"
            ]
        ]
    },
    {
        "id": "bb2fd456.9a1798",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Connection attachment resource not exist\" />\n    \n",
        "comments": "",
        "x": 1663.51904296875,
        "y": 995.5209350585938,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "db78a108.063fb",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1088.5184726715088,
        "y": 998.5209341049194,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "333707db.05b3b8"
            ]
        ]
    },
    {
        "id": "333707db.05b3b8",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1268.5184230804443,
        "y": 999.1874847412109,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "bb2fd456.9a1798"
            ]
        ]
    },
    {
        "id": "79145839.1bfe98",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1556.1853103637695,
        "y": 949.8542280197144,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "bb2fd456.9a1798"
            ]
        ]
    },
    {
        "id": "df6acc2d.ff6de",
        "type": "set",
        "name": "set connection-attachment-ar from get",
        "xml": "<set>\n<parameter name='connection-attachment-ar.' value='$mdsal-ar.connection-attachment-allotted-resource[0].' />\n",
        "comments": "",
        "x": 1970.444564819336,
        "y": 861.4549527168274,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "cfe330b5.d7e03",
        "type": "set",
        "name": "set oper-status",
        "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-ar.allotted-resource-status.rpc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
        "comments": "",
        "x": 1904.444595336914,
        "y": 934.8834552764893,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "612880e0.04607",
        "type": "switchNode",
        "name": "switch order-status",
        "xml": "<switch test='`$connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1914.4443740844727,
        "y": 900.4548892974854,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "59d3ffeb.34439",
                "b4436494.1a02b8",
                "3d1a678c.8bbdd8"
            ]
        ]
    },
    {
        "id": "59d3ffeb.34439",
        "type": "outcome",
        "name": "outcome Created",
        "xml": "<outcome value='Created'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2150.0444564819336,
        "y": 894.4549202919006,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "df7e0809.5f60a8"
            ]
        ]
    },
    {
        "id": "3d1a678c.8bbdd8",
        "type": "outcome",
        "name": "outcome Other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2143.7589569091797,
        "y": 974.8835549354553,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "29c5c973.948626"
            ]
        ]
    },
    {
        "id": "df7e0809.5f60a8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2308.5151290893555,
        "y": 894.8305759429932,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "29c5c973.948626",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" \n    value=\"`'Existing connection-attachment-allotted-resource with order status of ' + $connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status + '.'`\" />\n",
        "comments": "",
        "x": 2319.6667709350586,
        "y": 973.4549541473389,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "e7c9e6c8.22ec78",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:sotn-get-saved-ar-param",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='sotn-get-saved-ar-param' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 807.3029289245605,
        "y": 1045.9484691619873,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "759ba274.db6d0c",
        "type": "block",
        "name": "block: atomic",
        "xml": "<block atomic=\"true\">\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 501.3090286254883,
        "y": 1046.954839706421,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "e7c9e6c8.22ec78"
            ]
        ]
    },
    {
        "id": "a3f3b1ad.b0019",
        "type": "comment",
        "name": "GET parent-service-data from mdsal to check existence of other End point",
        "info": "",
        "comments": "",
        "x": 674.500244140625,
        "y": 1080.9866170883179,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "76fcae92.3eed7",
        "type": "for",
        "name": "for pidx..mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[]",
        "xml": "<for index='pidx' start='0' end='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1580.185073852539,
        "y": 1244.4590945243835,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "d5a80521.4971a8"
            ]
        ]
    },
    {
        "id": "d86c13ce.944c4",
        "type": "switchNode",
        "name": "switch mdsal-psd.service-data.provided-allotted-resources_length",
        "xml": "<switch test='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 664.1840972900391,
        "y": 1352.1731309890747,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "2966b54a.501cfa",
                "a9c0a3da.bac0f",
                "90fbdee6.96522"
            ]
        ]
    },
    {
        "id": "2966b54a.501cfa",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 992.3271179199219,
        "y": 1425.0304050445557,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "e73ccbba.1ddf58"
            ]
        ]
    },
    {
        "id": "70b1403b.56bf6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1176.4543800354004,
        "y": 1284.1564140319824,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "76fcae92.3eed7",
                "4ca6c420.3d4d6c"
            ]
        ]
    },
    {
        "id": "d5a80521.4971a8",
        "type": "switchNode",
        "name": "switch allotted-resource-id",
        "xml": "<switch test=\"`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$pidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2020.296401977539,
        "y": 1241.458896636963,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "fbf9bebd.108b5",
                "1701079a.547728"
            ]
        ]
    },
    {
        "id": "fbf9bebd.108b5",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2193.106616973877,
        "y": 1212.923511505127,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "d1d91e32.6cacd"
            ]
        ]
    },
    {
        "id": "ca9dd6b1.dea908",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2341.867088317871,
        "y": 1269.780598640442,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "74d65b2c.e08474"
            ]
        ]
    },
    {
        "id": "74d65b2c.e08474",
        "type": "set",
        "name": "set tmp.pidx and ptx.consumed-ar",
        "xml": "<set>\n<parameter name='tmp.pidx' value='`$pidx`' />\n<parameter name='tmp.provided-ar.' value='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$pidx].`' />\n<parameter name='tmp.found-in-ar' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
        "comments": "",
        "x": 2576.7245140075684,
        "y": 1268.3521308898926,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "f9f17725.c60488",
        "type": "comment",
        "name": "Check existence of other AR in parent service data",
        "info": "Check if other allotted resource is available.",
        "comments": "",
        "x": 597.4624137878418,
        "y": 1246.3478260040283,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "a9c0a3da.bac0f",
        "type": "other",
        "name": "outcome 1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1006.9795875549316,
        "y": 1364.1320886611938,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "44d59200.c8af1c"
            ]
        ]
    },
    {
        "id": "e73ccbba.1ddf58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: End points not available\" />\n    \n",
        "comments": "",
        "x": 1151.9794654846191,
        "y": 1424.1323337554932,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "90fbdee6.96522",
        "type": "other",
        "name": "outcome 2",
        "xml": "<outcome value='2'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1001.9794006347656,
        "y": 1285.1321144104004,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "70b1403b.56bf6"
            ]
        ]
    },
    {
        "id": "d1d91e32.6cacd",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2351.090831756592,
        "y": 1212.132254600525,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "1701079a.547728",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2200.090473175049,
        "y": 1269.1321144104004,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "ca9dd6b1.dea908"
            ]
        ]
    },
    {
        "id": "4ca6c420.3d4d6c",
        "type": "switchNode",
        "name": "switch tmp.found-in-ar",
        "xml": "<switch test='`$tmp.found-in-ar`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1388.979377746582,
        "y": 1337.9099321365356,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "de2c4f3e.58ca2"
            ]
        ]
    },
    {
        "id": "de2c4f3e.58ca2",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1559.9794120788574,
        "y": 1339.0211534500122,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "81e5e824.bbde88"
            ]
        ]
    },
    {
        "id": "81e5e824.bbde88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1708.979507446289,
        "y": 1339.021152496338,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "ef83619e.fcadf",
                "70f5ae0d.ee9ea"
            ]
        ]
    },
    {
        "id": "a5795c00.0454b8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2455.0973320007324,
        "y": 1355.2500066757202,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "acd4313a.acdba"
            ]
        ]
    },
    {
        "id": "a870baef.09bb38",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2446.94913482666,
        "y": 1390.3160915374756,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "c23d6d08.4c9e6"
            ]
        ]
    },
    {
        "id": "7afdbce8.a487b4",
        "type": "switchNode",
        "name": "switch mdsal-psd.service-data.networks_length",
        "xml": "<switch test='`$mdsal-psd.service-data.networks.network_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1452.3128814697266,
        "y": 1439.354772567749,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "3ae2030c.2e369c",
                "35f89340.b0afec"
            ]
        ]
    },
    {
        "id": "35f89340.b0afec",
        "type": "other",
        "name": "outcome 1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1716.312728881836,
        "y": 1419.2435188293457,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "3440b31f.59dfbc"
            ]
        ]
    },
    {
        "id": "3ae2030c.2e369c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1706.3127899169922,
        "y": 1467.2434902191162,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "41cb4081.5cc8b"
            ]
        ]
    },
    {
        "id": "41cb4081.5cc8b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Incorrect state found more then 1 network\" />\n    \n",
        "comments": "",
        "x": 1844.9651336669922,
        "y": 1469.345251083374,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "835a530e.7655e",
        "type": "set",
        "name": "set tmp.network.",
        "xml": "<set>\n<parameter name='tmp.network.' value='`$mdsal-psd.service-data.networks.network[0].`' />\n\n\n",
        "comments": "",
        "x": 2077.7575874328613,
        "y": 1420.243688583374,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "44d59200.c8af1c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1174.4238967895508,
        "y": 1363.2433557510376,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "7afdbce8.a487b4"
            ]
        ]
    },
    {
        "id": "3440b31f.59dfbc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1875.0904998779297,
        "y": 1422.2433528900146,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "835a530e.7655e",
                "387084b4.ee101c"
            ]
        ]
    },
    {
        "id": "387084b4.ee101c",
        "type": "for",
        "name": "for nidx..tmp.network.network-data.network-request-input.network...[]",
        "xml": "<for index='nidx' start='0' end='`$tmp.network.network-data.network-request-input.network-input-parameters.param_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 2238.0905380249023,
        "y": 1468.243507385254,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "b2211b9d.e49e88"
            ]
        ]
    },
    {
        "id": "b2211b9d.e49e88",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2284.6466064453125,
        "y": 1699.2433166503906,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "ce7f2d9.0fd97d",
                "296fd7a4.634998",
                "d50ba090.29ed",
                "66d0e4de.2681dc",
                "eec873e9.819a7",
                "1068d706.4b4119",
                "d21f1d66.9335f",
                "bee803df.af903",
                "45da451c.99e69c",
                "c3234be0.466328"
            ]
        ]
    },
    {
        "id": "ce7f2d9.0fd97d",
        "type": "switchNode",
        "name": "switch access-node-id",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'access-node-id'`\">",
        "comments": "",
        "outputs": 1,
        "x": 2561.15682220459,
        "y": 1541.2540640830994,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "5cc6ea52.13cad4"
            ]
        ]
    },
    {
        "id": "5cc6ea52.13cad4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2750.156448364258,
        "y": 1543.2539286613464,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "dbd5e88a.b68d18"
            ]
        ]
    },
    {
        "id": "dbd5e88a.b68d18",
        "type": "set",
        "name": "set tmp.found-in-network tmp.ep-available",
        "xml": "<set>\n<parameter name='tmp.found-in-network' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
        "comments": "",
        "x": 3003.156623840332,
        "y": 1542.8539748191833,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "296fd7a4.634998",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 2535.1462745666504,
        "y": 1915.2433552742004,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "c339c30c.1d058",
        "type": "switchNode",
        "name": "switch tmp.ep-available",
        "xml": "<switch test='`$tmp.ep-available`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 527.3126983642578,
        "y": 1547.687665939331,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "66f8b762.86d108",
                "9cb4ba0f.749ab8"
            ]
        ]
    },
    {
        "id": "9cb4ba0f.749ab8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 745.9794178009033,
        "y": 1597.0210227966309,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "27a77fa0.c4aee"
            ]
        ]
    },
    {
        "id": "66f8b762.86d108",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 750.8682193756104,
        "y": 1506.021083831787,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "a01acdad.7b848"
            ]
        ]
    },
    {
        "id": "a01acdad.7b848",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 897.8682155609131,
        "y": 1507.909896850586,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "27a77fa0.c4aee",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 916.0905055999756,
        "y": 1595.020980834961,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "36228b5c.1add84",
                "c3a3291b.9f4668",
                "2222673c.9be3c8"
            ]
        ]
    },
    {
        "id": "36228b5c.1add84",
        "type": "switchNode",
        "name": "switch tmp.found-in-ar",
        "xml": "<switch test='`$tmp.found-in-ar`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1142.2015190124512,
        "y": 1562.020980834961,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "8ea65101.30d46",
                "d5079913.80c4d8"
            ]
        ]
    },
    {
        "id": "8ea65101.30d46",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1337.6459655761719,
        "y": 1540.0210418701172,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "68265a71.7dde04"
            ]
        ]
    },
    {
        "id": "d5079913.80c4d8",
        "type": "outcomeTrue",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1334.6458740234375,
        "y": 1588.0210266113281,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "f6ff2749.20d6b8"
            ]
        ]
    },
    {
        "id": "68265a71.7dde04",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1525.2016296386719,
        "y": 1537.0210418701172,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "1e10edac.a57b22"
            ]
        ]
    },
    {
        "id": "f6ff2749.20d6b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1522.2015380859375,
        "y": 1587.0210266113281,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "63596c05.8bab04"
            ]
        ]
    },
    {
        "id": "3cd1669e.2956fa",
        "type": "comment",
        "name": "GET connection-attachment-ar to store AR data from mdsal",
        "info": "",
        "comments": "",
        "x": 2019.9725914001465,
        "y": 812.9588122367859,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "96f74137.f7998",
        "type": "comment",
        "name": "Set source end point",
        "info": "",
        "comments": "",
        "x": 509.4724884033203,
        "y": 901.7088322639465,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "4c87cfa1.02c6c",
        "type": "set",
        "name": "set tmp.ar.parent-service-instance-id",
        "xml": "<set>\n<parameter name='tmp.ar.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n\n",
        "comments": "",
        "x": 574.9687042236328,
        "y": 1121.4549551010132,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "f3f93c79.0dcb",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 934.9688568115234,
        "y": 1192.4549417495728,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "71285b35.a93954"
            ]
        ]
    },
    {
        "id": "b078a619.3c13b8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 926.8206596374512,
        "y": 1227.5210266113281,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "42089f0a.93012"
            ]
        ]
    },
    {
        "id": "42089f0a.93012",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Parent service data not available\" />\n    \n",
        "comments": "",
        "x": 1072.969440460205,
        "y": 1226.7884378433228,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "71285b35.a93954",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1065.968952178955,
        "y": 1192.455002784729,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "c23d6d08.4c9e6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN provided attachment resource not found\" />\n    \n",
        "comments": "",
        "x": 2596.9691848754883,
        "y": 1390.455129623413,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "acd4313a.acdba",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2581.969306945801,
        "y": 1357.455114364624,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "b760f3b3.babf2",
        "type": "set",
        "name": "set tmp.found-in-ar tmp.found-in-network tmp.ep-available to false",
        "xml": "<set>\n<parameter name='tmp.found-in-ar' value='false' />\n<parameter name='tmp.found-in-network' value='false' />\n<parameter name='tmp.ep-available' value='false' />",
        "comments": "",
        "x": 660.9686431884766,
        "y": 1294.4549293518066,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "61c0c66f.9cb2e8",
        "type": "comment",
        "name": "If other EP exists set destination end point",
        "info": "Check if other allotted resource is available.",
        "comments": "",
        "x": 563.4685211181641,
        "y": 1461.4548778533936,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "f95e3456.773938",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1317.968765258789,
        "y": 1799.455159187317,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "bd500845.16ea38",
                "349a9a1b.d2e8f6",
                "9dd5c1cd.85633",
                "c65490b9.9fe9b",
                "145d9915.1a14e7",
                "14b60e62.9552e2",
                "44bf4a7c.708044",
                "b84af987.adba08"
            ]
        ]
    },
    {
        "id": "bd500845.16ea38",
        "type": "switchNode",
        "name": "switch access-node-id",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-node-id'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1560.4790668487549,
        "y": 1669.4655556678772,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "4565f3d5.aafebc"
            ]
        ]
    },
    {
        "id": "349a9a1b.d2e8f6",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1533.4690189361572,
        "y": 1974.4555191993713,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "9dd5c1cd.85633",
        "type": "switchNode",
        "name": "switch access-ltp-id",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-ltp-id'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1551.9688968658447,
        "y": 1713.2330870628357,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "80dc869e.ab7a58"
            ]
        ]
    },
    {
        "id": "c65490b9.9fe9b",
        "type": "switchNode",
        "name": "switch clientSignal",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'clientSignal'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1545.9689350128174,
        "y": 1759.2331337928772,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "257fa4da.2cce3c"
            ]
        ]
    },
    {
        "id": "145d9915.1a14e7",
        "type": "switchNode",
        "name": "switch cVLAN",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'cVLAN'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1529.9584369659424,
        "y": 1798.2226357460022,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "52fd3d94.d7d2a4"
            ]
        ]
    },
    {
        "id": "4565f3d5.aafebc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1738.1909809112549,
        "y": 1670.1219277381897,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "ef2e4180.488b9"
            ]
        ]
    },
    {
        "id": "ef2e4180.488b9",
        "type": "set",
        "name": "set dst-access-node-id",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$tmp.ep.parameters.param[$idx].value`' />",
        "comments": "",
        "x": 1913.1909809112549,
        "y": 1669.72190284729,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "80dc869e.ab7a58",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1733.6808490753174,
        "y": 1712.8893837928772,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "5c8d584.21faba8"
            ]
        ]
    },
    {
        "id": "257fa4da.2cce3c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1733.6808490753174,
        "y": 1758.8893837928772,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "8b8a921e.bd895"
            ]
        ]
    },
    {
        "id": "52fd3d94.d7d2a4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1733.6703510284424,
        "y": 1797.8790078163147,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "cb174273.1b4b"
            ]
        ]
    },
    {
        "id": "c3a3291b.9f4668",
        "type": "for",
        "name": "for idx..tmp.ep.parameters[]",
        "xml": "<for index='idx' start='0' end='`$tmp.ep.parameters.param_length`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1170.9686279296875,
        "y": 1687.4548645019531,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "f95e3456.773938"
            ]
        ]
    },
    {
        "id": "1e10edac.a57b22",
        "type": "set",
        "name": "set tmp.ep.parameters",
        "xml": "<set>\n<parameter name='tmp.ep.parameters.' value='`$mdsal-other-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.`' />\n",
        "comments": "",
        "x": 1736.9686832427979,
        "y": 1536.4549388885498,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "63596c05.8bab04",
        "type": "set",
        "name": "set tmp.ep.parameters",
        "xml": "<set>\n<parameter name='tmp.ep.parameters.' value='`$tmp.network.network-data.network-request-input.network-input-parameters.`' />\n",
        "comments": "",
        "x": 1733.9685916900635,
        "y": 1582.4549236297607,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "5c8d584.21faba8",
        "type": "set",
        "name": "set dst-access-node-id",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$tmp.ep.parameters.param[$idx].value`' />",
        "comments": "",
        "x": 1910.9688129425049,
        "y": 1712.4551796913147,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "8b8a921e.bd895",
        "type": "set",
        "name": "set dst-clientSignal",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.clientSignal' value='`$tmp.ep.parameters.param[$idx].value`' />",
        "comments": "",
        "x": 1904.9688129425049,
        "y": 1756.4551796913147,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "cb174273.1b4b",
        "type": "set",
        "name": "set dst-cVLAN",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.cVLAN' value='`$tmp.ep.parameters.param[$idx].value`' />",
        "comments": "",
        "x": 1895.9688129425049,
        "y": 1795.4551796913147,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "8ac4c29d.af442",
        "type": "comment",
        "name": "Get controller info and send request",
        "info": "",
        "comments": "",
        "x": 1736,
        "y": 2300,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "e30487d9.fc40e8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 749.7310523986816,
        "y": 2490.4085731506348,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "b5950a83.64a2e8"
            ]
        ]
    },
    {
        "id": "b5950a83.64a2e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
        "comments": "",
        "x": 916.2548732757568,
        "y": 2517.0275802612305,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "3b646004.2813c",
        "type": "failure",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 751.8262805938721,
        "y": 2538.170415878296,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "b5950a83.64a2e8"
            ]
        ]
    },
    {
        "id": "804e67f7.f5fcb8",
        "type": "comment",
        "name": "Save Resource to AAI",
        "info": "",
        "comments": "",
        "x": 509.27857398986816,
        "y": 2467.7577362060547,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "e4d724bf.bef2c8",
        "type": "set",
        "name": "set output to api handler",
        "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='connection-attachment-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $connection-attachment-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
        "comments": "",
        "x": 538.5463924407959,
        "y": 2400.2832174301147,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "a54e0786.d45e68",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 498.9595642089844,
        "y": 2585.8990058898926,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "be2b6004.6abeb",
        "type": "execute",
        "name": "execute RestApiCallNode - PUT AR by id",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.sotn-attachment.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />",
        "comments": "",
        "outputs": 1,
        "x": 591.2784748077393,
        "y": 2324.9240703582764,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "d7bb7d7e.e7376",
                "7647bebc.d34c5",
                "f09cf18.f872f1"
            ]
        ]
    },
    {
        "id": "d7bb7d7e.e7376",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 845.9198970794678,
        "y": 2369.255464553833,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "a250aba9.a5bd58"
            ]
        ]
    },
    {
        "id": "7647bebc.d34c5",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 847.9199199676514,
        "y": 2327.7554286941886,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "a250aba9.a5bd58"
            ]
        ]
    },
    {
        "id": "f09cf18.f872f1",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 851.6700038909912,
        "y": 2279.1125812530518,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "6472d85a.5caad8"
            ]
        ]
    },
    {
        "id": "a250aba9.a5bd58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
        "comments": "",
        "x": 1006.6700229644775,
        "y": 2347.505495071411,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "6472d85a.5caad8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 979.32594871521,
        "y": 2281.3047494888306,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "6927072b.434fa8",
        "type": "set",
        "name": "set ar-data",
        "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-status.action' value=\"`$connection-attachment-topology-operation-input.request-information.request-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-name' value=\"connection-attachment-topology-operation\" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-action' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$connection-attachment-topology-operation-input.request-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$connection-attachment-topology-operation-input.service-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.` \" />",
        "comments": "",
        "x": 493.4920902252197,
        "y": 2159.3049714565277,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "71a15b15.32e354",
        "type": "execute",
        "name": "execute getTime",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 510.77793312072754,
        "y": 2231.924569129944,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "7f03f367.f1262c",
        "type": "set",
        "name": "set allotted-resource-oper-status",
        "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='Active' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-topology-operation-input.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
        "comments": "",
        "x": 560.7650127410889,
        "y": 2268.8756494522095,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "fecc8e1.3af3a7",
        "type": "set",
        "name": "set model-data",
        "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.connection-attachment-topology.onap-model-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.` \" />",
        "comments": "",
        "x": 507.33363151550293,
        "y": 2198.479621887207,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "185d06d5.752689",
        "type": "comment",
        "name": "Prepare data for allotted-resource addition to MDSAL",
        "info": "This will add to allotted-resource which is present inside service.",
        "comments": "",
        "x": 606.166971206665,
        "y": 2108.4795739650726,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "5da46f5f.98698",
        "type": "comment",
        "name": "Add to allotted-resources in mdsal",
        "info": "",
        "comments": "",
        "x": 547.7467975616455,
        "y": 2075.8928756713867,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "2c5393b4.18384c",
        "type": "update",
        "name": "update AAI allotted-resource",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $connection-attachment-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $connection-attachment-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $connection-attachment-topology-operation-input.service-information.service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"description\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-type`\" />\n\t<parameter name=\"selflink\" value=\"`$tmp.ar.self-link`\" />\n\t<parameter name=\"model-invariant-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-invariant-uuid`\" />\n\t<parameter name=\"model-version-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-uuid`\" />\n\t<parameter name=\"operational-status\" value=\"Active\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 550.2229747772217,
        "y": 2516.209878921509,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "e30487d9.fc40e8",
                "3b646004.2813c"
            ]
        ]
    },
    {
        "id": "43e51eef.5c25b",
        "type": "execute",
        "name": "execute RestApiCallNode getPath from OOF",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.oof-getpath.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.oof.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.oof.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1358.9729347229004,
        "y": 2078.7095308303833,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "84ee042e.6dc228",
                "cb8b1fc5.da16f"
            ]
        ]
    },
    {
        "id": "84ee042e.6dc228",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1598.9730758666992,
        "y": 2102.709500312805,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "b5dd8e8d.014ad"
            ]
        ]
    },
    {
        "id": "b48e311d.c6bea",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing OOF api\" />\n",
        "comments": "",
        "x": 1737.9731101989746,
        "y": 2051.7095918655396,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "cb8b1fc5.da16f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1597.9728622436523,
        "y": 2051.7095909118652,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "b48e311d.c6bea"
            ]
        ]
    },
    {
        "id": "916454e5.0a4a68",
        "type": "comment",
        "name": "Get VPNs from OOF",
        "info": "",
        "comments": "",
        "x": 1330.476734161377,
        "y": 2034.7135305404663,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "402ffb02.0bfaf4",
        "type": "for",
        "name": "for vidx..oof.vpns_length[]",
        "xml": "<for index='vidx' start='0' end='`$oof.vpns_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 1298.9727783203125,
        "y": 2160.959259033203,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "6b7692da.e3386c"
            ]
        ]
    },
    {
        "id": "e2733493.b8ec78",
        "type": "comment",
        "name": "Loop through VPN and configure them",
        "info": "",
        "comments": "",
        "x": 1330.4731063842773,
        "y": 2284.4596366882324,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "d50ba090.29ed",
        "type": "switchNode",
        "name": "switch name",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'name'`\">\n                \n",
        "comments": "",
        "outputs": 1,
        "x": 2538.7569580078125,
        "y": 1632.5766906738281,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "d52279cb.ede198"
            ]
        ]
    },
    {
        "id": "d52279cb.ede198",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2727.7569274902344,
        "y": 1632.5766758918762,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "cebd51a0.93918"
            ]
        ]
    },
    {
        "id": "cebd51a0.93918",
        "type": "set",
        "name": "set etht-svc-name & bandwidth-profile-name",
        "xml": "<set>\n<parameter name='ietf-etht-instance0' value='ietf-eth-tran-service:etht-svc.etht-svc-instances[0].' />\n<parameter name='ietf-bw-profile0' value='ietf-eth-tran-service:etht-svc.globals.etht-svc-bandwidth-profiles[0].' />\n<parameter name='ietf-etht-svc-name' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n<parameter name=\"`$ietf-etht-instance0 + 'etht-svc-name'`\" value='`$ietf-etht-svc-name`' />\n<parameter name=\"`$ietf-bw-profile0 + 'bandwidth-profile-name'`\" value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n<parameter name=\"`$ietf-etht-instance0 + 'etht-svc-access-ports[0].ingress-egress-bandwidth-profile-name'`\" value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n<parameter name=\"`$ietf-etht-instance0 + 'etht-svc-access-ports[1].ingress-egress-bandwidth-profile-name'`\" value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />",
        "comments": "",
        "x": 2968.7572441101074,
        "y": 1632.176730632782,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "66d0e4de.2681dc",
        "type": "switchNode",
        "name": "switch description",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'description'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2551.596836090088,
        "y": 1667.5767855644226,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "1de9071b.f26c59"
            ]
        ]
    },
    {
        "id": "1de9071b.f26c59",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2726.5969009399414,
        "y": 1669.5767712593079,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "159dd4c7.a1cdeb"
            ]
        ]
    },
    {
        "id": "159dd4c7.a1cdeb",
        "type": "set",
        "name": "set etht-svc-descr",
        "xml": "<set>\n<parameter name='prop.global.sotn.etht-svc-descr' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
        "comments": "",
        "x": 2882.93021774292,
        "y": 1667.0378460884094,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "eec873e9.819a7",
        "type": "switchNode",
        "name": "switch tenantId",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'tenantId'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2546.9790992736816,
        "y": 1700.9101758003235,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "13291279.e6fefe"
            ]
        ]
    },
    {
        "id": "13291279.e6fefe",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2724.979103088379,
        "y": 1704.910053730011,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "9bcc7bab.93fce8"
            ]
        ]
    },
    {
        "id": "9bcc7bab.93fce8",
        "type": "set",
        "name": "set tenantId",
        "xml": "<set>\n<parameter name='prop.global.sotn.tenantId' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
        "comments": "",
        "x": 2862.979290008545,
        "y": 1701.5100293159485,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "d21f1d66.9335f",
        "type": "switchNode",
        "name": "switch cir",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'cir'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2529.8186988830566,
        "y": 1773.9101309776306,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "5d9c8a66.558544"
            ]
        ]
    },
    {
        "id": "5d9c8a66.558544",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2724.81876373291,
        "y": 1774.9101309776306,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "e6e553ba.8c38f"
            ]
        ]
    },
    {
        "id": "e6e553ba.8c38f",
        "type": "set",
        "name": "set cir",
        "xml": "<set>\n<parameter name=\"`$ietf-bw-profile0 + 'CIR'`\" value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
        "comments": "",
        "x": 2849.1522636413574,
        "y": 1773.3712058067322,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "1068d706.4b4119",
        "type": "switchNode",
        "name": "switch vpnType",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'vpnType'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2544.1269874572754,
        "y": 1736.6878409385681,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "eafe0a88.2abeb8"
            ]
        ]
    },
    {
        "id": "eafe0a88.2abeb8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2726.1271743774414,
        "y": 1739.687825679779,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "b55361c7.d529b"
            ]
        ]
    },
    {
        "id": "b55361c7.d529b",
        "type": "set",
        "name": "set vpnType",
        "xml": "<set>\n<parameter name='prop.global.sotn.vpnType' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
        "comments": "",
        "x": 2865.4609375,
        "y": 1736.1490783691406,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "bee803df.af903",
        "type": "switchNode",
        "name": "switch eir",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'eir'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2525.109043121338,
        "y": 1807.6080384254456,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "5335406d.46439"
            ]
        ]
    },
    {
        "id": "5335406d.46439",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2725.10929107666,
        "y": 1810.6079773902893,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "2c7f791a.111c46"
            ]
        ]
    },
    {
        "id": "2c7f791a.111c46",
        "type": "set",
        "name": "set eir",
        "xml": "<set>\n<parameter name=\"`$ietf-bw-profile0 + 'EIR'`\" value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
        "comments": "",
        "x": 2848.44291305542,
        "y": 1810.0690369606018,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "45da451c.99e69c",
        "type": "switchNode",
        "name": "switch colorAware",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'colorAware'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2550.1096534729004,
        "y": 1841.6079173088074,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "449dd2b2.97f33c"
            ]
        ]
    },
    {
        "id": "449dd2b2.97f33c",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2721.109474182129,
        "y": 1847.607855796814,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "169755c8.79e75a"
            ]
        ]
    },
    {
        "id": "169755c8.79e75a",
        "type": "set",
        "name": "set colorAware",
        "xml": "<set>\n<parameter name=\"`$ietf-bw-profile0 + 'color-aware'`\" value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
        "comments": "",
        "x": 2869.4427909851074,
        "y": 1848.0690684318542,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "c3234be0.466328",
        "type": "switchNode",
        "name": "switch couplingFlag",
        "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'couplingFlag'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2552.109592437744,
        "y": 1877.607979297638,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "b42d9413.a57f98"
            ]
        ]
    },
    {
        "id": "b42d9413.a57f98",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2724.109474182129,
        "y": 1886.6079487800598,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "8aa66130.b6da6"
            ]
        ]
    },
    {
        "id": "8aa66130.b6da6",
        "type": "set",
        "name": "set couplingFlag",
        "xml": "<set>\n<parameter name=\"`$ietf-bw-profile0 + 'coupling-flag'`\" value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
        "comments": "",
        "x": 2877.4427909851074,
        "y": 1887.0690693855286,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "fb9249ce.b8b3a8",
        "type": "comment",
        "name": "Check if other EP exists in SOTNConnectionResource",
        "info": "",
        "comments": "",
        "x": 2668.8125,
        "y": 1485.2433166503906,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "bd5b1d98.86a9b",
        "type": "comment",
        "name": "Get other global parameters from network",
        "info": "",
        "comments": "",
        "x": 2604.812255859375,
        "y": 1571.2433166503906,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "14b60e62.9552e2",
        "type": "switchNode",
        "name": "switch access-provider-id",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-provider-id'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1567.5347309112549,
        "y": 1843.6878457069397,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "6fdddbf2.363454"
            ]
        ]
    },
    {
        "id": "6fdddbf2.363454",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1754.5347309112549,
        "y": 1839.6878457069397,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "74c7de35.e3e86"
            ]
        ]
    },
    {
        "id": "74c7de35.e3e86",
        "type": "set",
        "name": "set access-provider-id",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
        "comments": "",
        "x": 1922.5347309112549,
        "y": 1840.2878518104553,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "44bf4a7c.708044",
        "type": "switchNode",
        "name": "switch access-client-id",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-client-id'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1558.534746170044,
        "y": 1886.6982941627502,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "563fe70a.3d75e8"
            ]
        ]
    },
    {
        "id": "563fe70a.3d75e8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1745.534746170044,
        "y": 1882.6982941627502,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "ce19687f.748618"
            ]
        ]
    },
    {
        "id": "ce19687f.748618",
        "type": "set",
        "name": "set access-client-id",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
        "comments": "",
        "x": 1913.534746170044,
        "y": 1883.2983002662659,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "b84af987.adba08",
        "type": "switchNode",
        "name": "switch access-topology-id",
        "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-topology-id'`\">",
        "comments": "",
        "outputs": 1,
        "x": 1571.5346908569336,
        "y": 1928.6983251571655,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "59f4f928.e35438"
            ]
        ]
    },
    {
        "id": "59f4f928.e35438",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1758.5346908569336,
        "y": 1924.6983251571655,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "561aa1a7.127"
            ]
        ]
    },
    {
        "id": "561aa1a7.127",
        "type": "set",
        "name": "set access-topology-id",
        "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
        "comments": "",
        "x": 1926.5346908569336,
        "y": 1925.2983312606812,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "6b7692da.e3386c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1391.5,
        "y": 2580,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "10a67ef2.fe14c1",
                "a7c30844.d5a778",
                "7ac9bf5f.eb2bb",
                "ecc36fcf.c4875",
                "a76f6a40.d4cee8",
                "edafd0b0.6224d",
                "5247b131.16685",
                "e27ff4ee.65f258",
                "1d2e0089.80d0ff",
                "961fa84a.89d648",
                "3cad4115.c1792e",
                "64d85461.e5001c",
                "62b19acd.4aec84"
            ]
        ]
    },
    {
        "id": "c28d378e.41d1d8",
        "type": "set",
        "name": "set controller data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
        "comments": "",
        "x": 2144,
        "y": 2300,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "e27ff4ee.65f258",
        "type": "get-resource",
        "name": "get-resource esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.thirdparty-sdnc-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1728,
        "y": 2340,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "a1b1b4fc.a93fb8",
                "74526f9.33f9b9",
                "cec138d1.5a00d8"
            ]
        ]
    },
    {
        "id": "a1b1b4fc.a93fb8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1974,
        "y": 2300,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "c28d378e.41d1d8"
            ]
        ]
    },
    {
        "id": "74526f9.33f9b9",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1978,
        "y": 2340,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "6e8b6c66.c5e0f4"
            ]
        ]
    },
    {
        "id": "cec138d1.5a00d8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1970,
        "y": 2380,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "681da62f.282d18"
            ]
        ]
    },
    {
        "id": "6e8b6c66.c5e0f4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 2128,
        "y": 2340,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "681da62f.282d18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
        "comments": "",
        "x": 2128,
        "y": 2380,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "5247b131.16685",
        "type": "get-resource",
        "name": "get-resource pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $oof.vpn.access-node-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.pnf' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1679.5,
        "y": 2220,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "b0e582b1.978d3",
                "b63f814e.25c35",
                "ba9909ab.268d18"
            ]
        ]
    },
    {
        "id": "b0e582b1.978d3",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1974,
        "y": 2180,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "b2fced81.55aa5"
            ]
        ]
    },
    {
        "id": "b63f814e.25c35",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1978,
        "y": 2220,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "bc035593.0004d8"
            ]
        ]
    },
    {
        "id": "ba9909ab.268d18",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1970,
        "y": 2260,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "b490ab94.5b0298"
            ]
        ]
    },
    {
        "id": "bc035593.0004d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2128,
        "y": 2220,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "b490ab94.5b0298",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2128,
        "y": 2260,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "b2fced81.55aa5",
        "type": "set",
        "name": "set tmp.thirdparty-sdnc-id",
        "xml": "<set>\n<parameter name='tmp.thirdparty-sdnc-id' value=\"`$tmp.aai.pnf.relationship-list.relationship[0].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 2167.5,
        "y": 2180,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "ba207179.afcc1",
        "type": "comment",
        "name": "get domain controller information",
        "info": "",
        "comments": "",
        "x": 1726.5,
        "y": 2180,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "1d2e0089.80d0ff",
        "type": "set",
        "name": "set oof.vpn",
        "xml": "<set>\n<parameter name='oof.vpn.' value='`$oof.vpns[$vidx].`' />",
        "comments": "",
        "x": 1663,
        "y": 2140,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "a7c30844.d5a778",
        "type": "save",
        "name": "save VPN resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.vpnName' >\n<parameter name='vpn-id' value='`$tmp.vpnName`' />\n<parameter name='vpn-name' value='`$tmp.vpnName`' />\n<parameter name='access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='src-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name='dst-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$oof.vpn.dst-access-ltp-id`' />\n<parameter name='vpn-type' value='`$prop.global.sotn.vpnType`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />",
        "comments": "",
        "outputs": 1,
        "x": 1709.5,
        "y": 2700,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "7ac9bf5f.eb2bb",
        "type": "set",
        "name": "set tmp.vpnName",
        "xml": "<set>\n<parameter name='tmp.vpnName' value=\"`$oof.vpn.access-node-id + '-' + $ietf-etht-svc-name`\" />",
        "comments": "",
        "x": 1683.5,
        "y": 2660,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "ecc36fcf.c4875",
        "type": "save",
        "name": "save connectivity relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $mdsal-psd.service-data.networks.network[0].network-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$mdsal-psd.service-data.networks.network[0].network-id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1740,
        "y": 2740,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "10a67ef2.fe14c1",
        "type": "set",
        "name": "set src-ltpId dst-ltpId",
        "xml": "<set>\n<parameter name='src-ltpId' value=\"`'nodeId-' + $oof.vpn.access-node-id + '-ltpId-' + $oof.vpn.src-access-ltp-id`\" />\n<parameter name='dst-ltpId' value=\"`'nodeId-' + $oof.vpn.access-node-id + '-ltpId-' + $oof.vpn.dst-access-ltp-id`\" />",
        "comments": "",
        "x": 1691.5,
        "y": 2780,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "a76f6a40.d4cee8",
        "type": "save",
        "name": "save srcLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $src-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-ltpId`\" />\n\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1725,
        "y": 2820,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "edafd0b0.6224d",
        "type": "save",
        "name": "save dstLTP relationship in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $dst-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$dst-ltpId`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1725,
        "y": 2860,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "b571fb6b.8ab608",
        "type": "execute",
        "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 717.0038146972656,
        "y": 981.458776473999,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "860a625.2d0bba",
                "db78a108.063fb"
            ]
        ]
    },
    {
        "id": "b52dba2d.a71bc8",
        "type": "execute",
        "name": "execute RestApiCallNode - get-resource parent service data",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-psd`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-psd\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 644.0039672851562,
        "y": 1208.4589395523071,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "f3f93c79.0dcb",
                "b078a619.3c13b8"
            ]
        ]
    },
    {
        "id": "76fbe2f6.cb133c",
        "type": "execute",
        "name": "get parent-service-data url",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-psd\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.parent-service-instance-id`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 544.0038757324219,
        "y": 1171.4587726593018,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "ef83619e.fcadf",
        "type": "execute",
        "name": "generate tmp.ar-other-url-connection",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-other-url-connection\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.provided-ar.allotted-resource-id`\"/>\n    \n\n",
        "comments": "",
        "outputs": 1,
        "x": 1958.000228881836,
        "y": 1327.7883338928223,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "70f5ae0d.ee9ea",
        "type": "execute",
        "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-other-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-other-ar\" />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2095.0008697509766,
        "y": 1370.2881984710693,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "a5795c00.0454b8",
                "a870baef.09bb38"
            ]
        ]
    },
    {
        "id": "b5dd8e8d.014ad",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1720.0001487731934,
        "y": 2093.4549837112427,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "2222673c.9be3c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1096.9687614440918,
        "y": 2118.4551677703857,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "43e51eef.5c25b",
                "402ffb02.0bfaf4"
            ]
        ]
    },
    {
        "id": "b4436494.1a02b8",
        "type": "outcome",
        "name": "outcome PendingDelete",
        "xml": "<outcome value='PendingDelete'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2171.031219482422,
        "y": 933.486162185669,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "7b132c2c.5ce604"
            ]
        ]
    },
    {
        "id": "7b132c2c.5ce604",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2355.0312309265137,
        "y": 929.486162185669,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "3cad4115.c1792e",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name=\"`$ietf-etht-instance0 + 'access-provider-id'`\" value='`$oof.vpn.access-provider-id`' />\n<parameter name=\"`$ietf-etht-instance0 + 'access-client-id'`\" value='`$oof.vpn.access-client-id`' />\n<parameter name=\"`$ietf-etht-instance0 + 'access-topology-id'`\" value='`$oof.vpn.access-topology-id`' />\n<parameter name=\"`$ietf-etht-instance0 + 'etht-svc-access-ports[0].access-node-id'`\" value='`$oof.vpn.access-node-id`' />\n<parameter name=\"`$ietf-etht-instance0 + 'etht-svc-access-ports[0].access-ltp-id'`\" value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name=\"`$ietf-etht-instance0 + 'etht-svc-access-ports[1].access-node-id'`\" value='`$oof.vpn.access-node-id`' />\n<parameter name=\"`$ietf-etht-instance0 + 'etht-svc-access-ports[1].access-ltp-id'`\" value='`$oof.vpn.dst-access-ltp-id`' />\n",
        "comments": "",
        "x": 1698,
        "y": 2540,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "961fa84a.89d648",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<parameter name=\"`$ietf-bw-profile0 + 'bandwidth-profile-type'`\" value='ietf-eth-tran-types:mef-10-bwp' />\n<parameter name=\"`$ietf-etht-instance0 + 'etht-svc-type'`\" value='ietf-eth-tran-types:p2p-svc' />\n<parameter name=\"`$ietf-etht-instance0 + 'admin-status'`\" value='ietf-te-types:tunnel-state-up' />\n<parameter name=\"`$ietf-etht-instance0 + 'etht-svc-access-ports[0].access-port-id'`\" value='0' />\n<parameter name=\"`$ietf-etht-instance0 + 'etht-svc-access-ports[0].service-classification-type'`\" value='ietf-eth-tran-types:port-classification' />\n<parameter name=\"`$ietf-etht-instance0 + 'etht-svc-access-ports[1].access-port-id'`\" value='1' />\n<parameter name=\"`$ietf-etht-instance0 + 'etht-svc-access-ports[1].service-classification-type'`\" value='ietf-eth-tran-types:port-classification' />",
        "comments": "",
        "x": 1673.5,
        "y": 2500,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "64d85461.e5001c",
        "type": "execute",
        "name": "execute RestApiCallNode Get token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1740.5,
        "y": 2440,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "a0d2cca5.2d5be",
                "c52b8c6d.ecc5c"
            ]
        ]
    },
    {
        "id": "a0d2cca5.2d5be",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1974,
        "y": 2420,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "3e07440b.43da4c"
            ]
        ]
    },
    {
        "id": "c52b8c6d.ecc5c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1970,
        "y": 2460,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "f8066f4a.4c47c"
            ]
        ]
    },
    {
        "id": "f8066f4a.4c47c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
        "comments": "",
        "x": 2128,
        "y": 2460,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "3e07440b.43da4c",
        "type": "set",
        "name": "set token-id",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
        "comments": "",
        "x": 2124.5,
        "y": 2420,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "50328916.399a68",
        "type": "execute",
        "name": "execute RestconfApiCallNode Create ethernet Service with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfapicall.RestconfApiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2250.5,
        "y": 2600,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "aefb806d.da2a4",
                "1cddc506.88b81b"
            ]
        ]
    },
    {
        "id": "aefb806d.da2a4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2594,
        "y": 2600,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "8e77bda1.dcd9a"
            ]
        ]
    },
    {
        "id": "8e77bda1.dcd9a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2751.5,
        "y": 2600,
        "z": "457a744e.ed1b4c",
        "wires": [
            []
        ]
    },
    {
        "id": "23ed7381.faa5dc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 2748,
        "y": 2560,
        "z": "457a744e.ed1b4c",
        "wires": []
    },
    {
        "id": "1cddc506.88b81b",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2590,
        "y": 2560,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "23ed7381.faa5dc"
            ]
        ]
    },
    {
        "id": "62b19acd.4aec84",
        "type": "switchNode",
        "name": "switch prop.sdncRestApi.token_id",
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1733.5,
        "y": 2580,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "ab1d58b3.091298",
                "6b742a39.c27114"
            ]
        ]
    },
    {
        "id": "ab1d58b3.091298",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 1946.3438301086426,
        "y": 2560.121898651123,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "c3954e01.62cf4"
            ]
        ]
    },
    {
        "id": "6b742a39.c27114",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1950,
        "y": 2600,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "50328916.399a68"
            ]
        ]
    },
    {
        "id": "c3954e01.62cf4",
        "type": "execute",
        "name": "execute RestconfApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfapicall.RestconfApiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 2260.5,
        "y": 2560,
        "z": "457a744e.ed1b4c",
        "wires": [
            [
                "1cddc506.88b81b",
                "aefb806d.da2a4"
            ]
        ]
    },
    {
        "id": "47c68bcd.5a1f24",
        "type": "comment",
        "name": "save vpn and its relation to AAI",
        "info": "",
        "comments": "",
        "x": 1721.5,
        "y": 2620,
        "z": "457a744e.ed1b4c",
        "wires": []
    }
]