[
  {
    "id": "510329fc.5eb288",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 92,
    "y": 51,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "d0754e51.43601"
      ]
    ]
  },
  {
    "id": "d0754e51.43601",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 304.00000381469727,
    "y": 123.0000171661377,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "5324d186.c424e"
      ]
    ]
  },
  {
    "id": "5324d186.c424e",
    "type": "method",
    "name": "sotn-attachment-topology-operation-activate",
    "xml": "<method rpc='sotn-attachment-topology-operation-activate' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 292.0001220703125,
    "y": 211,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "200d23ad.1ba52c"
      ]
    ]
  },
  {
    "id": "200d23ad.1ba52c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 308.0001220703125,
    "y": 766.0002446174622,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "50fa98f0.7c4998",
        "6f233fc4.4456d",
        "8ef678b.4678d88",
        "41e3aa85.858d54",
        "b2920bb5.1af8e8",
        "525ecaee.ee9b24",
        "ab2f4625.6243a8",
        "b09745d8.bb7668",
        "b13bf095.cdea1",
        "dcca5b8a.14d818",
        "5d5e7f8f.d3d28",
        "b3a2976e.016ed8",
        "33c05db5.bb8532",
        "dde46f65.1623c",
        "3d236d8e.1a1ed2",
        "9dd9851c.cc5e08",
        "21b8bdc2.b30a32",
        "c4803883.47c5a8",
        "ad2575da.f719b8",
        "c4ade364.dff4"
      ]
    ]
  },
  {
    "id": "50fa98f0.7c4998",
    "type": "set",
    "name": "set tmp.ar.allotted-resource-id,etc",
    "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
    "comments": "",
    "x": 704.9935607910156,
    "y": 164.9934868812561,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "d87c2a28.d4a808",
    "type": "comment",
    "name": "set tmp ar-id to fetch resource from MDSAL",
    "info": "",
    "comments": "",
    "x": 733.9538726806641,
    "y": 129.02528285980225,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "6f233fc4.4456d",
    "type": "set",
    "name": "set tmp.ar.self-link",
    "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:connection-attachment-allotted-resources/connection-attachment-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/connection-attachment-topology/'` \" />\n\n",
    "comments": "",
    "x": 658.9934997558594,
    "y": 257.99349212646484,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "b2920bb5.1af8e8",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 665.2553901672363,
    "y": 345.6602210998535,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "8ef678b.4678d88",
    "type": "execute",
    "name": "generate allotted-resource tmp.ar-url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 712.2554473876953,
    "y": 433.6602249145508,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "2c8ad64b.5a9c0a",
    "type": "comment",
    "name": "GET connection-attachment-allotted-resource from mdsal",
    "info": "",
    "comments": "",
    "x": 758.8083801269531,
    "y": 564.5386590957642,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "3f345735.382a78",
    "type": "comment",
    "name": "Used for setting output to API Handler",
    "info": "",
    "comments": "",
    "x": 712.9935302734375,
    "y": 224.993501663208,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "dc7c3756.7911f8",
    "type": "comment",
    "name": "Obtain different URL, template location etc",
    "info": "For saving resource information to MDSAL & for AAI",
    "comments": "",
    "x": 730.9934959411621,
    "y": 310.8823823928833,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "385fcb45.8d58e4",
    "type": "comment",
    "name": "Used to Get AR by id to MDSAL, same as self-link",
    "info": "",
    "comments": "",
    "x": 756.9935150146484,
    "y": 397.8823413848877,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "fb3f3db1.2e857",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1218.6667919158936,
    "y": 581.9999847412109,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "7924d66d.1039e8"
      ]
    ]
  },
  {
    "id": "7924d66d.1039e8",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1362.6668701171875,
    "y": 539.4999027252197,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "2e9884a4.fb6aac"
      ]
    ]
  },
  {
    "id": "2e9884a4.fb6aac",
    "type": "switchNode",
    "name": "switch cr length",
    "xml": "<switch test='`$mdsal-ar.connection-attachment-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1531.5242938995361,
    "y": 537.1190738677979,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "a5020a5a.1a8de8",
        "a75f121c.781a7"
      ]
    ]
  },
  {
    "id": "a5020a5a.1a8de8",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1686.8574295043945,
    "y": 509.1189889907837,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "dc7b8304.a3929"
      ]
    ]
  },
  {
    "id": "dc7b8304.a3929",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic='true'>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1845.381233215332,
    "y": 507.02383613586426,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "2e53bf10.53616",
        "4d06247.7481adc",
        "16d5ef9e.67621"
      ]
    ]
  },
  {
    "id": "57e48b3f.e4d594",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Connection attachment resource not exist\" />\n    \n",
    "comments": "",
    "x": 1785.5191650390625,
    "y": 614.0660705566406,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "549a2a73.774b74",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1210.5185947418213,
    "y": 617.0660696029663,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "13c58b6.0463e75"
      ]
    ]
  },
  {
    "id": "13c58b6.0463e75",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1390.5185451507568,
    "y": 617.7326202392578,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "57e48b3f.e4d594"
      ]
    ]
  },
  {
    "id": "a75f121c.781a7",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1678.185432434082,
    "y": 568.3993635177612,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "57e48b3f.e4d594"
      ]
    ]
  },
  {
    "id": "2e53bf10.53616",
    "type": "set",
    "name": "set connection-attachment-ar from get",
    "xml": "<set>\n<parameter name='connection-attachment-ar.' value='$mdsal-ar.connection-attachment-allotted-resource[0].' />\n",
    "comments": "",
    "x": 2092.4446868896484,
    "y": 480.00008821487427,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "16d5ef9e.67621",
    "type": "set",
    "name": "set oper-status",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-ar.allotted-resource-status.rpc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
    "comments": "",
    "x": 2026.4447174072266,
    "y": 553.4285907745361,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "4d06247.7481adc",
    "type": "switchNode",
    "name": "switch order-status",
    "xml": "<switch test='`$connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2036.4444961547852,
    "y": 519.0000247955322,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "13c3c1da.98e52e",
        "c01b9863.c31138",
        "bd2b5022.a474e"
      ]
    ]
  },
  {
    "id": "13c3c1da.98e52e",
    "type": "outcome",
    "name": "outcome Created",
    "xml": "<outcome value='Created'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2272.044578552246,
    "y": 513.0000557899475,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "29af8103.34f60e"
      ]
    ]
  },
  {
    "id": "c01b9863.c31138",
    "type": "outcome",
    "name": "outcome Other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2265.759078979492,
    "y": 593.4286904335022,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "869d355f.ff5a28"
      ]
    ]
  },
  {
    "id": "29af8103.34f60e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2430.515251159668,
    "y": 513.37571144104,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "869d355f.ff5a28",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" \n    value=\"`'Existing connection-attachment-allotted-resource with order status of ' + $connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status + '.'`\" />\n",
    "comments": "",
    "x": 2441.666893005371,
    "y": 592.0000896453857,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "4c9dfad4.b5cb94",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:sotn-get-saved-ar-param",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='sotn-get-saved-ar-param' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 929.303050994873,
    "y": 664.4936046600342,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "525ecaee.ee9b24",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 623.3091506958008,
    "y": 665.4999752044678,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "4c9dfad4.b5cb94"
      ]
    ]
  },
  {
    "id": "f0374b61.7fdcc8",
    "type": "comment",
    "name": "GET parent-service-data from mdsal to check existence of other End point",
    "info": "",
    "comments": "",
    "x": 811.00048828125,
    "y": 710.5317525863647,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "ee77ccab.555f2",
    "type": "for",
    "name": "for pidx..mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[]",
    "xml": "<for index='pidx' start='0' end='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1702.1851959228516,
    "y": 863.0042300224304,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "1d8e18c9.612a97"
      ]
    ]
  },
  {
    "id": "41e3aa85.858d54",
    "type": "switchNode",
    "name": "switch mdsal-psd.service-data.provided-allotted-resources_length",
    "xml": "<switch test='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 786.1842193603516,
    "y": 970.7182664871216,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "227fe562.bef93a",
        "30f6347f.71f27c",
        "8d3aa09e.93736"
      ]
    ]
  },
  {
    "id": "227fe562.bef93a",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1114.3272399902344,
    "y": 1043.5755405426025,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "70131877.497ee8"
      ]
    ]
  },
  {
    "id": "d8325992.1c7e08",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1298.454502105713,
    "y": 902.7015495300293,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "ee77ccab.555f2",
        "7fdc18ff.582858"
      ]
    ]
  },
  {
    "id": "1d8e18c9.612a97",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$pidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2142.2965240478516,
    "y": 860.0040321350098,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "d475cadd.1a2f78",
        "4ec4a51f.47decc"
      ]
    ]
  },
  {
    "id": "d475cadd.1a2f78",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2315.1067390441895,
    "y": 831.4686470031738,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "4ae70fe8.b24e9"
      ]
    ]
  },
  {
    "id": "7b37e59c.23ec7c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2463.8672103881836,
    "y": 888.3257341384888,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "102e4d37.8fb7c3"
      ]
    ]
  },
  {
    "id": "102e4d37.8fb7c3",
    "type": "set",
    "name": "set tmp.pidx and ptx.consumed-ar",
    "xml": "<set>\n<parameter name='tmp.pidx' value='`$pidx`' />\n<parameter name='tmp.provided-ar.' value='`$mdsal-psd.service-data.provided-allotted-resources.provided-allotted-resource[$pidx].`' />\n<parameter name='tmp.found-in-ar' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
    "comments": "",
    "x": 2698.724636077881,
    "y": 886.8972663879395,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "82ecf3e0.5c52b",
    "type": "comment",
    "name": "Check existence of other AR in parent service data",
    "info": "Check if other allotted resource is available.",
    "comments": "",
    "x": 733.9626579284668,
    "y": 875.8929615020752,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "30f6347f.71f27c",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1128.9797096252441,
    "y": 982.6772241592407,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "2cd6df64.b8473"
      ]
    ]
  },
  {
    "id": "70131877.497ee8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: End points not available\" />\n    \n",
    "comments": "",
    "x": 1273.9795875549316,
    "y": 1042.67746925354,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "8d3aa09e.93736",
    "type": "other",
    "name": "outcome 2",
    "xml": "<outcome value='2'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1123.9795227050781,
    "y": 903.6772499084473,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "d8325992.1c7e08"
      ]
    ]
  },
  {
    "id": "4ae70fe8.b24e9",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2473.0909538269043,
    "y": 830.6773900985718,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "4ec4a51f.47decc",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2322.0905952453613,
    "y": 887.6772499084473,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "7b37e59c.23ec7c"
      ]
    ]
  },
  {
    "id": "7fdc18ff.582858",
    "type": "switchNode",
    "name": "switch tmp.found-in-ar",
    "xml": "<switch test='`$tmp.found-in-ar`'>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1510.9794998168945,
    "y": 956.4550676345825,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "92b2633f.8d761"
      ]
    ]
  },
  {
    "id": "92b2633f.8d761",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1681.97953414917,
    "y": 957.5662889480591,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "c3df20e.333b9e"
      ]
    ]
  },
  {
    "id": "c3df20e.333b9e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1830.9796295166016,
    "y": 957.5662879943848,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "8c502b5e.ba0e48",
        "b7c302f0.0eaa4"
      ]
    ]
  },
  {
    "id": "642168d6.c96a08",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2577.097454071045,
    "y": 973.7951421737671,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "28182687.5e2d2a"
      ]
    ]
  },
  {
    "id": "d6797517.070b08",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2568.9492568969727,
    "y": 1008.8612270355225,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "863cf5ba.41a538"
      ]
    ]
  },
  {
    "id": "5a7b91f3.92074",
    "type": "switchNode",
    "name": "switch mdsal-psd.service-data.networks_length",
    "xml": "<switch test='`$mdsal-psd.service-data.networks.network_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1574.313003540039,
    "y": 1057.899908065796,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "5c7b0dd2.1db974",
        "decd8771.495088"
      ]
    ]
  },
  {
    "id": "decd8771.495088",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1838.3128509521484,
    "y": 1037.7886543273926,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "26e27dfe.c23ed2"
      ]
    ]
  },
  {
    "id": "5c7b0dd2.1db974",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1828.3129119873047,
    "y": 1085.788625717163,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "2701bab7.b74336"
      ]
    ]
  },
  {
    "id": "2701bab7.b74336",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Incorrect state found more then 1 network\" />\n    \n",
    "comments": "",
    "x": 1966.9652557373047,
    "y": 1087.890386581421,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "3f964f3.96aa1b",
    "type": "set",
    "name": "set tmp.network.",
    "xml": "<set>\n<parameter name='tmp.network.' value='`$mdsal-psd.service-data.networks.network[0].`' />\n\n\n",
    "comments": "",
    "x": 2199.757709503174,
    "y": 1038.788824081421,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "2cd6df64.b8473",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1296.4240188598633,
    "y": 981.7884912490845,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "5a7b91f3.92074"
      ]
    ]
  },
  {
    "id": "26e27dfe.c23ed2",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1997.0906219482422,
    "y": 1040.7884883880615,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "3f964f3.96aa1b",
        "d34f3159.b7d95"
      ]
    ]
  },
  {
    "id": "d34f3159.b7d95",
    "type": "for",
    "name": "for nidx..tmp.network.network-data.network-request-input.network...[]",
    "xml": "<for index='nidx' start='0' end='`$tmp.network.network-data.network-request-input.network-input-parameters.param_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 2360.090660095215,
    "y": 1086.7886428833008,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "6c6f677c.4a6ae8"
      ]
    ]
  },
  {
    "id": "6c6f677c.4a6ae8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2406.646728515625,
    "y": 1317.7884521484375,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "5a5ff171.f67b5",
        "5ac44b36.e6ed64",
        "477598ab.94c4f8",
        "bf3fd182.60613",
        "ee0ac40b.7c8918",
        "334ef95a.804996",
        "6b4b64b0.8aa49c",
        "f2f619ae.81dc88",
        "7f22248e.623acc",
        "1977cf51.112051"
      ]
    ]
  },
  {
    "id": "5a5ff171.f67b5",
    "type": "switchNode",
    "name": "switch access-node-id",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'access-node-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 2683.1569442749023,
    "y": 1159.7991995811462,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "83c25cc5.35c9d"
      ]
    ]
  },
  {
    "id": "83c25cc5.35c9d",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2872.1565704345703,
    "y": 1161.7990641593933,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "80bf2f28.f9eae"
      ]
    ]
  },
  {
    "id": "80bf2f28.f9eae",
    "type": "set",
    "name": "set tmp.found-in-network tmp.ep-available",
    "xml": "<set>\n<parameter name='tmp.found-in-network' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
    "comments": "",
    "x": 3125.1567459106445,
    "y": 1161.3991103172302,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "5ac44b36.e6ed64",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 2657.146396636963,
    "y": 1533.7884907722473,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "b3a2976e.016ed8",
    "type": "switchNode",
    "name": "switch tmp.ep-available",
    "xml": "<switch test='`$tmp.ep-available`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 649.3128204345703,
    "y": 1166.232801437378,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "d67d36b.8c807c8",
        "d4dded0c.3defe"
      ]
    ]
  },
  {
    "id": "d4dded0c.3defe",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 867.9795398712158,
    "y": 1215.5661582946777,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "dac36818.3ade18"
      ]
    ]
  },
  {
    "id": "d67d36b.8c807c8",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 872.8683414459229,
    "y": 1124.566219329834,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "fea8c889.837c28"
      ]
    ]
  },
  {
    "id": "fea8c889.837c28",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1019.8683376312256,
    "y": 1126.4550323486328,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "dac36818.3ade18",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1038.090627670288,
    "y": 1213.5661163330078,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "47a53791.ce00e8",
        "49abb372.8700ac",
        "73f1353a.31fe0c"
      ]
    ]
  },
  {
    "id": "47a53791.ce00e8",
    "type": "switchNode",
    "name": "switch tmp.found-in-ar",
    "xml": "<switch test='`$tmp.found-in-ar`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1264.2016410827637,
    "y": 1180.5661163330078,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "f3f2f58d.f1fde8",
        "73ae144b.6c716c"
      ]
    ]
  },
  {
    "id": "f3f2f58d.f1fde8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1459.6460876464844,
    "y": 1158.566177368164,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "a49cc189.c10f7"
      ]
    ]
  },
  {
    "id": "73ae144b.6c716c",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1456.64599609375,
    "y": 1206.566162109375,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "5c6b8964.10acc8"
      ]
    ]
  },
  {
    "id": "a49cc189.c10f7",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1647.2017517089844,
    "y": 1155.566177368164,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "50540586.cfd78c"
      ]
    ]
  },
  {
    "id": "5c6b8964.10acc8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1644.20166015625,
    "y": 1205.566162109375,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "7849a3ee.c57b4c"
      ]
    ]
  },
  {
    "id": "b9bd1802.9893c8",
    "type": "comment",
    "name": "GET connection-attachment-ar to store AR data from mdsal",
    "info": "",
    "comments": "",
    "x": 2156.4728355407715,
    "y": 442.50394773483276,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "811f13c4.a802b",
    "type": "comment",
    "name": "Set source end point",
    "info": "",
    "comments": "",
    "x": 645.9727325439453,
    "y": 531.2539677619934,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "ab2f4625.6243a8",
    "type": "set",
    "name": "set tmp.ar.parent-service-instance-id",
    "xml": "<set>\n<parameter name='tmp.ar.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n\n",
    "comments": "",
    "x": 696.9688262939453,
    "y": 740.0000905990601,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "e3a34e44.03f86",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1056.968978881836,
    "y": 811.0000772476196,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "1cfd4bb9.99d9a4"
      ]
    ]
  },
  {
    "id": "8447b050.f664b",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1048.8207817077637,
    "y": 846.066162109375,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "7bd6123e.8e599c"
      ]
    ]
  },
  {
    "id": "7bd6123e.8e599c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Parent service data not available\" />\n    \n",
    "comments": "",
    "x": 1194.9695625305176,
    "y": 845.3335733413696,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "1cfd4bb9.99d9a4",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1187.9690742492676,
    "y": 811.0001382827759,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "863cf5ba.41a538",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN provided attachment resource not found\" />\n    \n",
    "comments": "",
    "x": 2718.969306945801,
    "y": 1009.00026512146,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "28182687.5e2d2a",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2703.9694290161133,
    "y": 976.0002498626709,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "b09745d8.bb7668",
    "type": "set",
    "name": "set tmp.found-in-ar tmp.found-in-network tmp.ep-available to false",
    "xml": "<set>\n<parameter name='tmp.found-in-ar' value='false' />\n<parameter name='tmp.found-in-network' value='false' />\n<parameter name='tmp.ep-available' value='false' />",
    "comments": "",
    "x": 782.9687652587891,
    "y": 913.0000648498535,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "53f5b769.1d9ac8",
    "type": "comment",
    "name": "If other EP exists set destination end point",
    "info": "Check if other allotted resource is available.",
    "comments": "",
    "x": 699.9687652587891,
    "y": 1091.0000133514404,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "39192112.9a7a9e",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1439.9688873291016,
    "y": 1418.0002946853638,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "29497381.2907dc",
        "a8454134.72dfa",
        "b437b233.85dc6",
        "d5da4e92.fd9d5",
        "527cda61.4c5444",
        "21b345b.f16dcba",
        "847549d0.8fada8",
        "46d04af2.172014"
      ]
    ]
  },
  {
    "id": "29497381.2907dc",
    "type": "switchNode",
    "name": "switch access-node-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-node-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1682.4791889190674,
    "y": 1288.010691165924,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "b53954e3.75f548"
      ]
    ]
  },
  {
    "id": "a8454134.72dfa",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 1655.4691410064697,
    "y": 1593.0006546974182,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "b437b233.85dc6",
    "type": "switchNode",
    "name": "switch access-ltp-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-ltp-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1673.9690189361572,
    "y": 1331.7782225608826,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "4beb5c8f.437a34"
      ]
    ]
  },
  {
    "id": "d5da4e92.fd9d5",
    "type": "switchNode",
    "name": "switch clientSignal",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'clientSignal'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1667.9690570831299,
    "y": 1377.778269290924,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "a652bfee.a4a86"
      ]
    ]
  },
  {
    "id": "527cda61.4c5444",
    "type": "switchNode",
    "name": "switch cVLAN",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'cVLAN'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1651.9585590362549,
    "y": 1416.767771244049,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "b6d9ed74.687c9"
      ]
    ]
  },
  {
    "id": "b53954e3.75f548",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1860.1911029815674,
    "y": 1288.6670632362366,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "b7855c9c.e078"
      ]
    ]
  },
  {
    "id": "b7855c9c.e078",
    "type": "set",
    "name": "set dst-access-node-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2035.1911029815674,
    "y": 1288.267038345337,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "4beb5c8f.437a34",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1855.6809711456299,
    "y": 1331.434519290924,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "17f7ba24.7fa566"
      ]
    ]
  },
  {
    "id": "a652bfee.a4a86",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1855.6809711456299,
    "y": 1377.434519290924,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "b4e0c929.110668"
      ]
    ]
  },
  {
    "id": "b6d9ed74.687c9",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1855.6704730987549,
    "y": 1416.4241433143616,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "90d8491c.861238"
      ]
    ]
  },
  {
    "id": "49abb372.8700ac",
    "type": "for",
    "name": "for idx..tmp.ep.parameters[]",
    "xml": "<for index='idx' start='0' end='`$tmp.ep.parameters.param_length`'>\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1292.96875,
    "y": 1306,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "39192112.9a7a9e"
      ]
    ]
  },
  {
    "id": "50540586.cfd78c",
    "type": "set",
    "name": "set tmp.ep.parameters",
    "xml": "<set>\n<parameter name='tmp.ep.parameters.' value='`$mdsal-other-ar.connection-attachment-allotted-resource[0].allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.`' />\n",
    "comments": "",
    "x": 1858.9688053131104,
    "y": 1155.0000743865967,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "7849a3ee.c57b4c",
    "type": "set",
    "name": "set tmp.ep.parameters",
    "xml": "<set>\n<parameter name='tmp.ep.parameters.' value='`$tmp.network.network-data.network-request-input.network-input-parameters.`' />\n",
    "comments": "",
    "x": 1855.968713760376,
    "y": 1201.0000591278076,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "17f7ba24.7fa566",
    "type": "set",
    "name": "set dst-access-node-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2032.9689350128174,
    "y": 1331.0003151893616,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "b4e0c929.110668",
    "type": "set",
    "name": "set dst-clientSignal",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.clientSignal' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2026.9689350128174,
    "y": 1375.0003151893616,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "90d8491c.861238",
    "type": "set",
    "name": "set dst-cVLAN",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.cVLAN' value='`$tmp.ep.parameters.param[$idx].value`' />",
    "comments": "",
    "x": 2017.9689350128174,
    "y": 1414.0003151893616,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "7a6bd4c0.0a23ac",
    "type": "comment",
    "name": "Get controller info and send request",
    "info": "",
    "comments": "",
    "x": 1899.968807220459,
    "y": 1885.000153541565,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "e5ca51fb.cb5be",
    "type": "execute",
    "name": "execute RestApiCallNode Create ethernet Service",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sotn-ethernet-service.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-eth-tran-service:etht-svc'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1963.9693450927734,
    "y": 2159.001121520996,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "4fd581be.ae7c5",
        "cba0e7bf.640378"
      ]
    ]
  },
  {
    "id": "4fd581be.ae7c5",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2229.9690704345703,
    "y": 2188.001244544983,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "9a1df066.c1be9"
      ]
    ]
  },
  {
    "id": "9a1df066.c1be9",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 2377.9690704345703,
    "y": 2186.0011224746704,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "434af439.625b6c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
    "comments": "",
    "x": 2359.9691009521484,
    "y": 2133.0011825561523,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "cba0e7bf.640378",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2220.969009399414,
    "y": 2133.0011825561523,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "434af439.625b6c"
      ]
    ]
  },
  {
    "id": "1a8278df.ac4137",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 871.7311744689941,
    "y": 2108.9537086486816,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "c4aa74e4.35ca78"
      ]
    ]
  },
  {
    "id": "c4aa74e4.35ca78",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments": "",
    "x": 1038.2549953460693,
    "y": 2135.5727157592773,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "33c28cf6.2b21a4",
    "type": "failure",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 873.8264026641846,
    "y": 2156.715551376343,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "c4aa74e4.35ca78"
      ]
    ]
  },
  {
    "id": "cb1a048d.e95fc8",
    "type": "comment",
    "name": "Save Resource to AAI",
    "info": "",
    "comments": "",
    "x": 645.7788181304932,
    "y": 2097.3028717041016,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "c4803883.47c5a8",
    "type": "set",
    "name": "set output to api handler",
    "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='connection-attachment-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $connection-attachment-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments": "",
    "x": 660.5465145111084,
    "y": 2018.8283529281616,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "c4ade364.dff4",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 620.9596862792969,
    "y": 2204.4441413879395,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "21b8bdc2.b30a32",
    "type": "execute",
    "name": "execute RestApiCallNode - PUT AR by id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.sotn-attachment.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 713.2785968780518,
    "y": 1943.4692058563232,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "72334169.43788",
        "91c81d87.0f2e3",
        "4377487a.aa9b58"
      ]
    ]
  },
  {
    "id": "72334169.43788",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 967.9200191497803,
    "y": 1987.8006000518799,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "3aa37f14.b2a12"
      ]
    ]
  },
  {
    "id": "91c81d87.0f2e3",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 969.9200420379639,
    "y": 1946.3005641922355,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "3aa37f14.b2a12"
      ]
    ]
  },
  {
    "id": "4377487a.aa9b58",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 973.6701259613037,
    "y": 1897.6577167510986,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "ce3cc849.21f268"
      ]
    ]
  },
  {
    "id": "3aa37f14.b2a12",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
    "comments": "",
    "x": 1128.67014503479,
    "y": 1966.050630569458,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "ce3cc849.21f268",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1101.3260707855225,
    "y": 1899.8498849868774,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "33c05db5.bb8532",
    "type": "set",
    "name": "set ar-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-status.action' value=\"`$connection-attachment-topology-operation-input.request-information.request-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-name' value=\"connection-attachment-topology-operation\" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-action' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$connection-attachment-topology-operation-input.request-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$connection-attachment-topology-operation-input.service-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.` \" />",
    "comments": "",
    "x": 615.4922122955322,
    "y": 1777.8501069545746,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "3d236d8e.1a1ed2",
    "type": "execute",
    "name": "execute getTime",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 632.77805519104,
    "y": 1850.4697046279907,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "9dd9851c.cc5e08",
    "type": "set",
    "name": "set allotted-resource-oper-status",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='Active' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-topology-operation-input.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
    "comments": "",
    "x": 682.7651348114014,
    "y": 1887.4207849502563,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "dde46f65.1623c",
    "type": "set",
    "name": "set model-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.connection-attachment-topology.onap-model-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.` \" />",
    "comments": "",
    "x": 629.3337535858154,
    "y": 1817.024757385254,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "c0243700.483a78",
    "type": "comment",
    "name": "Prepare data for allotted-resource addition to MDSAL",
    "info": "This will add to allotted-resource which is present inside service.",
    "comments": "",
    "x": 742.66721534729,
    "y": 1738.0247094631195,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "b128777a.bf8ad8",
    "type": "comment",
    "name": "Add to allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 684.2470417022705,
    "y": 1705.4380111694336,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "ad2575da.f719b8",
    "type": "update",
    "name": "update AAI allotted-resource",
    "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $connection-attachment-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $connection-attachment-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $connection-attachment-topology-operation-input.service-information.service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"description\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-type`\" />\n\t<parameter name=\"selflink\" value=\"`$tmp.ar.self-link`\" />\n\t<parameter name=\"model-invariant-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-invariant-uuid`\" />\n\t<parameter name=\"model-version-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-uuid`\" />\n\t<parameter name=\"operational-status\" value=\"Active\" />\n",
    "comments": "",
    "outputs": 1,
    "x": 672.2230968475342,
    "y": 2134.7550144195557,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "1a8278df.ac4137",
        "33c28cf6.2b21a4"
      ]
    ]
  },
  {
    "id": "73456eef.45eac",
    "type": "execute",
    "name": "execute RestApiCallNode getPath from OOF",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.oof-getpath.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.oof.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.oof.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1480.973056793213,
    "y": 1697.2546663284302,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "473a6700.6236e8",
        "5286278b.3b3cd8"
      ]
    ]
  },
  {
    "id": "473a6700.6236e8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1720.9731979370117,
    "y": 1721.254635810852,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "cafce3b5.74fb5"
      ]
    ]
  },
  {
    "id": "dc79f611.cf4238",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing OOF api\" />\n",
    "comments": "",
    "x": 1859.973232269287,
    "y": 1670.2547273635864,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "5286278b.3b3cd8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1719.9729843139648,
    "y": 1670.254726409912,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "dc79f611.cf4238"
      ]
    ]
  },
  {
    "id": "deb094f6.e597f8",
    "type": "comment",
    "name": "Get VPNs from OOF",
    "info": "",
    "comments": "",
    "x": 1466.976978302002,
    "y": 1664.2586660385132,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "da1582e5.d9e86",
    "type": "for",
    "name": "for vidx..oof.vpns_length[]",
    "xml": "<for index='vidx' start='0' end='`$oof.vpns_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 1420.972900390625,
    "y": 1779.50439453125,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "b2ef8ded.b479a"
      ]
    ]
  },
  {
    "id": "c9df49cc.0e8008",
    "type": "comment",
    "name": "Loop through VPN and configure them",
    "info": "",
    "comments": "",
    "x": 1466.9733505249023,
    "y": 1914.0047721862793,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "477598ab.94c4f8",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'name'`\">\n                \n",
    "comments": "",
    "outputs": 1,
    "x": 2660.757080078125,
    "y": 1251.121826171875,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "7c0be7f6.9e8c58"
      ]
    ]
  },
  {
    "id": "7c0be7f6.9e8c58",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2849.757049560547,
    "y": 1251.121811389923,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "1cf5a70.cc26659"
      ]
    ]
  },
  {
    "id": "1cf5a70.cc26659",
    "type": "set",
    "name": "set etht-svc-name & bandwidth-profile-name",
    "xml": "<set>\n<parameter name='prop.global.sotn.etht-svc-name' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n<parameter name='prop.global.sotn.bandwidth-profile-name' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 3090.75736618042,
    "y": 1250.7218661308289,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "bf3fd182.60613",
    "type": "switchNode",
    "name": "switch description",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'description'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2673.5969581604004,
    "y": 1286.1219210624695,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "f2fb468e.d467f8"
      ]
    ]
  },
  {
    "id": "f2fb468e.d467f8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2848.597023010254,
    "y": 1288.1219067573547,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "e7ce8468.64c938"
      ]
    ]
  },
  {
    "id": "e7ce8468.64c938",
    "type": "set",
    "name": "set etht-svc-descr",
    "xml": "<set>\n<parameter name='prop.global.sotn.etht-svc-descr' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 3004.9303398132324,
    "y": 1285.5829815864563,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "ee0ac40b.7c8918",
    "type": "switchNode",
    "name": "switch tenantId",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'tenantId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2668.979221343994,
    "y": 1319.4553112983704,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "db11a89d.57ead8"
      ]
    ]
  },
  {
    "id": "db11a89d.57ead8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2846.9792251586914,
    "y": 1323.4551892280579,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "a28b1daa.bce21"
      ]
    ]
  },
  {
    "id": "a28b1daa.bce21",
    "type": "set",
    "name": "set tenantId",
    "xml": "<set>\n<parameter name='prop.global.sotn.tenantId' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 2984.9794120788574,
    "y": 1320.0551648139954,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "6b4b64b0.8aa49c",
    "type": "switchNode",
    "name": "switch cir",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'cir'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2651.818820953369,
    "y": 1392.4552664756775,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "779ba6d5.68a5b8"
      ]
    ]
  },
  {
    "id": "779ba6d5.68a5b8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2846.8188858032227,
    "y": 1393.4552664756775,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "51c8d37d.57c57c"
      ]
    ]
  },
  {
    "id": "51c8d37d.57c57c",
    "type": "set",
    "name": "set cir",
    "xml": "<set>\n<parameter name='prop.sotn.cir' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 2971.15238571167,
    "y": 1391.916341304779,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "334ef95a.804996",
    "type": "switchNode",
    "name": "switch vpnType",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'vpnType'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2666.127109527588,
    "y": 1355.232976436615,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "edf65e2e.17eef"
      ]
    ]
  },
  {
    "id": "edf65e2e.17eef",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2848.127296447754,
    "y": 1358.232961177826,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "3a58a10e.af006e"
      ]
    ]
  },
  {
    "id": "3a58a10e.af006e",
    "type": "set",
    "name": "set vpnType",
    "xml": "<set>\n<parameter name='prop.global.sotn.vpnType' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 2984.461040496826,
    "y": 1354.6942028999329,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "f2f619ae.81dc88",
    "type": "switchNode",
    "name": "switch eir",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'eir'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2647.1091651916504,
    "y": 1426.1531739234924,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "290775a.582758a"
      ]
    ]
  },
  {
    "id": "290775a.582758a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2847.1094131469727,
    "y": 1429.1531128883362,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "be16065f.3cc068"
      ]
    ]
  },
  {
    "id": "be16065f.3cc068",
    "type": "set",
    "name": "set eir",
    "xml": "<set>\n<parameter name='prop.global.sotn.eir' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 2970.4430351257324,
    "y": 1428.6141724586487,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "7f22248e.623acc",
    "type": "switchNode",
    "name": "switch colorAware",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'colorAware'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2672.109775543213,
    "y": 1460.1530528068542,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "60b638c9.9f5cf8"
      ]
    ]
  },
  {
    "id": "60b638c9.9f5cf8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2843.1095962524414,
    "y": 1466.1529912948608,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "6283050a.9a352c"
      ]
    ]
  },
  {
    "id": "6283050a.9a352c",
    "type": "set",
    "name": "set colorAware",
    "xml": "<set>\n<parameter name='prop.global.sotn.colorAware' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 2991.44291305542,
    "y": 1466.6142039299011,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "1977cf51.112051",
    "type": "switchNode",
    "name": "switch couplingFlag",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'couplingFlag'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2674.1097145080566,
    "y": 1496.1531147956848,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "95d93fbe.f7437"
      ]
    ]
  },
  {
    "id": "95d93fbe.f7437",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2846.1095962524414,
    "y": 1505.1530842781067,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "ceecc29f.0a56b"
      ]
    ]
  },
  {
    "id": "ceecc29f.0a56b",
    "type": "set",
    "name": "set couplingFlag",
    "xml": "<set>\n<parameter name='prop.global.sotn.couplingFlag' value='`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].value`' />\n",
    "comments": "",
    "x": 2999.44291305542,
    "y": 1505.6142048835754,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "b4b830f7.2edfb",
    "type": "comment",
    "name": "Check if other EP exists in SOTNConnectionResource",
    "info": "",
    "comments": "",
    "x": 2805.312744140625,
    "y": 1114.7884521484375,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "85af2b8.2c027d8",
    "type": "comment",
    "name": "Get other global parameters from network",
    "info": "",
    "comments": "",
    "x": 2741.3125,
    "y": 1200.7884521484375,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "21b345b.f16dcba",
    "type": "switchNode",
    "name": "switch access-provider-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-provider-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1689.5348529815674,
    "y": 1462.2329812049866,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "88d75ee0.36aab"
      ]
    ]
  },
  {
    "id": "88d75ee0.36aab",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1876.5348529815674,
    "y": 1458.2329812049866,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "144324cd.dbe03b"
      ]
    ]
  },
  {
    "id": "144324cd.dbe03b",
    "type": "set",
    "name": "set access-provider-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 2044.5348529815674,
    "y": 1458.8329873085022,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "847549d0.8fada8",
    "type": "switchNode",
    "name": "switch access-client-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-client-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1680.5348682403564,
    "y": 1505.2434296607971,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "429ac662.d36c08"
      ]
    ]
  },
  {
    "id": "429ac662.d36c08",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1867.5348682403564,
    "y": 1501.2434296607971,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "fdfea883.43ef38"
      ]
    ]
  },
  {
    "id": "fdfea883.43ef38",
    "type": "set",
    "name": "set access-client-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 2035.5348682403564,
    "y": 1501.8434357643127,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "46d04af2.172014",
    "type": "switchNode",
    "name": "switch access-topology-id",
    "xml": "<switch test=\"`$tmp.ep.parameters.param[$idx].name == 'access-topology-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 1693.534812927246,
    "y": 1547.2434606552124,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "f9888c9d.14fbf"
      ]
    ]
  },
  {
    "id": "f9888c9d.14fbf",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1880.534812927246,
    "y": 1543.2434606552124,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "9db1bbe8.d24ee8"
      ]
    ]
  },
  {
    "id": "9db1bbe8.d24ee8",
    "type": "set",
    "name": "set access-topology-id",
    "xml": "<set>\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$tmp.ep.parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 2048.534812927246,
    "y": 1543.843466758728,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "b2ef8ded.b479a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1644.090217590332,
    "y": 1816.3444538116455,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "ca8a96be.c9e6a8",
        "f4e8e4f3.f6e418",
        "dea701ef.7abc9",
        "644c2300.fecafc",
        "8bddc111.2e08f",
        "981ad4ae.e983a8",
        "55066de5.c71104",
        "3af624e0.31f91c",
        "e5ca51fb.cb5be",
        "2e8e574c.c64e68",
        "b731c6a4.c3a218"
      ]
    ]
  },
  {
    "id": "9f0b7f15.8c307",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 2285.534881591797,
    "y": 1880.6776461601257,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "3af624e0.31f91c",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.thirdparty-sdnc-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1902.0347900390625,
    "y": 1917.6775856018066,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "72570e2d.a62fe",
        "c43ec6a3.683488",
        "fb06874f.97c548"
      ]
    ]
  },
  {
    "id": "72570e2d.a62fe",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2122.034725189209,
    "y": 1881.6775546073914,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "9f0b7f15.8c307"
      ]
    ]
  },
  {
    "id": "c43ec6a3.683488",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2131.525665283203,
    "y": 1922.2515606880188,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "c36ea2d9.d18c4"
      ]
    ]
  },
  {
    "id": "fb06874f.97c548",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2126.858642578125,
    "y": 1958.5848736763,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "668b481.e36d4b8"
      ]
    ]
  },
  {
    "id": "c36ea2d9.d18c4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 2278.0970153808594,
    "y": 1918.5373873710632,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "668b481.e36d4b8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 2281.6312866210938,
    "y": 1960.0240216255188,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "55066de5.c71104",
    "type": "get-resource",
    "name": "get-resource pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $oof.vpn.access-node-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.pnf' local-only='false' >\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1847.534683227539,
    "y": 1826.6772294044495,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "84c5aa59.ee67d8",
        "41b15be2.0ba8d4",
        "f1b5d69a.0d7998"
      ]
    ]
  },
  {
    "id": "84c5aa59.ee67d8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2029.5347290039062,
    "y": 1771.677339553833,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "7e1d241.12440dc"
      ]
    ]
  },
  {
    "id": "41b15be2.0ba8d4",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2030.0256309509277,
    "y": 1809.2514362335205,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "e55b495c.733518"
      ]
    ]
  },
  {
    "id": "f1b5d69a.0d7998",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2021.358642578125,
    "y": 1842.5848112106323,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "4d6a36cc.899768"
      ]
    ]
  },
  {
    "id": "e55b495c.733518",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 2177.597255706787,
    "y": 1808.5373249053955,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "4d6a36cc.899768",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 2175.1312866210938,
    "y": 1842.023959159851,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "7e1d241.12440dc",
    "type": "set",
    "name": "set tmp.thirdparty-sdnc-id",
    "xml": "<set>\n<parameter name='tmp.thirdparty-sdnc-id' value=\"`$tmp.aai.pnf.relationship-list.relationship[0].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 2214.5347290039062,
    "y": 1770.6774616241455,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "9df363c3.42e7",
    "type": "comment",
    "name": "get domain controller information",
    "info": "",
    "comments": "",
    "x": 1898.0385971069336,
    "y": 1793.6811847686768,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "2e8e574c.c64e68",
    "type": "set",
    "name": "set oof.vpn",
    "xml": "<set>\n<parameter name='oof.vpn.' value='`$oof.vpns[$vidx].`' />",
    "comments": "",
    "x": 1859.534683227539,
    "y": 1747.7883129119873,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "f4e8e4f3.f6e418",
    "type": "save",
    "name": "save VPN resource in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.vpnName' >\n<parameter name='vpn-id' value='`$tmp.vpnName`' />\n<parameter name='vpn-name' value='`$tmp.vpnName`' />\n<parameter name='access-provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='access-client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='access-topology-id' value='`$oof.vpn.access-topology-id`' />\n<parameter name='src-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />\n<parameter name='dst-access-node-id' value='`$oof.vpn.access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$oof.vpn.dst-access-ltp-id`' />\n<parameter name='vpn-type' value='`$prop.global.sotn.vpnType`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />",
    "comments": "",
    "outputs": 1,
    "x": 1874.0001602172852,
    "y": 2324.7506742477417,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "dea701ef.7abc9",
    "type": "set",
    "name": "set tmp.vpnName",
    "xml": "<set>\n<parameter name='tmp.vpnName' value=\"`$oof.vpn.access-node-id + '-' + $prop.global.sotn.etht-svc-name`\" />",
    "comments": "",
    "x": 1850.5001602172852,
    "y": 2277.250370979309,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "644c2300.fecafc",
    "type": "save",
    "name": "save connectivity relationship in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $mdsal-psd.service-data.networks.network[0].network-id`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$mdsal-psd.service-data.networks.network[0].network-id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1909.0001602172852,
    "y": 2369.7504301071167,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "ce418ee5.81a4e",
    "type": "comment",
    "name": "save vpn and its relation to AAI",
    "info": "",
    "comments": "",
    "x": 1892.000358581543,
    "y": 2238.7506399154663,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "ca8a96be.c9e6a8",
    "type": "set",
    "name": "set src-ltpId dst-ltpId",
    "xml": "<set>\n<parameter name='src-ltpId' value=\"`'nodeId-' + $oof.vpn.access-node-id + '-ltpId-' + $oof.vpn.src-access-ltp-id`\" />\n<parameter name='dst-ltpId' value=\"`'nodeId-' + $oof.vpn.access-node-id + '-ltpId-' + $oof.vpn.dst-access-ltp-id`\" />",
    "comments": "",
    "x": 1861.0001907348633,
    "y": 2409.7505502700806,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "8bddc111.2e08f",
    "type": "save",
    "name": "save srcLTP relationship in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $src-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$src-ltpId`\" />\n\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1895.0004425048828,
    "y": 2449.500759124756,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "981ad4ae.e983a8",
    "type": "save",
    "name": "save dstLTP relationship in AAI",
    "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $tmp.vpnName' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"p-interface\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/pnfs/pnf/' + $oof.vpn.access-node-id + '/p-interfaces/p-interface/' + $dst-ltpId`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"p-interface.interface-name\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$dst-ltpId`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1893.0002746582031,
    "y": 2495.2505979537964,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "b13bf095.cdea1",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 839.0039367675781,
    "y": 600.0039119720459,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "fb3f3db1.2e857",
        "549a2a73.774b74"
      ]
    ]
  },
  {
    "id": "dcca5b8a.14d818",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource parent service data",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url-psd`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-psd\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 766.0040893554688,
    "y": 827.004075050354,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "e3a34e44.03f86",
        "8447b050.f664b"
      ]
    ]
  },
  {
    "id": "5d5e7f8f.d3d28",
    "type": "execute",
    "name": "get parent-service-data url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"/restconf/config/GENERIC-RESOURCE-API:services/service/{service-instance-id}/service-data\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url-psd\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.parent-service-instance-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 666.0039978027344,
    "y": 790.0039081573486,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "8c502b5e.ba0e48",
    "type": "execute",
    "name": "generate tmp.ar-other-url-connection",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-other-url-connection\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.provided-ar.allotted-resource-id`\"/>\n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 2080.0003509521484,
    "y": 946.3334693908691,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "b7c302f0.0eaa4",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-other-url-connection`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-other-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2217.000991821289,
    "y": 988.8333339691162,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "642168d6.c96a08",
        "d6797517.070b08"
      ]
    ]
  },
  {
    "id": "cafce3b5.74fb5",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1842.0002708435059,
    "y": 1712.0001192092896,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "73f1353a.31fe0c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1218.9688835144043,
    "y": 1737.0003032684326,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "73456eef.45eac",
        "da1582e5.d9e86"
      ]
    ]
  },
  {
    "id": "bd2b5022.a474e",
    "type": "outcome",
    "name": "outcome PendingDelete",
    "xml": "<outcome value='PendingDelete'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2293.0313415527344,
    "y": 552.0312976837158,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "44575632.3edd28"
      ]
    ]
  },
  {
    "id": "44575632.3edd28",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2477.031352996826,
    "y": 548.0312976837158,
    "z": "f24fb736.66a428",
    "wires": [
      []
    ]
  },
  {
    "id": "b731c6a4.c3a218",
    "type": "execute",
    "name": "execute RestApiCallNode Get token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
    "comments": "",
    "outputs": 1,
    "x": 1922.5039367675781,
    "y": 2044.003927230835,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "ce234ab1.289298",
        "b6c8858.bd95c78"
      ]
    ]
  },
  {
    "id": "ce234ab1.289298",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2157.503936767578,
    "y": 2022.003927230835,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "98d09cc3.1216f"
      ]
    ]
  },
  {
    "id": "b6c8858.bd95c78",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2149.753936767578,
    "y": 2075.646810531616,
    "z": "f24fb736.66a428",
    "wires": [
      [
        "82c72a3.d7e47d8"
      ]
    ]
  },
  {
    "id": "82c72a3.d7e47d8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
    "comments": "",
    "x": 2302.503936767578,
    "y": 2075.3968715667725,
    "z": "f24fb736.66a428",
    "wires": []
  },
  {
    "id": "98d09cc3.1216f",
    "type": "set",
    "name": "set token-id",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id ' value='`$token-result.data.token_id`' />\n",
    "comments": "",
    "x": 2311.503936767578,
    "y": 2023.003927230835,
    "z": "f24fb736.66a428",
    "wires": []
  }
]
