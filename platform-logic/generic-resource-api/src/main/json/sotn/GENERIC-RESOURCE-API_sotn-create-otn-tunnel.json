[
    {
        "id": "2d787bd1.a214b4",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 92,
        "y": 22,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "99a6e8f9.6615a8"
            ]
        ]
    },
    {
        "id": "99a6e8f9.6615a8",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 206,
        "y": 125.00003051757812,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "d3f739cf.6d5a28"
            ]
        ]
    },
    {
        "id": "d3f739cf.6d5a28",
        "type": "method",
        "name": "sotn-create-otn-tunnel",
        "xml": "<method rpc='sotn-create-otn-tunnel' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 217.0001220703125,
        "y": 297,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "eb49715b.e15e8"
            ]
        ]
    },
    {
        "id": "acad5285.a3e1a",
        "type": "comment",
        "name": "get cross-domain-link information",
        "info": "",
        "comments": "",
        "x": 449.5001220703125,
        "y": 31.286468505859375,
        "z": "17040f2b.d4a821",
        "wires": []
    },
    {
        "id": "eb49715b.e15e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 336.9688720703125,
        "y": 425.74163818359375,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "96ed9e8f.b90f",
                "f1e66bd.f624698",
                "386c8b8a.515584"
            ]
        ]
    },
    {
        "id": "96ed9e8f.b90f",
        "type": "switchNode",
        "name": "switch prop.sdncRestApi.token_id",
        "xml": "<switch test=\"`$prop.sdncRestApi.token_id`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 586,
        "y": 625,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "f9d6c529.483238",
                "aec39761.70cfc8"
            ]
        ]
    },
    {
        "id": "f9d6c529.483238",
        "type": "other",
        "name": "Null",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 882.8438110351562,
        "y": 580.1218872070312,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "cb912ed0.0c0a3"
            ]
        ]
    },
    {
        "id": "aec39761.70cfc8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 881.5,
        "y": 659,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "a260c7eb.1e65d8"
            ]
        ]
    },
    {
        "id": "a260c7eb.1e65d8",
        "type": "execute",
        "name": "execute RestconfApiCallNode Create ethernet Service with token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfapicall.RestconfApiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1193,
        "y": 661,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "b31b1f14.b450e",
                "31c0814c.e11a0e"
            ]
        ]
    },
    {
        "id": "cb912ed0.0c0a3",
        "type": "execute",
        "name": "execute RestconfApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restconfapicall.RestconfApiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-te:te'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/sdnc/restapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
        "comments": "",
        "outputs": 1,
        "x": 1205,
        "y": 584,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "31c0814c.e11a0e",
                "b31b1f14.b450e"
            ]
        ]
    },
    {
        "id": "b31b1f14.b450e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1626.5,
        "y": 652,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "6b799b05.9369c4"
            ]
        ]
    },
    {
        "id": "6b799b05.9369c4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1821,
        "y": 645,
        "z": "17040f2b.d4a821",
        "wires": [
            []
        ]
    },
    {
        "id": "401bdd4e.60ff34",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
        "comments": "",
        "x": 1795.5,
        "y": 583,
        "z": "17040f2b.d4a821",
        "wires": []
    },
    {
        "id": "31c0814c.e11a0e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1611.5,
        "y": 587,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "401bdd4e.60ff34"
            ]
        ]
    },
    {
        "id": "f1e66bd.f624698",
        "type": "switchNode",
        "name": "switch eth topo's provider-id",
        "xml": "<switch test='`$oof.vpn.access-provider-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 594,
        "y": 173,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "daa01201.b40fe",
                "ffd4b2da.f2213"
            ]
        ]
    },
    {
        "id": "daa01201.b40fe",
        "type": "outcome",
        "name": "domain A's OTN topo's provider ID",
        "xml": "<outcome value='`$domain-A.provider-id`'>\n\u0001",
        "comments": "",
        "outputs": 1,
        "x": 897.285888671875,
        "y": 108.82177734375,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "647bcb79.cd9c24"
            ]
        ]
    },
    {
        "id": "647bcb79.cd9c24",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1154.117431640625,
        "y": 107.34027099609375,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "7c841c48.339f24"
            ]
        ]
    },
    {
        "id": "ffd4b2da.f2213",
        "type": "outcome",
        "name": "domain B's OTN topo's provider ID",
        "xml": "<outcome value='`$domain-B.provider-id`'>\n\u0001",
        "comments": "",
        "outputs": 1,
        "x": 895,
        "y": 212,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "ada6a164.5b7e9"
            ]
        ]
    },
    {
        "id": "7c841c48.339f24",
        "type": "set",
        "name": "set otn domain node",
        "xml": "<set>\n<parameter name='tmp.otn-domain.' value='`$domain-A.`' />\n",
        "comments": "",
        "x": 1359,
        "y": 106,
        "z": "17040f2b.d4a821",
        "wires": []
    },
    {
        "id": "ada6a164.5b7e9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1150,
        "y": 209,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "24ca0ba6.6ddfe4"
            ]
        ]
    },
    {
        "id": "24ca0ba6.6ddfe4",
        "type": "set",
        "name": "set otn domain node",
        "xml": "<set>\n<parameter name='$tmp.otn-domain.' value='`$domain-B.`' />\n",
        "comments": "",
        "x": 1354.882568359375,
        "y": 207.65972900390625,
        "z": "17040f2b.d4a821",
        "wires": []
    },
    {
        "id": "386c8b8a.515584",
        "type": "switchNode",
        "name": "switch eth node ID",
        "xml": "<switch test='`$oof.vpn.access-node-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 600,
        "y": 427,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "d91602b.4cd09",
                "c018f42b.2b1a68"
            ]
        ]
    },
    {
        "id": "d91602b.4cd09",
        "type": "outcome",
        "name": "source eth node",
        "xml": "<outcome value='`$oof.vpns[0].access-node-id`'>\n\u0001",
        "comments": "",
        "outputs": 1,
        "x": 840.285888671875,
        "y": 349.82177734375,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "fd2adb67.e7ca38"
            ]
        ]
    },
    {
        "id": "fd2adb67.e7ca38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1044.117431640625,
        "y": 349.34027099609375,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "ad11583e.e14ea8"
            ]
        ]
    },
    {
        "id": "17b601bf.a39ace",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1046,
        "y": 469,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "97fd4aa8.fd21b8"
            ]
        ]
    },
    {
        "id": "c018f42b.2b1a68",
        "type": "outcome",
        "name": "dest eth node",
        "xml": "<outcome value='`$oof.vpns[$oof.vpns_length].access-node-id`'>\n\u0001",
        "comments": "",
        "outputs": 1,
        "x": 841,
        "y": 469,
        "z": "17040f2b.d4a821",
        "wires": [
            [
                "17b601bf.a39ace"
            ]
        ]
    },
    {
        "id": "ad11583e.e14ea8",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='ietf-te_te.tunnels.tunnel[0].source' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].destination' value='`$otn-domain.node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].dst-ttp-id' value='`$otn-domain.ttp-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].ietf-otn-tunnel_dst-tpn' value='`$otn-domain.tpn`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].name' value='otntunnel-22' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.client-id' value='`$otn-domain.client-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.provider-id' value='`$otn-domain.provider-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.topology-id' value='`$otn-domain.te-topo-id`' />\n\n<parameter name='ietf-te_te.tunnels.tunnel[1].source' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].destination' value='`$otn-domain.node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].name' value='tptunnel-22' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].dependency-tunnels.dependency-tunnel[0].name' value='otntunnel-22' />\n\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.topology-id' value='`$oof.vpn.access-topology-id`' />",
        "comments": "",
        "x": 1286,
        "y": 350,
        "z": "17040f2b.d4a821",
        "wires": []
    },
    {
        "id": "4add26c3.ec74e8",
        "type": "comment",
        "name": "cross domain OTN node is the dest of OTN tunnel",
        "info": "",
        "comments": "",
        "x": 945,
        "y": 306,
        "z": "17040f2b.d4a821",
        "wires": []
    },
    {
        "id": "15de3156.c96c3f",
        "type": "comment",
        "name": "cross domain OTN node is the source of OTN tunnel",
        "info": "",
        "comments": "",
        "x": 954,
        "y": 429,
        "z": "17040f2b.d4a821",
        "wires": []
    },
    {
        "id": "97fd4aa8.fd21b8",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='ietf-te_te.tunnels.tunnel[0].destination' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].source' value='`$otn-domain.node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].src-ttp-id' value='`$otn-domain.ttp-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].ietf-otn-tunnel_src-tpn' value='`$otn-domain.tpn`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].name' value='otntunnel-22' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.client-id' value='`$otn-domain.client-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.provider-id' value='`$otn-domain.provider-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[0].te-topology-identifier.topology-id' value='`$otn-domain.te-topo-id`' />\n\n<parameter name='ietf-te_te.tunnels.tunnel[1].destination' value='`$oof.vpn.access-node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].source' value='`$otn-domain.node-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].name' value='tptunnel-22' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].dependency-tunnels.dependency-tunnel[0].name' value='otntunnel-22' />\n\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.client-id' value='`$oof.vpn.access-client-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.provider-id' value='`$oof.vpn.access-provider-id`' />\n<parameter name='ietf-te_te.tunnels.tunnel[1].te-topology-identifier.topology-id' value='`$oof.vpn.access-topology-id`' />",
        "comments": "",
        "x": 1294,
        "y": 474,
        "z": "17040f2b.d4a821",
        "wires": []
    }
]