[
    {
        "id": "81a545fb.c9ab18",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 97,
        "y": 62.57143306732178,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "f0da53e7.53606"
            ]
        ]
    },
    {
        "id": "e0fb3691.5200e8",
        "type": "method",
        "name": "method self-serve-netbox-ip-assign",
        "xml": "<method rpc='self-serve-netbox-ip-assign' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 232.7857208251953,
        "y": 119.69842147827148,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "5f882b97.300b14"
            ]
        ]
    },
    {
        "id": "5f882b97.300b14",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 126.32144165039062,
        "y": 206.0000400543213,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "626323a4.57d85c",
                "d31a5495.9cad88",
                "6d32e9f5.1cd7",
                "9a20136f.2c516",
                "bbc2d0e5.f8209"
            ]
        ]
    },
    {
        "id": "f0da53e7.53606",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API 1.4.1-SNAPSHOT",
        "module": "GENERIC-RESOURCE-API",
        "version": "1.4.1-SNAPSHOT",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='1.4.1-SNAPSHOT'>",
        "outputs": 1,
        "x": 369.8571472167969,
        "y": 62,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "e0fb3691.5200e8"
            ]
        ]
    },
    {
        "id": "626323a4.57d85c",
        "type": "switchNode",
        "name": "switch: ss.capability-name",
        "xml": "<switch test='`$ss.capability-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 384.4999694824219,
        "y": 209.82144165039062,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "8456fba3.d10e58"
            ]
        ]
    },
    {
        "id": "8456fba3.d10e58",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "outputs": 1,
        "x": 609.4999923706055,
        "y": 210.32144021987915,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "4cf4ff04.832d88"
            ]
        ]
    },
    {
        "id": "4cf4ff04.832d88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"ss.capability-name is null\" />\n",
        "comments": "",
        "x": 769.4166641235352,
        "y": 210.43253898620605,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "d31a5495.9cad88",
        "type": "switchNode",
        "name": "switch: ss.capability-action",
        "xml": "<switch test='`$ss.capability-action`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 387.74996185302734,
        "y": 285.82143688201904,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "845e782.d4e9d08"
            ]
        ]
    },
    {
        "id": "845e782.d4e9d08",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 611.2499618530273,
        "y": 286.07143688201904,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "f9b6e45a.c86628"
            ]
        ]
    },
    {
        "id": "f9b6e45a.c86628",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"ss.capability-action is null\" />\n",
        "comments": "",
        "x": 771.166633605957,
        "y": 286.18253564834595,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "318181a9.84020e",
        "type": "outcome",
        "name": "unassign",
        "xml": "<outcome value='unassign'>",
        "comments": "",
        "outputs": 1,
        "x": 1236.8930969238281,
        "y": 3050.6666650772095,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "2a463c78.49c66c"
            ]
        ]
    },
    {
        "id": "6d32e9f5.1cd7",
        "type": "call",
        "name": "call self-service-capability-param-resolution",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='self-service-capability-param-resolution' mode='sync' >\n",
        "comments": "",
        "outputs": 1,
        "x": 438.41680908203125,
        "y": 360.82147216796875,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "1089061e.8e50b2"
            ]
        ]
    },
    {
        "id": "1089061e.8e50b2",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 742.6667060852051,
        "y": 362.821475982666,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "ab40679c.f8d9f8"
            ]
        ]
    },
    {
        "id": "ab40679c.f8d9f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"`'Not all assignments are resolved' + $error-message`\" />\n",
        "comments": "",
        "x": 901.4166870117188,
        "y": 362.82147216796875,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "791c2a13.b8e0e4",
        "type": "set",
        "name": "set tmp.ss.param.capability-name",
        "xml": "<set>\n<parameter name='tmp.ss.param.capability-name' \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.capability-name`' />\n",
        "comments": "",
        "x": 1184.0635833740234,
        "y": 1972.7697825431824,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "d0353362.2baaa8",
        "type": "for",
        "name": "for pidx in param_length",
        "xml": "<for index=\"pidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\">",
        "comments": "",
        "outputs": 1,
        "x": 894.2778091430664,
        "y": 1972.8412528038025,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "87164d5.612b6b",
                "6d2a59fc.a393c",
                "791c2a13.b8e0e4"
            ]
        ]
    },
    {
        "id": "6d2a59fc.a393c",
        "type": "switchNode",
        "name": "switch: capability-name - ss vs param",
        "xml": "<switch test='`$tmp.ss.param.capability-name == $ss.capability-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1197.139045715332,
        "y": 2054.119035243988,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "ced3e40a.613a4"
            ]
        ]
    },
    {
        "id": "ced3e40a.613a4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1435.8890533447266,
        "y": 2053.869035243988,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "a1cda1d7.c78738"
            ]
        ]
    },
    {
        "id": "43dde016.14c988",
        "type": "switchNode",
        "name": "switch: resource-key[].name",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1685.7783126831055,
        "y": 2304.1630301475525,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "9e792efd.6e8f18",
                "75d41841.1a5528",
                "45b26227.be80cc",
                "949dc2d7.07aeb8",
                "7791a668.3eedd8"
            ]
        ]
    },
    {
        "id": "75d41841.1a5528",
        "type": "outcome",
        "name": "service-instance-id",
        "xml": "<outcome value='service-instance-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1957.167221069336,
        "y": 2303.6352486610413,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "17628f66.12faf9"
            ]
        ]
    },
    {
        "id": "17628f66.12faf9",
        "type": "set",
        "name": "set tmp.ss.service-instance-id",
        "xml": "<set>\n<parameter name='tmp.ss.service-instance-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n",
        "comments": "",
        "x": 2223.417221069336,
        "y": 2303.3852486610413,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "c1e36161.071a28",
        "type": "set",
        "name": "set service-data...param[].value = ip-address",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].value' \n\tvalue='`$self_serve_netbox_ip_assignement.ip-address`' />\n",
        "comments": "",
        "x": 2513.9602966308594,
        "y": 2833.6275024414062,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "77a23c27.8fdbbc",
        "type": "update",
        "name": "get-resource IPAM_IP_ASSIGNEMENT",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n\tkey='SELECT * from IPAM_IP_ASSIGNEMENT \n\t\tWHERE external_key = $tmp.ss.external-key\n\t\tAND service_instance_id = $tmp.ss.service-instance-id' >",
        "comments": "",
        "outputs": 1,
        "x": 1712.3771667480469,
        "y": 3049.488076210022,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "660513b1.939ed4",
                "7cfde184.63095"
            ]
        ]
    },
    {
        "id": "660513b1.939ed4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2006.9645042419434,
        "y": 3050.4881093502045,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "1d6c051a.3cad73"
            ]
        ]
    },
    {
        "id": "2a463c78.49c66c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1406.2144622802734,
        "y": 3051.1310205459595,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "77a23c27.8fdbbc"
            ]
        ]
    },
    {
        "id": "3a4a6569.ae3a4a",
        "type": "for",
        "name": "for kidx in resource-key_length",
        "xml": "<for index=\"kidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key_length`\">",
        "comments": "",
        "outputs": 1,
        "x": 1402.6393966674805,
        "y": 2302.0241141319275,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "43dde016.14c988"
            ]
        ]
    },
    {
        "id": "ccb56d33.1db1f8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 610.5358581542969,
        "y": 1970.9642333984375,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "d0353362.2baaa8",
                "a3b18f9e.bafc38"
            ]
        ]
    },
    {
        "id": "3f998ebf.779ada",
        "type": "update",
        "name": "update IPAM_IP_ASSIGNEMENT to PENDING_DELETE...",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource\" resource=\"SQL\"\n\tkey=\"UPDATE IPAM_IP_ASSIGNEMENT set ip_status = $tmp.status \n\t\tWHERE external_key = $tmp.ss.external-key\n\t\tAND service_instance_id = $tmp.ss.service-instance-id\" >",
        "comments": "",
        "outputs": 1,
        "x": 2535.274139404297,
        "y": 3141.166787147522,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "cba11044.ff5a78"
            ]
        ]
    },
    {
        "id": "6abec744.22fec",
        "type": "set",
        "name": "set status = PENDING_DELETE",
        "xml": "<set>\n<parameter name='tmp.status' value=\"PENDING_DELETE\" />\n",
        "comments": "",
        "x": 2445.190643310547,
        "y": 3099.500039100647,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "cba11044.ff5a78",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2842.9405975341797,
        "y": 3141.7501106262207,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "91a4648d.b67a98"
            ]
        ]
    },
    {
        "id": "91a4648d.b67a98",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Error updating NETBOX_IP_ASSIGNMENTS table to unassign ip with external_key=' + $tmp.ss.external-key + ' and service_instance_id=' + $tmp.ss.service-instance-id`\" />\n",
        "comments": "",
        "x": 3021.940887451172,
        "y": 3141.5597314834595,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "eac1ff80.f0921",
        "type": "execute",
        "name": "execute Netbox unassign IP addresses",
        "xml": "<execute plugin=\"org.onap.ccsdk.sli.adaptors.netbox.api.NetboxClient\" method=\"unassignIpAddress\">\n<parameter name=\"service_instance_id\" value=\"`$tmp.ss.service-instance-id`\" />\n<parameter name=\"external_key\" value=\"`$tmp.ss.external-key`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2465.2740173339844,
        "y": 3187.416848182678,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "f1bec37a.9edec",
                "f6fc6196.60f198"
            ]
        ]
    },
    {
        "id": "f1bec37a.9edec",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2708.6072845458984,
        "y": 3187.4167976379395,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "4434ac13.c51f24"
            ]
        ]
    },
    {
        "id": "4434ac13.c51f24",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Error in NetboxClient#unassignIPAddress with external-key='+ $tmp.ss.external-key`\" />\n",
        "comments": "",
        "x": 2870.6073112487793,
        "y": 3187.226532936096,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "e3f89d6.062626",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2185.893051147461,
        "y": 3098.916666984558,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "6abec744.22fec",
                "3f998ebf.779ada",
                "eac1ff80.f0921"
            ]
        ]
    },
    {
        "id": "a3b18f9e.bafc38",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`'SS: pidx: ' + $pidx`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 846.3414611816406,
        "y": 2027.9087219238281,
        "z": "e2420b88.e8041",
        "wires": [
            []
        ]
    },
    {
        "id": "9e792efd.6e8f18",
        "type": "outcome",
        "name": "vf-module-id",
        "xml": "<outcome value='vf-module-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1939.000228881836,
        "y": 2349.885187625885,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "e3f5b14f.fd535"
            ]
        ]
    },
    {
        "id": "e3f5b14f.fd535",
        "type": "set",
        "name": "set tmp.ss.vf-module-id",
        "xml": "<set>\n<parameter name='tmp.ss.vf-module-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n",
        "comments": "",
        "x": 2205.0003509521484,
        "y": 2349.885187625885,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "c1721d5c.f66a28",
        "type": "set",
        "name": "set resource-resolution-data.status = DELETED",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.status' \n\tvalue='DELETED' />\n",
        "comments": "",
        "x": 2975.499969482422,
        "y": 3242.737548828125,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "45b26227.be80cc",
        "type": "outcome",
        "name": "prefix-id",
        "xml": "<outcome value='prefix-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1928.055892944336,
        "y": 2394.135218143463,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "f287638e.dff5f8"
            ]
        ]
    },
    {
        "id": "f287638e.dff5f8",
        "type": "set",
        "name": "set prefix-id",
        "xml": "<set>\n<parameter name='tmp.ss.prefix-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n",
        "comments": "",
        "x": 2174.555892944336,
        "y": 2394.385187625885,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "aec73bcd.ce469",
        "type": "execute",
        "name": "execute NetboxClient assignIpAddress",
        "xml": "<execute plugin=\"org.onap.ccsdk.sli.adaptors.netbox.api.NetboxClient\" method=\"assignIpAddress\">\n<parameter name=\"service_instance_id\" value=\"`$tmp.ss.service-instance-id`\" />\n<parameter name=\"vf_module_id\" value=\"`$tmp.ss.vf-module-id`\" />\n<parameter name=\"prefix_id\" value=\"`$tmp.ss.prefix-id`\" />\n<parameter name=\"resource_name\" value=\"`$tmp.ss.param.name`\" />\n<parameter name=\"external_key\" value=\"`$tmp.ss.external-key`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1709.9526672363281,
        "y": 2708.655068397522,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "7178cffd.cdc738",
                "d4cdbbb1.30567"
            ]
        ]
    },
    {
        "id": "7178cffd.cdc738",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2026.9526672363281,
        "y": 2710.6550073623657,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "ec113a02.5a738"
            ]
        ]
    },
    {
        "id": "ec113a02.5a738",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2234.952667236328,
        "y": 2714.6550073623657,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "79bfe22a.c1a3ac",
                "86d053eb.25d3e8"
            ]
        ]
    },
    {
        "id": "79bfe22a.c1a3ac",
        "type": "set",
        "name": "set resource-resolution-data.status = FAILED",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.status' value='FAILED' />\n",
        "comments": "",
        "x": 2551.9527282714844,
        "y": 2718.6549768447876,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "86d053eb.25d3e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2449.3335876464844,
        "y": 2768.2582397460938,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "4931938.7470c6c",
        "type": "set",
        "name": "set resource-resolution-data.status = SUCCESS",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.status' \n\tvalue='SUCCESS' />\n",
        "comments": "",
        "x": 2531.035858154297,
        "y": 2884.3458251953125,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "949dc2d7.07aeb8",
        "type": "outcome",
        "name": "ip-address-id",
        "xml": "<outcome value='ip-address-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1941.9370422363281,
        "y": 2438.9922919273376,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "23e6c682.027d52"
            ]
        ]
    },
    {
        "id": "23e6c682.027d52",
        "type": "set",
        "name": "ip-address-id",
        "xml": "<set>\n<parameter name='tmp.ss.ip-address-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n",
        "comments": "",
        "x": 2176.9369201660156,
        "y": 2438.992352962494,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "7791a668.3eedd8",
        "type": "outcome",
        "name": "external_key",
        "xml": "<outcome value='external_key'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1929.5560607910156,
        "y": 2484.7065863609314,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "92c88dec.6ec6c"
            ]
        ]
    },
    {
        "id": "92c88dec.6ec6c",
        "type": "set",
        "name": "set external-key",
        "xml": "<set>\n<parameter name='tmp.ss.external-key' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n",
        "comments": "",
        "x": 2178.127471923828,
        "y": 2484.7066473960876,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "87164d5.612b6b",
        "type": "set",
        "name": "set tmp.ss.param.name",
        "xml": "<set>\n<parameter name='tmp.ss.param.name' \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].name`' />\n",
        "comments": "",
        "x": 1155.8495254516602,
        "y": 2012.9602675437927,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "a1cda1d7.c78738",
        "type": "switchNode",
        "name": "switch: resource-resolution-data.status",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$pidx].resource-resolution-data.status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 758.2856140136719,
        "y": 2278.9287109375,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "2e182c9.f7fbb54",
                "8b03a6ce.d6aae"
            ]
        ]
    },
    {
        "id": "2e182c9.f7fbb54",
        "type": "not-found",
        "name": "FAILED",
        "xml": "<outcome value='FAILED'>\n",
        "comments": "",
        "outputs": 1,
        "x": 989.7144165039062,
        "y": 2274.928756713867,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "1cd07db8.fcfca2"
            ]
        ]
    },
    {
        "id": "8b03a6ce.d6aae",
        "type": "success",
        "name": "PENDING",
        "xml": "<outcome value='PENDING'>\n",
        "comments": "",
        "outputs": 1,
        "x": 996.4285926818848,
        "y": 2326.6430847644806,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "1cd07db8.fcfca2"
            ]
        ]
    },
    {
        "id": "1cd07db8.fcfca2",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1151.1429138183594,
        "y": 2298.9287719726562,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "3a4a6569.ae3a4a",
                "e8c8dca7.aa6878"
            ]
        ]
    },
    {
        "id": "ea7ba987.1a0dc",
        "type": "outcome",
        "name": "assign",
        "xml": "<outcome value='assign'>",
        "comments": "",
        "outputs": 1,
        "x": 1209.0000305175781,
        "y": 2706.738320350647,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "a98ad3d.830793"
            ]
        ]
    },
    {
        "id": "e8c8dca7.aa6878",
        "type": "switchNode",
        "name": "switch: ss.capability-action",
        "xml": "<switch test='`$ss.capability-action`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 973.0000305175781,
        "y": 2704.738320350647,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "ea7ba987.1a0dc",
                "318181a9.84020e"
            ]
        ]
    },
    {
        "id": "a98ad3d.830793",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1384.4286804199219,
        "y": 2707.595559120178,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "aec73bcd.ce469"
            ]
        ]
    },
    {
        "id": "7cfde184.63095",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2003.6786499023438,
        "y": 3098.202422142029,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "e3f89d6.062626"
            ]
        ]
    },
    {
        "id": "d4cdbbb1.30567",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2035.0000915527344,
        "y": 2774.1666259765625,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "5e7bdba0.64970c"
            ]
        ]
    },
    {
        "id": "1d6c051a.3cad73",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2177.1073128836497,
        "y": 3050.916687147958,
        "z": "e2420b88.e8041",
        "wires": [
            []
        ]
    },
    {
        "id": "5e7bdba0.64970c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2229.2857360839844,
        "y": 2854.166748046875,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "4931938.7470c6c",
                "c1e36161.071a28"
            ]
        ]
    },
    {
        "id": "f6fc6196.60f198",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2713.571990966797,
        "y": 3241.3094482421875,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "c1721d5c.f66a28"
            ]
        ]
    },
    {
        "id": "1ea2b578.f5a173",
        "type": "not-found",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 585.4285583496094,
        "y": 450.4284896850586,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "9484f1c6.0595b"
            ]
        ]
    },
    {
        "id": "9a20136f.2c516",
        "type": "switchNode",
        "name": "switch capability-type. vnf",
        "xml": "<switch test=\"`$ss.capability-type == 'vnf'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 382,
        "y": 451.14276123046875,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "1ea2b578.f5a173"
            ]
        ]
    },
    {
        "id": "bbc2d0e5.f8209",
        "type": "switchNode",
        "name": "switch capability-type vf-module",
        "xml": "<switch test=\"`$ss.capability-type == 'vf-module'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 404.28582763671875,
        "y": 1836.6666259765625,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "d4d568b6.8328e"
            ]
        ]
    },
    {
        "id": "d4d568b6.8328e",
        "type": "not-found",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 623.2858276367188,
        "y": 1837.6666870117188,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "ccb56d33.1db1f8"
            ]
        ]
    },
    {
        "id": "ebb3712c.dc6a78",
        "type": "outcome",
        "name": "unassign",
        "xml": "<outcome value='unassign'>",
        "comments": "",
        "outputs": 1,
        "x": 1198.3333129882812,
        "y": 1566.3690576553345,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "e4e66230.c2b8f"
            ]
        ]
    },
    {
        "id": "dfa28834.317128",
        "type": "set",
        "name": "set tmp.ss.param.capability-name",
        "xml": "<set>\n<parameter name='tmp.ss.param.capability-name' \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.capability-name`' />\n",
        "comments": "",
        "x": 1207.1705474853516,
        "y": 546.4722971916199,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "5a84ee02.556ee",
        "type": "for",
        "name": "for pidx in param_length",
        "xml": "<for index='i' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 917.3847732543945,
        "y": 546.54376745224,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "d6ea1735.00e14",
                "75c964b2.49b014",
                "dfa28834.317128"
            ]
        ]
    },
    {
        "id": "75c964b2.49b014",
        "type": "switchNode",
        "name": "switch: capability-name - ss vs param",
        "xml": "<switch test='`$tmp.ss.param.capability-name == $ss.capability-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1220.2460098266602,
        "y": 627.8215498924255,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "1894bfd4.58bd"
            ]
        ]
    },
    {
        "id": "1894bfd4.58bd",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1458.9960174560547,
        "y": 627.5715498924255,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "ac5289b3.158a08"
            ]
        ]
    },
    {
        "id": "fc984256.ec372",
        "type": "switchNode",
        "name": "switch: resource-key[].name",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.resource-key[$kidx].name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1647.2185287475586,
        "y": 819.8654227256775,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "ae1e12d9.22d58",
                "fedec56e.af3038",
                "93ce5461.1c2338",
                "1ed9de8f.2de201"
            ]
        ]
    },
    {
        "id": "fedec56e.af3038",
        "type": "outcome",
        "name": "service-instance-id",
        "xml": "<outcome value='service-instance-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1918.607437133789,
        "y": 819.3376412391663,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "cd140b5f.7268"
            ]
        ]
    },
    {
        "id": "cd140b5f.7268",
        "type": "set",
        "name": "set tmp.ss.service-instance-id",
        "xml": "<set>\n<parameter name='tmp.ss.service-instance-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n",
        "comments": "",
        "x": 2184.857437133789,
        "y": 819.0876412391663,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "76ae4cbf.873f44",
        "type": "set",
        "name": "set service-data...param[].value = ip-address",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].value' \n\tvalue='`$self_serve_netbox_ip_assignement.ip-address`' />\n",
        "comments": "",
        "x": 2475.4005126953125,
        "y": 1349.3298950195312,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "f9601d98.3bb5f8",
        "type": "update",
        "name": "get-resource IPAM_IP_ASSIGNEMENT",
        "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n\tkey='SELECT * from IPAM_IP_ASSIGNEMENT \n\t\tWHERE external_key = $tmp.ss.external-key\n\t\tAND service_instance_id = $tmp.ss.service-instance-id' >",
        "comments": "",
        "outputs": 1,
        "x": 1673.8173828125,
        "y": 1565.190468788147,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "228cb362.45c6c4",
                "3be3d327.5cb7e4"
            ]
        ]
    },
    {
        "id": "228cb362.45c6c4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1968.4047203063965,
        "y": 1566.1905019283295,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "e2364fa0.705b78"
            ]
        ]
    },
    {
        "id": "e4e66230.c2b8f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1367.6546783447266,
        "y": 1566.8334131240845,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "f9601d98.3bb5f8"
            ]
        ]
    },
    {
        "id": "d2c8fc1d.e646",
        "type": "for",
        "name": "for kidx in resource-key_length",
        "xml": "<for index=\"kidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.resource-key_length`\">",
        "comments": "",
        "outputs": 1,
        "x": 1364.0796127319336,
        "y": 817.7265067100525,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "fc984256.ec372"
            ]
        ]
    },
    {
        "id": "9484f1c6.0595b",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 633.642822265625,
        "y": 544.666748046875,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "5a84ee02.556ee",
                "96aa9def.63769"
            ]
        ]
    },
    {
        "id": "d4210f2e.db7cd",
        "type": "update",
        "name": "update IPAM_IP_ASSIGNEMENT to PENDING_DELETE...",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource\" resource=\"SQL\"\n\tkey=\"UPDATE IPAM_IP_ASSIGNEMENT set ip_status = $tmp.status \n\t\tWHERE external_key = $tmp.ss.external-key\n\t\tAND service_instance_id = $tmp.ss.service-instance-id\" >",
        "comments": "",
        "outputs": 1,
        "x": 2496.71435546875,
        "y": 1656.869179725647,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "c86838e2.10dcf"
            ]
        ]
    },
    {
        "id": "26ee19e8.b66f9e",
        "type": "set",
        "name": "set status = PENDING_DELETE",
        "xml": "<set>\n<parameter name='tmp.status' value=\"PENDING_DELETE\" />\n",
        "comments": "",
        "x": 2406.630859375,
        "y": 1615.202431678772,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "c86838e2.10dcf",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2804.380813598633,
        "y": 1657.4525032043457,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "2f87060a.29d432"
            ]
        ]
    },
    {
        "id": "2f87060a.29d432",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Error updating NETBOX_IP_ASSIGNMENTS table to unassign ip with external_key=' + $tmp.ss.external-key + ' and service_instance_id=' + $tmp.ss.service-instance-id`\" />\n",
        "comments": "",
        "x": 2983.381103515625,
        "y": 1657.2621240615845,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "9a9b0a81.d82258",
        "type": "execute",
        "name": "execute Netbox unassign IP addresses",
        "xml": "<execute plugin=\"org.onap.ccsdk.sli.adaptors.netbox.api.NetboxClient\" method=\"unassignIpAddress\">\n<parameter name=\"service_instance_id\" value=\"`$tmp.ss.service-instance-id`\" />\n<parameter name=\"external_key\" value=\"`$tmp.ss.external-key`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2426.7142333984375,
        "y": 1703.1192407608032,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "76a35c6f.45bc0c",
                "b4ac5aa1.4197f"
            ]
        ]
    },
    {
        "id": "76a35c6f.45bc0c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2670.0475006103516,
        "y": 1703.1191902160645,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "9c0ab05f.65dc2"
            ]
        ]
    },
    {
        "id": "9c0ab05f.65dc2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Error in NetboxClient#unassignIPAddress with external-key='+ $tmp.ss.external-key`\" />\n",
        "comments": "",
        "x": 2832.0475273132324,
        "y": 1702.9289255142212,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "e0420eb1.9daaf8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2147.333267211914,
        "y": 1614.619059562683,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "26ee19e8.b66f9e",
                "d4210f2e.db7cd",
                "9a9b0a81.d82258"
            ]
        ]
    },
    {
        "id": "96aa9def.63769",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"`'SS: pidx: ' + $pidx`\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 869.4484252929688,
        "y": 601.6112365722656,
        "z": "e2420b88.e8041",
        "wires": [
            []
        ]
    },
    {
        "id": "ae1e12d9.22d58",
        "type": "outcome",
        "name": "vnf-id",
        "xml": "<outcome value='vnf-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1900.440444946289,
        "y": 865.58758020401,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "223f4ef.2ba3032"
            ]
        ]
    },
    {
        "id": "223f4ef.2ba3032",
        "type": "set",
        "name": "set tmp.ss.vnf-id",
        "xml": "<set>\n<parameter name='tmp.ss.vnf-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n",
        "comments": "",
        "x": 2166.4405670166016,
        "y": 865.58758020401,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "ea512910.3acee",
        "type": "set",
        "name": "set resource-resolution-data.status = DELETED",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.status' \n\tvalue='DELETED' />\n",
        "comments": "",
        "x": 2936.940185546875,
        "y": 1758.43994140625,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "93ce5461.1c2338",
        "type": "outcome",
        "name": "prefix-id",
        "xml": "<outcome value='prefix-id'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1889.496109008789,
        "y": 909.8376107215881,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "1485b77e.2e4b71"
            ]
        ]
    },
    {
        "id": "1485b77e.2e4b71",
        "type": "set",
        "name": "set prefix-id",
        "xml": "<set>\n<parameter name='tmp.ss.prefix-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n",
        "comments": "",
        "x": 2135.996109008789,
        "y": 910.08758020401,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "356fae37.9d5602",
        "type": "execute",
        "name": "execute NetboxClient assignIpAddress",
        "xml": "<execute plugin=\"org.onap.ccsdk.sli.adaptors.netbox.api.NetboxClient\" method=\"assignIpAddress\">\n<parameter name=\"service_instance_id\" value=\"`$tmp.ss.service-instance-id`\" />\n<parameter name=\"vf_module_id\" value=\"`$tmp.ss.vnf-id`\" />\n<parameter name=\"prefix_id\" value=\"`$tmp.ss.prefix-id`\" />\n<parameter name=\"resource_name\" value=\"`$tmp.ss.param.name`\" />\n<parameter name=\"external_key\" value=\"`$tmp.ss.external-key`\" />",
        "comments": "",
        "outputs": 1,
        "x": 1671.3928833007812,
        "y": 1224.357460975647,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "e102f1fe.33036",
                "d224dcd9.cd8a9"
            ]
        ]
    },
    {
        "id": "e102f1fe.33036",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1988.3928833007812,
        "y": 1226.3573999404907,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "913f6023.914338"
            ]
        ]
    },
    {
        "id": "913f6023.914338",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2196.3928833007812,
        "y": 1230.3573999404907,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "b002c560.a3c37",
                "f001180c.5afe8"
            ]
        ]
    },
    {
        "id": "b002c560.a3c37",
        "type": "set",
        "name": "set resource-resolution-data.status = FAILED",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.status' value='FAILED' />\n",
        "comments": "",
        "x": 2513.3929443359375,
        "y": 1234.3573694229126,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "f001180c.5afe8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2410.7738037109375,
        "y": 1283.9606323242188,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "6e7cb63a.090238",
        "type": "set",
        "name": "set resource-resolution-data.status = SUCCESS",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.status' \n\tvalue='SUCCESS' />\n",
        "comments": "",
        "x": 2492.47607421875,
        "y": 1400.0482177734375,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "1ed9de8f.2de201",
        "type": "outcome",
        "name": "external_key",
        "xml": "<outcome value='external_key'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1912.246337890625,
        "y": 960.4089965820312,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "bcca115c.79841"
            ]
        ]
    },
    {
        "id": "bcca115c.79841",
        "type": "set",
        "name": "set external-key",
        "xml": "<set>\n<parameter name='tmp.ss.external-key' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.resource-key[$kidx].value`' />\n",
        "comments": "",
        "x": 2160.8177490234375,
        "y": 960.4090576171875,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "d6ea1735.00e14",
        "type": "set",
        "name": "set tmp.ss.param.name",
        "xml": "<set>\n<parameter name='tmp.ss.param.name' \n\tvalue='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].name`' />\n",
        "comments": "",
        "x": 1178.9564895629883,
        "y": 586.6627821922302,
        "z": "e2420b88.e8041",
        "wires": []
    },
    {
        "id": "ac5289b3.158a08",
        "type": "switchNode",
        "name": "switch: resource-resolution-data.status",
        "xml": "<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.status`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 719.725830078125,
        "y": 794.631103515625,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "b257e87a.568418",
                "e9af2b2.a478ad8"
            ]
        ]
    },
    {
        "id": "b257e87a.568418",
        "type": "not-found",
        "name": "FAILED",
        "xml": "<outcome value='FAILED'>\n",
        "comments": "",
        "outputs": 1,
        "x": 951.1546325683594,
        "y": 790.6311492919922,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "80b9e5f.4d9b018"
            ]
        ]
    },
    {
        "id": "e9af2b2.a478ad8",
        "type": "success",
        "name": "PENDING",
        "xml": "<outcome value='PENDING'>\n",
        "comments": "",
        "outputs": 1,
        "x": 957.8688087463379,
        "y": 842.3454773426056,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "80b9e5f.4d9b018"
            ]
        ]
    },
    {
        "id": "80b9e5f.4d9b018",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1112.5831298828125,
        "y": 814.6311645507812,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "d2c8fc1d.e646",
                "f7f6c52e.e11688"
            ]
        ]
    },
    {
        "id": "d21eb2d1.19ce3",
        "type": "outcome",
        "name": "assign",
        "xml": "<outcome value='assign'>",
        "comments": "",
        "outputs": 1,
        "x": 1170.4402465820312,
        "y": 1222.440712928772,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "8bed58c0.45234"
            ]
        ]
    },
    {
        "id": "f7f6c52e.e11688",
        "type": "switchNode",
        "name": "switch: ss.capability-action",
        "xml": "<switch test='`$ss.capability-action`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 934.4402465820312,
        "y": 1220.440712928772,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "d21eb2d1.19ce3",
                "ebb3712c.dc6a78"
            ]
        ]
    },
    {
        "id": "8bed58c0.45234",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1345.868896484375,
        "y": 1223.2979516983032,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "356fae37.9d5602"
            ]
        ]
    },
    {
        "id": "3be3d327.5cb7e4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1965.1188659667969,
        "y": 1613.9048147201538,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "e0420eb1.9daaf8"
            ]
        ]
    },
    {
        "id": "d224dcd9.cd8a9",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1996.4403076171875,
        "y": 1289.8690185546873,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "a6670cd0.d497f"
            ]
        ]
    },
    {
        "id": "e2364fa0.705b78",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2138.547528948103,
        "y": 1566.6190797260829,
        "z": "e2420b88.e8041",
        "wires": [
            []
        ]
    },
    {
        "id": "a6670cd0.d497f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2190.7259521484375,
        "y": 1369.869140625,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "6e7cb63a.090238",
                "76ae4cbf.873f44"
            ]
        ]
    },
    {
        "id": "b4ac5aa1.4197f",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2675.01220703125,
        "y": 1757.0118408203125,
        "z": "e2420b88.e8041",
        "wires": [
            [
                "ea512910.3acee"
            ]
        ]
    }
]