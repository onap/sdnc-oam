[
  {
    "id":"9714cec7.1c4c",
    "type":"dgstart",
    "name":"DGSTART",
    "outputs":1,
    "x":217.99998474121094,
    "y":153.59999084472656,
    "z":"862ed298.34c67",
    "wires":[
      [
        "740711e8.2f0a3"
      ]
    ]
  },
  {
    "id":"740711e8.2f0a3",
    "type":"service-logic",
    "name":"GENERIC-RESOURCE-API ${project.version}",
    "module":"GENERIC-RESOURCE-API",
    "version":"${project.version}",
    "comments":"",
    "xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs":1,
    "x":314.23806381225586,
    "y":214.55238151550293,
    "z":"862ed298.34c67",
    "wires":[
      [
        "98c97074.b0862"
      ]
    ]
  },
  {
    "id":"98c97074.b0862",
    "type":"method",
    "name":"brg-topology-operation-activate",
    "xml":"<method rpc='brg-topology-operation-activate' mode='sync'>\n",
    "comments":"",
    "outputs":1,
    "x":360.154842376709,
    "y":249.79043674468994,
    "z":"862ed298.34c67",
    "wires":[
      [
        "2804280a.93bf08"
      ]
    ]
  },
  {
    "id":"2804280a.93bf08",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":268.4761772155762,
    "y":393.12377882003784,
    "z":"862ed298.34c67",
    "wires":[
      [
        "630ab7ec.b2f0d8",
        "7e4ae814.209b28",
        "2357e7c9.48bf08",
        "ed4c6941.aa8be8",
        "fc236776.686848",
        "4451f783.4736a8",
        "696c9ae0.fd9424",
        "76055be0.805a24",
        "fc290b65.76c018",
        "b2a43c5b.9bcb5",
        "624fd076.69a64",
        "f79aa33.e64036",
        "df8cc0e.bcffc4",
        "bc6ed59e.4e1728",
        "9b6d7ee4.10e23",
        "a6207934.86f518",
        "77b9bf2c.b44d5",
        "7e8c5cfa.726864",
        "a9b802e0.3c87a",
        "9b340dbc.c3cb9",
        "5a18305b.6de8e",
        "570d3d0b.27f934"
      ]
    ]
  },
  {
    "id":"7e4ae814.209b28",
    "type":"returnSuccess",
    "name":"return success",
    "xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments":"",
    "x":528.0001068115234,
    "y":1964.4814386367798,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"630ab7ec.b2f0d8",
    "type":"set",
    "name":"set output to api handler",
    "xml":"<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='brg-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $brg-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments":"",
    "x":556.754020690918,
    "y":1928.6039848327637,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"b2a43c5b.9bcb5",
    "type":"set",
    "name":"set allotted-resource-oper-status",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='Active' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$brg-topology-operation-input.request-information.request-action`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$brg-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$brg-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
    "comments":"",
    "x":574.7542037963867,
    "y":773.6513910293579,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"ed4c6941.aa8be8",
    "type":"set",
    "name":"set tmp.ar.self-link",
    "xml":"<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:brg-allotted-resources/brg-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/brg-topology/'` \" />\n\n",
    "comments":"",
    "x":530.7380485534668,
    "y":366.9333162307739,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"2357e7c9.48bf08",
    "type":"set",
    "name":"set tmp.ar.allotted-resource-id,etc",
    "xml":"<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$brg-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$brg-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n<parameter name='tmp.ar.brg-vnf-id' value='`$brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.brg-vnf-id`' />\n\n\n",
    "comments":"",
    "x":577.9973106384277,
    "y":333.19258213043213,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"fc236776.686848",
    "type":"execute",
    "name":"execute Properties",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments":"",
    "outputs":1,
    "x":536.9934043884277,
    "y":402.8315153121948,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"696c9ae0.fd9424",
    "type":"execute",
    "name":"execute RestApiCallNode - Get AR by id",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":599.5187377929688,
    "y":564.0594825744629,
    "z":"862ed298.34c67",
    "wires":[
      [
        "aa88cd52.d9ee2",
        "9c39ee65.4e4a7"
      ]
    ]
  },
  {
    "id":"4451f783.4736a8",
    "type":"execute",
    "name":"generate allotted-resource url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.brg-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":565.0648384094238,
    "y":462.61721992492676,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"aa88cd52.d9ee2",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":856.8148765563965,
    "y":562.8672430515289,
    "z":"862ed298.34c67",
    "wires":[
      [
        "6411ad19.c5cdf4"
      ]
    ]
  },
  {
    "id":"76055be0.805a24",
    "type":"execute",
    "name":"execute RestApiCallNode - PUT AR by id",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.brg.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":607.529296875,
    "y":917.034122467041,
    "z":"862ed298.34c67",
    "wires":[
      [
        "524852fa.5809ec",
        "45984ad.2c61db4",
        "f284d2b.77bd73"
      ]
    ]
  },
  {
    "id":"524852fa.5809ec",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1131.8373680114746,
    "y":942.0324144363403,
    "z":"862ed298.34c67",
    "wires":[
      [
        "1f14fd6.cfd5303"
      ]
    ]
  },
  {
    "id":"45984ad.2c61db4",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1122.837417602539,
    "y":910.5324401855469,
    "z":"862ed298.34c67",
    "wires":[
      [
        "1f14fd6.cfd5303"
      ]
    ]
  },
  {
    "id":"f284d2b.77bd73",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1126.5874557495117,
    "y":880.8895450606942,
    "z":"862ed298.34c67",
    "wires":[
      [
        "5e98e0e7.a8f18"
      ]
    ]
  },
  {
    "id":"1f14fd6.cfd5303",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for brg-allotted-resource\" />\n",
    "comments":"",
    "x":1292.5874557495117,
    "y":911.2824640274048,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"6411ad19.c5cdf4",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1037.8148307800293,
    "y":563.3671925067902,
    "z":"862ed298.34c67",
    "wires":[
      [
        "b10b50e5.999b7",
        "733a431f.52145c"
      ]
    ]
  },
  {
    "id":"b10b50e5.999b7",
    "type":"switchNode",
    "name":"switch brg length",
    "xml":"<switch test='`$mdsal-ar.brg-allotted-resource_length`'>\n",
    "comments":"",
    "outputs":1,
    "x":1283.672077178955,
    "y":597.6529557704926,
    "z":"862ed298.34c67",
    "wires":[
      [
        "1e55cba1.58e264"
      ]
    ]
  },
  {
    "id":"1e55cba1.58e264",
    "type":"other",
    "name":"outcome 1",
    "xml":"<outcome value='1'>\n",
    "comments":"",
    "outputs":1,
    "x":1474.6720809936523,
    "y":597.6529533863068,
    "z":"862ed298.34c67",
    "wires":[
      [
        "9832defc.b7dbf"
      ]
    ]
  },
  {
    "id":"34a64577.34e1ba",
    "type":"set",
    "name":"set brg-ar from get",
    "xml":"<set>\n<parameter name='brg-ar.' value='$mdsal-ar.brg-allotted-resource[0].' />\n",
    "comments":"",
    "x":1874.5292167663574,
    "y":598.2243776321411,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"9832defc.b7dbf",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic='true'>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1645.5290641784668,
    "y":598.224422454834,
    "z":"862ed298.34c67",
    "wires":[
      [
        "34a64577.34e1ba",
        "559f0e6b.981e9",
        "4c4b37a6.f52e48"
      ]
    ]
  },
  {
    "id":"559f0e6b.981e9",
    "type":"set",
    "name":"set oper-status",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$brg-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$brg-ar.allotted-resource-status.rpc-action`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$brg-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
    "comments":"",
    "x":1872.5294609069824,
    "y":665.6529417037964,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"7ea8f57e.8498ac",
    "type":"comment",
    "name":"GET brg-allotted-resource from mdsal",
    "info":"",
    "comments":"",
    "x":624.8148002624512,
    "y":527.3671834468842,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"4c4b37a6.f52e48",
    "type":"switchNode",
    "name":"switch order-status",
    "xml":"<switch test='`$brg-ar.allotted-resource-data.allotted-resource-oper-status.order-status`'>\n",
    "comments":"",
    "outputs":1,
    "x":1882.529239654541,
    "y":631.2243757247925,
    "z":"862ed298.34c67",
    "wires":[
      [
        "bc5b9fe2.1d29b",
        "1af731a5.1e75de"
      ]
    ]
  },
  {
    "id":"bc5b9fe2.1d29b",
    "type":"outcome",
    "name":"outcome Created",
    "xml":"<outcome value='Created'>\n",
    "comments":"",
    "outputs":1,
    "x":2094.129196166992,
    "y":592.2243757247925,
    "z":"862ed298.34c67",
    "wires":[
      [
        "6d467f9b.08848"
      ]
    ]
  },
  {
    "id":"1af731a5.1e75de",
    "type":"outcome",
    "name":"outcome Other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":2119.8435707092285,
    "y":627.6529664993286,
    "z":"862ed298.34c67",
    "wires":[
      [
        "6d467f9b.08848"
      ]
    ]
  },
  {
    "id":"6005dffd.1f2f8",
    "type":"comment",
    "name":"Set allotted-resource-identifiers",
    "info":"",
    "comments":"",
    "x":580.338623046875,
    "y":617.9386367797852,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"733a431f.52145c",
    "type":"set",
    "name":"save backup copy of mdsal-ar for rollback",
    "xml":"<set>\n<parameter name='bk-brg-ar' value='$mdsal-ar.' />\n",
    "comments":"",
    "x":1363.3864097595215,
    "y":563.3672845363617,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"40eb8f67.e7464",
    "type":"comment",
    "name":"Create urls for restapi",
    "info":"",
    "comments":"",
    "x":535.9576454162598,
    "y":432.224347114563,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"5e98e0e7.a8f18",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1268.243423461914,
    "y":877.0817142501473,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"234bb7ec.13fd38",
    "type":"comment",
    "name":"TO DO: vnf/put parent",
    "info":"",
    "comments":"",
    "x":538.2433624267578,
    "y":805.7481861114502,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"fc290b65.76c018",
    "type":"execute",
    "name":"execute getTime",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":522.2433662414551,
    "y":735.081545829773,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"9c39ee65.4e4a7",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":856.5766716003418,
    "y":599.0814158916473,
    "z":"862ed298.34c67",
    "wires":[
      [
        "ba479039.83567"
      ]
    ]
  },
  {
    "id":"ba479039.83567",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1036.5766220092773,
    "y":599.7479665279388,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"624fd076.69a64",
    "type":"set",
    "name":"set id",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n<parameter name='brg-ar.allotted-resource-status.action' value=\"`$brg-topology-operation-input.request-information.request-action` \" />\n<parameter name='brg-ar.allotted-resource-status.rpc-name' value=\"brg-topology-operation\" />\n<parameter name='brg-ar.allotted-resource-status.rpc-action' value=\"`$brg-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$brg-topology-operation-input.request-information.` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$brg-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$brg-topology-operation-input.service-information.` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$brg-topology-operation-input.allotted-resource-information.` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.brg-request-input.' value=\"`$brg-topology-operation-input.brg-request-input.` \" />",
    "comments":"",
    "x":505.243408203125,
    "y":654.7481575012207,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"6d467f9b.08848",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":2308.599712371826,
    "y":593.6000099182129,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"f79aa33.e64036",
    "type":"update",
    "name":"update AAI allotted-resource",
    "xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $service-data.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $service-data.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $service-data.service-information.service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"operational-status\" value=\"in-service-path\" />\n",
    "comments":"",
    "outputs":1,
    "x":565.8571472167969,
    "y":838.8380537033081,
    "z":"862ed298.34c67",
    "wires":[
      [
        "3772e0cf.d582a",
        "e579d939.2bcda8"
      ]
    ]
  },
  {
    "id":"3772e0cf.d582a",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":821.6190414428711,
    "y":821.7905507087708,
    "z":"862ed298.34c67",
    "wires":[
      [
        "bd539ae8.82afb8"
      ]
    ]
  },
  {
    "id":"bd539ae8.82afb8",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments":"",
    "x":988.1429214477539,
    "y":833.4096217155457,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"e579d939.2bcda8",
    "type":"failure",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":828.7143287658691,
    "y":854.5525183677673,
    "z":"862ed298.34c67",
    "wires":[
      [
        "bd539ae8.82afb8"
      ]
    ]
  },
  {
    "id":"df8cc0e.bcffc4",
    "type":"execute",
    "name":"execute RestApiCallNode - setup BRG to vgMux vxlan tunnel port",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.vpp.vxlan-tunnel.templatefile`\" />\n    <parameter name='restapiUrl' value='`$tmp.honeycomb.url + $tmp.vpp-honeycomb-url`' />\n    <parameter name='restapiUser' value='`$prop.honeycomb.user`' />\n    <parameter name='restapiPassword' value='`$prop.honeycomb.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"honeycomb-vnf\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":682.6666412353516,
    "y":1250.2666578292847,
    "z":"862ed298.34c67",
    "wires":[
      [
        "d7f7d75a.4c4868",
        "3486dace.a913f6",
        "b9738ec8.10f4e"
      ]
    ]
  },
  {
    "id":"d7f7d75a.4c4868",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1016.641429901123,
    "y":1309.598269842565,
    "z":"862ed298.34c67",
    "wires":[
      [
        "882ff805.77cb38"
      ]
    ]
  },
  {
    "id":"3486dace.a913f6",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1007.6414794921875,
    "y":1278.0982955917716,
    "z":"862ed298.34c67",
    "wires":[
      [
        "882ff805.77cb38"
      ]
    ]
  },
  {
    "id":"b9738ec8.10f4e",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1011.3915176391602,
    "y":1248.455400466919,
    "z":"862ed298.34c67",
    "wires":[
      [
        "f51263c3.6ba25"
      ]
    ]
  },
  {
    "id":"882ff805.77cb38",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for brg-allotted-resource\" />\n",
    "comments":"",
    "x":1177.3915176391602,
    "y":1278.8483194336295,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"f51263c3.6ba25",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1153.0474853515625,
    "y":1244.647569656372,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"bc6ed59e.4e1728",
    "type":"execute",
    "name":"execute RestApiCallNode - setup BRG vxlan bridge domain",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.vpp.bridge-domain.templatefile`\" />\n    <parameter name='restapiUrl' value=\"`$tmp.honeycomb.url + $tmp.vpp-honeycomb-url + '/v3po:l2' `\" />\n    <parameter name='restapiUser' value='`$prop.honeycomb.user`' />\n    <parameter name='restapiPassword' value='`$prop.honeycomb.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"honeycomb-vnf\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":664.3334045410156,
    "y":1396.9334523677826,
    "z":"862ed298.34c67",
    "wires":[
      [
        "fa0c2499.dcc778",
        "183327f.13d81d8",
        "c3f0b691.125e48"
      ]
    ]
  },
  {
    "id":"fa0c2499.dcc778",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1012.3080425262451,
    "y":1472.598369024694,
    "z":"862ed298.34c67",
    "wires":[
      [
        "f22038a6.365ea8"
      ]
    ]
  },
  {
    "id":"183327f.13d81d8",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1003.3080921173096,
    "y":1441.0983947739005,
    "z":"862ed298.34c67",
    "wires":[
      [
        "f22038a6.365ea8"
      ]
    ]
  },
  {
    "id":"c3f0b691.125e48",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1007.0581302642822,
    "y":1411.4554996490479,
    "z":"862ed298.34c67",
    "wires":[
      [
        "27dadc9a.d76214"
      ]
    ]
  },
  {
    "id":"f22038a6.365ea8",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for brg-allotted-resource\" />\n",
    "comments":"",
    "x":1173.0581302642822,
    "y":1441.8484186157584,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"27dadc9a.d76214",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1148.7140979766846,
    "y":1407.647668838501,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"77b9bf2c.b44d5",
    "type":"set",
    "name":"set BRG to vgMUX VXLAN Tunnel Port Props",
    "xml":"<set>\n<parameter name='tmp.tunnel-name' value=\"`'vxlanTun' + $brg-ar.allotted-resource-data.brg-topology.brg-assignments.vbrg-wan-ip` \" />\n<parameter name='tmp.tunnel-dest-ip' value=\"`$brg-ar.allotted-resource-data.allotted-resource-operation-information.brg-request-input.vgmux-lan-ip` \" />\n<parameter name='tmp.tunnel-src-ip' value=\"`$brg-ar.allotted-resource-data.allotted-resource-operation-information.brg-request-input.brg-wan-ip-address` \" />\n<parameter name='tmp.tunnel-vni' value=\"`$brg-ar.allotted-resource-data.allotted-resource-operation-information.brg-request-input.vni` \" />",
    "comments":"",
    "x":618.7777862548828,
    "y":1115.2669172286987,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"a6207934.86f518",
    "type":"execute",
    "name":"generate full brg-vpp-honeycomb url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.vpp-honeycomb`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vpp-honeycomb-url\"/>\n    <parameter name=\"target\" value=\"{tunnel-name}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.tunnel-name`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":590.4444274902344,
    "y":1170.2666959762573,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"9b6d7ee4.10e23",
    "type":"execute",
    "name":"generate honeycomb-url to vBRG",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.honeycomb.url`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.honeycomb.url\"/>\n    <parameter name=\"target\" value=\"{honeycomb-instance-ip}\"/>\n    <parameter name=\"replacement\" value=\"`$brg-ar.allotted-resource-data.brg-topology.brg-assignments.vbrg-wan-ip`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":582.4444427490234,
    "y":1029.9332246780396,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"7e8c5cfa.726864",
    "type":"set",
    "name":"set BRG Bridge Domain Props",
    "xml":"<set>\n<parameter name='tmp.bridge-domain' value=\"bridge-domain-10\" />\n<parameter name='tmp.split-horizon-group' value=\"2\" />",
    "comments":"",
    "x":573.7777404785156,
    "y":1321.9333276748657,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"f6f2dfd6.852a7",
    "type":"comment",
    "name":"TO DO: assign brg-ar.allotted-resource-data.brg-topology.brg-assignments.vbrg-wan-ip",
    "info":"need to quary mdsal-ar and get information assigned in tunnelxconn DG?",
    "comments":"",
    "x":740.0000152587891,
    "y":979.100019454956,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"71a3722d.c764ec",
    "type":"comment",
    "name":"save service data for BRG to md-sal for SO to do GET ",
    "info":"http://c1.vm1.sdnc.simpledemo.openecomp.org:8282/restconf/config/GENERIC-RESOURCE-API:services/service/e565bb6b-de14-4a5c-a992-65a681771a7a/service-data/service-topology/\n\n\nservice-instance-id is of the vBRG (in VNF-API data)",
    "comments":"",
    "x":626.5807056427002,
    "y":1518.8236003890634,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"9b340dbc.c3cb9",
    "type":"execute",
    "name":"execute RestApiCallNode - Get service-data by vnf-id",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.vnf-api-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"service-data\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":639.5014038085938,
    "y":1639.934621810913,
    "z":"862ed298.34c67",
    "wires":[
      [
        "4e83fb54.735574",
        "7c8664e4.3c832c"
      ]
    ]
  },
  {
    "id":"4e83fb54.735574",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":928.3213233947754,
    "y":1637.3139653205872,
    "z":"862ed298.34c67",
    "wires":[
      [
        "79817d79.711c34"
      ]
    ]
  },
  {
    "id":"79817d79.711c34",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1109.3212776184082,
    "y":1637.8139147758484,
    "z":"862ed298.34c67",
    "wires":[
      [
        "6046c592.b5db8c",
        "c9922e86.95618"
      ]
    ]
  },
  {
    "id":"6046c592.b5db8c",
    "type":"switchNode",
    "name":"switch brg length",
    "xml":"<switch test='`$service-data.service-data_length`'>\n",
    "comments":"",
    "outputs":1,
    "x":1355.178524017334,
    "y":1672.0996780395508,
    "z":"862ed298.34c67",
    "wires":[
      [
        "c543d4c5.a58778"
      ]
    ]
  },
  {
    "id":"c543d4c5.a58778",
    "type":"other",
    "name":"outcome 1",
    "xml":"<outcome value='1'>\n",
    "comments":"",
    "outputs":1,
    "x":1546.1785278320312,
    "y":1672.099675655365,
    "z":"862ed298.34c67",
    "wires":[
      [
        "3876bd15.40e182"
      ]
    ]
  },
  {
    "id":"7a8acdfc.bcdab4",
    "type":"set",
    "name":"set service-data from get",
    "xml":"<set>\n<parameter name='tmp.service-data.' value='$service-data.service-data[0].' />\n",
    "comments":"",
    "x":1946.0356636047363,
    "y":1672.6710999011993,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"3876bd15.40e182",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic='true'>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1717.0355110168457,
    "y":1672.6711447238922,
    "z":"862ed298.34c67",
    "wires":[
      [
        "7a8acdfc.bcdab4",
        "b568a24.2ba8a6"
      ]
    ]
  },
  {
    "id":"310849e5.8628a6",
    "type":"comment",
    "name":"GET vnf-api service info",
    "info":"",
    "comments":"",
    "x":544.8926582336426,
    "y":1603.2423181533813,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"b568a24.2ba8a6",
    "type":"switchNode",
    "name":"switch order-status",
    "xml":"<switch test='`$tmp.service-data.order-status`'>\n",
    "comments":"",
    "outputs":1,
    "x":1929.7498817443848,
    "y":1724.242525100708,
    "z":"862ed298.34c67",
    "wires":[
      [
        "8af678dd.44f128",
        "afb48fe3.c1a3e"
      ]
    ]
  },
  {
    "id":"8af678dd.44f128",
    "type":"outcome",
    "name":"outcome Created",
    "xml":"<outcome value='Created'>\n",
    "comments":"",
    "outputs":1,
    "x":2165.635643005371,
    "y":1666.6710979938507,
    "z":"862ed298.34c67",
    "wires":[
      [
        "d2e19aea.143628"
      ]
    ]
  },
  {
    "id":"afb48fe3.c1a3e",
    "type":"outcome",
    "name":"outcome Other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":2191.3500175476074,
    "y":1702.0996887683868,
    "z":"862ed298.34c67",
    "wires":[
      [
        "d2e19aea.143628"
      ]
    ]
  },
  {
    "id":"3f5ea151.93eb9e",
    "type":"comment",
    "name":"Set service-data",
    "info":"",
    "comments":"",
    "x":518.9879188537598,
    "y":1688.0995111465454,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"c9922e86.95618",
    "type":"set",
    "name":"save backup copy of mdsal-ar for rollback",
    "xml":"<set>\n<parameter name='bk-service-data' value='$service-data.' />\n",
    "comments":"",
    "x":1434.8928565979004,
    "y":1637.81400680542,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"7c8664e4.3c832c",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":928.0831184387207,
    "y":1673.5281381607056,
    "z":"862ed298.34c67",
    "wires":[
      [
        "d7ef85ba.f3d028"
      ]
    ]
  },
  {
    "id":"d7ef85ba.f3d028",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1108.0830688476562,
    "y":1674.194688796997,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"d2e19aea.143628",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":2380.106159210205,
    "y":1668.0467321872711,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"a9b802e0.3c87a",
    "type":"execute",
    "name":"generate vnf service-info url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.vnf-api.service-information`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vnf-api-url\"/>\n    <parameter name=\"target\" value=\"{vnf-id}\"/>\n    <parameter name=\"replacement\" value=\"`$brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.brg-vnf-id`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":565.3108673095703,
    "y":1561.3633251190186,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"570d3d0b.27f934",
    "type":"execute",
    "name":"execute RestApiCallNode - PUT service into service",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.services.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.services-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":639.5965881347656,
    "y":1816.6016731262207,
    "z":"862ed298.34c67",
    "wires":[
      [
        "50cebd0f.3a5ba4",
        "e6947788.b35638",
        "3b96374a.556b08"
      ]
    ]
  },
  {
    "id":"50cebd0f.3a5ba4",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1145.8094444274902,
    "y":1811.123685836792,
    "z":"862ed298.34c67",
    "wires":[
      [
        "90f2f682.5d5ec8"
      ]
    ]
  },
  {
    "id":"e6947788.b35638",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1136.8094940185547,
    "y":1779.6237115859985,
    "z":"862ed298.34c67",
    "wires":[
      [
        "90f2f682.5d5ec8"
      ]
    ]
  },
  {
    "id":"3b96374a.556b08",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1140.5595321655273,
    "y":1749.9808164611459,
    "z":"862ed298.34c67",
    "wires":[
      [
        "53875c1b.048fd4"
      ]
    ]
  },
  {
    "id":"90f2f682.5d5ec8",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for brg-allotted-resource\" />\n",
    "comments":"",
    "x":1306.5595321655273,
    "y":1780.3737354278564,
    "z":"862ed298.34c67",
    "wires":[

    ]
  },
  {
    "id":"53875c1b.048fd4",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1282.2154998779297,
    "y":1746.172985650599,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"5a18305b.6de8e",
    "type":"execute",
    "name":"generate services url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.services`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.services-url\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.service-data.service-information.service-instance-id`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":542.929931640625,
    "y":1776.1254720687866,
    "z":"862ed298.34c67",
    "wires":[
      [

      ]
    ]
  }
]