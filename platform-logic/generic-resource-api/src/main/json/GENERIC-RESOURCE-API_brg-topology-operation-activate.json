[
  {
    "id":"a5f311cb.210c6",
    "type":"dgstart",
    "name":"DGSTART",
    "outputs":1,
    "x":139,
    "y":110,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "3cc114db.e05a3c"
      ]
    ]
  },
  {
    "id":"3cc114db.e05a3c",
    "type":"service-logic",
    "name":"GENERIC-RESOURCE-API ${project.version}",
    "module":"GENERIC-RESOURCE-API",
    "version":"${project.version}",
    "comments":"",
    "xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs":1,
    "x":235.23807907104492,
    "y":170.95239067077637,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "27ef1723.4e0278"
      ]
    ]
  },
  {
    "id":"27ef1723.4e0278",
    "type":"method",
    "name":"brg-topology-operation-activate",
    "xml":"<method rpc='brg-topology-operation-activate' mode='sync'>\n",
    "comments":"",
    "outputs":1,
    "x":281.15485763549805,
    "y":206.19044589996338,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "5084fcc1.6127a4"
      ]
    ]
  },
  {
    "id":"5084fcc1.6127a4",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":189.47619247436523,
    "y":349.5237879753113,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "58b2a19b.bb1a9",
        "7d4ed218.8bbd8c",
        "e7f02dcd.d7804",
        "c8a2b5a6.be9028",
        "57d72c77.8278c4",
        "da3b0a02.7cb8f8",
        "2d3dbb81.8d93e4",
        "49f82ccd.f7c214",
        "1c4673a7.e44e5c",
        "8be1a0c.f98886",
        "ded6be20.02606",
        "813841f5.5242d",
        "6b6c396.0e3bdc8",
        "87c5e69a.216528",
        "eb01b23d.d2e83",
        "9d0a59c9.488d38",
        "52fb1b57.c3a244",
        "a54b3930.93b098",
        "390bbb92.09b7f4",
        "d2ce0116.9d6fd",
        "d22b2425.82db18",
        "9afe5c14.6ae23"
      ]
    ]
  },
  {
    "id":"7d4ed218.8bbd8c",
    "type":"returnSuccess",
    "name":"return success",
    "xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments":"",
    "x":449.0001220703125,
    "y":1920.8814477920532,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"58b2a19b.bb1a9",
    "type":"set",
    "name":"set output to api handler",
    "xml":"<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='brg-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $brg-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments":"",
    "x":477.75403594970703,
    "y":1885.003993988037,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"8be1a0c.f98886",
    "type":"set",
    "name":"set allotted-resource-oper-status",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='Active' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$brg-topology-operation-input.request-information.request-action`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$brg-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$brg-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
    "comments":"",
    "x":495.7542190551758,
    "y":730.0514001846313,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"c8a2b5a6.be9028",
    "type":"set",
    "name":"set tmp.ar.self-link",
    "xml":"<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:brg-allotted-resources/brg-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/brg-topology/'` \" />\n\n",
    "comments":"",
    "x":451.73806381225586,
    "y":323.33332538604736,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"e7f02dcd.d7804",
    "type":"set",
    "name":"set tmp.ar.allotted-resource-id,etc",
    "xml":"<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$brg-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$brg-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n<parameter name='tmp.ar.brg-vnf-id' value='`$brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.brg-vnf-id`' />\n\n\n",
    "comments":"",
    "x":498.9973258972168,
    "y":289.59259128570557,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"57d72c77.8278c4",
    "type":"execute",
    "name":"execute Properties",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments":"",
    "outputs":1,
    "x":457.9934196472168,
    "y":359.23152446746826,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"2d3dbb81.8d93e4",
    "type":"execute",
    "name":"execute RestApiCallNode - Get AR by id",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":520.5187530517578,
    "y":520.4594917297363,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "8276c2bb.14acb",
        "298fb105.8bda2e"
      ]
    ]
  },
  {
    "id":"da3b0a02.7cb8f8",
    "type":"execute",
    "name":"generate allotted-resource url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.brg-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":486.0648536682129,
    "y":419.0172290802002,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"8276c2bb.14acb",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":777.8148918151855,
    "y":519.2672522068024,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "893561c4.da3da"
      ]
    ]
  },
  {
    "id":"49f82ccd.f7c214",
    "type":"execute",
    "name":"execute RestApiCallNode - PUT AR by id",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.brg.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":528.5293121337891,
    "y":873.4341316223145,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "3d80671.2fffe98",
        "5531bacd.bb4054",
        "d8812d37.161a9"
      ]
    ]
  },
  {
    "id":"3d80671.2fffe98",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1052.8373832702637,
    "y":898.4324235916138,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "3a60fdb3.4a8a52"
      ]
    ]
  },
  {
    "id":"5531bacd.bb4054",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1043.8374328613281,
    "y":866.9324493408203,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "3a60fdb3.4a8a52"
      ]
    ]
  },
  {
    "id":"d8812d37.161a9",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1047.5874710083008,
    "y":837.2895542159677,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "74162770.a979c8"
      ]
    ]
  },
  {
    "id":"3a60fdb3.4a8a52",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for brg-allotted-resource\" />\n",
    "comments":"",
    "x":1213.5874710083008,
    "y":867.6824731826782,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"893561c4.da3da",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":958.8148460388184,
    "y":519.7672016620636,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "7cc2aba3.4ab774",
        "4cf2170b.af9078"
      ]
    ]
  },
  {
    "id":"7cc2aba3.4ab774",
    "type":"switchNode",
    "name":"switch brg length",
    "xml":"<switch test='`$mdsal-ar.brg-allotted-resource_length`'>\n",
    "comments":"",
    "outputs":1,
    "x":1204.6720924377441,
    "y":554.052964925766,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "f2b5c7f8.4c2788"
      ]
    ]
  },
  {
    "id":"f2b5c7f8.4c2788",
    "type":"other",
    "name":"outcome 1",
    "xml":"<outcome value='1'>\n",
    "comments":"",
    "outputs":1,
    "x":1395.6720962524414,
    "y":554.0529625415802,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "99caeac4.1caf68"
      ]
    ]
  },
  {
    "id":"a94fae60.0d4d8",
    "type":"set",
    "name":"set brg-ar from get",
    "xml":"<set>\n<parameter name='brg-ar.' value='$mdsal-ar.brg-allotted-resource[0].' />\n",
    "comments":"",
    "x":1795.5292320251465,
    "y":554.6243867874146,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"99caeac4.1caf68",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic='true'>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1566.5290794372559,
    "y":554.6244316101074,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "a94fae60.0d4d8",
        "b911a84d.ae1718",
        "4be8f1c4.44235"
      ]
    ]
  },
  {
    "id":"b911a84d.ae1718",
    "type":"set",
    "name":"set oper-status",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$brg-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$brg-ar.allotted-resource-status.rpc-action`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$brg-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
    "comments":"",
    "x":1793.5294761657715,
    "y":622.0529508590698,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"1fae3401.6b02fc",
    "type":"comment",
    "name":"GET brg-allotted-resource from mdsal",
    "info":"",
    "comments":"",
    "x":545.8148155212402,
    "y":483.7671926021576,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"4be8f1c4.44235",
    "type":"switchNode",
    "name":"switch order-status",
    "xml":"<switch test='`$brg-ar.allotted-resource-data.allotted-resource-oper-status.order-status`'>\n",
    "comments":"",
    "outputs":1,
    "x":1803.52925491333,
    "y":587.6243848800659,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "78046e66.9f48",
        "8b7e48bf.d7da38"
      ]
    ]
  },
  {
    "id":"78046e66.9f48",
    "type":"outcome",
    "name":"outcome Created",
    "xml":"<outcome value='Created'>\n",
    "comments":"",
    "outputs":1,
    "x":2015.1292114257812,
    "y":548.6243848800659,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "6617e6b1.caed38"
      ]
    ]
  },
  {
    "id":"8b7e48bf.d7da38",
    "type":"outcome",
    "name":"outcome Other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":2040.8435859680176,
    "y":584.052975654602,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "6617e6b1.caed38"
      ]
    ]
  },
  {
    "id":"2041ebe5.c30ee4",
    "type":"comment",
    "name":"Set allotted-resource-identifiers",
    "info":"",
    "comments":"",
    "x":501.33863830566406,
    "y":574.3386459350586,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"4cf2170b.af9078",
    "type":"set",
    "name":"save backup copy of mdsal-ar for rollback",
    "xml":"<set>\n<parameter name='bk-brg-ar' value='$mdsal-ar.' />\n",
    "comments":"",
    "x":1284.3864250183105,
    "y":519.7672936916351,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"aa22f4fa.80d2f8",
    "type":"comment",
    "name":"Create urls for restapi",
    "info":"",
    "comments":"",
    "x":456.9576606750488,
    "y":388.6243562698364,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"74162770.a979c8",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1189.2434387207031,
    "y":833.4817234054208,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"6c2fd2bf.8ea39c",
    "type":"comment",
    "name":"TO DO: vnf/put parent",
    "info":"",
    "comments":"",
    "x":459.2433776855469,
    "y":762.1481952667236,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"1c4673a7.e44e5c",
    "type":"execute",
    "name":"execute getTime",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":443.24338150024414,
    "y":691.4815549850464,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"298fb105.8bda2e",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":777.5766868591309,
    "y":555.4814250469208,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "da7d30a7.86aa1"
      ]
    ]
  },
  {
    "id":"da7d30a7.86aa1",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":957.5766372680664,
    "y":556.1479756832123,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"ded6be20.02606",
    "type":"set",
    "name":"set id",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n<parameter name='brg-ar.allotted-resource-status.action' value=\"`$brg-topology-operation-input.request-information.request-action` \" />\n<parameter name='brg-ar.allotted-resource-status.rpc-name' value=\"brg-topology-operation\" />\n<parameter name='brg-ar.allotted-resource-status.rpc-action' value=\"`$brg-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$brg-topology-operation-input.request-information.` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$brg-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$brg-topology-operation-input.service-information.` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$brg-topology-operation-input.allotted-resource-information.` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.brg-request-input.' value=\"`$brg-topology-operation-input.brg-request-input.` \" />",
    "comments":"",
    "x":426.24342346191406,
    "y":611.1481666564941,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"6617e6b1.caed38",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":2229.5997276306152,
    "y":550.0000190734863,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"813841f5.5242d",
    "type":"update",
    "name":"update AAI allotted-resource",
    "xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $service-data.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $service-data.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $service-data.service-information.service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"operational-status\" value=\"in-service-path\" />\n",
    "comments":"",
    "outputs":1,
    "x":486.85716247558594,
    "y":795.2380628585815,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "dfcc7672.3a2628",
        "f88b958b.1b4058"
      ]
    ]
  },
  {
    "id":"dfcc7672.3a2628",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":742.6190567016602,
    "y":778.1905598640442,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "16d52897.21f867"
      ]
    ]
  },
  {
    "id":"16d52897.21f867",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments":"",
    "x":909.142936706543,
    "y":789.8096308708191,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"f88b958b.1b4058",
    "type":"failure",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":749.7143440246582,
    "y":810.9525275230408,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "16d52897.21f867"
      ]
    ]
  },
  {
    "id":"6b6c396.0e3bdc8",
    "type":"execute",
    "name":"execute RestApiCallNode - setup BRG to vgMux vxlan tunnel port",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.vpp.vxlan-tunnel.templatefile`\" />\n    <parameter name='restapiUrl' value='`$tmp.honeycomb.url + $tmp.vpp-honeycomb-url`' />\n    <parameter name='restapiUser' value='`$prop.honeycomb.user`' />\n    <parameter name='restapiPassword' value='`$prop.honeycomb.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"honeycomb-vnf\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":603.6666564941406,
    "y":1206.666666984558,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "ac72a6ac.9a87d8",
        "6627db7e.a07df4",
        "b71c9a02.dc5f38"
      ]
    ]
  },
  {
    "id":"ac72a6ac.9a87d8",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":937.6414451599121,
    "y":1265.9982789978385,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "87d976e8.3b5e08"
      ]
    ]
  },
  {
    "id":"6627db7e.a07df4",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":928.6414947509766,
    "y":1234.498304747045,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "87d976e8.3b5e08"
      ]
    ]
  },
  {
    "id":"b71c9a02.dc5f38",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":932.3915328979492,
    "y":1204.8554096221924,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "647bb0e7.3a8ce"
      ]
    ]
  },
  {
    "id":"87d976e8.3b5e08",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for brg-allotted-resource\" />\n",
    "comments":"",
    "x":1098.3915328979492,
    "y":1235.248328588903,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"647bb0e7.3a8ce",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1074.0475006103516,
    "y":1201.0475788116455,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"87c5e69a.216528",
    "type":"execute",
    "name":"execute RestApiCallNode - setup BRG vxlan bridge domain",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.vpp.bridge-domain.templatefile`\" />\n    <parameter name='restapiUrl' value=\"`$tmp.honeycomb.url + $tmp.vpp-honeycomb-url + '/v3po:l2' `\" />\n    <parameter name='restapiUser' value='`$prop.honeycomb.user`' />\n    <parameter name='restapiPassword' value='`$prop.honeycomb.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"honeycomb-vnf\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":585.3334197998047,
    "y":1353.333461523056,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "8bb826ca.7fde18",
        "3b0cfc96.e063d4",
        "9233dc34.b0a2e"
      ]
    ]
  },
  {
    "id":"8bb826ca.7fde18",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":933.3080577850342,
    "y":1428.9983781799674,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "56013e05.d3ec7"
      ]
    ]
  },
  {
    "id":"3b0cfc96.e063d4",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":924.3081073760986,
    "y":1397.498403929174,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "56013e05.d3ec7"
      ]
    ]
  },
  {
    "id":"9233dc34.b0a2e",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":928.0581455230713,
    "y":1367.8555088043213,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "d277fbef.48ce48"
      ]
    ]
  },
  {
    "id":"56013e05.d3ec7",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for brg-allotted-resource\" />\n",
    "comments":"",
    "x":1094.0581455230713,
    "y":1398.2484277710319,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"d277fbef.48ce48",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1069.7141132354736,
    "y":1364.0476779937744,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"52fb1b57.c3a244",
    "type":"set",
    "name":"set BRG to vgMUX VXLAN Tunnel Port Props",
    "xml":"<set>\n<parameter name='tmp.tunnel-name' value=\"`'vxlanTun' + $brg-ar.allotted-resource-data.brg-topology.brg-assignments.vbrg-wan-ip` \" />\n<parameter name='tmp.tunnel-dest-ip' value=\"`$brg-ar.allotted-resource-data.allotted-resource-operation-information.brg-request-input.vgmux-lan-ip` \" />\n<parameter name='tmp.tunnel-src-ip' value=\"`$brg-ar.allotted-resource-data.allotted-resource-operation-information.brg-request-input.brg-wan-ip-address` \" />\n<parameter name='tmp.tunnel-vni' value=\"`$brg-ar.allotted-resource-data.allotted-resource-operation-information.brg-request-input.vni` \" />",
    "comments":"",
    "x":539.7778015136719,
    "y":1071.6669263839722,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"9d0a59c9.488d38",
    "type":"execute",
    "name":"generate full brg-vpp-honeycomb url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.vpp-honeycomb`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vpp-honeycomb-url\"/>\n    <parameter name=\"target\" value=\"{tunnel-name}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.tunnel-name`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":511.44444274902344,
    "y":1126.6667051315308,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"eb01b23d.d2e83",
    "type":"execute",
    "name":"generate honeycomb-url to vBRG",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.honeycomb.url`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.honeycomb.url\"/>\n    <parameter name=\"target\" value=\"{honeycomb-instance-ip}\"/>\n    <parameter name=\"replacement\" value=\"`$brg-ar.allotted-resource-data.brg-topology.brg-assignments.vbrg-wan-ip`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":503.4444580078125,
    "y":986.333233833313,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"a54b3930.93b098",
    "type":"set",
    "name":"set BRG Bridge Domain Props",
    "xml":"<set>\n<parameter name='tmp.bridge-domain' value=\"bridge-domain-10\" />\n<parameter name='tmp.split-horizon-group' value=\"2\" />",
    "comments":"",
    "x":494.7777557373047,
    "y":1278.3333368301392,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"66ab9749.6e5de8",
    "type":"comment",
    "name":"TO DO: assign brg-ar.allotted-resource-data.brg-topology.brg-assignments.vbrg-wan-ip",
    "info":"need to quary mdsal-ar and get information assigned in tunnelxconn DG?",
    "comments":"",
    "x":661.0000305175781,
    "y":935.5000286102295,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"d359b8c.b2e9848",
    "type":"comment",
    "name":"save service data for BRG to md-sal for SO to do GET ",
    "info":"http://c1.vm1.sdnc.simpledemo.openecomp.org:8282/restconf/config/GENERIC-RESOURCE-API:services/service/e565bb6b-de14-4a5c-a992-65a681771a7a/service-data/service-topology/\n\n\nservice-instance-id is of the vBRG (in VNF-API data)",
    "comments":"",
    "x":547.5807209014893,
    "y":1475.2236095443368,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"d2ce0116.9d6fd",
    "type":"execute",
    "name":"execute RestApiCallNode - Get service-data by vnf-id",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.vnf-api-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"service-data\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":560.5014190673828,
    "y":1596.3346309661865,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "25295636.0ab61a",
        "bf6df68d.132c38"
      ]
    ]
  },
  {
    "id":"25295636.0ab61a",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":849.3213386535645,
    "y":1593.7139744758606,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "6176a3d2.ca4a4c"
      ]
    ]
  },
  {
    "id":"6176a3d2.ca4a4c",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1030.3212928771973,
    "y":1594.2139239311218,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "8a58185b.1f0588",
        "e2166c3e.a56a4"
      ]
    ]
  },
  {
    "id":"8a58185b.1f0588",
    "type":"switchNode",
    "name":"switch brg length",
    "xml":"<switch test='`$service-data.service-data_length`'>\n",
    "comments":"",
    "outputs":1,
    "x":1276.178539276123,
    "y":1628.4996871948242,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "d1780eb8.0a48d"
      ]
    ]
  },
  {
    "id":"d1780eb8.0a48d",
    "type":"other",
    "name":"outcome 1",
    "xml":"<outcome value='1'>\n",
    "comments":"",
    "outputs":1,
    "x":1467.1785430908203,
    "y":1628.4996848106384,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "144d46bd.d15369"
      ]
    ]
  },
  {
    "id":"c4f78b0c.399548",
    "type":"set",
    "name":"set service-data from get",
    "xml":"<set>\n<parameter name='tmp.service-data.' value='$service-data.service-data[0].' />\n",
    "comments":"",
    "x":1867.0356788635254,
    "y":1629.0711090564728,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"144d46bd.d15369",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic='true'>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1638.0355262756348,
    "y":1629.0711538791656,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "c4f78b0c.399548",
        "e2b696d0.92bce8"
      ]
    ]
  },
  {
    "id":"acb27e89.7a99b",
    "type":"comment",
    "name":"GET vnf-api service info",
    "info":"",
    "comments":"",
    "x":465.89267349243164,
    "y":1559.6423273086548,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"e2b696d0.92bce8",
    "type":"switchNode",
    "name":"switch order-status",
    "xml":"<switch test='`$tmp.service-data.order-status`'>\n",
    "comments":"",
    "outputs":1,
    "x":1850.7498970031738,
    "y":1680.6425342559814,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "93dea8c9.d15128",
        "9bef71a8.f6f6b"
      ]
    ]
  },
  {
    "id":"93dea8c9.d15128",
    "type":"outcome",
    "name":"outcome Created",
    "xml":"<outcome value='Created'>\n",
    "comments":"",
    "outputs":1,
    "x":2086.63565826416,
    "y":1623.0711071491241,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "ef316dbf.6a0cc"
      ]
    ]
  },
  {
    "id":"9bef71a8.f6f6b",
    "type":"outcome",
    "name":"outcome Other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":2112.3500328063965,
    "y":1658.4996979236603,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "ef316dbf.6a0cc"
      ]
    ]
  },
  {
    "id":"da592da3.ffeb5",
    "type":"comment",
    "name":"Set service-data",
    "info":"",
    "comments":"",
    "x":439.9879341125488,
    "y":1644.4995203018188,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"e2166c3e.a56a4",
    "type":"set",
    "name":"save backup copy of mdsal-ar for rollback",
    "xml":"<set>\n<parameter name='bk-service-data' value='$service-data.' />\n",
    "comments":"",
    "x":1355.8928718566895,
    "y":1594.2140159606934,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"bf6df68d.132c38",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":849.0831336975098,
    "y":1629.928147315979,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "cf1f6a1b.c9ce08"
      ]
    ]
  },
  {
    "id":"cf1f6a1b.c9ce08",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1029.0830841064453,
    "y":1630.5946979522705,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"ef316dbf.6a0cc",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":2301.106174468994,
    "y":1624.4467413425446,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"390bbb92.09b7f4",
    "type":"execute",
    "name":"generate vnf service-info url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.vnf-api.service-information`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vnf-api-url\"/>\n    <parameter name=\"target\" value=\"{vnf-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.brg-vnf-id`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":486.3108825683594,
    "y":1517.763334274292,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"9afe5c14.6ae23",
    "type":"execute",
    "name":"execute RestApiCallNode - PUT service into service",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.services.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.services-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":560.5966033935547,
    "y":1773.0016822814941,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "c87c4ec5.30548",
        "9b0fe650.2f2a48",
        "bddffe4d.e139c"
      ]
    ]
  },
  {
    "id":"c87c4ec5.30548",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1066.8094596862793,
    "y":1767.5236949920654,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "a54672fa.e0b22"
      ]
    ]
  },
  {
    "id":"9b0fe650.2f2a48",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1057.8095092773438,
    "y":1736.023720741272,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "a54672fa.e0b22"
      ]
    ]
  },
  {
    "id":"bddffe4d.e139c",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1061.5595474243164,
    "y":1706.3808256164193,
    "z":"bd738317.61f1e",
    "wires":[
      [
        "818c08d2.8fb6d8"
      ]
    ]
  },
  {
    "id":"a54672fa.e0b22",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for brg-allotted-resource\" />\n",
    "comments":"",
    "x":1227.5595474243164,
    "y":1736.7737445831299,
    "z":"bd738317.61f1e",
    "wires":[

    ]
  },
  {
    "id":"818c08d2.8fb6d8",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1203.2155151367188,
    "y":1702.5729948058724,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"d22b2425.82db18",
    "type":"execute",
    "name":"generate services url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.services`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.services-url\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.service-data.service-information.service-instance-id`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":463.92994689941406,
    "y":1732.52548122406,
    "z":"bd738317.61f1e",
    "wires":[
      [

      ]
    ]
  }
]