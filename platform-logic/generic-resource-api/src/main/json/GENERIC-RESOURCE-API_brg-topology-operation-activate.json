[
  {
    "id":"ceb899a7.d341c8",
    "type":"dgstart",
    "name":"DGSTART",
    "outputs":1,
    "x":153.3333282470703,
    "y":103.33332824707031,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "18952f76.559ee1"
      ]
    ]
  },
  {
    "id":"18952f76.559ee1",
    "type":"service-logic",
    "name":"GENERIC-RESOURCE-API ${project.version}",
    "module":"GENERIC-RESOURCE-API",
    "version":"${project.version}",
    "comments":"",
    "xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs":1,
    "x":249.57140731811523,
    "y":164.28571891784668,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "179672e8.9c551d"
      ]
    ]
  },
  {
    "id":"179672e8.9c551d",
    "type":"method",
    "name":"brg-topology-operation-activate",
    "xml":"<method rpc='brg-topology-operation-activate' mode='sync'>\n",
    "comments":"",
    "outputs":1,
    "x":295.48818588256836,
    "y":199.5237741470337,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "9f35bd45.8a6a4"
      ]
    ]
  },
  {
    "id":"9f35bd45.8a6a4",
    "type":"block",
    "name":"block : atomic",
    "xml":"<block atomic=\"true\">",
    "atomic":"true",
    "comments":"",
    "outputs":1,
    "x":191.30953216552734,
    "y":1195.357120513916,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "5f6476c7.1116b8",
        "1fd1cf4d.7fed61",
        "db740f9d.29312",
        "ecc54a34.453788",
        "96b93a8e.8fa738",
        "89375566.2dec58",
        "af147a22.52b628",
        "6f832b94.924d84",
        "3806a837.de7398",
        "6323c04e.54628",
        "dfa3f56.72b5808",
        "3b2fb4.6046004c",
        "1375a965.f31cb7",
        "3545827f.8f7f4e",
        "27f6106d.5aed4",
        "d538a2c.85a8a6",
        "d0da56bf.5622e8",
        "e3151796.db37b8",
        "247b453a.8a26fa",
        "34e00507.e2015a",
        "7f06ccd3.5f4544",
        "a690ec81.282ab",
        "7cd4ecac.c5c874",
        "afbc0299.7c62f",
        "a76a910b.2c1fa",
        "43cd6015.f74aa",
        "a44bc809.331528",
        "4ebb5d6e.3b72b4",
        "94c1462c.043b88",
        "890a1877.5b6b98",
        "dad15ca1.13a96",
        "898815a9.12a638",
        "ddefeb7c.fde178",
        "127d8c70.64ae14",
        "59a607df.c64478",
        "2b05ed04.a37c82"
      ]
    ]
  },
  {
    "id":"1fd1cf4d.7fed61",
    "type":"returnSuccess",
    "name":"return success",
    "xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments":"",
    "x":467.8335380554199,
    "y":2659.7151918411255,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"5f6476c7.1116b8",
    "type":"set",
    "name":"set output to api handler",
    "xml":"<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='brg-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $brg-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments":"",
    "x":496.58745193481445,
    "y":2623.8377380371094,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"6323c04e.54628",
    "type":"set",
    "name":"set allotted-resource-oper-status",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='Active' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$brg-topology-operation-input.request-information.request-action`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$brg-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$brg-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
    "comments":"",
    "x":510.0875473022461,
    "y":723.3847284317017,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"ecc54a34.453788",
    "type":"set",
    "name":"set tmp.ar.self-link",
    "xml":"<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:brg-allotted-resources/brg-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/brg-topology/'` \" />\n\n",
    "comments":"",
    "x":466.0713920593262,
    "y":316.6666536331177,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"db740f9d.29312",
    "type":"set",
    "name":"set tmp.ar.allotted-resource-id,etc",
    "xml":"<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$brg-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$brg-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n<parameter name='tmp.ar.brg-vnf-id' value='`$brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.brg-vnf-id`' />\n\n\n",
    "comments":"",
    "x":513.3306541442871,
    "y":282.9259195327759,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"96b93a8e.8fa738",
    "type":"execute",
    "name":"execute Properties",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments":"",
    "outputs":1,
    "x":472.3267478942871,
    "y":352.5648527145386,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"af147a22.52b628",
    "type":"execute",
    "name":"execute RestApiCallNode - Get AR by id",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":534.8520812988281,
    "y":513.7928199768066,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "3d9ecb10.c6dbd4",
        "5a4abfd2.0da15"
      ]
    ]
  },
  {
    "id":"89375566.2dec58",
    "type":"execute",
    "name":"generate allotted-resource url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.brg-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":500.3981819152832,
    "y":412.3505573272705,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"3d9ecb10.c6dbd4",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":792.1482200622559,
    "y":512.6005804538727,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "cb63369d.a052b8"
      ]
    ]
  },
  {
    "id":"6f832b94.924d84",
    "type":"execute",
    "name":"execute RestApiCallNode - PUT AR by id",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.brg.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":542.8626403808594,
    "y":866.7674598693848,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "39dd55f9.494c7a",
        "f6c69264.a623a",
        "622616be.bf16b8"
      ]
    ]
  },
  {
    "id":"39dd55f9.494c7a",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1067.170711517334,
    "y":891.7657518386841,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "7fce7a4f.b0d624"
      ]
    ]
  },
  {
    "id":"f6c69264.a623a",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1058.1707611083984,
    "y":860.2657775878906,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "7fce7a4f.b0d624"
      ]
    ]
  },
  {
    "id":"622616be.bf16b8",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1061.920799255371,
    "y":830.622882463038,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "8786f548.363298"
      ]
    ]
  },
  {
    "id":"7fce7a4f.b0d624",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for brg-allotted-resource\" />\n",
    "comments":"",
    "x":1227.920799255371,
    "y":861.0158014297485,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"cb63369d.a052b8",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":973.1481742858887,
    "y":513.1005299091339,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "782b0a71.4c38e4",
        "69401bf8.f87a84"
      ]
    ]
  },
  {
    "id":"782b0a71.4c38e4",
    "type":"switchNode",
    "name":"switch brg length",
    "xml":"<switch test='`$mdsal-ar.brg-allotted-resource_length`'>\n",
    "comments":"",
    "outputs":1,
    "x":1219.0054206848145,
    "y":547.3862931728363,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "f019bd43.a19cf"
      ]
    ]
  },
  {
    "id":"f019bd43.a19cf",
    "type":"other",
    "name":"outcome 1",
    "xml":"<outcome value='1'>\n",
    "comments":"",
    "outputs":1,
    "x":1410.0054244995117,
    "y":547.3862907886505,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "35c3a049.ff966"
      ]
    ]
  },
  {
    "id":"7a62d7f0.004398",
    "type":"set",
    "name":"set brg-ar from get",
    "xml":"<set>\n<parameter name='brg-ar.' value='$mdsal-ar.brg-allotted-resource[0].' />\n",
    "comments":"",
    "x":1809.8625602722168,
    "y":547.9577150344849,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"35c3a049.ff966",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic='true'>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1580.8624076843262,
    "y":547.9577598571777,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "7a62d7f0.004398",
        "66f1e6ab.ccdbe8",
        "929f975e.19d6c8"
      ]
    ]
  },
  {
    "id":"66f1e6ab.ccdbe8",
    "type":"set",
    "name":"set oper-status",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$brg-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$brg-ar.allotted-resource-status.rpc-action`' />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$brg-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
    "comments":"",
    "x":1807.8628044128418,
    "y":615.3862791061401,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"64c20a9e.a91c44",
    "type":"comment",
    "name":"GET brg-allotted-resource from mdsal",
    "info":"",
    "comments":"",
    "x":560.1481437683105,
    "y":477.1005208492279,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"929f975e.19d6c8",
    "type":"switchNode",
    "name":"switch order-status",
    "xml":"<switch test='`$brg-ar.allotted-resource-data.allotted-resource-oper-status.order-status`'>\n",
    "comments":"",
    "outputs":1,
    "x":1817.8625831604004,
    "y":580.9577131271362,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "84ba8f9b.db8be",
        "29821995.b20746"
      ]
    ]
  },
  {
    "id":"84ba8f9b.db8be",
    "type":"outcome",
    "name":"outcome Created",
    "xml":"<outcome value='Created'>\n",
    "comments":"",
    "outputs":1,
    "x":2029.4625396728516,
    "y":541.9577131271362,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "20dc496c.b0ace6"
      ]
    ]
  },
  {
    "id":"29821995.b20746",
    "type":"outcome",
    "name":"outcome Other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":2055.176914215088,
    "y":577.3863039016724,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "20dc496c.b0ace6"
      ]
    ]
  },
  {
    "id":"922a85d1.3ff438",
    "type":"comment",
    "name":"Set allotted-resource-identifiers",
    "info":"",
    "comments":"",
    "x":515.6719665527344,
    "y":567.6719741821289,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"69401bf8.f87a84",
    "type":"set",
    "name":"save backup copy of mdsal-ar for rollback",
    "xml":"<set>\n<parameter name='bk-brg-ar' value='$mdsal-ar.' />\n",
    "comments":"",
    "x":1298.7197532653809,
    "y":513.1006219387054,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"882f991c.81f448",
    "type":"comment",
    "name":"Create urls for restapi",
    "info":"",
    "comments":"",
    "x":471.29098892211914,
    "y":381.95768451690674,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"8786f548.363298",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1203.5767669677734,
    "y":826.8150516524911,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"c480648b.753518",
    "type":"comment",
    "name":"TO DO: vnf/put parent",
    "info":"",
    "comments":"",
    "x":473.5767059326172,
    "y":755.481523513794,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"3806a837.de7398",
    "type":"execute",
    "name":"execute getTime",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":457.57670974731445,
    "y":684.8148832321167,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"5a4abfd2.0da15",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":791.9100151062012,
    "y":548.8147532939911,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "3c47542c.97d11c"
      ]
    ]
  },
  {
    "id":"3c47542c.97d11c",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":971.9099655151367,
    "y":549.4813039302826,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"dfa3f56.72b5808",
    "type":"set",
    "name":"set id",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n<parameter name='brg-ar.allotted-resource-status.action' value=\"`$brg-topology-operation-input.request-information.request-action` \" />\n<parameter name='brg-ar.allotted-resource-status.rpc-name' value=\"brg-topology-operation\" />\n<parameter name='brg-ar.allotted-resource-status.rpc-action' value=\"`$brg-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$brg-topology-operation-input.request-information.` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$brg-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$brg-topology-operation-input.service-information.` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$brg-topology-operation-input.allotted-resource-information.` \" />\n<parameter name='brg-ar.allotted-resource-data.allotted-resource-operation-information.brg-request-input.' value=\"`$brg-topology-operation-input.brg-request-input.` \" />",
    "comments":"",
    "x":440.5767517089844,
    "y":604.4814949035645,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"20dc496c.b0ace6",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":2243.9330558776855,
    "y":543.3333473205566,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"3b2fb4.6046004c",
    "type":"update",
    "name":"update AAI allotted-resource",
    "xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $brg-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $brg-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $brg-topology-operation-input.service-information.service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"operational-status\" value=\"in-service-path\" />\n",
    "comments":"",
    "outputs":1,
    "x":501.19049072265625,
    "y":788.5713911056519,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "c7a69233.94f79",
        "ce83f5c3.d60868"
      ]
    ]
  },
  {
    "id":"c7a69233.94f79",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":756.9523849487305,
    "y":771.5238881111145,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "7c662771.7ce4e8"
      ]
    ]
  },
  {
    "id":"7c662771.7ce4e8",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments":"",
    "x":923.4762649536133,
    "y":783.1429591178894,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"ce83f5c3.d60868",
    "type":"failure",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":764.0476722717285,
    "y":804.2858557701111,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "7c662771.7ce4e8"
      ]
    ]
  },
  {
    "id":"1375a965.f31cb7",
    "type":"execute",
    "name":"execute RestApiCallNode - setup BRG to vgMux vxlan tunnel port",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.vpp.vxlan-tunnel.templatefile`\" />\n    <parameter name='restapiUrl' value='`$tmp.honeycomb.url + $tmp.vpp-honeycomb-url`' />\n    <parameter name='restapiUser' value='`$prop.honeycomb.user`' />\n    <parameter name='restapiPassword' value='`$prop.honeycomb.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"honeycomb-vnf\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":613.3333892822266,
    "y":1358.0001583099365,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "fd8e4870.195298",
        "92c4dc6.6a3982",
        "86d54efc.3f1a1"
      ]
    ]
  },
  {
    "id":"fd8e4870.195298",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":947.308177947998,
    "y":1417.331770323217,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "4274110.a4e27f"
      ]
    ]
  },
  {
    "id":"92c4dc6.6a3982",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":938.3082275390625,
    "y":1385.8317960724235,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "4274110.a4e27f"
      ]
    ]
  },
  {
    "id":"86d54efc.3f1a1",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":942.0582656860352,
    "y":1356.1889009475708,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "784b51ef.400f4"
      ]
    ]
  },
  {
    "id":"4274110.a4e27f",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error setting up vxlan tunnel\" />\n",
    "comments":"",
    "x":1108.0582656860352,
    "y":1386.5818199142814,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"784b51ef.400f4",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1083.7142333984375,
    "y":1352.381070137024,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"3545827f.8f7f4e",
    "type":"execute",
    "name":"execute RestApiCallNode - setup BRG vxlan bridge domain",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.vpp.bridge-domain.templatefile`\" />\n    <parameter name='restapiUrl' value=\"`$tmp.honeycomb.url + $tmp.vpp-honeycomb-url + '/v3po:l2' `\" />\n    <parameter name='restapiUser' value='`$prop.honeycomb.user`' />\n    <parameter name='restapiPassword' value='`$prop.honeycomb.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"honeycomb-vnf\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":595.0001525878906,
    "y":1504.6669528484344,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "71f58f94.4f0b1",
        "bdcf9d06.49209",
        "5ea463eb.75999c"
      ]
    ]
  },
  {
    "id":"71f58f94.4f0b1",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1016.3080596923828,
    "y":1560.331881903112,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "9a478018.6afc7"
      ]
    ]
  },
  {
    "id":"bdcf9d06.49209",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1007.3081092834473,
    "y":1528.8319076523185,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "9a478018.6afc7"
      ]
    ]
  },
  {
    "id":"5ea463eb.75999c",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1011.0581474304199,
    "y":1499.1890125274658,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "ccb19ee2.88d68"
      ]
    ]
  },
  {
    "id":"9a478018.6afc7",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error setting up bridge domain\" />\n",
    "comments":"",
    "x":1177.05814743042,
    "y":1529.5819314941764,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"ccb19ee2.88d68",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1152.7141151428223,
    "y":1495.381181716919,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"d0da56bf.5622e8",
    "type":"set",
    "name":"set BRG to vgMUX VXLAN Tunnel Port Props",
    "xml":"<set>\n<parameter name='tmp.tunnel-name' value=\"`'vxlanTun' + $brg-ar.allotted-resource-data.brg-topology.brg-assignments.vgmux-lan-ip` \" />\n<parameter name='tmp.tunnel-dest-ip' value=\"`$brg-ar.allotted-resource-data.brg-topology.brg-assignments.vgmux-lan-ip` \" />\n<parameter name='tmp.tunnel-src-ip' value=\"`$brg-ar.allotted-resource-data.brg-topology.brg-assignments.vbrg-wan-ip` \" />\n<parameter name='tmp.tunnel-vni' value=\"`$brg-ar.allotted-resource-data.allotted-resource-operation-information.brg-request-input.vni` \" />",
    "comments":"",
    "x":549.4445343017578,
    "y":1223.0004177093506,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"d538a2c.85a8a6",
    "type":"execute",
    "name":"generate full brg-vpp-honeycomb url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.vpp-honeycomb`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vpp-honeycomb-url\"/>\n    <parameter name=\"target\" value=\"{tunnel-name}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.tunnel-name`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":521.1111755371094,
    "y":1278.0001964569092,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"27f6106d.5aed4",
    "type":"execute",
    "name":"generate honeycomb-url to vBRG",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.honeycomb.url`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.honeycomb.url\"/>\n    <parameter name=\"target\" value=\"{honeycomb-instance-ip}\"/>\n    <parameter name=\"replacement\" value=\"`$brg-ar.allotted-resource-data.brg-topology.brg-assignments.vbrg-wan-ip`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":512.1112060546875,
    "y":1166.6667222976685,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"e3151796.db37b8",
    "type":"set",
    "name":"set BRG Bridge Domain Props",
    "xml":"<set>\n<parameter name='tmp.bridge-domain' value=\"bridge-domain-10\" />\n<parameter name='tmp.split-horizon-group' value=\"2\" />",
    "comments":"",
    "x":504.4444885253906,
    "y":1429.6668281555176,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"ebe53f21.39491",
    "type":"comment",
    "name":"save service data for BRG to md-sal for SO to do GET ",
    "info":"http://c1.vm1.sdnc.simpledemo.openecomp.org:8282/restconf/config/GENERIC-RESOURCE-API:services/service/e565bb6b-de14-4a5c-a992-65a681771a7a/service-data/service-topology/\n\n\nservice-instance-id is of the vBRG (in VNF-API data)",
    "comments":"",
    "x":247.12836456298828,
    "y":2208.1048860549927,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"34e00507.e2015a",
    "type":"execute",
    "name":"execute RestApiCallNode - Get service-data by vnf-id",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.vnf-api-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"service-data\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":579.3348350524902,
    "y":2335.168375015259,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "f9a3195e.f8ac28",
        "2f908e03.72ab72"
      ]
    ]
  },
  {
    "id":"f9a3195e.f8ac28",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":868.1547546386719,
    "y":2332.547718524933,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "67a6daca.f23f14"
      ]
    ]
  },
  {
    "id":"67a6daca.f23f14",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1049.1547088623047,
    "y":2333.047667980194,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "7f905621.dda338",
        "d4baf35f.de2e1"
      ]
    ]
  },
  {
    "id":"7f905621.dda338",
    "type":"switchNode",
    "name":"switch brg length",
    "xml":"<switch test='`$service-data.service-data_length`'>\n",
    "comments":"",
    "outputs":1,
    "x":1295.0119552612305,
    "y":2367.3334312438965,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "a000e4e8.1af5b8"
      ]
    ]
  },
  {
    "id":"a000e4e8.1af5b8",
    "type":"other",
    "name":"outcome 1",
    "xml":"<outcome value='1'>\n",
    "comments":"",
    "outputs":1,
    "x":1486.0119590759277,
    "y":2367.3334288597107,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "999b1e9e.5bfaf"
      ]
    ]
  },
  {
    "id":"6e5d66df.97f278",
    "type":"set",
    "name":"set service-data from get",
    "xml":"<set>\n<parameter name='tmp.service-data.' value='$service-data.service-data[0].' />\n",
    "comments":"",
    "x":1885.8690948486328,
    "y":2367.904853105545,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"999b1e9e.5bfaf",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic='true'>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1656.8689422607422,
    "y":2367.904897928238,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "6e5d66df.97f278",
        "1332711d.1fdf5f"
      ]
    ]
  },
  {
    "id":"3cfd785e.b271f8",
    "type":"comment",
    "name":"GET vnf-api service info",
    "info":"",
    "comments":"",
    "x":484.72608947753906,
    "y":2298.476071357727,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"1332711d.1fdf5f",
    "type":"switchNode",
    "name":"switch order-status",
    "xml":"<switch test='`$tmp.service-data.order-status`'>\n",
    "comments":"",
    "outputs":1,
    "x":1869.5833129882812,
    "y":2419.4762783050537,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "5742a527.99787c",
        "2015a1f1.ad28de"
      ]
    ]
  },
  {
    "id":"5742a527.99787c",
    "type":"outcome",
    "name":"outcome Created",
    "xml":"<outcome value='Created'>\n",
    "comments":"",
    "outputs":1,
    "x":2109.4688758850098,
    "y":2383.90482711792,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "bf4dbc1f.29998"
      ]
    ]
  },
  {
    "id":"2015a1f1.ad28de",
    "type":"outcome",
    "name":"outcome Other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":2135.183250427246,
    "y":2419.333417892456,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "bf4dbc1f.29998"
      ]
    ]
  },
  {
    "id":"ab18aec0.ff514",
    "type":"comment",
    "name":"Set service-data",
    "info":"",
    "comments":"",
    "x":458.8213348388672,
    "y":2423.3332872390747,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"d4baf35f.de2e1",
    "type":"set",
    "name":"save backup copy of mdsal-ar for rollback",
    "xml":"<set>\n<parameter name='bk-service-data' value='$service-data.' />\n",
    "comments":"",
    "x":1374.7262878417969,
    "y":2333.0477600097656,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"2f908e03.72ab72",
    "type":"other",
    "name":"other",
    "xml":"<outcome value='Other'>\n",
    "comments":"",
    "outputs":1,
    "x":867.9165496826172,
    "y":2368.7618913650513,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "1386528.5f8f8ae"
      ]
    ]
  },
  {
    "id":"1386528.5f8f8ae",
    "type":"block",
    "name":"block: atomic",
    "xml":"<block atomic=\"true\">\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1047.9165000915527,
    "y":2369.428442001343,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"bf4dbc1f.29998",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":2323.9393920898438,
    "y":2385.2804613113403,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"247b453a.8a26fa",
    "type":"execute",
    "name":"generate vnf service-info url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.vnf-api.service-information`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vnf-api-url\"/>\n    <parameter name=\"target\" value=\"{vnf-id}\"/>\n    <parameter name=\"replacement\" value=\"`$brg-topology-operation-input.allotted-resource-data.brg-topology.brg-assignments.brg-vnf-id`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":500.14427947998047,
    "y":2256.5969676971436,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"a690ec81.282ab",
    "type":"execute",
    "name":"execute RestApiCallNode - PUT service into service",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.services.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.services-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":579.4300193786621,
    "y":2511.8354263305664,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "39a87d6f.57f612",
        "88676ff2.098cf",
        "3d4681e7.6871ae"
      ]
    ]
  },
  {
    "id":"39a87d6f.57f612",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1085.6428756713867,
    "y":2506.3574390411377,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "2f4ba713.bd1b78"
      ]
    ]
  },
  {
    "id":"88676ff2.098cf",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1076.6429252624512,
    "y":2474.8574647903442,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "2f4ba713.bd1b78"
      ]
    ]
  },
  {
    "id":"3d4681e7.6871ae",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1080.3929634094238,
    "y":2445.2145696654916,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "e4df1de4.99fab"
      ]
    ]
  },
  {
    "id":"2f4ba713.bd1b78",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for brg-allotted-resource\" />\n",
    "comments":"",
    "x":1246.3929634094238,
    "y":2475.607488632202,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"e4df1de4.99fab",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1222.0489311218262,
    "y":2441.4067388549447,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"7f06ccd3.5f4544",
    "type":"execute",
    "name":"generate services url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.services`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.services-url\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.service-data.service-information.service-instance-id`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":482.7633628845215,
    "y":2471.3592252731323,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"7cd4ecac.c5c874",
    "type":"get-resource",
    "name":"get-resource IPADDR from dmaap DHCP_MAP ",
    "xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='IPADDR' key=\"SELECT min(ip_addr) ip from DHCP_MAP where mac_addr = $brg-ar.allotted-resource-data.allotted-resource-operation-information.brg-request-input.brg-wan-mac-address\" pfx=\"tmp.brg-wan-ip\" >\n",
    "comments":"",
    "outputs":1,
    "x":558.1904907226562,
    "y":915.0834369659424,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"afbc0299.7c62f",
    "type":"set",
    "name":"set brg-ar.allotted-resource-data.brg-topology.brg-assignments.vbrg-wan-ip",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-data.brg-topology.brg-assignments.vbrg-wan-ip' value='`$tmp.brg-wan-ip.ip`' />\n",
    "comments":"",
    "x":644.3333587646484,
    "y":964.3333549499512,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"a76a910b.2c1fa",
    "type":"set",
    "name":"set tmp.ar.consuming-service-instance-id to find vgmux-lan-ip",
    "xml":"<set>\n<parameter name='tmp.ar.consuming-service-instance-id' value='`$allotted-resource-data.brg-topology.allotted-resource-identifiers.consuming-service-instance-id`' />\n",
    "comments":"",
    "x":605.3332977294922,
    "y":1012.3331832885742,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"43cd6015.f74aa",
    "type":"call",
    "name":"call GENERIC-RESOURCE-API:get-tunnelxconn-ar",
    "xml":"<call module='GENERIC-RESOURCE-API' rpc='get-tunnelxconn-ar' mode='sync' >\n",
    "comments":"",
    "outputs":1,
    "x":565.3333435058594,
    "y":1060.6665201187134,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"a44bc809.331528",
    "type":"set",
    "name":"set brg-ar.allotted-resource-data.brg-topology.brg-assignments.vgmux-lan-ip",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-data.brg-topology.brg-assignments.vgmux-lan-ip' value='`$tmp.tunnelxconn-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vgmux-lan-ip`' />\n",
    "comments":"",
    "x":643.6665954589844,
    "y":1113.9998979568481,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"45028fce.bc261",
    "type":"comment",
    "name":"Change to POST and just update service?",
    "info":"",
    "comments":"",
    "x":675.6905326843262,
    "y":2536.261999130249,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"ddefeb7c.fde178",
    "type":"execute",
    "name":"execute RestApiCallNode - setup vG to vgMux vxlan tunnel port",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.vpp.vxlan-tunnel.templatefile`\" />\n    <parameter name='restapiUrl' value='`$tmp.honeycomb.url + $tmp.vpp-honeycomb-url`' />\n    <parameter name='restapiUser' value='`$prop.honeycomb.user`' />\n    <parameter name='restapiPassword' value='`$prop.honeycomb.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"honeycomb-vnf\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":619.5000534057617,
    "y":2011.50009059906,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "3f1edea5.6a50d2",
        "8888b0ab.16315",
        "3526cde7.569032"
      ]
    ]
  },
  {
    "id":"3f1edea5.6a50d2",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":953.4748420715332,
    "y":2070.8317026123405,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "c0fc11de.72caa"
      ]
    ]
  },
  {
    "id":"8888b0ab.16315",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":944.4748916625977,
    "y":2039.331728361547,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "c0fc11de.72caa"
      ]
    ]
  },
  {
    "id":"3526cde7.569032",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":948.2249298095703,
    "y":2009.6888332366943,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "efec532d.a134e"
      ]
    ]
  },
  {
    "id":"c0fc11de.72caa",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error setting up vxlan tunnel\" />\n",
    "comments":"",
    "x":1114.2249298095703,
    "y":2040.081752203405,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"efec532d.a134e",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1089.8808975219727,
    "y":2005.8810024261475,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"127d8c70.64ae14",
    "type":"execute",
    "name":"execute RestApiCallNode - setup BRG vxlan bridge domain",
    "xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.vpp.bridge-domain.templatefile`\" />\n    <parameter name='restapiUrl' value=\"`$tmp.honeycomb.url + $tmp.vpp-honeycomb-url + '/v3po:l2' `\" />\n    <parameter name='restapiUser' value='`$prop.honeycomb.user`' />\n    <parameter name='restapiPassword' value='`$prop.honeycomb.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"honeycomb-vnf\" />\n\n",
    "comments":"",
    "outputs":1,
    "x":599.5001831054688,
    "y":2118.167016029358,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "4d574e47.5fa9a",
        "5d98b669.650688",
        "d9d3976b.be5808"
      ]
    ]
  },
  {
    "id":"4d574e47.5fa9a",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":944.1415214538574,
    "y":2198.8317607864738,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "414d312.d89cfd"
      ]
    ]
  },
  {
    "id":"5d98b669.650688",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":935.1415710449219,
    "y":2167.3317865356803,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "414d312.d89cfd"
      ]
    ]
  },
  {
    "id":"d9d3976b.be5808",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":938.8916091918945,
    "y":2137.6888914108276,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "ea34928b.af361"
      ]
    ]
  },
  {
    "id":"414d312.d89cfd",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error setting up bridge domain\" />\n",
    "comments":"",
    "x":1104.8916091918945,
    "y":2168.081810377538,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"ea34928b.af361",
    "type":"block",
    "name":"block",
    "xml":"<block>\n",
    "atomic":"false",
    "comments":"",
    "outputs":1,
    "x":1080.5475769042969,
    "y":2133.8810606002808,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"dad15ca1.13a96",
    "type":"set",
    "name":"set vG to vgMUX VXLAN Tunnel Port Props",
    "xml":"<set>\n<parameter name='tmp.tunnel-name' value=\"`'vxlanTun' + $brg-ar.allotted-resource-data.brg-topology.brg-assignments.vgmux-bearer-ip` \" />\n<parameter name='tmp.tunnel-dest-ip' value=\"`$brg-ar.allotted-resource-data.brg-topology.brg-assignments.vgmux-bearer-ip` \" />\n<parameter name='tmp.tunnel-src-ip' value=\"`$brg-ar.allotted-resource-data.brg-topology.brg-assignments.vg-ip` \" />\n<parameter name='tmp.tunnel-vni' value=\"`$brg-ar.allotted-resource-data.allotted-resource-operation-information.brg-request-input.vni` \" />",
    "comments":"",
    "x":549.2779006958008,
    "y":1911.500280380249,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"898815a9.12a638",
    "type":"execute",
    "name":"generate full vg-vpp-honeycomb url",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.vpp-honeycomb`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.vpp-honeycomb-url\"/>\n    <parameter name=\"target\" value=\"{tunnel-name}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.tunnel-name`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":528.9445419311523,
    "y":1966.5000591278076,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"890a1877.5b6b98",
    "type":"execute",
    "name":"generate honeycomb-url to vG",
    "xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.honeycomb.url`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.honeycomb.url\"/>\n    <parameter name=\"target\" value=\"{honeycomb-instance-ip}\"/>\n    <parameter name=\"replacement\" value=\"`$brg-ar.allotted-resource-data.brg-topology.brg-assignments.vg-mgmt-ip`\"/>\n",
    "comments":"",
    "outputs":1,
    "x":508.2779312133789,
    "y":1851.833254814148,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [

      ]
    ]
  },
  {
    "id":"4ebb5d6e.3b72b4",
    "type":"set",
    "name":"set brg-ar.allotted-resource-data.brg-topology.brg-assignments.vg-ip",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-data.brg-topology.brg-assignments.vg-ip' value='`$tmp.tunnelxconn-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vg-ip`' />\n",
    "comments":"",
    "x":620.3333740234375,
    "y":1563.9999618530273,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"94c1462c.043b88",
    "type":"set",
    "name":"set brg-ar.allotted-resource-data.brg-topology.brg-assignments.vgmux-bearer-ip",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-data.brg-topology.brg-assignments.vgmux-bearer-ip' value='`$tmp.tunnelxconn-ar.allotted-resource-data.tunnelxconn-topology.tunnelxconn-assignments.vgmux-bearer-ip`' />\n",
    "comments":"",
    "x":658.6666717529297,
    "y":1613.999891281128,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"cf968917.b69b88",
    "type":"comment",
    "name":"Setup VXLAN Tunnel - vG to vgMUX",
    "info":"",
    "comments":"",
    "x":205.3333282470703,
    "y":1567.3331804275513,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"e863c266.46b5f",
    "type":"comment",
    "name":"Setup VXLAN Tunnel - vBRG to vgMUX",
    "info":"",
    "comments":"",
    "x":207.5,
    "y":917.3334655761719,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"80306115.be919",
    "type":"comment",
    "name":"Get vg-mgmt-ip",
    "info":"brg tunnelxconnn consuming-service-instance-id\nfound in services as service-instance-id",
    "comments":"",
    "x":203.33334350585938,
    "y":1761.6669359207153,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"2b05ed04.a37c82",
    "type":"set",
    "name":"set tmp.search.consuming-service-instance-id to find vg-mgmt-ip",
    "xml":"<set>\n<parameter name='tmp.search.consuming-service-instance-id' value='`$brg-topology-operation-input.allotted-resource-data.brg-topology.allotted-resource-identifiers.consuming-service-instance-id`' />\n",
    "comments":"",
    "x":606.4999313354492,
    "y":1685.6662950515747,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"64e3c820.beeeb8",
    "type":"for",
    "name":"for tmp.servicedata.services",
    "xml":"<for index='serviceidx' start='0' end='`$tmp.servicedata.services.service_length`' >\n\n\n",
    "comments":"",
    "outputs":1,
    "x":1460.666519165039,
    "y":1628.333200454712,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "437927a8.b53de8"
      ]
    ]
  },
  {
    "id":"59a607df.c64478",
    "type":"get-resource",
    "name":"get-resource generic-resource-api:services ",
    "xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='GENERIC-RESOURCE-API' key='services' pfx='tmp.servicedata' >\n",
    "comments":"",
    "outputs":1,
    "x":544.0000381469727,
    "y":1762.9997386932373,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "d452dcaa.3bee9",
        "6e818aeb.a4aa04",
        "eac2b2a0.0610f"
      ]
    ]
  },
  {
    "id":"437927a8.b53de8",
    "type":"switchNode",
    "name":"switch parent-service-instance-id matches",
    "xml":"<switch test='`$tmp.servicedata.services.service[$serviceidx].service-instance-id == $tmp.search.consuming-service-instance-id`'>\n\n\n",
    "comments":"",
    "outputs":1,
    "x":1545.3333435058594,
    "y":1709.0000143051147,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "82666621.1fed58"
      ]
    ]
  },
  {
    "id":"82666621.1fed58",
    "type":"success",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":1799.3333358764648,
    "y":1701.6665935516357,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "d33ebff.e8b004"
      ]
    ]
  },
  {
    "id":"d452dcaa.3bee9",
    "type":"success",
    "name":"success",
    "xml":"<outcome value='success'>\n",
    "comments":"",
    "outputs":1,
    "x":1140.6666259765625,
    "y":1664.999797821045,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "64e3c820.beeeb8"
      ]
    ]
  },
  {
    "id":"eac2b2a0.0610f",
    "type":"not-found",
    "name":"not-found",
    "xml":"<outcome value='not-found'>\n",
    "comments":"",
    "outputs":1,
    "x":1118.999984741211,
    "y":1731.6664905548096,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "7856f029.11793"
      ]
    ]
  },
  {
    "id":"6e818aeb.a4aa04",
    "type":"failure",
    "name":"failure",
    "xml":"<outcome value='failure'>\n",
    "comments":"",
    "outputs":1,
    "x":1110.0000343322754,
    "y":1700.166516304016,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "7856f029.11793"
      ]
    ]
  },
  {
    "id":"7856f029.11793",
    "type":"returnFailure",
    "name":"return failure",
    "xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error getting GENERIC-RESOURCE-API:services\" />\n",
    "comments":"",
    "x":1279.750072479248,
    "y":1700.916540145874,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  },
  {
    "id":"d33ebff.e8b004",
    "type":"for",
    "name":"for service vnfs",
    "xml":"<for index='vnfidx' start='0' end='`$tmp.servicedata.services.service[$serviceidx].service-data.vnfs.vnf_length`' >\n\n\n",
    "comments":"",
    "outputs":1,
    "x":1937.6664505004883,
    "y":1549.9999027252197,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "ee53e172.1bc7a"
      ]
    ]
  },
  {
    "id":"150fc701.eb64c9",
    "type":"switchNode",
    "name":"switch parent-service-instance-id matches",
    "xml":"<switch test='`$tmp.servicedata.services.service[$serviceidx].service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfmoduleidx].vf-module-data.vf-module-topology.vf-module-parameters.param[$paramidx].name == vgw_private_ip_1`'>\n\n\n",
    "comments":"",
    "outputs":1,
    "x":2409.666473388672,
    "y":1631.6666069030762,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "48cef87f.eedc58"
      ]
    ]
  },
  {
    "id":"48cef87f.eedc58",
    "type":"success",
    "name":"true",
    "xml":"<outcome value='true'>\n",
    "comments":"",
    "outputs":1,
    "x":2659.6665573120117,
    "y":1633.3333415985107,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "f0d4ba11.70cc48"
      ]
    ]
  },
  {
    "id":"ee53e172.1bc7a",
    "type":"for",
    "name":"for service vnf vf-modules",
    "xml":"<for index='vfmoduleidx' start='0' end='`$tmp.servicedata.services.service[$serviceidx].service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module_length`' >\n\n\n",
    "comments":"",
    "outputs":1,
    "x":2074.666603088379,
    "y":1634.9998846054077,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "e6adb279.1c4ce"
      ]
    ]
  },
  {
    "id":"e6adb279.1c4ce",
    "type":"for",
    "name":"for service vnfs vf-modules parameters",
    "xml":"<for index='paramidx' start='0' end='`$tmp.servicedata.services.service[$serviceidx].service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfmoduleidx].vf-module-data.vf-module-topology.vf-module-parameters.param_length`' >\n\n\n",
    "comments":"",
    "outputs":1,
    "x":2164.6665802001953,
    "y":1719.9998531341553,
    "z":"5fc74ec4.a79bd",
    "wires":[
      [
        "150fc701.eb64c9"
      ]
    ]
  },
  {
    "id":"f0d4ba11.70cc48",
    "type":"set",
    "name":"set vg-mgmt-ip",
    "xml":"<set>\n<parameter name='brg-ar.allotted-resource-data.brg-topology.brg-assignments.vg-mgmt-ip' value='`$tmp.servicedata.services.service[$serviceidx].service-data.vnfs.vnf[$vnfidx].vnf-data.vf-modules.vf-module[$vfmoduleidx].vf-module-data.vf-module-topology.vf-module-parameters.param[$paramidx].value`' />\n",
    "comments":"",
    "x":2841.333106994629,
    "y":1629.999900817871,
    "z":"5fc74ec4.a79bd",
    "wires":[

    ]
  }
]