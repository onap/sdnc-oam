[
  {
    "id": "d3e08805.9611b8",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 83,
    "y": 24,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "f7dace5a.d2c9a"
      ]
    ]
  },
  {
    "id": "f7dace5a.d2c9a",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 214.2856903076172,
    "y": 73.23810863494873,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "83935545.c771a8"
      ]
    ]
  },
  {
    "id": "83935545.c771a8",
    "type": "method",
    "name": "method sdwan-vnf-topology-operation-wanport-activate",
    "xml": "<method rpc='sdwan-vnf-topology-operation-wanport-activate' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 217.42861938476562,
    "y": 158.00003242492676,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "5c798a65.20eb74"
      ]
    ]
  },
  {
    "id": "5c798a65.20eb74",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 280.66675567626953,
    "y": 763.666989326477,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "71d2a775.99ccc8",
        "86f28d21.8ff7e",
        "1d544933.c7e8c7",
        "50fcdc11.a23244",
        "a2033bb8.c74a28",
        "f2405d05.22028",
        "ec56abe8.7b3a98",
        "c179291d.00bde8",
        "c25408f5.164608",
        "7e3b6576.8de5bc",
        "e9a4c8c8.051068",
        "9ac8f49c.624348",
        "20fab8b2.cf42c8",
        "833ee131.2bc86",
        "37df268d.80523a",
        "d3956bf2.5c5588",
        "6f1e3f39.5773",
        "f462086d.871178",
        "47d46647.d7f098",
        "24dcefec.86843",
        "589c7732.243f08"
      ]
    ]
  },
  {
    "id": "71d2a775.99ccc8",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 605.3345069885254,
    "y": 1561.334532737732,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "7e3b6576.8de5bc",
    "type": "execute",
    "name": "execute RestApiCallNode device port create",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-port.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/ports'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"portResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 695.3341102600098,
    "y": 758.889497756958,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "68948952.c50068",
        "b1429997.066598"
      ]
    ]
  },
  {
    "id": "68948952.c50068",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 944.3341693878174,
    "y": 772.8897037506104,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "4a0bff89.5f70e"
      ]
    ]
  },
  {
    "id": "b1429997.066598",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 944.3341693878174,
    "y": 734.8895392417908,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "3a88421d.260dee"
      ]
    ]
  },
  {
    "id": "3a88421d.260dee",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create device port rest api\" />\n",
    "comments": "",
    "x": 1088.3345031738281,
    "y": 733.8895387649536,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "4a0bff89.5f70e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1091.3341808319092,
    "y": 773.8895425796509,
    "z": "c5494b7.49969b8",
    "wires": [
      []
    ]
  },
  {
    "id": "e9a4c8c8.051068",
    "type": "execute",
    "name": "execute RestApiCallNode get transport network info",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/network-orchestration-resources'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"transportNetworksResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 718.0004615783691,
    "y": 938.0006031990051,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "2354042c.5855cc",
        "d065ad9e.5a092"
      ]
    ]
  },
  {
    "id": "20fab8b2.cf42c8",
    "type": "execute",
    "name": "execute RestApiCallNode wan port create",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-wan-port.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/transport-network-ports'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"wanPortResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 691.0005531311035,
    "y": 1175.000651359558,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "55b035dc.e280bc",
        "317ef84d.a3fa48"
      ]
    ]
  },
  {
    "id": "86f28d21.8ff7e",
    "type": "switchNode",
    "name": "switch service-data.vnfs.vnf_length",
    "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 677.0209350585938,
    "y": 102.02091217041016,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "63db3e02.79edb",
        "4a9b0d37.8bb004",
        "a6fa95c8.c66c58"
      ]
    ]
  },
  {
    "id": "63db3e02.79edb",
    "type": "other",
    "name": "Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 929.0209693908691,
    "y": 103.02099323272705,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "9de50dea.b6dd6"
      ]
    ]
  },
  {
    "id": "9de50dea.b6dd6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1090.7987174987793,
    "y": 82.90994024276733,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "4a9b0d37.8bb004",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 922.0213775634766,
    "y": 136.02099704742432,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "debc8f64.af94a"
      ]
    ]
  },
  {
    "id": "debc8f64.af94a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 945.2908935546875,
    "y": 234.57559204101562,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "7c8738b1.877ca8",
        "943a7232.2883e",
        "b75d8380.35bfa",
        "13bc1f79.03e581",
        "53d7471c.3e1cc8"
      ]
    ]
  },
  {
    "id": "7c8738b1.877ca8",
    "type": "for",
    "name": "for vidx..service-data.vnfs.vnf_length[]",
    "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1225.3070373535156,
    "y": 128.44955825805664,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "c2d9f7f0.e01aa8"
      ]
    ]
  },
  {
    "id": "943a7232.2883e",
    "type": "switchNode",
    "name": "switch tmp.vidx ",
    "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1151.608341217041,
    "y": 274.43279361724854,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "ea056417.1dc458"
      ]
    ]
  },
  {
    "id": "ea056417.1dc458",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1299.0369834899902,
    "y": 274.0042037963867,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "b740de23.ab078"
      ]
    ]
  },
  {
    "id": "8f939166.1a702",
    "type": "switchNode",
    "name": "switch vnfid found",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1598.7362670898438,
    "y": 127.69972038269043,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "32b14615.3ef46a"
      ]
    ]
  },
  {
    "id": "b740de23.ab078",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1448.4657096862793,
    "y": 275.14712142944336,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "32b14615.3ef46a",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1753.6882591247559,
    "y": 128.59239959716797,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "d8c80e8.07446f"
      ]
    ]
  },
  {
    "id": "bf24dea8.ee4f4",
    "type": "set",
    "name": "set tmp.vidx and ctx.vnf-data",
    "xml": "<set>\n<parameter name='tmp.vidx' value='`$vidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vidx].`' />\n",
    "comments": "",
    "x": 2161.220344543457,
    "y": 38.34245777130127,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "a6fa95c8.c66c58",
    "type": "outcome",
    "name": "0",
    "xml": "<outcome value='0'>\n",
    "comments": "",
    "outputs": 1,
    "x": 930.9897193908691,
    "y": 66.98967933654785,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "9de50dea.b6dd6"
      ]
    ]
  },
  {
    "id": "833ee131.2bc86",
    "type": "set",
    "name": "set device PortId to service data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].name' value='devicePortId' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].value' value='`$prop.wan.devicePortId`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length + 1`' />\n\n\n\n\n",
    "comments": "",
    "x": 657.9908981323242,
    "y": 1297.991030216217,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "3f244f2b.bb62c",
    "type": "comment",
    "name": "Get siteId from site resource created for this service",
    "info": "",
    "comments": "",
    "x": 702.9899826049805,
    "y": 287.32321643829346,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "c2d9f7f0.e01aa8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1444.6566696166992,
    "y": 127.98963832855225,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "8f939166.1a702"
      ]
    ]
  },
  {
    "id": "1d544933.c7e8c7",
    "type": "set",
    "name": "set vnfId and vnf-object-path",
    "xml": "<set>\n<parameter name='vnfId' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name=\"vnf-object-path\" value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/vnfs/vnf/'  + $vnf-topology-operation-input.vnf-information.vnf-id  + '/vnf-data/'` \" />",
    "comments": "",
    "x": 638.5462112426758,
    "y": 1440.2129440307617,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "50fcdc11.a23244",
    "type": "set",
    "name": "set vnf-level-oper-status to Active",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status' value='Active' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />\n",
    "comments": "",
    "x": 655.9906730651855,
    "y": 1479.990779876709,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "24dcefec.86843",
    "type": "update",
    "name": "update SDWAN wan port instance configuration in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='wan-port-config' \n      key='wan-port-config.wan-port-config-id = $vnf-topology-operation-input.vnf-information.vnf-id' >\n<parameter name=\"wan-port-config-id\" value=\"`$vnf-topology-operation-input.vnf-information.vnf-id`\" />\n<parameter name='operational-status' value='Active' />\n<parameter name='device-port-id' value='`$prop.wan.devicePortId`' />\n<parameter name='wan-port-id' value='`$prop.wan.wanPortId`' />\n<parameter name='model-customization-id' value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-uuid`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 718.6535987854004,
    "y": 1519.1382417678833,
    "z": "c5494b7.49969b8",
    "wires": [
      []
    ]
  },
  {
    "id": "d2796204.52637",
    "type": "set",
    "name": "set prop.wan.transportNetworkId",
    "xml": "<set>\n<parameter name='prop.wan.transportNetworkId' value='`$transportNetworksResp.data.transportNetworks[$tidx].id`' />\n",
    "comments": "",
    "x": 1472.991542816162,
    "y": 1014.9906749725342,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "47d46647.d7f098",
    "type": "for",
    "name": "for loop sidx - Get siteId from servicedata",
    "xml": "<for index=\"sidx\" start=\"0\" end=\"`$ctx.site.vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 682.9900054931641,
    "y": 437.9898729324341,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "76cf61ce.029d7"
      ]
    ]
  },
  {
    "id": "86accd11.8f202",
    "type": "switchNode",
    "name": "switch siteId",
    "xml": "<switch test=\"`$ctx.site.vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].name == 'siteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1113.990333557129,
    "y": 438.99000358581543,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "381535ee.b503aa"
      ]
    ]
  },
  {
    "id": "381535ee.b503aa",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1251.9907913208008,
    "y": 436.98998832702637,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "c7f6c6b6.dd3458"
      ]
    ]
  },
  {
    "id": "c7f6c6b6.dd3458",
    "type": "set",
    "name": "set prop.wan.siteId",
    "xml": "<set>\n<parameter name='prop.wan.siteId' value='`$ctx.site.vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].value`' />\n\n\n",
    "comments": "",
    "x": 1415.9908256530762,
    "y": 438.58984184265137,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "9ac8f49c.624348",
    "type": "execute",
    "name": "execute split ip and mask",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$prop.wan.ipAddress`'/>\n<parameter name=\"regex\" value=\"/\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"ipandMask\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 641.9903297424316,
    "y": 1083.3236436843872,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "341a4e7a.2ecb22",
        "9814af82.14df1"
      ]
    ]
  },
  {
    "id": "9814af82.14df1",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 842.990348815918,
    "y": 1061.3236351013184,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "5982d587.5c09fc"
      ]
    ]
  },
  {
    "id": "341a4e7a.2ecb22",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 842.9903526306152,
    "y": 1102.3236389160156,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "4b6a103e.cf1d"
      ]
    ]
  },
  {
    "id": "5982d587.5c09fc",
    "type": "set",
    "name": "set ipAddress prefixLength",
    "xml": "<set>\n<parameter name='prop.wan.ip-address' value='`$ipandMask[0]`' />\n<parameter name='prop.wan.prefixLength' value='`$ipandMask[1]`' />",
    "comments": "",
    "x": 1039.9903678894043,
    "y": 1059.3236351013184,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "4b6a103e.cf1d",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 997.9903602600098,
    "y": 1099.3236379623413,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "c179291d.00bde8",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = SDWANController AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 657.4901733398438,
    "y": 535.9899291992188,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "53c5bb3d.7c4004",
        "c92ee85c.183de8",
        "7eccd819.0a52e8"
      ]
    ]
  },
  {
    "id": "53c5bb3d.7c4004",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 889.4902572631836,
    "y": 499.98995208740234,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "2956fb6f.87c064"
      ]
    ]
  },
  {
    "id": "c92ee85c.183de8",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 891.9811401367188,
    "y": 535.5639886856079,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "a9b78a3a.3499a8"
      ]
    ]
  },
  {
    "id": "7eccd819.0a52e8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 887.3141479492188,
    "y": 571.8973474502563,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "47394338.72386c"
      ]
    ]
  },
  {
    "id": "47394338.72386c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1041.0866394042969,
    "y": 569.3364343643188,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "a9b78a3a.3499a8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1037.5525360107422,
    "y": 533.8496761322021,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "2956fb6f.87c064",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 1049.9903678894043,
    "y": 497.9898920059204,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "a2033bb8.c74a28",
    "type": "record",
    "name": "record",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"sdwan-wanport-vnf-topology-operation-activate\"/>\n<parameter name=\"field3\" value=\"SDWAN-Activate\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 595.0000953674316,
    "y": 158.00003004074097,
    "z": "c5494b7.49969b8",
    "wires": [
      []
    ]
  },
  {
    "id": "f2405d05.22028",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 631.3022193908691,
    "y": 193.00007390975952,
    "z": "c5494b7.49969b8",
    "wires": [
      []
    ]
  },
  {
    "id": "c25408f5.164608",
    "type": "execute",
    "name": "execute RestApiCallNode Get token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
    "comments": "",
    "outputs": 1,
    "x": 672.0003051757812,
    "y": 623.6669311523438,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "5b62dba.23a6724",
        "b4713e29.c43a8"
      ]
    ]
  },
  {
    "id": "5b62dba.23a6724",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 907.000431060791,
    "y": 609.666919708252,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "c924c712.8a8378"
      ]
    ]
  },
  {
    "id": "c924c712.8a8378",
    "type": "set",
    "name": "set token-id",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
    "comments": "",
    "x": 1049.0004386901855,
    "y": 608.6669206619263,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "8c376d8d.f2769",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
    "comments": "",
    "x": 1055.0004386901855,
    "y": 646.0599088668823,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "b4713e29.c43a8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 906.250431060791,
    "y": 645.3098268508911,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "8c376d8d.f2769"
      ]
    ]
  },
  {
    "id": "332a8bf5.782ff4",
    "type": "switchNode",
    "name": "switch transportNetworkName same",
    "xml": "<switch test=\"`$transportNetworksResp.data.transportNetworks[$tidx].name == $prop.wan.transportNetworkName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1112.0011558532715,
    "y": 972.6670732498169,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "e5f6f7b4.354b98"
      ]
    ]
  },
  {
    "id": "e5f6f7b4.354b98",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1325.0006065368652,
    "y": 972.6669912338257,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "d2796204.52637"
      ]
    ]
  },
  {
    "id": "7105dd86.af6c34",
    "type": "switchNode",
    "name": "switch ActivateSDWANDeviceInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.request-information.request-action == 'ActivateSDWANDeviceInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 1539.3336029052734,
    "y": 205.00005722045898,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "dd40279f.8eeea8"
      ]
    ]
  },
  {
    "id": "dd40279f.8eeea8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1762.3336124420166,
    "y": 205.00005722045898,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "12149667.72f80a"
      ]
    ]
  },
  {
    "id": "c1942dca.f90c1",
    "type": "set",
    "name": "set tmp.devicevidx",
    "xml": "<set>\n<parameter name='tmp.devicevidx' value='`$vidx`' />\n\n",
    "comments": "",
    "x": 2727.3329467773438,
    "y": 636.0000820159912,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "53d7471c.3e1cc8",
    "type": "switchNode",
    "name": "switch tmp.devicevidx",
    "xml": "<switch test=\"`$tmp.devicevidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1192.3335304260254,
    "y": 363.0001196861267,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "4602555f.435cec"
      ]
    ]
  },
  {
    "id": "4602555f.435cec",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1376.7620964050293,
    "y": 363.57155656814575,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "5520e03f.96b18"
      ]
    ]
  },
  {
    "id": "5520e03f.96b18",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"ActivateSDWANDeviceInstance not found in service-data\" />\n",
    "comments": "",
    "x": 1517.1908378601074,
    "y": 363.71443605422974,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "6f8cf23f.0209dc",
    "type": "comment",
    "name": "Get deviceId from device resource created for this service",
    "info": "",
    "comments": "",
    "x": 2176.6668853759766,
    "y": 302.33333587646484,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "489eb82a.f952c8",
    "type": "for",
    "name": "for loop didx - Get deviceId from servicedata",
    "xml": "<for index=\"didx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2162.667095184326,
    "y": 225.99997997283936,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "a840f568.e72fe8"
      ]
    ]
  },
  {
    "id": "b3441b30.aa4ab8",
    "type": "switchNode",
    "name": "switch name (DeviceName)",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$didx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2180.667694091797,
    "y": 364.0002250671387,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "fc0b9b1d.28c708"
      ]
    ]
  },
  {
    "id": "fc0b9b1d.28c708",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2382.668186187744,
    "y": 358.0002851486206,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "b4f179c9.a214f8"
      ]
    ]
  },
  {
    "id": "76cf61ce.029d7",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 945.0001983642578,
    "y": 438.66669750213623,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "86accd11.8f202"
      ]
    ]
  },
  {
    "id": "a840f568.e72fe8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1954.999984741211,
    "y": 362.6667261123657,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "b3441b30.aa4ab8"
      ]
    ]
  },
  {
    "id": "556d9445.4f2e4c",
    "type": "switchNode",
    "name": "switch deviceId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].name == 'deviceId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3026.0011444091797,
    "y": 576.6670227050781,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "4439d129.bb0b6"
      ]
    ]
  },
  {
    "id": "4439d129.bb0b6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3179.0015144348145,
    "y": 577.6670999526978,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "8f56b9b3.9c5728"
      ]
    ]
  },
  {
    "id": "8f56b9b3.9c5728",
    "type": "set",
    "name": "set prop.wan.deviceId",
    "xml": "<set>\n<parameter name='prop.wan.deviceId' value='`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].value`' />\n",
    "comments": "",
    "x": 3348.0021209716797,
    "y": 576.2671346664429,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "12149667.72f80a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1903.6669311523438,
    "y": 227.00007724761963,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "489eb82a.f952c8"
      ]
    ]
  },
  {
    "id": "b4f179c9.a214f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2201.0012283325195,
    "y": 441.0002546310425,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "41b636f7.4605d8"
      ]
    ]
  },
  {
    "id": "3c83342b.bff06c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2590.0019340515137,
    "y": 444.00037956237793,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "d216e689.2df0f8"
      ]
    ]
  },
  {
    "id": "d8c80e8.07446f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1892.3337783813477,
    "y": 129.00003337860107,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "bf24dea8.ee4f4",
        "b88755ee.f99b38",
        "be26bd6d.b6d6a",
        "d34abb03.648a78"
      ]
    ]
  },
  {
    "id": "6f1e3f39.5773",
    "type": "set",
    "name": "set prop.wan.wanPortId",
    "xml": "<set>\n<parameter name='prop.wan.wanPortId' value='`$wanPortResp.success[0].id`' />\n",
    "comments": "",
    "x": 639.3246231079102,
    "y": 1239.6573944091797,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "37df268d.80523a",
    "type": "set",
    "name": "set prop.wan.devicePortId",
    "xml": "<set>\n<parameter name='prop.wan.devicePortId' value='`$portResp.success[0].id`' />\n",
    "comments": "",
    "x": 649.9913177490234,
    "y": 820.9906539916992,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "99c82c97.d67a7",
    "type": "comment",
    "name": "Create port",
    "info": "",
    "comments": "",
    "x": 597.0000495910645,
    "y": 725.3335218429565,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "5cfea39.096ff5c",
    "type": "comment",
    "name": "Get network id",
    "info": "",
    "comments": "",
    "x": 648.0001220703125,
    "y": 903.3334802985191,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "d44c9330.7b098",
    "type": "comment",
    "name": "Create wan port",
    "info": "",
    "comments": "",
    "x": 615.0002059936523,
    "y": 1036.3336935043335,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "317ef84d.a3fa48",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 977.0001220703125,
    "y": 1135.0002393722534,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "12534eac.cdc831"
      ]
    ]
  },
  {
    "id": "55b035dc.e280bc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 977.0001182556152,
    "y": 1175.0004043579102,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "9238f861.a33ef8"
      ]
    ]
  },
  {
    "id": "9238f861.a33ef8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1121.0001335144043,
    "y": 1174.000241279602,
    "z": "c5494b7.49969b8",
    "wires": [
      []
    ]
  },
  {
    "id": "12534eac.cdc831",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create wan port rest api\" />\n",
    "comments": "",
    "x": 1119.0004539489746,
    "y": 1134.0002393722534,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "d065ad9e.5a092",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1024.0000495910645,
    "y": 886.0001783370972,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "1b98a4a8.664bdb"
      ]
    ]
  },
  {
    "id": "2354042c.5855cc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1024.0000457763672,
    "y": 926.0003433227539,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "8ba4e30f.14b38"
      ]
    ]
  },
  {
    "id": "8ba4e30f.14b38",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1168.0000610351562,
    "y": 925.0001802444458,
    "z": "c5494b7.49969b8",
    "wires": [
      []
    ]
  },
  {
    "id": "1b98a4a8.664bdb",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Get transport network info rest api\" />\n",
    "comments": "",
    "x": 1166.0003814697266,
    "y": 885.0001783370972,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "be26bd6d.b6d6a",
    "type": "call",
    "name": "call sdwan-get-wan-param",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-wan-param' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2164.666633605957,
    "y": 135.0000762939453,
    "z": "c5494b7.49969b8",
    "wires": [
      []
    ]
  },
  {
    "id": "b88755ee.f99b38",
    "type": "set",
    "name": "set vnf-request-input.",
    "xml": "<set>\n<parameter name='vnf-request-input.' value='`$ctx.vnf-data.vnf-data.vnf-request-input.`' />\n\n",
    "comments": "",
    "x": 2133.666633605957,
    "y": 85.00009346008301,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "bb494b87.830e28",
    "type": "comment",
    "name": "This is also required for template parameters update",
    "info": "",
    "comments": "",
    "x": 2529.0003967285156,
    "y": 181.00003623962402,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "c939644e.f0b858",
    "type": "switchNode",
    "name": "switch ActivateSiteInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.request-information.request-action == 'ActivateSiteInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 1502.0004425048828,
    "y": 170.00004959106445,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "89f80af3.346938"
      ]
    ]
  },
  {
    "id": "89f80af3.346938",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1698.0006256103516,
    "y": 171.00004959106445,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "5dd3893f.4a7ea8"
      ]
    ]
  },
  {
    "id": "5dd3893f.4a7ea8",
    "type": "set",
    "name": "set tmp.siteVidx",
    "xml": "<set>\n<parameter name='tmp.siteVidx' value='`$vidx`' />\n<parameter name='ctx.site.' value='`$service-data.vnfs.vnf[$vidx].`' />\n\n",
    "comments": "",
    "x": 1883.9999237060547,
    "y": 168.00005340576172,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "13bc1f79.03e581",
    "type": "switchNode",
    "name": "switch tmp.siteVidx",
    "xml": "<switch test=\"`$tmp.siteVidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1175.6667518615723,
    "y": 312.00007009506226,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "e4930b56.8a59f8"
      ]
    ]
  },
  {
    "id": "e4930b56.8a59f8",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1350.0954627990723,
    "y": 312.5715217590332,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "a5febd63.c2db7"
      ]
    ]
  },
  {
    "id": "a5febd63.c2db7",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"ActivateSiteInstance not found in service-data\" />\n",
    "comments": "",
    "x": 1492.5241813659668,
    "y": 311.71438455581665,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "41b636f7.4605d8",
    "type": "switchNode",
    "name": "switch deviceName match",
    "xml": "<switch test=\"`$prop.wan.deviceName == $service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$didx].value`\">\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2406.667953491211,
    "y": 442.0003185272217,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "3c83342b.bff06c"
      ]
    ]
  },
  {
    "id": "d216e689.2df0f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2489.3338928222656,
    "y": 516.0001621246338,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "93f36ff6.faafe",
        "c1942dca.f90c1"
      ]
    ]
  },
  {
    "id": "93f36ff6.faafe",
    "type": "for",
    "name": "for loop deviceidx - Get deviceId from servicedata",
    "xml": "<for index=\"deviceidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2769.5310440063477,
    "y": 511.03135108947754,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "e2b7f439.b0d4b8"
      ]
    ]
  },
  {
    "id": "e2b7f439.b0d4b8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2846.5317764282227,
    "y": 575.0314502716064,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "556d9445.4f2e4c"
      ]
    ]
  },
  {
    "id": "d34abb03.648a78",
    "type": "record",
    "name": "record",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\".....\"/>\n<parameter name=\"field3\" value=\"prop.wan.deviceName\"/>\n<parameter name=\"field4\" value='`$prop.wan.deviceName`'/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2092.531379699707,
    "y": 183.0312671661377,
    "z": "c5494b7.49969b8",
    "wires": [
      []
    ]
  },
  {
    "id": "b75d8380.35bfa",
    "type": "for",
    "name": "for vidx..service-data.vnfs.vnf_length[]",
    "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1218.000072479248,
    "y": 206.0000171661377,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "7105dd86.af6c34",
        "c939644e.f0b858"
      ]
    ]
  },
  {
    "id": "ec56abe8.7b3a98",
    "type": "set",
    "name": "copy input data to service data",
    "xml": "<set>\n<!--parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-id' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' /-->\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.sdnc-request-header.' value='$vnf-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.request-information.' value='$vnf-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.' value='$vnf-topology-operation-input.service-information.' />",
    "comments": "",
    "x": 651.0312652587891,
    "y": 1394.5312538146973,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "fdc70d4e.6c354",
    "type": "comment",
    "name": "TODO: split ip/mask",
    "info": "",
    "comments": "",
    "x": 1039,
    "y": 1021.5039072036743,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "cb21e48e.93ff78",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 891.0008735656738,
    "y": 974.3337669372559,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "332a8bf5.782ff4"
      ]
    ]
  },
  {
    "id": "d3956bf2.5c5588",
    "type": "for",
    "name": "for loop tidx - Get transportNetwork ID",
    "xml": "<for index=\"tidx\" start=\"0\" end=\"`$transportNetworksResp.data.transportNetworks_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 675.0004920959473,
    "y": 973.3335227966309,
    "z": "c5494b7.49969b8",
    "wires": [
      [
        "cb21e48e.93ff78"
      ]
    ]
  },
  {
    "id": "f462086d.871178",
    "type": "set",
    "name": "set wan portId to service data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].name' value='wanPortId' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].value' value='`$prop.wan.wanPortId`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length + 1`' />\n\n\n\n\n",
    "comments": "",
    "x": 651.9999923706055,
    "y": 1344.2500953674316,
    "z": "c5494b7.49969b8",
    "wires": []
  },
  {
    "id": "589c7732.243f08",
    "type": "call",
    "name": "call sdwan-get-tenant-auth",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-tenant-auth' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 647,
    "y": 679,
    "z": "c5494b7.49969b8",
    "wires": [
      []
    ]
  }
]
