[
  {
    "id": "426569df.8612f8",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 120.00390625,
    "y": 238.75390625,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "7d6fafb.3ddd95"
      ]
    ]
  },
  {
    "id": "7d6fafb.3ddd95",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 268.2895965576172,
    "y": 288.99201488494873,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "7af8806b.3ecd7"
      ]
    ]
  },
  {
    "id": "7af8806b.3ecd7",
    "type": "method",
    "name": "method sdwan-vnf-topology-operation-wanport-activate",
    "xml": "<method rpc='sdwan-vnf-topology-operation-wanport-activate' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 271.4325256347656,
    "y": 373.75393867492676,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "63259a1d.b752b4"
      ]
    ]
  },
  {
    "id": "63259a1d.b752b4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 334.67066192626953,
    "y": 979.420895576477,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "ff4c2e55.307e9",
        "36b7eecd.26eef2",
        "236a2d57.6cfe02",
        "7b3df5af.3ce7ac",
        "ce5ce7ac.be3938",
        "21db1d94.b93312",
        "b01a2888.afc958",
        "8814bd0.a9cd04",
        "a3b723.963fa8e",
        "eefe56c7.aeba48",
        "1d7f590a.25aba7",
        "4f9762f1.7b8f7c",
        "739bdc62.97be04",
        "e93ff52d.80faa8",
        "378b7e77.9ee662",
        "8569d96f.59e838",
        "2af7b981.494176",
        "66231f4c.1fe22",
        "d3523f5e.150e2"
      ]
    ]
  },
  {
    "id": "ff4c2e55.307e9",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 659.3384132385254,
    "y": 1777.088438987732,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "1d7f590a.25aba7",
    "type": "execute",
    "name": "execute RestApiCallNode device port create",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-port.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/ports'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"portResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 749.3380165100098,
    "y": 974.643404006958,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "53451b0.d0c27e4",
        "d2d2e81c.454428"
      ]
    ]
  },
  {
    "id": "53451b0.d0c27e4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 998.3380756378174,
    "y": 988.6436100006104,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "eca1c460.e76228"
      ]
    ]
  },
  {
    "id": "d2d2e81c.454428",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 998.3380756378174,
    "y": 950.6434454917908,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "104d6c7d.be4024"
      ]
    ]
  },
  {
    "id": "104d6c7d.be4024",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create device port rest api\" />\n",
    "comments": "",
    "x": 1142.3384094238281,
    "y": 949.6434450149536,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "eca1c460.e76228",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1145.3380870819092,
    "y": 989.6434488296509,
    "z": "2525d6cd.61f35a",
    "wires": [
      []
    ]
  },
  {
    "id": "4f9762f1.7b8f7c",
    "type": "execute",
    "name": "execute RestApiCallNode get transport network info",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/network-orchestration-resources'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"get\"/>\n<parameter name=\"responsePrefix\" value=\"transportNetworksResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 772.0043678283691,
    "y": 1153.7545094490051,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "af3e9c1f.7be91",
        "394b70c0.ac6f"
      ]
    ]
  },
  {
    "id": "e93ff52d.80faa8",
    "type": "execute",
    "name": "execute RestApiCallNode wan port create",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-wan-port.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/transport-network-ports'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"wanPortResp\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 745.0044593811035,
    "y": 1390.754557609558,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "727c41a7.9551b",
        "51280d82.cd5cc4"
      ]
    ]
  },
  {
    "id": "36b7eecd.26eef2",
    "type": "switchNode",
    "name": "switch service-data.vnfs.vnf_length",
    "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 731.0248413085938,
    "y": 317.77481842041016,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "7f1fbca4.9489e4",
        "5c724185.8e516",
        "5b28fd04.e48584"
      ]
    ]
  },
  {
    "id": "7f1fbca4.9489e4",
    "type": "other",
    "name": "Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 983.0248756408691,
    "y": 318.77489948272705,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "9ce50f4e.b2fc8"
      ]
    ]
  },
  {
    "id": "9ce50f4e.b2fc8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1144.8026237487793,
    "y": 298.66384649276733,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "5c724185.8e516",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 976.0252838134766,
    "y": 351.7749032974243,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "85017b74.ea3478"
      ]
    ]
  },
  {
    "id": "85017b74.ea3478",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 994.2947769165039,
    "y": 514.3294858932495,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "6e42e95a.0ecb68",
        "f672c022.be35c",
        "388b05e0.8ee79a",
        "5cf9118c.68854",
        "59c48b6.04c5c74"
      ]
    ]
  },
  {
    "id": "6e42e95a.0ecb68",
    "type": "for",
    "name": "for vidx..service-data.vnfs.vnf_length[]",
    "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1279.3109436035156,
    "y": 344.20346450805664,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "7f2ca034.081d2"
      ]
    ]
  },
  {
    "id": "f672c022.be35c",
    "type": "switchNode",
    "name": "switch tmp.vidx ",
    "xml": "<switch test=\"`$tmp.vidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1205.612247467041,
    "y": 490.18669986724854,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "40c5bcb3.8f3694"
      ]
    ]
  },
  {
    "id": "40c5bcb3.8f3694",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1353.0408897399902,
    "y": 489.7581100463867,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "8c183b0a.c20d58"
      ]
    ]
  },
  {
    "id": "52d419f2.072bd8",
    "type": "switchNode",
    "name": "switch vnfid found",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1652.7401733398438,
    "y": 343.45362663269043,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "7d43258f.b6dc1c"
      ]
    ]
  },
  {
    "id": "8c183b0a.c20d58",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vnf-topology-operation-input.vnf-request-input.vnf-id not found in service-data\" />\n",
    "comments": "",
    "x": 1502.4696159362793,
    "y": 490.90102767944336,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "7d43258f.b6dc1c",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1807.6921653747559,
    "y": 344.34630584716797,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "7b4fae02.aca0c"
      ]
    ]
  },
  {
    "id": "5f826b27.adc144",
    "type": "set",
    "name": "set tmp.vidx and ctx.vnf-data",
    "xml": "<set>\n<parameter name='tmp.vidx' value='`$vidx`' />\n<parameter name='ctx.vnf-data.' value='`$service-data.vnfs.vnf[$vidx].`' />\n",
    "comments": "",
    "x": 2215.224250793457,
    "y": 254.09636402130127,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "5b28fd04.e48584",
    "type": "outcome",
    "name": "0",
    "xml": "<outcome value='0'>\n",
    "comments": "",
    "outputs": 1,
    "x": 984.9936256408691,
    "y": 282.74358558654785,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "9ce50f4e.b2fc8"
      ]
    ]
  },
  {
    "id": "378b7e77.9ee662",
    "type": "set",
    "name": "set device PortId to service data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].name' value='devicePortId' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].value' value='`$prop.wan.devicePortId`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length + 1`' />\n\n\n\n\n",
    "comments": "",
    "x": 711.9948043823242,
    "y": 1513.744936466217,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "b1043d5b.c9816",
    "type": "comment",
    "name": "Get siteId from site resource created for this service",
    "info": "",
    "comments": "",
    "x": 756.9938888549805,
    "y": 503.07712268829346,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "7f2ca034.081d2",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1498.6605758666992,
    "y": 343.74354457855225,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "52d419f2.072bd8"
      ]
    ]
  },
  {
    "id": "236a2d57.6cfe02",
    "type": "set",
    "name": "set vnfId and vnf-object-path",
    "xml": "<set>\n<parameter name='vnfId' value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name=\"vnf-object-path\" value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $vnf-topology-operation-input.service-information.service-instance-id  + '/service-data/vnfs/vnf/'  + $vnf-topology-operation-input.vnf-information.vnf-id  + '/vnf-data/'` \" />",
    "comments": "",
    "x": 692.5501174926758,
    "y": 1655.9668502807617,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "7b3df5af.3ce7ac",
    "type": "set",
    "name": "set vnf-level-oper-status to Active",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.order-status' value='Active' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />\n",
    "comments": "",
    "x": 709.9945793151855,
    "y": 1695.744686126709,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "a1d99b62.d31458",
    "type": "update",
    "name": "save SDWAN wan port instance configuration in AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='wan-port-config' \n      key='wan-port-config.id = $service-data.vnfs.vnf[$tmp.vidx].vnf-id' >\n<parameter name=\"id\" value=\"`$service-data.vnfs.vnf[$tmp.vidx].vnf-id`\" />\n<parameter name='operational-status' value='Active' />\n<parameter name='device-port-id' value='`$prop.wan.devicePortId`' />\n<parameter name='wan-port-id' value='`$prop.wan.wanPortId`' />\n<parameter name='model-customization-id' value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid`' />\n<parameter name='model-invariant-id' value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-invariant-uuid`' />\n<parameter name='model-version-id' value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-uuid`' />\n",
    "comments": "",
    "outputs": 1,
    "x": 772.6575050354004,
    "y": 1734.8921480178833,
    "z": "2525d6cd.61f35a",
    "wires": [
      []
    ]
  },
  {
    "id": "44786d4c.78c0b4",
    "type": "set",
    "name": "set prop.wan.transportNetworkId",
    "xml": "<set>\n<parameter name='prop.wan.transportNetworkId' value='`$transportNetworksResp.data.transportNetworks[$tidx].id`' />\n",
    "comments": "",
    "x": 1526.995449066162,
    "y": 1230.7445812225342,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "ce5ce7ac.be3938",
    "type": "for",
    "name": "for loop sidx - Get siteId from servicedata",
    "xml": "<for index=\"sidx\" start=\"0\" end=\"`$ctx.site.vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 736.9939117431641,
    "y": 653.7437791824341,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "4aaf0dac.f4bd44"
      ]
    ]
  },
  {
    "id": "3237e366.c0b81c",
    "type": "switchNode",
    "name": "switch siteId",
    "xml": "<switch test=\"`$ctx.site.vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].name == 'siteId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1167.994239807129,
    "y": 654.7439098358154,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "c0bb2f42.b3aaf"
      ]
    ]
  },
  {
    "id": "c0bb2f42.b3aaf",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1305.9946975708008,
    "y": 652.7438945770264,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "1433eee.8c0de11"
      ]
    ]
  },
  {
    "id": "1433eee.8c0de11",
    "type": "set",
    "name": "set prop.wan.siteId",
    "xml": "<set>\n<parameter name='prop.wan.siteId' value='`$ctx.site.vnf-data.vnf-request-input.vnf-input-parameters.param[$sidx].value`' />\n\n\n",
    "comments": "",
    "x": 1469.9947319030762,
    "y": 654.3437480926514,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "739bdc62.97be04",
    "type": "execute",
    "name": "execute split ip and mask",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$prop.ipAddress`'/>\n<parameter name=\"regex\" value=\"/\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"ipandMask\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 695.9942359924316,
    "y": 1299.0775499343872,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "fdf45f99.54463",
        "bde78d5d.e4b42"
      ]
    ]
  },
  {
    "id": "bde78d5d.e4b42",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 896.994255065918,
    "y": 1277.0775413513184,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "b4f4511b.838b7"
      ]
    ]
  },
  {
    "id": "fdf45f99.54463",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 896.9942588806152,
    "y": 1318.0775451660156,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "284d3324.0f7a9c"
      ]
    ]
  },
  {
    "id": "b4f4511b.838b7",
    "type": "set",
    "name": "set ipAddress prefixLength",
    "xml": "<set>\n<parameter name='prop.wan.ip-address' value='`$ipandMask[0]`' />\n<parameter name='prop.wan.prefixLength' value='`$ipandMask[1]`' />",
    "comments": "",
    "x": 1093.9942741394043,
    "y": 1275.0775413513184,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "284d3324.0f7a9c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 1051.9942665100098,
    "y": 1315.0775442123413,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "a3b723.963fa8e",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = SDWANController AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 730.4940643310547,
    "y": 753.7438306808472,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "e9572be2.73ae58",
        "29c0457e.12142a",
        "d78bfaf1.6dc7f8"
      ]
    ]
  },
  {
    "id": "e9572be2.73ae58",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 943.4941635131836,
    "y": 715.7438583374023,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "b45f540f.db5988"
      ]
    ]
  },
  {
    "id": "29c0457e.12142a",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 945.9850463867188,
    "y": 751.3178949356079,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "5afb7116.97e19"
      ]
    ]
  },
  {
    "id": "d78bfaf1.6dc7f8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 941.3180541992188,
    "y": 787.6512537002563,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "aca4c3f3.f6f79"
      ]
    ]
  },
  {
    "id": "aca4c3f3.f6f79",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1095.0905456542969,
    "y": 785.0903406143188,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "5afb7116.97e19",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1091.5564422607422,
    "y": 749.6035823822021,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "b45f540f.db5988",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 1103.9942741394043,
    "y": 713.7437982559204,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "21db1d94.b93312",
    "type": "record",
    "name": "record",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"sdwan-wanport-vnf-topology-operation-activate\"/>\n<parameter name=\"field3\" value=\"SDWAN-Activate\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 649.0040016174316,
    "y": 373.75393629074097,
    "z": "2525d6cd.61f35a",
    "wires": [
      []
    ]
  },
  {
    "id": "b01a2888.afc958",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 685.3061256408691,
    "y": 408.7539801597595,
    "z": "2525d6cd.61f35a",
    "wires": [
      []
    ]
  },
  {
    "id": "eefe56c7.aeba48",
    "type": "execute",
    "name": "execute RestApiCallNode Get token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
    "comments": "",
    "outputs": 1,
    "x": 733.004207611084,
    "y": 843.4208326339722,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "f0beb476.3438c8",
        "bfd1c15b.d1a6c"
      ]
    ]
  },
  {
    "id": "f0beb476.3438c8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 961.004337310791,
    "y": 825.420825958252,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "7978fb11.837754"
      ]
    ]
  },
  {
    "id": "7978fb11.837754",
    "type": "set",
    "name": "set token-id",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
    "comments": "",
    "x": 1103.0043449401855,
    "y": 824.4208269119263,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "518fd324.836c3c",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
    "comments": "",
    "x": 1109.0043449401855,
    "y": 861.8138151168823,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "bfd1c15b.d1a6c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 960.254337310791,
    "y": 861.0637331008911,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "518fd324.836c3c"
      ]
    ]
  },
  {
    "id": "e5fec542.f96808",
    "type": "switchNode",
    "name": "switch transportNetworkName same",
    "xml": "<switch test=\"`$transportNetworksResp.data.transportNetworks[$tidx].name == $prop.wan.transportNetworkName`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1166.0050621032715,
    "y": 1188.420979499817,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "5378ee5d.02dde"
      ]
    ]
  },
  {
    "id": "5378ee5d.02dde",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1379.0045127868652,
    "y": 1188.4208974838257,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "44786d4c.78c0b4"
      ]
    ]
  },
  {
    "id": "a080fa5f.ddeb88",
    "type": "switchNode",
    "name": "switch ActivateSDWANDeviceInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.request-information.request-action == 'ActivateSDWANDeviceInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 1593.3375091552734,
    "y": 420.753963470459,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "6c3d1f35.43a16"
      ]
    ]
  },
  {
    "id": "6c3d1f35.43a16",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1816.3375186920166,
    "y": 420.753963470459,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "4f891fe5.5f59b"
      ]
    ]
  },
  {
    "id": "57757525.a0de7c",
    "type": "set",
    "name": "set tmp.devicevidx",
    "xml": "<set>\n<parameter name='tmp.devicevidx' value='`$vidx`' />\n\n",
    "comments": "",
    "x": 2781.3368530273438,
    "y": 851.7539882659912,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "388b05e0.8ee79a",
    "type": "switchNode",
    "name": "switch tmp.devicevidx",
    "xml": "<switch test=\"`$tmp.devicevidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1246.3374366760254,
    "y": 578.7540259361267,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "44f27715.04a478"
      ]
    ]
  },
  {
    "id": "44f27715.04a478",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1430.7660026550293,
    "y": 579.3254628181458,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "143c0c16.156cc4"
      ]
    ]
  },
  {
    "id": "143c0c16.156cc4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"ActivateSDWANDeviceInstance not found in service-data\" />\n",
    "comments": "",
    "x": 1571.1947441101074,
    "y": 579.4683423042297,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "fd72d81.72be228",
    "type": "comment",
    "name": "Get deviceId from device resource created for this service",
    "info": "",
    "comments": "",
    "x": 2230.6707916259766,
    "y": 518.0872421264648,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "d06cae4f.399ba",
    "type": "for",
    "name": "for loop didx - Get deviceId from servicedata",
    "xml": "<for index=\"didx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2216.671001434326,
    "y": 441.75388622283936,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "cc06f146.51f0f"
      ]
    ]
  },
  {
    "id": "fc2a7486.890a38",
    "type": "switchNode",
    "name": "switch name (DeviceName)",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$didx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 2234.671600341797,
    "y": 579.7541313171387,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "e011449c.868068"
      ]
    ]
  },
  {
    "id": "e011449c.868068",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2436.672092437744,
    "y": 573.7541913986206,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "4999ecb0.3d8164"
      ]
    ]
  },
  {
    "id": "4aaf0dac.f4bd44",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 999.0041046142578,
    "y": 654.4206037521362,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "3237e366.c0b81c"
      ]
    ]
  },
  {
    "id": "cc06f146.51f0f",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2009.003890991211,
    "y": 578.4206323623657,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "fc2a7486.890a38"
      ]
    ]
  },
  {
    "id": "1d887fbe.2fb47",
    "type": "switchNode",
    "name": "switch deviceId",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].name == 'deviceId'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 3080.0050506591797,
    "y": 792.4209289550781,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "e9c4ed3a.99165"
      ]
    ]
  },
  {
    "id": "e9c4ed3a.99165",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3233.0054206848145,
    "y": 793.4210062026978,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "49a9daf2.48f304"
      ]
    ]
  },
  {
    "id": "49a9daf2.48f304",
    "type": "set",
    "name": "set prop.wan.deviceId",
    "xml": "<set>\n<parameter name='prop.wan.deviceId' value='`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$deviceidx].value`' />\n",
    "comments": "",
    "x": 3402.0060272216797,
    "y": 792.0210409164429,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "4f891fe5.5f59b",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1957.6708374023438,
    "y": 442.75398349761963,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "d06cae4f.399ba"
      ]
    ]
  },
  {
    "id": "4999ecb0.3d8164",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2255.0051345825195,
    "y": 656.7541608810425,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "46a841ba.4af92"
      ]
    ]
  },
  {
    "id": "c5bcabb0.9f3978",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2644.0058403015137,
    "y": 659.7542858123779,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "512e7a73.c439f4"
      ]
    ]
  },
  {
    "id": "7b4fae02.aca0c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1946.3376846313477,
    "y": 344.7539396286011,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "5f826b27.adc144",
        "3b7b404e.14ae9",
        "11bb0a8f.c8a415",
        "207a1eb2.66eaf2"
      ]
    ]
  },
  {
    "id": "66231f4c.1fe22",
    "type": "set",
    "name": "set prop.wan.wanPortId",
    "xml": "<set>\n<parameter name='prop.wan.wanPortId' value='`$wanPortResp.success[0].id`' />\n",
    "comments": "",
    "x": 701.3284912109375,
    "y": 1450.411226272583,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "8569d96f.59e838",
    "type": "set",
    "name": "set prop.wan.devicePortId",
    "xml": "<set>\n<parameter name='prop.wan.devicePortId' value='`$portResp.success[0].id`' />\n",
    "comments": "",
    "x": 703.9952239990234,
    "y": 1036.7445602416992,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "f2d45048.04d33",
    "type": "comment",
    "name": "Create port",
    "info": "",
    "comments": "",
    "x": 651.0039558410645,
    "y": 941.0874280929565,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "f7f10711.f1f2c8",
    "type": "comment",
    "name": "Get network id",
    "info": "",
    "comments": "",
    "x": 647.0039558410645,
    "y": 1116.0873975753784,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "8a3200f.80e49",
    "type": "comment",
    "name": "Create wan port",
    "info": "",
    "comments": "",
    "x": 662.0041046142578,
    "y": 1263.0875644683838,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "51280d82.cd5cc4",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1031.0040283203125,
    "y": 1350.7541456222534,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "7e3eadf1.9f0d14"
      ]
    ]
  },
  {
    "id": "727c41a7.9551b",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1031.0040245056152,
    "y": 1390.7543106079102,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "e2be8d7c.bac7d"
      ]
    ]
  },
  {
    "id": "e2be8d7c.bac7d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1175.0040397644043,
    "y": 1389.754147529602,
    "z": "2525d6cd.61f35a",
    "wires": [
      []
    ]
  },
  {
    "id": "7e3eadf1.9f0d14",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create wan port rest api\" />\n",
    "comments": "",
    "x": 1173.0043601989746,
    "y": 1349.7541456222534,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "394b70c0.ac6f",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1078.0039558410645,
    "y": 1101.7540845870972,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "7a566c5c.f46854"
      ]
    ]
  },
  {
    "id": "af3e9c1f.7be91",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1078.0039520263672,
    "y": 1141.754249572754,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "1ebcd5ee.10112a"
      ]
    ]
  },
  {
    "id": "1ebcd5ee.10112a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1222.0039672851562,
    "y": 1140.7540864944458,
    "z": "2525d6cd.61f35a",
    "wires": [
      []
    ]
  },
  {
    "id": "7a566c5c.f46854",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Get transport network info rest api\" />\n",
    "comments": "",
    "x": 1220.0042877197266,
    "y": 1100.7540845870972,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "11bb0a8f.c8a415",
    "type": "call",
    "name": "call sdwan-get-wan-param",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-wan-param' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 2218.670539855957,
    "y": 350.7539825439453,
    "z": "2525d6cd.61f35a",
    "wires": [
      []
    ]
  },
  {
    "id": "3b7b404e.14ae9",
    "type": "set",
    "name": "set vnf-request-input.",
    "xml": "<set>\n<parameter name='vnf-request-input.' value='`$ctx.vnf-data.vnf-data.vnf-request-input.`' />\n\n",
    "comments": "",
    "x": 2187.670539855957,
    "y": 300.753999710083,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "5738aa95.6c6dc4",
    "type": "comment",
    "name": "This is also required for template parameters update",
    "info": "",
    "comments": "",
    "x": 2583.0043029785156,
    "y": 396.753942489624,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "f74da2b3.1326d",
    "type": "switchNode",
    "name": "switch ActivateSiteInstance",
    "xml": "<switch test=\"`$service-data.vnfs.vnf[$vidx].vnf-data.request-information.request-action == 'ActivateSiteInstance'`\">\n    \n    \n\n",
    "comments": "",
    "outputs": 1,
    "x": 1556.0043487548828,
    "y": 385.75395584106445,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "3fa03eb7.c59572"
      ]
    ]
  },
  {
    "id": "3fa03eb7.c59572",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1752.0045318603516,
    "y": 386.75395584106445,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "5e72f4d2.b107fc"
      ]
    ]
  },
  {
    "id": "5e72f4d2.b107fc",
    "type": "set",
    "name": "set tmp.siteVidx",
    "xml": "<set>\n<parameter name='tmp.siteVidx' value='`$vidx`' />\n<parameter name='ctx.site.' value='`$service-data.vnfs.vnf[$vidx].`' />\n\n",
    "comments": "",
    "x": 1938.0038299560547,
    "y": 383.7539596557617,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "5cf9118c.68854",
    "type": "switchNode",
    "name": "switch tmp.siteVidx",
    "xml": "<switch test=\"`$tmp.siteVidx`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1229.6706581115723,
    "y": 527.7539763450623,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "9765105d.6b72d"
      ]
    ]
  },
  {
    "id": "9765105d.6b72d",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1404.0993690490723,
    "y": 528.3254280090332,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "3a85e200.dcaaae"
      ]
    ]
  },
  {
    "id": "3a85e200.dcaaae",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"ActivateSiteInstance not found in service-data\" />\n",
    "comments": "",
    "x": 1546.5280876159668,
    "y": 527.4682908058167,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "46a841ba.4af92",
    "type": "switchNode",
    "name": "switch deviceName match",
    "xml": "<switch test=\"`$prop.wan.deviceName == $service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$didx].value`\">\n\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2460.671859741211,
    "y": 657.7542247772217,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "c5bcabb0.9f3978"
      ]
    ]
  },
  {
    "id": "512e7a73.c439f4",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2543.3377990722656,
    "y": 731.7540683746338,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "4c673d0.8ff4ac4",
        "57757525.a0de7c"
      ]
    ]
  },
  {
    "id": "4c673d0.8ff4ac4",
    "type": "for",
    "name": "for loop deviceidx - Get deviceId from servicedata",
    "xml": "<for index=\"deviceidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 2823.5349502563477,
    "y": 726.7852573394775,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "536e54bd.8b3bec"
      ]
    ]
  },
  {
    "id": "536e54bd.8b3bec",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2900.5356826782227,
    "y": 790.7853565216064,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "1d887fbe.2fb47"
      ]
    ]
  },
  {
    "id": "207a1eb2.66eaf2",
    "type": "record",
    "name": "record",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\".....\"/>\n<parameter name=\"field3\" value=\"prop.wan.deviceName\"/>\n<parameter name=\"field4\" value='`$prop.wan.deviceName`'/>\n",
    "comments": "",
    "outputs": 1,
    "x": 2146.535285949707,
    "y": 398.7851734161377,
    "z": "2525d6cd.61f35a",
    "wires": [
      []
    ]
  },
  {
    "id": "59c48b6.04c5c74",
    "type": "for",
    "name": "for vidx..service-data.vnfs.vnf_length[]",
    "xml": "<for index='vidx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1272.003978729248,
    "y": 421.7539234161377,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "a080fa5f.ddeb88",
        "f74da2b3.1326d"
      ]
    ]
  },
  {
    "id": "8814bd0.a9cd04",
    "type": "set",
    "name": "copy input data to service data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-id' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-id`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.sdnc-request-header.' value='$vnf-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.request-information.' value='$vnf-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.' value='$vnf-topology-operation-input.service-information.' />",
    "comments": "",
    "x": 705.0351715087891,
    "y": 1610.2851600646973,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "eac4599c.f1e908",
    "type": "comment",
    "name": "TODO: split ip/mask",
    "info": "",
    "comments": "",
    "x": 1093.00390625,
    "y": 1237.2578134536743,
    "z": "2525d6cd.61f35a",
    "wires": []
  },
  {
    "id": "aa148c7f.0d986",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 945.0047798156738,
    "y": 1190.0876731872559,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "e5fec542.f96808"
      ]
    ]
  },
  {
    "id": "2af7b981.494176",
    "type": "for",
    "name": "for loop tidx - Get transportNetwork ID",
    "xml": "<for index=\"tidx\" start=\"0\" end=\"`$transportNetworksResp.data.transportNetworks_length`\">\n    \n    \n",
    "comments": "",
    "outputs": 1,
    "x": 729.0043983459473,
    "y": 1189.0874290466309,
    "z": "2525d6cd.61f35a",
    "wires": [
      [
        "aa148c7f.0d986"
      ]
    ]
  },
  {
    "id": "d3523f5e.150e2",
    "type": "set",
    "name": "set wan portId to service data",
    "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].name' value='wanPortId' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param[$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length].value' value='`$prop.wan.wanPortId`' />\n<parameter name='service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length' value='`$service-data.vnfs.vnf[$tmp.vidx].vnf-data.vnf-request-input.vnf-input-parameters.param_length + 1`' />\n\n\n\n\n",
    "comments": "",
    "x": 706.0038986206055,
    "y": 1560.0040016174316,
    "z": "2525d6cd.61f35a",
    "wires": []
  }
]
