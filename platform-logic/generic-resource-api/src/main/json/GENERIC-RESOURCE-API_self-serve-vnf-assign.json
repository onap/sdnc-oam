[{"id":"e979b2ce.e99fc","type":"dgstart","name":"DGSTART","outputs":1,"x":72.5,"y":33.75,"z":"8a7e5e63.38ace","wires":[["ad0b53dd.30d1f"]]},{"id":"9a9fd368.dccea","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":102.9761962890625,"y":156.0277862548828,"z":"8a7e5e63.38ace","wires":[["46a2b2bf.bd985c","e40ce25b.a46b4","f1a735bc.46ec68","338f391a.b76546","c60edef1.83244","58752160.8f2f","c602370a.7ee398","f2eb9a19.492128","7402f8af.8166a8"]]},{"id":"36c94e51.ac7b62","type":"method","name":"method self-serve-vnf-assign","xml":"<method rpc='self-serve-vnf-assign' mode='sync'>\n","comments":"","outputs":1,"x":189.26190948486328,"y":88.45635509490967,"z":"8a7e5e63.38ace","wires":[["9a9fd368.dccea"]]},{"id":"ad0b53dd.30d1f","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":347.73819732666016,"y":33.94049263000488,"z":"8a7e5e63.38ace","wires":[["36c94e51.ac7b62"]]},{"id":"e40ce25b.a46b4","type":"switchNode","name":"switch vnf-parameters-data.param_length","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param_length`'>\n","comments":"","outputs":1,"x":391.1786575317383,"y":1376.2620058059692,"z":"8a7e5e63.38ace","wires":[["56678c3c.918f34"]]},{"id":"56678c3c.918f34","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":653.1786880493164,"y":1376.2620058059692,"z":"8a7e5e63.38ace","wires":[["ef587707.052838"]]},{"id":"7880660a.b99988","type":"call","name":"call GENERIC-RESOURCE-API:self-serve-ra-assignment","xml":"<call module='GENERIC-RESOURCE-API' rpc='self-serve-vnf-ra-assignment' mode='sync' >\n","comments":"","outputs":1,"x":1168.4643478393555,"y":1425.8334369659424,"z":"8a7e5e63.38ace","wires":[["359b210b.18df8e"]]},{"id":"8e6933e0.e2d82","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to get RA assignments: ' + $error-message`\" />\n","comments":"","x":1640.1785888671875,"y":1425.4048404693604,"z":"8a7e5e63.38ace","wires":[]},{"id":"b6eee0c6.fa3f9","type":"for","name":"foreach vnf-parameters-data.param[]","xml":"<for index='pidx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param_length`' >\n","comments":"","outputs":1,"x":616.3574600219727,"y":1743.7620840072632,"z":"8a7e5e63.38ace","wires":[["d5a18e29.fba98","89cf7849.12d878"]]},{"id":"46a2b2bf.bd985c","type":"set","name":"set ss.capability.execution-order[]","xml":"<set>\n<parameter name='ss.capability.execution-order[0]' value='generate-name' />\n<parameter name='ss.capability.execution-order[1]' value='alts-entitlement-assign' />\n<parameter name='ss.capability.execution-order[2]' value='alts-license-assign' />\n<parameter name='ss.capability.execution-order[3]' value='vlan-tag-assign' />\n<parameter name='ss.capability.execution-order[4]' value='mS-vlan-tag-assign' />\n<parameter name='ss.capability.execution-order[5]' value='eipam-ip-assign' />\n<parameter name='ss.capability.execution-order[6]' value='eipam-create-pool\"' />\n<parameter name='ss.capability.execution-order[7]' value='mac-address-assign' />\n<parameter name='ss.capability.execution-order[8]' value='mS-mac-address-assign' />\n<parameter name='ss.capability.execution-order[9]' value='create-vpe-pool' />\n<parameter name='ss.capability.execution-order[10]' value='unresolved-composite-data' />\n<parameter name='ss.capability.execution-order[11]' value='aai-vnf-put' />\n<parameter name='ss.capability.execution-order_length' value='12' />\n","comments":"","x":365.02384185791016,"y":1214.7501401901245,"z":"8a7e5e63.38ace","wires":[]},{"id":"f1a735bc.46ec68","type":"for","name":"foreach capability[]","xml":"<for index='cidx' start='0' end='`$ss.capability.execution-order_length`' >\n","comments":"","outputs":1,"x":320.4286880493164,"y":1483.8691005706787,"z":"8a7e5e63.38ace","wires":[["2287face.851d46","253d7cdf.e1c2d4","b6eee0c6.fa3f9","cef332f9.8255"]]},{"id":"89cf7849.12d878","type":"switchNode","name":"switch capability-name","xml":"<switch test='`$ss.capability-name == $tmp.param.capability-name`'>\n","comments":"","outputs":1,"x":920.7502822875977,"y":1789.4048767089844,"z":"8a7e5e63.38ace","wires":[["3ccce09d.0b123"]]},{"id":"3ccce09d.0b123","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1184.2502822875977,"y":1789.6548767089844,"z":"8a7e5e63.38ace","wires":[["420a949e.3280fc"]]},{"id":"359b210b.18df8e","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1486.0356941223145,"y":1425.2620306015015,"z":"8a7e5e63.38ace","wires":[["8e6933e0.e2d82"]]},{"id":"2287face.851d46","type":"set","name":"set ss.capability-name","xml":"<set>\n<parameter name='ss.capability-name' value='`$ss.capability.execution-order[$cidx]`' />\n<!--\nss.capability.execution-order[]\n-->","comments":"","x":576.7857437133789,"y":1483.8215522766113,"z":"8a7e5e63.38ace","wires":[]},{"id":"d5a18e29.fba98","type":"set","name":"tmp.param.capability-name","xml":"<set>\n<parameter name='tmp.param.capability-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.capability-name`' />\n","comments":"","x":932.107307434082,"y":1744.0120868682861,"z":"8a7e5e63.38ace","wires":[]},{"id":"253d7cdf.e1c2d4","type":"set","name":"set ss.capability.action = assign","xml":"<set>\n<parameter name='ss.capability-action' value='assign' />\n","comments":"","x":605.499885559082,"y":1530.738136291504,"z":"8a7e5e63.38ace","wires":[]},{"id":"cef332f9.8255","type":"set","name":"set capability-dg with 'self-serve-' + capability-name","xml":"<set>\n<parameter name='ss.capability-dg' value=\"`'self-serve-' + $ss.capability.execution-order[$cidx]`\" />\n","comments":"","x":668.0119781494141,"y":1584.2143802642822,"z":"8a7e5e63.38ace","wires":[]},{"id":"338f391a.b76546","type":"set","name":"set sdnc-generated-cloud-resources = true","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.sdnc-generated-cloud-resources' value='true' />\n","comments":"","x":393.9881362915039,"y":1268.5001487731934,"z":"8a7e5e63.38ace","wires":[]},{"id":"174083a3.4d324c","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":650.428539276123,"y":549.2143030166626,"z":"8a7e5e63.38ace","wires":[["e662c249.6a2c4","9cfd2a9c.3fe9f8","3aa296df.78ceaa","3a6e2fc8.07043","f070b71.a554c48","f5b48997.d8b5d8","48ec3ac0.6b9294","788c1a7.a052ae4","edb9a97a.acfa98"]]},{"id":"e662c249.6a2c4","type":"set","name":"set vnf-topology data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-id'\n value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-type'\n value='`$vnf-topology-operation-input.vnf-information.vnf-type`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.nf-type'\n value='`$db.vf-model.nf-type`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.nf-role'\n value='`$db.vf-model.nf-role`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.nf-function'\n value='`$db.vf-model.nf-function`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.nf-code'\n value='`$db.vf-model.nf-code`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.tenant'\n value='`$vnf-topology-operation-input.vnf-request-input.tenant`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.aic-cloud-region'\n value='`$vnf-topology-operation-input.vnf-request-input.aic-cloud-region`' />\n \n","comments":"","x":865.9284820556641,"y":550.273811340332,"z":"8a7e5e63.38ace","wires":[]},{"id":"d20a6007.88593","type":"set","name":"set vnf-parameters-data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.'\n  value='vnf-topology-operation-input.vnf-request-input.vnf-input-parameters.' />\n","comments":"","x":1059.4645767211914,"y":1376.1308345794678,"z":"8a7e5e63.38ace","wires":[]},{"id":"3aa296df.78ceaa","type":"set","name":"set vnf-level-oper-status to PendingCreate","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status' value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />\n","comments":"","x":931.2184371948242,"y":1124.254020690918,"z":"8a7e5e63.38ace","wires":[]},{"id":"9cfd2a9c.3fe9f8","type":"set","name":"copy input data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.sdnc-request-header.' \n\tvalue='$vnf-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.request-information.' \n\tvalue='$vnf-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.' \n\tvalue='$vnf-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-information.' \n\tvalue='$vnf-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-request-input.' \n\tvalue='$vnf-topology-operation-input.vnf-request-input.' />\n","comments":"","x":848.5953521728516,"y":1074.0596599578857,"z":"8a7e5e63.38ace","wires":[]},{"id":"4348cdc3.255324","type":"set","name":"set from DB","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-invariant-uuid'\n  value='`$db.vf-model.invariant-uuid`' />\n","comments":"","x":1262.9286727905273,"y":662.6310405731201,"z":"8a7e5e63.38ace","wires":[]},{"id":"3a6e2fc8.07043","type":"switchNode","name":"switch input model-invariant-uuid","xml":"<switch test='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-invariant-uuid`'>\n","comments":"","outputs":1,"x":903.7857475280762,"y":685.4554843902588,"z":"8a7e5e63.38ace","wires":[["927dafb1.8438f","bbe3b5e.f1f7448"]]},{"id":"927dafb1.8438f","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1112.4524192810059,"y":662.5984477996826,"z":"8a7e5e63.38ace","wires":[["4348cdc3.255324"]]},{"id":"bbe3b5e.f1f7448","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1113.881015777588,"y":706.8840389251709,"z":"8a7e5e63.38ace","wires":[["2bc5b555.62d10a"]]},{"id":"2bc5b555.62d10a","type":"set","name":"set from input","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-invariant-uuid'\n  value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-invariant-uuid`' />\n","comments":"","x":1268.1667518615723,"y":706.3126111030579,"z":"8a7e5e63.38ace","wires":[]},{"id":"1339e1db.b46ede","type":"set","name":"set from DB","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-uuid'\n  value='`$db.vf-model.uuid`' />\n","comments":"","x":1263.8809432983398,"y":751.169716835022,"z":"8a7e5e63.38ace","wires":[]},{"id":"f070b71.a554c48","type":"switchNode","name":"switch input model-uuid","xml":"<switch test='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-uuid`'>\n","comments":"","outputs":1,"x":873.4047660827637,"y":773.9942216873169,"z":"8a7e5e63.38ace","wires":[["89d8f336.73fd8","9248202f.22337"]]},{"id":"89d8f336.73fd8","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1113.4047393798828,"y":751.1371536254883,"z":"8a7e5e63.38ace","wires":[["1339e1db.b46ede"]]},{"id":"9248202f.22337","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1114.8333358764648,"y":795.4227447509766,"z":"8a7e5e63.38ace","wires":[["d721fa95.0723e8"]]},{"id":"d721fa95.0723e8","type":"set","name":"set from input","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-uuid'\n  value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-uuid`' />\n","comments":"","x":1269.1190719604492,"y":794.8513169288635,"z":"8a7e5e63.38ace","wires":[]},{"id":"bb1a0ad6.4e3e78","type":"set","name":"set from DB","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-version'\n  value='`$db.vf-model.version`' />\n","comments":"","x":1261.0238761901855,"y":840.0269241333008,"z":"8a7e5e63.38ace","wires":[]},{"id":"f5b48997.d8b5d8","type":"switchNode","name":"switch input model-version","xml":"<switch test='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-version`'>\n","comments":"","outputs":1,"x":884.5476379394531,"y":862.8513689041138,"z":"8a7e5e63.38ace","wires":[["b1acdece.bcc9c","c85877f4.161508"]]},{"id":"b1acdece.bcc9c","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1110.547622680664,"y":839.9943313598633,"z":"8a7e5e63.38ace","wires":[["bb1a0ad6.4e3e78"]]},{"id":"c85877f4.161508","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1111.976219177246,"y":884.2799224853516,"z":"8a7e5e63.38ace","wires":[["58474882.b552b8"]]},{"id":"58474882.b552b8","type":"set","name":"set from input","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-version'\n  value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-version`' />\n","comments":"","x":1266.2619552612305,"y":883.7084946632385,"z":"8a7e5e63.38ace","wires":[]},{"id":"fd2dc0e1.63439","type":"set","name":"set from DB","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-name'\n  value='`$db.vf-model.name`' />\n","comments":"","x":1261.0238761901855,"y":927.1697463989258,"z":"8a7e5e63.38ace","wires":[]},{"id":"48ec3ac0.6b9294","type":"switchNode","name":"switch input model-name","xml":"<switch test='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-name`'>\n","comments":"","outputs":1,"x":879.5476379394531,"y":949.9941911697388,"z":"8a7e5e63.38ace","wires":[["3d5ac1e6.b7948e","3f20406f.baebd"]]},{"id":"3d5ac1e6.b7948e","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":1110.547622680664,"y":927.1371536254883,"z":"8a7e5e63.38ace","wires":[["fd2dc0e1.63439"]]},{"id":"3f20406f.baebd","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1111.976219177246,"y":971.4227447509766,"z":"8a7e5e63.38ace","wires":[["5a1a5651.f76428"]]},{"id":"5a1a5651.f76428","type":"set","name":"set from input","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-name'\n  value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-name`' />\n","comments":"","x":1266.2619552612305,"y":970.8513169288635,"z":"8a7e5e63.38ace","wires":[]},{"id":"788c1a7.a052ae4","type":"set","name":"set vnf-id","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-id'\n   value='`$vnf-topology-operation-input.vnf-information.vnf-id`' />\n","comments":"","x":829.9047088623047,"y":601.7888488769531,"z":"8a7e5e63.38ace","wires":[]},{"id":"edb9a97a.acfa98","type":"set","name":"set model-customization-uuid","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.onap-model-information.model-customization-uuid'\n  value='`$vnf-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid`' />\n","comments":"","x":892.3332252502441,"y":1022.8363952636719,"z":"8a7e5e63.38ace","wires":[]},{"id":"f2eb9a19.492128","type":"switchNode","name":"switch service-data.vnfs.vnf_length","xml":"<switch test='`$service-data.vnfs.vnf_length`'>\n","comments":"","outputs":1,"x":376.58329010009766,"y":236.17850017547607,"z":"8a7e5e63.38ace","wires":[["845220fd.30893","e7dd5883.b310d8","7d6220cf.97437"]]},{"id":"845220fd.30893","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":618.7976760864258,"y":174.73793125152588,"z":"8a7e5e63.38ace","wires":[["b13684ac.3b5ec8"]]},{"id":"2eb2a0b4.7673","type":"set","name":"set vnf-index=0","xml":"<set>\n<parameter name='vnf-index' value='0' />\n","comments":"","x":954.083381652832,"y":174.23800563812256,"z":"8a7e5e63.38ace","wires":[]},{"id":"e7dd5883.b310d8","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":619.976203918457,"y":296.357120513916,"z":"8a7e5e63.38ace","wires":[["85cecc5e.cffa9"]]},{"id":"420a949e.3280fc","type":"switchNode","name":"switch resource-resolution-data.status","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$pidx].resource-resolution-data.status`'>\n","comments":"","outputs":1,"x":455.51221084594727,"y":2046.2222986221313,"z":"8a7e5e63.38ace","wires":[["2f74e598.b4f05a","41b1f8f2.9db618"]]},{"id":"2f74e598.b4f05a","type":"other","name":"PENDING","xml":"<outcome value='PENDING'>\n","comments":"","outputs":1,"x":724.8694267272949,"y":2046.2222547531128,"z":"8a7e5e63.38ace","wires":[["de3056ea.cb97f8"]]},{"id":"41b1f8f2.9db618","type":"other","name":"FAILED","xml":"<outcome value='FAILED'>\n","comments":"","outputs":1,"x":718.4052429199219,"y":2097.1865854263306,"z":"8a7e5e63.38ace","wires":[["de3056ea.cb97f8"]]},{"id":"de3056ea.cb97f8","type":"call","name":"call ss.capability-dg","xml":"<call module='GENERIC-RESOURCE-API' rpc='`$ss.capability-dg`' mode='sync' >\n","comments":"","outputs":1,"x":933.5239753723145,"y":2097.9484367370605,"z":"8a7e5e63.38ace","wires":[["eb5dc4dc.4296f8"]]},{"id":"583a2f89.5053d","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Encountered error from capability: '+ $ss.capability-dg + ', with error: '+ $error-message`\" />\n","comments":"","x":1501.0714149475098,"y":2351.924892425537,"z":"8a7e5e63.38ace","wires":[]},{"id":"eb5dc4dc.4296f8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1118.4164848327637,"y":2097.948497772217,"z":"8a7e5e63.38ace","wires":[["4375345d.fcaa8c"]]},{"id":"4375345d.fcaa8c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1281.690601348877,"y":2097.258038520813,"z":"8a7e5e63.38ace","wires":[["583a2f89.5053d","2c1be433.233fdc","57247a0a.65f024","e7a1b9e.50bf548","4712bf7c.c5565"]]},{"id":"57247a0a.65f024","type":"execute","name":"generate ss-vnf url replace service-instance-id","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.ss-vnf-assignments`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ss-vnf-url\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id`\"/>\n","comments":"","outputs":1,"x":1605.0236930847168,"y":2150.774598121643,"z":"8a7e5e63.38ace","wires":[[]]},{"id":"4712bf7c.c5565","type":"execute","name":"execute RestApiCallNode - PUT vnf","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ss.vnf.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ss-vnf-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ss-vnf\" />\n\n","comments":"","outputs":1,"x":1574.4879875183105,"y":2253.6318197250366,"z":"8a7e5e63.38ace","wires":[["513e18d8.e7d3b8","8a1cc506.26d608"]]},{"id":"513e18d8.e7d3b8","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1849.0816535949707,"y":2307.62997341156,"z":"8a7e5e63.38ace","wires":[["71982f5.9f351d"]]},{"id":"8a1cc506.26d608","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1841.5102882385254,"y":2254.1299934387207,"z":"8a7e5e63.38ace","wires":[["71982f5.9f351d"]]},{"id":"2c1be433.233fdc","type":"set","name":"set vf data for restapi-call-node","xml":"<set>\n<parameter name='vf.vnf-id'\n    value='`$service-data.vnfs.vnf[$vnf-index].vnf-id`' />\n<parameter name='vf.vnf-data.sdnc-request-header.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.sdnc-request-header.`' />\n<parameter name='vf.vnf-data.request-information.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.request-information.`' />\n<parameter name='vf.vnf-data.service-information.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.`' />\n<parameter name='vf.vnf-data.vnf-information.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-information.`' />\n<parameter name='vf.vnf-data.vnf-topology.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.`' />\n<parameter name='vf.vnf-data.vnf-level-oper-status.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.`' />\n<parameter name='vf.vnf-data.vnf-request-input.vnf-input-parameters.'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-request-input.vnf-input-parameters.`' />\n<parameter name='vf.vnf-data.vnf-request-input.request-version'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-request-input.request-version`' />\n<parameter name='vf.vnf-data.vnf-request-input.vnf-name'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-request-input.vnf-name`' />\n<parameter name='vf.vnf-data.vnf-request-input.tenant'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-request-input.tenant`' />\n<parameter name='vf.vnf-data.vnf-request-input.aic-cloud-region'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-request-input.aic-cloud-region`' />\n<parameter name='vf.vnf-data.vnf-request-input.aic-clli'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-request-input.aic-clli`' />","comments":"","x":1557.4759941101074,"y":2096.869110107422,"z":"8a7e5e63.38ace","wires":[]},{"id":"e7a1b9e.50bf548","type":"execute","name":"generate ss-vnf url - replace vnf-id","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.ss-vnf-url`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ss-vnf-url\"/>\n    <parameter name=\"target\" value=\"{vnf-id}\"/>\n    <parameter name=\"replacement\" value=\"`$service-data.vnfs.vnf[$vnf-index].vnf-id`\"/>\n","comments":"","outputs":1,"x":1569.309398651123,"y":2201.583366394043,"z":"8a7e5e63.38ace","wires":[[]]},{"id":"58752160.8f2f","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss-vnf-assign.log' />\n","comments":"","outputs":1,"x":320.85311126708984,"y":2546.099449157715,"z":"8a7e5e63.38ace","wires":[[]]},{"id":"c60edef1.83244","type":"set","name":"set ss.capability-type = vnf","xml":"<set>\n<parameter name='ss.capability-type' value='vnf' />\n","comments":"","x":344.89292907714844,"y":1319.2857942581177,"z":"8a7e5e63.38ace","wires":[]},{"id":"ef587707.052838","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":818.0356597900391,"y":1376.642903327942,"z":"8a7e5e63.38ace","wires":[["d20a6007.88593","7880660a.b99988"]]},{"id":"4503302f.14ead","type":"for","name":"for each existing VNF","xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n","comments":"","outputs":1,"x":967.0357284545898,"y":296.53579807281494,"z":"8a7e5e63.38ace","wires":[["716305cf.9234dc"]]},{"id":"716305cf.9234dc","type":"switchNode","name":"switch vnf-id: input vs service-data","xml":"<switch test='`$vnf-topology-operation-input.vnf-information.vnf-id == $service-data.vnfs.vnf[$idx].vnf-id`'>\n","comments":"","outputs":1,"x":1244.321434020996,"y":296.60728549957275,"z":"8a7e5e63.38ace","wires":[["be482925.70caa8"]]},{"id":"be482925.70caa8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1467.1072006225586,"y":296.1787576675415,"z":"8a7e5e63.38ace","wires":[["51a84602.114aa8"]]},{"id":"51a84602.114aa8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1599.5714530944824,"y":296.21431827545166,"z":"8a7e5e63.38ace","wires":[["eb8243d9.c7ead","eb4574cb.974e98","78f6433b.71dbec"]]},{"id":"eb8243d9.c7ead","type":"break","name":"break","xml":"<break>\n","comments":"","x":1767.464241027832,"y":382.2142963409424,"z":"8a7e5e63.38ace","wires":[]},{"id":"69a01421.b0d1fc","type":"set","name":"set new vnf_length = 1","xml":"<set>\n<parameter name='service-data.vnfs.vnf_length' value='1' />\n","comments":"","x":977.642951965332,"y":219.57148838043213,"z":"8a7e5e63.38ace","wires":[]},{"id":"eb4574cb.974e98","type":"set","name":"set vnf-index = idx","xml":"<set>\n<parameter name='vnf-index' value='`$idx`' />\n","comments":"","x":1798.0357971191406,"y":338.9999752044678,"z":"8a7e5e63.38ace","wires":[]},{"id":"c602370a.7ee398","type":"set","name":"set is-new-vnf = true","xml":"<set>\n<parameter name='is-new-vnf' value='true' />\n","comments":"","x":330.8929214477539,"y":156.07144355773926,"z":"8a7e5e63.38ace","wires":[]},{"id":"78f6433b.71dbec","type":"set","name":"set is-new-vnf = false","xml":"<set>\n<parameter name='is-new-vnf' value='false' />\n","comments":"","x":1806.0714836120605,"y":295.7143201828003,"z":"8a7e5e63.38ace","wires":[]},{"id":"85cecc5e.cffa9","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":757.2500228881836,"y":296.0000162124634,"z":"8a7e5e63.38ace","wires":[["4503302f.14ead","73083910.f9af68"]]},{"id":"73083910.f9af68","type":"switchNode","name":"switch is-new-vnf","xml":"<switch test='`$is-new-vnf`'>\n","comments":"","outputs":1,"x":954.7500152587891,"y":382.5714178085327,"z":"8a7e5e63.38ace","wires":[["4a60d344.c63a9c"]]},{"id":"4a60d344.c63a9c","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1134.6071701049805,"y":382.14286518096924,"z":"8a7e5e63.38ace","wires":[["dd30cb4d.6f3e78"]]},{"id":"b13684ac.3b5ec8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":772.7499923706055,"y":174.74999713897705,"z":"8a7e5e63.38ace","wires":[["2eb2a0b4.7673","69a01421.b0d1fc"]]},{"id":"7d6220cf.97437","type":"other","name":"0","xml":"<outcome value='0'>\n","comments":"","outputs":1,"x":617.2499923706055,"y":234.49999904632568,"z":"8a7e5e63.38ace","wires":[["b13684ac.3b5ec8"]]},{"id":"7402f8af.8166a8","type":"switchNode","name":"switch is-new-vnf","xml":"<switch test='`$is-new-vnf`'>\n","comments":"","outputs":1,"x":318.75000381469727,"y":550.0000057220459,"z":"8a7e5e63.38ace","wires":[["fb8ba40c.acc858"]]},{"id":"fb8ba40c.acc858","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":498.6071586608887,"y":549.5714530944824,"z":"8a7e5e63.38ace","wires":[["174083a3.4d324c"]]},{"id":"3159769d.7109fa","type":"set","name":"set new vnf_length++","xml":"<set>\n<parameter name='service-data.vnfs.vnf_length' value='`$service-data.vnfs.vnf_length + 1`' />\n","comments":"","x":1482.5,"y":428.75,"z":"8a7e5e63.38ace","wires":[]},{"id":"dd30cb4d.6f3e78","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1280.4999771118164,"y":381.74996185302734,"z":"8a7e5e63.38ace","wires":[["3159769d.7109fa","3ffdf6d3.2240ca"]]},{"id":"3ffdf6d3.2240ca","type":"set","name":"set vnf-index = vnf_length","xml":"<set>\n<parameter name='vnf-index' value='`$service-data.vnfs.vnf_length`' />\n","comments":"","x":1491.9999809265137,"y":381.24996185302734,"z":"8a7e5e63.38ace","wires":[]},{"id":"71982f5.9f351d","type":"set","name":"set error-message","xml":"<set>\n<parameter name=\"error-message\" value=\"Failed to persist self-serve vnf assignments during assign in MD-SAL\" />","comments":"","x":2061.428611755371,"y":2253,"z":"8a7e5e63.38ace","wires":[]}]