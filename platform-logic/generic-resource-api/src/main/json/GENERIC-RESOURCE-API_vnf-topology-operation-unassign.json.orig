[
    {
        "id": "96001a8c.4d0748",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 101.66666412353516,
        "y": 81.66666412353516,
        "z": "ff974913.290918",
        "wires": [
            [
                "7c64b7f3.ff25c8"
            ]
        ]
    },
    {
        "id": "7c64b7f3.ff25c8",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 176.9523696899414,
        "y": 121.90477561950684,
        "z": "ff974913.290918",
        "wires": [
            [
                "e77f5801.4ec068"
            ]
        ]
    },
    {
        "id": "e77f5801.4ec068",
        "type": "method",
        "name": "method vnf-topology-operation-unassign",
        "xml": "<method rpc='vnf-topology-operation-unassign' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 200.0952911376953,
        "y": 161.66666412353516,
        "z": "ff974913.290918",
        "wires": [
            [
                "3346143.6ec13ec"
            ]
        ]
    },
    {
        "id": "97471b5d.533f18",
        "type": "comment",
        "name": "vnf-topology-operation-unassign",
        "info": "",
        "comments": "",
        "x": 496.0115203857422,
        "y": 29.253007888793945,
        "z": "ff974913.290918",
        "wires": []
    },
    {
        "id": "7ffc5961.3c2bf8",
        "type": "switchNode",
        "name": "switch request-action",
        "xml": "<switch test='`$vnf-topology-operation-input.request-information.request-action`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 505.1904754638672,
        "y": 260.52380180358887,
        "z": "ff974913.290918",
        "wires": [
            [
                "88a6a6b8.f339b8",
                "bae1be9d.b2504"
            ]
        ]
    },
    {
        "id": "88a6a6b8.f339b8",
        "type": "outcome",
        "name": "DeleteVnfInstance",
        "xml": "<outcome value='DeleteVnfInstance'>\n",
        "comments": "",
        "outputs": 1,
        "x": 758.9047698974609,
        "y": 237.66668319702148,
        "z": "ff974913.290918",
        "wires": [
            [
                "69c905eb.131a1c"
            ]
        ]
    },
    {
        "id": "bae1be9d.b2504",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 720.9047355651855,
        "y": 283.3810110092163,
        "z": "ff974913.290918",
        "wires": [
            [
                "3461fef6.36d722"
            ]
        ]
    },
    {
        "id": "69c905eb.131a1c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 943.7618980407715,
        "y": 237.6667127609253,
        "z": "ff974913.290918",
        "wires": [
            []
        ]
    },
    {
        "id": "3461fef6.36d722",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'deactivate' then request-action must be 'DeleteVnfInstance'\" />\n",
        "comments": "",
        "x": 960.9047431945801,
        "y": 283.3809690475464,
        "z": "ff974913.290918",
        "wires": []
    },
    {
        "id": "3346143.6ec13ec",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 180,
        "y": 554.9999980926514,
        "z": "ff974913.290918",
        "wires": [
            [
                "7ffc5961.3c2bf8",
                "c3ee1f54.e9c49",
                "6f08ad34.331214",
                "f989a9a8.a235a8",
                "51b5c082.75d5f",
                "6b1e8937.811c58",
                "796a94e1.89abac",
                "9a9f9c4c.fbd22"
            ]
        ]
    },
    {
        "id": "c3ee1f54.e9c49",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 491.6666488647461,
        "y": 330.0000276565552,
        "z": "ff974913.290918",
        "wires": [
            [
                "14653468.3f5d1c"
            ]
        ]
    },
    {
        "id": "14653468.3f5d1c",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 678.3333282470703,
        "y": 329.33332538604736,
        "z": "ff974913.290918",
        "wires": [
            [
                "15374e8a.9b3331"
            ]
        ]
    },
    {
        "id": "15374e8a.9b3331",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs in MD-SAL\" />\n",
        "comments": "",
        "x": 859.9999542236328,
        "y": 329.33332538604736,
        "z": "ff974913.290918",
        "wires": []
    },
    {
        "id": "6b1e8937.811c58",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 473.3333282470703,
        "y": 378.333345413208,
        "z": "ff974913.290918",
        "wires": [
            [
                "ac39155f.e69998"
            ]
        ]
    },
    {
        "id": "ac39155f.e69998",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 728.3334159851074,
        "y": 377.00001335144043,
        "z": "ff974913.290918",
        "wires": [
            [
                "2a9affc9.05758"
            ]
        ]
    },
    {
        "id": "2a9affc9.05758",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 966.6667022705078,
        "y": 375.99999141693115,
        "z": "ff974913.290918",
        "wires": [
            [
                "f089091c.aad928"
            ]
        ]
    },
    {
        "id": "f089091c.aad928",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1134.9998970031738,
        "y": 376.00001335144043,
        "z": "ff974913.290918",
        "wires": []
    },
    {
        "id": "796a94e1.89abac",
        "type": "switchNode",
        "name": "switch vnf-index",
        "xml": "<switch test='`$vnf-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 484.99999237060547,
        "y": 425.00001525878906,
        "z": "ff974913.290918",
        "wires": [
            [
                "7c43e234.9e600c"
            ]
        ]
    },
    {
        "id": "7c43e234.9e600c",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 666.6666107177734,
        "y": 424.333345413208,
        "z": "ff974913.290918",
        "wires": [
            [
                "54a44960.3d1bc8"
            ]
        ]
    },
    {
        "id": "54a44960.3d1bc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"'Could not find VNF ' + $vnf-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'\" />\n",
        "comments": "",
        "x": 833.3332977294922,
        "y": 423.9999713897705,
        "z": "ff974913.290918",
        "wires": []
    },
    {
        "id": "6f08ad34.331214",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 476.3333168029785,
        "y": 843.3332319259644,
        "z": "ff974913.290918",
        "wires": []
    },
    {
        "id": "28425fad.bcfa3",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='`$vnf-index + 1`' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 999.1126251220703,
        "y": 683.3332605361938,
        "z": "ff974913.290918",
        "wires": [
            [
                "95eae07b.ee605"
            ]
        ]
    },
    {
        "id": "fcd23488.435248",
        "type": "comment",
        "name": "Remove VNF from service data",
        "info": "",
        "comments": "",
        "x": 441.2713928222656,
        "y": 641.9049129486084,
        "z": "ff974913.290918",
        "wires": []
    },
    {
        "id": "95eae07b.ee605",
        "type": "set",
        "name": "move vnf to remove one",
        "xml": "<set>\n\t<parameter name=\"$tmpidx\" value=\"`$idx - 1`\"/>\n\t<parameter name=\"service-data.vnfs.vnf[$tmpidx].\" value=\"$service-data.vnfs.vnf[$idx].\" />\n\t\n",
        "comments": "",
        "x": 1232.703758239746,
        "y": 682.3572120666504,
        "z": "ff974913.290918",
        "wires": []
    },
    {
        "id": "51b5c082.75d5f",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 485.37048721313477,
        "y": 684.9128894805908,
        "z": "ff974913.290918",
        "wires": [
            [
                "7b55138b.dcab3c",
                "75e73554.80932c"
            ]
        ]
    },
    {
        "id": "7b55138b.dcab3c",
        "type": "outcome",
        "name": "1",
        "xml": "<outcome value='1'>\n",
        "comments": "",
        "outputs": 1,
        "x": 662.3705291748047,
        "y": 645.5794763565063,
        "z": "ff974913.290918",
        "wires": [
            [
                "4cc25dc3.e0aa74"
            ]
        ]
    },
    {
        "id": "4cc25dc3.e0aa74",
        "type": "set",
        "name": "Remove vnfs",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.\" value=\"\"/>\n\n",
        "comments": "",
        "x": 826.0370254516602,
        "y": 645.5795755386353,
        "z": "ff974913.290918",
        "wires": []
    },
    {
        "id": "75e73554.80932c",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 661.0372734069824,
        "y": 728.9127492904663,
        "z": "ff974913.290918",
        "wires": [
            [
                "ac4d3a04.d29a88"
            ]
        ]
    },
    {
        "id": "9a214120.4a1eb",
        "type": "set",
        "name": "set new vnf length",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf_length\" value=\"`$service-data.vnfs.vnf_length - 1`\"/>\n\n\t\n",
        "comments": "",
        "x": 1018.6667137145996,
        "y": 773.9128341674805,
        "z": "ff974913.290918",
        "wires": []
    },
    {
        "id": "4989e0b1.ae7b3",
        "type": "set",
        "name": "Remove the last vnf in the list",
        "xml": "<set>\n\t<parameter name=\"service-data.vnfs.vnf[$service-data.vnfs.vnf_length-1].\" value=\"\"/>\n\n",
        "comments": "",
        "x": 1054.3703689575195,
        "y": 729.0238552093506,
        "z": "ff974913.290918",
        "wires": []
    },
    {
        "id": "ac4d3a04.d29a88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 829.7037620544434,
        "y": 729.5793962478638,
        "z": "ff974913.290918",
        "wires": [
            [
                "28425fad.bcfa3",
                "4989e0b1.ae7b3",
                "9a214120.4a1eb"
            ]
        ]
    },
    {
        "id": "9a9f9c4c.fbd22",
        "type": "switchNode",
        "name": "switch current vnf-level-oper-status == Created",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status == 'Created'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 584.3333053588867,
        "y": 470.6666851043701,
        "z": "ff974913.290918",
        "wires": [
            [
                "11283b53.5e5e25"
            ]
        ]
    },
    {
        "id": "11283b53.5e5e25",
        "type": "outcomeFalse",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 889.0000228881836,
        "y": 470.33332443237305,
        "z": "ff974913.290918",
        "wires": [
            [
                "54f5d0c9.b7a0e"
            ]
        ]
    },
    {
        "id": "54f5d0c9.b7a0e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cannot delete a VNF in a Created state\" />\n",
        "comments": "",
        "x": 1047.3332977294922,
        "y": 469.6666488647461,
        "z": "ff974913.290918",
        "wires": []
    },
    {
        "id": "f989a9a8.a235a8",
        "type": "switchNode",
        "name": "switch current vf-module_length",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 534.6666488647461,
        "y": 556.6666507720947,
        "z": "ff974913.290918",
        "wires": [
            [
                "5339c0a3.6e70e",
                "4bffbedb.077b6",
                "58060ac1.258e84"
            ]
        ]
    },
    {
        "id": "5339c0a3.6e70e",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 763.3332901000977,
        "y": 513.3332920074463,
        "z": "ff974913.290918",
        "wires": [
            [
                "8ae2c8.5df55d38"
            ]
        ]
    },
    {
        "id": "4bffbedb.077b6",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 761.9047012329102,
        "y": 554.7619495391846,
        "z": "ff974913.290918",
        "wires": [
            [
                "8ae2c8.5df55d38"
            ]
        ]
    },
    {
        "id": "8ae2c8.5df55d38",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 910.4762153625488,
        "y": 534.7619504928589,
        "z": "ff974913.290918",
        "wires": [
            []
        ]
    },
    {
        "id": "58060ac1.258e84",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 761.9047508239746,
        "y": 596.1905374526978,
        "z": "ff974913.290918",
        "wires": [
            [
                "90982233.8ef03"
            ]
        ]
    },
    {
        "id": "90982233.8ef03",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cannot delete the VNF because there are VFs defined\" />\n",
        "comments": "",
        "x": 929.0476455688477,
        "y": 595.7619256973267,
        "z": "ff974913.290918",
        "wires": []
    }
]
