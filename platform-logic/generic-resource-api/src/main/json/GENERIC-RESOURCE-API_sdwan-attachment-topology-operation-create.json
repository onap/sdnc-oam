[
  {
    "id": "44d87731.3a3c18",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 95.0000228881836,
    "y": 25,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "6fd2c371.0f81ec"
      ]
    ]
  },
  {
    "id": "6fd2c371.0f81ec",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 278.00002670288086,
    "y": 99.00001811981201,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "45f888b.a092e78"
      ]
    ]
  },
  {
    "id": "45f888b.a092e78",
    "type": "method",
    "name": "sdwan-attachment-topology-operation-create",
    "xml": "<method rpc='sdwan-attachment-topology-operation-create' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 266.0001449584961,
    "y": 187.00000095367432,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "13d40907.770c77"
      ]
    ]
  },
  {
    "id": "13d40907.770c77",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 186.0000762939453,
    "y": 936.0002489089966,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "7bc4c8b1.1d9f68",
        "9cf88721.96ba18",
        "f2e620b.7ad45e",
        "5cd475b4.e29f6c",
        "e3b4ab98.b00c28",
        "31146b5a.f96304",
        "337b8132.75507e",
        "33eb09e.c2f17f6",
        "d6792827.57dcf8",
        "145b2990.9f1986",
        "e23f7239.d2c",
        "c7cc4539.500a68",
        "eae0ae19.16041",
        "d8cd962c.832e98",
        "81f242e0.4cfb8",
        "a785b9fe.8e2b78",
        "e1b91be4.687fd8",
        "6d2b2eaf.a08e",
        "55176b7b.204274",
        "e7eec3f2.e0455",
        "a8dc15.338363e8",
        "3040fa3e.5fdf76",
        "48507d03.0cfd24"
      ]
    ]
  },
  {
    "id": "b682cccd.903f2",
    "type": "comment",
    "name": "Set allotted resource id if not sent by SO",
    "info": "",
    "comments": "",
    "x": 670.076774597168,
    "y": 96.43391990661621,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "7bc4c8b1.1d9f68",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test='`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 616.0000534057617,
    "y": 151.99999332427979,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "576ebd26.f091e4",
        "24a61a74.3f6846"
      ]
    ]
  },
  {
    "id": "576ebd26.f091e4",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>",
    "comments": "",
    "outputs": 1,
    "x": 814.0001411437988,
    "y": 121.99998188018799,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "3df307a8.733fb8"
      ]
    ]
  },
  {
    "id": "24a61a74.3f6846",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 813.0000495910645,
    "y": 158.99999237060547,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "318df0c4.63f14"
      ]
    ]
  },
  {
    "id": "318df0c4.63f14",
    "type": "set",
    "name": "set tmp.ar.allotted-resource-id",
    "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n",
    "comments": "",
    "x": 1011.0000381469727,
    "y": 156.0000114440918,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "9cf88721.96ba18",
    "type": "set",
    "name": "set tmp.ar.self-link",
    "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:connection-attachment-allotted-resources/connection-attachment-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/connection-attachment-topology/'` \" />\n\n",
    "comments": "",
    "x": 583.9999771118164,
    "y": 373.0001001358032,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "f2e620b.7ad45e",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 584.2618942260742,
    "y": 454.6667814254761,
    "z": "9c3e2040.51e8d",
    "wires": [
      []
    ]
  },
  {
    "id": "5cd475b4.e29f6c",
    "type": "execute",
    "name": "generate allotted-resource tmp.ar-url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 637.2619552612305,
    "y": 541.6666994094849,
    "z": "9c3e2040.51e8d",
    "wires": [
      []
    ]
  },
  {
    "id": "3df307a8.733fb8",
    "type": "execute",
    "name": "execute tmp.ar.allotted-resource-id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"tmp.ar.allotted-resource-id\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1029.0001182556152,
    "y": 122.99998760223389,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "4abca60e.39e308"
      ]
    ]
  },
  {
    "id": "4abca60e.39e308",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1247.0001602172852,
    "y": 122.99995136260986,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "99c3fe86.a7edc"
      ]
    ]
  },
  {
    "id": "99c3fe86.a7edc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while generation allotted resource ID\" />\n",
    "comments": "",
    "x": 1413.000114440918,
    "y": 122.99996566772461,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "4f647ff8.bc9ba",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1143.0002536773682,
    "y": 613.7778720855713,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "926c698b.647238"
      ]
    ]
  },
  {
    "id": "b4b47003.957fd",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error: Existing connection attachment allotted resource\" />\n    \n",
    "comments": "",
    "x": 1876.518632888794,
    "y": 614.8439435958862,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "8e25385a.b2e448",
    "type": "comment",
    "name": "Check for non existence of allotted resource",
    "info": "",
    "comments": "",
    "x": 999.0001754760742,
    "y": 547.7779388427734,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "164faa8f.422405",
    "type": "for",
    "name": "for cidx..service-data.consumed-allotted-resources.consumed-allotted-resource[]",
    "xml": "<for index='cidx' start='0' end='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1519.6667213439941,
    "y": 758.0000512599945,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "82bdbd96.1528d"
      ]
    ]
  },
  {
    "id": "31146b5a.f96304",
    "type": "switchNode",
    "name": "switch service-data.consumed-allotted-resources_length",
    "xml": "<switch test='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 701.6660461425781,
    "y": 734.7140836715698,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "89e1b0e1.b280a",
        "42609e0d.0b1fc"
      ]
    ]
  },
  {
    "id": "89e1b0e1.b280a",
    "type": "other",
    "name": "outcome Null",
    "xml": "<outcome value=''>\n",
    "comments": "",
    "outputs": 1,
    "x": 1005.8089447021484,
    "y": 703.5715208053589,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "d2a66fcc.9de12"
      ]
    ]
  },
  {
    "id": "42609e0d.0b1fc",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 982.8089942932129,
    "y": 764.571475982666,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "2a82891c.586b96"
      ]
    ]
  },
  {
    "id": "2a82891c.586b96",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1142.9360847473145,
    "y": 762.697452545166,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "164faa8f.422405",
        "6d36a6c.f47fa58",
        "eedafcbb.09c83"
      ]
    ]
  },
  {
    "id": "d2a66fcc.9de12",
    "type": "set",
    "name": "set cidx",
    "xml": "<set>\n<parameter name='tmp.cidx' value=\"`0`\" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource_length' value=\"1\" />\n\n\n",
    "comments": "",
    "x": 1155.665927886963,
    "y": 701.2855710983276,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "337b8132.75507e",
    "type": "set",
    "name": "set consumed allotted resources",
    "xml": "<set>\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource[$tmp.cidx].allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource[$tmp.cidx].allotted-resource-type' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-type` \" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource[$tmp.cidx].allotted-resource-pointer' value=\"`$tmp.ar.self-link` \" />\n<parameter name='service-data.consumed-allotted-resources.consumed-allotted-resource_length' value='`$tmp.cidx + 1`' />\n\n",
    "comments": "",
    "x": 630.5233383178711,
    "y": 838.2856483459473,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "6d36a6c.f47fa58",
    "type": "switchNode",
    "name": "switch tmp.found-cidx",
    "xml": "<switch test='`$tmp.found-cidx`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1332.0511322021484,
    "y": 794.708975315094,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "23de8d9f.e2dd32"
      ]
    ]
  },
  {
    "id": "23de8d9f.e2dd32",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1522.0510864257812,
    "y": 794.7089123725891,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "64af2897.2703a8"
      ]
    ]
  },
  {
    "id": "64af2897.2703a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1688.0510864257812,
    "y": 794.7089123725891,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "923cdb1e.68a888"
      ]
    ]
  },
  {
    "id": "82bdbd96.1528d",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$service-data.consumed-allotted-resources.consumed-allotted-resource[$cidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1936.7783508300781,
    "y": 755.000078201294,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "87fbbf54.c1a56"
      ]
    ]
  },
  {
    "id": "87fbbf54.c1a56",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2118.5879249572754,
    "y": 755.4645252227783,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "98cf5592.16f948"
      ]
    ]
  },
  {
    "id": "923cdb1e.68a888",
    "type": "set",
    "name": "set tmp.cidx",
    "xml": "<set>\n<parameter name='tmp.cidx' value='`$service-data.consumed-allotted-resources.consumed-allotted-resource_length`' />\n",
    "comments": "",
    "x": 1849.9244689941406,
    "y": 794.2206134796143,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "b1e5bcf3.c8fd2",
    "type": "comment",
    "name": "Add to consumed service consumed-allotted-resources in mdsal",
    "info": "Prepare data and add to service-data",
    "comments": "",
    "x": 722.6672592163086,
    "y": 665.0000476837158,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "7a7522d7.8a362c",
    "type": "comment",
    "name": "This set resource will be added to MDSAL by provider code",
    "info": "Below we add to service-data.consumed-allotted-resource at last index",
    "comments": "",
    "x": 710.0001754760742,
    "y": 803.7781400680542,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "48507d03.0cfd24",
    "type": "update",
    "name": "save AAI allotted-resource",
    "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $connection-attachment-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $connection-attachment-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n    <parameter name=\"id\" value=\"`$tmp.ar.allotted-resource-id`\" />\n\t<parameter name=\"role\" value=\"`$prop.connection-attachment.role`\" />\t\n    <parameter name=\"vpn-name\" value=\"`$prop.connection-attachment.sdwanVpnName`\" />\n\t<parameter name=\"selflink\" value=\"`$tmp.ar.self-link`\" />\n\t<!--parameter name=\"model-invariant-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-invariant-uuid`\" />\n\t<parameter name=\"model-version-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-uuid`\" /-->\n\t<parameter name=\"operational-status\" value=\"Created\" />\n",
    "comments": "",
    "outputs": 1,
    "x": 620.6908798217773,
    "y": 1763.531904220581,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "d0cb3ffb.0f22",
        "8cbfcb17.5674d8"
      ]
    ]
  },
  {
    "id": "d0cb3ffb.0f22",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 815.4528160095215,
    "y": 1754.4845056533813,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "551edb9d.a56dc4"
      ]
    ]
  },
  {
    "id": "551edb9d.a56dc4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments": "",
    "x": 981.9766960144043,
    "y": 1766.1035766601562,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "8cbfcb17.5674d8",
    "type": "failure",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 822.5481033325195,
    "y": 1787.246473312378,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "551edb9d.a56dc4"
      ]
    ]
  },
  {
    "id": "7964b486.89bffc",
    "type": "comment",
    "name": "Save Resource to AAI",
    "info": "",
    "comments": "",
    "x": 654.5005569458008,
    "y": 1731.833875656128,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "24a443b3.cdd5dc",
    "type": "comment",
    "name": "Set allotted resource type if not sent by SO",
    "info": "",
    "comments": "",
    "x": 656.0000228881836,
    "y": 205.00000095367432,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "e3b4ab98.b00c28",
    "type": "switchNode",
    "name": "switch allotted-resource-type",
    "xml": "<switch test='`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-type`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 617.9233322143555,
    "y": 245.5660572052002,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "7cb47d8a.56e0d4",
        "161c8b14.4822c5"
      ]
    ]
  },
  {
    "id": "7cb47d8a.56e0d4",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>",
    "comments": "",
    "outputs": 1,
    "x": 820.9234848022461,
    "y": 230.56606006622314,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "b02b0441.1428c8"
      ]
    ]
  },
  {
    "id": "161c8b14.4822c5",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 813.9233131408691,
    "y": 270.5660800933838,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "40a66352.bcb05c"
      ]
    ]
  },
  {
    "id": "40a66352.bcb05c",
    "type": "set",
    "name": "set tmp.ar.allotted-resource-type",
    "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-type' value='`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-type`' />\n",
    "comments": "",
    "x": 1045.92329788208,
    "y": 270.56608486175537,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "8a266541.a12688",
    "type": "comment",
    "name": "For storage in AAI connection-attachment-topology",
    "info": "",
    "comments": "",
    "x": 680.9999847412109,
    "y": 340.0000009536743,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "755897d2.b185f8",
    "type": "comment",
    "name": "Obtain different URL, template location etc",
    "info": "For saving resource information to MDSAL & for AAI",
    "comments": "",
    "x": 655.9999694824219,
    "y": 421.8889102935791,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "6815830a.cf38ec",
    "type": "comment",
    "name": "Used for Put AR by id to MDSAL",
    "info": "",
    "comments": "",
    "x": 622.0000534057617,
    "y": 510.8889274597168,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "6533f8ad.391638",
    "type": "comment",
    "name": "Obtain the last index in services",
    "info": "ServiceData is added by Provider code",
    "comments": "",
    "x": 623.4444961547852,
    "y": 696.8888721466064,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "55176b7b.204274",
    "type": "set",
    "name": "set output to api handler",
    "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='connection-attachment-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $connection-attachment-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments": "",
    "x": 606.2681655883789,
    "y": 1670.359203338623,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "e7eec3f2.e0455",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 574.6812515258789,
    "y": 1832.9749298095703,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "b02b0441.1428c8",
    "type": "set",
    "name": "set tmp.ar.allotted-resource-type",
    "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-type' value=\"SDWANAttachmentInstance\" />\n",
    "comments": "",
    "x": 1060.000171661377,
    "y": 230.99998664855957,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "6d2b2eaf.a08e",
    "type": "execute",
    "name": "execute RestApiCallNode - PUT AR by id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.sdwan-attachment.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 657.0002975463867,
    "y": 1604.00013256073,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "2544cf2e.7797d",
        "d0176f37.1631f",
        "3214e8f5.c864c8"
      ]
    ]
  },
  {
    "id": "2544cf2e.7797d",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 906.6416511535645,
    "y": 1642.3314628601074,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "93bb925b.d10a9"
      ]
    ]
  },
  {
    "id": "d0176f37.1631f",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 897.6417007446289,
    "y": 1610.831488609314,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "93bb925b.d10a9"
      ]
    ]
  },
  {
    "id": "3214e8f5.c864c8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 901.3917388916016,
    "y": 1581.1885934844613,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "92a0c9d6.d7b8b8"
      ]
    ]
  },
  {
    "id": "93bb925b.d10a9",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
    "comments": "",
    "x": 1067.3917388916016,
    "y": 1611.5815124511719,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "92a0c9d6.d7b8b8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1043.047706604004,
    "y": 1577.3807626739144,
    "z": "9c3e2040.51e8d",
    "wires": [
      []
    ]
  },
  {
    "id": "e23f7239.d2c",
    "type": "execute",
    "name": "execute RestApiCallNode - Update parent provided service AR",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.parentsvc.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.parent-ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"parent\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 721.9999771118164,
    "y": 1120.000165939331,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "42d4726.f4b8f8c",
        "fcb14e51.71cdd",
        "ed9689dc.1ce198"
      ]
    ]
  },
  {
    "id": "42d4726.f4b8f8c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1030.3080368041992,
    "y": 1151.998441696167,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "91022749.be6058"
      ]
    ]
  },
  {
    "id": "fcb14e51.71cdd",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1021.3080863952637,
    "y": 1120.4984674453735,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "91022749.be6058"
      ]
    ]
  },
  {
    "id": "ed9689dc.1ce198",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1025.0581245422363,
    "y": 1090.8555723205209,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "c35c0848.28fbf8"
      ]
    ]
  },
  {
    "id": "91022749.be6058",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
    "comments": "",
    "x": 1191.0581245422363,
    "y": 1121.2484912872314,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "c35c0848.28fbf8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1166.7140922546387,
    "y": 1087.047741509974,
    "z": "9c3e2040.51e8d",
    "wires": [
      []
    ]
  },
  {
    "id": "bd46d511.3b0d08",
    "type": "comment",
    "name": "Put the parent allotted resource in mdsal",
    "info": "",
    "comments": "",
    "x": 650.9999237060547,
    "y": 1082.000072479248,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "eae0ae19.16041",
    "type": "set",
    "name": "set connection-attachment-ar-identifiers",
    "xml": "<set>\n<parameter name='connection-attachment-ar-identifiers.consuming-service-instance-id' value=\"`$connection-attachment-topology-operation-input.service-information.service-instance-id` \" />\n<parameter name='connection-attachment-ar-identifiers.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n<parameter name='connection-attachment-ar-identifiers.allotted-resource-type' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-type` \" />\n<parameter name='connection-attachment-ar-identifiers.allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n\n",
    "comments": "",
    "x": 647.3571090698242,
    "y": 1284.5716915130615,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "c7cc4539.500a68",
    "type": "set",
    "name": "set ar-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-id' value=\"`$tmp.ar.allotted-resource-id` \" />\n<parameter name='connection-attachment-ar.allotted-resource-status.action' value=\"`$connection-attachment-topology-operation-input.request-information.request-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-name' value=\"connection-attachment-topology-operation\" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-action' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$connection-attachment-topology-operation-input.request-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$connection-attachment-topology-operation-input.service-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.' value=\"`$connection-attachment-topology-operation-input.connection-attachment-request-input.` \" />",
    "comments": "",
    "x": 567.2139358520508,
    "y": 1252.381194114685,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "d8cd962c.832e98",
    "type": "set",
    "name": "set identifiers in overall structure",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.connection-attachment-topology.allotted-resource-identifiers.' \nvalue=\"`$connection-attachment-ar-identifiers.`\" />\n\n\n",
    "comments": "",
    "x": 626.1669082641602,
    "y": 1318.6668767929077,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "81f242e0.4cfb8",
    "type": "execute",
    "name": "execute getTime",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 578.4997482299805,
    "y": 1392.0004043579102,
    "z": "9c3e2040.51e8d",
    "wires": [
      []
    ]
  },
  {
    "id": "a785b9fe.8e2b78",
    "type": "set",
    "name": "set allotted-resource-oper-status",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='Created' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-topology-operation-input.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
    "comments": "",
    "x": 629.4867858886719,
    "y": 1447.9516372680664,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "e1b91be4.687fd8",
    "type": "set",
    "name": "set model-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.connection-attachment-topology.onap-model-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.` \" />",
    "comments": "",
    "x": 574.0554046630859,
    "y": 1353.5557622909546,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "4b42ac54.3e0884",
    "type": "comment",
    "name": "Prepare data for allotted-resource addition to MDSAL",
    "info": "This will add to allotted-resource which is present inside service.",
    "comments": "",
    "x": 691.3888931274414,
    "y": 1218.5556087493896,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "145b2990.9f1986",
    "type": "execute",
    "name": "generate parent-ar url - replace allotted-resource-id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$tmp.parent-ar-url`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.parent-ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 686.5000381469727,
    "y": 1046.0000114440918,
    "z": "9c3e2040.51e8d",
    "wires": [
      []
    ]
  },
  {
    "id": "d6792827.57dcf8",
    "type": "execute",
    "name": "generate parent-ar url - replace service-instance-id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.parent-provided-resource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.parent-ar-url\"/>\n    <parameter name=\"target\" value=\"{service-instance-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.parent-service-instance-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 682.4999618530273,
    "y": 1003.000147819519,
    "z": "9c3e2040.51e8d",
    "wires": [
      []
    ]
  },
  {
    "id": "78c9708b.d276a",
    "type": "comment",
    "name": "Prepare Parent AR URL",
    "info": "Preparation to set provided-allotted-resource in parent service instance",
    "comments": "",
    "x": 600.5004196166992,
    "y": 932.0001010894775,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "33eb09e.c2f17f6",
    "type": "set",
    "name": "set tmp.ar.parent-service-instance-id",
    "xml": "<set>\n<parameter name='tmp.ar.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n\n",
    "comments": "",
    "x": 639.5002136230469,
    "y": 965.5000405311584,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "98cf5592.16f948",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource as cosumed allotted resource already exists.\" />\n",
    "comments": "",
    "x": 2196.756996154785,
    "y": 803.645830154419,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "eedafcbb.09c83",
    "type": "set",
    "name": "set tmp.found-cidx",
    "xml": "<set>\n<parameter name='tmp.found-cidx' value=\"`false`\" />\n\n\n",
    "comments": "",
    "x": 1322.646167755127,
    "y": 715.3125731945038,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "e5b4f922.408cd8",
    "type": "comment",
    "name": "Add to parent services provided-allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 711.201530456543,
    "y": 899.9792575836182,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "367dfa87.13b4b6",
    "type": "comment",
    "name": "Add to allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 631.9687194824219,
    "y": 1185.9689378738403,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "926c698b.647238",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1305.0000743865967,
    "y": 613.2777614593506,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "34cda0a8.01ed1"
      ]
    ]
  },
  {
    "id": "34cda0a8.01ed1",
    "type": "switchNode",
    "name": "switch cr length",
    "xml": "<switch test='`$mdsal-ar.connection-attachment-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1492.8574542999268,
    "y": 613.8968968391418,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "4253f13d.3a8c2"
      ]
    ]
  },
  {
    "id": "4253f13d.3a8c2",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1692.1905765533447,
    "y": 613.896975517273,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "b4b47003.957fd"
      ]
    ]
  },
  {
    "id": "a8dc15.338363e8",
    "type": "execute",
    "name": "execute RestApiCallNode - get-resource connection-attachment-allotted-resource",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 777.0000762939453,
    "y": 608.0000371932983,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "4f647ff8.bc9ba",
        "37dd5f16.a8f17"
      ]
    ]
  },
  {
    "id": "37dd5f16.a8f17",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1145.0001068115234,
    "y": 578.0000352859497,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "7fea5096.61664"
      ]
    ]
  },
  {
    "id": "7fea5096.61664",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1297.0001068115234,
    "y": 577.0000352859497,
    "z": "9c3e2040.51e8d",
    "wires": [
      []
    ]
  },
  {
    "id": "3040fa3e.5fdf76",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 583.0039443969727,
    "y": 1523.2500038146973,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "a477b468.1a1198",
        "df63659d.a31038"
      ]
    ]
  },
  {
    "id": "a477b468.1a1198",
    "type": "for",
    "name": "for each sdwan-get-request-input-param",
    "xml": "<for index='i' start='0' end='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 918.0041427612305,
    "y": 1469.2501260638237,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "f75d6e3.e38f69"
      ]
    ]
  },
  {
    "id": "bcc416f0.2895c8",
    "type": "comment",
    "name": "Required for filling template values",
    "info": "This is done because connection-attachment is generic resource and doesn't have specific parameters",
    "comments": "",
    "x": 940.4486465454102,
    "y": 1503.0832867622375,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "40c178cb.5bcab8",
    "type": "comment",
    "name": "Remove VNFC prefix",
    "info": "",
    "comments": "",
    "x": 1001.0039863586426,
    "y": 1425.6944618225098,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "f75d6e3.e38f69",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1165.0039901733398,
    "y": 1470.6943712234497,
    "z": "9c3e2040.51e8d",
    "wires": [
      [
        "a64439d1.ae5a88",
        "3b97b61d.424c1a"
      ]
    ]
  },
  {
    "id": "9ddd821f.74043",
    "type": "comment",
    "name": "Take the parameter names by removing prefix",
    "info": "",
    "comments": "",
    "x": 1433.0038375854492,
    "y": 1386.250369310379,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "a64439d1.ae5a88",
    "type": "execute",
    "name": "execute split parameterName",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$i].name`'/>\n<parameter name=\"regex\" value=\"_\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1384.0385055541992,
    "y": 1421.2294654846191,
    "z": "9c3e2040.51e8d",
    "wires": [
      []
    ]
  },
  {
    "id": "3b97b61d.424c1a",
    "type": "set",
    "name": "set parameterName",
    "xml": "<set>\n<parameter name=\"`connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.connection-attachment-request-input.param[$i].name`\" value='`$param-prefix[$param-prefix_length -1]`'/>\n",
    "comments": "",
    "x": 1372.4829788208008,
    "y": 1525.2294359207153,
    "z": "9c3e2040.51e8d",
    "wires": []
  },
  {
    "id": "df63659d.a31038",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:sdwan-get-saved-ar-param",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='sdwan-get-saved-ar-param' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 959.0039901733398,
    "y": 1543.2500658035278,
    "z": "9c3e2040.51e8d",
    "wires": [
      []
    ]
  }
]
