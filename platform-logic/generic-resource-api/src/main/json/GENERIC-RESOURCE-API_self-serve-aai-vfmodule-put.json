[{"id":"3bcc1d3c.2e7f62","type":"dgstart","name":"DGSTART","outputs":1,"x":183.75,"y":77.5,"z":"87de2662.03c5d8","wires":[["f8f4f048.6fa07"]]},{"id":"f8f4f048.6fa07","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":462.75,"y":80.5,"z":"87de2662.03c5d8","wires":[["f890436a.4cb56"]]},{"id":"f890436a.4cb56","type":"method","name":"self-serve-aai-vfmodule-put","xml":"<method rpc='self-serve-aai-vfmodule-put' mode='sync'>\n","comments":"","outputs":1,"x":782.75,"y":86.5,"z":"87de2662.03c5d8","wires":[["a7805912.e54c08"]]},{"id":"a7805912.e54c08","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":294.75,"y":395.5,"z":"87de2662.03c5d8","wires":[["13fa00ca.d798ef","eacd37e7.f12328"]]},{"id":"13fa00ca.d798ef","type":"switchNode","name":"switch vnf-index","xml":"<switch test='`$vnf-index`'>\n","comments":"","outputs":1,"x":507.75,"y":396.5,"z":"87de2662.03c5d8","wires":[["b00ffff3.acb6f","ba9ae715.865198"]]},{"id":"ba9ae715.865198","type":"outcome","name":"Null","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":697.75,"y":286.5,"z":"87de2662.03c5d8","wires":[["6763195f.a1e3d8"]]},{"id":"b00ffff3.acb6f","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":702.75,"y":414.5,"z":"87de2662.03c5d8","wires":[["60603a9e.40c824"]]},{"id":"6763195f.a1e3d8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value='vnf-index is required' />\n","comments":"","x":853.75,"y":287.5,"z":"87de2662.03c5d8","wires":[]},{"id":"60603a9e.40c824","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":847.75,"y":414.5,"z":"87de2662.03c5d8","wires":[["6913e72c.1d7f48","d4d282ea.1681c"]]},{"id":"6913e72c.1d7f48","type":"for","name":"for j","xml":"<for index=\"j\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param_length`\" >\n","comments":"","outputs":1,"x":974.75,"y":638.5,"z":"87de2662.03c5d8","wires":[["73d4d17b.fa237"]]},{"id":"73d4d17b.fa237","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1130.75,"y":640.5,"z":"87de2662.03c5d8","wires":[["60c50f6e.e6ca7"]]},{"id":"60c50f6e.e6ca7","type":"switchNode","name":"switch","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$j].name`'>\n","comments":"","outputs":1,"x":1279.75,"y":640.5,"z":"87de2662.03c5d8","wires":[["e5caa9f7.c09358","83438f88.62bba","d776d78b.b63e38","e0c70877.2cd778","5268f0ac.d7d17"]]},{"id":"e5caa9f7.c09358","type":"outcome","name":"vf-module-id","xml":"<outcome value='vf-module-id'>\n","comments":"","outputs":1,"x":1441.75,"y":596.5,"z":"87de2662.03c5d8","wires":[["a4aa2147.163b6"]]},{"id":"a4aa2147.163b6","type":"set","name":"set vf-module-id","xml":"<set>\n<parameter name='vf-module-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$j].value`' />\n","comments":"","x":1650.75,"y":596.5,"z":"87de2662.03c5d8","wires":[]},{"id":"83438f88.62bba","type":"outcome","name":"vf-module-name","xml":"<outcome value='vf-module-name'>\n","comments":"","outputs":1,"x":1448.75,"y":632.5,"z":"87de2662.03c5d8","wires":[["b5e3f8de.e9a598"]]},{"id":"eacd37e7.f12328","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":495.75,"y":803.5,"z":"87de2662.03c5d8","wires":[["93f4e68b.5b6d98"]]},{"id":"d4d282ea.1681c","type":"for","name":"for k","xml":"<for index=\"k\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param_length`\" >\n","comments":"","outputs":1,"x":996.75,"y":362.5,"z":"87de2662.03c5d8","wires":[["a9c8b188.25031"]]},{"id":"a9c8b188.25031","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1138.75,"y":362.5,"z":"87de2662.03c5d8","wires":[["79139eb.37a506"]]},{"id":"79139eb.37a506","type":"switchNode","name":"switch","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$k].name`'>\n","comments":"","outputs":1,"x":1288.75,"y":362.5,"z":"87de2662.03c5d8","wires":[["4fe5e9f0.e41a88","ad407b2f.5fcd38","8fb674c6.a20218","7adccb75.b058e4"]]},{"id":"4fe5e9f0.e41a88","type":"outcome","name":"vnf-id","xml":"<outcome value='vnf-id'>\n","comments":"","outputs":1,"x":1437.75,"y":296.5,"z":"87de2662.03c5d8","wires":[["4015b9c8.9d41c8"]]},{"id":"ad407b2f.5fcd38","type":"outcome","name":"ipv4-loopback0-address","xml":"<outcome value='ipv4-loopback0-address'>\n","comments":"","outputs":1,"x":1488.75,"y":336.5,"z":"87de2662.03c5d8","wires":[["11e0c62f.b5574a"]]},{"id":"4015b9c8.9d41c8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1693.75,"y":298.5,"z":"87de2662.03c5d8","wires":[["9b6155f5.f4cc98"]]},{"id":"9b6155f5.f4cc98","type":"set","name":"set vnf-id","xml":"<set>\n<parameter name='vnf-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$k].value`' />\n\n","comments":"","x":1842.75,"y":297.5,"z":"87de2662.03c5d8","wires":[]},{"id":"11e0c62f.b5574a","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1695.75,"y":336.5,"z":"87de2662.03c5d8","wires":[["ee096b07.cf8688"]]},{"id":"ee096b07.cf8688","type":"set","name":"set ipv4-loopback0-address","xml":"<set>\n<parameter name='ipv4-loopback0-address' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$k].value`' />\n\n","comments":"","x":1903.75,"y":336.5,"z":"87de2662.03c5d8","wires":[]},{"id":"93f4e68b.5b6d98","type":"save","name":"update generic-vnf","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $vnf-id \"\n\tpfx=\"tmp.AnAI-data.vnf\" >\n<parameter name=\"ipv4-loopback0-address\" value='`$ipv4-loopback0-address`' />\n<parameter name=\"ipv4-oam-address\" value='`$ipv4-oam-address`' />\n<parameter name=\"as-number\" value='`$as-number`' />\n<parameter name=\"vlan-id-outer\" value='`$vlan-id-outer`' />\n","comments":"","outputs":1,"x":681.75,"y":804.5,"z":"87de2662.03c5d8","wires":[["95c5a79a.ddbdc8","f108819d.8bd34","4ac64e59.55cec"]]},{"id":"95c5a79a.ddbdc8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":884.75,"y":764.5,"z":"87de2662.03c5d8","wires":[["54b37c02.3f0a64"]]},{"id":"f108819d.8bd34","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":887.75,"y":801.5,"z":"87de2662.03c5d8","wires":[["54b37c02.3f0a64"]]},{"id":"54b37c02.3f0a64","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n\t<parameter name=\"logger\" value=\"message-log\" />\n\t<parameter name=\"level\" value=\"error\" />\n\t<parameter name=\"field1\" value=\"Error for PUT in AAI for generic-vnf.\" />\n\t<parameter name=\"field2\" value=\"`$tmp.AnAI-data.vnf.error-code`\" />\n\t<parameter name=\"field3\" value=\"`$tmp.AnAI-data.vnf.error-message`\" />\n\t","comments":"","outputs":1,"x":1036.75,"y":787.5,"z":"87de2662.03c5d8","wires":[[]]},{"id":"8fb674c6.a20218","type":"outcome","name":"as-number","xml":"<outcome value='as-number'>\n","comments":"","outputs":1,"x":1448.75,"y":377.5,"z":"87de2662.03c5d8","wires":[["66c640fa.36473"]]},{"id":"7adccb75.b058e4","type":"outcome","name":"vlan-id-outer","xml":"<outcome value='vlan-id-outer'>\n","comments":"","outputs":1,"x":1450.75,"y":417.5,"z":"87de2662.03c5d8","wires":[["457b683c.52d4b8"]]},{"id":"66c640fa.36473","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1694.75,"y":374.5,"z":"87de2662.03c5d8","wires":[["89c9f6aa.f93da8"]]},{"id":"89c9f6aa.f93da8","type":"set","name":"set as-number","xml":"<set>\n<parameter name='as-number' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$k].value`' />\n\n","comments":"","x":1861.75,"y":375.5,"z":"87de2662.03c5d8","wires":[]},{"id":"457b683c.52d4b8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1692.75,"y":413.5,"z":"87de2662.03c5d8","wires":[["aa7f4e1d.87e2b"]]},{"id":"aa7f4e1d.87e2b","type":"set","name":"set vlan-id-outer","xml":"<set>\n<parameter name='vlan-id-outer' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$k].value`' />\n\n","comments":"","x":1866.75,"y":414.5,"z":"87de2662.03c5d8","wires":[]},{"id":"b5e3f8de.e9a598","type":"set","name":"set vf-module-name","xml":"<set>\n<parameter name='vf-module-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$j].value`' />\n","comments":"","x":1662.75,"y":633.5,"z":"87de2662.03c5d8","wires":[]},{"id":"d776d78b.b63e38","type":"outcome","name":"volume-group-name","xml":"<outcome value='volume-group-name'>\n","comments":"","outputs":1,"x":1460.75,"y":729.5,"z":"87de2662.03c5d8","wires":[["3e549a42.e099b6"]]},{"id":"3e549a42.e099b6","type":"set","name":"set volume-group-name","xml":"<set>\n<parameter name='volume-group-name' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$j].value`' />\n","comments":"","x":1678.75,"y":729.5,"z":"87de2662.03c5d8","wires":[]},{"id":"e0c70877.2cd778","type":"outcome","name":"cloud-region","xml":"<outcome value='cloud-region'>\n","comments":"","outputs":1,"x":1438.75,"y":798.5,"z":"87de2662.03c5d8","wires":[["1d906e7c.bb10b2"]]},{"id":"1d906e7c.bb10b2","type":"set","name":"set cloud-region","xml":"<set>\n<parameter name='cloud-region' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$j].value`' />\n","comments":"","x":1653.75,"y":797.5,"z":"87de2662.03c5d8","wires":[]},{"id":"4ac64e59.55cec","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":868.75,"y":921.5,"z":"87de2662.03c5d8","wires":[["667cd992.349bc8"]]},{"id":"115b9def.8bc5b2","type":"comment","name":"PUT generic-vnf","info":"","comments":"","x":668.75,"y":765.5,"z":"87de2662.03c5d8","wires":[]},{"id":"f0a1b451.879598","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n\t<parameter name=\"logger\" value=\"message-log\" />\n\t<parameter name=\"level\" value=\"error\" />\n\t<parameter name=\"field1\" value=\"Error for PUT in AAI for vf-module\" />\n\t<parameter name=\"field2\" value=\"`$tmp.AnAI-data.vnf.error-code`\" />\n\t<parameter name=\"field3\" value=\"`$tmp.AnAI-data.vnf.error-message`\" />\n\t","comments":"","outputs":1,"x":1412.75,"y":903.5,"z":"87de2662.03c5d8","wires":[[]]},{"id":"6eb56e20.58186","type":"comment","name":"PUT vnf-module","info":"","comments":"","x":1049.75,"y":881.5,"z":"87de2662.03c5d8","wires":[]},{"id":"667cd992.349bc8","type":"save","name":"update vf-module","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"vf-module\"\n\t\tkey=\"vf-module.vf-module-id = $vf-module-id \"\n\tpfx=\"tmp.AnAI-data.vfmodule\" >\n<parameter name=\"vf-module-name\" value='`$vf-module-name`' />\n","comments":"","outputs":1,"x":1057.75,"y":920.5,"z":"87de2662.03c5d8","wires":[["5c3ff6c3.e9d0d8","12563170.8c5ebf","bd518e04.b96c1"]]},{"id":"5c3ff6c3.e9d0d8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1260.75,"y":880.5,"z":"87de2662.03c5d8","wires":[["f0a1b451.879598"]]},{"id":"12563170.8c5ebf","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1263.75,"y":917.5,"z":"87de2662.03c5d8","wires":[["f0a1b451.879598"]]},{"id":"bd518e04.b96c1","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1246.75,"y":1044.5,"z":"87de2662.03c5d8","wires":[["e1266c78.1063b"]]},{"id":"e1266c78.1063b","type":"save","name":"update volume-group","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"volume-group\"\n\t\tkey=\"volume-group-id = $volume-group-id and \n\t\t\t\tcloud-region.cloud-owner = $prop.cloud-region.cloud-owner and\n\t\t\t\tcloud-region.cloud-region-id = $cloud-region \"\n\t\tpfx=\"tmp.AnAI-data.vnf\" >\n<parameter name=\"volume-group-name\" value='`$volume-group-name`' />\n","comments":"","outputs":1,"x":1429.7500228881836,"y":1048.500015258789,"z":"87de2662.03c5d8","wires":[["b7f2fc72.06776","875ccc41.ced81","354dd145.06fb5e"]]},{"id":"4fc5c62f.4f0428","type":"comment","name":"PUT volume-group-name","info":"","comments":"","x":1446.75,"y":996.5,"z":"87de2662.03c5d8","wires":[]},{"id":"b7f2fc72.06776","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1668.75,"y":996.5,"z":"87de2662.03c5d8","wires":[["1f904d5d.23af73"]]},{"id":"875ccc41.ced81","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1671.75,"y":1033.5,"z":"87de2662.03c5d8","wires":[["1f904d5d.23af73"]]},{"id":"354dd145.06fb5e","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1663.75,"y":1085.5,"z":"87de2662.03c5d8","wires":[["4269acd9.cb8be4"]]},{"id":"1f904d5d.23af73","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n\t<parameter name=\"logger\" value=\"message-log\" />\n\t<parameter name=\"level\" value=\"error\" />\n\t<parameter name=\"field1\" value=\"Error Saving in AAI\" />\n\t<parameter name=\"field2\" value=\"`$tmp.AnAI-data.vnf.error-code`\" />\n\t<parameter name=\"field3\" value=\"`$tmp.AnAI-data.vnf.error-message`\" />\n\t","comments":"","outputs":1,"x":1820.75,"y":1019.5,"z":"87de2662.03c5d8","wires":[[]]},{"id":"4269acd9.cb8be4","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n\n","comments":"","x":1835.75,"y":1088.5,"z":"87de2662.03c5d8","wires":[]},{"id":"5268f0ac.d7d17","type":"outcome","name":"volume-group-id","xml":"<outcome value='volume-group-id'>\n","comments":"","outputs":1,"x":1447.75,"y":696.5,"z":"87de2662.03c5d8","wires":[["1fa4e223.989e2e"]]},{"id":"1fa4e223.989e2e","type":"set","name":"set volume-group-id","xml":"<set>\n<parameter name='volume-group-id' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$j].value`' />\n","comments":"","x":1680.75,"y":695.5,"z":"87de2662.03c5d8","wires":[]}]