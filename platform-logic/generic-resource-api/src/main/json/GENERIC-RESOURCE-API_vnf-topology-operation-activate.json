[
    {
        "id": "ebd3636c.7419d",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 99.99999237060547,
        "y": 81.66666412353516,
        "z": "28c16236.105dde",
        "wires": [
            [
                "197d48ee.598fa7"
            ]
        ]
    },
    {
        "id": "197d48ee.598fa7",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 175.28569793701172,
        "y": 121.90477561950684,
        "z": "28c16236.105dde",
        "wires": [
            [
                "e1950959.592288"
            ]
        ]
    },
    {
        "id": "e1950959.592288",
        "type": "method",
        "name": "method vnf-topology-operation-activate",
        "xml": "<method rpc='vnf-topology-operation-activate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 196.42861938476562,
        "y": 161.66666412353516,
        "z": "28c16236.105dde",
        "wires": [
            [
                "e344a3c.e6f6f6"
            ]
        ]
    },
    {
        "id": "e9d65a3e.e8fb48",
        "type": "comment",
        "name": "vnf-topology-operation-activate",
        "info": "",
        "comments": "",
        "x": 494.3448486328125,
        "y": 29.253007888793945,
        "z": "28c16236.105dde",
        "wires": []
    },
    {
        "id": "68902cc2.2a12a4",
        "type": "switchNode",
        "name": "switch request-action",
        "xml": "<switch test='`$vnf-topology-operation-input.request-information.request-action`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 503.5238037109375,
        "y": 260.52380180358887,
        "z": "28c16236.105dde",
        "wires": [
            [
                "a0b4d245.da80d",
                "ad7ffb1a.cd9d28"
            ]
        ]
    },
    {
        "id": "a0b4d245.da80d",
        "type": "outcome",
        "name": "CreateVnfInstance",
        "xml": "<outcome value='CreateVnfInstance'>\n",
        "comments": "",
        "outputs": 1,
        "x": 721.9047660827637,
        "y": 237.66668605804443,
        "z": "28c16236.105dde",
        "wires": [
            [
                "27d2abcf.c98e94"
            ]
        ]
    },
    {
        "id": "ad7ffb1a.cd9d28",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 685.9047317504883,
        "y": 283.38101387023926,
        "z": "28c16236.105dde",
        "wires": [
            [
                "9aea2bb8.636f48"
            ]
        ]
    },
    {
        "id": "27d2abcf.c98e94",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 908.7618942260742,
        "y": 237.66671562194824,
        "z": "28c16236.105dde",
        "wires": [
            []
        ]
    },
    {
        "id": "9aea2bb8.636f48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'activate' then request-action must be 'CreateVnfInstance'\" />\n",
        "comments": "",
        "x": 925.9047393798828,
        "y": 283.38097190856934,
        "z": "28c16236.105dde",
        "wires": []
    },
    {
        "id": "e344a3c.e6f6f6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 176.66665649414062,
        "y": 383.33333587646484,
        "z": "28c16236.105dde",
        "wires": [
            [
                "68902cc2.2a12a4",
                "d49c04f8.2ace98",
                "788d0909.b021c8",
                "99811d90.fc82c",
                "7caed7a8.2e9948",
                "2fbd1822.35aeb8",
                "88b94012.df3c5",
                "20178755.68db48",
                "5ee26c61.c95f04"
            ]
        ]
    },
    {
        "id": "d49c04f8.2ace98",
        "type": "switchNode",
        "name": "switch vnf_length",
        "xml": "<switch test='`$service-data.vnfs.vnf_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 489.9999771118164,
        "y": 330.0000276565552,
        "z": "28c16236.105dde",
        "wires": [
            [
                "85207fdf.7da98"
            ]
        ]
    },
    {
        "id": "85207fdf.7da98",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 676.6666564941406,
        "y": 329.33332538604736,
        "z": "28c16236.105dde",
        "wires": [
            [
                "589c9a44.2b5c64"
            ]
        ]
    },
    {
        "id": "589c9a44.2b5c64",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs in MD-SAL\" />\n",
        "comments": "",
        "x": 858.3332824707031,
        "y": 329.33332538604736,
        "z": "28c16236.105dde",
        "wires": []
    },
    {
        "id": "788d0909.b021c8",
        "type": "for",
        "name": "for each vnf",
        "xml": "<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 471.6666564941406,
        "y": 378.333345413208,
        "z": "28c16236.105dde",
        "wires": [
            [
                "2e4255db.76c61a"
            ]
        ]
    },
    {
        "id": "2e4255db.76c61a",
        "type": "switchNode",
        "name": "switch this vnf-id == input vnf-id",
        "xml": "<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vnf-topology-operation-input.vnf-information.vnf-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 726.6667442321777,
        "y": 377.00001335144043,
        "z": "28c16236.105dde",
        "wires": [
            [
                "e8e4ee61.d7a57"
            ]
        ]
    },
    {
        "id": "e8e4ee61.d7a57",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 965.0000305175781,
        "y": 375.99999141693115,
        "z": "28c16236.105dde",
        "wires": [
            [
                "bd084402.ebd418"
            ]
        ]
    },
    {
        "id": "bd084402.ebd418",
        "type": "set",
        "name": "set vnf-index",
        "xml": "<set>\n<parameter name='vnf-index' value='`$idx`' />\n",
        "comments": "",
        "x": 1133.3332252502441,
        "y": 376.00001335144043,
        "z": "28c16236.105dde",
        "wires": []
    },
    {
        "id": "99811d90.fc82c",
        "type": "switchNode",
        "name": "switch vnf-index",
        "xml": "<switch test='`$vnf-index`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 483.3333206176758,
        "y": 425.00001525878906,
        "z": "28c16236.105dde",
        "wires": [
            [
                "cb5737d1.883a28"
            ]
        ]
    },
    {
        "id": "cb5737d1.883a28",
        "type": "other",
        "name": "NULL",
        "xml": "<outcome value=''>\n",
        "comments": "",
        "outputs": 1,
        "x": 664.9999389648438,
        "y": 424.333345413208,
        "z": "28c16236.105dde",
        "wires": [
            [
                "4eb36fef.c52b2"
            ]
        ]
    },
    {
        "id": "4eb36fef.c52b2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"'Could not find VNF ' + $vnf-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'\" />\n",
        "comments": "",
        "x": 831.6666259765625,
        "y": 423.9999713897705,
        "z": "28c16236.105dde",
        "wires": []
    },
    {
        "id": "88b94012.df3c5",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 478.33325958251953,
        "y": 686.6666707992554,
        "z": "28c16236.105dde",
        "wires": []
    },
    {
        "id": "2fbd1822.35aeb8",
        "type": "set",
        "name": "set vnf-level-oper-status to Created",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status' value='Created' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.last-rpc-action' value='`$vnf-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.last-action' value='`$vnf-topology-operation-input.request-information.request-action`' />\n",
        "comments": "",
        "x": 540.8133697509766,
        "y": 639.0037975311279,
        "z": "28c16236.105dde",
        "wires": []
    },
    {
        "id": "7caed7a8.2e9948",
        "type": "set",
        "name": "copy input data",
        "xml": "<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.sdnc-request-header.' value='$vnf-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.request-information.' value='$vnf-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.' value='$vnf-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-information.' value='$vnf-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-request-input.' value='$vnf-topology-operation-input.vnf-request-input.' />\n\n",
        "comments": "",
        "x": 481.66651153564453,
        "y": 594.999979019165,
        "z": "28c16236.105dde",
        "wires": []
    },
    {
        "id": "20178755.68db48",
        "type": "switchNode",
        "name": "switch current vnf-level-oper-status == PendingCreate",
        "xml": "<switch test=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status == 'PendingCreate'`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 605.0000305175781,
        "y": 468.33330059051514,
        "z": "28c16236.105dde",
        "wires": [
            [
                "133f13c9.d4c06c"
            ]
        ]
    },
    {
        "id": "133f13c9.d4c06c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 891.3333740234375,
        "y": 467.9999485015869,
        "z": "28c16236.105dde",
        "wires": [
            [
                "866ab955.d849b8"
            ]
        ]
    },
    {
        "id": "866ab955.d849b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Order status must be PendingCreate, but is currently '\n      + $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-level-oper-status.order-status`\" />\n",
        "comments": "",
        "x": 1049.666648864746,
        "y": 467.33327293395996,
        "z": "28c16236.105dde",
        "wires": []
    },
    {
        "id": "6bd0646e.4cf91c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No generic-vnf found in AAI for vnf ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-id`\" />\n",
        "comments": "",
        "x": 994.9999961853027,
        "y": 555.6665868759155,
        "z": "28c16236.105dde",
        "wires": []
    },
    {
        "id": "71f47c8b.cb4564",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 826.0238952636719,
        "y": 511.9523983001709,
        "z": "28c16236.105dde",
        "wires": [
            [
                "5e0a685d.6799c8"
            ]
        ]
    },
    {
        "id": "16014f9b.9ff89",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 834.5953254699707,
        "y": 556.2381114959717,
        "z": "28c16236.105dde",
        "wires": [
            [
                "6bd0646e.4cf91c"
            ]
        ]
    },
    {
        "id": "5e0a685d.6799c8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating generic-vnf in AAI\" />\n",
        "comments": "",
        "x": 997.6905899047852,
        "y": 512.4287919998169,
        "z": "28c16236.105dde",
        "wires": []
    },
    {
        "id": "5ee26c61.c95f04",
        "type": "save",
        "name": "update generic-vnf prov-status to NVTPROV",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"generic-vnf\"\n   key=\"generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"prov-status\" value=\"NVTPROV\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 573.3333206176758,
        "y": 531.666654586792,
        "z": "28c16236.105dde",
        "wires": [
            [
                "71f47c8b.cb4564",
                "16014f9b.9ff89"
            ]
        ]
    }
]
