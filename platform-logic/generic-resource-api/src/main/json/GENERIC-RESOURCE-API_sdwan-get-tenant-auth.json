[
  {
    "id": "30fe9468.76f32c",
    "type": "get-resource",
    "name": "get-resource service-subscription",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"service-subscription\" \n        key= 'service-subscription.service-type = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.subscription-service-type \n        AND customer.global-customer-id = $service-data.vnfs.vnf[$tmp.vidx].vnf-data.service-information.global-customer-id'\n      force=\"true\" pfx=\"tmp.AnAI-data-tenant\">\n      \n",
    "comments": "",
    "outputs": 1,
    "x": 632.8652648925781,
    "y": 374.2938051223755,
    "z": "97aa802d.404bc",
    "wires": [
      [
        "a889eb39.2fcd08",
        "483504b1.ecba4c"
      ]
    ]
  },
  {
    "id": "516f9f53.00463",
    "type": "switchNode",
    "name": "switch temp-ub-sub-account-id",
    "xml": "<switch test='`$tmp.AnAI-data-tenant.temp-ub-sub-account-id`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1044.8653564453125,
    "y": 339.0438861846924,
    "z": "97aa802d.404bc",
    "wires": [
      [
        "f1e993a3.ae05f",
        "6af3c030.9694c"
      ]
    ]
  },
  {
    "id": "f1e993a3.ae05f",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>",
    "comments": "",
    "outputs": 1,
    "x": 1237.5798072814941,
    "y": 313.043927192688,
    "z": "97aa802d.404bc",
    "wires": [
      [
        "be0f95e9.861918"
      ]
    ]
  },
  {
    "id": "6af3c030.9694c",
    "type": "other",
    "name": "Other",
    "xml": "<outcome value='Other'>",
    "comments": "",
    "outputs": 1,
    "x": 1237.8653717041016,
    "y": 368.04388999938965,
    "z": "97aa802d.404bc",
    "wires": [
      [
        "3bf7a2b9.96247e"
      ]
    ]
  },
  {
    "id": "a889eb39.2fcd08",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 843.3651275634766,
    "y": 347.0398635864258,
    "z": "97aa802d.404bc",
    "wires": [
      [
        "516f9f53.00463"
      ]
    ]
  },
  {
    "id": "483504b1.ecba4c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 837.0437164306641,
    "y": 399.2541751861572,
    "z": "97aa802d.404bc",
    "wires": [
      [
        "212060fe.4fc32"
      ]
    ]
  },
  {
    "id": "212060fe.4fc32",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
    "comments": "",
    "x": 989.7937164306641,
    "y": 399.0042362213135,
    "z": "97aa802d.404bc",
    "wires": []
  },
  {
    "id": "b6a8c3c7.8bc03",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 212.86526489257812,
    "y": 101.43669128417969,
    "z": "97aa802d.404bc",
    "wires": [
      [
        "68fe5032.b2685"
      ]
    ]
  },
  {
    "id": "f788aa3b.dab3e8",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 133.57955932617188,
    "y": 39.19858169555664,
    "z": "97aa802d.404bc",
    "wires": [
      [
        "b6a8c3c7.8bc03"
      ]
    ]
  },
  {
    "id": "672a5bc8.7ace04",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 366.81766510009766,
    "y": 338.0081157684326,
    "z": "97aa802d.404bc",
    "wires": [
      [
        "30fe9468.76f32c",
        "ef87bbc7.0bf428"
      ]
    ]
  },
  {
    "id": "68fe5032.b2685",
    "type": "method",
    "name": "method sdwan-get-tenant-auth",
    "xml": "<method rpc='sdwan-get-tenant-auth' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 224.57955932617188,
    "y": 195.7849235534668,
    "z": "97aa802d.404bc",
    "wires": [
      [
        "672a5bc8.7ace04"
      ]
    ]
  },
  {
    "id": "3bf7a2b9.96247e",
    "type": "set",
    "name": "set prop.tenant-id",
    "xml": "<set>\n<parameter name='prop.tenant-id' value='`$tmp.AnAI-data-tenant.temp-ub-sub-account-id`' />\n",
    "comments": "",
    "x": 1415.7224426269531,
    "y": 367.15094566345215,
    "z": "97aa802d.404bc",
    "wires": []
  },
  {
    "id": "ef87bbc7.0bf428",
    "type": "execute",
    "name": "execute RestApiCallNode Create tenant auth",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/baseservice/tenants/authorization/' + $prop.tenant-id`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"tenant-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 660.3652954101562,
    "y": 477.1866149902344,
    "z": "97aa802d.404bc",
    "wires": [
      []
    ]
  },
  {
    "id": "be0f95e9.861918",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
    "comments": "",
    "x": 1420.0080490112305,
    "y": 312.86523628234863,
    "z": "97aa802d.404bc",
    "wires": []
  }
]
