[
  {
    "id": "902cbf05.82ac2",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 109.00390625,
    "y": 52.999999046325684,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "51c9fb4f.5229b4"
      ]
    ]
  },
  {
    "id": "51c9fb4f.5229b4",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 321.00391006469727,
    "y": 125.00001621246338,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "ccbd5d22.8595f"
      ]
    ]
  },
  {
    "id": "ccbd5d22.8595f",
    "type": "method",
    "name": "sotn-attachment-topology-operation-deactivate",
    "xml": "<method rpc='sotn-attachment-topology-operation-deactivate' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 309.0040283203125,
    "y": 212.99999904632568,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "1f233e48.d0a312"
      ]
    ]
  },
  {
    "id": "1f233e48.d0a312",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 325.0040283203125,
    "y": 768.0002436637878,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "c4ceb71c.15c748",
        "9533eb28.c2dc18",
        "cf024f6b.1779",
        "379451f5.6f5f6e",
        "b6fea8ef.c49268",
        "509e7b0a.918fb4",
        "afaa2fc8.ec942",
        "9831615b.70a3c",
        "78575bc9.95a094",
        "6c9c6e62.89b72",
        "761075c6.da2f4c",
        "bc240e74.2145b",
        "ad638e.fad5cc7",
        "d8c85975.6bf758",
        "a691ab09.aead58",
        "72567cb3.f1fbd4",
        "ce4db8c8.182408",
        "ea67aab8.ef7588",
        "53b9be67.07128"
      ]
    ]
  },
  {
    "id": "c4ceb71c.15c748",
    "type": "set",
    "name": "set tmp.ar.allotted-resource-id,etc",
    "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
    "comments": "",
    "x": 721.9974670410156,
    "y": 166.9934859275818,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "2ba99ef0.0a9972",
    "type": "comment",
    "name": "set tmp ar-id to fetch resource from MDSAL",
    "info": "",
    "comments": "",
    "x": 750.9577789306641,
    "y": 131.02528190612793,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "9533eb28.c2dc18",
    "type": "set",
    "name": "set tmp.ar.self-link",
    "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:connection-attachment-allotted-resources/connection-attachment-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/connection-attachment-topology/'` \" />\n\n",
    "comments": "",
    "x": 675.9974060058594,
    "y": 259.9934911727905,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "9831615b.70a3c",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 682.2592964172363,
    "y": 347.6602201461792,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "cf024f6b.1779",
    "type": "execute",
    "name": "generate allotted-resource url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 714.2593231201172,
    "y": 435.66020154953003,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "379451f5.6f5f6e",
    "type": "get-resource",
    "name": "get-resource connection-attachment-allotted-resource",
    "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='GENERIC-RESOURCE-API' key='connection-attachment-allotted-resources/connection-attachment-allotted-resource/$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id/' pfx='mdsal-ar' >\n",
    "comments": "",
    "outputs": 1,
    "x": 784.9974212646484,
    "y": 525.7712602615356,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "15794b13.fbac75",
        "e02b6e93.81b44"
      ]
    ]
  },
  {
    "id": "2fa8e20c.3e4dde",
    "type": "comment",
    "name": "GET connection-attachment-allotted-resource from mdsal",
    "info": "",
    "comments": "",
    "x": 791.8122177124023,
    "y": 497.5385789871216,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "e89ba5d2.ca7f98",
    "type": "comment",
    "name": "Used for setting output to API Handler",
    "info": "",
    "comments": "",
    "x": 729.9974365234375,
    "y": 226.9935007095337,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "f751e97a.0a8c78",
    "type": "comment",
    "name": "Obtain different URL, template location etc",
    "info": "For saving resource information to MDSAL & for AAI",
    "comments": "",
    "x": 747.9974021911621,
    "y": 312.882381439209,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "48dad372.ba3dcc",
    "type": "comment",
    "name": "Used to Get AR by id to MDSAL, same as self-link",
    "info": "",
    "comments": "",
    "x": 773.9974212646484,
    "y": 399.8823404312134,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "15794b13.fbac75",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1084.6706237792969,
    "y": 510.99999141693115,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "952af6d.1617708"
      ]
    ]
  },
  {
    "id": "952af6d.1617708",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1253.6706275939941,
    "y": 509.49989223480225,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "f480b1f9.28302"
      ]
    ]
  },
  {
    "id": "f480b1f9.28302",
    "type": "switchNode",
    "name": "switch cr length",
    "xml": "<switch test='`$mdsal-ar.connection-attachment-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1464.5278701782227,
    "y": 509.11902141571045,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "f8514da1.cfdee",
        "7e23dfd3.3f458"
      ]
    ]
  },
  {
    "id": "f8514da1.cfdee",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1653.8611755371094,
    "y": 509.1189794540405,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "738ae2e5.a84e3c"
      ]
    ]
  },
  {
    "id": "738ae2e5.a84e3c",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic='true'>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1838.3850650787354,
    "y": 506.02381324768066,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "ee3a63b7.1587f",
        "30f03cbb.095034",
        "869cba11.4e5318"
      ]
    ]
  },
  {
    "id": "190c7cc8.68d4f3",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 1797.5228652954102,
    "y": 587.0660448074341,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "e02b6e93.81b44",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1076.5224266052246,
    "y": 546.0660762786865,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "be0cca0e.643168"
      ]
    ]
  },
  {
    "id": "be0cca0e.643168",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1256.5223770141602,
    "y": 546.732626914978,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "190c7cc8.68d4f3"
      ]
    ]
  },
  {
    "id": "7e23dfd3.3f458",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1642.1891288757324,
    "y": 546.3993396759033,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "190c7cc8.68d4f3"
      ]
    ]
  },
  {
    "id": "ee3a63b7.1587f",
    "type": "set",
    "name": "set connection-attachment-ar from get",
    "xml": "<set>\n<parameter name='connection-attachment-ar.' value='$mdsal-ar.connection-attachment-allotted-resource[0].' />\n",
    "comments": "",
    "x": 2207.4484100341797,
    "y": 473.0000296831131,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "869cba11.4e5318",
    "type": "set",
    "name": "set oper-status",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-ar.allotted-resource-status.rpc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
    "comments": "",
    "x": 2140.4485778808594,
    "y": 548.4285554885864,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "30f03cbb.095034",
    "type": "switchNode",
    "name": "switch order-status",
    "xml": "<switch test='`$connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2150.448356628418,
    "y": 513.9999895095825,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "7bf97396.e41b0c",
        "a79d0f34.3ad1d"
      ]
    ]
  },
  {
    "id": "7bf97396.e41b0c",
    "type": "outcome",
    "name": "outcome Active",
    "xml": "<outcome value='Active'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2386.048439025879,
    "y": 508.0000205039978,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "2b17c4af.c9c67c"
      ]
    ]
  },
  {
    "id": "a79d0f34.3ad1d",
    "type": "outcome",
    "name": "outcome Other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2379.7628784179688,
    "y": 547.4286284446716,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "2df968ff.a59058"
      ]
    ]
  },
  {
    "id": "2b17c4af.c9c67c",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2600.518955230713,
    "y": 509.3756546974182,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "2df968ff.a59058",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" \n    value=\"`'Existing connection-attachment-allotted-resource with order status of ' + $connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status + '.'`\" />\n",
    "comments": "",
    "x": 2619.6706581115723,
    "y": 550.0000185966492,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "4926a336.1549ec",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:sotn-get-request-input-param",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='connection-attachment-get-request-input-param' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 972.3069458007812,
    "y": 615.4935545921326,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "78575bc9.95a094",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 654.3130226135254,
    "y": 615.4998412132263,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "4926a336.1549ec"
      ]
    ]
  },
  {
    "id": "b6fea8ef.c49268",
    "type": "get-resource",
    "name": "get-resource parent-service-data",
    "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='GENERIC-RESOURCE-API' key='services/service/$tmp.ar.parent-service-instance-id/service-data' pfx='mdsal-psd' >\n",
    "comments": "",
    "outputs": 1,
    "x": 719.0043334960938,
    "y": 757.5316157341003,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "7bd13bf5.d657f4",
        "21599ec.9703d62"
      ]
    ]
  },
  {
    "id": "bc002904.292928",
    "type": "comment",
    "name": "GET parent-service-data from mdsal to check existence of other End point",
    "info": "",
    "comments": "",
    "x": 839.0042724609375,
    "y": 686.5315546989441,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "73d4e1e5.100ea",
    "type": "for",
    "name": "for pidx..mdsal-psd.provided-allotted-resources.provided-allotted-resource[]",
    "xml": "<for index='pidx' start='0' end='`$mdsal-psd.provided-allotted-resources.provided-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1728.1887531280518,
    "y": 925.0041079521179,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "c9283f4f.e54c7"
      ]
    ]
  },
  {
    "id": "509e7b0a.918fb4",
    "type": "switchNode",
    "name": "switch mdsal-psd.provided-allotted-resources_length",
    "xml": "<switch test='`$mdsal-psd.provided-allotted-resources.provided-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 785.1881103515625,
    "y": 901.7180781364441,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "b115b5.efc49a48",
        "77bec0eb.5d668",
        "722d0ca5.9a3d54"
      ]
    ]
  },
  {
    "id": "b115b5.efc49a48",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1117.3309860229492,
    "y": 1125.575547479093,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "9692bf9c.5ffa"
      ]
    ]
  },
  {
    "id": "94ad2e31.d7a3e",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1311.4583415985107,
    "y": 919.7015204429626,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "73d4e1e5.100ea"
      ]
    ]
  },
  {
    "id": "c9283f4f.e54c7",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$mdsal-psd.provided-allotted-resources.provided-allotted-resource[$cidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2163.3001537323,
    "y": 925.0040049552917,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "ce361aba.4d4be8",
        "1207b5bd.65bd4a"
      ]
    ]
  },
  {
    "id": "ce361aba.4d4be8",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2372.1103801727295,
    "y": 897.4684948921204,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "9ff06a7f.769658"
      ]
    ]
  },
  {
    "id": "3b258e58.c08552",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2551.8710765838623,
    "y": 961.3256735801697,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "2345638f.0ed1bc",
        "fd1f9423.d014e8"
      ]
    ]
  },
  {
    "id": "2345638f.0ed1bc",
    "type": "set",
    "name": "set tmp.pidx and ptx.consumed-ar",
    "xml": "<set>\n<parameter name='tmp.pidx' value='`$pidx`' />\n<parameter name='tmp.provided-ar.' value='`$mdsal-psd.provided-allotted-resources.provided-allotted-resource[$pidx].`' />\n<parameter name='tmp.found-in-ar' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
    "comments": "",
    "x": 2808.728582382202,
    "y": 935.8971877098083,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "fd1f9423.d014e8",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 2719.5893001556396,
    "y": 982.6532034873962,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "ededcdc6.ddc17",
    "type": "comment",
    "name": "Check existence of other AR in parent service data",
    "info": "Check if other allotted resource is available.",
    "comments": "",
    "x": 774.966552734375,
    "y": 835.8928828239441,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "77bec0eb.5d668",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1128.9833793640137,
    "y": 1049.6772646903992,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "5c010902.1e64d8"
      ]
    ]
  },
  {
    "id": "9692bf9c.5ffa",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 1289.9833297729492,
    "y": 1124.6772892698646,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "722d0ca5.9a3d54",
    "type": "other",
    "name": "outcome 2",
    "xml": "<outcome value='2'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1136.983362197876,
    "y": 920.6772208213806,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "94ad2e31.d7a3e"
      ]
    ]
  },
  {
    "id": "9ff06a7f.769658",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2530.0945949554443,
    "y": 896.6772379875183,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "1207b5bd.65bd4a",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2371.0945949554443,
    "y": 959.6772379875183,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "3b258e58.c08552"
      ]
    ]
  },
  {
    "id": "57dd9846.719728",
    "type": "switchNode",
    "name": "switch mdsal-psd.networks_length",
    "xml": "<switch test='`$mdsal-psd.networks.network_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1565.3168487548828,
    "y": 1049.8997659683228,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "42dfaf86.525d6",
        "d874512e.3c2f3"
      ]
    ]
  },
  {
    "id": "d874512e.3c2f3",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1837.3168716430664,
    "y": 1023.7886009216309,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "ccbd0c47.f16a"
      ]
    ]
  },
  {
    "id": "42dfaf86.525d6",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1831.316993713379,
    "y": 1083.7886009216309,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "156eaea.2042551"
      ]
    ]
  },
  {
    "id": "156eaea.2042551",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Incorrect state found more then 1 network\" />\n    \n",
    "comments": "",
    "x": 1987.969337463379,
    "y": 1084.8904075622559,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "e24945d6.e64ac8",
    "type": "set",
    "name": "set tmp.network.",
    "xml": "<set>\n<parameter name='tmp.network.' value='`$mdsal-psd.networks.network[0].`' />\n",
    "comments": "",
    "x": 2272.76171875,
    "y": 1024.7887563705444,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "5c010902.1e64d8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1301.427734375,
    "y": 1050.7885127067566,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "57dd9846.719728"
      ]
    ]
  },
  {
    "id": "ccbd0c47.f16a",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2029.094581604004,
    "y": 1026.7884788513184,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "e24945d6.e64ac8",
        "36e6716c.6f770e"
      ]
    ]
  },
  {
    "id": "36e6716c.6f770e",
    "type": "for",
    "name": "for nidx..tmp.network.network-data.network-request-input.network...[]",
    "xml": "<for index='nidx' start='0' end='`$tmp.network.network-data.network-request-input.network-input-parameters.param_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 2449.0948486328125,
    "y": 1086.7884664535522,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "e46aaefd.f607b"
      ]
    ]
  },
  {
    "id": "e46aaefd.f607b",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2814.6502323150635,
    "y": 1086.7885255813599,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "4ebafc38.9bc584",
        "d3b38771.361348"
      ]
    ]
  },
  {
    "id": "4ebafc38.9bc584",
    "type": "switchNode",
    "name": "switch access-node-id",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'access-node-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 3019.1604862213135,
    "y": 1089.7989015579224,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "3f5b228d.225fde"
      ]
    ]
  },
  {
    "id": "3f5b228d.225fde",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3206.1604862213135,
    "y": 1090.7989015579224,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "5885ed34.2fa454"
      ]
    ]
  },
  {
    "id": "5885ed34.2fa454",
    "type": "set",
    "name": "set tmp.found-in-network tmp.ep-available",
    "xml": "<set>\n<parameter name='tmp.found-in-network' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
    "comments": "",
    "x": 3457.160493850708,
    "y": 1090.3988437652588,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "d3b38771.361348",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 3002.150384902954,
    "y": 1134.7885007858276,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "afaa2fc8.ec942",
    "type": "switchNode",
    "name": "switch tmp.ep-available",
    "xml": "<switch test='`$tmp.ep-available`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 711.3167114257812,
    "y": 1313.2327876091003,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "465effa9.6427f",
        "c45531af.37393"
      ]
    ]
  },
  {
    "id": "c45531af.37393",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 929.9834308624268,
    "y": 1362.5661444664001,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "a447132c.ff129"
      ]
    ]
  },
  {
    "id": "465effa9.6427f",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 934.8722324371338,
    "y": 1271.5662055015564,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "98f645f2.256338"
      ]
    ]
  },
  {
    "id": "98f645f2.256338",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1081.8722286224365,
    "y": 1273.4550185203552,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "a447132c.ff129",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1100.094518661499,
    "y": 1360.5661025047302,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "b6034c83.e1568"
      ]
    ]
  },
  {
    "id": "5c394256.a4b72c",
    "type": "comment",
    "name": "GET connection-attachment-ar to store AR data from mdsal",
    "info": "",
    "comments": "",
    "x": 2270.4766960144043,
    "y": 437.50391244888306,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "f3cf0d72.a94cd",
    "type": "comment",
    "name": "Set source end point",
    "info": "",
    "comments": "",
    "x": 675.9765739440918,
    "y": 583.2539219856262,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "6c9c6e62.89b72",
    "type": "set",
    "name": "set tmp.ar.parent-service-instance-id",
    "xml": "<set>\n<parameter name='tmp.ar.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n\n",
    "comments": "",
    "x": 729.97265625,
    "y": 721.9999995231628,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "7bd13bf5.d657f4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 965.97265625,
    "y": 749.9999995231628,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "9696eaab.88d618"
      ]
    ]
  },
  {
    "id": "21599ec.9703d62",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 957.8244590759277,
    "y": 785.0660843849182,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "26a3704.033389"
      ]
    ]
  },
  {
    "id": "26a3704.033389",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 1132.97314453125,
    "y": 781.3334345817566,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "9696eaab.88d618",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1116.97265625,
    "y": 747.9999995231628,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "761075c6.da2f4c",
    "type": "set",
    "name": "set tmp.found-in-ar tmp.found-in-network tmp.ep-available to false",
    "xml": "<set>\n<parameter name='tmp.found-in-ar' value='false' />\n<parameter name='tmp.found-in-network' value='false' />\n<parameter name='tmp.ep-available' value='false' />",
    "comments": "",
    "x": 821.97265625,
    "y": 866.9999995231628,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "419a1f7.f1beae",
    "type": "comment",
    "name": "If other EP exists delete from domain controller",
    "info": "",
    "comments": "",
    "x": 761.97265625,
    "y": 1237.9999995231628,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "19fee4f1.0172ab",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 2025.9730224609375,
    "y": 1735.0002546310425,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "d425caaa.8a6858",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.thirdparty-sdnc-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1589.4729614257812,
    "y": 1794.0002546310425,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "4f05b74c.969be8",
        "c7b3919.c8ebe7",
        "40abfefc.3d745"
      ]
    ]
  },
  {
    "id": "4f05b74c.969be8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1828.4729614257812,
    "y": 1747.0002546310425,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "19fee4f1.0172ab"
      ]
    ]
  },
  {
    "id": "c7b3919.c8ebe7",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1831.9639282226562,
    "y": 1794.5742902755737,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "7e0e9058.e96b3"
      ]
    ]
  },
  {
    "id": "40abfefc.3d745",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1827.2969360351562,
    "y": 1835.907603263855,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "6ad29b98.83f084"
      ]
    ]
  },
  {
    "id": "7e0e9058.e96b3",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 2008.5353393554688,
    "y": 1782.860026359558,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "6ad29b98.83f084",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 2015.069492340088,
    "y": 1831.3467960357666,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "77debd2c.f40a64",
    "type": "get-resource",
    "name": "get-resource pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.node-id AND \n\t\t     depth = '0'\"\n        pfx='tmp.aai.pnf' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1539.9730834960938,
    "y": 1667.00031375885,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "b2f42acb.73d9c8",
        "659e715a.79934",
        "79d0fb49.773bc4"
      ]
    ]
  },
  {
    "id": "b2f42acb.73d9c8",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1822.9729309082031,
    "y": 1608.0002002716064,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "ac4575c7.b5d618"
      ]
    ]
  },
  {
    "id": "659e715a.79934",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1826.4638977050781,
    "y": 1655.5742359161377,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "4fe04183.c5614"
      ]
    ]
  },
  {
    "id": "79d0fb49.773bc4",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1821.7969055175781,
    "y": 1696.907548904419,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "5d2c56ed.47c2c8"
      ]
    ]
  },
  {
    "id": "4fe04183.c5614",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 2003.0353088378906,
    "y": 1643.859972000122,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "5d2c56ed.47c2c8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 2009.5694618225098,
    "y": 1692.3467416763306,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "ac4575c7.b5d618",
    "type": "set",
    "name": "set tmp.thirdparty-sdnc-id",
    "xml": "<set>\n<parameter name='tmp.thirdparty-sdnc-id' value=\"`$tmp.aai.pnf.relationship-list.relationship[0].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 2026.9729309082031,
    "y": 1595.0002002716064,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "a421d0fb.ce81c",
    "type": "comment",
    "name": "get domain controller information",
    "info": "",
    "comments": "",
    "x": 1583.4769897460938,
    "y": 1636.0042810440063,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "f8c8821d.d50c3",
    "type": "execute",
    "name": "execute RestApiCallNode Delete ethernet Service",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + 'restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.vpn-name`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1637.9730224609375,
    "y": 1899.0002546310425,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "925b677f.9fd908",
        "cff10bd6.5c54c8"
      ]
    ]
  },
  {
    "id": "925b677f.9fd908",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1924.9729614257812,
    "y": 1922.0002546310425,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "fe5326f7.64a0a8"
      ]
    ]
  },
  {
    "id": "fe5326f7.64a0a8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 2094.972900390625,
    "y": 1925.0002546310425,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "3a5a8a5c.8b0aa6",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
    "comments": "",
    "x": 2094.9730224609375,
    "y": 1881.0002546310425,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "cff10bd6.5c54c8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1927.972900390625,
    "y": 1881.0002546310425,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "3a5a8a5c.8b0aa6"
      ]
    ]
  },
  {
    "id": "b7b5526f.d9371",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 985.734619140625,
    "y": 1896.9525974988937,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "2cde2bd.f2613d4"
      ]
    ]
  },
  {
    "id": "2cde2bd.f2613d4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments": "",
    "x": 1152.2584991455078,
    "y": 1908.5716685056686,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "8465056c.00dde8",
    "type": "failure",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 992.829906463623,
    "y": 1929.7145651578903,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "2cde2bd.f2613d4"
      ]
    ]
  },
  {
    "id": "dd28433d.d632",
    "type": "comment",
    "name": "Save Resource to AAI",
    "info": "",
    "comments": "",
    "x": 704.7823333740234,
    "y": 1879.3019857406616,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "4d323c0f.df7854",
    "type": "comment",
    "name": "TODO: Rework after confirmation from AAI",
    "info": "",
    "comments": "",
    "x": 1005.141242980957,
    "y": 1856.8730244636536,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "ce4db8c8.182408",
    "type": "set",
    "name": "set output to api handler",
    "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='connection-attachment-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $connection-attachment-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments": "",
    "x": 719.5500297546387,
    "y": 1800.8274669647217,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "ea67aab8.ef7588",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 687.9631118774414,
    "y": 1961.4432191848755,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "72567cb3.f1fbd4",
    "type": "execute",
    "name": "execute RestApiCallNode - PUT AR by id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.sotn-attachment.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 769.2821311950684,
    "y": 1708.468240737915,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "4724b378.ec2a2c",
        "4dfcb271.a6386c",
        "4e56cabb.034884"
      ]
    ]
  },
  {
    "id": "4724b378.ec2a2c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1037.9235076904297,
    "y": 1759.799652479589,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "2831c4f6.7c5dbc"
      ]
    ]
  },
  {
    "id": "4dfcb271.a6386c",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1028.9235572814941,
    "y": 1728.2996782287955,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "2831c4f6.7c5dbc"
      ]
    ]
  },
  {
    "id": "4e56cabb.034884",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1032.6735954284668,
    "y": 1698.6567831039429,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "a711cf9d.6d6a"
      ]
    ]
  },
  {
    "id": "2831c4f6.7c5dbc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
    "comments": "",
    "x": 1198.6735954284668,
    "y": 1729.0497020706534,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "a711cf9d.6d6a",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1174.3295631408691,
    "y": 1694.848952293396,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "bc240e74.2145b",
    "type": "set",
    "name": "set ar-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-status.action' value=\"`$connection-attachment-topology-operation-input.request-information.request-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-name' value=\"connection-attachment-topology-operation\" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-action' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$connection-attachment-topology-operation-input.request-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$connection-attachment-topology-operation-input.service-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.` \" />",
    "comments": "",
    "x": 674.4957275390625,
    "y": 1559.8492209911346,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "d8c85975.6bf758",
    "type": "execute",
    "name": "execute getTime",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 691.7815704345703,
    "y": 1632.4688186645508,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "a691ab09.aead58",
    "type": "set",
    "name": "set allotted-resource-oper-status",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='PendingDelete' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-topology-operation-input.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
    "comments": "",
    "x": 741.7686500549316,
    "y": 1669.4198989868164,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "ad638e.fad5cc7",
    "type": "set",
    "name": "set model-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.connection-attachment-topology.onap-model-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.` \" />",
    "comments": "",
    "x": 688.3372688293457,
    "y": 1599.023871421814,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "1b962b1.7c9dad5",
    "type": "comment",
    "name": "Prepare data for allotted-resource addition to MDSAL",
    "info": "This will add to allotted-resource which is present inside service.",
    "comments": "",
    "x": 801.6707305908203,
    "y": 1520.0238234996796,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "aad41a92.c6b998",
    "type": "comment",
    "name": "Add to allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 743.2505569458008,
    "y": 1487.4371252059937,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "53b9be67.07128",
    "type": "update",
    "name": "update AAI allotted-resource",
    "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $connection-attachment-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $connection-attachment-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"description\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-type`\" />\n\t<parameter name=\"selflink\" value=\"`$tmp.ar.self-link`\" />\n\t<parameter name=\"model-invariant-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-invariant-uuid`\" />\n\t<parameter name=\"model-version-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-uuid`\" />\n\t<parameter name=\"operational-status\" value=\"PendingDelete\" />\n",
    "comments": "",
    "outputs": 1,
    "x": 731.2266120910645,
    "y": 1916.7541284561157,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "b7b5526f.d9371",
        "8465056c.00dde8"
      ]
    ]
  },
  {
    "id": "b6034c83.e1568",
    "type": "get-resource",
    "name": "get-resource connectivity",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"connectivity\" \n\t\tkey=\"connectivity.connectivity-id = $mdsal-psd.networks.network[0].network-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.connectivity' local-only='false' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1315.0043029785156,
    "y": 1361.5044565200806,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "e5fcddf9.8d24f"
      ]
    ]
  },
  {
    "id": "2227c12c.941eae",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1316.121467590332,
    "y": 1539.344430923462,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "77debd2c.f40a64",
        "d425caaa.8a6858",
        "f8c8821d.d50c3",
        "6584aa7e.7c6da4",
        "1fbc8c35.8ef854"
      ]
    ]
  },
  {
    "id": "a7e5f7ca.25d0c8",
    "type": "outcome",
    "name": "vpn-binding",
    "xml": "<outcome value='vpn-binding'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1923.2897968292236,
    "y": 1367.8257465362549,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "2227c12c.941eae"
      ]
    ]
  },
  {
    "id": "e5fcddf9.8d24f",
    "type": "for",
    "name": "for each relationship",
    "xml": "<for silentFailure='true' index='vidx' start='0' end='`$tmp.connectivity.relationship-list.relationship_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1537.0041198730469,
    "y": 1368.0041971206665,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "889a6909.fd0648"
      ]
    ]
  },
  {
    "id": "889a6909.fd0648",
    "type": "switchNode",
    "name": "switch related-to",
    "xml": "<switch test='`$tmp.connectivity.relationship-list.relationship[$vidx].related-to`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1744.0041809082031,
    "y": 1367.004243850708,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "a7e5f7ca.25d0c8"
      ]
    ]
  },
  {
    "id": "6584aa7e.7c6da4",
    "type": "set",
    "name": "set tmp.vpn-name",
    "xml": "<set>\n<parameter name='tmp.vpn-name' value=\"`$tmp.connectivity.relationship-list.relationship[$vidx].relationship-data[0].relationship-value` \" />\n",
    "comments": "",
    "x": 1540.0040893554688,
    "y": 1419.004427909851,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "1fbc8c35.8ef854",
    "type": "execute",
    "name": "split vpnName to find nodeId",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.vpn-name`'/>\n<parameter name=\"regex\" value=\"-\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"route1\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 1544.00390625,
    "y": 1524.00390625,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "bd900e2d.e6685",
        "7097b625.7335c8"
      ]
    ]
  },
  {
    "id": "7097b625.7335c8",
    "type": "failure",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1761.00390625,
    "y": 1450.00390625,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "719277cb.1f0738"
      ]
    ]
  },
  {
    "id": "719277cb.1f0738",
    "type": "set",
    "name": "set tmp.node-id",
    "xml": "<set>\n<parameter name='tmp.node-id' value='`$route1[0]`' />\n",
    "comments": "",
    "x": 1968.00390625,
    "y": 1444.00390625,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "188e2bb3.ba9264",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
    "comments": "",
    "x": 1943.00390625,
    "y": 1514.00390625,
    "z": "d3dd528c.9edcf",
    "wires": [
      
    ]
  },
  {
    "id": "bd900e2d.e6685",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1762.00390625,
    "y": 1516.00390625,
    "z": "d3dd528c.9edcf",
    "wires": [
      [
        "188e2bb3.ba9264"
      ]
    ]
  }
]
