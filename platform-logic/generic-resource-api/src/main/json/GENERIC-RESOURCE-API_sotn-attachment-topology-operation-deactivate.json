[
  {
    "id": "8f583882.aaba08",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 107.66669082641602,
    "y": 36.000003814697266,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "1c8f0b92.b2d0f4"
      ]
    ]
  },
  {
    "id": "1c8f0b92.b2d0f4",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 319.6666946411133,
    "y": 108.00002098083496,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "7867cbb1.cd6464"
      ]
    ]
  },
  {
    "id": "7867cbb1.cd6464",
    "type": "method",
    "name": "sotn-attachment-topology-operation-deactivate",
    "xml": "<method rpc='sotn-attachment-topology-operation-deactivate' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 307.6668128967285,
    "y": 196.00000381469727,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "788e5fc3.c5d94"
      ]
    ]
  },
  {
    "id": "788e5fc3.c5d94",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 323.6668128967285,
    "y": 751.0002484321594,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "ed3ad3e3.7e5ae",
        "bfd4a9cf.aa7918",
        "9c88cb66.2575d8",
        "8484c7db.980518",
        "3abce4e4.32a12c",
        "d7eaa0c2.0d298",
        "601263d0.9079dc",
        "290c05a0.21ca9a",
        "dfdf08a.1b550f8",
        "5040dd33.924624",
        "7ff9e776.cf4d98",
        "5af6e72b.9d69a8",
        "2d9aed4c.fcfbd2",
        "1d49bda0.f37e32",
        "285d454d.f5f90a",
        "c5b69925.729378",
        "bc602338.67328",
        "f080d760.856678",
        "8e738bcf.052208"
      ]
    ]
  },
  {
    "id": "ed3ad3e3.7e5ae",
    "type": "set",
    "name": "set tmp.ar.allotted-resource-id,etc",
    "xml": "<set>\n<parameter name='tmp.ar.allotted-resource-id' value='`connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id`' />\n<parameter name='tmp.ar.parent-service-instance-id' value='`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id`' />\n\n\n",
    "comments": "",
    "x": 720.6602516174316,
    "y": 149.99349069595337,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "4411681c.96fbf8",
    "type": "comment",
    "name": "set tmp ar-id to fetch resource from MDSAL",
    "info": "",
    "comments": "",
    "x": 749.6205635070801,
    "y": 114.02528667449951,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "bfd4a9cf.aa7918",
    "type": "set",
    "name": "set tmp.ar.self-link",
    "xml": "<set>\n<parameter name='tmp.ar.self-link' value=\"`'restconf/config/GENERIC-RESOURCE-API:connection-attachment-allotted-resources/connection-attachment-allotted-resource/'\n + $tmp.ar.allotted-resource-id\n + '/allotted-resource-data/connection-attachment-topology/'` \" />\n\n",
    "comments": "",
    "x": 674.6601905822754,
    "y": 242.9934959411621,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "290c05a0.21ca9a",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 680.9220809936523,
    "y": 330.6602249145508,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "9c88cb66.2575d8",
    "type": "execute",
    "name": "generate allotted-resource url",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='replace' >\n    <parameter name=\"source\" value=\"`$prop.restapi.connection-attachment-allottedresource`\"/>\n    <parameter name=\"outputPath\" value=\"tmp.ar-url\"/>\n    <parameter name=\"target\" value=\"{allotted-resource-id}\"/>\n    <parameter name=\"replacement\" value=\"`$tmp.ar.allotted-resource-id`\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 712.9221076965332,
    "y": 418.6602063179016,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "8484c7db.980518",
    "type": "get-resource",
    "name": "get-resource connection-attachment-allotted-resource",
    "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='GENERIC-RESOURCE-API' key='connection-attachment-allotted-resources/connection-attachment-allotted-resource/$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-id/' pfx='mdsal-ar' >\n",
    "comments": "",
    "outputs": 1,
    "x": 783.6602058410645,
    "y": 508.7712650299072,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "4af802cd.0768bc",
        "9704e270.344da"
      ]
    ]
  },
  {
    "id": "eec65610.3652f8",
    "type": "comment",
    "name": "GET connection-attachment-allotted-resource from mdsal",
    "info": "",
    "comments": "",
    "x": 790.4750022888184,
    "y": 480.53858375549316,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "eed42f31.59a27",
    "type": "comment",
    "name": "Used for setting output to API Handler",
    "info": "",
    "comments": "",
    "x": 728.6602210998535,
    "y": 209.99350547790527,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "a03ab63b.9e0678",
    "type": "comment",
    "name": "Obtain different URL, template location etc",
    "info": "For saving resource information to MDSAL & for AAI",
    "comments": "",
    "x": 746.6601867675781,
    "y": 295.88238620758057,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "94d139ba.87f2c8",
    "type": "comment",
    "name": "Used to Get AR by id to MDSAL, same as self-link",
    "info": "",
    "comments": "",
    "x": 772.6602058410645,
    "y": 382.88234519958496,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "4af802cd.0768bc",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1083.333408355713,
    "y": 493.99999618530273,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "a5fa6dd6.43795"
      ]
    ]
  },
  {
    "id": "a5fa6dd6.43795",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1252.3334121704102,
    "y": 492.4998970031738,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "2f8c441e.efd2ec"
      ]
    ]
  },
  {
    "id": "2f8c441e.efd2ec",
    "type": "switchNode",
    "name": "switch cr length",
    "xml": "<switch test='`$mdsal-ar.connection-attachment-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1463.1906547546387,
    "y": 492.11902618408203,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "e3552b55.2b7868",
        "579fccfb.5c4c54"
      ]
    ]
  },
  {
    "id": "e3552b55.2b7868",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1652.5239601135254,
    "y": 492.1189842224121,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "81b472dd.735a8"
      ]
    ]
  },
  {
    "id": "81b472dd.735a8",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic='true'>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1837.0478496551514,
    "y": 489.02381801605225,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "d81a29f1.be9278",
        "d95be879.b1bde8",
        "f4a4bf1b.b7da1"
      ]
    ]
  },
  {
    "id": "31667ce1.fcbca4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 1796.1856498718262,
    "y": 570.0660495758057,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "9704e270.344da",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1075.1852111816406,
    "y": 529.0660810470581,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "766c605e.af77c"
      ]
    ]
  },
  {
    "id": "766c605e.af77c",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1255.1851615905762,
    "y": 529.7326316833496,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "31667ce1.fcbca4"
      ]
    ]
  },
  {
    "id": "579fccfb.5c4c54",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1640.8519134521484,
    "y": 529.3993444442749,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "31667ce1.fcbca4"
      ]
    ]
  },
  {
    "id": "d81a29f1.be9278",
    "type": "set",
    "name": "set connection-attachment-ar from get",
    "xml": "<set>\n<parameter name='connection-attachment-ar.' value='$mdsal-ar.connection-attachment-allotted-resource[0].' />\n",
    "comments": "",
    "x": 2206.1111946105957,
    "y": 456.0000344514847,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "f4a4bf1b.b7da1",
    "type": "set",
    "name": "set oper-status",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-ar.allotted-resource-status.rpc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.svc-request-id`' />\n\n",
    "comments": "",
    "x": 2139.1113624572754,
    "y": 531.428560256958,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "d95be879.b1bde8",
    "type": "switchNode",
    "name": "switch order-status",
    "xml": "<switch test='`$connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2149.111141204834,
    "y": 496.9999942779541,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "e17a8fee.41d4",
        "d3c8707c.374dc"
      ]
    ]
  },
  {
    "id": "e17a8fee.41d4",
    "type": "outcome",
    "name": "outcome Active",
    "xml": "<outcome value='Active'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2384.711223602295,
    "y": 491.0000252723694,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "b89c0370.1273d"
      ]
    ]
  },
  {
    "id": "d3c8707c.374dc",
    "type": "outcome",
    "name": "outcome Other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2378.4256629943848,
    "y": 530.4286332130432,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "e88e83ff.2b0bf"
      ]
    ]
  },
  {
    "id": "b89c0370.1273d",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2599.181739807129,
    "y": 492.3756594657898,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "e88e83ff.2b0bf",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" \n    value=\"`'Existing connection-attachment-allotted-resource with order status of ' + $connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status + '.'`\" />\n",
    "comments": "",
    "x": 2618.3334426879883,
    "y": 533.0000233650208,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "190989d8.d87b76",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:sotn-get-request-input-param",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='connection-attachment-get-request-input-param' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 970.9697303771973,
    "y": 598.4935593605042,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "dfdf08a.1b550f8",
    "type": "block",
    "name": "block: atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 652.9758071899414,
    "y": 598.4998459815979,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "190989d8.d87b76"
      ]
    ]
  },
  {
    "id": "3abce4e4.32a12c",
    "type": "get-resource",
    "name": "get-resource parent-service-data",
    "xml": "<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.mdsal.ConfigResource' resource='GENERIC-RESOURCE-API' key='services/service/$tmp.ar.parent-service-instance-id/service-data' pfx='mdsal-psd' >\n",
    "comments": "",
    "outputs": 1,
    "x": 717.6671180725098,
    "y": 740.5316205024719,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "d140a12c.bd2ea",
        "58621e56.68c4e"
      ]
    ]
  },
  {
    "id": "aa132cfc.b387f",
    "type": "comment",
    "name": "GET parent-service-data from mdsal to check existence of other End point",
    "info": "",
    "comments": "",
    "x": 837.6670570373535,
    "y": 669.5315594673157,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "21ab6599.b5b88a",
    "type": "for",
    "name": "for pidx..mdsal-psd.provided-allotted-resources.provided-allotted-resource[]",
    "xml": "<for index='pidx' start='0' end='`$mdsal-psd.provided-allotted-resources.provided-allotted-resource_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 1726.8515377044678,
    "y": 908.0041127204895,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "c38adf24.2987b"
      ]
    ]
  },
  {
    "id": "d7eaa0c2.0d298",
    "type": "switchNode",
    "name": "switch mdsal-psd.provided-allotted-resources_length",
    "xml": "<switch test='`$mdsal-psd.provided-allotted-resources.provided-allotted-resource_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 783.8508949279785,
    "y": 884.7180829048157,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "bab04a0a.986c28",
        "ab941040.d9d58",
        "e7f0f49a.c55b08"
      ]
    ]
  },
  {
    "id": "bab04a0a.986c28",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1115.9937705993652,
    "y": 1108.5755522474647,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "a85c2828.9226f8"
      ]
    ]
  },
  {
    "id": "edfa14d3.f5d668",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1310.1211261749268,
    "y": 902.7015252113342,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "21ab6599.b5b88a"
      ]
    ]
  },
  {
    "id": "c38adf24.2987b",
    "type": "switchNode",
    "name": "switch allotted-resource-id",
    "xml": "<switch test=\"`$mdsal-psd.provided-allotted-resources.provided-allotted-resource[$cidx].allotted-resource-id == $tmp.ar.allotted-resource-id`\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 2161.962938308716,
    "y": 908.0040097236633,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "3532dc3f.6daa04",
        "1210338.3b3d5cd"
      ]
    ]
  },
  {
    "id": "3532dc3f.6daa04",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2370.7731647491455,
    "y": 880.468499660492,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "7bfabe83.461c6"
      ]
    ]
  },
  {
    "id": "515af9c1.8559f8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2550.5338611602783,
    "y": 944.3256783485413,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "39e1b1c2.1c69fe",
        "9b2b2091.9723d"
      ]
    ]
  },
  {
    "id": "39e1b1c2.1c69fe",
    "type": "set",
    "name": "set tmp.pidx and ptx.consumed-ar",
    "xml": "<set>\n<parameter name='tmp.pidx' value='`$pidx`' />\n<parameter name='tmp.provided-ar.' value='`$mdsal-psd.provided-allotted-resources.provided-allotted-resource[$pidx].`' />\n<parameter name='tmp.found-in-ar' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
    "comments": "",
    "x": 2807.391366958618,
    "y": 918.8971924781799,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "9b2b2091.9723d",
    "type": "break",
    "name": "break",
    "xml": "<break>\n",
    "comments": "",
    "x": 2718.2520847320557,
    "y": 965.6532082557678,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "2b8d3c6c.b14764",
    "type": "comment",
    "name": "Check existence of other AR in parent service data",
    "info": "Check if other allotted resource is available.",
    "comments": "",
    "x": 773.629337310791,
    "y": 818.8928875923157,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "ab941040.d9d58",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1127.6461639404297,
    "y": 1032.6772694587708,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "46264523.92ecdc"
      ]
    ]
  },
  {
    "id": "a85c2828.9226f8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 1288.6461143493652,
    "y": 1107.6772940382361,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "e7f0f49a.c55b08",
    "type": "other",
    "name": "outcome 2",
    "xml": "<outcome value='2'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1135.646146774292,
    "y": 903.6772255897522,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "edfa14d3.f5d668"
      ]
    ]
  },
  {
    "id": "7bfabe83.461c6",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2528.7573795318604,
    "y": 879.6772427558899,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "1210338.3b3d5cd",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 2369.7573795318604,
    "y": 942.6772427558899,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "515af9c1.8559f8"
      ]
    ]
  },
  {
    "id": "e9cc6dee.5133e",
    "type": "switchNode",
    "name": "switch mdsal-psd.networks_length",
    "xml": "<switch test='`$mdsal-psd.networks.network_length`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1563.9796333312988,
    "y": 1032.8997707366943,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "30e9e8da.9a5228",
        "80fd341d.8b4a38"
      ]
    ]
  },
  {
    "id": "80fd341d.8b4a38",
    "type": "other",
    "name": "outcome 1",
    "xml": "<outcome value='1'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1835.9796562194824,
    "y": 1006.7886056900024,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "eab56bbb.5b2d38"
      ]
    ]
  },
  {
    "id": "30e9e8da.9a5228",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1829.979778289795,
    "y": 1066.7886056900024,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "9cd991eb.ad6e9"
      ]
    ]
  },
  {
    "id": "9cd991eb.ad6e9",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: Incorrect state found more then 1 network\" />\n    \n",
    "comments": "",
    "x": 1986.632122039795,
    "y": 1067.8904123306274,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "750841f5.89bfd",
    "type": "set",
    "name": "set tmp.network.",
    "xml": "<set>\n<parameter name='tmp.network.' value='`$mdsal-psd.networks.network[0].`' />\n",
    "comments": "",
    "x": 2271.424503326416,
    "y": 1007.788761138916,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "46264523.92ecdc",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1300.090518951416,
    "y": 1033.7885174751282,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "e9cc6dee.5133e"
      ]
    ]
  },
  {
    "id": "eab56bbb.5b2d38",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 2027.75736618042,
    "y": 1009.7884836196899,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "750841f5.89bfd",
        "56082b6e.f90444"
      ]
    ]
  },
  {
    "id": "56082b6e.f90444",
    "type": "for",
    "name": "for nidx..tmp.network.network-data.network-request-input.network...[]",
    "xml": "<for index='nidx' start='0' end='`$tmp.network.network-data.network-request-input.network-input-parameters.param_length`' >",
    "comments": "",
    "outputs": 1,
    "x": 2447.7576332092285,
    "y": 1069.7884712219238,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "ad111a8e.73a1d8"
      ]
    ]
  },
  {
    "id": "ad111a8e.73a1d8",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 2813.3130168914795,
    "y": 1069.7885303497314,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "92d17a75.9c6dc8",
        "60c80c93.08db54"
      ]
    ]
  },
  {
    "id": "92d17a75.9c6dc8",
    "type": "switchNode",
    "name": "switch access-node-id",
    "xml": "<switch test=\"`$tmp.network.network-data.network-request-input.network-input-parameters.param[$nidx].name == 'access-node-id'`\">",
    "comments": "",
    "outputs": 1,
    "x": 3017.8232707977295,
    "y": 1072.798906326294,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "abca5378.b72d3"
      ]
    ]
  },
  {
    "id": "abca5378.b72d3",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 3204.8232707977295,
    "y": 1073.798906326294,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "db6a8374.5ea08"
      ]
    ]
  },
  {
    "id": "db6a8374.5ea08",
    "type": "set",
    "name": "set tmp.found-in-network tmp.ep-available",
    "xml": "<set>\n<parameter name='tmp.found-in-network' value='true' />\n<parameter name='tmp.ep-available' value='true' />",
    "comments": "",
    "x": 3455.823278427124,
    "y": 1073.3988485336304,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "60c80c93.08db54",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 3000.81316947937,
    "y": 1117.7885055541992,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "601263d0.9079dc",
    "type": "switchNode",
    "name": "switch tmp.ep-available",
    "xml": "<switch test='`$tmp.ep-available`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 709.9794960021973,
    "y": 1296.232792377472,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "89a90f2c.398bf",
        "80d65700.60d008"
      ]
    ]
  },
  {
    "id": "80d65700.60d008",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 928.6462154388428,
    "y": 1345.5661492347717,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "844986d4.f4d158"
      ]
    ]
  },
  {
    "id": "89a90f2c.398bf",
    "type": "outcomeTrue",
    "name": "false",
    "xml": "<outcome value='false'>\n",
    "comments": "",
    "outputs": 1,
    "x": 933.5350170135498,
    "y": 1254.566210269928,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "9208b0d4.846ab"
      ]
    ]
  },
  {
    "id": "9208b0d4.846ab",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1080.5350131988525,
    "y": 1256.4550232887268,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "844986d4.f4d158",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "outputs": 1,
    "x": 1098.757303237915,
    "y": 1343.5661072731018,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "fc82177c.3c8168",
        "6c1300b3.838e9",
        "b83c0ca8.2fbee"
      ]
    ]
  },
  {
    "id": "27f851f0.33167e",
    "type": "comment",
    "name": "GET connection-attachment-ar to store AR data from mdsal",
    "info": "",
    "comments": "",
    "x": 2269.1394805908203,
    "y": 420.50391721725464,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "105428a7.c0fa47",
    "type": "comment",
    "name": "Set source end point",
    "info": "",
    "comments": "",
    "x": 674.6393585205078,
    "y": 566.2539267539978,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "5040dd33.924624",
    "type": "set",
    "name": "set tmp.ar.parent-service-instance-id",
    "xml": "<set>\n<parameter name='tmp.ar.parent-service-instance-id' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id` \" />\n\n",
    "comments": "",
    "x": 728.635440826416,
    "y": 705.0000042915344,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "d140a12c.bd2ea",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 964.635440826416,
    "y": 733.0000042915344,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "ef017607.27ae68"
      ]
    ]
  },
  {
    "id": "58621e56.68c4e",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 956.4872436523438,
    "y": 768.0660891532898,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "50c1da8b.6785d4"
      ]
    ]
  },
  {
    "id": "50c1da8b.6785d4",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"Error: SOTN resource not found\" />\n    \n",
    "comments": "",
    "x": 1131.635929107666,
    "y": 764.3334393501282,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "ef017607.27ae68",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1115.635440826416,
    "y": 731.0000042915344,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "7ff9e776.cf4d98",
    "type": "set",
    "name": "set tmp.found-in-ar tmp.found-in-network tmp.ep-available to false",
    "xml": "<set>\n<parameter name='tmp.found-in-ar' value='false' />\n<parameter name='tmp.found-in-network' value='false' />\n<parameter name='tmp.ep-available' value='false' />",
    "comments": "",
    "x": 820.635440826416,
    "y": 850.0000042915344,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "6020d2b5.ff31bc",
    "type": "comment",
    "name": "If other EP exists delete from domain controller",
    "info": "",
    "comments": "",
    "x": 760.635440826416,
    "y": 1221.0000042915344,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "1d5ec4d8.fd16cb",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 1814.6355590820312,
    "y": 1374.0000200271606,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "6c1300b3.838e9",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.thirdparty-sdnc-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1378.135498046875,
    "y": 1433.0000200271606,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "9b0a24a5.e3c928",
        "3d4157e0.0e2b48",
        "47d559b2.2326f8"
      ]
    ]
  },
  {
    "id": "9b0a24a5.e3c928",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1617.135498046875,
    "y": 1386.0000200271606,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "1d5ec4d8.fd16cb"
      ]
    ]
  },
  {
    "id": "3d4157e0.0e2b48",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1620.62646484375,
    "y": 1433.574055671692,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "4d76fe9.b9e25"
      ]
    ]
  },
  {
    "id": "47d559b2.2326f8",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1615.95947265625,
    "y": 1474.9073686599731,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "4373fee3.5c15e"
      ]
    ]
  },
  {
    "id": "4d76fe9.b9e25",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1797.1978759765625,
    "y": 1421.8597917556763,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "4373fee3.5c15e",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1803.7320289611816,
    "y": 1470.3465614318848,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "fc82177c.3c8168",
    "type": "get-resource",
    "name": "get-resource pnf",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $prop.connection-attachement.access-node-id AND \n\t\t     depth = '0'\"\n        pfx='tmp.aai.pnf' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1324.6355590820312,
    "y": 1246.0000200271606,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "71aef88f.e0bf68",
        "2c74406b.e0e78",
        "5d3880b0.6e762"
      ]
    ]
  },
  {
    "id": "71aef88f.e0bf68",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1671.635498046875,
    "y": 1250.0000505447388,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "a198897a.59b5a8"
      ]
    ]
  },
  {
    "id": "2c74406b.e0e78",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1675.12646484375,
    "y": 1297.57408618927,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "c41f8753.3bbf68"
      ]
    ]
  },
  {
    "id": "5d3880b0.6e762",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1670.45947265625,
    "y": 1338.9073991775513,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "f23816e4.5d6938"
      ]
    ]
  },
  {
    "id": "c41f8753.3bbf68",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 1851.6978759765625,
    "y": 1285.8598222732544,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "f23816e4.5d6938",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
    "comments": "",
    "x": 1858.2320289611816,
    "y": 1334.346591949463,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "a198897a.59b5a8",
    "type": "set",
    "name": "set tmp.thirdparty-sdnc-id",
    "xml": "<set>\n<parameter name='tmp.thirdparty-sdnc-id' value=\"`$tmp.aai.pnf.relationship-list.relationship[0].relationship-data[0].relationship-value`\" />\n",
    "comments": "",
    "x": 1875.635498046875,
    "y": 1237.0000505447388,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "193624d6.cf45fb",
    "type": "comment",
    "name": "get domain controller information",
    "info": "",
    "comments": "",
    "x": 1369.1394271850586,
    "y": 1212.0039176940918,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "b83c0ca8.2fbee",
    "type": "execute",
    "name": "execute RestApiCallNode Delete ethernet Service",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + 'restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $prop.connection-attachment.sotnVpnName`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"delete\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1426.6355590820312,
    "y": 1538.0000200271606,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "157d151e.8db5fb",
        "dc587393.0f491"
      ]
    ]
  },
  {
    "id": "157d151e.8db5fb",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1713.635498046875,
    "y": 1561.0000200271606,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "22b1ca9.6034f36"
      ]
    ]
  },
  {
    "id": "22b1ca9.6034f36",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">",
    "atomic": "true",
    "comments": "",
    "outputs": 1,
    "x": 1883.6354370117188,
    "y": 1564.0000200271606,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "949096af.7825e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create vpn rest api\" />\n",
    "comments": "",
    "x": 1883.6355590820312,
    "y": 1520.0000200271606,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "dc587393.0f491",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1716.6354370117188,
    "y": 1520.0000200271606,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "949096af.7825e8"
      ]
    ]
  },
  {
    "id": "83d13f6d.0d8cd",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 984.397403717041,
    "y": 1879.9526022672653,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "3bbdd84b.d766e8"
      ]
    ]
  },
  {
    "id": "3bbdd84b.d766e8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
    "comments": "",
    "x": 1150.9212837219238,
    "y": 1891.5716732740402,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "55a09cbe.8cef84",
    "type": "failure",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 991.4926910400391,
    "y": 1912.714569926262,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "3bbdd84b.d766e8"
      ]
    ]
  },
  {
    "id": "5f6a467a.dfacc8",
    "type": "comment",
    "name": "Save Resource to AAI",
    "info": "",
    "comments": "",
    "x": 703.4451179504395,
    "y": 1862.3019905090332,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "79627cb0.0dbb74",
    "type": "comment",
    "name": "TODO: Rework after confirmation from AAI",
    "info": "",
    "comments": "",
    "x": 1003.804027557373,
    "y": 1839.8730292320251,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "bc602338.67328",
    "type": "set",
    "name": "set output to api handler",
    "xml": "<set>\n<parameter name='allotted-resource-id' value='`$tmp.ar.allotted-resource-id`' />\n<parameter name='connection-attachment-object-path' value=\"`$tmp.ar.self-link`\"/>\n<parameter name='service-object-path' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $connection-attachment-topology-operation-input.service-information.service-instance-id\n + '/service-data/service-topology/'`\"/>\n \n",
    "comments": "",
    "x": 718.2128143310547,
    "y": 1783.8274717330933,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "f080d760.856678",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 686.6258964538574,
    "y": 1944.443223953247,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "c5b69925.729378",
    "type": "execute",
    "name": "execute RestApiCallNode - PUT AR by id",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='templateFileName' value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.sotn-attachment.templatefile`\" />\n    <parameter name='restapiUrl' value='`$prop.controller.url + $tmp.ar-url`' />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='PUT' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-ar\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 767.9449157714844,
    "y": 1691.4682455062866,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "c8f2c95e.7a0b78",
        "edc7bb51.8c2ee8",
        "a8558f0e.c66f3"
      ]
    ]
  },
  {
    "id": "c8f2c95e.7a0b78",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1036.5862922668457,
    "y": 1742.7996572479606,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "456ce311.27ccec"
      ]
    ]
  },
  {
    "id": "edc7bb51.8c2ee8",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1027.5863418579102,
    "y": 1711.299682997167,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "456ce311.27ccec"
      ]
    ]
  },
  {
    "id": "a8558f0e.c66f3",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1031.3363800048828,
    "y": 1681.6567878723145,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "fc3cc6b.7a5fa38"
      ]
    ]
  },
  {
    "id": "456ce311.27ccec",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating md-sal for connection-attachment-allotted-resource\" />\n",
    "comments": "",
    "x": 1197.3363800048828,
    "y": 1712.049706839025,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "fc3cc6b.7a5fa38",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1172.9923477172852,
    "y": 1677.8489570617676,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "5af6e72b.9d69a8",
    "type": "set",
    "name": "set ar-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-status.action' value=\"`$connection-attachment-topology-operation-input.request-information.request-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-name' value=\"connection-attachment-topology-operation\" />\n<parameter name='connection-attachment-ar.allotted-resource-status.rpc-action' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.request-information.' value=\"`$connection-attachment-topology-operation-input.request-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.sdnc-request-header.' value=\"`$connection-attachment-topology-operation-input.sdnc-request-header.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.service-information.' value=\"`$connection-attachment-topology-operation-input.service-information.` \" />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-operation-information.allotted-resource-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.` \" />",
    "comments": "",
    "x": 673.1585121154785,
    "y": 1542.8492257595062,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "1d49bda0.f37e32",
    "type": "execute",
    "name": "execute getTime",
    "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='setTime' >\n    <parameter name=\"outputPath\" value=\"tmp.current-time\" />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 690.4443550109863,
    "y": 1615.4688234329224,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        
      ]
    ]
  },
  {
    "id": "285d454d.f5f90a",
    "type": "set",
    "name": "set allotted-resource-oper-status",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.order-status' value='PendingDelete' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-action' value='`$connection-attachment-topology-operation-input.request-information.request-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-rpc-action' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.last-svc-request-id' value='`$connection-attachment-topology-operation-input.sdnc-request-header.svc-request-id`' />\n<parameter name='connection-attachment-ar.allotted-resource-data.allotted-resource-oper-status.create-timestamp' value='`$tmp.current-time`' />\n",
    "comments": "",
    "x": 740.4314346313477,
    "y": 1652.419903755188,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "2d9aed4c.fcfbd2",
    "type": "set",
    "name": "set model-data",
    "xml": "<set>\n<parameter name='connection-attachment-ar.allotted-resource-data.connection-attachment-topology.onap-model-information.' value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.` \" />",
    "comments": "",
    "x": 687.0000534057617,
    "y": 1582.0238761901855,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "9565d730.07f7d8",
    "type": "comment",
    "name": "Prepare data for allotted-resource addition to MDSAL",
    "info": "This will add to allotted-resource which is present inside service.",
    "comments": "",
    "x": 800.3335151672363,
    "y": 1503.0238282680511,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "b61bb52.fd12048",
    "type": "comment",
    "name": "Add to allotted-resources in mdsal",
    "info": "",
    "comments": "",
    "x": 741.9133415222168,
    "y": 1470.4371299743652,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      
    ]
  },
  {
    "id": "8e738bcf.052208",
    "type": "update",
    "name": "update AAI allotted-resource",
    "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"allotted-resource\" \n\t\tkey=\"customer.global-customer-id = $connection-attachment-topology-operation-input.service-information.global-customer-id AND\n\t\t\tservice-subscription.service-type = $connection-attachment-topology-operation-input.service-information.subscription-service-type AND\n\t\t\tservice-instance.service-instance-id = $connection-attachment-topology-operation-input.allotted-resource-information.parent-service-instance-id AND\n\t\t\tallotted-resource.id = $tmp.ar.allotted-resource-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"description\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.allotted-resource-type`\" />\n\t<parameter name=\"selflink\" value=\"`$tmp.ar.self-link`\" />\n\t<parameter name=\"model-invariant-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-invariant-uuid`\" />\n\t<parameter name=\"model-version-id\" value=\"`$connection-attachment-topology-operation-input.allotted-resource-information.onap-model-information.model-uuid`\" />\n\t<parameter name=\"operational-status\" value=\"PendingDelete\" />\n",
    "comments": "",
    "outputs": 1,
    "x": 729.8893966674805,
    "y": 1899.7541332244873,
    "z": "b5ee72b6.6e8c5",
    "wires": [
      [
        "83d13f6d.0d8cd",
        "55a09cbe.8cef84"
      ]
    ]
  }
]
