[
    {
        "id": "3a09fc70.fad8d4",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 149.56666564941406,
        "y": 131.56666564941406,
        "z": "b88832a3.96c4c8",
        "wires": [
            [
                "168caa1c.41dcf6"
            ]
        ]
    },
    {
        "id": "168caa1c.41dcf6",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API 888",
        "module": "GENERIC-RESOURCE-API",
        "version": "888",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='888'>",
        "outputs": 1,
        "x": 433.85235595703125,
        "y": 192.8047742843628,
        "z": "b88832a3.96c4c8",
        "wires": [
            [
                "952f2b0e.26e698"
            ]
        ]
    },
    {
        "id": "952f2b0e.26e698",
        "type": "method",
        "name": "method p2p-vnf-topology-operation-p2p-callbackdg-notification",
        "xml": "<method rpc='p2p-vnf-topology-operation-p2p-callbackdg-notification' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 420.99525451660156,
        "y": 268.5666961669922,
        "z": "b88832a3.96c4c8",
        "wires": [
            [
                "3e8ccd3.e3636b2"
            ]
        ]
    },
    {
        "id": "aaf25071.bda21",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1008.8047027587891,
        "y": 493.23333740234375,
        "z": "b88832a3.96c4c8",
        "wires": [
            [
                "aa57cf0f.26b688",
                "db7f4638.552cb8",
                "45fe05e4.ea10c4",
                "a0587b08.08777",
                "fff7b9b7.2af748",
                "23a47076.84785",
                "991df3c2.230cc8"
            ]
        ]
    },
    {
        "id": "9d09c472.dc19b",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1000.5666656494141,
        "y": 269.56666564941406,
        "z": "b88832a3.96c4c8",
        "wires": [
            []
        ]
    },
    {
        "id": "aa57cf0f.26b688",
        "type": "set",
        "name": "set received notification parameters",
        "xml": "<set>\n<!--<parameter name='rcvdNotif' value='`$notifvalue`' />-->\n<parameter name='rcvd-etht-svc-end-point' value='`$push-change-update.datastore-changes.payload.parameter-value[0].etht-svc-end-point`' />\n<parameter name='rcvd-subscription-id' value='`$push-change-update.subscription-id`' />\n<parameter name='rcvd-bandwidth-value' value='`$push-change-update.datastore-changes.payload.parameter-value[0].value`' />\n<parameter name='rcvd-service-instance-id' value='`$push-change-update.datastore-changes.payload.parameter-value[0].value-description`' />",
        "comments": "",
        "x": 1329.566665649414,
        "y": 451.566650390625,
        "z": "b88832a3.96c4c8",
        "wires": []
    },
    {
        "id": "4699eb86.540554",
        "type": "record",
        "name": "record",
        "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\" />\n<parameter name=\"level\" value=\"info\" />\n<parameter name=\"field1\" value=\"CallBack DG For SSE CONNECTION is called\"/>\n<!--<parameter name=\"field2\" value=\"`$rcvdNotif`\"/>-->",
        "comments": "",
        "outputs": 1,
        "x": 964.5667266845703,
        "y": 213.56666564941406,
        "z": "b88832a3.96c4c8",
        "wires": [
            []
        ]
    },
    {
        "id": "23a47076.84785",
        "type": "save",
        "name": "save:metadata to AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource=\"service-instance:metadata\"\n key=\"service-instance.service-instance-id =  $rcvd-service-instance-id\n AND customer.global-customer-id = 'IBNCustomer' \n AND service-subscription.service-type = 'IBN'\"  force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"metadata.metadatum[0].metaname\" value=\"`$rcvd-etht-svc-end-point`\" />\n    <parameter name=\"metadata.metadatum[0].metaval\" value=\"`$rcvd-bandwidth-value`\" />\n\n    \n",
        "comments": "",
        "outputs": 1,
        "x": 1267.566650390625,
        "y": 661.566650390625,
        "z": "b88832a3.96c4c8",
        "wires": [
            []
        ]
    },
    {
        "id": "a0587b08.08777",
        "type": "set",
        "name": "set parameters",
        "xml": "<set>\n<parameter name='eventIdUuid' value=\"`'BandwidthChanged_' + $eventId-uuid`\" />\n<parameter name='eventNameUuid' value='`$eventName-uuid`' />\n<parameter name='cclId' value='`$rcvd-service-instance-id`' />\n<parameter name='uniId' value='`$rcvd-etht-svc-end-point`' />\n<parameter name='bandwidthValue' value='`$rcvd-bandwidth-value`' />\n",
        "comments": "",
        "x": 1258.566650390625,
        "y": 989.5666198730469,
        "z": "b88832a3.96c4c8",
        "wires": []
    },
    {
        "id": "fff7b9b7.2af748",
        "type": "execute",
        "name": "execute RestApiCallNode call VES",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.p2p-call-ves.templatefile`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.dcaeAddrAndPort + '/eventListener/v7'`\" />-->\n<parameter name=\"restapiUrl\" value=\"https://dcae-ves-collector:8443/eventListener/v7\" />\n<parameter name=\"restapiUser\" value=\"sample1\" />\n<parameter name=\"restapiPassword\" value=\"sample1\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"ves-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n<parameter name=\"disableHostVerification\" value=\"true\"/>\n<parameter name=\"ssl\" value=\"false\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1316.566650390625,
        "y": 1032.5666198730469,
        "z": "b88832a3.96c4c8",
        "wires": [
            []
        ]
    },
    {
        "id": "db7f4638.552cb8",
        "type": "execute",
        "name": "execute UUID generator for eventId",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"eventId-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1320.566650390625,
        "y": 897.5666198730469,
        "z": "b88832a3.96c4c8",
        "wires": [
            []
        ]
    },
    {
        "id": "45fe05e4.ea10c4",
        "type": "execute",
        "name": "execute UUID generator for eventName",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"eventName-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 1333.566650390625,
        "y": 939.5666198730469,
        "z": "b88832a3.96c4c8",
        "wires": [
            []
        ]
    },
    {
        "id": "3f0e3083.b3f668",
        "type": "comment",
        "name": "Calling VES and passing notification parameters",
        "info": "",
        "comments": "",
        "x": 1347.566650390625,
        "y": 842.5666198730469,
        "z": "b88832a3.96c4c8",
        "wires": []
    },
    {
        "id": "99a9316.f88035",
        "type": "switchNode",
        "name": "switch change type == upadte",
        "xml": "<switch test=\"`$push-change-update.datastore-changes.type == 'update' `\">\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1025.566665649414,
        "y": 344.566650390625,
        "z": "b88832a3.96c4c8",
        "wires": [
            [
                "86fcedb4.196448"
            ]
        ]
    },
    {
        "id": "86fcedb4.196448",
        "type": "outcome",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1240.566665649414,
        "y": 342.566650390625,
        "z": "b88832a3.96c4c8",
        "wires": [
            [
                "aaf25071.bda21"
            ]
        ]
    },
    {
        "id": "3e8ccd3.e3636b2",
        "type": "block",
        "name": "block",
        "xml": "<block>",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 755.5666656494141,
        "y": 269.566650390625,
        "z": "b88832a3.96c4c8",
        "wires": [
            [
                "4699eb86.540554",
                "9d09c472.dc19b",
                "99a9316.f88035"
            ]
        ]
    },
    {
        "id": "991df3c2.230cc8",
        "type": "save",
        "name": "update:metadata to AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource=\"service-instance\"\n key=\"service-instance.service-instance-id =  $rcvd-service-instance-id\n AND customer.global-customer-id = 'IBNCustomer' \n AND service-subscription.service-type = 'IBN'\n AND metadatum.metaname = $rcvd-etht-svc-end-point\"  force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"metaname\" value=\"`$rcvd-etht-svc-end-point`\" />\n    <parameter name=\"metaval\" value=\"`$rcvd-bandwidth-value`\" />\n\n    \n<!--AND metadatum.metaname = $rcvd-etht-svc-end-point-->\n\n<!--<parameter name=\"metadata.metadatum[0].metaname\" value=\"`$rcvd-etht-svc-end-point`\" />-->\n<!--    <parameter name=\"metadata.metadatum[0].metaval\" value=\"`$rcvd-bandwidth-value`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 1276.566650390625,
        "y": 716.566650390625,
        "z": "b88832a3.96c4c8",
        "wires": [
            []
        ]
    }
]