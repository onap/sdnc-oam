[
    {
        "id": "ddcbfd5f.bb1de",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 155.56666564941406,
        "y": 170.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d01eaa9a.bdb41"
            ]
        ]
    },
    {
        "id": "d01eaa9a.bdb41",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 380.85235595703125,
        "y": 244.8047742843628,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a0b50663.5d14e8"
            ]
        ]
    },
    {
        "id": "a0b50663.5d14e8",
        "type": "method",
        "name": "method p2p-vnf-topology-operation-p2p-modify",
        "xml": "<method rpc='p2p-vnf-topology-operation-p2p-modify' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 386.9952697753906,
        "y": 329.5666961669922,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "82a29aaa.9a0a1"
            ]
        ]
    },
    {
        "id": "82a29aaa.9a0a1",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 756.8047027587891,
        "y": 354.2333526611328,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "b4644673.9f71b8",
                "8315fe04.e52c6",
                "6fa09b7e.ec21fc"
            ]
        ]
    },
    {
        "id": "b4644673.9f71b8",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1012.1381988525391,
        "y": 508.1636505126953,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "8315fe04.e52c6",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1079.566665649414,
        "y": 327.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "95d8ce07.ebba18",
                "13a6217f.6ce457",
                "7af5d8aa.bec338"
            ]
        ]
    },
    {
        "id": "95d8ce07.ebba18",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1304.566665649414,
        "y": 185.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a4234aaa.a667b"
            ]
        ]
    },
    {
        "id": "13a6217f.6ce457",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1300.057632446289,
        "y": 255.1407012939453,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7db07d2f.17a0a4"
            ]
        ]
    },
    {
        "id": "7af5d8aa.bec338",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1288.566665649414,
        "y": 301.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7e704fca.f891a8"
            ]
        ]
    },
    {
        "id": "a4234aaa.a667b",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1543.566665649414,
        "y": 182.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "642f7eb2.7cf9f8",
                "ab283eb8.ca34a8"
            ]
        ]
    },
    {
        "id": "7db07d2f.17a0a4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1453.6290435791016,
        "y": 258.4264373779297,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "7e704fca.f891a8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1457.566665649414,
        "y": 302.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "642f7eb2.7cf9f8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1756.566665649414,
        "y": 206.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "e7e1448c.9057c"
            ]
        ]
    },
    {
        "id": "ab283eb8.ca34a8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1758.566665649414,
        "y": 146.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "f0469b2f.513798",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1058.566665649414,
        "y": 215.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "e7e1448c.9057c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1701.566665649414,
        "y": 388.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a6e6ba84.23573",
                "61180225.e94b74",
                "8a669443.dc963",
                "ae09477d.84538"
            ]
        ]
    },
    {
        "id": "8f5e448e.abc14",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-name`\" />\n<!--<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-id`\" />-->\n\n\n",
        "comments": "",
        "x": 4270.566665649414,
        "y": 895.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "44b7f5b2.a71ba4",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='network-route-B' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 4271.566665649414,
        "y": 950.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "6a17cc14.2a5d84",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2227.566665649414,
        "y": 345.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "fb83eb71.37636",
                "8ea613be.2b903",
                "5b991b87.d13444"
            ]
        ]
    },
    {
        "id": "fb83eb71.37636",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2443.566665649414,
        "y": 412.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "26fcae3.529cbd2"
            ]
        ]
    },
    {
        "id": "8ea613be.2b903",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2444.057632446289,
        "y": 312.14064025878906,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a8af4cf2.6f517"
            ]
        ]
    },
    {
        "id": "5b991b87.d13444",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2439.566665649414,
        "y": 361.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "190a4dac.bdbeda"
            ]
        ]
    },
    {
        "id": "a8af4cf2.6f517",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2621.629165649414,
        "y": 312.42640686035156,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "190a4dac.bdbeda",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2621.566665649414,
        "y": 361.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "f362796c.c34958",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 3496.566665649414,
        "y": 866.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "c129121f.7e0af",
                "947586d1.b5e3b8",
                "9ac0674a.cdfe18"
            ]
        ]
    },
    {
        "id": "c129121f.7e0af",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3788.057632446289,
        "y": 845.1406402587891,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "e0775b98.3331e8"
            ]
        ]
    },
    {
        "id": "947586d1.b5e3b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3776.566665649414,
        "y": 889.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "b2952f06.22da9"
            ]
        ]
    },
    {
        "id": "e0775b98.3331e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3936.629165649414,
        "y": 845.4264068603516,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "b2952f06.22da9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3935.566665649414,
        "y": 889.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "9ac0674a.cdfe18",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3782.566665649414,
        "y": 936.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "9a36d0a4.a0e6c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3936.566665649414,
        "y": 975.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "8f5e448e.abc14",
                "44b7f5b2.a71ba4",
                "d7653b51.483d6",
                "48c30fb1.62c97",
                "edeec8f4.3ecc78",
                "fafa14c8.d62a2",
                "2c08b617.c95ae2",
                "72ddad65.7b538c",
                "f808ec51.e51a2",
                "5319831a.8a73d4",
                "1b2bb0cd.80285f",
                "d0b7e124.7ac88",
                "cc077299.29ac2"
            ]
        ]
    },
    {
        "id": "d7653b51.483d6",
        "type": "save",
        "name": "get network-route-A from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-A'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-A\">",
        "comments": "",
        "outputs": 1,
        "x": 4283.566665649414,
        "y": 1018.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "da1bda82.a8bb48",
                "e91c7e03.7a5258",
                "d033ef76.4a3de8"
            ]
        ]
    },
    {
        "id": "48c30fb1.62c97",
        "type": "save",
        "name": "get network-route-B from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-B'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-B\">",
        "comments": "",
        "outputs": 1,
        "x": 4262.566665649414,
        "y": 1620.5665435791016,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "402ab4a5.45bb74",
                "a55bf533.73a41",
                "d22044e0.9b12d"
            ]
        ]
    },
    {
        "id": "da1bda82.a8bb48",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4484.566665649414,
        "y": 902.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "e8b79258.3d97b8"
            ]
        ]
    },
    {
        "id": "e91c7e03.7a5258",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4480.075698852539,
        "y": 951.9926910400391,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "cb4cd7a3.a9aee8"
            ]
        ]
    },
    {
        "id": "d033ef76.4a3de8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4484.075698852539,
        "y": 1002.9926910400391,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "cd1e2d0e.45655"
            ]
        ]
    },
    {
        "id": "e8b79258.3d97b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4633.138198852539,
        "y": 901.8524322509766,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "cb4cd7a3.a9aee8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4623.075698852539,
        "y": 951.9926910400391,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "402ab4a5.45bb74",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4485.566665649414,
        "y": 1590.5665435791016,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "f49a9655.33ebd"
            ]
        ]
    },
    {
        "id": "a55bf533.73a41",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4481.075698852539,
        "y": 1639.9925689697266,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "b4356799.29ba18"
            ]
        ]
    },
    {
        "id": "d22044e0.9b12d",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4485.075698852539,
        "y": 1690.9925689697266,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "96d94f1e.d860c8"
            ]
        ]
    },
    {
        "id": "f49a9655.33ebd",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4634.138198852539,
        "y": 1589.852310180664,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "b4356799.29ba18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4624.075698852539,
        "y": 1639.9925689697266,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "95d27f2.942638",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5298.233169555664,
        "y": 1046.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "4345e1a6.99df8",
                "5624a6ad.11ac98",
                "f58ebb7c.2941f",
                "db248968.47977",
                "74184a61.e9795c"
            ]
        ]
    },
    {
        "id": "649a8c8d.aa12f4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5125.566665649414,
        "y": 1047.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "95d27f2.942638"
            ]
        ]
    },
    {
        "id": "58f2ca3c.f0d86c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5135.057632446289,
        "y": 1090.1407012939453,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "4512e6d0.ea9588"
            ]
        ]
    },
    {
        "id": "3bd7b8bd.687ff8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5123.566665649414,
        "y": 1136.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "aafaf0e9.5a7a18"
            ]
        ]
    },
    {
        "id": "4512e6d0.ea9588",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 5288.629043579102,
        "y": 1093.4264373779297,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "aafaf0e9.5a7a18",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 5292.566665649414,
        "y": 1137.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "cd1e2d0e.45655",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4645.566665649414,
        "y": 1004.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "ee1abaff.1765f",
                "20566af9.0efb6e"
            ]
        ]
    },
    {
        "id": "96d94f1e.d860c8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4635.566665649414,
        "y": 1692.5665435791016,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "80075502.a8ac88",
                "6433fb54.cea88c"
            ]
        ]
    },
    {
        "id": "736af299.58850c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5266.233169555664,
        "y": 1882.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "b4ce1134.fd66c",
                "7f0a8691.269718",
                "bf5c0a25.24f238",
                "d3e75f81.af2628",
                "70c0dc68.df6fb4"
            ]
        ]
    },
    {
        "id": "4cbfb5bf.7a7d84",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5093.566665649414,
        "y": 1883.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "736af299.58850c"
            ]
        ]
    },
    {
        "id": "e6d351c5.5eee38",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5103.057632446289,
        "y": 1926.1407012939453,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "3231e87c.cbbda"
            ]
        ]
    },
    {
        "id": "fa8a4402.563b98",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5091.566665649414,
        "y": 1972.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "360725da.de19ba"
            ]
        ]
    },
    {
        "id": "3231e87c.cbbda",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 5256.629043579102,
        "y": 1929.4264373779297,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "360725da.de19ba",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 5260.566665649414,
        "y": 1973.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "4345e1a6.99df8",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5562.566665649414,
        "y": 1030.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "e80c8b0d.7c2378",
                "fc0b2d71.bed77"
            ]
        ]
    },
    {
        "id": "fc0b2d71.bed77",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5785.566665649414,
        "y": 985.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d18df6.c5b4a208"
            ]
        ]
    },
    {
        "id": "e80c8b0d.7c2378",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5787.566665649414,
        "y": 1049.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "30bebe5d.45b272"
            ]
        ]
    },
    {
        "id": "a159246a.3689e",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 6120.566665649414,
        "y": 940.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "30bebe5d.45b272",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5949.566665649414,
        "y": 1045.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "d18df6.c5b4a208",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5950.566665649414,
        "y": 982.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a9c159b9.ce2428",
                "a159246a.3689e"
            ]
        ]
    },
    {
        "id": "a9c159b9.ce2428",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 6121.566665649414,
        "y": 1048.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "9d424a4f.768e18",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 6122.566665649414,
        "y": 997.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "5624a6ad.11ac98",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5609.566665649414,
        "y": 1099.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "e0763115.53cad",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 5498.566665649414,
        "y": 1140.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "b4ce1134.fd66c",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5552.566665649414,
        "y": 1886.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "4e1e1109.08caf",
                "5bb5a9a3.166e58"
            ]
        ]
    },
    {
        "id": "5bb5a9a3.166e58",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5775.566665649414,
        "y": 1841.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "799aaa60.bb3384"
            ]
        ]
    },
    {
        "id": "4e1e1109.08caf",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5777.566665649414,
        "y": 1905.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a8eedff4.fafe5"
            ]
        ]
    },
    {
        "id": "8470a8b2.9b65e8",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 6110.566665649414,
        "y": 1799.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "a8eedff4.fafe5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5936.566665649414,
        "y": 1924.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "799aaa60.bb3384",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5940.566665649414,
        "y": 1838.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "8470a8b2.9b65e8",
                "da88fdee.df55f8"
            ]
        ]
    },
    {
        "id": "da88fdee.df55f8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 6111.566665649414,
        "y": 1904.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "b205821e.538c98",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 6106.566665649414,
        "y": 1853.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "bf5c0a25.24f238",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 5554.566665649414,
        "y": 2045.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "7f0a8691.269718",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5599.566665649414,
        "y": 1955.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "b4fd857e.4261c8",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 5488.566665649414,
        "y": 1993.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "edeec8f4.3ecc78",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4483.566665649414,
        "y": 2290.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "fafa14c8.d62a2",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='prop.connection-attachment.access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='prop.connection-attachment.access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='prop.connection-attachment.access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='prop.connection-attachment.access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='prop.connection-attachment.access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n\n<!--<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />-->\n",
        "comments": "",
        "x": 4277.566665649414,
        "y": 2191.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "97420cfc.5d814",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "put proper values for src topology-id, node-id, ltp-id, etc (in domain A)\nand dst topology-id, node-id, ltp-id, etc (in domain B)",
        "comments": "",
        "x": 4251.566665649414,
        "y": 2144.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "f58ebb7c.2941f",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 5692.566665649414,
        "y": 1237.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "d3e75f81.af2628",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 5681.566665649414,
        "y": 2110.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "97935b29.df3748",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6736.566665649414,
        "y": 757.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "331b6c70.a40c74",
                "6a6faaf6.53b63c",
                "71044af4.4e2644"
            ]
        ]
    },
    {
        "id": "26fcae3.529cbd2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2623.566665649414,
        "y": 412.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "1338b41b.588054"
            ]
        ]
    },
    {
        "id": "d0e35486.30376",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1020.5667877197266,
        "y": 807.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "701c1017.a144e8"
            ]
        ]
    },
    {
        "id": "3d620757.7584",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2186.566665649414,
        "y": 506.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "69670187.8633e8",
                "b18121c8.1c36a8"
            ]
        ]
    },
    {
        "id": "b18121c8.1c36a8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2507.566665649414,
        "y": 488.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "69670187.8633e8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2489.566665649414,
        "y": 586.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "ab95e959.01173"
            ]
        ]
    },
    {
        "id": "92c7bd04.3225a8",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n<parameter name='currLinkIsFound' value=\"false\" />\n\n\n",
        "comments": "",
        "x": 1443.566665649414,
        "y": 710.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "701c1017.a144e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1197.566665649414,
        "y": 800.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "92c7bd04.3225a8",
                "5215d3fc.f47fcc",
                "ce603077.58648"
            ]
        ]
    },
    {
        "id": "5a4af67b.9d1cb8",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 4825.566665649414,
        "y": 1009.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "ee1abaff.1765f",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4868.566665649414,
        "y": 1074.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "649a8c8d.aa12f4",
                "58f2ca3c.f0d86c",
                "3bd7b8bd.687ff8"
            ]
        ]
    },
    {
        "id": "80075502.a8ac88",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4865.566665649414,
        "y": 1918.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "4cbfb5bf.7a7d84",
                "e6d351c5.5eee38",
                "fa8a4402.563b98"
            ]
        ]
    },
    {
        "id": "13bbcd6e.cf2aeb",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 4826.566665649414,
        "y": 1862.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "1338b41b.588054",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2916.566665649414,
        "y": 359.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "ae1c79d4.09edd",
                "73ec9920.b3d658",
                "948f6f81.9d1ac8"
            ]
        ]
    },
    {
        "id": "73ec9920.b3d658",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3190.057632446289,
        "y": 252.14064025878906,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7bde7846.a11d4"
            ]
        ]
    },
    {
        "id": "7bde7846.a11d4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3367.629165649414,
        "y": 252.42640686035156,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "948f6f81.9d1ac8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3185.566665649414,
        "y": 301.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "4cb3b89.3eeae48"
            ]
        ]
    },
    {
        "id": "4cb3b89.3eeae48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3367.566665649414,
        "y": 301.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "ae1c79d4.09edd",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3189.566665649414,
        "y": 352.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "65809ea8.bff89"
            ]
        ]
    },
    {
        "id": "65809ea8.bff89",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3369.566665649414,
        "y": 352.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "3d620757.7584"
            ]
        ]
    },
    {
        "id": "e330d8dd.a46c38",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 795.5666656494141,
        "y": 736.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "2af1221c.3c43fe"
            ]
        ]
    },
    {
        "id": "2af1221c.3c43fe",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1066.566665649414,
        "y": 732.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d0e35486.30376"
            ]
        ]
    },
    {
        "id": "9a0b1d59.d3ffb",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3345.566665649414,
        "y": 550.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7f4522af.5ffe14"
            ]
        ]
    },
    {
        "id": "7f4522af.5ffe14",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3522.5665435791016,
        "y": 543.5665435791016,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "3a169d9e.8346aa",
                "e28a28f8.05b03"
            ]
        ]
    },
    {
        "id": "3a169d9e.8346aa",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 3765.5665435791016,
        "y": 500.56654357910156,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "e28a28f8.05b03",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 3754.5665435791016,
        "y": 555.5665435791016,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "2c07b07d.c3f6d",
                "f125c8bb.d30da8",
                "178bfd62.a6bb5b"
            ]
        ]
    },
    {
        "id": "178bfd62.a6bb5b",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4007.566665649414,
        "y": 441.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a981f115.d2b588"
            ]
        ]
    },
    {
        "id": "a981f115.d2b588",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4156.138198852539,
        "y": 441.85243225097656,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "e297d04c.221cc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4155.075698852539,
        "y": 485.99269104003906,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "f125c8bb.d30da8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3996.075698852539,
        "y": 485.99269104003906,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "e297d04c.221cc8"
            ]
        ]
    },
    {
        "id": "2c07b07d.c3f6d",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4003.075698852539,
        "y": 564.9926910400391,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "6888653.2ffbe1c"
            ]
        ]
    },
    {
        "id": "6888653.2ffbe1c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4142.075698852539,
        "y": 564.9926910400391,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "cee377da.fc8428",
                "5d175ce1.567c44"
            ]
        ]
    },
    {
        "id": "cee377da.fc8428",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4347.566665649414,
        "y": 562.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "20566af9.0efb6e",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4869.566665649414,
        "y": 744.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "c06b7e2a.f8736",
                "646d1860.d6c3d"
            ]
        ]
    },
    {
        "id": "646d1860.d6c3d",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5092.566665649414,
        "y": 730.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "fedce477.aaaa5"
            ]
        ]
    },
    {
        "id": "c06b7e2a.f8736",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5094.566665649414,
        "y": 763.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a9cb7669.cf3768"
            ]
        ]
    },
    {
        "id": "a9cb7669.cf3768",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5237.566665649414,
        "y": 760.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "fedce477.aaaa5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5240.566665649414,
        "y": 723.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "21a28632.5db562",
                "ec02d47f.b4f468"
            ]
        ]
    },
    {
        "id": "21a28632.5db562",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5402.566665649414,
        "y": 718.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "6433fb54.cea88c",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4883.566665649414,
        "y": 1581.5665435791016,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "92329a47.85901",
                "df690577.37cb5"
            ]
        ]
    },
    {
        "id": "df690577.37cb5",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5106.566665649414,
        "y": 1567.5665435791016,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "ca41b910.492628"
            ]
        ]
    },
    {
        "id": "92329a47.85901",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5108.566665649414,
        "y": 1600.5665435791016,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "76fa3b29.b59014"
            ]
        ]
    },
    {
        "id": "76fa3b29.b59014",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5251.566665649414,
        "y": 1597.5665435791016,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "ca41b910.492628",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5254.566665649414,
        "y": 1560.5665435791016,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "c1977ba9.06afc8",
                "5a4a4a70.e372bc"
            ]
        ]
    },
    {
        "id": "c1977ba9.06afc8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5448.566665649414,
        "y": 1563.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "6fa09b7e.ec21fc",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1046.566665649414,
        "y": 267.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "db248968.47977",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5516.566665649414,
        "y": 1314.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "acd87451.4de2f"
            ]
        ]
    },
    {
        "id": "acd87451.4de2f",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5722.566665649414,
        "y": 1314.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "65c681ea.8e8e"
            ]
        ]
    },
    {
        "id": "65c681ea.8e8e",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5937.852310180664,
        "y": 1314.388442993164,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "5027cb59.f1f02c"
            ]
        ]
    },
    {
        "id": "5027cb59.f1f02c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6144.683853149414,
        "y": 1314.906997680664,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "f2d257f9.9b6db",
                "d456d771.33b528",
                "dfaa5bd2.7ed1a8"
            ]
        ]
    },
    {
        "id": "f2d257f9.9b6db",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6359.683853149414,
        "y": 1276.906997680664,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "d456d771.33b528",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6356.683853149414,
        "y": 1315.906997680664,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d0848591.4fe028"
            ]
        ]
    },
    {
        "id": "dfaa5bd2.7ed1a8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6312.183853149414,
        "y": 1357.906997680664,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "d0848591.4fe028",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6537.183853149414,
        "y": 1314.906997680664,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "e555d856.08612"
            ]
        ]
    },
    {
        "id": "e555d856.08612",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6695.183853149414,
        "y": 1314.906997680664,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7b91b9c4.637c48"
            ]
        ]
    },
    {
        "id": "7b91b9c4.637c48",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 6902.183853149414,
        "y": 1314.906997680664,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "70c0dc68.df6fb4",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5513.566665649414,
        "y": 2183.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d68321cf.a639b8"
            ]
        ]
    },
    {
        "id": "d68321cf.a639b8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5719.566665649414,
        "y": 2183.5667877197266,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "c81b77a6.871978"
            ]
        ]
    },
    {
        "id": "c81b77a6.871978",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5934.852310180664,
        "y": 2183.3885650634766,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "19a1e93e.f9e5bf"
            ]
        ]
    },
    {
        "id": "19a1e93e.f9e5bf",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6141.683853149414,
        "y": 2183.9071197509766,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "4630a95c.686ab",
                "c37afaf.cf76c08",
                "1007495e.7583b7"
            ]
        ]
    },
    {
        "id": "4630a95c.686ab",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6356.683853149414,
        "y": 2145.9071197509766,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "c37afaf.cf76c08",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6353.683853149414,
        "y": 2184.9071197509766,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "ef2436c7.ba16d"
            ]
        ]
    },
    {
        "id": "1007495e.7583b7",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6309.183853149414,
        "y": 2226.9071197509766,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "ef2436c7.ba16d",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6534.183853149414,
        "y": 2183.9071197509766,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "14d2b111.d95c3f"
            ]
        ]
    },
    {
        "id": "14d2b111.d95c3f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6692.183853149414,
        "y": 2183.9071197509766,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7a011475.ca353c"
            ]
        ]
    },
    {
        "id": "7a011475.ca353c",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 6899.183853149414,
        "y": 2183.9071197509766,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "ec02d47f.b4f468",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5429.566665649414,
        "y": 790.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "9a8a0cf0.1ecd",
                "6f18aaef.d6c874",
                "596912b8.2789dc"
            ]
        ]
    },
    {
        "id": "9a8a0cf0.1ecd",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5625.066787719727,
        "y": 742.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "c9aa6f7.6061c1"
            ]
        ]
    },
    {
        "id": "6f18aaef.d6c874",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5617.066787719727,
        "y": 797.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7672e85e.1dc158"
            ]
        ]
    },
    {
        "id": "596912b8.2789dc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5622.066787719727,
        "y": 854.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "64223ddb.f4ee4c"
            ]
        ]
    },
    {
        "id": "64223ddb.f4ee4c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5774.066787719727,
        "y": 855.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "7672e85e.1dc158",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5785.066787719727,
        "y": 800.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "c9aa6f7.6061c1",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5769.449111938477,
        "y": 740.2223358154297,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "200632c7.235266"
            ]
        ]
    },
    {
        "id": "669fe934.ed20b8",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6351.566665649414,
        "y": 758.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "e07ed4a9.cbb938"
            ]
        ]
    },
    {
        "id": "e07ed4a9.cbb938",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6528.566665649414,
        "y": 750.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "f18f9670.13f178",
                "97935b29.df3748"
            ]
        ]
    },
    {
        "id": "200632c7.235266",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5953.566665649414,
        "y": 754.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "2a3a9ceb.4bf7b4"
            ]
        ]
    },
    {
        "id": "2a3a9ceb.4bf7b4",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6148.566665649414,
        "y": 754.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "669fe934.ed20b8",
                "57dfc0ee.e4bd5"
            ]
        ]
    },
    {
        "id": "f18f9670.13f178",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6766.566665649414,
        "y": 705.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "331b6c70.a40c74",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6946.566665649414,
        "y": 748.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "b9bad66b.c8c0b8"
            ]
        ]
    },
    {
        "id": "6a6faaf6.53b63c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6938.566665649414,
        "y": 803.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "6a6441c1.a98b7"
            ]
        ]
    },
    {
        "id": "71044af4.4e2644",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6943.566665649414,
        "y": 860.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "71fa357e.fc72cc"
            ]
        ]
    },
    {
        "id": "71fa357e.fc72cc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7095.566665649414,
        "y": 861.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "6a6441c1.a98b7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7106.566665649414,
        "y": 806.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "b9bad66b.c8c0b8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7090.948989868164,
        "y": 746.2223358154297,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "5d4e5efa.7d1338"
            ]
        ]
    },
    {
        "id": "5d4e5efa.7d1338",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7305.566665649414,
        "y": 742.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "5a4a4a70.e372bc",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5470.566665649414,
        "y": 1631.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7b2dea64.13966c",
                "d6fc993e.fd9ab",
                "946af3ad.aa6f9"
            ]
        ]
    },
    {
        "id": "7b2dea64.13966c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5666.066787719727,
        "y": 1583.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "336513f2.1488b4"
            ]
        ]
    },
    {
        "id": "d6fc993e.fd9ab",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5658.066787719727,
        "y": 1638.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "713aeb9f.9c63fc"
            ]
        ]
    },
    {
        "id": "946af3ad.aa6f9",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5663.066787719727,
        "y": 1695.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "5e2b33be.ab2984"
            ]
        ]
    },
    {
        "id": "5e2b33be.ab2984",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5815.066787719727,
        "y": 1696.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "713aeb9f.9c63fc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5826.066787719727,
        "y": 1641.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "336513f2.1488b4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5810.449111938477,
        "y": 1581.2223358154297,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a12221a0.d22618"
            ]
        ]
    },
    {
        "id": "d3dae0d3.93a748",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6392.566665649414,
        "y": 1599.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "8a810cce.04f8a"
            ]
        ]
    },
    {
        "id": "8a810cce.04f8a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6569.566665649414,
        "y": 1591.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "5fdaaa34.21fa8c",
                "1cf03bef.73025c"
            ]
        ]
    },
    {
        "id": "a12221a0.d22618",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5994.566665649414,
        "y": 1595.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "ef171620.7086e"
            ]
        ]
    },
    {
        "id": "ef171620.7086e",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6189.566665649414,
        "y": 1595.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d3dae0d3.93a748",
                "daf7668b.e813d"
            ]
        ]
    },
    {
        "id": "1cf03bef.73025c",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6777.566665649414,
        "y": 1598.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "4859c85e.019288",
                "3d6c69d2.aa256e",
                "4c59277a.7bbb9"
            ]
        ]
    },
    {
        "id": "5fdaaa34.21fa8c",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6807.566665649414,
        "y": 1546.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "4859c85e.019288",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6987.566665649414,
        "y": 1589.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "107f8a07.8af586"
            ]
        ]
    },
    {
        "id": "3d6c69d2.aa256e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6979.566665649414,
        "y": 1644.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d542aeb7.ad8048"
            ]
        ]
    },
    {
        "id": "4c59277a.7bbb9",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6984.566665649414,
        "y": 1701.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "e68dd443.3aeb58"
            ]
        ]
    },
    {
        "id": "e68dd443.3aeb58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7136.566665649414,
        "y": 1702.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "d542aeb7.ad8048",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7147.566665649414,
        "y": 1647.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "107f8a07.8af586",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7131.948989868164,
        "y": 1587.2223358154297,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "bf5c4091.d1ee78"
            ]
        ]
    },
    {
        "id": "bf5c4091.d1ee78",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7346.566665649414,
        "y": 1583.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "ab95e959.01173",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 343.56666564941406,
        "y": 712.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "43eff4aa.6ed38c",
                "e330d8dd.a46c38"
            ]
        ]
    },
    {
        "id": "43eff4aa.6ed38c",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 789.5666656494141,
        "y": 571.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "e5afd97a.4e194"
            ]
        ]
    },
    {
        "id": "e5afd97a.4e194",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3154.566665649414,
        "y": 553.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "9a0b1d59.d3ffb"
            ]
        ]
    },
    {
        "id": "57dfc0ee.e4bd5",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 6354.566665649414,
        "y": 832.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "ad9b4629.7eac88"
            ]
        ]
    },
    {
        "id": "ad9b4629.7eac88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6531.566665649414,
        "y": 824.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "dfece79f.82eb"
            ]
        ]
    },
    {
        "id": "dfece79f.82eb",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6766.566665649414,
        "y": 948.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "21b764e4.2900d4",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6806.566665649414,
        "y": 1788.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "70c3d1e2.5f6bf",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6571.566665649414,
        "y": 1664.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "21b764e4.2900d4"
            ]
        ]
    },
    {
        "id": "daf7668b.e813d",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 6394.566665649414,
        "y": 1672.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "70c3d1e2.5f6bf"
            ]
        ]
    },
    {
        "id": "5d175ce1.567c44",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4346.566665649414,
        "y": 608.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "470f8a1b.fd55b4",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4368.566665649414,
        "y": 743.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "f808ec51.e51a2",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4349.566665649414,
        "y": 793.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "a6e6ba84.23573",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1959.566665649414,
        "y": 341.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "18e40bb9.fd7c0c",
                "6a17cc14.2a5d84"
            ]
        ]
    },
    {
        "id": "18e40bb9.fd7c0c",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2224.566665649414,
        "y": 264.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "2c08b617.c95ae2",
        "type": "set",
        "name": "set query_param",
        "xml": "<set>\n<parameter name='prop.ethsrvType' value='`$network-route-A`' />\n\n",
        "comments": "",
        "x": 4266.566665649414,
        "y": 2243.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "72ddad65.7b538c",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='domain-A.tunnel-tp-id' value='' />\n<parameter name='domain-A.node-id' value='' />\n<parameter name='domain-A.network-id' value=\"\" />\n<parameter name='domain-A.provider-id' value=\"\" />\n<parameter name='domain-A.client-id' value=\"\" />\n<parameter name='domain-A.te-topo-id' value=\"\" />\n<parameter name='domain-A.network-type' value=\"\" />\n<parameter name='domain-A.ltpId' value=\"\" />\n<parameter name='tmp.domain-A.network-id' value=\"\" />\n<parameter name='tmp.domain-A.ttp-id' value=\"\" />\n<parameter name='network-route-A' value=\"\" />\n<!--<parameter name='domain-A.' value=\"\" />-->\n\n<parameter name='request-id' value='' />\n<parameter name='otn-source-node' value='' />\n<parameter name='otn-dest-node' value='' />\n<parameter name='bw-odu' value=\"\" />\n<parameter name='src-ttp-id' value='' />\n<parameter name='dst-ttp-id' value='' />\n\n<parameter name='domain-B.tunnel-tp-id' value='' />\n<parameter name='domain-B.node-id' value='' />\n<parameter name='domain-B.network-id' value=\"\" />\n<parameter name='domain-B.provider-id' value=\"\" />\n<parameter name='domain-B.client-id' value=\"\" />\n<parameter name='domain-B.te-topo-id' value=\"\" />\n<parameter name='domain-B.network-type' value=\"\" />\n<parameter name='domain-B.ltpId' value=\"\" />\n<parameter name='tmp.domain-B.network-id' value=\"\" />\n<parameter name='tmp.domain-B.ttp-id' value=\"\" />\n<parameter name='network-route-B' value=\"\" />\n<!--<parameter name='domain-B.' value=\"\" />-->\n\n\n\n\n\n",
        "comments": "",
        "x": 4249.566665649414,
        "y": 4001.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "5319831a.8a73d4",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 4306.566665649414,
        "y": 838.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "cf8b0d81.7c95d",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='otnidx' start='0' end='`$tmp.otninfo_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 4295.566665649414,
        "y": 2483.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "2d30121e.5c9526"
            ]
        ]
    },
    {
        "id": "e0d3aaa.b5864d8",
        "type": "save",
        "name": "save vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-otnidx-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<!--<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />-->\n<parameter name='customer-vpn-id' value='`($maxtpn + $gfp)`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$tmp.access-provider-id`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$tmp.access-client-id`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$tmp.access-topology-id`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.domainG-src-access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.domainG-dst-access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5423.566665649414,
        "y": 2990.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "1bc8fd10.f409cb"
            ]
        ]
    },
    {
        "id": "7e03629c.ddb774",
        "type": "save",
        "name": "save connectivity-A relationship to vpn-binding-A, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 5996.066665649414,
        "y": 3094.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "1bc8fd10.f409cb",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5729.566665649414,
        "y": 2989.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "b1cc3ab.6cb2548"
            ]
        ]
    },
    {
        "id": "b1cc3ab.6cb2548",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5939.066665649414,
        "y": 2989.820571899414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "36f88ca7.f7225c",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding $otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5459.566665649414,
        "y": 2454.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "497dc0cb.df47d8",
        "type": "switchNode",
        "name": "switch otnidx == 0",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5332.566665649414,
        "y": 3107.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "6c806f1f.03835",
                "86fb77f4.af4f"
            ]
        ]
    },
    {
        "id": "6c806f1f.03835",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5515.566665649414,
        "y": 3107.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "6b0c2e54.496c08"
            ]
        ]
    },
    {
        "id": "86fb77f4.af4f",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5340.566665649414,
        "y": 3254.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "edff7a1d.02c248"
            ]
        ]
    },
    {
        "id": "b09a3b47.250ef",
        "type": "switchNode",
        "name": "switch otnidx == last",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5681.566665649414,
        "y": 3335.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "faa818c.df9af68",
                "7bfe08b5.3fad98"
            ]
        ]
    },
    {
        "id": "faa818c.df9af68",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5866.566665649414,
        "y": 3336.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "2af89e1c.3f23c2"
            ]
        ]
    },
    {
        "id": "7bfe08b5.3fad98",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5885.566665649414,
        "y": 3602.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "b0cdcee4.ae365"
            ]
        ]
    },
    {
        "id": "a5945ca7.3808b",
        "type": "save",
        "name": "save connectivity-B relationship to vpn-binding-B, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6296.566665649414,
        "y": 3337.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "8538ddd3.f2c4e8",
        "type": "execute",
        "name": "execute UUID generator for connectivity domain otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 6370.566665649414,
        "y": 3635.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "96a20b21.7c964",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-otnidx-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-otnidx-uuid`' />\n<!--<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />-->\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<!--<parameter name='access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<!--<parameter name='access-ltp-id' value='``' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='dummy' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<!--<parameter name='CBS' value='`$prop.sotn.cbs`' />-->\n<!--<parameter name='EBS' value='`$prop.sotn.ebs`' />-->\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 6306.566665649414,
        "y": 3686.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "3a37364c.89e0d2",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 6435.566665649414,
        "y": 3736.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "33c1cd5d.a695fa",
        "type": "comment",
        "name": "connectivity has not been created for middle domains, so we have to create one",
        "info": "",
        "comments": "",
        "x": 6445.566665649414,
        "y": 3579.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "34abf760.126be8",
        "type": "save",
        "name": "save connectivity-otnidx relationship to vpn-binding-otnidx, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6403.566665649414,
        "y": 3795.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "b0cdcee4.ae365",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6042.566665649414,
        "y": 3603.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "8538ddd3.f2c4e8",
                "96a20b21.7c964",
                "3a37364c.89e0d2",
                "34abf760.126be8",
                "b5d4a55e.0034a"
            ]
        ]
    },
    {
        "id": "2d30121e.5c9526",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4552.566665649414,
        "y": 2483.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "36f88ca7.f7225c",
                "e0d3aaa.b5864d8",
                "497dc0cb.df47d8",
                "16b548c2.41e347",
                "369d98dc.4dec88",
                "64a44e19.2c6a08",
                "e360a143.67db3"
            ]
        ]
    },
    {
        "id": "ef2d36ce.ce293",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n\n",
        "comments": "",
        "x": 5920.566665649414,
        "y": 3151.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "cd34397c.c647f",
        "type": "execute",
        "name": "execute RestApiCallNode domainA UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainA.eth-network-id + '/node=' + $tmp.src.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.src.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 5973.566665649414,
        "y": 3195.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "8d0af82b.74a29",
                "184e014b.65285f"
            ]
        ]
    },
    {
        "id": "184e014b.65285f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6244.566665649414,
        "y": 3180.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d74a31ea.f298a"
            ]
        ]
    },
    {
        "id": "8d0af82b.74a29",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6242.566879272461,
        "y": 3238.566575050354,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "66f1ce4f.276cb"
            ]
        ]
    },
    {
        "id": "d74a31ea.f298a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI Coloring for domain A\" />\n",
        "comments": "",
        "x": 6384.566913604736,
        "y": 3180.5666666030884,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "66f1ce4f.276cb",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6390.593925476074,
        "y": 3229.31206035614,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "6b0c2e54.496c08",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5656.566665649414,
        "y": 3097.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7e03629c.ddb774",
                "ef2d36ce.ce293"
            ]
        ]
    },
    {
        "id": "2af89e1c.3f23c2",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6000.566665649414,
        "y": 3337.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a5945ca7.3808b",
                "eaec358c.e26a98"
            ]
        ]
    },
    {
        "id": "eaec358c.e26a98",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "x": 6220.566665649414,
        "y": 3381.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "cc129ab6.0a9c88",
        "type": "execute",
        "name": "execute RestApiCallNode domainB UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainB.eth-network-id + '/node=' + $tmp.dst.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.dst.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6271.566665649414,
        "y": 3425.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "42252b7c.5787ac",
                "a3c05a87.fd1f08"
            ]
        ]
    },
    {
        "id": "a3c05a87.fd1f08",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6534.566665649414,
        "y": 3405.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "e471825b.83452"
            ]
        ]
    },
    {
        "id": "42252b7c.5787ac",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6535.566879272461,
        "y": 3456.566575050354,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "2e8ec52a.9a1e62"
            ]
        ]
    },
    {
        "id": "e471825b.83452",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI coloring for domain B\" />\n",
        "comments": "",
        "x": 6674.566913604736,
        "y": 3405.5666666030884,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "2e8ec52a.9a1e62",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6680.593925476074,
        "y": 3454.31206035614,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "b5d4a55e.0034a",
        "type": "set",
        "name": "set attachment_param domain otnidx",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 6317.566665649414,
        "y": 3855.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "5c821c84.c88904",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v21/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3636.566665649414,
        "y": 4202.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "56778e19.dcbd88",
                "47ca749e.73b8a4",
                "e5857e5d.a97728"
            ]
        ]
    },
    {
        "id": "56778e19.dcbd88",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3824.566665649414,
        "y": 4215.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "46a9d83a.076a1"
            ]
        ]
    },
    {
        "id": "47ca749e.73b8a4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3825.057632446289,
        "y": 4261.140701293945,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "1540d917.ceca9f"
            ]
        ]
    },
    {
        "id": "e5857e5d.a97728",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3822.566665649414,
        "y": 4304.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "f29b80ec.e3f2a"
            ]
        ]
    },
    {
        "id": "46a9d83a.076a1",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3997.566665649414,
        "y": 4213.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "648e4dda.ac87ac"
            ]
        ]
    },
    {
        "id": "1540d917.ceca9f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3987.6290435791016,
        "y": 4261.42643737793,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "f29b80ec.e3f2a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3989.566665649414,
        "y": 4303.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "e9ee786c.efa87",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='dmnsidx' start='0' end='`$otn-tunnel-slice_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3625.566665649414,
        "y": 4393.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "288c1a73.880eee"
            ]
        ]
    },
    {
        "id": "72f67bad.fb5be4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4435.566665649414,
        "y": 4393.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "aa46999f.43e5c"
            ]
        ]
    },
    {
        "id": "56262328.23ecbc",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='stunidx' start='0' end='`$otn-tunnel-slice[$dmnsidx].list_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4207.566665649414,
        "y": 4393.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "72f67bad.fb5be4"
            ]
        ]
    },
    {
        "id": "cc404c98.e08ba8",
        "type": "set",
        "name": "set providerValue",
        "xml": "<set>\n<parameter name='providerValue' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].access-provider-id`' />\n<parameter name='found' value='false' />\n\n\n",
        "comments": "",
        "x": 5327.566665649414,
        "y": 4160.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "ecd608bb.0d86e8",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='testingvalue' value='$tmp.otninfo_length -1' />\n",
        "comments": "",
        "x": 5629.566665649414,
        "y": 3286.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "edff7a1d.02c248",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5464.566665649414,
        "y": 3261.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "ecd608bb.0d86e8",
                "b09a3b47.250ef"
            ]
        ]
    },
    {
        "id": "61180225.e94b74",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n<parameter name='bwModified' value='false' />\n",
        "comments": "",
        "x": 1918.566665649414,
        "y": 291.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "648e4dda.ac87ac",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4226.566665649414,
        "y": 4214.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "16fc7cc8.25b463"
            ]
        ]
    },
    {
        "id": "16fc7cc8.25b463",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4441.566665649414,
        "y": 4215.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "43b927cc.e79af"
            ]
        ]
    },
    {
        "id": "825499ab.8977b8",
        "type": "for",
        "name": "for arridx in tmp.arr",
        "xml": "<for index='arridx' start='0' end='`$tmp.arr_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5894.566665649414,
        "y": 4135.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "90ec1c2d.7ddac8"
            ]
        ]
    },
    {
        "id": "8c831e.02a01ce",
        "type": "switchNode",
        "name": "switch $tmp.arr_length != 0",
        "xml": "<switch test='`$tmp.arr_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5360.566665649414,
        "y": 4215.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a80cb600.bb459",
                "b4ff9c95.39bd28"
            ]
        ]
    },
    {
        "id": "a80cb600.bb459",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5556.566665649414,
        "y": 4185.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "f7a6c5f.421b438"
            ]
        ]
    },
    {
        "id": "b4ff9c95.39bd28",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5557.566665649414,
        "y": 4256.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "ef17d590.bbdfe8"
            ]
        ]
    },
    {
        "id": "f7a6c5f.421b438",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5707.566665649414,
        "y": 4183.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "825499ab.8977b8",
                "746cac12.f11494"
            ]
        ]
    },
    {
        "id": "90ec1c2d.7ddac8",
        "type": "switchNode",
        "name": "switch tmp.arr[$arridx] == $providerValue",
        "xml": "<switch test='`$tmp.arr[$arridx] == $providerValue`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6185.566665649414,
        "y": 4135.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "b11fdebc.e34638",
                "a958dc9.e2adaa"
            ]
        ]
    },
    {
        "id": "b11fdebc.e34638",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6460.566665649414,
        "y": 4104.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "f8aced68.7286f8"
            ]
        ]
    },
    {
        "id": "a958dc9.e2adaa",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6461.566665649414,
        "y": 4175.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "b8e79686.bb0a28"
            ]
        ]
    },
    {
        "id": "f8aced68.7286f8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6611.566665649414,
        "y": 4102.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "5823a432.460bdc",
                "d91c62ce.fb745",
                "e30fb02.79642d",
                "25bd94ab.399c34",
                "662fc221.c771e4"
            ]
        ]
    },
    {
        "id": "5823a432.460bdc",
        "type": "set",
        "name": "set found to true",
        "xml": "<set>\n<parameter name='found' value='true' />\n\n\n",
        "comments": "",
        "x": 6799.566665649414,
        "y": 4062.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "d91c62ce.fb745",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6871.566665649414,
        "y": 4107.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "662fc221.c771e4",
        "type": "set",
        "name": "set twoD arr",
        "xml": "<set>\n\n<!--<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />-->\n<!--<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />-->\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<!--<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />-->\n<parameter name='`otn-tunnel-slice[$arridx].list_length`' value='`$sizeOfSliceList + 1`' />\n\n",
        "comments": "",
        "x": 6786.566665649414,
        "y": 4234.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "25bd94ab.399c34",
        "type": "set",
        "name": "set sizeOfSliceList",
        "xml": "<set>\n<parameter name='sizeOfSliceList' value='`$otn-tunnel-slice[$arridx].list_length`' />\n\n\n",
        "comments": "",
        "x": 6807.566665649414,
        "y": 4170.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "ef17d590.bbdfe8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5709.566665649414,
        "y": 4256.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "15ad9ec8.caed79",
                "ed5c8942.14495"
            ]
        ]
    },
    {
        "id": "15ad9ec8.caed79",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='0' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5964.566665649414,
        "y": 4249.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "ed5c8942.14495",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='tmp.arr[0]' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='1' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[0].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='1' />\n<parameter name='otn-tunnel-slice[0].list_length' value='1' />\n\n",
        "comments": "",
        "x": 5892.566665649414,
        "y": 4296.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "746cac12.f11494",
        "type": "switchNode",
        "name": "switch found?",
        "xml": "<switch test='`$found`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5885.566665649414,
        "y": 4180.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "e65e43e9.c68878",
                "79095a70.204634"
            ]
        ]
    },
    {
        "id": "e65e43e9.c68878",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6045.566665649414,
        "y": 4172.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7ebfe8bc.5805d8"
            ]
        ]
    },
    {
        "id": "79095a70.204634",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6043.566665649414,
        "y": 4209.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "b63448ff.6432e"
            ]
        ]
    },
    {
        "id": "7ebfe8bc.5805d8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6170.566665649414,
        "y": 4172.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "d054cbb3.a23738",
        "type": "save",
        "name": "store $arridx+1 somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx + 1`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6477.566665649414,
        "y": 4230.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "b63448ff.6432e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6203.566665649414,
        "y": 4217.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d054cbb3.a23738",
                "ed4d487a.ecab88"
            ]
        ]
    },
    {
        "id": "ed4d487a.ecab88",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list_length`' value='1' />\n\n",
        "comments": "",
        "x": 6394.566665649414,
        "y": 4276.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "b8e79686.bb0a28",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6594.566665649414,
        "y": 4174.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "e30fb02.79642d",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6765.566665649414,
        "y": 4301.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "16b548c2.41e347",
        "type": "switchNode",
        "name": "switch dstPort == NULL",
        "xml": "<switch test=\"`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id == ''`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5162.566665649414,
        "y": 2513.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "86e43bf4.42b898",
                "d5c0405.3072fc"
            ]
        ]
    },
    {
        "id": "86e43bf4.42b898",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5551.566665649414,
        "y": 2491.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "8f948488.f29bb"
            ]
        ]
    },
    {
        "id": "d5c0405.3072fc",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5552.566665649414,
        "y": 2537.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7f704252.528ee4"
            ]
        ]
    },
    {
        "id": "8f948488.f29bb",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n",
        "comments": "",
        "x": 5765.566665649414,
        "y": 2490.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "7f704252.528ee4",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />\n",
        "comments": "",
        "x": 5763.566665649414,
        "y": 2535.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "aa46999f.43e5c",
        "type": "set",
        "name": "set attachment_param sliceG",
        "xml": "<set>\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].request-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].request-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-source-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-source-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-dest-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-dest-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].bw-odu`' value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].bw-odu`\" />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].src-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].src-ttp-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].dst-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].dst-ttp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='otn-tunnel-sliceG-list_length' value='`$stunidx + 1`' />\n\n\n<parameter name=\"tmp.domainG.restapiUrl\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainurl`\" />\n<parameter name=\"tmp.domainG.restapiUser\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainuser`\" />\n<parameter name=\"tmp.domainG.restapiPassword\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainpassword`\" />",
        "comments": "",
        "x": 4688.566665649414,
        "y": 4391.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "661ca31a.ab883c",
        "type": "execute",
        "name": "execute RestApiCallNode sliceG creation domainG",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-sliceG-list-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$tmp.domainG.restapiUrl + '/restconf/operations/ietf-optical-slice:create-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$tmp.domainG.restapiUser`\" />\n<parameter name=\"restapiPassword\" value=\"`tmp.domainG.restapiPassword`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4273.566665649414,
        "y": 4499.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "ecaf4957.b0e658",
                "a8df2ae7.c19bd"
            ]
        ]
    },
    {
        "id": "a8df2ae7.c19bd",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4556.566665649414,
        "y": 4479.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "cdf7278a.89d688"
            ]
        ]
    },
    {
        "id": "ecaf4957.b0e658",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4557.566879272461,
        "y": 4530.566575050354,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "5379a4f8.869c4c"
            ]
        ]
    },
    {
        "id": "cdf7278a.89d688",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing slice creation api for domain A\" />\n",
        "comments": "",
        "x": 4696.566913604736,
        "y": 4479.566666603088,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "5379a4f8.869c4c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4702.593925476074,
        "y": 4528.31206035614,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "369d98dc.4dec88",
        "type": "set",
        "name": "set srcdstpnf-name",
        "xml": "<set>\n<parameter name='tmp.srcdstpnf-name' value=\"`'networkId-providerId-' + \n                                             $tmp.access-provider-id + '-clientId-' +\n                                             $tmp.access-client-id + '-topologyId-' + \n                                             $tmp.access-topology-id + '-nodeId-' + \n                                             $tmp.srcdstpnf-id`\" />\n\n",
        "comments": "",
        "x": 5346.566665649414,
        "y": 2633.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "64a44e19.2c6a08",
        "type": "get-resource",
        "name": "get-resource tmp.srcdstpnf-name",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.srcdstpnf-name\"\n        pfx='tmp.aai.srcdst-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5390.566665649414,
        "y": 2681.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "dd990805.980fb8",
                "6c0a6d6e.da209c",
                "8b408423.26dde"
            ]
        ]
    },
    {
        "id": "dd990805.980fb8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5603.066665649414,
        "y": 2628.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d57312a6.724dc"
            ]
        ]
    },
    {
        "id": "6c0a6d6e.da209c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5615.066665649414,
        "y": 2678.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7aacde8.7df3f2"
            ]
        ]
    },
    {
        "id": "8b408423.26dde",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5606.066665649414,
        "y": 2733.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "6241099c.104fa8"
            ]
        ]
    },
    {
        "id": "6241099c.104fa8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5751.066665649414,
        "y": 2732.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "7aacde8.7df3f2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5762.066665649414,
        "y": 2675.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "d57312a6.724dc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5728.449111938477,
        "y": 2622.2223358154297,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "87cdaf9.e078cd"
            ]
        ]
    },
    {
        "id": "cf80c321.66415",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6287.566665649414,
        "y": 2640.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "488a3f4b.e6a38"
            ]
        ]
    },
    {
        "id": "488a3f4b.e6a38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6464.566665649414,
        "y": 2632.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "2f41d1c6.1e983e",
                "9f0f0113.2f1dd8"
            ]
        ]
    },
    {
        "id": "87cdaf9.e078cd",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.srcdst-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5889.566665649414,
        "y": 2636.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "34708771.d37168"
            ]
        ]
    },
    {
        "id": "34708771.d37168",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6084.566665649414,
        "y": 2636.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "cf80c321.66415"
            ]
        ]
    },
    {
        "id": "9f0f0113.2f1dd8",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6672.566665649414,
        "y": 2639.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "2333d3f8.06d3cc",
                "cac30f84.ebbc98",
                "aa6d100c.15afd"
            ]
        ]
    },
    {
        "id": "2f41d1c6.1e983e",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6702.566665649414,
        "y": 2587.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "2333d3f8.06d3cc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6882.566665649414,
        "y": 2630.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7579f295.1b8164"
            ]
        ]
    },
    {
        "id": "cac30f84.ebbc98",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6874.566665649414,
        "y": 2685.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d47247b.28a9ab8"
            ]
        ]
    },
    {
        "id": "aa6d100c.15afd",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6879.566665649414,
        "y": 2742.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "ac1b0024.d210e8"
            ]
        ]
    },
    {
        "id": "ac1b0024.d210e8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7031.566665649414,
        "y": 2743.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "d47247b.28a9ab8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7042.566665649414,
        "y": 2688.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "7579f295.1b8164",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7026.948989868164,
        "y": 2628.2223358154297,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a7b271b9.dce3b"
            ]
        ]
    },
    {
        "id": "a7b271b9.dce3b",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7241.566665649414,
        "y": 2624.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "288c1a73.880eee",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3857.566665649414,
        "y": 4391.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "56262328.23ecbc",
                "661ca31a.ab883c"
            ]
        ]
    },
    {
        "id": "e360a143.67db3",
        "type": "switchNode",
        "name": "switch dmnsidx == 0 (domainA)",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5360.566665649414,
        "y": 2850.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "23775bc.cf127a4",
                "f7f6bf17.a6a1b8"
            ]
        ]
    },
    {
        "id": "23775bc.cf127a4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5561.566665649414,
        "y": 2848.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7e368ea0.5c814"
            ]
        ]
    },
    {
        "id": "7e368ea0.5c814",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 5775.566665649414,
        "y": 2850.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "9cf909dc.9ab478",
        "type": "switchNode",
        "name": "switch dmnsidx == last (domainB)",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5778.566665649414,
        "y": 2899.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "8e342b30.5289",
                "f457dc6.ea4afa"
            ]
        ]
    },
    {
        "id": "8e342b30.5289",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6008.566665649414,
        "y": 2895.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "e14ef7f1.a525f8"
            ]
        ]
    },
    {
        "id": "e14ef7f1.a525f8",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />",
        "comments": "",
        "x": 6222.566665649414,
        "y": 2898.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "f7f6bf17.a6a1b8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5561.566665649414,
        "y": 2897.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "9cf909dc.9ab478"
            ]
        ]
    },
    {
        "id": "f457dc6.ea4afa",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6009.566665649414,
        "y": 2941.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "2cf2129b.29d83e"
            ]
        ]
    },
    {
        "id": "2cf2129b.29d83e",
        "type": "set",
        "name": "set attachment_param domain G",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 6223.566665649414,
        "y": 2941.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "3fb8c24c.194b5e",
        "type": "set",
        "name": "set tmp.slicevpns",
        "xml": "<set>\n<parameter name='`tmp.slicevpns[$tmp.slicevpns_length]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n<parameter name='tmp.slicevpns_length' value=\"`$tmp.slicevpns_length + 1`\" />\n\n<parameter name='`tmp.slicevpnuuids[$prop.vpn-binding-otnidx-uuid]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n\n",
        "comments": "",
        "x": 6121.566665649414,
        "y": 2990.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "43b927cc.e79af",
        "type": "switchNode",
        "name": "switch vpnuuid is for this slice",
        "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n    \n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.aai.service-instance.service-instance-id `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 4685.566665649414,
        "y": 4214.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "cbd61fee.b4ea4",
                "1338b32.49d484d"
            ]
        ]
    },
    {
        "id": "cbd61fee.b4ea4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4902.566665649414,
        "y": 4193.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "3d994d55.c0ea92"
            ]
        ]
    },
    {
        "id": "1338b32.49d484d",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4902.566665649414,
        "y": 4242.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "3d994d55.c0ea92",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5070.566665649414,
        "y": 4193.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "cc404c98.e08ba8",
                "8c831e.02a01ce"
            ]
        ]
    },
    {
        "id": "5215d3fc.f47fcc",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 1410.566665649414,
        "y": 824.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "11200ce9.16ac13",
                "c08f0e6c.c37f78",
                "e7987daa.0e6d48"
            ]
        ]
    },
    {
        "id": "11200ce9.16ac13",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1623.057632446289,
        "y": 791.1406402587891,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "3b3d531f.3d36cc"
            ]
        ]
    },
    {
        "id": "c08f0e6c.c37f78",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1611.566665649414,
        "y": 835.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d4a3d19b.f9eea"
            ]
        ]
    },
    {
        "id": "3b3d531f.3d36cc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1771.629165649414,
        "y": 791.4264068603516,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "d4a3d19b.f9eea",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1770.566665649414,
        "y": 835.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "e7987daa.0e6d48",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1616.566665649414,
        "y": 878.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "887e3d5d.e384a8"
            ]
        ]
    },
    {
        "id": "887e3d5d.e384a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 762.5666656494141,
        "y": 1217.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "da4477a0.7909d8"
            ]
        ]
    },
    {
        "id": "da4477a0.7909d8",
        "type": "for",
        "name": "for each svc-instance relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1036.566665649414,
        "y": 1217.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "2c19565.f27f62a"
            ]
        ]
    },
    {
        "id": "2c19565.f27f62a",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1271.900161743164,
        "y": 1218.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "5cc2e31b.ae0c5c"
            ]
        ]
    },
    {
        "id": "5cc2e31b.ae0c5c",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 555.5669097900391,
        "y": 1371.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "4b28e9c9.d8b3d"
            ]
        ]
    },
    {
        "id": "2d23ad53.0d8ef2",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 944.5666656494141,
        "y": 1376.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "5b1be357.505acc",
                "f72efd3d.dd0938",
                "f02db202.a351"
            ]
        ]
    },
    {
        "id": "5b1be357.505acc",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1140.566665649414,
        "y": 1341.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "cbf38667.8b4d1"
            ]
        ]
    },
    {
        "id": "f72efd3d.dd0938",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1141.057632446289,
        "y": 1387.1407012939453,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "9671b3d7.b1fe7"
            ]
        ]
    },
    {
        "id": "f02db202.a351",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1105.566665649414,
        "y": 1432.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a73f6f40.ea04d8"
            ]
        ]
    },
    {
        "id": "9671b3d7.b1fe7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1300.629165649414,
        "y": 1384.4264068603516,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "a73f6f40.ea04d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1258.566665649414,
        "y": 1434.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "f76ead96.9349d",
        "type": "switchNode",
        "name": "switch loglink-id exists in conn",
        "xml": "<switch test='`$tmp.aai.logical-link.link-id == $tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1533.566665649414,
        "y": 1324.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "add0327c.d802e8",
                "cb919957.6890a"
            ]
        ]
    },
    {
        "id": "add0327c.d802e8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1744.566665649414,
        "y": 1289.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "1e9519ed.81b276"
            ]
        ]
    },
    {
        "id": "cb919957.6890a",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1741.566665649414,
        "y": 1350.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "57aa5de4.e53bdc",
        "type": "set",
        "name": "set currLinkIsFound",
        "xml": "<set>\n<parameter name='currLinkIsFound' value=\"true\" />\n\n\n",
        "comments": "",
        "x": 2082.566665649414,
        "y": 1262.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "1e9519ed.81b276",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1896.566665649414,
        "y": 1290.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "57aa5de4.e53bdc"
            ]
        ]
    },
    {
        "id": "15dc8511.8319eb",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2049.566665649414,
        "y": 1318.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "5c97fd1b.0bb324",
        "type": "comment",
        "name": "currLinkIsFound. Go to the next logical-link",
        "info": "",
        "comments": "",
        "x": 2054.566665649414,
        "y": 1212.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "ce603077.58648",
        "type": "switchNode",
        "name": "switch currLinkIsFound",
        "xml": "<switch test='`$currLinkIsFound`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1336.566665649414,
        "y": 942.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "481e6658.22a088",
                "bbdeb567.88915"
            ]
        ]
    },
    {
        "id": "481e6658.22a088",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1522.566665649414,
        "y": 921.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "60cfc346.a5e0ac"
            ]
        ]
    },
    {
        "id": "bbdeb567.88915",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1519.566665649414,
        "y": 1057.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "9a36d0a4.a0e6c"
            ]
        ]
    },
    {
        "id": "60cfc346.a5e0ac",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1764.566665649414,
        "y": 916.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "f1eb1f18.84df58",
        "type": "comment",
        "name": "A new logical-link has been found: modify process should be triggered",
        "info": "",
        "comments": "",
        "x": 1710.566665649414,
        "y": 1020.5666656494141,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "cbf38667.8b4d1",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1304.566665649414,
        "y": 1325.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "f76ead96.9349d",
                "45e27f4a.809ce8"
            ]
        ]
    },
    {
        "id": "45e27f4a.809ce8",
        "type": "switchNode",
        "name": "switch connectivityBW == gfp",
        "xml": "<switch test='`$tmp.aai.connectivity.bandwidth-profile-name == $gfp`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1534.566665649414,
        "y": 1415.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d685a055.03e62",
                "77d4c6d1.5b0628"
            ]
        ]
    },
    {
        "id": "d685a055.03e62",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1739.566665649414,
        "y": 1411.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "77d4c6d1.5b0628",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1741.566665649414,
        "y": 1461.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "f0fe1828.9dc408"
            ]
        ]
    },
    {
        "id": "c281a76c.d62018",
        "type": "set",
        "name": "set bwModified",
        "xml": "<set>\n<parameter name='bwModified' value=\"true\" />\n\n\n",
        "comments": "",
        "x": 2090.566665649414,
        "y": 1439.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "f0fe1828.9dc408",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1895.566665649414,
        "y": 1460.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "c281a76c.d62018",
                "a28d23ed.689e6"
            ]
        ]
    },
    {
        "id": "a28d23ed.689e6",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 915.5666656494141,
        "y": 1665.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "a57a1f42.71b15"
            ]
        ]
    },
    {
        "id": "a57a1f42.71b15",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1120.566665649414,
        "y": 1665.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "5aaebfe0.c28e78"
            ]
        ]
    },
    {
        "id": "5aaebfe0.c28e78",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1286.566665649414,
        "y": 1665.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "56679972.854f9"
            ]
        ]
    },
    {
        "id": "56679972.854f9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1449.566665649414,
        "y": 1665.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "cdc7a419.fc945",
                "eb4311f1.64ae98"
            ]
        ]
    },
    {
        "id": "eb4311f1.64ae98",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
        "comments": "",
        "x": 1678.566665649414,
        "y": 1605.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "cdc7a419.fc945",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1187.566665649414,
        "y": 1759.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "88a78226.fc1ad",
                "1c46ecba.8072f3",
                "76f9c0c9.a1a1d"
            ]
        ]
    },
    {
        "id": "c9b520b2.a5cf",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1571.566665649414,
        "y": 1759.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "cb40b904.7d13b8",
                "43ac0a4c.586044"
            ]
        ]
    },
    {
        "id": "88a78226.fc1ad",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1398.566665649414,
        "y": 1761.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "c9b520b2.a5cf"
            ]
        ]
    },
    {
        "id": "1c46ecba.8072f3",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1399.057632446289,
        "y": 1807.1407012939453,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "6fdf37d.237d448"
            ]
        ]
    },
    {
        "id": "76f9c0c9.a1a1d",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1396.566665649414,
        "y": 1850.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "f69fe770.9eb62"
            ]
        ]
    },
    {
        "id": "f69fe770.9eb62",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1563.566665649414,
        "y": 1867.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "6fdf37d.237d448",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1561.6290435791016,
        "y": 1807.4264373779297,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "4b28e9c9.d8b3d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 727.5666656494141,
        "y": 1371.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "2d23ad53.0d8ef2",
                "fa48d2db.8e20b"
            ]
        ]
    },
    {
        "id": "fa48d2db.8e20b",
        "type": "set",
        "name": "unset tmp.aai.connectivity",
        "xml": "<set>\n<parameter name='tmp.aai.connectivity.' value='' />\n",
        "comments": "",
        "x": 947.5666656494141,
        "y": 1319.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "cb40b904.7d13b8",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1922.066665649414,
        "y": 1754.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "43ac0a4c.586044",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1849.066665649414,
        "y": 1818.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "dced95cc.b7d778",
        "type": "comment",
        "name": "The following two nodes are for PCE",
        "info": "",
        "comments": "",
        "x": 1993.566665649414,
        "y": 146.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "ae09477d.84538",
        "type": "get-resource",
        "name": "get-resource pnfs-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/pnfs?depth=0' depth = 0\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
        "comments": "",
        "outputs": 1,
        "x": 1953.566665649414,
        "y": 190.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "8a669443.dc963",
        "type": "get-resource",
        "name": "get-resource logical-links",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
        "comments": "",
        "outputs": 1,
        "x": 1966.566665649414,
        "y": 235.56666564941406,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "1b2bb0cd.80285f",
        "type": "execute",
        "name": "execute printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenamemm`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4273.566665649414,
        "y": 2352.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "74184a61.e9795c",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 5564.566665649414,
        "y": 1189.566665649414,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "d0b7e124.7ac88",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-find-maximum-used-tpn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4462.567077636719,
        "y": 2409.566696166992,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "cc077299.29ac2",
        "type": "switchNode",
        "name": "switch src and dst same domain?",
        "xml": "<switch test=\"`$param-prefix-domainA[$param-prefix-domainA_length -9] == $param-prefix-domainB[$param-prefix-domainB_length -9]`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2915.9000854492188,
        "y": 2456.5668182373047,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "8a4017cb.c93cd",
                "8ba11f2b.136d5"
            ]
        ]
    },
    {
        "id": "8ba11f2b.136d5",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3129.9000244140625,
        "y": 2469.566696166992,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "9249b20d.865bf8"
            ]
        ]
    },
    {
        "id": "8a4017cb.c93cd",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3110.8999633789062,
        "y": 2570.5668182373047,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "1eab1b67.fdc47d"
            ]
        ]
    },
    {
        "id": "83c1e874.ab8cc",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3704.2332153320312,
        "y": 2412.899948120117,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "1eab1b67.fdc47d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3261.2333984375,
        "y": 2570.8998260498047,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "d5a143a0.d52978",
                "eba7a098.d62d88",
                "28bd6ced.e3349c",
                "98ce31a2.729468"
            ]
        ]
    },
    {
        "id": "d5a143a0.d52978",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding $otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-samedomain-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3545.2332763671875,
        "y": 2576.566696166992,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "eba7a098.d62d88",
        "type": "set",
        "name": "set attachment_param Same Domain",
        "xml": "<set>\n<parameter name='tmp.sameDomain-src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='tmp.sameDomain-dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 3513.2332763671875,
        "y": 2636.899703979492,
        "z": "16b84275.1f7c9e",
        "wires": []
    },
    {
        "id": "28bd6ced.e3349c",
        "type": "save",
        "name": "save vpn-binding same domain resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-samedomain-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-samedomain-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<!--<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />-->\n<parameter name='customer-vpn-id' value='`($maxtpn + $gfp)`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.sameDomain-src-access-node-id`' />\n<!--<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />-->\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.sameDomain-dst-access-node-id`' />\n<!--<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />-->\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3578.5665283203125,
        "y": 2692.899703979492,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "7fe5faaa.15a65c"
            ]
        ]
    },
    {
        "id": "7fe5faaa.15a65c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3895.5665283203125,
        "y": 2694.899703979492,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "e24d5cc4.61c5e"
            ]
        ]
    },
    {
        "id": "e24d5cc4.61c5e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4059.0665283203125,
        "y": 2694.153610229492,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "98ce31a2.729468",
        "type": "save",
        "name": "save connectivity-domainA relationship to vpn-binding-sameDomain, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-samedomain-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3627.23291015625,
        "y": 2747.566452026367,
        "z": "16b84275.1f7c9e",
        "wires": [
            []
        ]
    },
    {
        "id": "9249b20d.865bf8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3280.8998413085938,
        "y": 2435.5668182373047,
        "z": "16b84275.1f7c9e",
        "wires": [
            [
                "83c1e874.ab8cc",
                "cf8b0d81.7c95d"
            ]
        ]
    }
]