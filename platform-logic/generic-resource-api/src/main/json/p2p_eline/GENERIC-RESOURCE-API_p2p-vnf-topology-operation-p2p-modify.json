[
    {
        "id": "7ed82570.98fbdc",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 128.56666564941406,
        "y": 178.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "391afd32.1d09aa"
            ]
        ]
    },
    {
        "id": "391afd32.1d09aa",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 353.85235595703125,
        "y": 252.8047742843628,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "90765c89.647058"
            ]
        ]
    },
    {
        "id": "90765c89.647058",
        "type": "method",
        "name": "method p2p-vnf-topology-operation-p2p-modify",
        "xml": "<method rpc='p2p-vnf-topology-operation-p2p-modify' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 359.9952697753906,
        "y": 337.5666961669922,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "9cde6295.2d0718"
            ]
        ]
    },
    {
        "id": "9cde6295.2d0718",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 729.8047027587891,
        "y": 362.2333526611328,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "4ae0dd2a.d94ce4",
                "79738588.734b34",
                "1f3c8c44.a01cfc"
            ]
        ]
    },
    {
        "id": "4ae0dd2a.d94ce4",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 985.1381988525391,
        "y": 516.1636505126953,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "79738588.734b34",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1052.566665649414,
        "y": 335.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "8962e75e.00261",
                "4fd36492.b80aa4",
                "9a3dacb1.190568"
            ]
        ]
    },
    {
        "id": "8962e75e.00261",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1277.566665649414,
        "y": 193.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "3deda3f.9bf2e5c"
            ]
        ]
    },
    {
        "id": "4fd36492.b80aa4",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1273.057632446289,
        "y": 263.1407012939453,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "3f0b2c08.7bc00c"
            ]
        ]
    },
    {
        "id": "9a3dacb1.190568",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1261.566665649414,
        "y": 309.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "9b28e102.0626c"
            ]
        ]
    },
    {
        "id": "3deda3f.9bf2e5c",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1516.566665649414,
        "y": 190.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "20af607b.68774",
                "3658cbc.aa6dfb4"
            ]
        ]
    },
    {
        "id": "3f0b2c08.7bc00c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1426.6290435791016,
        "y": 266.4264373779297,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "9b28e102.0626c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1430.566665649414,
        "y": 310.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "20af607b.68774",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1729.566665649414,
        "y": 214.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "be8ab5c2.2f32"
            ]
        ]
    },
    {
        "id": "3658cbc.aa6dfb4",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1731.566665649414,
        "y": 154.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "1f591d09.2d25db",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1031.566665649414,
        "y": 223.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "be8ab5c2.2f32",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1674.566665649414,
        "y": 396.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "d30b8bfe.c0acd",
                "b8b8c8f9.3c3308",
                "86a1c6ac.aa4d9",
                "57401e8a.a8ecc"
            ]
        ]
    },
    {
        "id": "1aaac7fe.3c1ba",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-name`\" />\n<!--<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-id`\" />-->\n\n\n",
        "comments": "",
        "x": 4243.566665649414,
        "y": 903.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "3b804e52.a7cf2a",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='network-route-B' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 4244.566665649414,
        "y": 958.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "1ad24ca8.e833c3",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2200.566665649414,
        "y": 353.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "b8507b63.6f6868",
                "67c1af9f.10fa88",
                "7ec43e4c.6fd9e"
            ]
        ]
    },
    {
        "id": "b8507b63.6f6868",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2416.566665649414,
        "y": 420.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "5fc7bb3c.8d1c74"
            ]
        ]
    },
    {
        "id": "67c1af9f.10fa88",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2417.057632446289,
        "y": 320.14064025878906,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "4da82d11.2ee7a4"
            ]
        ]
    },
    {
        "id": "7ec43e4c.6fd9e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2412.566665649414,
        "y": 369.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "32e3d071.7e8958"
            ]
        ]
    },
    {
        "id": "4da82d11.2ee7a4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2594.629165649414,
        "y": 320.42640686035156,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "32e3d071.7e8958",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2594.566665649414,
        "y": 369.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "5d5e04cf.2d233c",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 3469.566665649414,
        "y": 874.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "737046f3.901008",
                "c17a2f42.f8ce5",
                "6c18d1b1.1fb02"
            ]
        ]
    },
    {
        "id": "737046f3.901008",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3761.057632446289,
        "y": 853.1406402587891,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "d252d89c.bf824"
            ]
        ]
    },
    {
        "id": "c17a2f42.f8ce5",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3749.566665649414,
        "y": 897.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "ac4aea44.3a1468"
            ]
        ]
    },
    {
        "id": "d252d89c.bf824",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3909.629165649414,
        "y": 853.4264068603516,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "ac4aea44.3a1468",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3908.566665649414,
        "y": 897.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "6c18d1b1.1fb02",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3755.566665649414,
        "y": 944.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "9334f6e1.75bd8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3909.566665649414,
        "y": 983.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "1aaac7fe.3c1ba",
                "3b804e52.a7cf2a",
                "609f7b84.9a3f44",
                "1d55bdaf.3f48b2",
                "6876f035.c2a16",
                "f41eeb62.b3bcb",
                "e8bc0d88.0a94d",
                "e8d2e62e.a7299",
                "b172c901.cf8828",
                "4228fba9.d84434",
                "fc1cf650.aa6b18",
                "3b99997f.82150e",
                "2ab2958e.345c6a"
            ]
        ]
    },
    {
        "id": "609f7b84.9a3f44",
        "type": "save",
        "name": "get network-route-A from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-A'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-A\">",
        "comments": "",
        "outputs": 1,
        "x": 4256.566665649414,
        "y": 1026.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "feb2378a.2af25",
                "cbad9eb.a48376",
                "4fed791d.880998"
            ]
        ]
    },
    {
        "id": "1d55bdaf.3f48b2",
        "type": "save",
        "name": "get network-route-B from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-B'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-B\">",
        "comments": "",
        "outputs": 1,
        "x": 4235.566665649414,
        "y": 1628.5665435791016,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "2518a058.abd538",
                "6ec44045.1b76e",
                "3ecdb083.b8e9c8"
            ]
        ]
    },
    {
        "id": "feb2378a.2af25",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4457.566665649414,
        "y": 910.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "edb5d5b7.00d9d8"
            ]
        ]
    },
    {
        "id": "cbad9eb.a48376",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4453.075698852539,
        "y": 959.9926910400391,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "302f34fb.b2cccc"
            ]
        ]
    },
    {
        "id": "4fed791d.880998",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4457.075698852539,
        "y": 1010.9926910400391,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "a17dcb43.36654"
            ]
        ]
    },
    {
        "id": "edb5d5b7.00d9d8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4606.138198852539,
        "y": 909.8524322509766,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "302f34fb.b2cccc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4596.075698852539,
        "y": 959.9926910400391,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "2518a058.abd538",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4458.566665649414,
        "y": 1598.5665435791016,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "ae2f5ea5.ffcca8"
            ]
        ]
    },
    {
        "id": "6ec44045.1b76e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4454.075698852539,
        "y": 1647.9925689697266,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "8fe524e0.344e88"
            ]
        ]
    },
    {
        "id": "3ecdb083.b8e9c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4458.075698852539,
        "y": 1698.9925689697266,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "55939baf.cd26bc"
            ]
        ]
    },
    {
        "id": "ae2f5ea5.ffcca8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4607.138198852539,
        "y": 1597.852310180664,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "8fe524e0.344e88",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4597.075698852539,
        "y": 1647.9925689697266,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "4f9233a2.7d7c54",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5271.233169555664,
        "y": 1054.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "633cbeb7.169858",
                "bab31b18.59cf48",
                "a317ded0.bb3c4",
                "ab06c276.223ba8",
                "cc9240f8.8f7cd"
            ]
        ]
    },
    {
        "id": "316e9aaa.7c7b56",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5098.566665649414,
        "y": 1055.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "4f9233a2.7d7c54"
            ]
        ]
    },
    {
        "id": "71d04631.299a38",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5108.057632446289,
        "y": 1098.1407012939453,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "92bf2c3c.4b1f48"
            ]
        ]
    },
    {
        "id": "ec19e5df.bfee3",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5096.566665649414,
        "y": 1144.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "97714895.6880b8"
            ]
        ]
    },
    {
        "id": "92bf2c3c.4b1f48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 5261.629043579102,
        "y": 1101.4264373779297,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "97714895.6880b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 5265.566665649414,
        "y": 1145.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "a17dcb43.36654",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4618.566665649414,
        "y": 1012.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "655303f9.8975f4",
                "9b0960f2.c7d238"
            ]
        ]
    },
    {
        "id": "55939baf.cd26bc",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4608.566665649414,
        "y": 1700.5665435791016,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "b454ce1a.9a4dd",
                "ee0171c8.01d89"
            ]
        ]
    },
    {
        "id": "5175d7af.72a12",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5239.233169555664,
        "y": 1890.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "211166d6.cdaa9a",
                "47621f66.6345e",
                "f6c10bde.dea908",
                "6cfa339.cd5cfcc",
                "3ea9d16d.7e59be"
            ]
        ]
    },
    {
        "id": "81d2e905.09274",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5066.566665649414,
        "y": 1891.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "5175d7af.72a12"
            ]
        ]
    },
    {
        "id": "55a1f73d.5c93d8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5076.057632446289,
        "y": 1934.1407012939453,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "17672cb7.bdb783"
            ]
        ]
    },
    {
        "id": "5050329c.16639c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5064.566665649414,
        "y": 1980.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "2763dbec.eed664"
            ]
        ]
    },
    {
        "id": "17672cb7.bdb783",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 5229.629043579102,
        "y": 1937.4264373779297,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "2763dbec.eed664",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 5233.566665649414,
        "y": 1981.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "633cbeb7.169858",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5535.566665649414,
        "y": 1038.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "ecc11d6d.c862e",
                "365f4120.012e4e"
            ]
        ]
    },
    {
        "id": "365f4120.012e4e",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5758.566665649414,
        "y": 993.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "ed0cfcb5.6f799"
            ]
        ]
    },
    {
        "id": "ecc11d6d.c862e",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5760.566665649414,
        "y": 1057.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "15da62b1.5ec4c5"
            ]
        ]
    },
    {
        "id": "477c6bc0.f92bb4",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 6093.566665649414,
        "y": 948.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "15da62b1.5ec4c5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5922.566665649414,
        "y": 1053.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "ed0cfcb5.6f799",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5923.566665649414,
        "y": 990.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "af8cf87c.3e959",
                "477c6bc0.f92bb4"
            ]
        ]
    },
    {
        "id": "af8cf87c.3e959",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 6094.566665649414,
        "y": 1056.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "29511ba5.29d8ec",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 6095.566665649414,
        "y": 1005.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "bab31b18.59cf48",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5582.566665649414,
        "y": 1107.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "5ea2f33c.ca6484",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 5471.566665649414,
        "y": 1148.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "211166d6.cdaa9a",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5525.566665649414,
        "y": 1894.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "cebb0d50.db953",
                "688b6aa8.d1c6fc"
            ]
        ]
    },
    {
        "id": "688b6aa8.d1c6fc",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5748.566665649414,
        "y": 1849.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "d72320d8.a0b208"
            ]
        ]
    },
    {
        "id": "cebb0d50.db953",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5750.566665649414,
        "y": 1913.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "bbeb85e7.eaaa98"
            ]
        ]
    },
    {
        "id": "1350a764.a43111",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 6083.566665649414,
        "y": 1807.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "bbeb85e7.eaaa98",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5909.566665649414,
        "y": 1932.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "d72320d8.a0b208",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5913.566665649414,
        "y": 1846.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "1350a764.a43111",
                "56aea40d.d80c4c"
            ]
        ]
    },
    {
        "id": "56aea40d.d80c4c",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 6084.566665649414,
        "y": 1912.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "339b4703.86709",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 6079.566665649414,
        "y": 1861.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "f6c10bde.dea908",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 5527.566665649414,
        "y": 2053.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "47621f66.6345e",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5572.566665649414,
        "y": 1963.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "62d8e003.5e65d8",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 5461.566665649414,
        "y": 2001.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "6876f035.c2a16",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4456.566665649414,
        "y": 2298.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "f41eeb62.b3bcb",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='prop.connection-attachment.access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='prop.connection-attachment.access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='prop.connection-attachment.access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='prop.connection-attachment.access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='prop.connection-attachment.access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n\n<!--<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />-->\n",
        "comments": "",
        "x": 4250.566665649414,
        "y": 2199.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "699e7317.6b96a4",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "put proper values for src topology-id, node-id, ltp-id, etc (in domain A)\nand dst topology-id, node-id, ltp-id, etc (in domain B)",
        "comments": "",
        "x": 4224.566665649414,
        "y": 2152.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "a317ded0.bb3c4",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 5665.566665649414,
        "y": 1245.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "6cfa339.cd5cfcc",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 5654.566665649414,
        "y": 2118.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "c6a5d055.f8bb1",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6709.566665649414,
        "y": 765.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "cd3a2dd3.05e5a8",
                "1bf85ef.2838b21",
                "420343c3.3589dc"
            ]
        ]
    },
    {
        "id": "5fc7bb3c.8d1c74",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2596.566665649414,
        "y": 420.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "a84decbd.fa4a3"
            ]
        ]
    },
    {
        "id": "aeab2187.904e6",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 993.5667877197266,
        "y": 815.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "d7c3541f.d6d0a"
            ]
        ]
    },
    {
        "id": "e7f6967b.1fb18",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2159.566665649414,
        "y": 514.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "e252c083.ada758",
                "8a02442.5502738"
            ]
        ]
    },
    {
        "id": "8a02442.5502738",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2480.566665649414,
        "y": 496.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "e252c083.ada758",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2462.566665649414,
        "y": 594.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "2a9b5bea.92ec14"
            ]
        ]
    },
    {
        "id": "f770d866.8cfe48",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n<parameter name='currLinkIsFound' value=\"false\" />\n\n\n",
        "comments": "",
        "x": 1416.566665649414,
        "y": 718.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "d7c3541f.d6d0a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1170.566665649414,
        "y": 808.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "f770d866.8cfe48",
                "67e01b15.d67c64"
            ]
        ]
    },
    {
        "id": "2cea34fe.7ff014",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 4798.566665649414,
        "y": 1017.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "655303f9.8975f4",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4841.566665649414,
        "y": 1082.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "316e9aaa.7c7b56",
                "71d04631.299a38",
                "ec19e5df.bfee3"
            ]
        ]
    },
    {
        "id": "b454ce1a.9a4dd",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4838.566665649414,
        "y": 1926.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "81d2e905.09274",
                "55a1f73d.5c93d8",
                "5050329c.16639c"
            ]
        ]
    },
    {
        "id": "4cadce3c.fc3c8",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 4799.566665649414,
        "y": 1870.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "a84decbd.fa4a3",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2889.566665649414,
        "y": 367.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "139101d.c6544fe",
                "39ec14f9.5d95cc",
                "e120429c.bc5038"
            ]
        ]
    },
    {
        "id": "39ec14f9.5d95cc",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3163.057632446289,
        "y": 260.14064025878906,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "b220c2f2.2811f8"
            ]
        ]
    },
    {
        "id": "b220c2f2.2811f8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3340.629165649414,
        "y": 260.42640686035156,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "e120429c.bc5038",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3158.566665649414,
        "y": 309.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "b527f79c.27eb58"
            ]
        ]
    },
    {
        "id": "b527f79c.27eb58",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3340.566665649414,
        "y": 309.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "139101d.c6544fe",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3162.566665649414,
        "y": 360.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "5a7a1590.04f2a4"
            ]
        ]
    },
    {
        "id": "5a7a1590.04f2a4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3342.566665649414,
        "y": 360.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "e7f6967b.1fb18"
            ]
        ]
    },
    {
        "id": "868ff940.3c40b8",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 768.5666656494141,
        "y": 744.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "53465e88.bf1338"
            ]
        ]
    },
    {
        "id": "53465e88.bf1338",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1039.566665649414,
        "y": 740.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "aeab2187.904e6"
            ]
        ]
    },
    {
        "id": "2acc7de6.ba44da",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3318.566665649414,
        "y": 558.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "1ba0c2fe.530a7d"
            ]
        ]
    },
    {
        "id": "1ba0c2fe.530a7d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3495.5665435791016,
        "y": 551.5665435791016,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "36b4ef1.f78561",
                "689094f0.f3db04"
            ]
        ]
    },
    {
        "id": "36b4ef1.f78561",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 3738.5665435791016,
        "y": 508.56654357910156,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "689094f0.f3db04",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 3727.5665435791016,
        "y": 563.5665435791016,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "e75fbbb3.7fba2",
                "2fda6ca1.8207e4",
                "df158bbf.d20168"
            ]
        ]
    },
    {
        "id": "df158bbf.d20168",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3980.566665649414,
        "y": 449.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "528123.112cfedc"
            ]
        ]
    },
    {
        "id": "528123.112cfedc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4129.138198852539,
        "y": 449.85243225097656,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "401b1dd2.2d0c84",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4128.075698852539,
        "y": 493.99269104003906,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "2fda6ca1.8207e4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3969.075698852539,
        "y": 493.99269104003906,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "401b1dd2.2d0c84"
            ]
        ]
    },
    {
        "id": "e75fbbb3.7fba2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3976.075698852539,
        "y": 572.9926910400391,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "29685226.26d7b6"
            ]
        ]
    },
    {
        "id": "29685226.26d7b6",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4115.075698852539,
        "y": 572.9926910400391,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "b7f6ee59.c1f0a",
                "4f4b77bb.effd9"
            ]
        ]
    },
    {
        "id": "b7f6ee59.c1f0a",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4320.566665649414,
        "y": 570.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "9b0960f2.c7d238",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4842.566665649414,
        "y": 752.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "94c0e823.bd83",
                "b5a5d52e.8f7da8"
            ]
        ]
    },
    {
        "id": "b5a5d52e.8f7da8",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5065.566665649414,
        "y": 738.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "d2c19564.10c95"
            ]
        ]
    },
    {
        "id": "94c0e823.bd83",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5067.566665649414,
        "y": 771.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "77422c58.e2ca74"
            ]
        ]
    },
    {
        "id": "77422c58.e2ca74",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5210.566665649414,
        "y": 768.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "d2c19564.10c95",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5213.566665649414,
        "y": 731.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "86b3b06a.5fafe8",
                "532eff46.9b467"
            ]
        ]
    },
    {
        "id": "86b3b06a.5fafe8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5375.566665649414,
        "y": 726.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "ee0171c8.01d89",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4856.566665649414,
        "y": 1589.5665435791016,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "35d69142.81ac16",
                "31d8fff7.b254e"
            ]
        ]
    },
    {
        "id": "31d8fff7.b254e",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5079.566665649414,
        "y": 1575.5665435791016,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "3036014d.a3b5f6"
            ]
        ]
    },
    {
        "id": "35d69142.81ac16",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5081.566665649414,
        "y": 1608.5665435791016,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "58956fb.abac91"
            ]
        ]
    },
    {
        "id": "58956fb.abac91",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5224.566665649414,
        "y": 1605.5665435791016,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "3036014d.a3b5f6",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5227.566665649414,
        "y": 1568.5665435791016,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "ad167193.a62748",
                "3753ad56.c9003a"
            ]
        ]
    },
    {
        "id": "ad167193.a62748",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5421.566665649414,
        "y": 1571.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "1f3c8c44.a01cfc",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1019.5666656494141,
        "y": 275.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "ab06c276.223ba8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5489.566665649414,
        "y": 1322.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "ea9f29c0.504f38"
            ]
        ]
    },
    {
        "id": "ea9f29c0.504f38",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5695.566665649414,
        "y": 1322.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "f9452712.6e7898"
            ]
        ]
    },
    {
        "id": "f9452712.6e7898",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5910.852310180664,
        "y": 1322.388442993164,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "2ef61702.ff9d28"
            ]
        ]
    },
    {
        "id": "2ef61702.ff9d28",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6117.683853149414,
        "y": 1322.906997680664,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "ad35cc1f.1df8c8",
                "fdae5377.6e0e68",
                "3c7c23ae.86ecbc"
            ]
        ]
    },
    {
        "id": "ad35cc1f.1df8c8",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6332.683853149414,
        "y": 1284.906997680664,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "fdae5377.6e0e68",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6329.683853149414,
        "y": 1323.906997680664,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "fb285ef7.1b4a58"
            ]
        ]
    },
    {
        "id": "3c7c23ae.86ecbc",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6285.183853149414,
        "y": 1365.906997680664,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "fb285ef7.1b4a58",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6510.183853149414,
        "y": 1322.906997680664,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "e8c4036a.c50bb8"
            ]
        ]
    },
    {
        "id": "e8c4036a.c50bb8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6668.183853149414,
        "y": 1322.906997680664,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "5ff1493f.72bdd"
            ]
        ]
    },
    {
        "id": "5ff1493f.72bdd",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 6875.183853149414,
        "y": 1322.906997680664,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "3ea9d16d.7e59be",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5486.566665649414,
        "y": 2191.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "bfbafb18.47d55"
            ]
        ]
    },
    {
        "id": "bfbafb18.47d55",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5692.566665649414,
        "y": 2191.5667877197266,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "4b1bcb13.657274"
            ]
        ]
    },
    {
        "id": "4b1bcb13.657274",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5907.852310180664,
        "y": 2191.3885650634766,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "25238122.c9549e"
            ]
        ]
    },
    {
        "id": "25238122.c9549e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6114.683853149414,
        "y": 2191.9071197509766,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "3cddf86c.952478",
                "82ecbff8.c2935",
                "7c6dea89.5156fc"
            ]
        ]
    },
    {
        "id": "3cddf86c.952478",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6329.683853149414,
        "y": 2153.9071197509766,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "82ecbff8.c2935",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6326.683853149414,
        "y": 2192.9071197509766,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "f35bec69.fa6618"
            ]
        ]
    },
    {
        "id": "7c6dea89.5156fc",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6282.183853149414,
        "y": 2234.9071197509766,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "f35bec69.fa6618",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6507.183853149414,
        "y": 2191.9071197509766,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "bca90be9.eb3b4"
            ]
        ]
    },
    {
        "id": "bca90be9.eb3b4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6665.183853149414,
        "y": 2191.9071197509766,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "cc4e410.f7e474"
            ]
        ]
    },
    {
        "id": "cc4e410.f7e474",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 6872.183853149414,
        "y": 2191.9071197509766,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "532eff46.9b467",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5402.566665649414,
        "y": 798.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "cfac27d1.f56fb",
                "98843042.abae5",
                "ad4bc4fb.4375a8"
            ]
        ]
    },
    {
        "id": "cfac27d1.f56fb",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5598.066787719727,
        "y": 750.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "42953eb.d2e8cc"
            ]
        ]
    },
    {
        "id": "98843042.abae5",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5590.066787719727,
        "y": 805.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "b64afde.27ba6"
            ]
        ]
    },
    {
        "id": "ad4bc4fb.4375a8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5595.066787719727,
        "y": 862.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "36f7d7a0.66c5f"
            ]
        ]
    },
    {
        "id": "36f7d7a0.66c5f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5747.066787719727,
        "y": 863.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "b64afde.27ba6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5758.066787719727,
        "y": 808.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "42953eb.d2e8cc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5742.449111938477,
        "y": 748.2223358154297,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "4bb018ae.9365f"
            ]
        ]
    },
    {
        "id": "12009159.0799bf",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6324.566665649414,
        "y": 766.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "2ed9d78.0097928"
            ]
        ]
    },
    {
        "id": "2ed9d78.0097928",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6501.566665649414,
        "y": 758.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "63498f0d.93d68",
                "c6a5d055.f8bb1"
            ]
        ]
    },
    {
        "id": "4bb018ae.9365f",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5926.566665649414,
        "y": 762.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "4e52f1e.bbcdb1"
            ]
        ]
    },
    {
        "id": "4e52f1e.bbcdb1",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6121.566665649414,
        "y": 762.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "12009159.0799bf",
                "66f34217.bc91ec"
            ]
        ]
    },
    {
        "id": "63498f0d.93d68",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6739.566665649414,
        "y": 713.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "cd3a2dd3.05e5a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6919.566665649414,
        "y": 756.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "b3c8e8eb.ab9658"
            ]
        ]
    },
    {
        "id": "1bf85ef.2838b21",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6911.566665649414,
        "y": 811.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "f4a0a941.e6174"
            ]
        ]
    },
    {
        "id": "420343c3.3589dc",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6916.566665649414,
        "y": 868.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "57b6c192.31833"
            ]
        ]
    },
    {
        "id": "57b6c192.31833",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7068.566665649414,
        "y": 869.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "f4a0a941.e6174",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7079.566665649414,
        "y": 814.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "b3c8e8eb.ab9658",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7063.948989868164,
        "y": 754.2223358154297,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "a03bd3df.8ec05"
            ]
        ]
    },
    {
        "id": "a03bd3df.8ec05",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7278.566665649414,
        "y": 750.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "3753ad56.c9003a",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5443.566665649414,
        "y": 1639.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "a7301f2a.402338",
                "5484e700.5c89d",
                "215a5bb9.bd15a4"
            ]
        ]
    },
    {
        "id": "a7301f2a.402338",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5639.066787719727,
        "y": 1591.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "7fc657c9.5c7cc8"
            ]
        ]
    },
    {
        "id": "5484e700.5c89d",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5631.066787719727,
        "y": 1646.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "474d315c.5dded"
            ]
        ]
    },
    {
        "id": "215a5bb9.bd15a4",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5636.066787719727,
        "y": 1703.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "4e1d6af8.1ffc14"
            ]
        ]
    },
    {
        "id": "4e1d6af8.1ffc14",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5788.066787719727,
        "y": 1704.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "474d315c.5dded",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5799.066787719727,
        "y": 1649.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "7fc657c9.5c7cc8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5783.449111938477,
        "y": 1589.2223358154297,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "5a87fca6.7b1764"
            ]
        ]
    },
    {
        "id": "8a681c82.4147c8",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6365.566665649414,
        "y": 1607.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "25c0f761.e40b7"
            ]
        ]
    },
    {
        "id": "25c0f761.e40b7",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6542.566665649414,
        "y": 1599.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "dc2cab92.383e5",
                "5874b3af.124b94"
            ]
        ]
    },
    {
        "id": "5a87fca6.7b1764",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5967.566665649414,
        "y": 1603.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "71c1ea6.16ca194"
            ]
        ]
    },
    {
        "id": "71c1ea6.16ca194",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6162.566665649414,
        "y": 1603.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "8a681c82.4147c8",
                "15c438a7.4c22d7"
            ]
        ]
    },
    {
        "id": "5874b3af.124b94",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6750.566665649414,
        "y": 1606.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "6cc22362.6b5aa4",
                "dbd01d5b.37e41",
                "f57a568d.3942"
            ]
        ]
    },
    {
        "id": "dc2cab92.383e5",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6780.566665649414,
        "y": 1554.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "6cc22362.6b5aa4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6960.566665649414,
        "y": 1597.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "57bfbb8e.7f8e04"
            ]
        ]
    },
    {
        "id": "dbd01d5b.37e41",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6952.566665649414,
        "y": 1652.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "396bc1e7.c35d2e"
            ]
        ]
    },
    {
        "id": "f57a568d.3942",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6957.566665649414,
        "y": 1709.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "68626ec4.afefc8"
            ]
        ]
    },
    {
        "id": "68626ec4.afefc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7109.566665649414,
        "y": 1710.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "396bc1e7.c35d2e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7120.566665649414,
        "y": 1655.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "57bfbb8e.7f8e04",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7104.948989868164,
        "y": 1595.2223358154297,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "183ddb54.5f2965"
            ]
        ]
    },
    {
        "id": "183ddb54.5f2965",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7319.566665649414,
        "y": 1591.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "2a9b5bea.92ec14",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 316.56666564941406,
        "y": 720.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "3a6bcd00.26c4c4",
                "868ff940.3c40b8"
            ]
        ]
    },
    {
        "id": "3a6bcd00.26c4c4",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 762.5666656494141,
        "y": 579.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "22d238c4.fa2b2"
            ]
        ]
    },
    {
        "id": "22d238c4.fa2b2",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3127.566665649414,
        "y": 561.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "2acc7de6.ba44da"
            ]
        ]
    },
    {
        "id": "66f34217.bc91ec",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 6327.566665649414,
        "y": 840.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "8e17eafe.169168"
            ]
        ]
    },
    {
        "id": "8e17eafe.169168",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6504.566665649414,
        "y": 832.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "39419ce1.8622b4"
            ]
        ]
    },
    {
        "id": "39419ce1.8622b4",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6739.566665649414,
        "y": 956.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "2bb9adc0.ca5fca",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6779.566665649414,
        "y": 1796.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "63d86b29.fe0a8c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6544.566665649414,
        "y": 1672.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "2bb9adc0.ca5fca"
            ]
        ]
    },
    {
        "id": "15c438a7.4c22d7",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 6367.566665649414,
        "y": 1680.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "63d86b29.fe0a8c"
            ]
        ]
    },
    {
        "id": "4f4b77bb.effd9",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4319.566665649414,
        "y": 616.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "a3f33877.70aa",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4341.566665649414,
        "y": 751.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "b172c901.cf8828",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4322.566665649414,
        "y": 801.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "d30b8bfe.c0acd",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1932.566665649414,
        "y": 349.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "bb8d5638.aa00f",
                "1ad24ca8.e833c3"
            ]
        ]
    },
    {
        "id": "bb8d5638.aa00f",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2197.566665649414,
        "y": 272.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "e8bc0d88.0a94d",
        "type": "set",
        "name": "set query_param",
        "xml": "<set>\n<parameter name='prop.ethsrvType' value='`$network-route-A`' />\n\n",
        "comments": "",
        "x": 4239.566665649414,
        "y": 2251.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "e8d2e62e.a7299",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='domain-A.tunnel-tp-id' value='' />\n<parameter name='domain-A.node-id' value='' />\n<parameter name='domain-A.network-id' value=\"\" />\n<parameter name='domain-A.provider-id' value=\"\" />\n<parameter name='domain-A.client-id' value=\"\" />\n<parameter name='domain-A.te-topo-id' value=\"\" />\n<parameter name='domain-A.network-type' value=\"\" />\n<parameter name='domain-A.ltpId' value=\"\" />\n<parameter name='tmp.domain-A.network-id' value=\"\" />\n<parameter name='tmp.domain-A.ttp-id' value=\"\" />\n<parameter name='network-route-A' value=\"\" />\n<!--<parameter name='domain-A.' value=\"\" />-->\n\n<parameter name='request-id' value='' />\n<parameter name='otn-source-node' value='' />\n<parameter name='otn-dest-node' value='' />\n<parameter name='bw-odu' value=\"\" />\n<parameter name='src-ttp-id' value='' />\n<parameter name='dst-ttp-id' value='' />\n\n<parameter name='domain-B.tunnel-tp-id' value='' />\n<parameter name='domain-B.node-id' value='' />\n<parameter name='domain-B.network-id' value=\"\" />\n<parameter name='domain-B.provider-id' value=\"\" />\n<parameter name='domain-B.client-id' value=\"\" />\n<parameter name='domain-B.te-topo-id' value=\"\" />\n<parameter name='domain-B.network-type' value=\"\" />\n<parameter name='domain-B.ltpId' value=\"\" />\n<parameter name='tmp.domain-B.network-id' value=\"\" />\n<parameter name='tmp.domain-B.ttp-id' value=\"\" />\n<parameter name='network-route-B' value=\"\" />\n<!--<parameter name='domain-B.' value=\"\" />-->\n\n\n\n\n\n",
        "comments": "",
        "x": 4222.566665649414,
        "y": 4009.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "4228fba9.d84434",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 4279.566665649414,
        "y": 846.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "3f522b00.e7a774",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='otnidx' start='0' end='`$tmp.otninfo_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 4268.566665649414,
        "y": 2491.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "bc62ddbe.40b578"
            ]
        ]
    },
    {
        "id": "a84a4901.ab0e28",
        "type": "save",
        "name": "save vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-otnidx-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<!--<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />-->\n<parameter name='customer-vpn-id' value='`($maxtpn + $gfp)`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$tmp.access-provider-id`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$tmp.access-client-id`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$tmp.access-topology-id`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.domainG-src-access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.domainG-dst-access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5396.566665649414,
        "y": 2998.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "bd40be8c.dbbe2"
            ]
        ]
    },
    {
        "id": "e8742cf6.070f98",
        "type": "save",
        "name": "save connectivity-A relationship to vpn-binding-A, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 5969.066665649414,
        "y": 3102.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "bd40be8c.dbbe2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5702.566665649414,
        "y": 2997.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "62dd0574.924774"
            ]
        ]
    },
    {
        "id": "62dd0574.924774",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5912.066665649414,
        "y": 2997.820571899414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "dfdbadd6.a714c8",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding $otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5432.566665649414,
        "y": 2462.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "7a29235.bdc29dc",
        "type": "switchNode",
        "name": "switch otnidx == 0",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5305.566665649414,
        "y": 3115.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "9e040fdf.4e1908",
                "afd9af18.cbf68"
            ]
        ]
    },
    {
        "id": "9e040fdf.4e1908",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5488.566665649414,
        "y": 3115.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "4d493b22.a954ac"
            ]
        ]
    },
    {
        "id": "afd9af18.cbf68",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5313.566665649414,
        "y": 3262.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "48643fac.9b7948"
            ]
        ]
    },
    {
        "id": "2165c5b.74a7eba",
        "type": "switchNode",
        "name": "switch otnidx == last",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5654.566665649414,
        "y": 3343.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "be7f13b1.86e45",
                "d545210.3bcece"
            ]
        ]
    },
    {
        "id": "be7f13b1.86e45",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5839.566665649414,
        "y": 3344.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "fa774d24.89417"
            ]
        ]
    },
    {
        "id": "d545210.3bcece",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5858.566665649414,
        "y": 3610.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "a5e2b559.bb92b8"
            ]
        ]
    },
    {
        "id": "76fed0d3.50c2b8",
        "type": "save",
        "name": "save connectivity-B relationship to vpn-binding-B, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6269.566665649414,
        "y": 3345.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "70c2d887.ebd89",
        "type": "execute",
        "name": "execute UUID generator for connectivity domain otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 6343.566665649414,
        "y": 3643.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "6dff6f96.bdd14",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-otnidx-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-otnidx-uuid`' />\n<!--<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />-->\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<!--<parameter name='access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<!--<parameter name='access-ltp-id' value='``' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='dummy' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<!--<parameter name='CBS' value='`$prop.sotn.cbs`' />-->\n<!--<parameter name='EBS' value='`$prop.sotn.ebs`' />-->\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 6279.566665649414,
        "y": 3694.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "da14d71e.29e388",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 6408.566665649414,
        "y": 3744.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "36a913e9.1aa2ec",
        "type": "comment",
        "name": "connectivity has not been created for middle domains, so we have to create one",
        "info": "",
        "comments": "",
        "x": 6418.566665649414,
        "y": 3587.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "e8dd53ff.bedac8",
        "type": "save",
        "name": "save connectivity-otnidx relationship to vpn-binding-otnidx, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6376.566665649414,
        "y": 3803.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "a5e2b559.bb92b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6015.566665649414,
        "y": 3611.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "70c2d887.ebd89",
                "6dff6f96.bdd14",
                "da14d71e.29e388",
                "e8dd53ff.bedac8",
                "74474f32.496d08"
            ]
        ]
    },
    {
        "id": "bc62ddbe.40b578",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4525.566665649414,
        "y": 2491.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "dfdbadd6.a714c8",
                "a84a4901.ab0e28",
                "7a29235.bdc29dc",
                "ea78e7b3.e08de",
                "d3bd92d0.f9c398",
                "a0d9c335.32979",
                "df425f50.085b58"
            ]
        ]
    },
    {
        "id": "e594bba7.4a822",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n\n",
        "comments": "",
        "x": 5893.566665649414,
        "y": 3159.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "87b29bcd.d06e1",
        "type": "execute",
        "name": "execute RestApiCallNode domainA UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainA.eth-network-id + '/node=' + $tmp.src.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.src.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 5946.566665649414,
        "y": 3203.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "5032251f.1cf2d4",
                "be6cefef.c756f"
            ]
        ]
    },
    {
        "id": "be6cefef.c756f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6217.566665649414,
        "y": 3188.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "9820d829.628f68"
            ]
        ]
    },
    {
        "id": "5032251f.1cf2d4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6215.566879272461,
        "y": 3246.566575050354,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "d853eef3.2531b"
            ]
        ]
    },
    {
        "id": "9820d829.628f68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI Coloring for domain A\" />\n",
        "comments": "",
        "x": 6357.566913604736,
        "y": 3188.5666666030884,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "d853eef3.2531b",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6363.593925476074,
        "y": 3237.31206035614,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "4d493b22.a954ac",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5629.566665649414,
        "y": 3105.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "e8742cf6.070f98",
                "e594bba7.4a822"
            ]
        ]
    },
    {
        "id": "fa774d24.89417",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5973.566665649414,
        "y": 3345.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "76fed0d3.50c2b8",
                "1f8bf5f5.3f985a"
            ]
        ]
    },
    {
        "id": "1f8bf5f5.3f985a",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "x": 6193.566665649414,
        "y": 3389.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "56138fb2.fa508",
        "type": "execute",
        "name": "execute RestApiCallNode domainB UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainB.eth-network-id + '/node=' + $tmp.dst.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.dst.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6244.566665649414,
        "y": 3433.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "c11f4412.596988",
                "3d65e0af.86bdc"
            ]
        ]
    },
    {
        "id": "3d65e0af.86bdc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6507.566665649414,
        "y": 3413.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "ab4947b8.f3efc8"
            ]
        ]
    },
    {
        "id": "c11f4412.596988",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6508.566879272461,
        "y": 3464.566575050354,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "42fcaa4.0e80754"
            ]
        ]
    },
    {
        "id": "ab4947b8.f3efc8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI coloring for domain B\" />\n",
        "comments": "",
        "x": 6647.566913604736,
        "y": 3413.5666666030884,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "42fcaa4.0e80754",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6653.593925476074,
        "y": 3462.31206035614,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "74474f32.496d08",
        "type": "set",
        "name": "set attachment_param domain otnidx",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 6290.566665649414,
        "y": 3863.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "c12964ef.831f2",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v21/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3609.566665649414,
        "y": 4210.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "46b1e3df.d037b4",
                "12132e54.c462e2",
                "bec1d9b0.34cbd8"
            ]
        ]
    },
    {
        "id": "46b1e3df.d037b4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3797.566665649414,
        "y": 4223.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "57bca9f.85d5a58"
            ]
        ]
    },
    {
        "id": "12132e54.c462e2",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3798.057632446289,
        "y": 4269.140701293945,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "6123f77d.b84b7"
            ]
        ]
    },
    {
        "id": "bec1d9b0.34cbd8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3795.566665649414,
        "y": 4312.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "c1bcff3.65bc5"
            ]
        ]
    },
    {
        "id": "57bca9f.85d5a58",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3970.566665649414,
        "y": 4221.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "48f214f2.afe82c"
            ]
        ]
    },
    {
        "id": "6123f77d.b84b7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3960.6290435791016,
        "y": 4269.42643737793,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "c1bcff3.65bc5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3962.566665649414,
        "y": 4311.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "6a14b8fb.57e66",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='dmnsidx' start='0' end='`$otn-tunnel-slice_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3598.566665649414,
        "y": 4401.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "d21b0d43.234748"
            ]
        ]
    },
    {
        "id": "5a7ba4c6.c66bd4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4408.566665649414,
        "y": 4401.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "d757ef24.d8b4b8"
            ]
        ]
    },
    {
        "id": "7025e4fd.b3ba94",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='stunidx' start='0' end='`$otn-tunnel-slice[$dmnsidx].list_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4180.566665649414,
        "y": 4401.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "5a7ba4c6.c66bd4"
            ]
        ]
    },
    {
        "id": "714d6791.87f3b8",
        "type": "set",
        "name": "set providerValue",
        "xml": "<set>\n<parameter name='providerValue' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].access-provider-id`' />\n<parameter name='found' value='false' />\n\n\n",
        "comments": "",
        "x": 5300.566665649414,
        "y": 4168.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "820ac720.b45068",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='testingvalue' value='$tmp.otninfo_length -1' />\n",
        "comments": "",
        "x": 5602.566665649414,
        "y": 3294.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "48643fac.9b7948",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5437.566665649414,
        "y": 3269.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "820ac720.b45068",
                "2165c5b.74a7eba"
            ]
        ]
    },
    {
        "id": "b8b8c8f9.3c3308",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n<parameter name='bwModified' value='false' />\n",
        "comments": "",
        "x": 1891.566665649414,
        "y": 299.56666564941406,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "48f214f2.afe82c",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4199.566665649414,
        "y": 4222.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "13a3ad3e.ce4b03"
            ]
        ]
    },
    {
        "id": "13a3ad3e.ce4b03",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4414.566665649414,
        "y": 4223.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "aaee7064.6ec4a8"
            ]
        ]
    },
    {
        "id": "54a1b0ce.796af",
        "type": "for",
        "name": "for arridx in tmp.arr",
        "xml": "<for index='arridx' start='0' end='`$tmp.arr_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5867.566665649414,
        "y": 4143.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "1cad0dda.a27a62"
            ]
        ]
    },
    {
        "id": "5f82b085.2694c",
        "type": "switchNode",
        "name": "switch $tmp.arr_length != 0",
        "xml": "<switch test='`$tmp.arr_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5333.566665649414,
        "y": 4223.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "64f08945.d78fe",
                "c8f5bcb9.62dc"
            ]
        ]
    },
    {
        "id": "64f08945.d78fe",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5529.566665649414,
        "y": 4193.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "bfcf40e9.39a97"
            ]
        ]
    },
    {
        "id": "c8f5bcb9.62dc",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5530.566665649414,
        "y": 4264.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "f29be22.ac73ba"
            ]
        ]
    },
    {
        "id": "bfcf40e9.39a97",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5680.566665649414,
        "y": 4191.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "54a1b0ce.796af",
                "5025eb6e.6416ac"
            ]
        ]
    },
    {
        "id": "1cad0dda.a27a62",
        "type": "switchNode",
        "name": "switch tmp.arr[$arridx] == $providerValue",
        "xml": "<switch test='`$tmp.arr[$arridx] == $providerValue`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6158.566665649414,
        "y": 4143.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "ef1aab2d.dfd7e",
                "c7951c87.3f94f8"
            ]
        ]
    },
    {
        "id": "ef1aab2d.dfd7e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6433.566665649414,
        "y": 4112.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "3158c3e7.0f4f1c"
            ]
        ]
    },
    {
        "id": "c7951c87.3f94f8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6434.566665649414,
        "y": 4183.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "18af5fa5.bfa388"
            ]
        ]
    },
    {
        "id": "3158c3e7.0f4f1c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6584.566665649414,
        "y": 4110.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "c68342ac.2196d8",
                "a6f93050.eee23",
                "cc632799.cbb108",
                "245ca61c.76b612",
                "939302e5.823e3"
            ]
        ]
    },
    {
        "id": "c68342ac.2196d8",
        "type": "set",
        "name": "set found to true",
        "xml": "<set>\n<parameter name='found' value='true' />\n\n\n",
        "comments": "",
        "x": 6772.566665649414,
        "y": 4070.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "a6f93050.eee23",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6844.566665649414,
        "y": 4115.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "939302e5.823e3",
        "type": "set",
        "name": "set twoD arr",
        "xml": "<set>\n\n<!--<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />-->\n<!--<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />-->\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<!--<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />-->\n<parameter name='`otn-tunnel-slice[$arridx].list_length`' value='`$sizeOfSliceList + 1`' />\n\n",
        "comments": "",
        "x": 6759.566665649414,
        "y": 4242.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "245ca61c.76b612",
        "type": "set",
        "name": "set sizeOfSliceList",
        "xml": "<set>\n<parameter name='sizeOfSliceList' value='`$otn-tunnel-slice[$arridx].list_length`' />\n\n\n",
        "comments": "",
        "x": 6780.566665649414,
        "y": 4178.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "f29be22.ac73ba",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5682.566665649414,
        "y": 4264.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "b939d5a3.62c49",
                "19ae4c6e.0e8cdc"
            ]
        ]
    },
    {
        "id": "b939d5a3.62c49",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='0' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5937.566665649414,
        "y": 4257.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "19ae4c6e.0e8cdc",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='tmp.arr[0]' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='1' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[0].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='1' />\n<parameter name='otn-tunnel-slice[0].list_length' value='1' />\n\n",
        "comments": "",
        "x": 5865.566665649414,
        "y": 4304.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "5025eb6e.6416ac",
        "type": "switchNode",
        "name": "switch found?",
        "xml": "<switch test='`$found`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5858.566665649414,
        "y": 4188.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "5f0ac92a.2af9f8",
                "5a001e78.4b9ed8"
            ]
        ]
    },
    {
        "id": "5f0ac92a.2af9f8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6018.566665649414,
        "y": 4180.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "26dc24b4.633a24"
            ]
        ]
    },
    {
        "id": "5a001e78.4b9ed8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6016.566665649414,
        "y": 4217.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "77dbb1e6.82cb3"
            ]
        ]
    },
    {
        "id": "26dc24b4.633a24",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6143.566665649414,
        "y": 4180.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "88be3e5.2470dc",
        "type": "save",
        "name": "store $arridx+1 somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx + 1`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6450.566665649414,
        "y": 4238.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "77dbb1e6.82cb3",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6176.566665649414,
        "y": 4225.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "88be3e5.2470dc",
                "7d97455b.7a4494"
            ]
        ]
    },
    {
        "id": "7d97455b.7a4494",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list_length`' value='1' />\n\n",
        "comments": "",
        "x": 6367.566665649414,
        "y": 4284.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "18af5fa5.bfa388",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6567.566665649414,
        "y": 4182.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "cc632799.cbb108",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6738.566665649414,
        "y": 4309.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "ea78e7b3.e08de",
        "type": "switchNode",
        "name": "switch dstPort == NULL",
        "xml": "<switch test=\"`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id == ''`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5135.566665649414,
        "y": 2521.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "11f77bdc.5c21c4",
                "4e61ac39.13325c"
            ]
        ]
    },
    {
        "id": "11f77bdc.5c21c4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5524.566665649414,
        "y": 2499.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "7430e7ea.530e58"
            ]
        ]
    },
    {
        "id": "4e61ac39.13325c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5525.566665649414,
        "y": 2545.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "40bd7840.ab6ab8"
            ]
        ]
    },
    {
        "id": "7430e7ea.530e58",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n",
        "comments": "",
        "x": 5738.566665649414,
        "y": 2498.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "40bd7840.ab6ab8",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />\n",
        "comments": "",
        "x": 5736.566665649414,
        "y": 2543.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "d757ef24.d8b4b8",
        "type": "set",
        "name": "set attachment_param sliceG",
        "xml": "<set>\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].request-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].request-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-source-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-source-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-dest-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-dest-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].bw-odu`' value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].bw-odu`\" />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].src-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].src-ttp-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].dst-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].dst-ttp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='otn-tunnel-sliceG-list_length' value='`$stunidx + 1`' />\n\n\n<parameter name=\"tmp.domainG.restapiUrl\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainurl`\" />\n<parameter name=\"tmp.domainG.restapiUser\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainuser`\" />\n<parameter name=\"tmp.domainG.restapiPassword\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainpassword`\" />",
        "comments": "",
        "x": 4661.566665649414,
        "y": 4399.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "b77c6069.584e4",
        "type": "execute",
        "name": "execute RestApiCallNode sliceG creation domainG",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-sliceG-list-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$tmp.domainG.restapiUrl + '/restconf/operations/ietf-optical-slice:create-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$tmp.domainG.restapiUser`\" />\n<parameter name=\"restapiPassword\" value=\"`tmp.domainG.restapiPassword`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4246.566665649414,
        "y": 4507.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "ba44af6e.91f5c8",
                "3bd2b367.4ad41c"
            ]
        ]
    },
    {
        "id": "3bd2b367.4ad41c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4529.566665649414,
        "y": 4487.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "37d6233a.1b0304"
            ]
        ]
    },
    {
        "id": "ba44af6e.91f5c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4530.566879272461,
        "y": 4538.566575050354,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "37a623d1.3ee5dc"
            ]
        ]
    },
    {
        "id": "37d6233a.1b0304",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing slice creation api for domain A\" />\n",
        "comments": "",
        "x": 4669.566913604736,
        "y": 4487.566666603088,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "37a623d1.3ee5dc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4675.593925476074,
        "y": 4536.31206035614,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "d3bd92d0.f9c398",
        "type": "set",
        "name": "set srcdstpnf-name",
        "xml": "<set>\n<parameter name='tmp.srcdstpnf-name' value=\"`'networkId-providerId-' + \n                                             $tmp.access-provider-id + '-clientId-' +\n                                             $tmp.access-client-id + '-topologyId-' + \n                                             $tmp.access-topology-id + '-nodeId-' + \n                                             $tmp.srcdstpnf-id`\" />\n\n",
        "comments": "",
        "x": 5319.566665649414,
        "y": 2641.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "a0d9c335.32979",
        "type": "get-resource",
        "name": "get-resource tmp.srcdstpnf-name",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.srcdstpnf-name\"\n        pfx='tmp.aai.srcdst-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5363.566665649414,
        "y": 2689.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "36774af5.729fc6",
                "692ec606.1c0bf",
                "a64279c9.e169f8"
            ]
        ]
    },
    {
        "id": "36774af5.729fc6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5576.066665649414,
        "y": 2636.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "24f01093.ed22"
            ]
        ]
    },
    {
        "id": "692ec606.1c0bf",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5588.066665649414,
        "y": 2686.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "b3f7be01.e6de6"
            ]
        ]
    },
    {
        "id": "a64279c9.e169f8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5579.066665649414,
        "y": 2741.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "4198105e.daee7"
            ]
        ]
    },
    {
        "id": "4198105e.daee7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5724.066665649414,
        "y": 2740.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "b3f7be01.e6de6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5735.066665649414,
        "y": 2683.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "24f01093.ed22",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5701.449111938477,
        "y": 2630.2223358154297,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "96aa274b.2af748"
            ]
        ]
    },
    {
        "id": "70fdda05.22abe4",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6260.566665649414,
        "y": 2648.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "5724269.b9bddd8"
            ]
        ]
    },
    {
        "id": "5724269.b9bddd8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6437.566665649414,
        "y": 2640.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "29fcda51.42b766",
                "d5b1f1ff.e7e908"
            ]
        ]
    },
    {
        "id": "96aa274b.2af748",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.srcdst-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5862.566665649414,
        "y": 2644.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "c5ea1030.bae808"
            ]
        ]
    },
    {
        "id": "c5ea1030.bae808",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6057.566665649414,
        "y": 2644.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "70fdda05.22abe4"
            ]
        ]
    },
    {
        "id": "d5b1f1ff.e7e908",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6645.566665649414,
        "y": 2647.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "56bf4e9f.3968f8",
                "437d47d9.20134",
                "1f059162.8a738f"
            ]
        ]
    },
    {
        "id": "29fcda51.42b766",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6675.566665649414,
        "y": 2595.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "56bf4e9f.3968f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6855.566665649414,
        "y": 2638.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "1dc1cb6d.3c36b5"
            ]
        ]
    },
    {
        "id": "437d47d9.20134",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6847.566665649414,
        "y": 2693.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "7f43de09.864508"
            ]
        ]
    },
    {
        "id": "1f059162.8a738f",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6852.566665649414,
        "y": 2750.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "b0293f66.5c8dc"
            ]
        ]
    },
    {
        "id": "b0293f66.5c8dc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7004.566665649414,
        "y": 2751.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "7f43de09.864508",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7015.566665649414,
        "y": 2696.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "1dc1cb6d.3c36b5",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6999.948989868164,
        "y": 2636.2223358154297,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "966090bf.048df8"
            ]
        ]
    },
    {
        "id": "966090bf.048df8",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7214.566665649414,
        "y": 2632.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "d21b0d43.234748",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3830.566665649414,
        "y": 4399.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "7025e4fd.b3ba94",
                "b77c6069.584e4"
            ]
        ]
    },
    {
        "id": "df425f50.085b58",
        "type": "switchNode",
        "name": "switch dmnsidx == 0 (domainA)",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5333.566665649414,
        "y": 2858.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "f12d2166.2196f",
                "682813b1.580324"
            ]
        ]
    },
    {
        "id": "f12d2166.2196f",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5534.566665649414,
        "y": 2856.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "c9eeec2d.e136b"
            ]
        ]
    },
    {
        "id": "c9eeec2d.e136b",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 5748.566665649414,
        "y": 2858.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "cb7ac096.290b9",
        "type": "switchNode",
        "name": "switch dmnsidx == last (domainB)",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5751.566665649414,
        "y": 2907.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "69e4928.c222dec",
                "f0c4a8ec.842b18"
            ]
        ]
    },
    {
        "id": "69e4928.c222dec",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5981.566665649414,
        "y": 2903.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "2b076d1.a6bcd92"
            ]
        ]
    },
    {
        "id": "2b076d1.a6bcd92",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />",
        "comments": "",
        "x": 6195.566665649414,
        "y": 2906.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "682813b1.580324",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5534.566665649414,
        "y": 2905.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "cb7ac096.290b9"
            ]
        ]
    },
    {
        "id": "f0c4a8ec.842b18",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5982.566665649414,
        "y": 2949.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "707799e0.88ec2"
            ]
        ]
    },
    {
        "id": "707799e0.88ec2",
        "type": "set",
        "name": "set attachment_param domain G",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 6196.566665649414,
        "y": 2949.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "850f3d1.0a8294",
        "type": "set",
        "name": "set tmp.slicevpns",
        "xml": "<set>\n<parameter name='`tmp.slicevpns[$tmp.slicevpns_length]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n<parameter name='tmp.slicevpns_length' value=\"`$tmp.slicevpns_length + 1`\" />\n\n<parameter name='`tmp.slicevpnuuids[$prop.vpn-binding-otnidx-uuid]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n\n",
        "comments": "",
        "x": 6094.566665649414,
        "y": 2998.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "aaee7064.6ec4a8",
        "type": "switchNode",
        "name": "switch vpnuuid is for this slice",
        "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n    \n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.aai.service-instance.service-instance-id `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 4658.566665649414,
        "y": 4222.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "89261301.f79ae",
                "bc254e44.388f98"
            ]
        ]
    },
    {
        "id": "89261301.f79ae",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4875.566665649414,
        "y": 4201.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "b99882e3.9c25b8"
            ]
        ]
    },
    {
        "id": "bc254e44.388f98",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4875.566665649414,
        "y": 4250.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "b99882e3.9c25b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5043.566665649414,
        "y": 4201.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "714d6791.87f3b8",
                "5f82b085.2694c"
            ]
        ]
    },
    {
        "id": "67e01b15.d67c64",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 1380.566650390625,
        "y": 835.566650390625,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "fdf74857.41608",
                "ee4e91c.5d8d17",
                "855c696.c46c118"
            ]
        ]
    },
    {
        "id": "fdf74857.41608",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1596.057632446289,
        "y": 799.1406402587891,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "43b6bc30.e8a804"
            ]
        ]
    },
    {
        "id": "ee4e91c.5d8d17",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1584.566665649414,
        "y": 843.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "a4b65a55.9111d"
            ]
        ]
    },
    {
        "id": "43b6bc30.e8a804",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1744.629165649414,
        "y": 799.4264068603516,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "a4b65a55.9111d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1743.566665649414,
        "y": 843.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "855c696.c46c118",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1589.566665649414,
        "y": 886.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "2b531922.e9da96"
            ]
        ]
    },
    {
        "id": "2b531922.e9da96",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 735.5666656494141,
        "y": 1225.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "7c91e56b.1594b4"
            ]
        ]
    },
    {
        "id": "7c91e56b.1594b4",
        "type": "for",
        "name": "for each svc-instance relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1009.5666656494141,
        "y": 1225.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "bfa4ee31.b57fd"
            ]
        ]
    },
    {
        "id": "bfa4ee31.b57fd",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1244.900161743164,
        "y": 1226.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "ccebaa1.97cf958"
            ]
        ]
    },
    {
        "id": "ccebaa1.97cf958",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 528.5669097900391,
        "y": 1379.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "6f5f9c23.47e85c"
            ]
        ]
    },
    {
        "id": "36292c23.d5bad4",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 917.5666656494141,
        "y": 1384.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "f72960d6.00c9a8",
                "cf896404.076eb8",
                "8c05370a.85ef68"
            ]
        ]
    },
    {
        "id": "f72960d6.00c9a8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1113.566665649414,
        "y": 1349.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "3b76e03e.4509b"
            ]
        ]
    },
    {
        "id": "cf896404.076eb8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1114.057632446289,
        "y": 1395.1407012939453,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "c0ebf57b.8932c"
            ]
        ]
    },
    {
        "id": "8c05370a.85ef68",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1078.566665649414,
        "y": 1440.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "ac014ec8.afc2c"
            ]
        ]
    },
    {
        "id": "c0ebf57b.8932c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1273.629165649414,
        "y": 1392.4264068603516,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "ac014ec8.afc2c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1231.566665649414,
        "y": 1442.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "ab34961f.f94a7",
        "type": "switchNode",
        "name": "switch loglink-id exists in conn",
        "xml": "<switch test='`$tmp.aai.logical-link.link-id == $tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1506.566665649414,
        "y": 1332.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "743d201b.02ef4",
                "96c2bcb9.b7be6"
            ]
        ]
    },
    {
        "id": "743d201b.02ef4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1717.566665649414,
        "y": 1297.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "bc409e2e.3633b"
            ]
        ]
    },
    {
        "id": "96c2bcb9.b7be6",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1714.566665649414,
        "y": 1358.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "b2c89b06.1d18",
        "type": "set",
        "name": "set currLinkIsFound",
        "xml": "<set>\n<parameter name='currLinkIsFound' value=\"true\" />\n\n\n",
        "comments": "",
        "x": 2055.566665649414,
        "y": 1270.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "bc409e2e.3633b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1869.566665649414,
        "y": 1298.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "b2c89b06.1d18"
            ]
        ]
    },
    {
        "id": "8e75c992.3dcad8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2022.566665649414,
        "y": 1326.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "aabee6e1.198dd8",
        "type": "comment",
        "name": "currLinkIsFound. Go to the next logical-link",
        "info": "",
        "comments": "",
        "x": 2027.566665649414,
        "y": 1220.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "ef9e5601.232bf8",
        "type": "switchNode",
        "name": "switch currLinkIsFound",
        "xml": "<switch test='`$currLinkIsFound`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1309.566665649414,
        "y": 950.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "b3aa3ada.f160e8",
                "b7eb38ae.e82468"
            ]
        ]
    },
    {
        "id": "b3aa3ada.f160e8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1495.566665649414,
        "y": 929.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "92e1cebb.b308b8"
            ]
        ]
    },
    {
        "id": "b7eb38ae.e82468",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1492.566665649414,
        "y": 1065.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "9334f6e1.75bd8"
            ]
        ]
    },
    {
        "id": "92e1cebb.b308b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1737.566665649414,
        "y": 924.5666656494141,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "33f6edc7.c109aa",
        "type": "comment",
        "name": "A new logical-link has been found: modify process should be triggered",
        "info": "",
        "comments": "",
        "x": 1683.566665649414,
        "y": 1028.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "3b76e03e.4509b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1277.566665649414,
        "y": 1333.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "ab34961f.f94a7",
                "1c716952.137bb7"
            ]
        ]
    },
    {
        "id": "1c716952.137bb7",
        "type": "switchNode",
        "name": "switch connectivityBW == gfp",
        "xml": "<switch test='`$tmp.aai.connectivity.bandwidth-profile-name == $gfp`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1507.566665649414,
        "y": 1423.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "7f55db50.0bbafc",
                "ba68eea1.e9a338"
            ]
        ]
    },
    {
        "id": "7f55db50.0bbafc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1712.566665649414,
        "y": 1419.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "ba68eea1.e9a338",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1714.566665649414,
        "y": 1469.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "94ed181a.25fe8"
            ]
        ]
    },
    {
        "id": "e266b7f2.fe727",
        "type": "set",
        "name": "set bwModified",
        "xml": "<set>\n<parameter name='bwModified' value=\"true\" />\n\n\n",
        "comments": "",
        "x": 2063.566665649414,
        "y": 1447.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "94ed181a.25fe8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1868.566665649414,
        "y": 1468.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "e266b7f2.fe727",
                "c9ff8521.2183a8"
            ]
        ]
    },
    {
        "id": "c9ff8521.2183a8",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 888.5666656494141,
        "y": 1673.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "2fcf0107.404b9e"
            ]
        ]
    },
    {
        "id": "2fcf0107.404b9e",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1093.566665649414,
        "y": 1673.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "f620da7d.b85a28"
            ]
        ]
    },
    {
        "id": "f620da7d.b85a28",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1259.566665649414,
        "y": 1673.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "5afceee0.e00098"
            ]
        ]
    },
    {
        "id": "5afceee0.e00098",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1422.566665649414,
        "y": 1673.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "da12db00.5b12d",
                "a52b001a.5c9b18"
            ]
        ]
    },
    {
        "id": "a52b001a.5c9b18",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
        "comments": "",
        "x": 1651.566665649414,
        "y": 1613.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "da12db00.5b12d",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1160.566665649414,
        "y": 1767.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "88650b88.fc30d",
                "ec560486.50e96",
                "25b4ff2b.4b18b8"
            ]
        ]
    },
    {
        "id": "e1e2e790.cb03a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1544.566665649414,
        "y": 1767.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "37781926.bbe2d6",
                "76e90665.699c78",
                "ce24e399.073d3"
            ]
        ]
    },
    {
        "id": "88650b88.fc30d",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1371.566665649414,
        "y": 1769.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "e1e2e790.cb03a8"
            ]
        ]
    },
    {
        "id": "ec560486.50e96",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1372.057632446289,
        "y": 1815.1407012939453,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "3ccd5736.62782"
            ]
        ]
    },
    {
        "id": "25b4ff2b.4b18b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1369.566665649414,
        "y": 1858.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "704847a.0ccbeb8"
            ]
        ]
    },
    {
        "id": "704847a.0ccbeb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1536.566665649414,
        "y": 1875.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "3ccd5736.62782",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1534.6290435791016,
        "y": 1815.4264373779297,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "6f5f9c23.47e85c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 700.5666656494141,
        "y": 1379.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "36292c23.d5bad4",
                "96bb2834.ab4d4"
            ]
        ]
    },
    {
        "id": "96bb2834.ab4d4",
        "type": "set",
        "name": "unset tmp.aai.connectivity",
        "xml": "<set>\n<parameter name='tmp.aai.connectivity.' value='' />\n",
        "comments": "",
        "x": 920.5666656494141,
        "y": 1327.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "37781926.bbe2d6",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1895.066665649414,
        "y": 1762.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "76e90665.699c78",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1822.066665649414,
        "y": 1826.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "9be1948a.b31058",
        "type": "comment",
        "name": "The following two nodes are for PCE",
        "info": "",
        "comments": "",
        "x": 1971.566650390625,
        "y": 46.566673278808594,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "57401e8a.a8ecc",
        "type": "get-resource",
        "name": "get-resource pnfs-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/pnfs?depth=0' depth = 0\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
        "comments": "",
        "outputs": 1,
        "x": 1921.566650390625,
        "y": 99.5666732788086,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "86a1c6ac.aa4d9",
        "type": "get-resource",
        "name": "get-resource logical-links",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
        "comments": "",
        "outputs": 1,
        "x": 1931.566650390625,
        "y": 138.56668090820312,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "fc1cf650.aa6b18",
        "type": "execute",
        "name": "execute printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenamemm`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4246.566665649414,
        "y": 2360.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "cc9240f8.8f7cd",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 5537.566665649414,
        "y": 1197.566665649414,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "3b99997f.82150e",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-find-maximum-used-tpn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4435.567077636719,
        "y": 2417.566696166992,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "2ab2958e.345c6a",
        "type": "switchNode",
        "name": "switch src and dst same domain?",
        "xml": "<switch test=\"`$param-prefix-domainA[$param-prefix-domainA_length -9] == $param-prefix-domainB[$param-prefix-domainB_length -9]`\">\n",
        "comments": "",
        "outputs": 1,
        "x": 2888.9000854492188,
        "y": 2464.5668182373047,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "21c7a96f.230fc6",
                "a4bfb1a.7ba14d"
            ]
        ]
    },
    {
        "id": "a4bfb1a.7ba14d",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3102.9000244140625,
        "y": 2477.566696166992,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "591ba76d.52253"
            ]
        ]
    },
    {
        "id": "21c7a96f.230fc6",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3083.8999633789062,
        "y": 2578.5668182373047,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "791966ec.7cb7a"
            ]
        ]
    },
    {
        "id": "d5865f6c.c9966",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3677.2332153320312,
        "y": 2420.899948120117,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "791966ec.7cb7a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3234.2333984375,
        "y": 2578.8998260498047,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "5c02cdd2.3ba3bc",
                "6d7db185.f222a",
                "4a5a5654.7a3e18",
                "1ef4d127.0e3e8f"
            ]
        ]
    },
    {
        "id": "5c02cdd2.3ba3bc",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding $otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-samedomain-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3518.2332763671875,
        "y": 2584.566696166992,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "6d7db185.f222a",
        "type": "set",
        "name": "set attachment_param Same Domain",
        "xml": "<set>\n<parameter name='tmp.sameDomain-src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='tmp.sameDomain-dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 3486.2332763671875,
        "y": 2644.899703979492,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "4a5a5654.7a3e18",
        "type": "save",
        "name": "save vpn-binding same domain resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-samedomain-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-samedomain-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<!--<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />-->\n<parameter name='customer-vpn-id' value='`($maxtpn + $gfp)`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.sameDomain-src-access-node-id`' />\n<!--<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />-->\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.sameDomain-dst-access-node-id`' />\n<!--<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />-->\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3551.5665283203125,
        "y": 2700.899703979492,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "9d7de4f8.93c768"
            ]
        ]
    },
    {
        "id": "9d7de4f8.93c768",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3868.5665283203125,
        "y": 2702.899703979492,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "3ccad972.8b2556"
            ]
        ]
    },
    {
        "id": "3ccad972.8b2556",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4032.0665283203125,
        "y": 2702.153610229492,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "1ef4d127.0e3e8f",
        "type": "save",
        "name": "save connectivity-domainA relationship to vpn-binding-sameDomain, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-samedomain-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3600.23291015625,
        "y": 2755.566452026367,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "591ba76d.52253",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3253.8998413085938,
        "y": 2443.5668182373047,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "d5865f6c.c9966",
                "3f522b00.e7a774"
            ]
        ]
    },
    {
        "id": "ac7ac40f.6ba598",
        "type": "set",
        "name": "set attachment_param for OTN A",
        "xml": "<set>\n<parameter name='src-node-id' value='`$tmp.aai.vpn-bindingA.src-access-node-id`' />\n<parameter name='dst-node-id' value='`$tmp.aai.vpn-bindingA.dst-access-node-id`' />\n<!--<parameter name='dst-tpn-id' value='1' />-->\n<parameter name='dst-tpn-id' value='`$tmp.aai.vpn-bindingA.customer-vpn-id`' />\n<parameter name='dst-ttp-id' value='`$tmp.aai.vpn-bindingA.dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='otn-tunnel-name-src-domain' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='client-id' value='`$tmp.aai.vpn-bindingA.access-client-id`' />\n<parameter name='provider-id' value='`$tmp.aai.vpn-bindingA.access-provider-id`' />\n<parameter name='topology-id' value='`$tmp.aai.vpn-bindingA.access-topology-id`' />\n",
        "comments": "",
        "x": 643,
        "y": 2076.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "e669d16d.38d03",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`'networkId-providerId-' +\n                                                   $tmp.aai.vpn-bindingA.access-provider-id + '-clientId-' +\n                                                   $tmp.aai.vpn-bindingA.access-client-id + '-topologyId-' +\n                                                   $tmp.aai.vpn-bindingA.access-topology-id + '-nodeId-' +\n                                                   $tmp.aai.vpn-bindingA.src-access-node-id`\" />\n",
        "comments": "",
        "x": 581,
        "y": 2124.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "470fb63d.0a55b8",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 607,
        "y": 2241.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "bd66b470.31b5d8",
                "51c8764a.3044c",
                "abb4bd26.885e5"
            ]
        ]
    },
    {
        "id": "bd66b470.31b5d8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 802.5001220703125,
        "y": 2193.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "5dbd746e.2a26a4"
            ]
        ]
    },
    {
        "id": "51c8764a.3044c",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 794.5001220703125,
        "y": 2248.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "4e8d2414.8f8eec"
            ]
        ]
    },
    {
        "id": "5dbd746e.2a26a4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 946.8824462890625,
        "y": 2192.9891662597656,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "812dd5d1.dde898"
            ]
        ]
    },
    {
        "id": "a5443da6.ad8678",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1529,
        "y": 2195.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "70a7204b.0ea1d8"
            ]
        ]
    },
    {
        "id": "812dd5d1.dde898",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1131,
        "y": 2191.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "7886079.b4f95f8"
            ]
        ]
    },
    {
        "id": "7886079.b4f95f8",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1326,
        "y": 2191.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "a5443da6.ad8678"
            ]
        ]
    },
    {
        "id": "abb4bd26.885e5",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 799.5001220703125,
        "y": 2305.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "e5ef91a4.4dc22"
            ]
        ]
    },
    {
        "id": "e5ef91a4.4dc22",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 951.5001220703125,
        "y": 2306.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "4e8d2414.8f8eec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 962.5001220703125,
        "y": 2249.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "b78e417e.9e5128",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 1914,
        "y": 2208.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "2e2e40ce.837fb",
                "b317a2a6.81686",
                "2a5f3037.5e6bf"
            ]
        ]
    },
    {
        "id": "70a7204b.0ea1d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1708,
        "y": 2195.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "7a83b201.90f15c",
                "b78e417e.9e5128"
            ]
        ]
    },
    {
        "id": "7a83b201.90f15c",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 1944,
        "y": 2156.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "2e2e40ce.837fb",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2124,
        "y": 2199.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "5b2aca6e.68dd9c"
            ]
        ]
    },
    {
        "id": "b317a2a6.81686",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2116,
        "y": 2254.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "83f0e85f.95d068"
            ]
        ]
    },
    {
        "id": "2a5f3037.5e6bf",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2121,
        "y": 2311.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "c5782cdd.b4cf6"
            ]
        ]
    },
    {
        "id": "c5782cdd.b4cf6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2273,
        "y": 2312.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "83f0e85f.95d068",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 2284,
        "y": 2257.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "5b2aca6e.68dd9c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2268.38232421875,
        "y": 2196.9891662597656,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "28d41ca6.66cafc"
            ]
        ]
    },
    {
        "id": "28d41ca6.66cafc",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 2483,
        "y": 2193.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "8559d791.3348a",
        "type": "set",
        "name": "set vpn-bindingA and connectivityA",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingA.' value=\"`$tmp.aai.vpn-binding.`\" />\n<parameter name='tmp.aai.connectivityA.' value=\"`$tmp.aai.connectivity.`\" />\n",
        "comments": "",
        "x": 638,
        "y": 2016.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "2ec1dd57.5743da",
        "type": "set",
        "name": "set sotn_value",
        "xml": "<set>\n<!--<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.connectivity-id`' />-->\n<parameter name='eth-service-name' value='`$tmp.aai.connectivityA.etht-svc-name`' />\n<parameter name='slice-id' value='`$vnf-topology-operation-input.service-information.service-instance-id`' />\n<parameter name='provider-id' value='`$tmp.aai.connectivityA.access-provider-id`' />\n<parameter name='client-id' value='`$tmp.aai.connectivityA.access-client-id`' />\n<parameter name='topology-id' value='`$tmp.aai.connectivityA.access-topology-id`' />\n<parameter name='otn-tunnel-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n<parameter name='ethernet-end-point-name' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='index-number' value='0' />\n<parameter name='eth-node-id' value='`$tmp.aai.connectivityA.access-node-id`' />\n<parameter name='eth-node-tp-id' value='`$tmp.aai.connectivityA.access-ltp-id`' />\n<parameter name='CIR' value='`$gfp *1000000`' />\n<!--<parameter name='EIR' value='`$tmp.aai.vpn-bindingA.route-distinguisher *1000000`' />-->\n<parameter name='EIR' value='0' />\n<parameter name='cvlan' value='`$tmp.aai.connectivityA.cvlan`' />\n",
        "comments": "",
        "x": 590.5,
        "y": 2579.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "6059dee6.cfa7c",
        "type": "execute",
        "name": "execute RestApiCallNode Create ethernet Service without token",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<!--<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.p2p-ethernet-service.templatefile`\" />-->\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.p2p-ethernet-service-modify.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-eth-tran-service:etht-svc/etht-svc-instances=' + $tmp.aai.connectivityA.etht-svc-name`\" />\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.restapi.connection-oof-url`\" />-->\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name='dirPath' value=\"/opt/onap/sdnc/restconfapi/yang\" />\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "outputs": 1,
        "x": 744.5,
        "y": 2627.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "461f2bfe.52478c",
                "577c9525.87fa7c"
            ]
        ]
    },
    {
        "id": "461f2bfe.52478c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1090,
        "y": 2608.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "10f69144.7b4de7"
            ]
        ]
    },
    {
        "id": "577c9525.87fa7c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1094,
        "y": 2648.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "8cffbf3.0a002c"
            ]
        ]
    },
    {
        "id": "10f69144.7b4de7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing Create ethernet service rest api\" />\n",
        "comments": "",
        "x": 1248,
        "y": 2608.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "8cffbf3.0a002c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 1251.5,
        "y": 2648.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "c0fd436b.9f0558",
                "3a753166.0d0e96",
                "3a73518d.f9cb96"
            ]
        ]
    },
    {
        "id": "55040664.2c4708",
        "type": "comment",
        "name": "TODO: FIXME:",
        "info": "put proper values based on connectivity resource retrieved from AAI",
        "comments": "",
        "x": 588,
        "y": 2535.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "c0fd436b.9f0558",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-bindingA.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-bindingA.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-bindingA.vpn-name`' />\n\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1635.000244140625,
        "y": 2583.3336181640625,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "3a753166.0d0e96",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivityA.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivityA.connectivity-id`' />\n<parameter name='operational-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1562.000244140625,
        "y": 2629.3336181640625,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "3a73518d.f9cb96",
        "type": "save",
        "name": "update service-instance resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'>\n<parameter name='service-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n<parameter name='orchestration-status' value='Activated' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1581.750244140625,
        "y": 2689.8336181640625,
        "z": "7a2c5977.5cc868",
        "wires": [
            []
        ]
    },
    {
        "id": "ce24e399.073d3",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 329,
        "y": 2273.33349609375,
        "z": "7a2c5977.5cc868",
        "wires": [
            [
                "8559d791.3348a",
                "ac7ac40f.6ba598",
                "e669d16d.38d03",
                "470fb63d.0a55b8",
                "2ec1dd57.5743da",
                "6059dee6.cfa7c",
                "51061087.32f088"
            ]
        ]
    },
    {
        "id": "51061087.32f088",
        "type": "set",
        "name": "unset vpn-bindingA and connectivityA",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-bindingA.' value=\"\" />\n<parameter name='tmp.aai.connectivityA.' value=\"\" />\n",
        "comments": "",
        "x": 630.3333129882812,
        "y": 1956.3333740234375,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "a60e8c64.59a75",
        "type": "set",
        "name": "unset the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"\" />\n<parameter name='route-distinguisher' value='' />\n\n\n\n",
        "comments": "",
        "x": 1921.3333740234375,
        "y": 193.33334350585938,
        "z": "7a2c5977.5cc868",
        "wires": []
    },
    {
        "id": "ff6e4688.eabb4",
        "type": "set",
        "name": "unset the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='' />\n\n\n\n",
        "comments": "",
        "x": 1920.3333740234375,
        "y": 239.33334350585938,
        "z": "7a2c5977.5cc868",
        "wires": []
    }
]