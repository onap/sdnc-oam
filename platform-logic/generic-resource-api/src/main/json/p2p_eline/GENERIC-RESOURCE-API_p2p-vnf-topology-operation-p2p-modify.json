[
    {
        "id": "2211395a.011d9e",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 163.3333282470703,
        "y": 160.33334350585938,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "76c66690.98a45"
            ]
        ]
    },
    {
        "id": "76c66690.98a45",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 388.6190185546875,
        "y": 234.5714521408081,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "b63d123d.97032"
            ]
        ]
    },
    {
        "id": "b63d123d.97032",
        "type": "method",
        "name": "method p2p-vnf-topology-operation-p2p-modify",
        "xml": "<method rpc='p2p-vnf-topology-operation-p2p-modify' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 394.7619323730469,
        "y": 319.3333740234375,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "8673b8f9.6a3da8"
            ]
        ]
    },
    {
        "id": "8673b8f9.6a3da8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 764.5713653564453,
        "y": 344.0000305175781,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ae3ebf6e.ef0d08",
                "ab777fe6.923ff8",
                "74df18ed.a4e518"
            ]
        ]
    },
    {
        "id": "ae3ebf6e.ef0d08",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1019.9048614501953,
        "y": 497.9303283691406,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "ab777fe6.923ff8",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1087.3333282470703,
        "y": 317.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "aea97b8e.023f8",
                "722dfa8c.b5ceac",
                "9688fc7c.73aaf"
            ]
        ]
    },
    {
        "id": "aea97b8e.023f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1312.3333282470703,
        "y": 175.33334350585938,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ef41f2be.ad3298"
            ]
        ]
    },
    {
        "id": "722dfa8c.b5ceac",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1307.8242950439453,
        "y": 244.90737915039062,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "1d2d7b8b.bf556c"
            ]
        ]
    },
    {
        "id": "9688fc7c.73aaf",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1296.3333282470703,
        "y": 291.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "8b1a56ec.d55058"
            ]
        ]
    },
    {
        "id": "ef41f2be.ad3298",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1551.3333282470703,
        "y": 172.33334350585938,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "34ae60f0.b22a",
                "2322bdf8.c6bb02"
            ]
        ]
    },
    {
        "id": "1d2d7b8b.bf556c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1461.3957061767578,
        "y": 248.193115234375,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "8b1a56ec.d55058",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1465.3333282470703,
        "y": 292.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "34ae60f0.b22a",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1764.3333282470703,
        "y": 196.33334350585938,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "3d51a7bc.14e5d"
            ]
        ]
    },
    {
        "id": "2322bdf8.c6bb02",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1766.3333282470703,
        "y": 136.33334350585938,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "660e6b22.7f394c",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1066.3333282470703,
        "y": 205.33334350585938,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "3d51a7bc.14e5d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1709.3333282470703,
        "y": 378.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "5c997953.c5b528",
                "38f52a4e.84a6be",
                "efd37c2f.4ac7f",
                "ba577b94.b0dc8"
            ]
        ]
    },
    {
        "id": "c943499a.5fba18",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-name`\" />\n<!--<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-id`\" />-->\n\n\n",
        "comments": "",
        "x": 4278.33332824707,
        "y": 885.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "a02a2dea.0be938",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='network-route-B' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 4279.33332824707,
        "y": 940.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "b14c900.06de0f",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2235.3333282470703,
        "y": 335.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "dfed5f78.dacb98",
                "5582b318.e9d204",
                "2fce3c04.1858e4"
            ]
        ]
    },
    {
        "id": "dfed5f78.dacb98",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2451.3333282470703,
        "y": 402.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "782c069d.e39358"
            ]
        ]
    },
    {
        "id": "5582b318.e9d204",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2451.8242950439453,
        "y": 301.9073181152344,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "6fdc0c14.bf49ec"
            ]
        ]
    },
    {
        "id": "2fce3c04.1858e4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2447.3333282470703,
        "y": 351.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "40e570f4.a7125"
            ]
        ]
    },
    {
        "id": "6fdc0c14.bf49ec",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2629.3958282470703,
        "y": 302.1930847167969,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "40e570f4.a7125",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2629.3333282470703,
        "y": 351.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "c63be28d.8bf768",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 3504.3333282470703,
        "y": 856.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "fe4eb74e.b16da8",
                "f1a8adba.61278",
                "1668ffd4.4ff0c"
            ]
        ]
    },
    {
        "id": "fe4eb74e.b16da8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3795.8242950439453,
        "y": 834.9073181152344,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "1a4b644b.4c6e64"
            ]
        ]
    },
    {
        "id": "f1a8adba.61278",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3784.3333282470703,
        "y": 879.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "9213678.fc93898"
            ]
        ]
    },
    {
        "id": "1a4b644b.4c6e64",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3944.3958282470703,
        "y": 835.1930847167969,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "9213678.fc93898",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3943.3333282470703,
        "y": 879.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "1668ffd4.4ff0c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3790.3333282470703,
        "y": 926.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "498e3ba4.cbc914",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3944.3333282470703,
        "y": 965.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "c943499a.5fba18",
                "a02a2dea.0be938",
                "baaef2d3.b5b91",
                "217d122e.216aae",
                "f7348f80.aa12e8",
                "7a252ae2.45ae64",
                "9446dea5.335408",
                "adfb9d4f.ef8fd8",
                "586bfbbd.46cc14",
                "2a7b5024.c32ac8",
                "8e0823d9.c3d5f",
                "642b12a.3e870ec",
                "f34b01.8e0f75"
            ]
        ]
    },
    {
        "id": "baaef2d3.b5b91",
        "type": "save",
        "name": "get network-route-A from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-A'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-A\">",
        "comments": "",
        "outputs": 1,
        "x": 4291.33332824707,
        "y": 1008.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "d4cc395.cbcc8c8",
                "73709604.b968f",
                "7296162a.34f3c8"
            ]
        ]
    },
    {
        "id": "217d122e.216aae",
        "type": "save",
        "name": "get network-route-B from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-B'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-B\">",
        "comments": "",
        "outputs": 1,
        "x": 4270.33332824707,
        "y": 1610.3332214355469,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "33c50f98.788ad",
                "41cb8574.dd9304",
                "d536577b.eef8e8"
            ]
        ]
    },
    {
        "id": "d4cc395.cbcc8c8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4492.33332824707,
        "y": 892.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "d86c12e3.b2275"
            ]
        ]
    },
    {
        "id": "73709604.b968f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4487.842361450195,
        "y": 941.7593688964844,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "800e46e3.3573a"
            ]
        ]
    },
    {
        "id": "7296162a.34f3c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4491.842361450195,
        "y": 992.7593688964844,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "a34e2377.27ccd8"
            ]
        ]
    },
    {
        "id": "d86c12e3.b2275",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4640.904861450195,
        "y": 891.6191101074219,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "800e46e3.3573a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4630.842361450195,
        "y": 941.7593688964844,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "33c50f98.788ad",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4493.33332824707,
        "y": 1580.3332214355469,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "4a962304.a215f4"
            ]
        ]
    },
    {
        "id": "41cb8574.dd9304",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4488.842361450195,
        "y": 1629.7592468261719,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "310d3fa7.cc4238"
            ]
        ]
    },
    {
        "id": "d536577b.eef8e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4492.842361450195,
        "y": 1680.7592468261719,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "c757b760.b406b"
            ]
        ]
    },
    {
        "id": "4a962304.a215f4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4641.904861450195,
        "y": 1579.6189880371094,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "310d3fa7.cc4238",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4631.842361450195,
        "y": 1629.7592468261719,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "62da33ab.561f8c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5305.99983215332,
        "y": 1036.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "70f308bc.05dc48",
                "a4aed251.f9b08",
                "d868e9d5.e95cb",
                "2078a502.9da27a",
                "8465e4fd.6de0a"
            ]
        ]
    },
    {
        "id": "24a2bf70.dd5f6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5133.33332824707,
        "y": 1037.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "62da33ab.561f8c"
            ]
        ]
    },
    {
        "id": "b92bac73.6c9778",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5142.824295043945,
        "y": 1079.9073791503906,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e76a7bba.50458"
            ]
        ]
    },
    {
        "id": "4c3b9d0a.797a8c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5131.33332824707,
        "y": 1126.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "24a51d5a.eb4b0a"
            ]
        ]
    },
    {
        "id": "e76a7bba.50458",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 5296.395706176758,
        "y": 1083.193115234375,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "24a51d5a.eb4b0a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 5300.33332824707,
        "y": 1127.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "a34e2377.27ccd8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4653.33332824707,
        "y": 994.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "709f1167.bbcf68",
                "77da836c.7c453c"
            ]
        ]
    },
    {
        "id": "c757b760.b406b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4643.33332824707,
        "y": 1682.3332214355469,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e832df40.3cb4e8",
                "e46caf0e.563478"
            ]
        ]
    },
    {
        "id": "e7fcac87.3713a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5273.99983215332,
        "y": 1872.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "53c6fb5d.111ec4",
                "34b35dcd.443f82",
                "3a858051.3cdb98",
                "a5489f79.fd4018",
                "a9a1085f.9d214"
            ]
        ]
    },
    {
        "id": "d0bf9af7.9310c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5101.33332824707,
        "y": 1873.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e7fcac87.3713a"
            ]
        ]
    },
    {
        "id": "26c8c3e3.b7c694",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5110.824295043945,
        "y": 1915.9073791503906,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "a82c31f6.750ae8"
            ]
        ]
    },
    {
        "id": "dbc3af7a.2f9fb8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5099.33332824707,
        "y": 1962.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "10e75613.88aafa"
            ]
        ]
    },
    {
        "id": "a82c31f6.750ae8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 5264.395706176758,
        "y": 1919.193115234375,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "10e75613.88aafa",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 5268.33332824707,
        "y": 1963.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "70f308bc.05dc48",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5570.33332824707,
        "y": 1020.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "6bbffa2e.46690c",
                "77cd07cb.ebdf78"
            ]
        ]
    },
    {
        "id": "77cd07cb.ebdf78",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5793.33332824707,
        "y": 975.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e975bc36.28a99"
            ]
        ]
    },
    {
        "id": "6bbffa2e.46690c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5795.33332824707,
        "y": 1039.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "8466cb9d.f4bc28"
            ]
        ]
    },
    {
        "id": "d8fed17b.7e481",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 6128.33332824707,
        "y": 930.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "8466cb9d.f4bc28",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5957.33332824707,
        "y": 1035.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "e975bc36.28a99",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5958.33332824707,
        "y": 972.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "34be39c3.d02096",
                "d8fed17b.7e481"
            ]
        ]
    },
    {
        "id": "34be39c3.d02096",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 6129.33332824707,
        "y": 1038.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "becbdb78.8c28c",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 6130.33332824707,
        "y": 987.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "a4aed251.f9b08",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5617.33332824707,
        "y": 1089.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "1e8d2c8e.4a5dbb",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 5506.33332824707,
        "y": 1130.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "53c6fb5d.111ec4",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5560.33332824707,
        "y": 1876.3334655761719,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "46b3e138.d3f2e8",
                "cddf08d4.ef0a5"
            ]
        ]
    },
    {
        "id": "cddf08d4.ef0a5",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5783.33332824707,
        "y": 1831.3334655761719,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "f20f3066.a035b8"
            ]
        ]
    },
    {
        "id": "46b3e138.d3f2e8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5785.33332824707,
        "y": 1895.3334655761719,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "2b8acdb2.b50cfa"
            ]
        ]
    },
    {
        "id": "db0e4a6.96bfeb8",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 6118.33332824707,
        "y": 1789.3334655761719,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "2b8acdb2.b50cfa",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5944.33332824707,
        "y": 1914.3334655761719,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "f20f3066.a035b8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5948.33332824707,
        "y": 1828.3334655761719,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "db0e4a6.96bfeb8",
                "aa82495b.a24c98"
            ]
        ]
    },
    {
        "id": "aa82495b.a24c98",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 6119.33332824707,
        "y": 1894.3334655761719,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "76704f22.ba3f58",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 6114.33332824707,
        "y": 1843.3334655761719,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "3a858051.3cdb98",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 5562.33332824707,
        "y": 2035.3334655761719,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "34b35dcd.443f82",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5607.33332824707,
        "y": 1945.3334655761719,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "c373fb4d.a3a7f",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 5496.33332824707,
        "y": 1983.3334655761719,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "f7348f80.aa12e8",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4491.33332824707,
        "y": 2280.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "7a252ae2.45ae64",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='prop.connection-attachment.access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='prop.connection-attachment.access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='prop.connection-attachment.access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='prop.connection-attachment.access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='prop.connection-attachment.access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n\n<!--<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />-->\n",
        "comments": "",
        "x": 4285.33332824707,
        "y": 2181.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "c4146d99.a600e",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "put proper values for src topology-id, node-id, ltp-id, etc (in domain A)\nand dst topology-id, node-id, ltp-id, etc (in domain B)",
        "comments": "",
        "x": 4259.33332824707,
        "y": 2134.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "d868e9d5.e95cb",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 5700.33332824707,
        "y": 1227.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "a5489f79.fd4018",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 5689.33332824707,
        "y": 2100.333465576172,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "e38e7099.4c1268",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6744.33332824707,
        "y": 747.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "60adc82e.ec907",
                "ef6befb7.25ec38",
                "2514309d.ea219"
            ]
        ]
    },
    {
        "id": "782c069d.e39358",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2631.3333282470703,
        "y": 402.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "5b7c0727.9a035"
            ]
        ]
    },
    {
        "id": "47d4cad8.17d52c",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1028.3334503173828,
        "y": 797.3334655761719,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "6079a4cf.66fe14"
            ]
        ]
    },
    {
        "id": "21c0e3fe.82515c",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2194.3333282470703,
        "y": 496.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "8d2ba343.63f8c8",
                "ae4416d5.ca7b4"
            ]
        ]
    },
    {
        "id": "ae4416d5.ca7b4",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2515.3333282470703,
        "y": 478.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "8d2ba343.63f8c8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2497.3333282470703,
        "y": 576.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "b6502203.02c108"
            ]
        ]
    },
    {
        "id": "8bb28c9b.5b048",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n<parameter name='currLinkIsFound' value=\"false\" />\n\n\n",
        "comments": "",
        "x": 1451.3333282470703,
        "y": 700.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "6079a4cf.66fe14",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1205.3333282470703,
        "y": 790.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "8bb28c9b.5b048",
                "b7e06d6e.f371a",
                "9653963e.b4d7a8"
            ]
        ]
    },
    {
        "id": "485e027f.e391bc",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 4833.33332824707,
        "y": 999.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "709f1167.bbcf68",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4876.33332824707,
        "y": 1064.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "24a2bf70.dd5f6",
                "b92bac73.6c9778",
                "4c3b9d0a.797a8c"
            ]
        ]
    },
    {
        "id": "e832df40.3cb4e8",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 4873.33332824707,
        "y": 1908.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "d0bf9af7.9310c",
                "26c8c3e3.b7c694",
                "dbc3af7a.2f9fb8"
            ]
        ]
    },
    {
        "id": "a33a2969.97acc",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 4834.33332824707,
        "y": 1852.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "5b7c0727.9a035",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2924.3333282470703,
        "y": 349.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ca1aef51.5c2e6",
                "fa2abd46.be79a8",
                "6dcd89ce.d8f7b8"
            ]
        ]
    },
    {
        "id": "fa2abd46.be79a8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3197.8242950439453,
        "y": 241.90731811523438,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "3cf8b5c.596c24a"
            ]
        ]
    },
    {
        "id": "3cf8b5c.596c24a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3375.3958282470703,
        "y": 242.19308471679688,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "6dcd89ce.d8f7b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3193.3333282470703,
        "y": 291.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "143224ce.735913"
            ]
        ]
    },
    {
        "id": "143224ce.735913",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3375.3333282470703,
        "y": 291.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "ca1aef51.5c2e6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3197.3333282470703,
        "y": 342.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "eadcd586.811458"
            ]
        ]
    },
    {
        "id": "eadcd586.811458",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3377.3333282470703,
        "y": 342.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "21c0e3fe.82515c"
            ]
        ]
    },
    {
        "id": "d8bf1877.11fa58",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 803.3333282470703,
        "y": 726.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "a6f98a69.92187"
            ]
        ]
    },
    {
        "id": "a6f98a69.92187",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1074.3333282470703,
        "y": 722.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "47d4cad8.17d52c"
            ]
        ]
    },
    {
        "id": "a15de96b.529998",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3353.3333282470703,
        "y": 540.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "d0adfe64.da86a8"
            ]
        ]
    },
    {
        "id": "d0adfe64.da86a8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3530.333206176758,
        "y": 533.3332214355469,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "d9045bb1.a62d4",
                "d7d4dfac.f8ef88"
            ]
        ]
    },
    {
        "id": "d9045bb1.a62d4",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 3773.333206176758,
        "y": 490.3332214355469,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "d7d4dfac.f8ef88",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 3762.333206176758,
        "y": 545.3332214355469,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "641b6dc1.ae62a4",
                "e8473ac4.f5e678",
                "d854cd7f.05151"
            ]
        ]
    },
    {
        "id": "d854cd7f.05151",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4015.3333282470703,
        "y": 431.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "d89f7cfd.a998c"
            ]
        ]
    },
    {
        "id": "d89f7cfd.a998c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4163.904861450195,
        "y": 431.6191101074219,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "40195b62.cb5874",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4162.842361450195,
        "y": 475.7593688964844,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "e8473ac4.f5e678",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4003.8423614501953,
        "y": 475.7593688964844,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "40195b62.cb5874"
            ]
        ]
    },
    {
        "id": "641b6dc1.ae62a4",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4010.8423614501953,
        "y": 554.7593688964844,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "cfb2b016.ca50d"
            ]
        ]
    },
    {
        "id": "cfb2b016.ca50d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4149.842361450195,
        "y": 554.7593688964844,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "4e1d40ab.8f7c48",
                "6ab22d0b.607efc"
            ]
        ]
    },
    {
        "id": "4e1d40ab.8f7c48",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4355.33332824707,
        "y": 552.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "77da836c.7c453c",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4877.33332824707,
        "y": 734.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "f644ca88.cc84",
                "e4420296.1dde4"
            ]
        ]
    },
    {
        "id": "e4420296.1dde4",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5100.33332824707,
        "y": 720.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "1b75d3d5.946174"
            ]
        ]
    },
    {
        "id": "f644ca88.cc84",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5102.33332824707,
        "y": 753.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ccf559e8.ec486"
            ]
        ]
    },
    {
        "id": "ccf559e8.ec486",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5245.33332824707,
        "y": 750.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "1b75d3d5.946174",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5248.33332824707,
        "y": 713.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "a48b4f87.115f58",
                "eae40c98.29734"
            ]
        ]
    },
    {
        "id": "a48b4f87.115f58",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5410.33332824707,
        "y": 708.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "e46caf0e.563478",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4891.33332824707,
        "y": 1571.3332214355469,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "970472a2.405aa8",
                "224c4d4.84eea32"
            ]
        ]
    },
    {
        "id": "224c4d4.84eea32",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5114.33332824707,
        "y": 1557.3332214355469,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "1f5eda96.09790d"
            ]
        ]
    },
    {
        "id": "970472a2.405aa8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5116.33332824707,
        "y": 1590.3332214355469,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "66cb0f3.6d8da7"
            ]
        ]
    },
    {
        "id": "66cb0f3.6d8da7",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 5259.33332824707,
        "y": 1587.3332214355469,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "1f5eda96.09790d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5262.33332824707,
        "y": 1550.3332214355469,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "a035c695.e5c6c8",
                "ce893d50.59c348"
            ]
        ]
    },
    {
        "id": "a035c695.e5c6c8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 5456.33332824707,
        "y": 1553.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "74df18ed.a4e518",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1054.3333282470703,
        "y": 257.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "2078a502.9da27a",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5524.33332824707,
        "y": 1304.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "34f7a0cd.8f1da"
            ]
        ]
    },
    {
        "id": "34f7a0cd.8f1da",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5730.33332824707,
        "y": 1304.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "9675c47c.3f1e28"
            ]
        ]
    },
    {
        "id": "9675c47c.3f1e28",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5945.61897277832,
        "y": 1304.1551208496094,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "c3bcfe29.7893b"
            ]
        ]
    },
    {
        "id": "c3bcfe29.7893b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6152.45051574707,
        "y": 1304.6736755371094,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "69e0123c.36df34",
                "c9b70802.7fae28",
                "bff980ae.51a118"
            ]
        ]
    },
    {
        "id": "69e0123c.36df34",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6367.45051574707,
        "y": 1266.6736755371094,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "c9b70802.7fae28",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6364.45051574707,
        "y": 1305.6736755371094,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "f008b798.fbfc48"
            ]
        ]
    },
    {
        "id": "bff980ae.51a118",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6319.95051574707,
        "y": 1347.6736755371094,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "f008b798.fbfc48",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6544.95051574707,
        "y": 1304.6736755371094,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "d5a58693.57d22"
            ]
        ]
    },
    {
        "id": "d5a58693.57d22",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6702.95051574707,
        "y": 1304.6736755371094,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "396517b4.b44f88"
            ]
        ]
    },
    {
        "id": "396517b4.b44f88",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 6909.95051574707,
        "y": 1304.6736755371094,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "a9a1085f.9d214",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5521.33332824707,
        "y": 2173.333465576172,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "a77b3a4c.0b52a"
            ]
        ]
    },
    {
        "id": "a77b3a4c.0b52a",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5727.33332824707,
        "y": 2173.333465576172,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "db3ff85.e969d08"
            ]
        ]
    },
    {
        "id": "db3ff85.e969d08",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5942.61897277832,
        "y": 2173.155242919922,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "9bb2d2a8.a44c98"
            ]
        ]
    },
    {
        "id": "9bb2d2a8.a44c98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6149.45051574707,
        "y": 2173.673797607422,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "c3db954c.458008",
                "bccacc6d.699c5",
                "cc6698ed.a3038"
            ]
        ]
    },
    {
        "id": "c3db954c.458008",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6364.45051574707,
        "y": 2135.673797607422,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "bccacc6d.699c5",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6361.45051574707,
        "y": 2174.673797607422,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "534b81c9.17a2c"
            ]
        ]
    },
    {
        "id": "cc6698ed.a3038",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6316.95051574707,
        "y": 2216.673797607422,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "534b81c9.17a2c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6541.95051574707,
        "y": 2173.673797607422,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "faa75b91.1af87"
            ]
        ]
    },
    {
        "id": "faa75b91.1af87",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6699.95051574707,
        "y": 2173.673797607422,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ba3c4c7d.18cfc"
            ]
        ]
    },
    {
        "id": "ba3c4c7d.18cfc",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 6906.95051574707,
        "y": 2173.673797607422,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "eae40c98.29734",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5437.33332824707,
        "y": 780.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "6fc687f8.9a3218",
                "d8b6607b.4ee438",
                "5c6d770a.c0fbc8"
            ]
        ]
    },
    {
        "id": "6fc687f8.9a3218",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5632.833450317383,
        "y": 732.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ee2e2b2e.648d3"
            ]
        ]
    },
    {
        "id": "d8b6607b.4ee438",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5624.833450317383,
        "y": 787.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "7003cbf4.1f7a3c"
            ]
        ]
    },
    {
        "id": "5c6d770a.c0fbc8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5629.833450317383,
        "y": 844.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "4cd59828.2f4188"
            ]
        ]
    },
    {
        "id": "4cd59828.2f4188",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5781.833450317383,
        "y": 845.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "7003cbf4.1f7a3c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5792.833450317383,
        "y": 790.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "ee2e2b2e.648d3",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5777.215774536133,
        "y": 729.989013671875,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "76f14509.f7c67c"
            ]
        ]
    },
    {
        "id": "85f22617.8c77a",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6359.33332824707,
        "y": 748.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ee84357b.71ae88"
            ]
        ]
    },
    {
        "id": "ee84357b.71ae88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6536.33332824707,
        "y": 740.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "cd9128cb.f1f28",
                "e38e7099.4c1268"
            ]
        ]
    },
    {
        "id": "76f14509.f7c67c",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5961.33332824707,
        "y": 744.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "c8a88cd4.d8034"
            ]
        ]
    },
    {
        "id": "c8a88cd4.d8034",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6156.33332824707,
        "y": 744.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "85f22617.8c77a",
                "bf124b63.5099c"
            ]
        ]
    },
    {
        "id": "cd9128cb.f1f28",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6774.33332824707,
        "y": 695.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "60adc82e.ec907",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6954.33332824707,
        "y": 738.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "dbbdd720.ee73d"
            ]
        ]
    },
    {
        "id": "ef6befb7.25ec38",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6946.33332824707,
        "y": 793.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "3ad0c537.936882"
            ]
        ]
    },
    {
        "id": "2514309d.ea219",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6951.33332824707,
        "y": 850.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "2203278b.ee8d48"
            ]
        ]
    },
    {
        "id": "2203278b.ee8d48",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7103.33332824707,
        "y": 851.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "3ad0c537.936882",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7114.33332824707,
        "y": 796.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "dbbdd720.ee73d",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7098.71565246582,
        "y": 735.989013671875,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "3a2f5b08.ae9d74"
            ]
        ]
    },
    {
        "id": "3a2f5b08.ae9d74",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7313.33332824707,
        "y": 732.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "ce893d50.59c348",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5478.33332824707,
        "y": 1621.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "11d6f276.27b5f6",
                "da24ed5d.ec28b8",
                "60f19c6c.a06434"
            ]
        ]
    },
    {
        "id": "11d6f276.27b5f6",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5673.833450317383,
        "y": 1573.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "888d9251.ae059"
            ]
        ]
    },
    {
        "id": "da24ed5d.ec28b8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5665.833450317383,
        "y": 1628.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "6f593c1a.aa4654"
            ]
        ]
    },
    {
        "id": "60f19c6c.a06434",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5670.833450317383,
        "y": 1685.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "9d43ea5b.7c699"
            ]
        ]
    },
    {
        "id": "9d43ea5b.7c699",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5822.833450317383,
        "y": 1686.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "6f593c1a.aa4654",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5833.833450317383,
        "y": 1631.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "888d9251.ae059",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5818.215774536133,
        "y": 1570.989013671875,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ca25d5e8.786f18"
            ]
        ]
    },
    {
        "id": "ad6fdb4e.87cfb",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6400.33332824707,
        "y": 1589.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "4ceff195.e94608"
            ]
        ]
    },
    {
        "id": "4ceff195.e94608",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6577.33332824707,
        "y": 1581.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "d9a17cf0.5ffca8",
                "76506084.c842f8"
            ]
        ]
    },
    {
        "id": "ca25d5e8.786f18",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 6002.33332824707,
        "y": 1585.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "52693a86.8017bc"
            ]
        ]
    },
    {
        "id": "52693a86.8017bc",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6197.33332824707,
        "y": 1585.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ad6fdb4e.87cfb",
                "6c3438b4.5be28"
            ]
        ]
    },
    {
        "id": "76506084.c842f8",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6785.33332824707,
        "y": 1588.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "aefba90d.b82758",
                "3df8e74b.556d28",
                "a16ee96.560b218"
            ]
        ]
    },
    {
        "id": "d9a17cf0.5ffca8",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6815.33332824707,
        "y": 1536.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "aefba90d.b82758",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6995.33332824707,
        "y": 1579.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "3639d79a.d4db38"
            ]
        ]
    },
    {
        "id": "3df8e74b.556d28",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6987.33332824707,
        "y": 1634.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "185761cf.ebd5ee"
            ]
        ]
    },
    {
        "id": "a16ee96.560b218",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6992.33332824707,
        "y": 1691.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "6f08e25f.8ff0f4"
            ]
        ]
    },
    {
        "id": "6f08e25f.8ff0f4",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7144.33332824707,
        "y": 1692.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "185761cf.ebd5ee",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7155.33332824707,
        "y": 1637.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "3639d79a.d4db38",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7139.71565246582,
        "y": 1576.989013671875,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "27770afe.2fe37e"
            ]
        ]
    },
    {
        "id": "27770afe.2fe37e",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7354.33332824707,
        "y": 1573.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "b6502203.02c108",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 351.3333282470703,
        "y": 702.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ae72f64.7ced288",
                "d8bf1877.11fa58"
            ]
        ]
    },
    {
        "id": "ae72f64.7ced288",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 797.3333282470703,
        "y": 561.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "56a6a6ce.1c9e38"
            ]
        ]
    },
    {
        "id": "56a6a6ce.1c9e38",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3162.3333282470703,
        "y": 543.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "a15de96b.529998"
            ]
        ]
    },
    {
        "id": "bf124b63.5099c",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 6362.33332824707,
        "y": 822.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "cf9d9db9.ed34d8"
            ]
        ]
    },
    {
        "id": "cf9d9db9.ed34d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6539.33332824707,
        "y": 814.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e093ed3f.1bfe98"
            ]
        ]
    },
    {
        "id": "e093ed3f.1bfe98",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6774.33332824707,
        "y": 938.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "f8b7be24.4e873",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6814.33332824707,
        "y": 1778.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "796da710.8b0ab8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6579.33332824707,
        "y": 1654.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "f8b7be24.4e873"
            ]
        ]
    },
    {
        "id": "6c3438b4.5be28",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 6402.33332824707,
        "y": 1662.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "796da710.8b0ab8"
            ]
        ]
    },
    {
        "id": "6ab22d0b.607efc",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4354.33332824707,
        "y": 598.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "45cbb167.26c3e8",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4376.33332824707,
        "y": 733.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "586bfbbd.46cc14",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4357.33332824707,
        "y": 783.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "5c997953.c5b528",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1967.3333282470703,
        "y": 331.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e42627f6.b8767",
                "b14c900.06de0f"
            ]
        ]
    },
    {
        "id": "e42627f6.b8767",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2232.3333282470703,
        "y": 254.33334350585938,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "9446dea5.335408",
        "type": "set",
        "name": "set query_param",
        "xml": "<set>\n<parameter name='prop.ethsrvType' value='`$network-route-A`' />\n\n",
        "comments": "",
        "x": 4274.33332824707,
        "y": 2233.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "adfb9d4f.ef8fd8",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='domain-A.tunnel-tp-id' value='' />\n<parameter name='domain-A.node-id' value='' />\n<parameter name='domain-A.network-id' value=\"\" />\n<parameter name='domain-A.provider-id' value=\"\" />\n<parameter name='domain-A.client-id' value=\"\" />\n<parameter name='domain-A.te-topo-id' value=\"\" />\n<parameter name='domain-A.network-type' value=\"\" />\n<parameter name='domain-A.ltpId' value=\"\" />\n<parameter name='tmp.domain-A.network-id' value=\"\" />\n<parameter name='tmp.domain-A.ttp-id' value=\"\" />\n<parameter name='network-route-A' value=\"\" />\n<!--<parameter name='domain-A.' value=\"\" />-->\n\n<parameter name='request-id' value='' />\n<parameter name='otn-source-node' value='' />\n<parameter name='otn-dest-node' value='' />\n<parameter name='bw-odu' value=\"\" />\n<parameter name='src-ttp-id' value='' />\n<parameter name='dst-ttp-id' value='' />\n\n<parameter name='domain-B.tunnel-tp-id' value='' />\n<parameter name='domain-B.node-id' value='' />\n<parameter name='domain-B.network-id' value=\"\" />\n<parameter name='domain-B.provider-id' value=\"\" />\n<parameter name='domain-B.client-id' value=\"\" />\n<parameter name='domain-B.te-topo-id' value=\"\" />\n<parameter name='domain-B.network-type' value=\"\" />\n<parameter name='domain-B.ltpId' value=\"\" />\n<parameter name='tmp.domain-B.network-id' value=\"\" />\n<parameter name='tmp.domain-B.ttp-id' value=\"\" />\n<parameter name='network-route-B' value=\"\" />\n<!--<parameter name='domain-B.' value=\"\" />-->\n\n\n\n\n\n",
        "comments": "",
        "x": 4257.33332824707,
        "y": 3991.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "2a7b5024.c32ac8",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 4314.33332824707,
        "y": 828.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "e65eb704.1a5ee",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='otnidx' start='0' end='`$tmp.otninfo_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 4303.33332824707,
        "y": 2473.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "70d68732.b14c"
            ]
        ]
    },
    {
        "id": "9fe431f7.1a7068",
        "type": "save",
        "name": "save vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-otnidx-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<!--<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />-->\n<parameter name='customer-vpn-id' value='`($maxtpn + $gfp)`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$tmp.access-provider-id`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$tmp.access-client-id`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$tmp.access-topology-id`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.domainG-src-access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.domainG-dst-access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5431.33332824707,
        "y": 2980.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "9da9527c.fe7dd"
            ]
        ]
    },
    {
        "id": "36a781af.2ddb3e",
        "type": "save",
        "name": "save connectivity-A relationship to vpn-binding-A, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6003.83332824707,
        "y": 3084.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "9da9527c.fe7dd",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5737.33332824707,
        "y": 2979.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "3d5ff1a1.a7195e"
            ]
        ]
    },
    {
        "id": "3d5ff1a1.a7195e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5946.83332824707,
        "y": 2979.5872497558594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "dfe4a3e1.5f7a28",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding $otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 5467.33332824707,
        "y": 2444.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "d4a2c427.226738",
        "type": "switchNode",
        "name": "switch otnidx == 0",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5340.33332824707,
        "y": 3097.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e5869a7d.a035e8",
                "4f7fb15.bbc855"
            ]
        ]
    },
    {
        "id": "e5869a7d.a035e8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5523.33332824707,
        "y": 3097.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "11b27338.362ff5"
            ]
        ]
    },
    {
        "id": "4f7fb15.bbc855",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5348.33332824707,
        "y": 3244.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "5e731523.edaba4"
            ]
        ]
    },
    {
        "id": "df75995c.9d6d7",
        "type": "switchNode",
        "name": "switch otnidx == last",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5689.33332824707,
        "y": 3325.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "8d4f5504.9d4348",
                "dc78732e.2c80d8"
            ]
        ]
    },
    {
        "id": "8d4f5504.9d4348",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5874.33332824707,
        "y": 3326.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "48ad14bc.45fb34"
            ]
        ]
    },
    {
        "id": "dc78732e.2c80d8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5893.33332824707,
        "y": 3592.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "1d8019eb.b8f316"
            ]
        ]
    },
    {
        "id": "c9167223.c48c5",
        "type": "save",
        "name": "save connectivity-B relationship to vpn-binding-B, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6304.33332824707,
        "y": 3327.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "82593f3c.44e9a",
        "type": "execute",
        "name": "execute UUID generator for connectivity domain otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 6378.33332824707,
        "y": 3625.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "a5aff8c7.dcc0d",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-otnidx-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-otnidx-uuid`' />\n<!--<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />-->\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<!--<parameter name='access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<!--<parameter name='access-ltp-id' value='``' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='dummy' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<!--<parameter name='CBS' value='`$prop.sotn.cbs`' />-->\n<!--<parameter name='EBS' value='`$prop.sotn.ebs`' />-->\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 6314.33332824707,
        "y": 3676.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "48179575.56acdc",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 6443.33332824707,
        "y": 3726.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "4fc515a8.51d2e4",
        "type": "comment",
        "name": "connectivity has not been created for middle domains, so we have to create one",
        "info": "",
        "comments": "",
        "x": 6453.33332824707,
        "y": 3569.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "c0955063.7c75f",
        "type": "save",
        "name": "save connectivity-otnidx relationship to vpn-binding-otnidx, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6411.33332824707,
        "y": 3785.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "1d8019eb.b8f316",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6050.33332824707,
        "y": 3593.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "82593f3c.44e9a",
                "a5aff8c7.dcc0d",
                "48179575.56acdc",
                "c0955063.7c75f",
                "ab63214f.ab52e"
            ]
        ]
    },
    {
        "id": "70d68732.b14c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4560.33332824707,
        "y": 2473.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "dfe4a3e1.5f7a28",
                "9fe431f7.1a7068",
                "d4a2c427.226738",
                "6c1ad513.ca11a4",
                "ddb6267f.2382f",
                "39bce85.43eb118",
                "e250e406.45b0b8"
            ]
        ]
    },
    {
        "id": "7dffa406.706e6c",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n\n",
        "comments": "",
        "x": 5928.33332824707,
        "y": 3141.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "7214f15c.14004",
        "type": "execute",
        "name": "execute RestApiCallNode domainA UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainA.eth-network-id + '/node=' + $tmp.src.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.src.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 5981.33332824707,
        "y": 3185.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "d7742ed9.525e08",
                "f96706f6.1edf38"
            ]
        ]
    },
    {
        "id": "f96706f6.1edf38",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6252.33332824707,
        "y": 3170.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "70a27353.90bdbc"
            ]
        ]
    },
    {
        "id": "d7742ed9.525e08",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6250.333541870117,
        "y": 3228.3332529067993,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "eb2a823e.260b78"
            ]
        ]
    },
    {
        "id": "70a27353.90bdbc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI Coloring for domain A\" />\n",
        "comments": "",
        "x": 6392.333576202393,
        "y": 3170.3333444595337,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "eb2a823e.260b78",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6398.3605880737305,
        "y": 3219.0787382125854,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "11b27338.362ff5",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5664.33332824707,
        "y": 3087.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "36a781af.2ddb3e",
                "7dffa406.706e6c"
            ]
        ]
    },
    {
        "id": "48ad14bc.45fb34",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6008.33332824707,
        "y": 3327.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "c9167223.c48c5",
                "c8df83a3.bc227"
            ]
        ]
    },
    {
        "id": "c8df83a3.bc227",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "x": 6228.33332824707,
        "y": 3371.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "d358673f.8a632",
        "type": "execute",
        "name": "execute RestApiCallNode domainB UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainB.eth-network-id + '/node=' + $tmp.dst.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.dst.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 6279.33332824707,
        "y": 3415.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "c74c0688.e153c8",
                "bbe92e0a.776158"
            ]
        ]
    },
    {
        "id": "bbe92e0a.776158",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6542.33332824707,
        "y": 3395.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "745303bf.c36e14"
            ]
        ]
    },
    {
        "id": "c74c0688.e153c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6543.333541870117,
        "y": 3446.3332529067993,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "16fe3b7.bef5ac5"
            ]
        ]
    },
    {
        "id": "745303bf.c36e14",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI coloring for domain B\" />\n",
        "comments": "",
        "x": 6682.333576202393,
        "y": 3395.3333444595337,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "16fe3b7.bef5ac5",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6688.3605880737305,
        "y": 3444.0787382125854,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "ab63214f.ab52e",
        "type": "set",
        "name": "set attachment_param domain otnidx",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 6325.33332824707,
        "y": 3845.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "758165ab.6ede0c",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v21/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 3644.3333282470703,
        "y": 4192.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "342e9d1a.c50cf2",
                "85e441ba.70e1e",
                "cd45d3e5.a8a2f"
            ]
        ]
    },
    {
        "id": "342e9d1a.c50cf2",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3832.3333282470703,
        "y": 4205.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "24a9c2eb.e19b9e"
            ]
        ]
    },
    {
        "id": "85e441ba.70e1e",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3832.8242950439453,
        "y": 4250.907379150391,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "abf9be0d.a5d62"
            ]
        ]
    },
    {
        "id": "cd45d3e5.a8a2f",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3830.3333282470703,
        "y": 4294.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "5bf5c027.26df9"
            ]
        ]
    },
    {
        "id": "24a9c2eb.e19b9e",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4005.3333282470703,
        "y": 4203.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "5543848d.3b0414"
            ]
        ]
    },
    {
        "id": "abf9be0d.a5d62",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3995.395706176758,
        "y": 4251.193115234375,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "5bf5c027.26df9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3997.3333282470703,
        "y": 4293.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "b32c7a7e.680c18",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='dmnsidx' start='0' end='`$otn-tunnel-slice_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3633.3333282470703,
        "y": 4383.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e206a705.651b58"
            ]
        ]
    },
    {
        "id": "aad93e89.0d91f",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4443.33332824707,
        "y": 4383.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "aa320024.3f29d"
            ]
        ]
    },
    {
        "id": "371672f7.af2966",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='stunidx' start='0' end='`$otn-tunnel-slice[$dmnsidx].list_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4215.33332824707,
        "y": 4383.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "aad93e89.0d91f"
            ]
        ]
    },
    {
        "id": "b7b629ca.699bf",
        "type": "set",
        "name": "set providerValue",
        "xml": "<set>\n<parameter name='providerValue' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].access-provider-id`' />\n<parameter name='found' value='false' />\n\n\n",
        "comments": "",
        "x": 5335.33332824707,
        "y": 4150.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "278fac8.6485754",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='testingvalue' value='$tmp.otninfo_length -1' />\n",
        "comments": "",
        "x": 5637.33332824707,
        "y": 3276.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "5e731523.edaba4",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5472.33332824707,
        "y": 3251.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "278fac8.6485754",
                "df75995c.9d6d7"
            ]
        ]
    },
    {
        "id": "38f52a4e.84a6be",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n<parameter name='bwModified' value='false' />\n",
        "comments": "",
        "x": 1926.3333282470703,
        "y": 281.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "5543848d.3b0414",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4234.33332824707,
        "y": 4204.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "f4fb2913.3f08e8"
            ]
        ]
    },
    {
        "id": "f4fb2913.3f08e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4449.33332824707,
        "y": 4205.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "b4dc52fa.e41dc8"
            ]
        ]
    },
    {
        "id": "59decc03.5b792c",
        "type": "for",
        "name": "for arridx in tmp.arr",
        "xml": "<for index='arridx' start='0' end='`$tmp.arr_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5902.33332824707,
        "y": 4125.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "12c019ee.a843ee"
            ]
        ]
    },
    {
        "id": "97c70d48.16fe38",
        "type": "switchNode",
        "name": "switch $tmp.arr_length != 0",
        "xml": "<switch test='`$tmp.arr_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5368.33332824707,
        "y": 4205.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "6bfc5feb.67a1e",
                "f9517302.701ea"
            ]
        ]
    },
    {
        "id": "6bfc5feb.67a1e",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5564.33332824707,
        "y": 4175.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "8987adcc.4e1008"
            ]
        ]
    },
    {
        "id": "f9517302.701ea",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5565.33332824707,
        "y": 4246.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "35a88f3a.b6ac08"
            ]
        ]
    },
    {
        "id": "8987adcc.4e1008",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5715.33332824707,
        "y": 4173.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "59decc03.5b792c",
                "6882fe7c.6197e8"
            ]
        ]
    },
    {
        "id": "12c019ee.a843ee",
        "type": "switchNode",
        "name": "switch tmp.arr[$arridx] == $providerValue",
        "xml": "<switch test='`$tmp.arr[$arridx] == $providerValue`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6193.33332824707,
        "y": 4125.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e5c18223.e30628",
                "cba25abe.848d6"
            ]
        ]
    },
    {
        "id": "e5c18223.e30628",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6468.33332824707,
        "y": 4094.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "4b465147.34a4b"
            ]
        ]
    },
    {
        "id": "cba25abe.848d6",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6469.33332824707,
        "y": 4165.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ace0f3a2.ba867"
            ]
        ]
    },
    {
        "id": "4b465147.34a4b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6619.33332824707,
        "y": 4092.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "2155a1a2.b1abbe",
                "f005c04e.d898a8",
                "4fb6d7b7.ecc78",
                "46824160.b1d988",
                "1e06ac9b.2a6bc3"
            ]
        ]
    },
    {
        "id": "2155a1a2.b1abbe",
        "type": "set",
        "name": "set found to true",
        "xml": "<set>\n<parameter name='found' value='true' />\n\n\n",
        "comments": "",
        "x": 6807.33332824707,
        "y": 4052.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "f005c04e.d898a8",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6879.33332824707,
        "y": 4097.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "1e06ac9b.2a6bc3",
        "type": "set",
        "name": "set twoD arr",
        "xml": "<set>\n\n<!--<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />-->\n<!--<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />-->\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<!--<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />-->\n<parameter name='`otn-tunnel-slice[$arridx].list_length`' value='`$sizeOfSliceList + 1`' />\n\n",
        "comments": "",
        "x": 6794.33332824707,
        "y": 4224.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "46824160.b1d988",
        "type": "set",
        "name": "set sizeOfSliceList",
        "xml": "<set>\n<parameter name='sizeOfSliceList' value='`$otn-tunnel-slice[$arridx].list_length`' />\n\n\n",
        "comments": "",
        "x": 6815.33332824707,
        "y": 4160.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "35a88f3a.b6ac08",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5717.33332824707,
        "y": 4246.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "bec1bd98.095008",
                "6bef5837.fb58f"
            ]
        ]
    },
    {
        "id": "bec1bd98.095008",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='0' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5972.33332824707,
        "y": 4239.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "6bef5837.fb58f",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='tmp.arr[0]' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='1' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[0].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='1' />\n<parameter name='otn-tunnel-slice[0].list_length' value='1' />\n\n",
        "comments": "",
        "x": 5900.33332824707,
        "y": 4286.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "6882fe7c.6197e8",
        "type": "switchNode",
        "name": "switch found?",
        "xml": "<switch test='`$found`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5893.33332824707,
        "y": 4170.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "fe294cd.9421bb",
                "65b4ebb1.845464"
            ]
        ]
    },
    {
        "id": "fe294cd.9421bb",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6053.33332824707,
        "y": 4162.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e093232d.0ab56"
            ]
        ]
    },
    {
        "id": "65b4ebb1.845464",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6051.33332824707,
        "y": 4199.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ab13fab7.3aabe"
            ]
        ]
    },
    {
        "id": "e093232d.0ab56",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6178.33332824707,
        "y": 4162.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "62438f19.a66048",
        "type": "save",
        "name": "store $arridx+1 somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx + 1`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 6485.33332824707,
        "y": 4220.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "ab13fab7.3aabe",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 6211.33332824707,
        "y": 4207.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "62438f19.a66048",
                "f4afeb0e.ae0db"
            ]
        ]
    },
    {
        "id": "f4afeb0e.ae0db",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list_length`' value='1' />\n\n",
        "comments": "",
        "x": 6402.33332824707,
        "y": 4266.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "ace0f3a2.ba867",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 6602.33332824707,
        "y": 4164.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "4fb6d7b7.ecc78",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 6773.33332824707,
        "y": 4291.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "6c1ad513.ca11a4",
        "type": "switchNode",
        "name": "switch dstPort == NULL",
        "xml": "<switch test=\"`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id == ''`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5170.33332824707,
        "y": 2503.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e5311d8f.316e3",
                "377e7dc.719a502"
            ]
        ]
    },
    {
        "id": "e5311d8f.316e3",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5559.33332824707,
        "y": 2481.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "53a0d07b.9ddd2"
            ]
        ]
    },
    {
        "id": "377e7dc.719a502",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5560.33332824707,
        "y": 2527.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "bda8eef7.7834b"
            ]
        ]
    },
    {
        "id": "53a0d07b.9ddd2",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n",
        "comments": "",
        "x": 5773.33332824707,
        "y": 2480.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "bda8eef7.7834b",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />\n",
        "comments": "",
        "x": 5771.33332824707,
        "y": 2525.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "aa320024.3f29d",
        "type": "set",
        "name": "set attachment_param sliceG",
        "xml": "<set>\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].request-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].request-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-source-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-source-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-dest-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-dest-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].bw-odu`' value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].bw-odu`\" />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].src-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].src-ttp-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].dst-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].dst-ttp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='otn-tunnel-sliceG-list_length' value='`$stunidx + 1`' />\n\n\n<parameter name=\"tmp.domainG.restapiUrl\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainurl`\" />\n<parameter name=\"tmp.domainG.restapiUser\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainuser`\" />\n<parameter name=\"tmp.domainG.restapiPassword\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainpassword`\" />",
        "comments": "",
        "x": 4696.33332824707,
        "y": 4381.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "582f4b19.cbc35c",
        "type": "execute",
        "name": "execute RestApiCallNode sliceG creation domainG",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-sliceG-list-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$tmp.domainG.restapiUrl + '/restconf/operations/ietf-optical-slice:create-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$tmp.domainG.restapiUser`\" />\n<parameter name=\"restapiPassword\" value=\"`tmp.domainG.restapiPassword`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4281.33332824707,
        "y": 4489.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "2ee5af11.6c1e68",
                "dcd2689e.43975"
            ]
        ]
    },
    {
        "id": "dcd2689e.43975",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4564.33332824707,
        "y": 4469.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "226131b5.dcdb56"
            ]
        ]
    },
    {
        "id": "2ee5af11.6c1e68",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4565.333541870117,
        "y": 4520.333252906799,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "9a360786.0f7708"
            ]
        ]
    },
    {
        "id": "226131b5.dcdb56",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing slice creation api for domain A\" />\n",
        "comments": "",
        "x": 4704.333576202393,
        "y": 4469.333344459534,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "9a360786.0f7708",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4710.3605880737305,
        "y": 4518.078738212585,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "ddb6267f.2382f",
        "type": "set",
        "name": "set srcdstpnf-name",
        "xml": "<set>\n<parameter name='tmp.srcdstpnf-name' value=\"`'networkId-providerId-' + \n                                             $tmp.access-provider-id + '-clientId-' +\n                                             $tmp.access-client-id + '-topologyId-' + \n                                             $tmp.access-topology-id + '-nodeId-' + \n                                             $tmp.srcdstpnf-id`\" />\n\n",
        "comments": "",
        "x": 5354.33332824707,
        "y": 2623.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "39bce85.43eb118",
        "type": "get-resource",
        "name": "get-resource tmp.srcdstpnf-name",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.srcdstpnf-name\"\n        pfx='tmp.aai.srcdst-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 5398.33332824707,
        "y": 2671.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e3200e7d.1b6158",
                "a27bf097.a61688",
                "aed031.10f8e7d"
            ]
        ]
    },
    {
        "id": "e3200e7d.1b6158",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5610.83332824707,
        "y": 2618.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ec0b5318.bd94a"
            ]
        ]
    },
    {
        "id": "a27bf097.a61688",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5622.83332824707,
        "y": 2668.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "194dd3a5.9683ac"
            ]
        ]
    },
    {
        "id": "aed031.10f8e7d",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5613.83332824707,
        "y": 2723.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "121802d5.075bad"
            ]
        ]
    },
    {
        "id": "121802d5.075bad",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5758.83332824707,
        "y": 2722.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "194dd3a5.9683ac",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5769.83332824707,
        "y": 2665.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "ec0b5318.bd94a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5736.215774536133,
        "y": 2611.989013671875,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "6ffb5206.ab40dc"
            ]
        ]
    },
    {
        "id": "a75d0b14.3b6cd8",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6295.33332824707,
        "y": 2630.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "5ed989fd.7ba3d8"
            ]
        ]
    },
    {
        "id": "5ed989fd.7ba3d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 6472.33332824707,
        "y": 2622.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "4b327d9f.7fa68c",
                "a56c9b9d.4b71c"
            ]
        ]
    },
    {
        "id": "6ffb5206.ab40dc",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.srcdst-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 5897.33332824707,
        "y": 2626.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "157a7f1c.cef0f9"
            ]
        ]
    },
    {
        "id": "157a7f1c.cef0f9",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6092.33332824707,
        "y": 2626.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "a75d0b14.3b6cd8"
            ]
        ]
    },
    {
        "id": "a56c9b9d.4b71c",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 6680.33332824707,
        "y": 2629.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "5942c841.aa6ee8",
                "9c93c9ac.788a48",
                "6429f071.39b59"
            ]
        ]
    },
    {
        "id": "4b327d9f.7fa68c",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 6710.33332824707,
        "y": 2577.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "5942c841.aa6ee8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6890.33332824707,
        "y": 2620.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "f8702def.d95bc8"
            ]
        ]
    },
    {
        "id": "9c93c9ac.788a48",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6882.33332824707,
        "y": 2675.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "440237ad.5da15"
            ]
        ]
    },
    {
        "id": "6429f071.39b59",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6887.33332824707,
        "y": 2732.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "2304d14f.3cde06"
            ]
        ]
    },
    {
        "id": "2304d14f.3cde06",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7039.33332824707,
        "y": 2733.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "440237ad.5da15",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 7050.33332824707,
        "y": 2678.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "f8702def.d95bc8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 7034.71565246582,
        "y": 2617.989013671875,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "f24381a1.f5a1a8"
            ]
        ]
    },
    {
        "id": "f24381a1.f5a1a8",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 7249.33332824707,
        "y": 2614.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "e206a705.651b58",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3865.3333282470703,
        "y": 4381.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "371672f7.af2966",
                "582f4b19.cbc35c"
            ]
        ]
    },
    {
        "id": "e250e406.45b0b8",
        "type": "switchNode",
        "name": "switch dmnsidx == 0 (domainA)",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5368.33332824707,
        "y": 2840.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "7ec634eb.fd12e4",
                "72b43008.da4948"
            ]
        ]
    },
    {
        "id": "7ec634eb.fd12e4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5569.33332824707,
        "y": 2838.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "9a8afed8.5944c"
            ]
        ]
    },
    {
        "id": "9a8afed8.5944c",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 5783.33332824707,
        "y": 2840.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "a2a5b281.9fc21",
        "type": "switchNode",
        "name": "switch dmnsidx == last (domainB)",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5786.33332824707,
        "y": 2889.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "51c23d0e.7b05dc",
                "905f334d.4416a8"
            ]
        ]
    },
    {
        "id": "51c23d0e.7b05dc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6016.33332824707,
        "y": 2885.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "6e6ce692.530ee8"
            ]
        ]
    },
    {
        "id": "6e6ce692.530ee8",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />",
        "comments": "",
        "x": 6230.33332824707,
        "y": 2888.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "72b43008.da4948",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5569.33332824707,
        "y": 2887.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "a2a5b281.9fc21"
            ]
        ]
    },
    {
        "id": "905f334d.4416a8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 6017.33332824707,
        "y": 2931.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "17f66f36.7df949"
            ]
        ]
    },
    {
        "id": "17f66f36.7df949",
        "type": "set",
        "name": "set attachment_param domain G",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 6231.33332824707,
        "y": 2931.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "31ff32a6.490d6e",
        "type": "set",
        "name": "set tmp.slicevpns",
        "xml": "<set>\n<parameter name='`tmp.slicevpns[$tmp.slicevpns_length]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n<parameter name='tmp.slicevpns_length' value=\"`$tmp.slicevpns_length + 1`\" />\n\n<parameter name='`tmp.slicevpnuuids[$prop.vpn-binding-otnidx-uuid]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n\n",
        "comments": "",
        "x": 6129.33332824707,
        "y": 2980.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "b4dc52fa.e41dc8",
        "type": "switchNode",
        "name": "switch vpnuuid is for this slice",
        "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n    \n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.aai.service-instance.service-instance-id `\">\n",
        "comments": "",
        "outputs": 1,
        "x": 4693.33332824707,
        "y": 4204.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "ddeec6d8.2b66d",
                "ad3e1b09.a7dd3"
            ]
        ]
    },
    {
        "id": "ddeec6d8.2b66d",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4910.33332824707,
        "y": 4183.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "faf87a35.78eb88"
            ]
        ]
    },
    {
        "id": "ad3e1b09.a7dd3",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4910.33332824707,
        "y": 4232.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "faf87a35.78eb88",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 5078.33332824707,
        "y": 4183.333343505859,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "b7b629ca.699bf",
                "97c70d48.16fe38"
            ]
        ]
    },
    {
        "id": "b7e06d6e.f371a",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 1418.3333282470703,
        "y": 814.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "16c2412b.16deaf",
                "ae26bbae.e630b8",
                "e8c1e05c.a0ff5"
            ]
        ]
    },
    {
        "id": "16c2412b.16deaf",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1630.8242950439453,
        "y": 780.9073181152344,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "28aa8e7b.7b6a9a"
            ]
        ]
    },
    {
        "id": "ae26bbae.e630b8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1619.3333282470703,
        "y": 825.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "d31e63f3.254"
            ]
        ]
    },
    {
        "id": "28aa8e7b.7b6a9a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1779.3958282470703,
        "y": 781.1930847167969,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "d31e63f3.254",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1778.3333282470703,
        "y": 825.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "e8c1e05c.a0ff5",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1624.3333282470703,
        "y": 868.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "c3b9530.73a28b"
            ]
        ]
    },
    {
        "id": "c3b9530.73a28b",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 770.3333282470703,
        "y": 1207.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "3e859b6c.a626d4"
            ]
        ]
    },
    {
        "id": "3e859b6c.a626d4",
        "type": "for",
        "name": "for each svc-instance relationship",
        "xml": "<for index='rel-index' start='0' end='`$tmp.aai.service-instance.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1044.3333282470703,
        "y": 1207.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "9fdac28f.05e248"
            ]
        ]
    },
    {
        "id": "9fdac28f.05e248",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.service-instance.relationship-list.relationship[$rel-index].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1279.6668243408203,
        "y": 1208.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "6b8b4db1.78e19c"
            ]
        ]
    },
    {
        "id": "6b8b4db1.78e19c",
        "type": "outcome",
        "name": "connectivity",
        "xml": "<outcome value='connectivity'>\n",
        "comments": "",
        "outputs": 1,
        "x": 563.3335723876953,
        "y": 1361.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "2aa5f521.f24e92"
            ]
        ]
    },
    {
        "id": "83814db5.2acc38",
        "type": "save",
        "name": "get connectivity from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"connectivity\"\n\t    key=\"connectivity.connectivity-id = $tmp.aai.service-instance.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.connectivity\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 952.3333282470703,
        "y": 1366.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "f08fdd90.4c3b48",
                "74408ee8.7c8248",
                "bddcb73f.c2f73"
            ]
        ]
    },
    {
        "id": "f08fdd90.4c3b48",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1148.3333282470703,
        "y": 1331.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "b8ac9b43.4a9818"
            ]
        ]
    },
    {
        "id": "74408ee8.7c8248",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1148.8242950439453,
        "y": 1376.9073791503906,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "dda3b631.5e1b9"
            ]
        ]
    },
    {
        "id": "bddcb73f.c2f73",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1113.3333282470703,
        "y": 1422.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "c0397cda.3cd818"
            ]
        ]
    },
    {
        "id": "dda3b631.5e1b9",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1308.3958282470703,
        "y": 1374.1930847167969,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "c0397cda.3cd818",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1266.3333282470703,
        "y": 1424.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "4d852904.6e1e58",
        "type": "switchNode",
        "name": "switch loglink-id exists in conn",
        "xml": "<switch test='`$tmp.aai.logical-link.link-id == $tmp.aai.connectivity.etht-svc-name`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1541.3333282470703,
        "y": 1314.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "28fd1bef.755efc",
                "5889d337.e7ce3c"
            ]
        ]
    },
    {
        "id": "28fd1bef.755efc",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1752.3333282470703,
        "y": 1279.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "b34d6866.bc5698"
            ]
        ]
    },
    {
        "id": "5889d337.e7ce3c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1749.3333282470703,
        "y": 1340.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "2876f138.d4a73e",
        "type": "set",
        "name": "set currLinkIsFound",
        "xml": "<set>\n<parameter name='currLinkIsFound' value=\"true\" />\n\n\n",
        "comments": "",
        "x": 2090.3333282470703,
        "y": 1252.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "b34d6866.bc5698",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1904.3333282470703,
        "y": 1280.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "2876f138.d4a73e"
            ]
        ]
    },
    {
        "id": "6674b61e.a06d68",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 2057.3333282470703,
        "y": 1308.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "ee2fec7a.bb72",
        "type": "comment",
        "name": "currLinkIsFound. Go to the next logical-link",
        "info": "",
        "comments": "",
        "x": 2062.3333282470703,
        "y": 1202.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "9653963e.b4d7a8",
        "type": "switchNode",
        "name": "switch currLinkIsFound",
        "xml": "<switch test='`$currLinkIsFound`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1344.3333282470703,
        "y": 932.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "78ad0a60.3340ec",
                "c4221fd4.9cf0f8"
            ]
        ]
    },
    {
        "id": "78ad0a60.3340ec",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1530.3333282470703,
        "y": 911.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "9a111eaa.a49b48"
            ]
        ]
    },
    {
        "id": "c4221fd4.9cf0f8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1527.3333282470703,
        "y": 1047.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "498e3ba4.cbc914"
            ]
        ]
    },
    {
        "id": "9a111eaa.a49b48",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1772.3333282470703,
        "y": 906.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "bd09e3c8.ced5f8",
        "type": "comment",
        "name": "A new logical-link has been found: modify process should be triggered",
        "info": "",
        "comments": "",
        "x": 1718.3333282470703,
        "y": 1010.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "b8ac9b43.4a9818",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1312.3333282470703,
        "y": 1315.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "4d852904.6e1e58",
                "275b774d.5d0718"
            ]
        ]
    },
    {
        "id": "275b774d.5d0718",
        "type": "switchNode",
        "name": "switch connectivityBW == gfp",
        "xml": "<switch test='`$tmp.aai.connectivity.bandwidth-profile-name == $gfp`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1542.3333282470703,
        "y": 1405.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "8ffa4f79.ade61",
                "c4dfc850.994ac"
            ]
        ]
    },
    {
        "id": "8ffa4f79.ade61",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1747.3333282470703,
        "y": 1401.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "c4dfc850.994ac",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1749.3333282470703,
        "y": 1451.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "30c2ae4.1f45052"
            ]
        ]
    },
    {
        "id": "30007844.075cd",
        "type": "set",
        "name": "set bwModified",
        "xml": "<set>\n<parameter name='bwModified' value=\"true\" />\n\n\n",
        "comments": "",
        "x": 2098.3333282470703,
        "y": 1429.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "30c2ae4.1f45052",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1903.3333282470703,
        "y": 1450.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "30007844.075cd",
                "b1f43ea6.58c508"
            ]
        ]
    },
    {
        "id": "b1f43ea6.58c508",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='cridx' start='0' end='`$tmp.aai.connectivity.relationship-list.relationship_length`' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 923.3333282470703,
        "y": 1655.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "5f59c5b8.8000ec"
            ]
        ]
    },
    {
        "id": "5f59c5b8.8000ec",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.connectivity.relationship-list.relationship[$cridx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1128.3333282470703,
        "y": 1655.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "d7cb533e.bd93a"
            ]
        ]
    },
    {
        "id": "d7cb533e.bd93a",
        "type": "outcome",
        "name": "vpn-binding",
        "xml": "<outcome value='vpn-binding'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1294.3333282470703,
        "y": 1655.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "5c501362.927b6c"
            ]
        ]
    },
    {
        "id": "5c501362.927b6c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1457.3333282470703,
        "y": 1655.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "53a207fe.affe78",
                "2105f763.ee4f68"
            ]
        ]
    },
    {
        "id": "2105f763.ee4f68",
        "type": "set",
        "name": "unset tmp.aai.vpn-binding",
        "xml": "<set>\n<parameter name='tmp.aai.vpn-binding.' value='' />\n",
        "comments": "",
        "x": 1686.3333282470703,
        "y": 1595.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "53a207fe.affe78",
        "type": "save",
        "name": "get vpn-binding from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-binding\"\n\t    key=\"vpn-binding.vpn-id = $tmp.aai.connectivity.relationship-list.relationship[$cridx].relationship-data[0].relationship-value\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.vpn-binding\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1195.3333282470703,
        "y": 1749.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "96d7c193.8b3058",
                "915fad51.2fe24",
                "52119562.4019b4"
            ]
        ]
    },
    {
        "id": "e9bb6625.bf214",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1579.3333282470703,
        "y": 1749.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "aea8b329.30e9d",
                "4aaf718e.250ab8"
            ]
        ]
    },
    {
        "id": "96d7c193.8b3058",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1406.3333282470703,
        "y": 1751.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e9bb6625.bf214"
            ]
        ]
    },
    {
        "id": "915fad51.2fe24",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1406.8242950439453,
        "y": 1796.9073791503906,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "9471576f.097388"
            ]
        ]
    },
    {
        "id": "52119562.4019b4",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1404.3333282470703,
        "y": 1840.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "18330305.6a2a7d"
            ]
        ]
    },
    {
        "id": "18330305.6a2a7d",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1571.3333282470703,
        "y": 1857.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "9471576f.097388",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1569.3957061767578,
        "y": 1797.193115234375,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "2aa5f521.f24e92",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 735.3333282470703,
        "y": 1361.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "83814db5.2acc38",
                "4cdc6ff0.28b37"
            ]
        ]
    },
    {
        "id": "4cdc6ff0.28b37",
        "type": "set",
        "name": "unset tmp.aai.connectivity",
        "xml": "<set>\n<parameter name='tmp.aai.connectivity.' value='' />\n",
        "comments": "",
        "x": 955.3333282470703,
        "y": 1309.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "aea8b329.30e9d",
        "type": "save",
        "name": "update vpn-binding A resource (aka. OTN domainA) in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.vpn-binding.vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.vpn-binding.vpn-id`' />\n<parameter name='vpn-name' value='`$tmp.aai.vpn-binding.vpn-name`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Modified' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1929.8333282470703,
        "y": 1744.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "4aaf718e.250ab8",
        "type": "save",
        "name": "update connectivity resource in AAI",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $tmp.aai.connectivity.connectivity-id'>\n<parameter name='connectivity-id' value='`$tmp.aai.connectivity.connectivity-id`' />\n<parameter name='operational-status' value='Modified' />\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n",
        "comments": "",
        "outputs": 1,
        "x": 1856.8333282470703,
        "y": 1808.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "301a3cc6.e828c4",
        "type": "comment",
        "name": "The following two nodes are for PCE",
        "info": "",
        "comments": "",
        "x": 2001.3333282470703,
        "y": 136.33334350585938,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "ba577b94.b0dc8",
        "type": "get-resource",
        "name": "get-resource pnfs-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/pnfs?depth=0' depth = 0\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
        "comments": "",
        "outputs": 1,
        "x": 1961.3333282470703,
        "y": 180.33334350585938,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "efd37c2f.4ac7f",
        "type": "get-resource",
        "name": "get-resource logical-links",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
        "comments": "",
        "outputs": 1,
        "x": 1974.3333282470703,
        "y": 225.33334350585938,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "8e0823d9.c3d5f",
        "type": "execute",
        "name": "execute printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenamemm`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4281.33332824707,
        "y": 2342.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "8465e4fd.6de0a",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 5572.33332824707,
        "y": 1179.3333435058594,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "642b12a.3e870ec",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-find-maximum-used-tpn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4470.333740234375,
        "y": 2399.3333740234375,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "f34b01.8e0f75",
        "type": "switchNode",
        "name": "switch src and dst same domain?",
        "xml": "<switch test=\"`$param-prefix-domainA[$param-prefix-domainA_length -9] == $param-prefix-domainB[$param-prefix-domainB_length -9]`\">\n    \n    `\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2923.666748046875,
        "y": 2446.33349609375,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "db4fc7e3.ebc94",
                "5ec8edee.aa3afc"
            ]
        ]
    },
    {
        "id": "5ec8edee.aa3afc",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3137.6666870117188,
        "y": 2459.3333740234375,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "42219b91.01efdc"
            ]
        ]
    },
    {
        "id": "db4fc7e3.ebc94",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3118.6666259765625,
        "y": 2560.33349609375,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "5c61900d.2cdc2"
            ]
        ]
    },
    {
        "id": "42219b91.01efdc",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3545.0001831054688,
        "y": 2465.66650390625,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "50b64f95.e5fb98"
            ]
        ]
    },
    {
        "id": "5c61900d.2cdc2",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3269.0000610351562,
        "y": 2560.66650390625,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "f027aef7.634db8",
                "7a63eedd.e32c3",
                "2b5a38a.97b3448",
                "7fefe031.312d88"
            ]
        ]
    },
    {
        "id": "50b64f95.e5fb98",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3971.3333129882812,
        "y": 2465.33349609375,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "e65eb704.1a5ee"
            ]
        ]
    },
    {
        "id": "f027aef7.634db8",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding $otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-samedomain-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3552.9999389648438,
        "y": 2566.3333740234375,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "7a63eedd.e32c3",
        "type": "set",
        "name": "set attachment_param Same Domain",
        "xml": "<set>\n<parameter name='tmp.sameDomain-src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='tmp.sameDomain-dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 3520.9999389648438,
        "y": 2626.6663818359375,
        "z": "1f8b432c.7b707d",
        "wires": []
    },
    {
        "id": "2b5a38a.97b3448",
        "type": "save",
        "name": "save vpn-binding same domain resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-samedomain-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-samedomain-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<!--<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />-->\n<parameter name='customer-vpn-id' value='`($maxtpn + $gfp)`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.sameDomain-src-access-node-id`' />\n<!--<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />-->\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.sameDomain-dst-access-node-id`' />\n<!--<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />-->\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3586.3331909179688,
        "y": 2682.6663818359375,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "1b626686.9373e9"
            ]
        ]
    },
    {
        "id": "1b626686.9373e9",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3903.3331909179688,
        "y": 2684.6663818359375,
        "z": "1f8b432c.7b707d",
        "wires": [
            [
                "de4818c6.968eb8"
            ]
        ]
    },
    {
        "id": "de4818c6.968eb8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4066.8331909179688,
        "y": 2683.9202880859375,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    },
    {
        "id": "7fefe031.312d88",
        "type": "save",
        "name": "save connectivity-domainA relationship to vpn-binding-sameDomain, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-samedomain-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 3634.9995727539062,
        "y": 2737.3331298828125,
        "z": "1f8b432c.7b707d",
        "wires": [
            []
        ]
    }
]