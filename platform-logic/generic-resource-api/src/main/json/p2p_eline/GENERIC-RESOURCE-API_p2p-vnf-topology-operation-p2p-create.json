[
    {
        "id": "63d6efcd.91928",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 117.75,
        "y": 202.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "52717356.ffbb94"
            ]
        ]
    },
    {
        "id": "52717356.ffbb94",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 402.0356903076172,
        "y": 263.98810863494873,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "84b7b306.9f6af8"
            ]
        ]
    },
    {
        "id": "84b7b306.9f6af8",
        "type": "method",
        "name": "method p2p-vnf-topology-operation-p2p-create",
        "xml": "<method rpc='p2p-vnf-topology-operation-p2p-create' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 408.17860412597656,
        "y": 348.7500305175781,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "7e2299c2.fed878"
            ]
        ]
    },
    {
        "id": "7e2299c2.fed878",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 777.988037109375,
        "y": 373.41668701171875,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "78c59c4d.b8fa2c",
                "dabba24a.9b138",
                "8be878cc.82db9"
            ]
        ]
    },
    {
        "id": "78c59c4d.b8fa2c",
        "type": "returnSuccess",
        "name": "return success",
        "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
        "comments": "",
        "x": 1079.321533203125,
        "y": 644.3469848632812,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "dabba24a.9b138",
        "type": "save",
        "name": "get service-instance from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"service-instance\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.service-instance\">\n\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"service-instance\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.service-instance\">-->",
        "comments": "",
        "outputs": 1,
        "x": 1100.75,
        "y": 346.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "bb092529.d25fb8",
                "4416c12c.f02068",
                "148b7d66.64da3b"
            ]
        ]
    },
    {
        "id": "bb092529.d25fb8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1325.75,
        "y": 204.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "3a48b7db.b6fde8"
            ]
        ]
    },
    {
        "id": "4416c12c.f02068",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1321.240966796875,
        "y": 274.32403564453125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "f3e87723.d8879"
            ]
        ]
    },
    {
        "id": "148b7d66.64da3b",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1309.75,
        "y": 320.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "e5cc88dc.b07a2"
            ]
        ]
    },
    {
        "id": "3a48b7db.b6fde8",
        "type": "switchNode",
        "name": "switch allotted-resources_length != 0",
        "xml": "<switch test='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1564.75,
        "y": 201.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "604cb7eb.7b1a68",
                "ce2646b2.7561a"
            ]
        ]
    },
    {
        "id": "f3e87723.d8879",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 1474.8123779296875,
        "y": 277.6097717285156,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "e5cc88dc.b07a2",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 1478.75,
        "y": 321.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "604cb7eb.7b1a68",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1777.75,
        "y": 225.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "b4021335.1e3ac"
            ]
        ]
    },
    {
        "id": "ce2646b2.7561a",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1779.75,
        "y": 165.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "5b1f2cfd.e132ac",
        "type": "comment",
        "name": "new for TransportSlicing",
        "info": "",
        "comments": "",
        "x": 1079.75,
        "y": 234.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "b4021335.1e3ac",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1762.75,
        "y": 313.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "e47816c1.46d19",
                "bf3fdeb7.6e1648",
                "b761fd8.2b6b08",
                "50d31847.5f509",
                "9bdaad5a.e56e08"
            ]
        ]
    },
    {
        "id": "d40580c2.e45d78",
        "type": "set",
        "name": "set network-route-A",
        "xml": "<set>\n<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-name`\" />\n<!--<parameter name='network-route-A' value=\"`$tmp.aai.logical-link.link-id`\" />-->\n\n\n",
        "comments": "",
        "x": 2625.75,
        "y": 913.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "b659bcf9.848a1",
        "type": "set",
        "name": "set network-route-B",
        "xml": "<set>\n<parameter name='network-route-B' value=\"`$tmp.aai.logical-link.link-name2`\" />\n\n\n",
        "comments": "",
        "x": 2626.75,
        "y": 968.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "2fd2492.76d5db6",
        "type": "save",
        "name": "get allotted-resource from aai",
        "xml": "<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"allotted-resource\"-->\n<!--\tkey='service-instance.service-instance-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.service-instance-id-->\n<!--         AND customer.global-customer-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.vnfs.vnf[$vnf-index].vnf-data.service-information.subscription-service-type-->\n<!--         AND allotted-resource.id = $allotted-resource-id'-->\n<!--\tlocal-only=\"false\"-->\n<!--\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">-->\n\n<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2248.75,
        "y": 364.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "c9dda2b1.43ab8",
                "ef111932.8f23",
                "cbe8fd1f.6baa2"
            ]
        ]
    },
    {
        "id": "c9dda2b1.43ab8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2464.75,
        "y": 431.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "17fe2d2.f198953"
            ]
        ]
    },
    {
        "id": "ef111932.8f23",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2465.240966796875,
        "y": 331.323974609375,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "87a60ba4.535a68"
            ]
        ]
    },
    {
        "id": "cbe8fd1f.6baa2",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2460.75,
        "y": 380.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "22e5c805.c55278"
            ]
        ]
    },
    {
        "id": "87a60ba4.535a68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2642.8125,
        "y": 331.6097412109375,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "22e5c805.c55278",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2642.75,
        "y": 380.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "caff6575.521c18",
        "type": "save",
        "name": "get logical-link from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-link\"\n\tkey='logical-link.link-name = $logical-link-name'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.logical-link\">",
        "comments": "",
        "outputs": 1,
        "x": 1983.75,
        "y": 853.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "b6506162.cc4e28",
                "aa283f4f.6ff15",
                "4fc62792.1d1aa"
            ]
        ]
    },
    {
        "id": "b6506162.cc4e28",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2275.240966796875,
        "y": 832.323974609375,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "854cdcdd.af5178"
            ]
        ]
    },
    {
        "id": "aa283f4f.6ff15",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2263.75,
        "y": 876.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "4317fabe.8b662c"
            ]
        ]
    },
    {
        "id": "854cdcdd.af5178",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2423.8125,
        "y": 832.6097412109375,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "4317fabe.8b662c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2422.75,
        "y": 876.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "4fc62792.1d1aa",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2270.75,
        "y": 955.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "ab7c1440.9f704"
            ]
        ]
    },
    {
        "id": "ab7c1440.9f704",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2409.75,
        "y": 955.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "d40580c2.e45d78",
                "b659bcf9.848a1",
                "a136fb28.0b527",
                "1648afc0.52dbc8",
                "b920e24f.94b628",
                "558b33bb.a28914",
                "14b3fe.dfa6ec02",
                "cd49f082.fc7e6",
                "ccca18a2.ea7ad8",
                "348e2352.849ddc",
                "631d9619.9d9ee",
                "c3b37174.45567"
            ]
        ]
    },
    {
        "id": "a136fb28.0b527",
        "type": "save",
        "name": "get network-route-A from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-A'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-A\">",
        "comments": "",
        "outputs": 1,
        "x": 2638.75,
        "y": 1036.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "1145371f.91a831",
                "5a2e1129.154e8",
                "b9792c95.c6cf1"
            ]
        ]
    },
    {
        "id": "1648afc0.52dbc8",
        "type": "save",
        "name": "get network-route-B from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-route\"\n\tkey='network-route.route-id = $network-route-B'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-route-B\">",
        "comments": "",
        "outputs": 1,
        "x": 2617.75,
        "y": 1638.7498779296875,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "2e980743.252ac8",
                "1e789473.1cf9ec",
                "90160a99.2f8a58"
            ]
        ]
    },
    {
        "id": "1145371f.91a831",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2839.75,
        "y": 920.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "3ed8df93.4273e"
            ]
        ]
    },
    {
        "id": "5a2e1129.154e8",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2835.259033203125,
        "y": 970.176025390625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "33754642.9ad63a"
            ]
        ]
    },
    {
        "id": "b9792c95.c6cf1",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2839.259033203125,
        "y": 1021.176025390625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "64d30532.9bdba4"
            ]
        ]
    },
    {
        "id": "3ed8df93.4273e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2988.321533203125,
        "y": 920.0357666015625,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "33754642.9ad63a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2978.259033203125,
        "y": 970.176025390625,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "2e980743.252ac8",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2840.75,
        "y": 1608.7498779296875,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "9b0a176a.3fd41"
            ]
        ]
    },
    {
        "id": "1e789473.1cf9ec",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2836.259033203125,
        "y": 1658.1759033203125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "b94ccd2f.84b8b8"
            ]
        ]
    },
    {
        "id": "90160a99.2f8a58",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2840.259033203125,
        "y": 1709.1759033203125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "8f6fd298.ecc1e8"
            ]
        ]
    },
    {
        "id": "9b0a176a.3fd41",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2989.321533203125,
        "y": 1608.03564453125,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "b94ccd2f.84b8b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2979.259033203125,
        "y": 1658.1759033203125,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "da7f1dce.5cb46",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3653.41650390625,
        "y": 1064.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "826c0f72.a70018",
                "36f8f99c.c030b6",
                "57c1cc0d.dcb6ac",
                "9cbc6da7.b032e",
                "992f0b42.313448"
            ]
        ]
    },
    {
        "id": "b7d2e547.bd45e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3480.75,
        "y": 1065.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "da7f1dce.5cb46"
            ]
        ]
    },
    {
        "id": "647aea0c.904444",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3490.240966796875,
        "y": 1108.3240356445312,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "99f9ef28.22d7a"
            ]
        ]
    },
    {
        "id": "1b3a301d.df26c",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3478.75,
        "y": 1154.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "6ff92d51.144e3c"
            ]
        ]
    },
    {
        "id": "99f9ef28.22d7a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3643.8123779296875,
        "y": 1111.6097717285156,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "6ff92d51.144e3c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3647.75,
        "y": 1155.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "64d30532.9bdba4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3000.75,
        "y": 1022.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "f7fe7886.c5f688",
                "97630cf9.61551"
            ]
        ]
    },
    {
        "id": "8f6fd298.ecc1e8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2990.75,
        "y": 1710.7498779296875,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "d321b170.fefc18",
                "ffb149d2.1a2f38"
            ]
        ]
    },
    {
        "id": "821eddca.0e3588",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3621.41650390625,
        "y": 1900.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "e0128afe.007bf",
                "2edd1a44.e4eb5e",
                "af1082c8.2a9af",
                "ebc710f0.247328",
                "5282e7ba.b5ae6"
            ]
        ]
    },
    {
        "id": "a826813e.688038",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3448.75,
        "y": 1901.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "821eddca.0e3588"
            ]
        ]
    },
    {
        "id": "31b9c040.452a38",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3458.240966796875,
        "y": 1944.3240356445312,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "17be006a.5f45e"
            ]
        ]
    },
    {
        "id": "28d3d57c.d8ea12",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3446.75,
        "y": 1990.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "2fae66b5.5bd00a"
            ]
        ]
    },
    {
        "id": "17be006a.5f45e",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3611.8123779296875,
        "y": 1947.6097717285156,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "2fae66b5.5bd00a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3615.75,
        "y": 1991.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "826c0f72.a70018",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.p-interface-src.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3917.75,
        "y": 1048.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "2cce3874.ab433",
                "ee660e5a.b83a"
            ]
        ]
    },
    {
        "id": "ee660e5a.b83a",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4140.75,
        "y": 1003.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "5270775.80a9288"
            ]
        ]
    },
    {
        "id": "2cce3874.ab433",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4142.75,
        "y": 1067.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "838db3c8.831b8"
            ]
        ]
    },
    {
        "id": "6ce9021f.48b204",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.src.ltpId' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n",
        "comments": "",
        "x": 4475.75,
        "y": 958.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "838db3c8.831b8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4304.75,
        "y": 1063.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "5270775.80a9288",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4305.75,
        "y": 1000.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "a369f63d.8d0208",
                "6ce9021f.48b204"
            ]
        ]
    },
    {
        "id": "a369f63d.8d0208",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.pnf-name' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n",
        "comments": "",
        "x": 4476.75,
        "y": 1066.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "dc0e098a.8d3498",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4477.75,
        "y": 1015.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "57c1cc0d.dcb6ac",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-domainA-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-domainA-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3919.75,
        "y": 1207.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "36f8f99c.c030b6",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainA",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-domainA-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3964.75,
        "y": 1117.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "dbdce200.a0ebf",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 3853.75,
        "y": 1158.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "e0128afe.007bf",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.p-interface-dst.interface-name`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB\"/>\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3907.75,
        "y": 1904.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "a6039dc8.090cc",
                "5bb0c93.9199ab8"
            ]
        ]
    },
    {
        "id": "5bb0c93.9199ab8",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4130.75,
        "y": 1859.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "d06cbf2c.85f9c"
            ]
        ]
    },
    {
        "id": "a6039dc8.090cc",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4132.75,
        "y": 1923.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "9ac2c145.9482"
            ]
        ]
    },
    {
        "id": "5b53dee5.e8008",
        "type": "set",
        "name": "set ltpId",
        "xml": "<set>\n<parameter name='tmp.dst.ltpId' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n",
        "comments": "",
        "x": 4465.75,
        "y": 1817.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "9ac2c145.9482",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 4291.75,
        "y": 1942.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "d06cbf2c.85f9c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4295.75,
        "y": 1856.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "5b53dee5.e8008",
                "1365606a.f41bb8"
            ]
        ]
    },
    {
        "id": "1365606a.f41bb8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.pnf-name' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 4466.75,
        "y": 1922.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "d703d891.d4c1c",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[length-2] all together\nin order to assemble the correct pnf-name",
        "comments": "",
        "x": 4461.75,
        "y": 1871.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "af1082c8.2a9af",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $prop.connectivity-domainB-uuid'>\n<parameter name='connectivity-id' value='`$prop.connectivity-domainB-uuid`' />\n<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />\n<parameter name='operational-status' value='Created' />\n<parameter name='access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n<parameter name='cvlan' value='`$tmp.aai.network-route-B.logical-interface-id`' />\n\n\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='`$prop.sotn.vpnType`' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<parameter name='cbs' value='`$prop.sotn.cbs`' />\n<parameter name='ebs' value='`$prop.sotn.ebs`' />\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 3909.75,
        "y": 2063.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "2edd1a44.e4eb5e",
        "type": "execute",
        "name": "execute UUID generator for connectivity domainB",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.connectivity-domainB-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3954.75,
        "y": 1973.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "fc18d76a.4302d",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "using the output of regex string arrays,\nconcatinate index 0 to index[?] all together\nin order to assemble the correct values for provider-id, \ntopology-id, node-id, etc.",
        "comments": "",
        "x": 3843.75,
        "y": 2011.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "b920e24f.94b628",
        "type": "set",
        "name": "set attachment_param",
        "xml": "<set>\n<parameter name='prop.connection-attachment.access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<parameter name='prop.connection-attachment.access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<parameter name='prop.connection-attachment.access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<parameter name='prop.connection-attachment.access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='prop.connection-attachment.access-ltp-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -1]`' />\n\n<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -9]`' />\n<parameter name='prop.remote.connection-attachment.access-client-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -7]`' />\n<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -5]`' />\n<parameter name='prop.remote.connection-attachment.access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -1]`' />\n\n<!--<parameter name='prop.remote.connection-attachment.access-provider-id' value='`$oof.vpn.access-provider-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-client-id' value='`$oof.vpn.access-client-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-topology-id' value='`$oof.vpn.access-topology-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-node-id' value='`$oof.vpn.access-node-id`' />-->\n<!--<parameter name='prop.remote.connection-attachment.access-ltp-id' value='`$oof.vpn.src-access-ltp-id`' />-->\n",
        "comments": "",
        "x": 2653.75,
        "y": 2123.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "7dfe65de.953a14",
        "type": "comment",
        "name": "TODO: FIXME",
        "info": "put proper values for src topology-id, node-id, ltp-id, etc (in domain A)\nand dst topology-id, node-id, ltp-id, etc (in domain B)",
        "comments": "",
        "x": 2619.75,
        "y": 2057.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "9cbc6da7.b032e",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4047.75,
        "y": 1255.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "ebc710f0.247328",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4036.75,
        "y": 2128.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "a4a52ebd.07da98",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainA.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainA.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5091.75,
        "y": 775.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "147a8d1b.1ee80b",
                "d765c1e1.9d8848",
                "55e4f273.918784"
            ]
        ]
    },
    {
        "id": "17fe2d2.f198953",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2644.75,
        "y": 431.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "92c83ff4.32672"
            ]
        ]
    },
    {
        "id": "fa993007.6297d",
        "type": "outcome",
        "name": "logical-link",
        "xml": "<outcome value='logical-link'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1574.7501220703125,
        "y": 848.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "71dec788.b2b82"
            ]
        ]
    },
    {
        "id": "9822d888.33539",
        "type": "switchNode",
        "name": "switch allotted-resource.relationship-list not empty",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2312.75,
        "y": 554.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "bb40c414.d4fe5",
                "986079fe.da93b"
            ]
        ]
    },
    {
        "id": "986079fe.da93b",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2622.75,
        "y": 561.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "bb40c414.d4fe5",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2621.75,
        "y": 615.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "7898c9b3.45357"
            ]
        ]
    },
    {
        "id": "256c12f1.36937e",
        "type": "set",
        "name": "set the current logical-link-name",
        "xml": "<set>\n<parameter name='logical-link-name' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 1994.75,
        "y": 798.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "71dec788.b2b82",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 1751.75,
        "y": 841.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "256c12f1.36937e",
                "caff6575.521c18"
            ]
        ]
    },
    {
        "id": "b640b2e3.7d557",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3180.75,
        "y": 1027.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "f7fe7886.c5f688",
        "type": "save",
        "name": "get p-interface-src from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-A.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-A.p-interface-src\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3223.75,
        "y": 1092.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "b7d2e547.bd45e8",
                "647aea0c.904444",
                "1b3a301d.df26c"
            ]
        ]
    },
    {
        "id": "d321b170.fefc18",
        "type": "save",
        "name": "get p-interface-dst from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"p-interface\"\n\t    key=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\n\t        AND p-interface.interface-name = $tmp.aai.network-route-B.next-hop\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.network-route-B.p-interface-dst\" >\n\n<!--<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" -->\n<!--\tresource=\"p-interface\"-->\n<!--\t    key=\"pnf.pnf-name = $unique-src-node-Id-->\n<!--\t        and p-interface.interface-name = $tmp.aai.endpointA.relationship-list.relationship[$rel-index].relationship-data[0].relationship-value\"-->\n<!--\t\tlocal-only=\"false\" -->\n<!--\t\tpfx=\"tmp.aai.endpointA.p-interface-src\" >-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3220.75,
        "y": 1936.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "a826813e.688038",
                "31b9c040.452a38",
                "28d3d57c.d8ea12"
            ]
        ]
    },
    {
        "id": "9ef3c368.db5f5",
        "type": "comment",
        "name": "Question?",
        "info": "How to know if DG would send this get request\nin \"nodes\" namespace instead of \"network\" namespace?",
        "comments": "",
        "x": 3181.75,
        "y": 1880.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "92c83ff4.32672",
        "type": "save",
        "name": "get allotted-resource relationship from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"allotted-resource:relationship-list\"\n\tkey='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type\n         AND allotted-resource.id = $allotted-resource-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.allotted-resource.relationship-list\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2937.75,
        "y": 378.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "95b0e196.505ca",
                "18577af2.228375",
                "e930ed34.7c0138"
            ]
        ]
    },
    {
        "id": "18577af2.228375",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3211.240966796875,
        "y": 271.323974609375,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "88d8bef2.b299b"
            ]
        ]
    },
    {
        "id": "88d8bef2.b299b",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 3388.8125,
        "y": 271.6097412109375,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "e930ed34.7c0138",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3206.75,
        "y": 320.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "d9c208e6.92ace8"
            ]
        ]
    },
    {
        "id": "d9c208e6.92ace8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 3388.75,
        "y": 320.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "95b0e196.505ca",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3210.75,
        "y": 371.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "1e6206a8.c04df9"
            ]
        ]
    },
    {
        "id": "1e6206a8.c04df9",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3390.75,
        "y": 371.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "9822d888.33539"
            ]
        ]
    },
    {
        "id": "7e565315.5e9c94",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2881.75,
        "y": 595.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "ad48e1c.1164d2"
            ]
        ]
    },
    {
        "id": "ad48e1c.1164d2",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3161.75,
        "y": 595.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "fa993007.6297d"
            ]
        ]
    },
    {
        "id": "f45e9748.7b5398",
        "type": "outcome",
        "name": "network-policy",
        "xml": "<outcome value='network-policy'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3366.75,
        "y": 569.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "765d29c.dd249d8"
            ]
        ]
    },
    {
        "id": "765d29c.dd249d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3543.7498779296875,
        "y": 562.7498779296875,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "75683ebe.1d381",
                "bda78544.b92ef8"
            ]
        ]
    },
    {
        "id": "75683ebe.1d381",
        "type": "set",
        "name": "set the 1st network-policy-id",
        "xml": "<set>\n<parameter name='network-policy-id' value=\"`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].relationship-data[0].relationship-value`\" />\n\n\n",
        "comments": "",
        "x": 3786.7498779296875,
        "y": 519.7498779296875,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "bda78544.b92ef8",
        "type": "save",
        "name": "get network-policy from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"network-policy\"\n\tkey='network-policy.network-policy-id = $network-policy-id'\n\tlocal-only=\"false\"\n\tforce=\"true\" pfx=\"tmp.aai.network-policy\">",
        "comments": "",
        "outputs": 1,
        "x": 3775.7498779296875,
        "y": 574.7498779296875,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "ca6a5b49.f6776",
                "a806a879.064e2",
                "e87f6cd7.19d238"
            ]
        ]
    },
    {
        "id": "e87f6cd7.19d238",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4028.75,
        "y": 460.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "8b6c5048.f1e68"
            ]
        ]
    },
    {
        "id": "8b6c5048.f1e68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 4177.321533203125,
        "y": 461.0357666015625,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "180d4dab.bdf5aa",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 4176.259033203125,
        "y": 505.176025390625,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "a806a879.064e2",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4017.259033203125,
        "y": 505.176025390625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "180d4dab.bdf5aa"
            ]
        ]
    },
    {
        "id": "ca6a5b49.f6776",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4024.259033203125,
        "y": 584.176025390625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "64e4dfe7.932de"
            ]
        ]
    },
    {
        "id": "64e4dfe7.932de",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4163.259033203125,
        "y": 584.176025390625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "ee6b0ff5.49f928",
                "2bb1c801.8cdbe"
            ]
        ]
    },
    {
        "id": "ee6b0ff5.49f928",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='maximum-bandwidth' value=\"`$tmp.aai.network-policy.max-bandwidth`\" />\n<parameter name='route-distinguisher' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4368.75,
        "y": 581.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "97630cf9.61551",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-A.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainA-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3224.75,
        "y": 762.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "934ca0f9.e9628",
                "acb0ef25.bdb28"
            ]
        ]
    },
    {
        "id": "acb0ef25.bdb28",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3447.75,
        "y": 748.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "86c41dd1.cd9b3"
            ]
        ]
    },
    {
        "id": "934ca0f9.e9628",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3449.75,
        "y": 781.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "7c1914e6.7de444"
            ]
        ]
    },
    {
        "id": "7c1914e6.7de444",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3592.75,
        "y": 778.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "86c41dd1.cd9b3",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3595.75,
        "y": 741.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "9c125821.e182b8",
                "15e72cc8.739c23"
            ]
        ]
    },
    {
        "id": "9c125821.e182b8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.src.domainA.pnf-name' value=\"`$param-prefix-domainA-pnfName[0] + '-' +\n                                                   $param-prefix-domainA-pnfName[1] + '-' +\n                                                   $param-prefix-domainA-pnfName[2] + '-' +\n                                                   $param-prefix-domainA-pnfName[3] + '-' +\n                                                   $param-prefix-domainA-pnfName[4] + '-' +\n                                                   $param-prefix-domainA-pnfName[5] + '-' +\n                                                   $param-prefix-domainA-pnfName[6] + '-' +\n                                                   $param-prefix-domainA-pnfName[7] + '-' +\n                                                   $param-prefix-domainA-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3757.75,
        "y": 736.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "ffb149d2.1a2f38",
        "type": "execute",
        "name": "execute split tp-id to get pnf-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split' >\n<parameter name=\"original_string\" value='`$tmp.aai.network-route-B.next-hop`'/>\n<!--<parameter name=\"regex\" value=\"[^-]+$\"/>-->\n<parameter name=\"regex\" value=\"[-]+\"/>\n<parameter name=\"ctx_memory_result_key\" value=\"param-prefix-domainB-pnfName\"/>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3238.75,
        "y": 1599.7498779296875,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "bf5eff49.e98d88",
                "54638e9e.e4ced"
            ]
        ]
    },
    {
        "id": "54638e9e.e4ced",
        "type": "failure",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3461.75,
        "y": 1585.7498779296875,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "16f61dc.50bc1e2"
            ]
        ]
    },
    {
        "id": "bf5eff49.e98d88",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3463.75,
        "y": 1618.7498779296875,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "9dee5daf.af14f"
            ]
        ]
    },
    {
        "id": "9dee5daf.af14f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value=\"An error occured while splitting sna1_route\" />\n",
        "comments": "",
        "x": 3606.75,
        "y": 1615.7498779296875,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "16f61dc.50bc1e2",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 3609.75,
        "y": 1578.7498779296875,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "8dcdd4c8.096dc8",
                "d98e4cd6.39d27"
            ]
        ]
    },
    {
        "id": "8dcdd4c8.096dc8",
        "type": "set",
        "name": "set pnf-name",
        "xml": "<set>\n<parameter name='tmp.dst.domainB.pnf-name' value=\"`$param-prefix-domainB-pnfName[0] + '-' +\n                                                   $param-prefix-domainB-pnfName[1] + '-' +\n                                                   $param-prefix-domainB-pnfName[2] + '-' +\n                                                   $param-prefix-domainB-pnfName[3] + '-' +\n                                                   $param-prefix-domainB-pnfName[4] + '-' +\n                                                   $param-prefix-domainB-pnfName[5] + '-' +\n                                                   $param-prefix-domainB-pnfName[6] + '-' +\n                                                   $param-prefix-domainB-pnfName[7] + '-' +\n                                                   $param-prefix-domainB-pnfName[8]`\" />\n",
        "comments": "",
        "x": 3803.75,
        "y": 1581.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "8be878cc.82db9",
        "type": "execute",
        "name": "execute properties",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />",
        "comments": "",
        "outputs": 1,
        "x": 1067.75,
        "y": 286.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "992f0b42.313448",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='pividx' start='0' end='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3871.75,
        "y": 1332.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "b7afaa03.1d1688"
            ]
        ]
    },
    {
        "id": "b7afaa03.1d1688",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4077.75,
        "y": 1332.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "40933173.919508"
            ]
        ]
    },
    {
        "id": "40933173.919508",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4293.03564453125,
        "y": 1332.57177734375,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "8a032b26.4ca96"
            ]
        ]
    },
    {
        "id": "8a032b26.4ca96",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4499.8671875,
        "y": 1333.09033203125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "2723496.6122eb6",
                "e5650eda.402e4",
                "1295e367.d34e2d"
            ]
        ]
    },
    {
        "id": "2723496.6122eb6",
        "type": "set",
        "name": "set source ttp-id",
        "xml": "<set>\n<parameter name='tmp.source.ttp-id' value=\"`$tmp.aai.network-route-A.p-interface-src.relationship-list.relationship[$pividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4714.8671875,
        "y": 1295.09033203125,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "e5650eda.402e4",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.source.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.source-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4711.8671875,
        "y": 1334.09033203125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "217f847a.1b8f9c"
            ]
        ]
    },
    {
        "id": "1295e367.d34e2d",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4667.3671875,
        "y": 1376.09033203125,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "217f847a.1b8f9c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4892.3671875,
        "y": 1333.09033203125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "9a62abd2.875488"
            ]
        ]
    },
    {
        "id": "9a62abd2.875488",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5050.3671875,
        "y": 1333.09033203125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "84d611e0.38611"
            ]
        ]
    },
    {
        "id": "84d611e0.38611",
        "type": "set",
        "name": "set source tunnel tp ip",
        "xml": "<set>\n<parameter name='source.tunnel-tp-id' value=\"`$tmp.aai.source-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5257.3671875,
        "y": 1333.09033203125,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "5282e7ba.b5ae6",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dividx' start='0' end='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3868.75,
        "y": 2201.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "bd545475.b3b6c"
            ]
        ]
    },
    {
        "id": "bd545475.b3b6c",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4074.75,
        "y": 2201.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "83564e37.d48218"
            ]
        ]
    },
    {
        "id": "83564e37.d48218",
        "type": "outcome",
        "name": "tunnel-termination-point",
        "xml": "<outcome value='tunnel-termination-point'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4290.03564453125,
        "y": 2201.5718994140625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "93bbce92.5201a"
            ]
        ]
    },
    {
        "id": "93bbce92.5201a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4496.8671875,
        "y": 2202.0904541015625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "fd9657a3.dc9388",
                "30813f1a.ba22e",
                "20bd551d.f1ff8a"
            ]
        ]
    },
    {
        "id": "fd9657a3.dc9388",
        "type": "set",
        "name": "set destination ttp-id",
        "xml": "<set>\n<parameter name='tmp.destination.ttp-id' value=\"`$tmp.aai.network-route-B.p-interface-dst.relationship-list.relationship[$dividx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 4711.8671875,
        "y": 2164.0904541015625,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "30813f1a.ba22e",
        "type": "get-resource",
        "name": "get-resource src TTP",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"tunnel-termination-point\" \n\t\tkey=\"tunnel-termination-point.ttp-id = $tmp.destination.ttp-id \n\t\tAND depth = '0'\"\n        pfx='tmp.aai.destination-ttp' local-only='false' >\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4708.8671875,
        "y": 2203.0904541015625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "a170e3c8.bc39e8"
            ]
        ]
    },
    {
        "id": "20bd551d.f1ff8a",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 4664.3671875,
        "y": 2245.0904541015625,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "a170e3c8.bc39e8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4889.3671875,
        "y": 2202.0904541015625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "2f28ce6e.7c805a"
            ]
        ]
    },
    {
        "id": "2f28ce6e.7c805a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 5047.3671875,
        "y": 2202.0904541015625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "8acb087c.8a0c18"
            ]
        ]
    },
    {
        "id": "8acb087c.8a0c18",
        "type": "set",
        "name": "set destination tunnel tp ip",
        "xml": "<set>\n<parameter name='destination.tunnel-tp-id' value=\"`$tmp.aai.destination-ttp.tunnel-tp-id`\" />\n",
        "comments": "",
        "x": 5254.3671875,
        "y": 2202.0904541015625,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "15e72cc8.739c23",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.src.domainA.pnf-name\"\n        pfx='tmp.aai.source-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3784.75,
        "y": 808.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "4a52b982.f91c28",
                "a11e568c.3be85",
                "99ab9191.08f9c8"
            ]
        ]
    },
    {
        "id": "4a52b982.f91c28",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3980.2501220703125,
        "y": 760.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "b692ef38.8280a"
            ]
        ]
    },
    {
        "id": "a11e568c.3be85",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3972.2501220703125,
        "y": 815.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "e2c6f054.dcba8"
            ]
        ]
    },
    {
        "id": "99ab9191.08f9c8",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3977.2501220703125,
        "y": 872.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "b3b61906.89b6c"
            ]
        ]
    },
    {
        "id": "b3b61906.89b6c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4129.2501220703125,
        "y": 873.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "e2c6f054.dcba8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4140.2501220703125,
        "y": 818.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "b692ef38.8280a",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4124.6324462890625,
        "y": 758.4056701660156,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "7c1e7393.5f430c"
            ]
        ]
    },
    {
        "id": "bfce8ca8.7f158",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4706.75,
        "y": 776.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "66e0242c.eca1f4"
            ]
        ]
    },
    {
        "id": "66e0242c.eca1f4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4883.75,
        "y": 768.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "bb4e4d04.403498",
                "a4a52ebd.07da98"
            ]
        ]
    },
    {
        "id": "7c1e7393.5f430c",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.source-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4308.75,
        "y": 772.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "fdc19a74.7f3248"
            ]
        ]
    },
    {
        "id": "fdc19a74.7f3248",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4503.75,
        "y": 772.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "bfce8ca8.7f158",
                "86b82394.a43d88"
            ]
        ]
    },
    {
        "id": "bb4e4d04.403498",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainA id",
        "xml": "<set>\n<parameter name='tmp.domainA.esr-thirdparty-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5121.75,
        "y": 723.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "147a8d1b.1ee80b",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5301.75,
        "y": 766.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "b87f751d.f3da7"
            ]
        ]
    },
    {
        "id": "d765c1e1.9d8848",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5293.75,
        "y": 821.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "df22bf16.07f7a"
            ]
        ]
    },
    {
        "id": "55e4f273.918784",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5298.75,
        "y": 878.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "6f4ec167.ab122"
            ]
        ]
    },
    {
        "id": "6f4ec167.ab122",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5450.75,
        "y": 879.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "df22bf16.07f7a",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5461.75,
        "y": 824.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "b87f751d.f3da7",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5446.13232421875,
        "y": 764.4056701660156,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "65560228.e1b304"
            ]
        ]
    },
    {
        "id": "65560228.e1b304",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.url' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.user' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainA.password' value=\"`$tmp.aai.domainA.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5660.75,
        "y": 760.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "d98e4cd6.39d27",
        "type": "get-resource",
        "name": "get-resource src pnf",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.dst.domainB.pnf-name\"\n        pfx='tmp.aai.destination-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3825.75,
        "y": 1649.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "2868cde5.076bda",
                "b742f188.d99c98",
                "7bcbe6e5.b6855"
            ]
        ]
    },
    {
        "id": "2868cde5.076bda",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4021.2501220703125,
        "y": 1601.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "ddae6fe1.18737"
            ]
        ]
    },
    {
        "id": "b742f188.d99c98",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4013.2501220703125,
        "y": 1656.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "22adb7ad.9c7eb8"
            ]
        ]
    },
    {
        "id": "7bcbe6e5.b6855",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4018.2501220703125,
        "y": 1713.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "8bbca88.4bf3658"
            ]
        ]
    },
    {
        "id": "8bbca88.4bf3658",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4170.2501220703125,
        "y": 1714.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "22adb7ad.9c7eb8",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4181.2501220703125,
        "y": 1659.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "ddae6fe1.18737",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4165.6324462890625,
        "y": 1599.4056701660156,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "745549ac.76522"
            ]
        ]
    },
    {
        "id": "6c51f1bb.fdd338",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4747.75,
        "y": 1617.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "bec84375.9834d8"
            ]
        ]
    },
    {
        "id": "bec84375.9834d8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4924.75,
        "y": 1609.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "10746af3.442ea5",
                "c8d59f37.05516"
            ]
        ]
    },
    {
        "id": "745549ac.76522",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='dpvidx' start='0' end='`$tmp.aai.destination-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4349.75,
        "y": 1613.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "6f4edcf8.0264a4"
            ]
        ]
    },
    {
        "id": "6f4edcf8.0264a4",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4544.75,
        "y": 1613.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "6c51f1bb.fdd338",
                "bd360057.ae7f88"
            ]
        ]
    },
    {
        "id": "c8d59f37.05516",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainB.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainB.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5132.75,
        "y": 1616.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "cfff8041.7a41a",
                "e8bb74eb.2b006",
                "38cb0a35.e7b596"
            ]
        ]
    },
    {
        "id": "10746af3.442ea5",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainB id",
        "xml": "<set>\n<parameter name='tmp.domainB.esr-thirdparty-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5162.75,
        "y": 1564.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "cfff8041.7a41a",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5342.75,
        "y": 1607.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "48760758.d51b1"
            ]
        ]
    },
    {
        "id": "e8bb74eb.2b006",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5334.75,
        "y": 1662.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "cd0857ad.373e5"
            ]
        ]
    },
    {
        "id": "38cb0a35.e7b596",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5339.75,
        "y": 1719.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "dc5ac250.081388"
            ]
        ]
    },
    {
        "id": "dc5ac250.081388",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5491.75,
        "y": 1720.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "cd0857ad.373e5",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5502.75,
        "y": 1665.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "48760758.d51b1",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5487.13232421875,
        "y": 1605.4056701660156,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "4f464150.595d48"
            ]
        ]
    },
    {
        "id": "4f464150.595d48",
        "type": "set",
        "name": "set controller domainB data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.url' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.user' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainB.password' value=\"`$tmp.aai.domainB.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5701.75,
        "y": 1601.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "7898c9b3.45357",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2785.75,
        "y": 541.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "7e565315.5e9c94",
                "d1780d52.965428"
            ]
        ]
    },
    {
        "id": "d1780d52.965428",
        "type": "for",
        "name": "for each allotted-resource relationship",
        "xml": "<for index='idx' start='0' end='`$tmp.aai.allotted-resource.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 3066.75,
        "y": 497.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "3ca961.874bbea"
            ]
        ]
    },
    {
        "id": "3ca961.874bbea",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.allotted-resource.relationship-list.relationship[$idx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3328.75,
        "y": 497.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "f45e9748.7b5398"
            ]
        ]
    },
    {
        "id": "86b82394.a43d88",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4709.75,
        "y": 850.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "d6ae6456.c7b7d"
            ]
        ]
    },
    {
        "id": "d6ae6456.c7b7d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4886.75,
        "y": 842.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "e0c26dc1.c6609"
            ]
        ]
    },
    {
        "id": "e0c26dc1.c6609",
        "type": "set",
        "name": "set domainA ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainA.eth-network-id' value=\"`$tmp.aai.source-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5121.75,
        "y": 966.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "d695d085.dfc6b8",
        "type": "set",
        "name": "set domainB ethernet layer network-id",
        "xml": "<set>\n<parameter name='tmp.domainB.eth-network-id' value=\"`$tmp.aai.destination-pnf.relationship-list.relationship[$dpvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5161.75,
        "y": 1806.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "d2aa9e81.4a2188",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4926.75,
        "y": 1682.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "d695d085.dfc6b8"
            ]
        ]
    },
    {
        "id": "bd360057.ae7f88",
        "type": "outcome",
        "name": "network-resource",
        "xml": "<outcome value='network-resource'>",
        "comments": "",
        "outputs": 1,
        "x": 4749.75,
        "y": 1690.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "d2aa9e81.4a2188"
            ]
        ]
    },
    {
        "id": "2bb1c801.8cdbe",
        "type": "set",
        "name": "set the max bandwidth",
        "xml": "<set>\n<parameter name='gfp' value='`$maximum-bandwidth /1000 *4 /5 +1`' />\n\n\n\n",
        "comments": "",
        "x": 4367.75,
        "y": 627.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "f8e47c26.52e4d8",
        "type": "execute",
        "name": "execute UUID generator for ethernet-service-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.ethernet-service-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2723.75,
        "y": 761.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "cd49f082.fc7e6",
        "type": "execute",
        "name": "execute UUID generator for otn-tunnel-name",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.otn-tunnel-name\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2704.75,
        "y": 811.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "e47816c1.46d19",
        "type": "for",
        "name": "for each allotted-resource",
        "xml": "<for index='aridx' start='0' end='`$tmp.aai.service-instance.allotted-resources.allotted-resource_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1965.75,
        "y": 345.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "d88bc8a5.b522",
                "2fd2492.76d5db6"
            ]
        ]
    },
    {
        "id": "d88bc8a5.b522",
        "type": "set",
        "name": "set the current allotted-resource-id",
        "xml": "<set>\n<parameter name='allotted-resource-id' value=\"`$tmp.aai.service-instance.allotted-resources.allotted-resource[$aridx].id`\" />\n\n\n",
        "comments": "",
        "x": 2245.75,
        "y": 283.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "558b33bb.a28914",
        "type": "set",
        "name": "set query_param",
        "xml": "<set>\n<parameter name='prop.ethsrvType' value='`$network-route-A`' />\n\n",
        "comments": "",
        "x": 2634.75,
        "y": 2176.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "14b3fe.dfa6ec02",
        "type": "set",
        "name": "unset parameters",
        "xml": "<set>\n<parameter name='domain-A.tunnel-tp-id' value='' />\n<parameter name='domain-A.node-id' value='' />\n<parameter name='domain-A.network-id' value=\"\" />\n<parameter name='domain-A.provider-id' value=\"\" />\n<parameter name='domain-A.client-id' value=\"\" />\n<parameter name='domain-A.te-topo-id' value=\"\" />\n<parameter name='domain-A.network-type' value=\"\" />\n<parameter name='domain-A.ltpId' value=\"\" />\n<parameter name='tmp.domain-A.network-id' value=\"\" />\n<parameter name='tmp.domain-A.ttp-id' value=\"\" />\n<parameter name='network-route-A' value=\"\" />\n<!--<parameter name='domain-A.' value=\"\" />-->\n\n<parameter name='request-id' value='' />\n<parameter name='otn-source-node' value='' />\n<parameter name='otn-dest-node' value='' />\n<parameter name='bw-odu' value=\"\" />\n<parameter name='src-ttp-id' value='' />\n<parameter name='dst-ttp-id' value='' />\n\n<parameter name='domain-B.tunnel-tp-id' value='' />\n<parameter name='domain-B.node-id' value='' />\n<parameter name='domain-B.network-id' value=\"\" />\n<parameter name='domain-B.provider-id' value=\"\" />\n<parameter name='domain-B.client-id' value=\"\" />\n<parameter name='domain-B.te-topo-id' value=\"\" />\n<parameter name='domain-B.network-type' value=\"\" />\n<parameter name='domain-B.ltpId' value=\"\" />\n<parameter name='tmp.domain-B.network-id' value=\"\" />\n<parameter name='tmp.domain-B.ttp-id' value=\"\" />\n<parameter name='network-route-B' value=\"\" />\n<!--<parameter name='domain-B.' value=\"\" />-->\n\n\n\n\n\n",
        "comments": "",
        "x": 2604.75,
        "y": 4019.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "ccca18a2.ea7ad8",
        "type": "set",
        "name": "set new ethernet-service-name",
        "xml": "<set>\n<!--<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-name`\" />-->\n<parameter name='prop.ethernet-service-name' value=\"`$tmp.aai.logical-link.link-id`\" />\n\n\n",
        "comments": "",
        "x": 2661.75,
        "y": 856.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "cca04ac5.91465",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='otnidx' start='0' end='`$tmp.otninfo_length`' >",
        "comments": "",
        "outputs": 1,
        "x": 2960.75,
        "y": 2573.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "632d67d8.477b4"
            ]
        ]
    },
    {
        "id": "509c5188.74c83",
        "type": "save",
        "name": "save vpn-binding otnIdx resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-otnidx-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<!--<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />-->\n<parameter name='customer-vpn-id' value='`($maxtpn + $gfp)`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$tmp.access-provider-id`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$tmp.access-client-id`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$tmp.access-topology-id`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.domainG-src-access-node-id`' />\n<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.domainG-dst-access-node-id`' />\n<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3778.75,
        "y": 3008.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "47e5c711.f9e42"
            ]
        ]
    },
    {
        "id": "e45b6160.4b64a",
        "type": "save",
        "name": "save connectivity-A relationship to vpn-binding-A, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4346.249755859375,
        "y": 3117.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "47e5c711.f9e42",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4084.75,
        "y": 3007.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "145a15c9.c3f512"
            ]
        ]
    },
    {
        "id": "145a15c9.c3f512",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4294.25,
        "y": 3008.00390625,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "7555fbf6.cdbdcc",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding $otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 3811.75,
        "y": 2487.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "6602c404.9c0314",
        "type": "switchNode",
        "name": "switch otnidx == 0",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3687.75,
        "y": 3125.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "ecf5d9ca.029638",
                "7cbff457.bc10a4"
            ]
        ]
    },
    {
        "id": "ecf5d9ca.029638",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3870.75,
        "y": 3125.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "8b66f50b.a495e"
            ]
        ]
    },
    {
        "id": "7cbff457.bc10a4",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3695.75,
        "y": 3272.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "98fe960.02a01e8"
            ]
        ]
    },
    {
        "id": "a6856d07.c2a888",
        "type": "switchNode",
        "name": "switch otnidx == last",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4036.75,
        "y": 3353.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "95cc5926.bc205",
                "51ef39f3.21a02"
            ]
        ]
    },
    {
        "id": "95cc5926.bc205",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4221.75,
        "y": 3354.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "7a243a1b.dc43dc"
            ]
        ]
    },
    {
        "id": "51ef39f3.21a02",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4240.75,
        "y": 3620.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "d80d30d2.312238"
            ]
        ]
    },
    {
        "id": "5262e36b.131f54",
        "type": "save",
        "name": "save connectivity-B relationship to vpn-binding-B, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.connectivity-domainB-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.connectivity-domainB-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4651.75,
        "y": 3355.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "fe37c597.d52ae8",
        "type": "execute",
        "name": "execute UUID generator for connectivity domain otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"uuid.connectivity-otnidx-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 4725.75,
        "y": 3653.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "f1eb5c8d.f0efd",
        "type": "save",
        "name": "save connectivity resource in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='connectivity' \n      key='connectivity.connectivity-id = $uuid.connectivity-otnidx-uuid'>\n<parameter name='connectivity-id' value='`$uuid.connectivity-otnidx-uuid`' />\n<!--<parameter name='etht-svc-name' value='`$prop.ethernet-service-name`' />-->\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<!--<parameter name='access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<!--<parameter name='access-ltp-id' value='``' />-->\n<!--<parameter name='cvlan' value='`$tmp.aai.network-route-A.logical-interface-id`' />-->\n\n<!--<parameter name='bandwidth-profile-name' value='`$prop.sotn.etht-svc-name`' />-->\n<parameter name='bandwidth-profile-name' value='`$gfp`' />\n<parameter name='vpn-type' value='dummy' />\n<parameter name='cir' value='`$gfp *1000000`' />\n<parameter name='eir' value='`$gfp *1000000`' />\n<!--<parameter name='cbs' value='`$prop.sotn.cbs`' />-->\n<!--<parameter name='ebs' value='`$prop.sotn.ebs`' />-->\n<!--<parameter name='color-aware' value='`$prop.sotn.colorAware`' />-->\n<!--<parameter name='coupling-flag' value='`$prop.sotn.couplingFlag`' />-->\n<!--<parameter name='etht-svc-name' value='`$prop.sotn.etht-svc-name`' />-->\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n<parameter name='connectivity-selflink' value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $prop.sotn.network-id  + '/network-data/'` \" />\n",
        "comments": "",
        "outputs": 1,
        "x": 4661.75,
        "y": 3704.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "269da2fb.91d39e",
        "type": "save",
        "name": "save TNNSSI (transport service instance) relationship to connectivity in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' \n      key='service-instance.service-instance-id = $vnf-topology-operation-input.service-information.service-instance-id\n         AND customer.global-customer-id = $vnf-topology-operation-input.service-information.global-customer-id \n         AND service-subscription.service-type = $vnf-topology-operation-input.service-information.subscription-service-type' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />\n\n\n<!--<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='service-instance:relationship-list' -->\n<!--      key='service-instance.service-instance-id = $service-data.service-information.service-instance-id -->\n<!--         AND customer.global-customer-id = $service-data.networks.network[$nidx].network-data.service-information.global-customer-id -->\n<!--         AND service-subscription.service-type = $service-data.networks.network[$nidx].network-data.service-information.subscription-service-type' -->\n<!--      force=\"true\" pfx=\"tmp.AnAI-data\">-->\n<!--<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $prop.sotn.network-id`\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />-->\n<!--<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$prop.sotn.network-id`\" />-->",
        "comments": "",
        "outputs": 1,
        "x": 4790.75,
        "y": 3754.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "72735598.b392e4",
        "type": "comment",
        "name": "connectivity has not been created for middle domains, so we have to create one",
        "info": "",
        "comments": "",
        "x": 4800.75,
        "y": 3597.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "c95e91b6.ee604",
        "type": "save",
        "name": "save connectivity-otnidx relationship to vpn-binding-otnidx, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-otnidx-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-otnidx-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-otnidx-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4758.75,
        "y": 3813.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "d80d30d2.312238",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4397.75,
        "y": 3621.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "fe37c597.d52ae8",
                "f1eb5c8d.f0efd",
                "269da2fb.91d39e",
                "c95e91b6.ee604",
                "e869dcfa.21d6a"
            ]
        ]
    },
    {
        "id": "632d67d8.477b4",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3229.75,
        "y": 2573.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "7555fbf6.cdbdcc",
                "509c5188.74c83",
                "6602c404.9c0314",
                "a7981473.cca18",
                "67f8bed4.589038",
                "84f21d5d.cb936",
                "cf841c7f.9aedb"
            ]
        ]
    },
    {
        "id": "355e2bbf.8d08b4",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n\n",
        "comments": "",
        "x": 4275.75,
        "y": 3169.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "5e65478a.e55ec8",
        "type": "execute",
        "name": "execute RestApiCallNode domainA UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainA.eth-network-id + '/node=' + $tmp.src.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.src.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainA.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4328.75,
        "y": 3213.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "6aa94454.63c71c",
                "8b32fc97.557eb"
            ]
        ]
    },
    {
        "id": "8b32fc97.557eb",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4599.75,
        "y": 3198.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "25abbf8d.056b1"
            ]
        ]
    },
    {
        "id": "6aa94454.63c71c",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4597.750213623047,
        "y": 3256.74990940094,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "e943d471.fc5ba"
            ]
        ]
    },
    {
        "id": "25abbf8d.056b1",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI Coloring for domain A\" />\n",
        "comments": "",
        "x": 4739.750247955322,
        "y": 3198.7500009536743,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "e943d471.fc5ba",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4745.77725982666,
        "y": 3247.495394706726,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "8b66f50b.a495e",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4011.75,
        "y": 3115.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "e45b6160.4b64a",
                "355e2bbf.8d08b4"
            ]
        ]
    },
    {
        "id": "7a243a1b.dc43dc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4355.75,
        "y": 3355.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "5262e36b.131f54",
                "74f9fcf1.d739a4"
            ]
        ]
    },
    {
        "id": "74f9fcf1.d739a4",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n\n",
        "comments": "",
        "x": 4575.75,
        "y": 3399.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "14bf600d.e67a7",
        "type": "execute",
        "name": "execute RestApiCallNode domainB UNI Coloring",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.ts-coloring-uni-port.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.url + '/restconf/data/ietf-network:networks/network=' + $tmp.domainB.eth-network-id + '/node=' + $tmp.dst.pnf-name + '/ietf-network-topology:termination-point=' + $tmp.dst.ltpId + '/ietf-te-topology:te' `\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.domainB.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"patch\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
        "comments": "",
        "outputs": 1,
        "x": 4626.75,
        "y": 3443.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "b9df2951.d6312",
                "2675c857.253648"
            ]
        ]
    },
    {
        "id": "2675c857.253648",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4889.75,
        "y": 3423.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "ee37ae98.df0788"
            ]
        ]
    },
    {
        "id": "b9df2951.d6312",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4890.750213623047,
        "y": 3474.74990940094,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "6b1e1b93.fd4064"
            ]
        ]
    },
    {
        "id": "ee37ae98.df0788",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing UNI coloring for domain B\" />\n",
        "comments": "",
        "x": 5029.750247955322,
        "y": 3423.7500009536743,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "6b1e1b93.fd4064",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5035.77725982666,
        "y": 3472.495394706726,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "e869dcfa.21d6a",
        "type": "set",
        "name": "set attachment_param domain otnidx",
        "xml": "<set>\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "x": 4672.75,
        "y": 3873.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "7226b3cc.67998c",
        "type": "save",
        "name": "get all-vpn-bindings from aai",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vpn-bindings\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v21/network/vpn-bindings\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"tmp.aai.all-vpn-bindings\" >\n",
        "comments": "",
        "outputs": 1,
        "x": 1991.75,
        "y": 4220.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "afb2b4e.a4009c8",
                "c2c67e99.895238",
                "f60b7df.b2997"
            ]
        ]
    },
    {
        "id": "afb2b4e.a4009c8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2179.75,
        "y": 4233.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "81feb431.c2cd38"
            ]
        ]
    },
    {
        "id": "c2c67e99.895238",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2180.240966796875,
        "y": 4279.324035644531,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "63caf3db.7d3514"
            ]
        ]
    },
    {
        "id": "f60b7df.b2997",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2177.75,
        "y": 4322.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "bc2cc67c.a26e68"
            ]
        ]
    },
    {
        "id": "81feb431.c2cd38",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 2352.75,
        "y": 4231.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "799860e4.4d402"
            ]
        ]
    },
    {
        "id": "63caf3db.7d3514",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.l3vpn.pe1_id`\" />\n\n",
        "comments": "",
        "x": 2342.8123779296875,
        "y": 4279.609771728516,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "bc2cc67c.a26e68",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n<parameter name='error-code' value='' />\n<parameter name='error-message' value='' />\n",
        "comments": "",
        "x": 2344.75,
        "y": 4321.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "e9edd1fa.062c48",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='dmnsidx' start='0' end='`$otn-tunnel-slice_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 1980.75,
        "y": 4411.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "213a40e6.50fa5"
            ]
        ]
    },
    {
        "id": "ef976188.656f28",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2790.75,
        "y": 4411.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "17b05ad0.008d15"
            ]
        ]
    },
    {
        "id": "21007b2.f080e84",
        "type": "for",
        "name": "for vidx..tmp.otninfo_length[]",
        "xml": "<for index='stunidx' start='0' end='`$otn-tunnel-slice[$dmnsidx].list_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2562.75,
        "y": 4411.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "ef976188.656f28"
            ]
        ]
    },
    {
        "id": "51229269.4b1c8c",
        "type": "set",
        "name": "set providerValue",
        "xml": "<set>\n<parameter name='providerValue' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].access-provider-id`' />\n<parameter name='found' value='false' />\n\n\n",
        "comments": "",
        "x": 3682.75,
        "y": 4178.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "35c690e7.fe6c",
        "type": "set",
        "name": "set",
        "xml": "<set>\n<parameter name='testingvalue' value='$tmp.otninfo_length -1' />\n",
        "comments": "",
        "x": 3984.75,
        "y": 3304.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "98fe960.02a01e8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3819.75,
        "y": 3279.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "35c690e7.fe6c",
                "a6856d07.c2a888"
            ]
        ]
    },
    {
        "id": "50d31847.5f509",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='tmp.arr_length' value='0' />\n\n<parameter name='otn-tunnel-slice' value='' />\n<parameter name='otn-tunnel-slice_length' value='0' />\n\n<!--<parameter name='tmp.slicevpns' value='' />-->\n<!--<parameter name='tmp.slicevpns_length' value='0' />-->\n\n<!--<parameter name='tmp.slicevpnuuids' value='' />-->\n<!--<parameter name='tmp.slicevpnuuids.' value='' />-->\n\n\n",
        "comments": "",
        "x": 1939.75,
        "y": 295.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "799860e4.4d402",
        "type": "for",
        "name": "for vpnidx in all-vpn-bindings",
        "xml": "<for index='vpnbidx' start='0' end='`$tmp.aai.all-vpn-bindings.vpn-binding_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 2581.75,
        "y": 4232.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "abc14f3.125f83"
            ]
        ]
    },
    {
        "id": "abc14f3.125f83",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2796.75,
        "y": 4233.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "cf481547.940d"
            ]
        ]
    },
    {
        "id": "22357a40.6f5826",
        "type": "for",
        "name": "for arridx in tmp.arr",
        "xml": "<for index='arridx' start='0' end='`$tmp.arr_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4249.75,
        "y": 4153.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "6890c215.76779c"
            ]
        ]
    },
    {
        "id": "a03f6736.1a323",
        "type": "switchNode",
        "name": "switch $tmp.arr_length != 0",
        "xml": "<switch test='`$tmp.arr_length != 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3715.75,
        "y": 4233.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "9db4f6d6.d9ce7",
                "6099e33b.8b2e7c"
            ]
        ]
    },
    {
        "id": "9db4f6d6.d9ce7",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3911.75,
        "y": 4203.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "6cbffd71.0d955c"
            ]
        ]
    },
    {
        "id": "6099e33b.8b2e7c",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3912.75,
        "y": 4274.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "cb3a25fd.09afe8"
            ]
        ]
    },
    {
        "id": "6cbffd71.0d955c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4062.75,
        "y": 4201.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "22357a40.6f5826",
                "691995c9.4a5b7c"
            ]
        ]
    },
    {
        "id": "6890c215.76779c",
        "type": "switchNode",
        "name": "switch tmp.arr[$arridx] == $providerValue",
        "xml": "<switch test='`$tmp.arr[$arridx] == $providerValue`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4540.75,
        "y": 4153.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "31547cc0.03bc84",
                "df9fb700.28a918"
            ]
        ]
    },
    {
        "id": "31547cc0.03bc84",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4815.75,
        "y": 4122.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "bf755b2.9db4a28"
            ]
        ]
    },
    {
        "id": "df9fb700.28a918",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4816.75,
        "y": 4193.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "7fbeef42.b23dd"
            ]
        ]
    },
    {
        "id": "bf755b2.9db4a28",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4966.75,
        "y": 4120.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "a9bad327.3607d8",
                "47f11e50.783bc8",
                "c8d8ebb6.b093d8",
                "aab03464.9d75e",
                "aa4f54f.319aaa8"
            ]
        ]
    },
    {
        "id": "a9bad327.3607d8",
        "type": "set",
        "name": "set found to true",
        "xml": "<set>\n<parameter name='found' value='true' />\n\n\n",
        "comments": "",
        "x": 5154.75,
        "y": 4080.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "47f11e50.783bc8",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 5226.75,
        "y": 4125.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "aa4f54f.319aaa8",
        "type": "set",
        "name": "set twoD arr",
        "xml": "<set>\n\n<!--<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />-->\n<!--<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />-->\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx].list[$sizeOfSliceList].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<!--<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />-->\n<parameter name='`otn-tunnel-slice[$arridx].list_length`' value='`$sizeOfSliceList + 1`' />\n\n",
        "comments": "",
        "x": 5141.75,
        "y": 4252.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "aab03464.9d75e",
        "type": "set",
        "name": "set sizeOfSliceList",
        "xml": "<set>\n<parameter name='sizeOfSliceList' value='`$otn-tunnel-slice[$arridx].list_length`' />\n\n\n",
        "comments": "",
        "x": 5162.75,
        "y": 4188.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "cb3a25fd.09afe8",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4064.75,
        "y": 4274.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "6bbef268.dd7bec",
                "a07fd57f.628ce8"
            ]
        ]
    },
    {
        "id": "6bbef268.dd7bec",
        "type": "save",
        "name": "store $arridx somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='0' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4319.75,
        "y": 4267.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "a07fd57f.628ce8",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='tmp.arr[0]' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='1' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[0].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[0].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[0].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[0].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='1' />\n<parameter name='otn-tunnel-slice[0].list_length' value='1' />\n\n",
        "comments": "",
        "x": 4247.75,
        "y": 4314.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "691995c9.4a5b7c",
        "type": "switchNode",
        "name": "switch found?",
        "xml": "<switch test='`$found`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4240.75,
        "y": 4198.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "62e3ceb.ffa193",
                "b6d5bce1.09744"
            ]
        ]
    },
    {
        "id": "62e3ceb.ffa193",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4400.75,
        "y": 4190.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "1a17890a.8f540f"
            ]
        ]
    },
    {
        "id": "b6d5bce1.09744",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4398.75,
        "y": 4227.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "5a545bc0.7dd69c"
            ]
        ]
    },
    {
        "id": "1a17890a.8f540f",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4525.75,
        "y": 4190.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "f0fb3ac4.b3f8f",
        "type": "save",
        "name": "store $arridx+1 somewhere in vpn-binding",
        "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id' >\n<parameter name='vpn-id' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='vpn-type' value='`$arridx + 1`' />\n\n\n",
        "comments": "",
        "outputs": 1,
        "x": 4832.75,
        "y": 4248.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "5a545bc0.7dd69c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 4558.75,
        "y": 4235.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "f0fb3ac4.b3f8f",
                "bad15fff.31fcb8"
            ]
        ]
    },
    {
        "id": "bad15fff.31fcb8",
        "type": "set",
        "name": "set twoD array",
        "xml": "<set>\n<parameter name='`tmp.arr[$arridx + 1]`' value='`$providerValue`' />\n<parameter name='tmp.arr_length' value='`$tmp.arr_length + 1`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].request-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-source-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].otn-dest-node`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-node-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].bw-odu`' value=\"`'0,' + $gfp`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].src-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].src-access-ltp-id`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].dst-ttp-id`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].dst-access-ltp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainurl`' value=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-region`\" />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainuser`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-description`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list[0].domainpassword`' value='`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-platform`' />\n\n<parameter name='otn-tunnel-slice_length' value='`$arridx + 2`' />\n<parameter name='`otn-tunnel-slice[$arridx + 1].list_length`' value='1' />\n\n",
        "comments": "",
        "x": 4749.75,
        "y": 4294.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "7fbeef42.b23dd",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4949.75,
        "y": 4192.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "c8d8ebb6.b093d8",
        "type": "break",
        "name": "break",
        "xml": "<break>\n",
        "comments": "",
        "x": 5120.75,
        "y": 4319.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "a7981473.cca18",
        "type": "switchNode",
        "name": "switch dstPort == NULL",
        "xml": "<switch test=\"`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id == ''`\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3521.75,
        "y": 2577.7501220703125,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "c33d9535.8046e8",
                "63062baf.1fbb34"
            ]
        ]
    },
    {
        "id": "c33d9535.8046e8",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3891.75,
        "y": 2538.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "45a9cb43.516104"
            ]
        ]
    },
    {
        "id": "63062baf.1fbb34",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3892.75,
        "y": 2584.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "f89446bd.e3f558"
            ]
        ]
    },
    {
        "id": "45a9cb43.516104",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n",
        "comments": "",
        "x": 4105.75,
        "y": 2537.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "f89446bd.e3f558",
        "type": "set",
        "name": "set access-provider-id and client-id",
        "xml": "<set>\n<parameter name='tmp.access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />\n<parameter name='tmp.access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />\n<parameter name='tmp.access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />\n<parameter name='tmp.srcdstpnf-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />\n",
        "comments": "",
        "x": 4103.75,
        "y": 2582.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "17b05ad0.008d15",
        "type": "set",
        "name": "set attachment_param sliceG",
        "xml": "<set>\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].request-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].request-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-source-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-source-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].otn-dest-node`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].otn-dest-node`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].bw-odu`' value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].bw-odu`\" />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].src-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].src-ttp-id`' />\n<parameter name='`otn-tunnel-sliceG-list[$stunidx].dst-ttp-id`' value='`$otn-tunnel-slice[$dmnsidx].list[$stunidx].dst-ttp-id`' />\n<parameter name='slice-instance-id' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n<parameter name='otn-tunnel-sliceG-list_length' value='`$stunidx + 1`' />\n\n\n<parameter name=\"tmp.domainG.restapiUrl\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainurl`\" />\n<parameter name=\"tmp.domainG.restapiUser\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainuser`\" />\n<parameter name=\"tmp.domainG.restapiPassword\" value=\"`$otn-tunnel-slice[$dmnsidx].list[$stunidx].domainpassword`\" />",
        "comments": "",
        "x": 3043.75,
        "y": 4409.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "7cf6092b.1331b",
        "type": "execute",
        "name": "execute RestApiCallNode sliceG creation domainG",
        "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/' + $prop.restapi.transport-sliceG-list-creation.templatefile`\" />\n<parameter name=\"restapiUrl\" value=\"`$tmp.domainG.restapiUrl + '/restconf/operations/ietf-optical-slice:create-optical-slice'`\" />\n<parameter name=\"restapiUser\" value=\"`$tmp.domainG.restapiUser`\" />\n<parameter name=\"restapiPassword\" value=\"`tmp.domainG.restapiPassword`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"otn-oof\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 2628.75,
        "y": 4517.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "37bbe2d.a04a59e",
                "ec906b95.a9e49"
            ]
        ]
    },
    {
        "id": "ec906b95.a9e49",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2911.75,
        "y": 4497.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "4e96bd46.3d74cc"
            ]
        ]
    },
    {
        "id": "37bbe2d.a04a59e",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2912.750213623047,
        "y": 4548.74990940094,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "9691327c.3cba08"
            ]
        ]
    },
    {
        "id": "4e96bd46.3d74cc",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing slice creation api for domain A\" />\n",
        "comments": "",
        "x": 3051.7502479553223,
        "y": 4497.750000953674,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "9691327c.3cba08",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 3057.77725982666,
        "y": 4546.495394706726,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "67f8bed4.589038",
        "type": "set",
        "name": "set srcdstpnf-name",
        "xml": "<set>\n<parameter name='tmp.srcdstpnf-name' value=\"`'networkId-providerId-' + \n                                             $tmp.access-provider-id + '-clientId-' +\n                                             $tmp.access-client-id + '-topologyId-' + \n                                             $tmp.access-topology-id + '-nodeId-' + \n                                             $tmp.srcdstpnf-id`\" />\n\n",
        "comments": "",
        "x": 3701.75,
        "y": 2651.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "84f21d5d.cb936",
        "type": "get-resource",
        "name": "get-resource tmp.srcdstpnf-name",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"pnf\" \n\t\tkey=\"pnf.pnf-name = $tmp.srcdstpnf-name\"\n        pfx='tmp.aai.srcdst-pnf' local-only='false' >\n\n        <!--AND depth = '0'\"-->\n",
        "comments": "",
        "outputs": 1,
        "x": 3745.75,
        "y": 2699.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "843896b4.ca2438",
                "ac8c03cf.0b987",
                "317bf09e.750c58"
            ]
        ]
    },
    {
        "id": "843896b4.ca2438",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3958.25,
        "y": 2646.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "6887d40d.f6aafc"
            ]
        ]
    },
    {
        "id": "ac8c03cf.0b987",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3970.25,
        "y": 2696.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "1adffb9b.f04b4c"
            ]
        ]
    },
    {
        "id": "317bf09e.750c58",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3961.25,
        "y": 2751.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "1d79ff10.1f9c61"
            ]
        ]
    },
    {
        "id": "1d79ff10.1f9c61",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4106.25,
        "y": 2750.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "1adffb9b.f04b4c",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 4117.25,
        "y": 2693.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "6887d40d.f6aafc",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4083.6324462890625,
        "y": 2640.4056701660156,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "b8e05e44.e79d2"
            ]
        ]
    },
    {
        "id": "9d661556.4c1148",
        "type": "outcome",
        "name": "esr-thirdparty-sdnc",
        "xml": "<outcome value='esr-thirdparty-sdnc'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4642.75,
        "y": 2658.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "2a2f98dd.6349d"
            ]
        ]
    },
    {
        "id": "2a2f98dd.6349d",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 4819.75,
        "y": 2650.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "8fec35b6.fb7118",
                "8057ed3d.b8b71"
            ]
        ]
    },
    {
        "id": "b8e05e44.e79d2",
        "type": "for",
        "name": "for each relationship",
        "xml": "<for silentFailure='true' index='spvidx' start='0' end='`$tmp.aai.srcdst-pnf.relationship-list.relationship_length`' >\n",
        "comments": "",
        "outputs": 1,
        "x": 4244.75,
        "y": 2654.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "20794f9a.c05a58"
            ]
        ]
    },
    {
        "id": "20794f9a.c05a58",
        "type": "switchNode",
        "name": "switch related-to",
        "xml": "<switch test='`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].related-to`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4439.75,
        "y": 2654.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "9d661556.4c1148"
            ]
        ]
    },
    {
        "id": "8057ed3d.b8b71",
        "type": "execute",
        "name": "get esr-thirdparty-sdnc",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = $tmp.domainG.esr-thirdparty-id AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.domainG.esr-thirdparty-sdnc' local-only='false' >",
        "comments": "",
        "outputs": 1,
        "x": 5027.75,
        "y": 2657.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "326bc8b9.4e89f8",
                "c42e4071.ccae88",
                "2f974d9f.6edb3a"
            ]
        ]
    },
    {
        "id": "8fec35b6.fb7118",
        "type": "set",
        "name": "set esr-thirdparty-sdnc domainG id",
        "xml": "<set>\n<parameter name='tmp.domainG.esr-thirdparty-id' value=\"`$tmp.aai.srcdst-pnf.relationship-list.relationship[$spvidx].relationship-data[0].relationship-value`\" />\n",
        "comments": "",
        "x": 5057.75,
        "y": 2605.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "326bc8b9.4e89f8",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5237.75,
        "y": 2648.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "bbcf0dbb.ad16f8"
            ]
        ]
    },
    {
        "id": "c42e4071.ccae88",
        "type": "not-found",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5229.75,
        "y": 2703.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "5371f364.6c9824"
            ]
        ]
    },
    {
        "id": "2f974d9f.6edb3a",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 5234.75,
        "y": 2760.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "32c39ad7.59b1f6"
            ]
        ]
    },
    {
        "id": "32c39ad7.59b1f6",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5386.75,
        "y": 2761.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "5371f364.6c9824",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying pnf from AnAI with pnf-name = ' + $prop.connection-attachement.access-node-id`\" />\n\n",
        "comments": "",
        "x": 5397.75,
        "y": 2706.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "bbcf0dbb.ad16f8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 5382.13232421875,
        "y": 2646.4056701660156,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "3a973226.73340e"
            ]
        ]
    },
    {
        "id": "3a973226.73340e",
        "type": "set",
        "name": "set controller domainA data",
        "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.url' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.user' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.domainG.password' value=\"`$tmp.aai.domainG.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n\n\n<!--<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >-->\n<!--<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/restconf/data/ietf-network:networks'`\" />-->\n<!--<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />-->\n<!--<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />-->\n<!--<parameter name=\"format\" value=\"json\"/>-->\n<!--<parameter name=\"httpMethod\" value=\"get\"/>-->\n<!--<parameter name=\"responsePrefix\" value=\"topology\"/>-->\n<!--<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.onap.client.jks\"/>-->\n<!--<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>-->\n<!--<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>-->\n<!--<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>-->\n",
        "comments": "",
        "x": 5596.75,
        "y": 2642.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "213a40e6.50fa5",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2212.75,
        "y": 4409.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "21007b2.f080e84",
                "7cf6092b.1331b"
            ]
        ]
    },
    {
        "id": "cf841c7f.9aedb",
        "type": "switchNode",
        "name": "switch dmnsidx == 0 (domainA)",
        "xml": "<switch test='`$otnidx == 0`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3715.75,
        "y": 2868.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "1b951b0e.92335d",
                "f7aacac2.db3d8"
            ]
        ]
    },
    {
        "id": "1b951b0e.92335d",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3916.75,
        "y": 2866.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "9efec827.a86c9"
            ]
        ]
    },
    {
        "id": "8c34835c.e791b",
        "type": "set",
        "name": "set pce-src-node",
        "xml": "<set>\n<parameter name='tmp.pce-src-node' value='`$tmp.srcdstpnf-name`' />",
        "comments": "",
        "x": 4197.75,
        "y": 2816.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "b7bb7b24.1b292",
        "type": "switchNode",
        "name": "switch dmnsidx == last (domainB)",
        "xml": "<switch test='`$otnidx == $tmp.otninfo_length - 1`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4133.75,
        "y": 2917.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "fd4b8583.fd9098",
                "bed77cd6.05b48"
            ]
        ]
    },
    {
        "id": "fd4b8583.fd9098",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4363.75,
        "y": 2913.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "16a0b639.60baea"
            ]
        ]
    },
    {
        "id": "b96f50fd.127ab8",
        "type": "set",
        "name": "set attachment_param domain B",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />",
        "comments": "",
        "x": 4700.75,
        "y": 2857.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "f7aacac2.db3d8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3916.75,
        "y": 2915.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "b7bb7b24.1b292"
            ]
        ]
    },
    {
        "id": "bed77cd6.05b48",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 4364.75,
        "y": 2959.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "6600d5fa.31b8fc"
            ]
        ]
    },
    {
        "id": "6600d5fa.31b8fc",
        "type": "set",
        "name": "set attachment_param domain G",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 4578.75,
        "y": 2959.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "3048e42b.381204",
        "type": "set",
        "name": "set tmp.slicevpns",
        "xml": "<set>\n<parameter name='`tmp.slicevpns[$tmp.slicevpns_length]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n<parameter name='tmp.slicevpns_length' value=\"`$tmp.slicevpns_length + 1`\" />\n\n<parameter name='`tmp.slicevpnuuids[$prop.vpn-binding-otnidx-uuid]`' value=\"`$prop.vpn-binding-otnidx-uuid`\" />\n\n",
        "comments": "",
        "x": 4476.75,
        "y": 3008.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "cf481547.940d",
        "type": "switchNode",
        "name": "switch vpnuuid is for this slice",
        "xml": "<!--<switch test=\"`$tmp.slicevpnuuids[$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].vpn-id] != '' `\">-->\n\n<!-- Replace vpn-type with slice-id (a new attribbute in the latest AAI) -->\n<switch test=\"`$tmp.aai.all-vpn-bindings.vpn-binding[$vpnbidx].ops-note == $tmp.aai.service-instance.service-instance-id `\">\n\n",
        "comments": "",
        "outputs": 1,
        "x": 3040.75,
        "y": 4232.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "8d7304cc.0aa318",
                "ffcae489.323bb8"
            ]
        ]
    },
    {
        "id": "8d7304cc.0aa318",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3257.75,
        "y": 4211.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "c5705cb.18e75a"
            ]
        ]
    },
    {
        "id": "ffcae489.323bb8",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 3257.75,
        "y": 4260.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "c5705cb.18e75a",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 3425.75,
        "y": 4211.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "51229269.4b1c8c",
                "a03f6736.1a323"
            ]
        ]
    },
    {
        "id": "a574d94d.6c4aa8",
        "type": "set",
        "name": "set attachment_param domain A",
        "xml": "<set>\n<parameter name='tmp.domainG-src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='tmp.domainG-dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />",
        "comments": "",
        "x": 4252.75,
        "y": 2863.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "9efec827.a86c9",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4040.75,
        "y": 2857.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "a574d94d.6c4aa8"
            ]
        ]
    },
    {
        "id": "d2a8a4e9.34f1c8",
        "type": "set",
        "name": "set pce-src-node",
        "xml": "<set>\n<parameter name='tmp.pce-dst-node' value='`$tmp.srcdstpnf-name`' />",
        "comments": "",
        "x": 4652.75,
        "y": 2905.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "16a0b639.60baea",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 4496.75,
        "y": 2889.75,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "b96f50fd.127ab8"
            ]
        ]
    },
    {
        "id": "bf3fdeb7.6e1648",
        "type": "get-resource",
        "name": "get-resource pnfs-list",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"pnfs\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/pnfs?depth=0' depth = 0\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopopnfs\" >",
        "comments": "",
        "outputs": 1,
        "x": 1982.75,
        "y": 154.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "b761fd8.2b6b08",
        "type": "get-resource",
        "name": "get-resource logical-links",
        "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"logical-links\"\n\t    key=\"selflink = 'https://aai.onap:8443/aai/v25/network/logical-links?depth=0'\"\n\t\tlocal-only=\"false\" \n\t\tpfx=\"ccsdkTopologicalLinks\" >",
        "comments": "",
        "outputs": 1,
        "x": 1994.75,
        "y": 195.75,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "a66f6106.d6897",
        "type": "comment",
        "name": "The following two nodes are for PCE",
        "info": "",
        "comments": "",
        "x": 2018.75,
        "y": 117.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "8f7720f3.7aae9",
        "type": "set",
        "name": "set tmp.arr",
        "xml": "<set>\n<parameter name='tmp.arr.' value='' />\n<parameter name='tmp.arridx' value='0' />\n<parameter name='otn-tunnel-slice.' value='' />\n\n\n",
        "comments": "",
        "x": 1939.75,
        "y": 241.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "631d9619.9d9ee",
        "type": "execute",
        "name": "execute printContext",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n    <parameter name=\"filename\" value=\"`$filenamemm`\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 1592.75,
        "y": 2373.7496337890625,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "1cbcaef8.fee281",
        "type": "set",
        "name": "set maxtpn",
        "xml": "<set>\n<parameter name='maxtpn' value='`($maxtpn + $gfp)`' />",
        "comments": "",
        "x": 3656.75,
        "y": 3056.75,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "c3b37174.45567",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-find-maximum-used-tpn",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-find-maximum-used-tpn' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1791.75,
        "y": 2421.7498779296875,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "348e2352.849ddc",
        "type": "switchNode",
        "name": "switch src and dst same domain?",
        "xml": "<switch test=\"`$param-prefix-domainA[$param-prefix-domainA_length -9] == $param-prefix-domainB[$param-prefix-domainB_length -9]`\">\n    \n    `\n\n",
        "comments": "",
        "outputs": 1,
        "x": 1607.3334350585938,
        "y": 2483.3336181640625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "4a5bbbb8.21f4f4",
                "f0483d5d.c65838"
            ]
        ]
    },
    {
        "id": "4a5bbbb8.21f4f4",
        "type": "outcomeTrue",
        "name": "true",
        "xml": "<outcome value='true'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1802.3333129882812,
        "y": 2597.3336181640625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "277d2781.ec4fb8"
            ]
        ]
    },
    {
        "id": "f0483d5d.c65838",
        "type": "outcomeFalse",
        "name": "false",
        "xml": "<outcome value='false'>\n",
        "comments": "",
        "outputs": 1,
        "x": 1821.3333740234375,
        "y": 2496.33349609375,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "69fab2f3.f4d724"
            ]
        ]
    },
    {
        "id": "69fab2f3.f4d724",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='tsli-vnf-topology-operation-get-otn-tunnel-path-from-oof' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2228.6668701171875,
        "y": 2502.6666259765625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "41433a02.61754c"
            ]
        ]
    },
    {
        "id": "277d2781.ec4fb8",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 1952.666748046875,
        "y": 2597.6666259765625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "db17525b.9cda9",
                "98634dfa.681d6",
                "59852974.659be",
                "f9710261.9f9158"
            ]
        ]
    },
    {
        "id": "41433a02.61754c",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic='true'>",
        "atomic": "true",
        "comments": "",
        "outputs": 1,
        "x": 2655,
        "y": 2502.3336181640625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "cca04ac5.91465"
            ]
        ]
    },
    {
        "id": "db17525b.9cda9",
        "type": "execute",
        "name": "execute UUID generator for vpn-binding $otnidx",
        "xml": "<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='generateUUID' >\n<parameter name=\"ctx-destination\" value=\"prop.vpn-binding-samedomain-uuid\"/>\n",
        "comments": "",
        "outputs": 1,
        "x": 2236.6666259765625,
        "y": 2603.33349609375,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "98634dfa.681d6",
        "type": "set",
        "name": "set attachment_param Same Domain",
        "xml": "<set>\n<parameter name='tmp.sameDomain-src-access-node-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -3]`' />\n<parameter name='tmp.sameDomain-dst-access-node-id' value='`$param-prefix-domainB[$param-prefix-domainB_length -3]`' />\n",
        "comments": "",
        "x": 2204.6666259765625,
        "y": 2663.66650390625,
        "z": "265dc029.a18eb8",
        "wires": []
    },
    {
        "id": "59852974.659be",
        "type": "save",
        "name": "save vpn-binding same domain resource (aka. OTN) in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-samedomain-uuid' >\n<parameter name='vpn-id' value='`$prop.vpn-binding-samedomain-uuid`' />\n<parameter name='vpn-name' value='`$prop.otn-tunnel-name`' />\n<!--<parameter name='customer-vpn-id' value='`($idx + 1) * 10`' />-->\n<parameter name='customer-vpn-id' value='`($maxtpn + $gfp)`' />\n<!--<parameter name='access-provider-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-provider-id`' />-->\n<parameter name='access-provider-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -9]`' />\n<!--<parameter name='access-client-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-client-id`' />-->\n<parameter name='access-client-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -7]`' />\n<!--<parameter name='access-topology-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-topology-id`' />-->\n<parameter name='access-topology-id' value='`$param-prefix-domainA[$param-prefix-domainA_length -5]`' />\n<!--<parameter name='src-access-node-id' value='`$tmp.otninfo[$otnidx].srcPort.src-access-node-id`' />-->\n<parameter name='src-access-node-id' value='`$tmp.sameDomain-src-access-node-id`' />\n<!--<parameter name='src-access-ltp-id' value='`$tmp.otninfo[$otnidx].srcPort.src-tunnel-tp-id`' />-->\n<!--<parameter name='dst-access-node-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-access-node-id`' />-->\n<parameter name='dst-access-node-id' value='`$tmp.sameDomain-dst-access-node-id`' />\n<!--<parameter name='dst-access-ltp-id' value='`$tmp.otninfo[$otnidx].dstPort.dst-tunnel-tp-id`' />-->\n<parameter name='route-distinguisher' value='`$gfp`' />\n<parameter name='operational-status' value='Created' />\n<!--<parameter name='model-customization-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-customization-uuid`' />-->\n<!--<parameter name='model-invariant-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-invariant-uuid`' />-->\n<!--<parameter name='model-version-id' value='`$network-topology-operation-input.network-information.onap-model-information.model-uuid`' />-->\n\n\n<parameter name='vpn-region' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.url`' />\n<parameter name='vpn-description' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.user`' />\n<parameter name='vpn-platform' value='`$prop.sdncRestApi.thirdpartySdnc.domainG.password`' />\n\n<!-- The following line is in lieu of vpn-binding.slice-id (new attribute in latest AAI) -->\n<parameter name='ops-note' value='`$tmp.aai.service-instance.service-instance-id`' />\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2269.9998779296875,
        "y": 2719.66650390625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "733c1bcc.d90d64"
            ]
        ]
    },
    {
        "id": "733c1bcc.d90d64",
        "type": "success",
        "name": "success",
        "xml": "<outcome value='success'>\n",
        "comments": "",
        "outputs": 1,
        "x": 2586.9998779296875,
        "y": 2721.66650390625,
        "z": "265dc029.a18eb8",
        "wires": [
            [
                "c2cbdd5e.c4e688"
            ]
        ]
    },
    {
        "id": "c2cbdd5e.c4e688",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 2750.4998779296875,
        "y": 2720.92041015625,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "9bdaad5a.e56e08",
        "type": "call",
        "name": "call GENERIC-RESOURCE-API:p2p-vnf-topology-operation-p2p-activate",
        "xml": "<call module='GENERIC-RESOURCE-API' rpc='p2p-vnf-topology-operation-p2p-activate' mode='sync' >\n\n",
        "comments": "",
        "outputs": 1,
        "x": 2186.666748046875,
        "y": 4145.3330078125,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    },
    {
        "id": "f9710261.9f9158",
        "type": "save",
        "name": "save connectivity-domainA relationship to vpn-binding-sameDomain, in AAI",
        "xml": "<save plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='vpn-binding:relationship-list' \n      key='vpn-binding.vpn-id = $prop.vpn-binding-samedomain-uuid' \n      force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"relationship-list.relationship[0].related-to\" value=\"connectivity\" />\n<parameter name=\"relationship-list.relationship[0].related-link\" value=\"`'/network/connectivities/connectivity/' + $uuid.connectivity-domainA-uuid`\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-key\" value=\"connectivity.connectivity-id\" />\n<parameter name=\"relationship-list.relationship[0].relationship-data[0].relationship-value\" value=\"`$uuid.connectivity-domainA-uuid`\" />",
        "comments": "",
        "outputs": 1,
        "x": 2318.666259765625,
        "y": 2774.333251953125,
        "z": "265dc029.a18eb8",
        "wires": [
            []
        ]
    }
]