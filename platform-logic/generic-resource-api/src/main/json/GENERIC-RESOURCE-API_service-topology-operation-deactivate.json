[
    {
        "id": "604b70a8.30f9f",
        "type": "switchNode",
        "name": "switch request-action",
        "xml": "<switch test='`$service-topology-operation-input.request-information.request-action`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 536.1904602050781,
        "y": 314.5237846374512,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "9c181b3f.092838",
                "2760d61f.58392a"
            ]
        ]
    },
    {
        "id": "9c181b3f.092838",
        "type": "outcome",
        "name": "DeleteServiceInstance",
        "xml": "<outcome value='DeleteServiceInstance'>\n",
        "comments": "",
        "outputs": 1,
        "x": 773.3332748413086,
        "y": 288.80949306488037,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "1a68151d.2ac4eb"
            ]
        ]
    },
    {
        "id": "2760d61f.58392a",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 723.3332405090332,
        "y": 334.5238208770752,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "a78d0f9e.d329f"
            ]
        ]
    },
    {
        "id": "1a68151d.2ac4eb",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 951.9047317504883,
        "y": 288.8095283508301,
        "z": "62cfcbc6.1804e4",
        "wires": [
            []
        ]
    },
    {
        "id": "a78d0f9e.d329f",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'deactivate' then request-action must be 'DeleteServiceInstance'\" />\n",
        "comments": "",
        "x": 969.0475769042969,
        "y": 334.5237846374512,
        "z": "62cfcbc6.1804e4",
        "wires": []
    },
    {
        "id": "ee30906.f78157",
        "type": "block",
        "name": "block : atomic",
        "xml": "<block atomic=\"true\">",
        "atomic": "true",
        "outputs": 1,
        "x": 262.1427879333496,
        "y": 405.2380313873291,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "604b70a8.30f9f",
                "b7ce906b.bd1c6",
                "6b83ed66.08c724",
                "415b774b.0e0bf8",
                "388700f9.d2aff"
            ]
        ]
    },
    {
        "id": "d424f27.d8ceb1",
        "type": "dgstart",
        "name": "DGSTART",
        "outputs": 1,
        "x": 99.99999237060547,
        "y": 81.66666412353516,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "e272ce64.f9ac"
            ]
        ]
    },
    {
        "id": "e272ce64.f9ac",
        "type": "service-logic",
        "name": "GENERIC-RESOURCE-API ${project.version}",
        "module": "GENERIC-RESOURCE-API",
        "version": "${project.version}",
        "comments": "",
        "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
        "outputs": 1,
        "x": 175.28569793701172,
        "y": 121.90477561950684,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "f939e6bb.1b9ce8"
            ]
        ]
    },
    {
        "id": "f939e6bb.1b9ce8",
        "type": "method",
        "name": "method service-topology-operation-deactivate",
        "xml": "<method rpc='service-topology-operation-deactivate' mode='sync'>\n",
        "comments": "",
        "outputs": 1,
        "x": 216.09528350830078,
        "y": 163.33332443237305,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "ee30906.f78157"
            ]
        ]
    },
    {
        "id": "d253a6a8.6c8668",
        "type": "comment",
        "name": "service-topology-operation-deactivate",
        "info": "",
        "comments": "",
        "x": 494.3448486328125,
        "y": 29.253007888793945,
        "z": "62cfcbc6.1804e4",
        "wires": []
    },
    {
        "id": "b7ce906b.bd1c6",
        "type": "switchNode",
        "name": "switch service-data service-instance-id",
        "xml": "<switch test='`$service-data.service-topology.service-topology-identifier.service-instance-id`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 591.6666564941406,
        "y": 239.7618865966797,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "fbf7b015.33a16"
            ]
        ]
    },
    {
        "id": "fbf7b015.33a16",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 821.4285621643066,
        "y": 239.76190662384033,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "a2f01f45.35d09"
            ]
        ]
    },
    {
        "id": "a2f01f45.35d09",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"404\" />\n    <parameter name=\"error-message\" value=\"`'Service ' + $service-topology-operation-input.service-information.service-instance-id + ' is not found'`\" />\n",
        "comments": "",
        "x": 977.1428070068359,
        "y": 239.76190185546875,
        "z": "62cfcbc6.1804e4",
        "wires": []
    },
    {
        "id": "6b83ed66.08c724",
        "type": "update",
        "name": "update AAI service instance",
        "xml": "<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"service-instance\" \n\t\tkey=\"customer.global-customer-id = $service-data.service-topology.service-topology-identifier.global-customer-id AND\n\t\t\tservice-subscription.service-type = $service-data.service-topology.service-topology-identifier.service-type AND\n\t\t\tservice-instance.service-instance-id = $service-topology-operation-input.service-information.service-instance-id\"\n        pfx='pfx' local-only='false' force='false'>\n\t<parameter name=\"orchestration-status\" value=\"PendingDelete\" />\n",
        "comments": "",
        "outputs": 1,
        "x": 557.9523620605469,
        "y": 524.7619037628174,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "1a658f52.90fe91",
                "7fbd10da.9b854"
            ]
        ]
    },
    {
        "id": "1a658f52.90fe91",
        "type": "failure",
        "name": "failure",
        "xml": "<outcome value='failure'>\n",
        "comments": "",
        "outputs": 1,
        "x": 770.7142295837402,
        "y": 500.0000581741333,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "ec560782.dd0478"
            ]
        ]
    },
    {
        "id": "ec560782.dd0478",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"AAI failed\" />\n",
        "comments": "",
        "x": 920.7141952514648,
        "y": 500.00013637542725,
        "z": "62cfcbc6.1804e4",
        "wires": []
    },
    {
        "id": "7fbd10da.9b854",
        "type": "failure",
        "name": "not-found",
        "xml": "<outcome value='not-found'>\n",
        "comments": "",
        "outputs": 1,
        "x": 777.0236587524414,
        "y": 548.571475982666,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "ca3b7680.173278"
            ]
        ]
    },
    {
        "id": "415b774b.0e0bf8",
        "type": "set",
        "name": "set service-level-oper-status to PendingDelete",
        "xml": "<set>\n<parameter name='service-data.service-level-oper-status.order-status' value='PendingDelete' />\n<parameter name='service-data.service-level-oper-status.last-rpc-action' value='deactivate' />\n<parameter name='service-data.service-level-oper-status.last-action' value='DeleteServiceInstance' />\n",
        "comments": "",
        "x": 613.9523239135742,
        "y": 594.5237979888916,
        "z": "62cfcbc6.1804e4",
        "wires": []
    },
    {
        "id": "ca3b7680.173278",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 904.9999580383301,
        "y": 548.3333377838135,
        "z": "62cfcbc6.1804e4",
        "wires": [
            []
        ]
    },
    {
        "id": "7e175a90.802564",
        "type": "comment",
        "name": "Don't treat this as an error",
        "info": "",
        "comments": "",
        "x": 1080.0000457763672,
        "y": 548.3333177566528,
        "z": "62cfcbc6.1804e4",
        "wires": []
    },
    {
        "id": "388700f9.d2aff",
        "type": "switchNode",
        "name": "switch provided-allotted-resource length",
        "xml": "<switch test='`$service-data.provided-allotted-resources.provided-allotted-resource_length`'>\n",
        "comments": "",
        "outputs": 1,
        "x": 596.6667098999023,
        "y": 408.3333396911621,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "9ed42146.3d389",
                "3c14b3ca.f345ac",
                "40e1d77.09f5028"
            ]
        ]
    },
    {
        "id": "9ed42146.3d389",
        "type": "outcome",
        "name": "NULL",
        "xml": "<outcome value=''>",
        "comments": "",
        "outputs": 1,
        "x": 836.666576385498,
        "y": 409.9999752044678,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "5abdf37a.97301c"
            ]
        ]
    },
    {
        "id": "3c14b3ca.f345ac",
        "type": "other",
        "name": "other",
        "xml": "<outcome value='Other'>\n",
        "comments": "",
        "outputs": 1,
        "x": 836.6666793823242,
        "y": 451.66663360595703,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "55a7bd8c.02e934"
            ]
        ]
    },
    {
        "id": "55a7bd8c.02e934",
        "type": "returnFailure",
        "name": "return failure",
        "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cannot deactivate this service because there are provided allotted resources\" />\n",
        "comments": "",
        "x": 991.6666641235352,
        "y": 454.9999313354492,
        "z": "62cfcbc6.1804e4",
        "wires": []
    },
    {
        "id": "5abdf37a.97301c",
        "type": "block",
        "name": "block",
        "xml": "<block>\n",
        "atomic": "false",
        "comments": "",
        "outputs": 1,
        "x": 973.3332710266113,
        "y": 386.66664123535156,
        "z": "62cfcbc6.1804e4",
        "wires": [
            []
        ]
    },
    {
        "id": "40e1d77.09f5028",
        "type": "outcome",
        "name": "0",
        "xml": "<outcome value='0'>\n",
        "comments": "",
        "outputs": 1,
        "x": 836.666576385498,
        "y": 368.3332872390747,
        "z": "62cfcbc6.1804e4",
        "wires": [
            [
                "5abdf37a.97301c"
            ]
        ]
    }
]
