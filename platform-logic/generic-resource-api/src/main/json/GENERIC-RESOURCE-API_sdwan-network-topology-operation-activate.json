[
  {
    "id": "65a8b91d.24abd8",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 151.00390625,
    "y": 84.99999904632568,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "84123a61.191508"
      ]
    ]
  },
  {
    "id": "84123a61.191508",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 337.00391006469727,
    "y": 157.00001621246338,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "8bfdb728.fd5fb8"
      ]
    ]
  },
  {
    "id": "8bfdb728.fd5fb8",
    "type": "method",
    "name": "method sdwan-network-topology-operation-activate",
    "xml": "<method rpc='sdwan-network-topology-operation-activate' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 325.0040283203125,
    "y": 244.99999904632568,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "61fe5ec.24b3ea"
      ]
    ]
  },
  {
    "id": "61fe5ec.24b3ea",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 499.00392150878906,
    "y": 353.0000581741333,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "1c31cf0.eb62931",
        "3d6bcf7d.5c2b4",
        "55b053ca.9c8fec",
        "efb367a9.777348",
        "faa41b3d.6507b8",
        "25d677c3.3e42d8",
        "eb7cc280.f6366",
        "178920a9.13ec3f",
        "546fc3e9.7052dc",
        "dc4c0558.42daa8",
        "f31fc51b.0a7188",
        "2ab6006d.5b2cc",
        "1a43627f.6e263e",
        "204db58e.69892a",
        "634732f9.1dcf5c",
        "d5289859.e9ecf8"
      ]
    ]
  },
  {
    "id": "1c31cf0.eb62931",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:validate-sdwan-network-input-parameters",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='validate-sdwan-network-input-parameters' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 957.3928070068359,
    "y": 101.99999904632568,
    "z": "8dba42d4.2fc58",
    "wires": [
      []
    ]
  },
  {
    "id": "3d6bcf7d.5c2b4",
    "type": "record",
    "name": "record",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"sdwan-network-topology-operation-activate\"/>\n<parameter name=\"field3\" value=\"SDWAN-Activate\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 757.5595054626465,
    "y": 155.77785205841064,
    "z": "8dba42d4.2fc58",
    "wires": [
      []
    ]
  },
  {
    "id": "55b053ca.9c8fec",
    "type": "set",
    "name": "set networkId and network-object-path",
    "xml": "<set>\n<parameter name='networkId' value='`$network-topology-operation-input.network-information.network-id`' />\n<parameter name=\"network-object-path\" value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $network-topology-operation-input.network-information.network-id  + '/network-data/'` \" />",
    "comments": "",
    "x": 844.5597839355469,
    "y": 1078.3134682178497,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "efb367a9.777348",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 766.3375854492188,
    "y": 1267.8688881397247,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "faa41b3d.6507b8",
    "type": "set",
    "name": "set network-level-oper-status",
    "xml": "<set>\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status' value='Active' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.last-rpc-action' value='`$network-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.last-action' value='`$network-topology-operation-input.request-information.request-action`' />",
    "comments": "",
    "x": 811.4486999511719,
    "y": 1139.53564286232,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "25d677c3.3e42d8",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 789.8616104125977,
    "y": 208.77788829803467,
    "z": "8dba42d4.2fc58",
    "wires": [
      []
    ]
  },
  {
    "id": "eb7cc280.f6366",
    "type": "update",
    "name": "update SDWAN VPN status to AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='sdwan-vpn' \n      key='sdwan-vpn.id = $network-topology-operation-input.network-information.network-id' >\n<parameter name='id' value='`$network-topology-operation-input.network-information.network-id`' />\n<parameter name='operational-status' value='Active' />\n<parameter name='tenanatId' value='`$prop.tenant-id`' />\n<parameter name='vpn-id' value='`$prop.vpn-id`' />",
    "comments": "",
    "outputs": 1,
    "x": 828.6674156188965,
    "y": 1202.2388544082642,
    "z": "8dba42d4.2fc58",
    "wires": [
      []
    ]
  },
  {
    "id": "178920a9.13ec3f",
    "type": "set",
    "name": "set network in service-data",
    "xml": "<set>\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.sdnc-request-header.' value='`$network-topology-operation-input.sdnc-request-header.`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.request-information.' value='`$network-topology-operation-input.request-information.`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.service-information.' value='`$network-topology-operation-input.service-information.`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-information.' value='`$network-topology-operation-input.network-information.`' />",
    "comments": "",
    "x": 805.0043144226074,
    "y": 1025.0913021564484,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "546fc3e9.7052dc",
    "type": "for",
    "name": "for each network-input-parameters",
    "xml": "<for index='idx' start='0' end='`$ctx.network-data.network-request-input.network-input-parameters.param_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 842.00390625,
    "y": 279.00390657782555,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "7343f9f8.91aa58"
      ]
    ]
  },
  {
    "id": "7343f9f8.91aa58",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1098.8373374938965,
    "y": 213.33725771307945,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "8d49b6eb.aacfa8",
        "75ed8e31.a1e03"
      ]
    ]
  },
  {
    "id": "8d49b6eb.aacfa8",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$ctx.network-data.network-request-input.network-input-parameters.param[$idx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1289.8373985290527,
    "y": 209.3372901380062,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "9aed38f3.ef1268"
      ]
    ]
  },
  {
    "id": "9aed38f3.ef1268",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1463.8375244140625,
    "y": 209.33729395270348,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "f86c1bb0.83c838"
      ]
    ]
  },
  {
    "id": "f86c1bb0.83c838",
    "type": "set",
    "name": "set name",
    "xml": "<set>\n<parameter name='prop.name' value='`$ctx.network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 1626.8374099731445,
    "y": 208.9372886121273,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "1a43627f.6e263e",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = 'SDWANController' AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 836.00390625,
    "y": 388.00390657782555,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "1feb8ff6.c06a9",
        "a8710737.3b8c28",
        "e42763ba.ed5ab"
      ]
    ]
  },
  {
    "id": "1feb8ff6.c06a9",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1081.00390625,
    "y": 334.00390657782555,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "4a6a181d.584358"
      ]
    ]
  },
  {
    "id": "a8710737.3b8c28",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1084.494873046875,
    "y": 381.5779422223568,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "e9aab137.64b04"
      ]
    ]
  },
  {
    "id": "e42763ba.ed5ab",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1079.827880859375,
    "y": 422.91125521063805,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "4b35376e.7e4788"
      ]
    ]
  },
  {
    "id": "4a6a181d.584358",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 1278.5039672851562,
    "y": 322.00390657782555,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "e9aab137.64b04",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1261.0662841796875,
    "y": 369.86367830634117,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "4b35376e.7e4788",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1267.6004371643066,
    "y": 418.35044798254967,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "204db58e.69892a",
    "type": "execute",
    "name": "execute RestApiCallNode Get token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
    "comments": "",
    "outputs": 1,
    "x": 844.00390625,
    "y": 499.00390657782555,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "ced0b203.a391b",
        "184980af.bcb96f"
      ]
    ]
  },
  {
    "id": "ced0b203.a391b",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1083.003978729248,
    "y": 477.0039367675781,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "17cfd49c.8c98fb"
      ]
    ]
  },
  {
    "id": "184980af.bcb96f",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1075.253978729248,
    "y": 530.6468200683594,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "2ec37152.e84eee"
      ]
    ]
  },
  {
    "id": "17cfd49c.8c98fb",
    "type": "set",
    "name": "set token-id",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
    "comments": "",
    "x": 1233.00390625,
    "y": 478.00390657782555,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "2ec37152.e84eee",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
    "comments": "",
    "x": 1228.003978729248,
    "y": 530.3968811035156,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "75ed8e31.a1e03",
    "type": "switchNode",
    "name": "switch topology",
    "xml": "<switch test=\"`$ctx.network-data.network-request-input.network-input-parameters.param[$idx].name == 'topology'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1288.25390625,
    "y": 262.00390657782555,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "6c4b55cb.0408ec"
      ]
    ]
  },
  {
    "id": "6c4b55cb.0408ec",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1462.2540321350098,
    "y": 262.0039103925228,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "6d553f1a.6f2d"
      ]
    ]
  },
  {
    "id": "6d553f1a.6f2d",
    "type": "set",
    "name": "set topology",
    "xml": "<set>\n<parameter name='prop.topology' value='`$ctx.network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 1625.2539176940918,
    "y": 261.60390505194664,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "634732f9.1dcf5c",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 765.7539520263672,
    "y": 745.0040283203125,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "f913ba01.d721f8"
      ]
    ]
  },
  {
    "id": "f913ba01.d721f8",
    "type": "execute",
    "name": "execute RestApiCallNode Create network orchestration",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-network-orchestration.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/network-orchestration-resources'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"orchestration-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1086.2540588378906,
    "y": 734.004111289978,
    "z": "8dba42d4.2fc58",
    "wires": [
      []
    ]
  },
  {
    "id": "dc4c0558.42daa8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 768.2539215087891,
    "y": 807.0039566457272,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "fb537bd1.22fa68",
        "e996dfd6.0f7c",
        "81b5cd25.b683d"
      ]
    ]
  },
  {
    "id": "e996dfd6.0f7c",
    "type": "execute",
    "name": "execute RestApiCallNode Create vpn",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-vpn.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/vpn'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1039.7539672851562,
    "y": 797.0040806233883,
    "z": "8dba42d4.2fc58",
    "wires": [
      []
    ]
  },
  {
    "id": "fb537bd1.22fa68",
    "type": "set",
    "name": "set prop.vpn-id and prop.vpn1Id",
    "xml": "<set>\n<parameter name='prop.vpn-id' value='`$vpn-result.success[0].id`' />\n<parameter name='prop.vpn1Id' value='`$vpn-result.success[0].id`' />\n",
    "comments": "",
    "x": 1035.7541236877441,
    "y": 849.0041799545288,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "81b5cd25.b683d",
    "type": "execute",
    "name": "execute RestApiCallNode Create vpn topology",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-vpn-topology.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/' + $prop.vpn-id + '/topology'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1067.2539710998535,
    "y": 901.0039548873901,
    "z": "8dba42d4.2fc58",
    "wires": [
      []
    ]
  },
  {
    "id": "f31fc51b.0a7188",
    "type": "set",
    "name": "set tenant-id to service-data",
    "xml": "<set>\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$network-topology-operation-input.network-request-input.network-input-parameters.param_length].name' value='tenant-id' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$network-topology-operation-input.network-request-input.network-input-parameters.param_length].value' value='`$prop.tenant-id`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param_length' value='`$network-topology-operation-input.network-request-input.network-input-parameters.param_length + 1`' />",
    "comments": "",
    "x": 803.2540588378906,
    "y": 942.7540893554688,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "2ab6006d.5b2cc",
    "type": "get-resource",
    "name": "get-resource service-subscription",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"service-subscription\" \n        key= 'service-subscription.service-type = $service-data.networks.network[$tmp.nidx].network-data.service-information.subscription-service-type \n        AND customer.global-customer-id = $service-data.networks.network[$tmp.nidx].network-data.service-information.global-customer-id'\n      force=\"true\" pfx=\"tmp.AnAI-data\">\n      \n",
    "comments": "",
    "outputs": 1,
    "x": 821.5040435791016,
    "y": 648.2539405822754,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "7a3e9a9e.b5ebe4",
        "beceadfe.18cd7"
      ]
    ]
  },
  {
    "id": "1272bfc5.9264a",
    "type": "switchNode",
    "name": "switch temp-ub-sub-account-id",
    "xml": "<switch test='`$tmp.AnAI-data.temp-ub-sub-account-id`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1233.504135131836,
    "y": 613.0040216445923,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "89f0974b.4d94b8",
        "b024d53.775b128"
      ]
    ]
  },
  {
    "id": "89f0974b.4d94b8",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>",
    "comments": "",
    "outputs": 1,
    "x": 1426.2185859680176,
    "y": 587.0040626525879,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "13ebb7af.038dc8"
      ]
    ]
  },
  {
    "id": "b024d53.775b128",
    "type": "other",
    "name": "Other",
    "xml": "<outcome value='Other'>",
    "comments": "",
    "outputs": 1,
    "x": 1426.504150390625,
    "y": 642.0040254592896,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "fbfaef01.8c56a"
      ]
    ]
  },
  {
    "id": "fbfaef01.8c56a",
    "type": "set",
    "name": "set prop.tenant-id",
    "xml": "<set>\n<parameter name='prop.tenant-id' value='`$tmp.AnAI-data.temp-ub-sub-account-id`' />\n",
    "comments": "",
    "x": 1582.5043258666992,
    "y": 700.0039434432983,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "13ebb7af.038dc8",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1564.2538948059082,
    "y": 588.7539029121399,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "4e788339.2d713c",
        "a323c09d.a8718",
        "93da7d77.20b82",
        "fa0331db.90ed7",
        "b9f4426f.77ac"
      ]
    ]
  },
  {
    "id": "fa0331db.90ed7",
    "type": "set",
    "name": "set prop.customer-id",
    "xml": "<set>\n<parameter name='prop.customer-id' value='`$ctx.network-data.service-information.global-customer-id`' />\n",
    "comments": "",
    "x": 1776.7542114257812,
    "y": 525.7540578842163,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "4e788339.2d713c",
    "type": "execute",
    "name": "execute RestApiCallNode Create tenant",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-tenant.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/baseservice/tenanats'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"tenant-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1837.75390625,
    "y": 602.7539125978947,
    "z": "8dba42d4.2fc58",
    "wires": [
      []
    ]
  },
  {
    "id": "a323c09d.a8718",
    "type": "set",
    "name": "set prop.tenant-id",
    "xml": "<set>\n<parameter name='prop.tenant-id' value='`$tenant-result.data.tenantId`' />\n",
    "comments": "",
    "x": 1787.7541389465332,
    "y": 654.7539834976196,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "93da7d77.20b82",
    "type": "execute",
    "name": "execute RestApiCallNode Create tenant auth",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/baseservice/tenanats/authorization/' + $prop.tenant-id`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"tenant-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1855.254135131836,
    "y": 690.5039834976196,
    "z": "8dba42d4.2fc58",
    "wires": [
      []
    ]
  },
  {
    "id": "b9f4426f.77ac",
    "type": "get-resource",
    "name": "save-resource customer-id in service-subscription",
    "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"service-subscription\" \n        key= 'service-subscription.service-type = $service-data.networks.network[$tmp.nidx].network-data.service-information.subscription-service-type \n        AND customer.global-customer-id = $service-data.networks.network[$tmp.nidx].network-data.service-information.global-customer-id'>\n<parameter name='temp-ub-sub-account-id' value='`$prop.customer-id`' />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1857.7540130615234,
    "y": 563.7540616989136,
    "z": "8dba42d4.2fc58",
    "wires": [
      []
    ]
  },
  {
    "id": "7a3e9a9e.b5ebe4",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1032.00390625,
    "y": 620.9999990463257,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "1272bfc5.9264a"
      ]
    ]
  },
  {
    "id": "beceadfe.18cd7",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1024.25390625,
    "y": 674.6428823471069,
    "z": "8dba42d4.2fc58",
    "wires": [
      [
        "e7f65c34.ba5cc"
      ]
    ]
  },
  {
    "id": "e7f65c34.ba5cc",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
    "comments": "",
    "x": 1177.00390625,
    "y": 674.3929433822632,
    "z": "8dba42d4.2fc58",
    "wires": []
  },
  {
    "id": "d5289859.e9ecf8",
    "type": "set",
    "name": "set  vpn-id to service-data",
    "xml": "<set>\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$network-topology-operation-input.network-request-input.network-input-parameters.param_length].name' value='vpn-id' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$network-topology-operation-input.network-request-input.network-input-parameters.param_length].value' value='`$prop.vpn-id`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param_length' value='`$network-topology-operation-input.network-request-input.network-input-parameters.param_length + 1`' />",
    "comments": "",
    "x": 801.5039825439453,
    "y": 980.5039672851562,
    "z": "8dba42d4.2fc58",
    "wires": []
  }
]
