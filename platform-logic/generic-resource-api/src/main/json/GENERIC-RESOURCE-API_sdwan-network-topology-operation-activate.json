[
  {
    "id": "674547d2.8e25c8",
    "type": "dgstart",
    "name": "DGSTART",
    "outputs": 1,
    "x": 102.5039176940918,
    "y": 36.00000238418579,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "e5902308.c1c82"
      ]
    ]
  },
  {
    "id": "e5902308.c1c82",
    "type": "service-logic",
    "name": "GENERIC-RESOURCE-API ${project.version}",
    "module": "GENERIC-RESOURCE-API",
    "version": "${project.version}",
    "comments": "",
    "xml": "<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>",
    "outputs": 1,
    "x": 288.50392150878906,
    "y": 108.00001955032349,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "790713af.f45e7c"
      ]
    ]
  },
  {
    "id": "790713af.f45e7c",
    "type": "method",
    "name": "method sdwan-network-topology-operation-activate",
    "xml": "<method rpc='sdwan-network-topology-operation-activate' mode='sync'>\n",
    "comments": "",
    "outputs": 1,
    "x": 276.5040397644043,
    "y": 196.0000023841858,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "e083889a.f74828"
      ]
    ]
  },
  {
    "id": "e083889a.f74828",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 450.50393295288086,
    "y": 304.0000615119934,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "6158cb8c.f46db4",
        "81410bf9.e64458",
        "781fc34d.70c51c",
        "7be4b307.5359ec",
        "2905e598.65892a",
        "68901172.3a726",
        "a0fba53c.970e38",
        "944018c7.5a14b8",
        "5e8274ed.a57dbc",
        "f220bde6.61096",
        "1ebcf5b8.ee7c3a",
        "95959ba8.d84698",
        "cf1e1603.5d6118",
        "f18b4542.7d2158",
        "581db18a.df70a"
      ]
    ]
  },
  {
    "id": "6158cb8c.f46db4",
    "type": "call",
    "name": "call GENERIC-RESOURCE-API:validate-sdwan-network-input-parameters",
    "xml": "<call module='GENERIC-RESOURCE-API' rpc='validate-sdwan-network-input-parameters' mode='sync' >\n",
    "comments": "",
    "outputs": 1,
    "x": 908.8928184509277,
    "y": 53.00000238418579,
    "z": "5630a65a.9ec898",
    "wires": [
      []
    ]
  },
  {
    "id": "81410bf9.e64458",
    "type": "record",
    "name": "record",
    "xml": "<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.FileRecorder\">\n<parameter name=\"file\" value=\"/opt/opendaylight/current/data/log/svclogic.log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"sdwan-network-topology-operation-activate\"/>\n<parameter name=\"field3\" value=\"SDWAN-Activate\"/>\n",
    "comments": "",
    "outputs": 1,
    "x": 709.0595169067383,
    "y": 106.77785539627075,
    "z": "5630a65a.9ec898",
    "wires": [
      []
    ]
  },
  {
    "id": "781fc34d.70c51c",
    "type": "set",
    "name": "set networkId and network-object-path",
    "xml": "<set>\n<parameter name='networkId' value='`$network-topology-operation-input.network-information.network-id`' />\n<parameter name=\"network-object-path\" value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'  + $network-topology-operation-input.service-information.service-instance-id  + '/service-data/networks/network/'  + $network-topology-operation-input.network-information.network-id  + '/network-data/'` \" />",
    "comments": "",
    "x": 796.0597953796387,
    "y": 1029.3134715557098,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "7be4b307.5359ec",
    "type": "returnSuccess",
    "name": "return success",
    "xml": "<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n",
    "comments": "",
    "x": 717.8375968933105,
    "y": 1218.8688914775848,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "2905e598.65892a",
    "type": "set",
    "name": "set network-level-oper-status",
    "xml": "<set>\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.order-status' value='Active' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.last-rpc-action' value='`$network-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-level-oper-status.last-action' value='`$network-topology-operation-input.request-information.request-action`' />",
    "comments": "",
    "x": 762.9487113952637,
    "y": 1090.53564620018,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "68901172.3a726",
    "type": "execute",
    "name": "execute Properties",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n",
    "comments": "",
    "outputs": 1,
    "x": 741.3616218566895,
    "y": 159.77789163589478,
    "z": "5630a65a.9ec898",
    "wires": [
      []
    ]
  },
  {
    "id": "a0fba53c.970e38",
    "type": "update",
    "name": "update SDWAN VPN status to AAI",
    "xml": "<update plugin='org.onap.ccsdk.sli.adaptors.aai.AAIService' resource='sdwan-vpn' \n      key='sdwan-vpn.id = $network-topology-operation-input.network-information.network-id' >\n<parameter name='id' value='`$network-topology-operation-input.network-information.network-id`' />\n<parameter name='operational-status' value='Active' />\n<parameter name='tenanatId' value='`$prop.tenant-id`' />\n<parameter name='vpn-id' value='`$prop.vpn-id`' />",
    "comments": "",
    "outputs": 1,
    "x": 780.1674270629883,
    "y": 1153.2388577461243,
    "z": "5630a65a.9ec898",
    "wires": [
      []
    ]
  },
  {
    "id": "944018c7.5a14b8",
    "type": "set",
    "name": "set network in service-data",
    "xml": "<set>\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.sdnc-request-header.' value='`$network-topology-operation-input.sdnc-request-header.`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.request-information.' value='`$network-topology-operation-input.request-information.`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.service-information.' value='`$network-topology-operation-input.service-information.`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-information.' value='`$network-topology-operation-input.network-information.`' />",
    "comments": "",
    "x": 756.5043258666992,
    "y": 976.0913054943085,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "5e8274ed.a57dbc",
    "type": "for",
    "name": "for each network-input-parameters",
    "xml": "<for index='idx' start='0' end='`$ctx.network-data.network-request-input.network-input-parameters.param_length`' >\n",
    "comments": "",
    "outputs": 1,
    "x": 793.5039176940918,
    "y": 230.00390991568565,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "aff4cb70.f51d18"
      ]
    ]
  },
  {
    "id": "aff4cb70.f51d18",
    "type": "block",
    "name": "block",
    "xml": "<block>\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1050.3373489379883,
    "y": 164.33726105093956,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "55124a0e.ecead4",
        "b20e40a7.db9f2"
      ]
    ]
  },
  {
    "id": "55124a0e.ecead4",
    "type": "switchNode",
    "name": "switch name",
    "xml": "<switch test=\"`$ctx.network-data.network-request-input.network-input-parameters.param[$idx].name == 'name'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1241.3374099731445,
    "y": 160.33729347586632,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "c7d7c03b.f2fa6"
      ]
    ]
  },
  {
    "id": "c7d7c03b.f2fa6",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1415.3375358581543,
    "y": 160.33729729056358,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "af327670.c19a78"
      ]
    ]
  },
  {
    "id": "af327670.c19a78",
    "type": "set",
    "name": "set name",
    "xml": "<set>\n<parameter name='prop.name' value='`$ctx.network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 1578.3374214172363,
    "y": 159.9372919499874,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "f220bde6.61096",
    "type": "get-resource",
    "name": "get-resource esr-thirdparty-sdnc",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"esr-thirdparty-sdnc\" \n\t\tkey=\"esr-thirdparty-sdnc.thirdparty-sdnc-id = 'SDWAN-Controller' AND \n\t\t     depth = '1'\"\n        pfx='tmp.aai.esr-thirdparty-sdnc' local-only='false' >\n\n",
    "comments": "",
    "outputs": 1,
    "x": 787.5039176940918,
    "y": 339.00390991568565,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "9390ab8d.339038",
        "422112c5.89ee3c",
        "b2fc220b.c981"
      ]
    ]
  },
  {
    "id": "9390ab8d.339038",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1032.5039176940918,
    "y": 285.00390991568565,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "b9e9d09e.1a521"
      ]
    ]
  },
  {
    "id": "422112c5.89ee3c",
    "type": "not-found",
    "name": "not-found",
    "xml": "<outcome value='not-found'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1035.9948844909668,
    "y": 332.5779455602169,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "fc9a3019.525c8"
      ]
    ]
  },
  {
    "id": "b2fc220b.c981",
    "type": "other",
    "name": "other",
    "xml": "<outcome value='Other'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1031.3278923034668,
    "y": 373.91125854849815,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "9d79278.15d3ed8"
      ]
    ]
  },
  {
    "id": "b9e9d09e.1a521",
    "type": "set",
    "name": "set controller data",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.thirdpartySdnc.url' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].service-url`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.user' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].user-name`\" />\n<parameter name='prop.sdncRestApi.thirdpartySdnc.password' value=\"`$tmp.aai.esr-thirdparty-sdnc.esr-system-info-list.esr-system-info[0].password`\" />\n",
    "comments": "",
    "x": 1230.003978729248,
    "y": 273.00390991568565,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "fc9a3019.525c8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'An error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1212.5662956237793,
    "y": 320.8636816442013,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "9d79278.15d3ed8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unexpected error occurred while querying esr-thirdparty-sdnc from AnAI with thirdparty-sdnc-id = ' + $tmp.thirdparty-sdnc-id`\" />\n\n",
    "comments": "",
    "x": 1219.1004486083984,
    "y": 369.3504513204098,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "1ebcf5b8.ee7c3a",
    "type": "execute",
    "name": "execute RestApiCallNode Get token",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/actokentemplate.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/v2/tokens'`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"token-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>",
    "comments": "",
    "outputs": 1,
    "x": 795.5039176940918,
    "y": 450.00390991568565,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "fd9ecfb8.dcb2c",
        "2aa6377a.1dbc88"
      ]
    ]
  },
  {
    "id": "fd9ecfb8.dcb2c",
    "type": "success",
    "name": "success",
    "xml": "<outcome value='success'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1030.5039176940918,
    "y": 428.00390991568565,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "ff15f3bd.bf298"
      ]
    ]
  },
  {
    "id": "2aa6377a.1dbc88",
    "type": "failure",
    "name": "failure",
    "xml": "<outcome value='failure'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1022.7539176940918,
    "y": 481.6467932164669,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "95badc84.277a8"
      ]
    ]
  },
  {
    "id": "ff15f3bd.bf298",
    "type": "set",
    "name": "set token-id",
    "xml": "<set>\n<parameter name='prop.sdncRestApi.token_id' value='`$token-result.data.token_id`' />\n",
    "comments": "",
    "x": 1184.5039176940918,
    "y": 429.00390991568565,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "95badc84.277a8",
    "type": "returnFailure",
    "name": "return failure",
    "xml": "<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error executing get token rest api\" />\n",
    "comments": "",
    "x": 1175.5039176940918,
    "y": 481.39685425162315,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "b20e40a7.db9f2",
    "type": "switchNode",
    "name": "switch topology",
    "xml": "<switch test=\"`$ctx.network-data.network-request-input.network-input-parameters.param[$idx].name == 'topology'`\">\n",
    "comments": "",
    "outputs": 1,
    "x": 1239.7539176940918,
    "y": 213.00390991568565,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "968633ac.1886b"
      ]
    ]
  },
  {
    "id": "968633ac.1886b",
    "type": "outcomeTrue",
    "name": "true",
    "xml": "<outcome value='true'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1413.7540435791016,
    "y": 213.00391373038292,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "28e1e286.2c199e"
      ]
    ]
  },
  {
    "id": "28e1e286.2c199e",
    "type": "set",
    "name": "set topology",
    "xml": "<set>\n<parameter name='prop.topology' value='`$ctx.network-data.network-request-input.network-input-parameters.param[$idx].value`' />\n",
    "comments": "",
    "x": 1576.7539291381836,
    "y": 212.60390838980675,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "95959ba8.d84698",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 722.2539329528809,
    "y": 650.0039599835873,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "c37fc252.ca32b"
      ]
    ]
  },
  {
    "id": "c37fc252.ca32b",
    "type": "execute",
    "name": "execute RestApiCallNode Create network orchestration",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-network-orchestration.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/net/network-orchestration-resources'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"orchestration-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1044.7539825439453,
    "y": 653.0040616989136,
    "z": "5630a65a.9ec898",
    "wires": [
      []
    ]
  },
  {
    "id": "cf1e1603.5d6118",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 719.7539329528809,
    "y": 758.0039599835873,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "e379ec58.8ceb2",
        "3e353248.8e09fe",
        "6943d9d8.2f1f68"
      ]
    ]
  },
  {
    "id": "e379ec58.8ceb2",
    "type": "execute",
    "name": "execute RestApiCallNode Create vpn",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-vpn.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/vpn'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 991.253978729248,
    "y": 748.0040839612484,
    "z": "5630a65a.9ec898",
    "wires": [
      []
    ]
  },
  {
    "id": "3e353248.8e09fe",
    "type": "set",
    "name": "set prop.vpn-id and prop.vpn1Id",
    "xml": "<set>\n<parameter name='prop.vpn-id' value='`$vpn-result.id`' />\n<parameter name='prop.vpn1Id' value='`$vpn-result.id`' />\n",
    "comments": "",
    "x": 975.2541313171387,
    "y": 800.004145950079,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "6943d9d8.2f1f68",
    "type": "execute",
    "name": "execute RestApiCallNode Create vpn topology",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-vpn-topology.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/sdwan/overlay-network/' + $prop.vpn-id + '/topology'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"post\"/>\n<parameter name=\"responsePrefix\" value=\"vpn-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1018.7539825439453,
    "y": 852.0039582252502,
    "z": "5630a65a.9ec898",
    "wires": [
      []
    ]
  },
  {
    "id": "f18b4542.7d2158",
    "type": "set",
    "name": "set tenant-id and vpn-id to service-data",
    "xml": "<set>\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$network-topology-operation-input.network-request-input.network-input-parameters.param_length].name' value='tenant-id' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$network-topology-operation-input.network-request-input.network-input-parameters.param_length].value' value='`$prop.tenant-id`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$network-topology-operation-input.network-request-input.network-input-parameters.param_length + 1].name' value='vpn-id' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param[$network-topology-operation-input.network-request-input.network-input-parameters.param_length + 1].value' value='`$prop.vpn-id`' />\n<parameter name='service-data.networks.network[$tmp.nidx].network-data.network-request-input.network-input-parameters.param_length' value='`$network-topology-operation-input.network-request-input.network-input-parameters.param_length + 2`' />",
    "comments": "",
    "x": 798.7539215087891,
    "y": 921.7539792060852,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "581db18a.df70a",
    "type": "get-resource",
    "name": "get-resource service-subscription",
    "xml": "<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"service-subscription\" \n        key= 'service-subscription.service-type = $service-data.networks.network[$tmp.nidx].network-data.service-information.subscription-service-type \n        AND customer.global-customer-id = $service-data.networks.network[$tmp.nidx].network-data.service-information.global-customer-id'\n      force=\"true\" pfx=\"tmp.AnAI-data\">\n\n",
    "comments": "",
    "outputs": 1,
    "x": 786.0039520263672,
    "y": 547.2539210319519,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "fcef5013.081b8"
      ]
    ]
  },
  {
    "id": "fcef5013.081b8",
    "type": "switchNode",
    "name": "switch temp-ub-sub-account-id",
    "xml": "<switch test='`$tmp.AnAI-data.temp-ub-sub-account-id`'>\n",
    "comments": "",
    "outputs": 1,
    "x": 1078.003993988037,
    "y": 539.0039348602295,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "a4ce55d.f40f1a8",
        "90c8ccd1.35a13"
      ]
    ]
  },
  {
    "id": "a4ce55d.f40f1a8",
    "type": "outcome",
    "name": "NULL",
    "xml": "<outcome value=''>",
    "comments": "",
    "outputs": 1,
    "x": 1299.7182807922363,
    "y": 540.0039367675781,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "d1e6018.8be3d"
      ]
    ]
  },
  {
    "id": "90c8ccd1.35a13",
    "type": "other",
    "name": "Other",
    "xml": "<outcome value='Other'>",
    "comments": "",
    "outputs": 1,
    "x": 1301.00390625,
    "y": 594.00390625,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "3ebb744f.dbc61c"
      ]
    ]
  },
  {
    "id": "3ebb744f.dbc61c",
    "type": "set",
    "name": "set prop.tenant-id",
    "xml": "<set>\n<parameter name='prop.tenant-id' value='`$tmp.AnAI-data.temp-ub-sub-account-id`' />\n",
    "comments": "",
    "x": 1487.0041427612305,
    "y": 594.0039291381836,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "d1e6018.8be3d",
    "type": "block",
    "name": "block : atomic",
    "xml": "<block atomic=\"true\">\n",
    "atomic": "false",
    "comments": "",
    "outputs": 1,
    "x": 1515.75390625,
    "y": 539.75390625,
    "z": "5630a65a.9ec898",
    "wires": [
      [
        "3f91e970.83e3f6",
        "df20c5db.1ec7f8",
        "8a6f7c34.568fe",
        "f54989e1.a4a098",
        "eb872c81.f35e"
      ]
    ]
  },
  {
    "id": "f54989e1.a4a098",
    "type": "set",
    "name": "set prop.customer-id",
    "xml": "<set>\n<parameter name='prop.customer-id' value='`$ctx.network-data.service-information.global-customer-id`' />\n",
    "comments": "",
    "x": 1728.2540321350098,
    "y": 492.75404182076454,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "3f91e970.83e3f6",
    "type": "execute",
    "name": "execute RestApiCallNode Create tenant",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"templateFileName\" value=\"`$prop.restapi.templateDir + '/sdwan-tenant.json'`\" />\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/baseservice/tenanats'`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"tenant-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1789.2539176940918,
    "y": 553.7539159357548,
    "z": "5630a65a.9ec898",
    "wires": [
      []
    ]
  },
  {
    "id": "df20c5db.1ec7f8",
    "type": "set",
    "name": "set prop.tenant-id",
    "xml": "<set>\n<parameter name='prop.tenant-id' value='`$tenant-result.data.tenantId`' />\n",
    "comments": "",
    "x": 1722.253963470459,
    "y": 582.7538844645023,
    "z": "5630a65a.9ec898",
    "wires": []
  },
  {
    "id": "8a6f7c34.568fe",
    "type": "execute",
    "name": "execute RestApiCallNode Create tenant auth",
    "xml": "<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n<parameter name=\"restapiUrl\" value=\"`$prop.sdncRestApi.thirdpartySdnc.url + '/controller/campus/v1/baseservice/tenanats/authorization/' + $prop.tenant-id`\" />\n<parameter name=\"restapiUser\" value=\"`$prop.sdncRestApi.thirdpartySdnc.user`\" />\n<parameter name=\"restapiPassword\" value=\"`$prop.sdncRestApi.thirdpartySdnc.password`\" />\n<parameter name=\"format\" value=\"json\"/>\n<parameter name=\"httpMethod\" value=\"put\"/>\n<parameter name=\"responsePrefix\" value=\"tenant-result\"/>\n<parameter name=\"trustStoreFileName\" value=\"/opt/onap/sdnc/data/stores/truststore.openecomp.client.jks\"/>\n<parameter name=\"trustStorePassword\" value=\"adminadmin\"/>\n<parameter name=\"keyStoreFileName\" value=\"/opt/onap/sdnc/data/stores/sdnc.p12\"/>\n<parameter name=\"keyStorePassword\" value=\"adminadmin\"/>\n<parameter name='customHttpHeaders' value=\"`'X-ACCESS-TOKEN=' + $prop.sdncRestApi.token_id`\" />",
    "comments": "",
    "outputs": 1,
    "x": 1803.7538719177246,
    "y": 613.5038854181767,
    "z": "5630a65a.9ec898",
    "wires": [
      []
    ]
  },
  {
    "id": "eb872c81.f35e",
    "type": "get-resource",
    "name": "save-resource customer-id in service-subscription",
    "xml": "<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"service-subscription\" \n        key= 'service-subscription.service-type = $service-data.networks.network[$tmp.nidx].network-data.service-information.subscription-service-type \n        AND customer.global-customer-id = $service-data.networks.network[$tmp.nidx].network-data.service-information.global-customer-id'>\n<parameter name='temp-ub-sub-account-id' value='`$prop.customer-id`' />\n\n",
    "comments": "",
    "outputs": 1,
    "x": 1819.253963470459,
    "y": 524.7540208399296,
    "z": "5630a65a.9ec898",
    "wires": [
      []
    ]
  }
]
