[{"id":"fc34e26a.96e7e","type":"dgstart","name":"DGSTART","outputs":1,"x":118.75,"y":41.25,"z":"4bad730a.4cb0cc","wires":[["e33febc3.973b58"]]},{"id":"aa02a26f.e2363","type":"method","name":"method self-serve-aai-vnf-put","xml":"<method rpc='self-serve-aai-vnf-put' mode='sync'>\n","comments":"","outputs":1,"x":249.5357208251953,"y":116.71032333374023,"z":"4bad730a.4cb0cc","wires":[["a6f33c2f.b3f31"]]},{"id":"a6f33c2f.b3f31","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","comments":"","outputs":1,"x":135.07144165039062,"y":197.4881191253662,"z":"4bad730a.4cb0cc","wires":[["159c2262.814bae","7c881808.c8e0d8"]]},{"id":"e33febc3.973b58","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":391.6071472167969,"y":40.67856693267822,"z":"4bad730a.4cb0cc","wires":[["aa02a26f.e2363"]]},{"id":"159c2262.814bae","type":"switchNode","name":"switch: ss.capability-action","xml":"<switch test='`$ss.capability-action`'>\n","comments":"","outputs":1,"x":373.75002670288086,"y":197.14285230636597,"z":"4bad730a.4cb0cc","wires":[["b572550b.adbec8","13e8cc58.3cd934"]]},{"id":"b572550b.adbec8","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":597.2500228881836,"y":197.39285230636597,"z":"4bad730a.4cb0cc","wires":[["a1e45c16.d893f"]]},{"id":"a1e45c16.d893f","type":"returnFailure","name":"return failure","xml":"<return status=\"failure\">\n\t<parameter name=\"ack-final\" value=\"Y\" />\n\t<parameter name=\"error-code\" value=\"500\"/>\n\t<parameter name=\"error-message\" value=\"ss.capability-action is null\" />\n","comments":"","x":757.1666946411133,"y":197.50395107269287,"z":"4bad730a.4cb0cc","wires":[]},{"id":"13e8cc58.3cd934","type":"outcome","name":"assign","xml":"<outcome value='assign'>","comments":"","outputs":1,"x":597.0000190734863,"y":246.39285564422607,"z":"4bad730a.4cb0cc","wires":[["425f104b.9ea2a"]]},{"id":"894f7c33.637f5","type":"for","name":"for aidx in param_length (VNF)","xml":"<for silentFailure='true' index=\"aidx\" start=\"0\" end=\"`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param_length`\">","comments":"","outputs":1,"x":1018.9920196533203,"y":246.35323905944824,"z":"4bad730a.4cb0cc","wires":[["3de67184.4f327e"]]},{"id":"7c881808.c8e0d8","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss.aai.vfmoduleput.log' />\n","comments":"","outputs":1,"x":337.3809509277344,"y":424.34521102905273,"z":"4bad730a.4cb0cc","wires":[[]]},{"id":"3de67184.4f327e","type":"switchNode","name":"switch: param[].name","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$aidx].name`'>\n","comments":"","outputs":1,"x":1281.5357055664062,"y":246.60714530944824,"z":"4bad730a.4cb0cc","wires":[["7ed75f6a.32c6","f9b29c72.cce46","30bf111a.e4111e","b1d0b1ac.319c6","88e38ba8.f37628"]]},{"id":"7ed75f6a.32c6","type":"outcome","name":"vnf_name","xml":"<outcome value='vnf_name'>","comments":"","outputs":1,"x":1502.5715560913086,"y":246.39284086227417,"z":"4bad730a.4cb0cc","wires":[["4cac8e62.ec887"]]},{"id":"f9b29c72.cce46","type":"outcome","name":"vnf_id","xml":"<outcome value='vnf_id'>","comments":"","outputs":1,"x":1495.214500427246,"y":288.21429920196533,"z":"4bad730a.4cb0cc","wires":[["b1503d7c.2ca81"]]},{"id":"4cac8e62.ec887","type":"set","name":"set vnf-name, index","xml":"<set>\n<parameter name='ss.param.vnf-name' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$aidx].value`' />\n<parameter name='ss.param.vnf-name-index' value='`$aidx`' />","comments":"","x":1693.5715637207031,"y":246.8928565979004,"z":"4bad730a.4cb0cc","wires":[]},{"id":"b1503d7c.2ca81","type":"set","name":"set vnf-id, index","xml":"<set>\n<parameter name='ss.param.vnf-id' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$aidx].value`' />\n<parameter name='ss.param.vnf-id-index' value='`$aidx`' />","comments":"","x":1670.714511871338,"y":287.96430015563965,"z":"4bad730a.4cb0cc","wires":[]},{"id":"1a08570b.7300c9","type":"save","name":"update generic-vnf","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \" >\n<parameter name=\"vnf-name\" value='`$ss.param.vnf-name`' />","comments":"","outputs":1,"x":987.0713844299316,"y":655.1429500579834,"z":"4bad730a.4cb0cc","wires":[["2326d53c.cf2f8a","4f81e373.6b324c"]]},{"id":"2326d53c.cf2f8a","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1187.3214149475098,"y":655.499997138977,"z":"4bad730a.4cb0cc","wires":[["1776578e.beb728"]]},{"id":"4f81e373.6b324c","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1193.5714263916016,"y":707.2500314712524,"z":"4bad730a.4cb0cc","wires":[["eeacaa58.638de8"]]},{"id":"65eeae87.ef3cb","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to update generic-vnf.vnf-name in AnAI with vnf-name=' + $ss.param.vnf-name`\" />\n","comments":"","x":1625.190372467041,"y":655.285701751709,"z":"4bad730a.4cb0cc","wires":[]},{"id":"44537861.e8d898","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'generic-vnf with vnf-id =' + $ss.param.vnf-id + ' is not found in AAI'`\" />\n","comments":"","x":1625.761890411377,"y":705.5238780975342,"z":"4bad730a.4cb0cc","wires":[]},{"id":"366de731.14b3b8","type":"save","name":"get generic-vnf","xml":"<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \"\n\tpfx=\"tmp.aai.vnf\" >\n\n","comments":"","outputs":1,"x":980.3571090698242,"y":496.03571796417236,"z":"4bad730a.4cb0cc","wires":[["3f089da.b9edc62","a9e8b83.38fa648"]]},{"id":"3f089da.b9edc62","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1188.8927421569824,"y":495.5356388092041,"z":"4bad730a.4cb0cc","wires":[["1368d9eb.216fa6"]]},{"id":"a9e8b83.38fa648","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1195.1426620483398,"y":594.4285469055176,"z":"4bad730a.4cb0cc","wires":[["b3eb8abb.73a328"]]},{"id":"daac54ac.6fed98","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Encountered error to get generic-vnf with vnf-id=' + $ss.param.vnf-id + ' from AnAI'`\" />\n","comments":"","x":1631.3329467773438,"y":541.0356578826904,"z":"4bad730a.4cb0cc","wires":[]},{"id":"3b6018e9.9fd408","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'generic-vnf.vnf-name with vnf-id=' + $ss.param.vnf-id + ' not found in AAI'`\" />\n","comments":"","x":1633.047420501709,"y":594.9882154464722,"z":"4bad730a.4cb0cc","wires":[]},{"id":"425f104b.9ea2a","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":754.7500152587891,"y":246.6428518295288,"z":"4bad730a.4cb0cc","wires":[["894f7c33.637f5","366de731.14b3b8","1a08570b.7300c9","59e77635.57a7d8","638f61c1.41893","fb296a32.323408"]]},{"id":"1368d9eb.216fa6","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1360.4643287658691,"y":495.57143211364746,"z":"4bad730a.4cb0cc","wires":[["619aa30e.6fa38c","daac54ac.6fed98"]]},{"id":"1776578e.beb728","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1360.7499809265137,"y":655.5715217590332,"z":"4bad730a.4cb0cc","wires":[["619aa30e.6fa38c","65eeae87.ef3cb"]]},{"id":"eeacaa58.638de8","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1363.6071968078613,"y":706.4286632537842,"z":"4bad730a.4cb0cc","wires":[["619aa30e.6fa38c","44537861.e8d898"]]},{"id":"b3eb8abb.73a328","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1361.3214073181152,"y":594.5714321136475,"z":"4bad730a.4cb0cc","wires":[["619aa30e.6fa38c","3b6018e9.9fd408"]]},{"id":"619aa30e.6fa38c","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$ss.param.aai-vnf-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":1728.035717010498,"y":495.2857437133789,"z":"4bad730a.4cb0cc","wires":[]},{"id":"2ca2191b.da43e6","type":"comment","name":"VNF params","info":"","comments":"","x":993.0357131958008,"y":196.7261905670166,"z":"4bad730a.4cb0cc","wires":[]},{"id":"30bf111a.e4111e","type":"outcome","name":"license-assignment-group-uuid","xml":"<outcome value='license-assignment-group-uuid'>","comments":"","outputs":1,"x":1572.2500228881836,"y":331.2500057220459,"z":"4bad730a.4cb0cc","wires":[["7907a01.d16bd6"]]},{"id":"7907a01.d16bd6","type":"set","name":"set license-assignment-group-uuid, index","xml":"<set>\n<parameter name='ss.param.license-assignment-group-uuid' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$aidx].value`' />\n<parameter name='ss.param.license-assignment-group-uuid-index' value='`$aidx`' />","comments":"","x":1915.7500343322754,"y":331.0000066757202,"z":"4bad730a.4cb0cc","wires":[]},{"id":"b1d0b1ac.319c6","type":"outcome","name":"entitlement-assignment-group-uuid","xml":"<outcome value='entitlement-assignment-group-uuid'>","comments":"","outputs":1,"x":1587.2500228881836,"y":373.7500057220459,"z":"4bad730a.4cb0cc","wires":[["6859c77e.afd8f8"]]},{"id":"6859c77e.afd8f8","type":"set","name":"set entitlement-assignment-group-uuid, index","xml":"<set>\n<parameter name='ss.param.entitlement-assignment-group-uuid' value ='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$aidx].value`' />\n<parameter name='ss.param.entitlement-assignment-group-uuid-index' value='`$aidx`' />","comments":"","x":1930.7500343322754,"y":373.5000066757202,"z":"4bad730a.4cb0cc","wires":[]},{"id":"57c694b7.6a6c2c","type":"save","name":"Rollback generic-vnf update","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"generic-vnf\"\n\t\tkey=\"generic-vnf.vnf-id = $ss.param.vnf-id \" >\n<parameter name=\"vnf-name\" value='`$tmp.aai.vnf.vnf-anme`' />","comments":"","outputs":1,"x":2238.7500228881836,"y":861.2500438690186,"z":"4bad730a.4cb0cc","wires":[["479539a3.5e3eb8","c7f71566.354288","d7404b28.fccd98"]]},{"id":"479539a3.5e3eb8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2477.0000076293945,"y":860.7499885559082,"z":"4bad730a.4cb0cc","wires":[["16d802eb.6e7f5d"]]},{"id":"c7f71566.354288","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2487.0000610351562,"y":901.2500591278076,"z":"4bad730a.4cb0cc","wires":[["31ea71b2.605ebe"]]},{"id":"221e0ece.1641c2","type":"set","name":"set resource-resolution-data.status = FAILED","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.vf-module-parameters.param[$ss.param.aai-vf-put-index].resource-resolution-data.status' \n\tvalue='FAILED' />\n","comments":"","x":2290.1785049438477,"y":815.6186656951904,"z":"4bad730a.4cb0cc","wires":[]},{"id":"d7404b28.fccd98","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2484.8213500976562,"y":942.0116558074951,"z":"4bad730a.4cb0cc","wires":[["de15617c.c087c"]]},{"id":"2268c8e0.737d88","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":1981.3569641113281,"y":772.0116100311279,"z":"4bad730a.4cb0cc","wires":[["221e0ece.1641c2","57c694b7.6a6c2c","c997983c.e414e8"]]},{"id":"16d802eb.6e7f5d","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`' Failed to rollback generic-vnf update in AnAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":2659.82120513916,"y":860.8686628341675,"z":"4bad730a.4cb0cc","wires":[]},{"id":"31ea71b2.605ebe","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`' Failed to rollback generic-vnf update because generic-vnf with vnf-id = ' + $ss.param.vnf-id + ' is not found in AAI. MANUAL ROLLBACK IS REQUIRED! '`\" />\n","comments":"","x":2666.07124710083,"y":900.8687009811401,"z":"4bad730a.4cb0cc","wires":[]},{"id":"de15617c.c087c","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\" Rollback of generic-vnf update completed. \" />\n","comments":"","x":2668.5712890625,"y":942.3687257766724,"z":"4bad730a.4cb0cc","wires":[]},{"id":"c997983c.e414e8","type":"record","name":"record generic-vnf ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK generic-vnf update\"/>","comments":"","outputs":1,"x":2244.32120513916,"y":771.1186637878418,"z":"4bad730a.4cb0cc","wires":[[]]},{"id":"27eb24b1.d3230c","type":"comment","name":"ROLLBACK STARET HERE","info":"","comments":"","x":2012.892677307129,"y":717.0709800720215,"z":"4bad730a.4cb0cc","wires":[]},{"id":"59e77635.57a7d8","type":"save","name":"save license","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"license\"\n\t\tkey=\"license.group-uuid = $ss.param.license-assignment-group-uuid \n\t\tAND license.resource-uuid = $ss.param.license-key\n\t\tAND generic-vnf.vnf-id = $ss.param.vnf-id\" >\n<parameter name=\"group-uuid\" value='`$ss.param.license-assignment-group-uuid`' />\n<parameter name=\"resource-uuid\" value='`$ss.param.license-key`' />","comments":"","outputs":1,"x":977.5000152587891,"y":900.0000133514404,"z":"4bad730a.4cb0cc","wires":[["6c6afa6b.37f854","3b4fc64e.114caa"]]},{"id":"6c6afa6b.37f854","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1177.7500457763672,"y":900.3570604324341,"z":"4bad730a.4cb0cc","wires":[["4303b02a.95a9c"]]},{"id":"3b4fc64e.114caa","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1184.000057220459,"y":952.1070947647095,"z":"4bad730a.4cb0cc","wires":[["87f79ab6.f4fa48"]]},{"id":"c155bdde.6cfd4","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to save license with group-uuid = ' + $ss.param.license-assignment-group-uuid + ' AND license.resource-uuid = ' + $ss.param.license-key + ' in AAI'`\" />\n","comments":"","x":1552.6190032958984,"y":900.142765045166,"z":"4bad730a.4cb0cc","wires":[]},{"id":"d7aad25c.c9e05","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'license with group-uuid = ' + $ss.param.license-assignment-group-uuid + ' AND license.resource-uuid = ' + $ss.param.license-key + ' is not found in AAI'`\" />\n","comments":"","x":1553.1905212402344,"y":950.3809413909912,"z":"4bad730a.4cb0cc","wires":[]},{"id":"4303b02a.95a9c","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1351.178611755371,"y":900.4285850524902,"z":"4bad730a.4cb0cc","wires":[["c155bdde.6cfd4","2268c8e0.737d88"]]},{"id":"87f79ab6.f4fa48","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1354.0358276367188,"y":951.2857265472412,"z":"4bad730a.4cb0cc","wires":[["d7aad25c.c9e05","2268c8e0.737d88"]]},{"id":"638f61c1.41893","type":"save","name":"save entitlement","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"entitlement\"\n\t\tkey=\"entitlement.group-uuid = $ss.param.entitlement-assignment-group-uuid \n\t\tAND entitlement.resource-uuid = $ss.param.entitlement-key\n\t\tAND generic-vnf.vnf-id = $ss.param.vnf-id\" >\n<parameter name=\"group-uuid\" value='`$ss.param.entitlement-assignment-group-uuid`' />\n<parameter name=\"resource-uuid\" value='`$ss.param.entitlement-key`' />","comments":"","outputs":1,"x":990.0000152587891,"y":1120.0000171661377,"z":"4bad730a.4cb0cc","wires":[["a9eaa28.849b36","339db2d7.0a2e8e"]]},{"id":"a9eaa28.849b36","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1190.2500457763672,"y":1120.3570642471313,"z":"4bad730a.4cb0cc","wires":[["64c15d4f.6a4eb4"]]},{"id":"339db2d7.0a2e8e","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1196.500057220459,"y":1172.1070985794067,"z":"4bad730a.4cb0cc","wires":[["73bedfd7.cf59b"]]},{"id":"4e9ebb33.9b3b34","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'Failed to save entitlement with group-uuid = ' + $ss.param.entitlement-assignment-group-uuid + ' AND entitlement.resource-uuid = ' + $ss.param.entitlement-key + ' in AAI'`\" />\n","comments":"","x":1565.1190032958984,"y":1120.1427688598633,"z":"4bad730a.4cb0cc","wires":[]},{"id":"d21ac2d9.64649","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n<parameter name='error-code' value='500' />\n<parameter name='error-message' value=\"`'entitlement with group-uuid = ' + $ss.param.entitlement-assignment-group-uuid + ' AND entitlement.resource-uuid = ' + $ss.param.entitlement-key + ' is not found in AAI'`\" />\n","comments":"","x":1565.6905212402344,"y":1170.3809452056885,"z":"4bad730a.4cb0cc","wires":[]},{"id":"64c15d4f.6a4eb4","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1363.678611755371,"y":1120.4285888671875,"z":"4bad730a.4cb0cc","wires":[["4e9ebb33.9b3b34","6c68a9e5.44bdb8"]]},{"id":"73bedfd7.cf59b","type":"block","name":"block : atomic","xml":"<block atomic='true'>","atomic":"true","comments":"","outputs":1,"x":1366.5358276367188,"y":1171.2857303619385,"z":"4bad730a.4cb0cc","wires":[["d21ac2d9.64649","6c68a9e5.44bdb8"]]},{"id":"1c60d424.125ddc","type":"save","name":"Rollback license save","xml":"<delete plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n\tresource=\"license\"\n\t\tkey=\"license.group-uuid = $ss.param.license-assignment-group-uuid \n\t\tAND license.resource-uuid = $ss.param.license-key\" >","comments":"","outputs":1,"x":2236.2500610351562,"y":1132.5000667572021,"z":"4bad730a.4cb0cc","wires":[["13f982bb.433ccd","48040f10.fecd2","5dde3ab7.572a64"]]},{"id":"13f982bb.433ccd","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2474.500045776367,"y":1132.0000114440918,"z":"4bad730a.4cb0cc","wires":[["27a2fe8c.d48f22"]]},{"id":"48040f10.fecd2","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2483.2500610351562,"y":1171.2500667572021,"z":"4bad730a.4cb0cc","wires":[["5b6af0a0.6387c"]]},{"id":"5dde3ab7.572a64","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2481.0713539123535,"y":1209.5116634368896,"z":"4bad730a.4cb0cc","wires":[["778a127d.bdd04c"]]},{"id":"9e98b07c.4dc51","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":2000.1069641113281,"y":1090.7616138458252,"z":"4bad730a.4cb0cc","wires":[["1c60d424.125ddc","f68b4441.2a1838"]]},{"id":"27a2fe8c.d48f22","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`' Failed to rollback license with group-uuid = ' + $ss.param.license-assignment-group-uuid + ' AND license.resource-uuid = ' + $ss.param.license-key + ' in AAI. MANUAL ROLLBACK IS REQUIRED!'`\" />\n","comments":"","x":2657.321243286133,"y":1132.118685722351,"z":"4bad730a.4cb0cc","wires":[]},{"id":"5b6af0a0.6387c","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\"`' Failed to rollback license because license with group-uuid = ' + $ss.param.license-assignment-group-uuid + ' AND license.resource-uuid = ' + $ss.param.license-key + ' NOT FOUND in AAI. SILENT SUCCESS! '`\" />\n","comments":"","x":2662.32124710083,"y":1170.8687086105347,"z":"4bad730a.4cb0cc","wires":[]},{"id":"778a127d.bdd04c","type":"set","name":"set error-message","xml":"<set>\n<parameter name='error-message' value=\" Rollback of license completed. \" />\n","comments":"","x":2664.8212928771973,"y":1209.868733406067,"z":"4bad730a.4cb0cc","wires":[]},{"id":"f68b4441.2a1838","type":"record","name":"record license ROLLBACK","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"ROLLBACK license\"/>","comments":"","outputs":1,"x":2251.07120513916,"y":1089.868667602539,"z":"4bad730a.4cb0cc","wires":[[]]},{"id":"6c68a9e5.44bdb8","type":"block","name":"block","xml":"<block>","atomic":"false","comments":"","outputs":1,"x":1838.7500305175781,"y":986.2500152587891,"z":"4bad730a.4cb0cc","wires":[["2268c8e0.737d88","9e98b07c.4dc51"]]},{"id":"fb296a32.323408","type":"set","name":"set resource-resolution-data.status = SUCCESS","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-parameters-data.param[$ss.param.aai-vnf-put-index].resource-resolution-data.status' \n\tvalue='SUCCESS' />\n","comments":"","x":1090.8333129882812,"y":1286.6666355133057,"z":"4bad730a.4cb0cc","wires":[]},{"id":"88e38ba8.f37628","type":"outcome","name":"aai-vnf-put","xml":"<outcome value='aai-vnf-put'>","comments":"","outputs":1,"x":1514.5,"y":417.5,"z":"4bad730a.4cb0cc","wires":[["a2a465aa.af8988"]]},{"id":"a2a465aa.af8988","type":"set","name":"set ss.param.aai-vnf-put-index","xml":"<set>\n<parameter name='ss.param.aai-vnf-put-index' value='`$aidx`' />","comments":"","x":1748.0000114440918,"y":417.2500009536743,"z":"4bad730a.4cb0cc","wires":[]}]