[{"id":"26435c0d.fc79a4","type":"dgstart","name":"DGSTART","outputs":1,"x":120,"y":77.02430057525635,"z":"656aafb.8a6395","wires":[["e2d1700f.ddcd"]]},{"id":"e2d1700f.ddcd","type":"service-logic","name":"GENERIC-RESOURCE-API ${project.version}","module":"GENERIC-RESOURCE-API","version":"${project.version}","comments":"","xml":"<service-logic xmlns='http://www.onap.org/sdnc/svclogic' xmlns:xsi='http://www.w3.org/2001/XMLSchema-instance' xsi:schemaLocation='http://www.onap.org/sdnc/svclogic ./svclogic.xsd' module='GENERIC-RESOURCE-API' version='${project.version}'>","outputs":1,"x":233.85713577270508,"y":116.83383846282959,"z":"656aafb.8a6395","wires":[["7041aa61.644a04"]]},{"id":"7041aa61.644a04","type":"method","name":"method vf-module-topology-operation-assign","xml":"<method rpc='vf-module-topology-operation-assign' mode='sync'>\n","comments":"","outputs":1,"x":233.42862701416016,"y":157.02430057525635,"z":"656aafb.8a6395","wires":[["65acec70.9c56c4"]]},{"id":"c730118a.e21ce","type":"comment","name":"vf-module-topology-operation-assign","info":"","comments":"","x":525.3210983276367,"y":20,"z":"656aafb.8a6395","wires":[]},{"id":"6fb1dec4.0529f","type":"switchNode","name":"switch request-action","xml":"<switch test='`$vf-module-topology-operation-input.request-information.request-action`'>\n","comments":"","outputs":1,"x":525.1905097961426,"y":332.548122882843,"z":"656aafb.8a6395","wires":[["108c83b4.cef43c","ad04160f.641278"]]},{"id":"108c83b4.cef43c","type":"outcome","name":"CreateVfModuleInstance","xml":"<outcome value='CreateVfModuleInstance'>\n","comments":"","outputs":1,"x":787.2381248474121,"y":309.6910090446472,"z":"656aafb.8a6395","wires":[["1ba480fd.d952ef"]]},{"id":"ad04160f.641278","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":730.9047698974609,"y":355.07199811935425,"z":"656aafb.8a6395","wires":[["f06e1d11.aac0f"]]},{"id":"1ba480fd.d952ef","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":977.0952892303467,"y":309.69104051589966,"z":"656aafb.8a6395","wires":[[]]},{"id":"f06e1d11.aac0f","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"If svc-action is 'assign' then request-action must be 'CreateVfModuleInstance'\" />\n","comments":"","x":995.9047775268555,"y":355.40531063079834,"z":"656aafb.8a6395","wires":[]},{"id":"62441125.66a0b","type":"get-resource","name":"get-resource VF_MODULE_MODEL","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT * from VF_MODULE_MODEL WHERE customization_uuid = $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid'\n  pfx='db.vf-module-model'>\n\n","comments":"","outputs":1,"x":572.5237770080566,"y":423.6910729408264,"z":"656aafb.8a6395","wires":[["107fd326.9ba41d","ca0f147f.907428"]]},{"id":"4ea2965.8808268","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No model found for VF module customization UUID ' + $vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`\" />\n","comments":"","x":1013.9521980285645,"y":448.1195454597473,"z":"656aafb.8a6395","wires":[]},{"id":"107fd326.9ba41d","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":838.3094673156738,"y":404.0719037055969,"z":"656aafb.8a6395","wires":[["4f40032c.c4bacc"]]},{"id":"ca0f147f.907428","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":846.8808975219727,"y":448.3576169013977,"z":"656aafb.8a6395","wires":[["4ea2965.8808268"]]},{"id":"4f40032c.c4bacc","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table\" />\n","comments":"","x":1013.309398651123,"y":403.21480417251587,"z":"656aafb.8a6395","wires":[]},{"id":"488e702.2bac09","type":"switchNode","name":"switch service-data.vnfs.vnf_length","xml":"<switch test='`$service-data.vnfs.vnf_length`'>\n","comments":"","outputs":1,"x":567.6190414428711,"y":632.2624082565308,"z":"656aafb.8a6395","wires":[["24f9c122.2250be","d25bd1ae.c2c51"]]},{"id":"24f9c122.2250be","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":808.3333129882812,"y":609.4051485061646,"z":"656aafb.8a6395","wires":[["505fc81a.807868"]]},{"id":"d25bd1ae.c2c51","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":808.0951538085938,"y":650.3576669692993,"z":"656aafb.8a6395","wires":[["9ec01ab9.e2ba98"]]},{"id":"110bcecd.ba7661","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":154.5238037109375,"y":2918.929323196411,"z":"656aafb.8a6395","wires":[["e1906aa5.79edf8","4579baea.4e1ce4","99398bc4.52b678","deb3a0da.1b837","ec603470.f9c408","64628347.fcadac","24ff0c47.3546a4","bbb0684c.92c108","73ee4632.723818","6b10e668.07ccf8","ef4d2a4.c7047d8","93254957.8f37d8","d4ff85a5.3e2f38","fb3addee.0067e","74b7384e.7dc558","eb5208b9.6edea8","8fbc261.8df31d8","f9c64c2d.c2c64","c027e91b.5ae848","5866abdc.5ae8b4","5cfaa9c0.9d8738","a9429c24.2435a","dd018545.07e8e8","74133334.aced1c","bf94cb16.e2d428","f2c3fa39.f42268","df5aea18.782d88","3fd43ef9.658b62"]]},{"id":"505fc81a.807868","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"There are no VNFs defined in MD-SAL\" />\n","comments":"","x":974.999927520752,"y":608.6909036636353,"z":"656aafb.8a6395","wires":[]},{"id":"9ec01ab9.e2ba98","type":"for","name":"for each vnf","xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf_length`' >\n","comments":"","outputs":1,"x":970.3332977294922,"y":650.0242853164673,"z":"656aafb.8a6395","wires":[["25b275ee.8e053a"]]},{"id":"25b275ee.8e053a","type":"switchNode","name":"switch service data vnf == input vnf","xml":"<switch test='`$service-data.vnfs.vnf[$idx].vnf-id == $vf-module-topology-operation-input.vnf-information.vnf-id`'>\n","comments":"","outputs":1,"x":1221.6665954589844,"y":649.6910133361816,"z":"656aafb.8a6395","wires":[["d30b08f1.d32668"]]},{"id":"d30b08f1.d32668","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1451.6666069030762,"y":649.0243263244629,"z":"656aafb.8a6395","wires":[["68c36e5e.1e03f"]]},{"id":"e2b3c75a.fbe358","type":"set","name":"set vnf-index to -1","xml":"<set>\n<parameter name='vnf-index' value='-1' />\n","comments":"","x":516.6666641235352,"y":563.6909074783325,"z":"656aafb.8a6395","wires":[]},{"id":"dd7dd66d.514b18","type":"set","name":"set vnf-index to idx","xml":"<set>\n<parameter name='vnf-index' value='`$idx`' />\n","comments":"","x":1773.3332443237305,"y":620.024284362793,"z":"656aafb.8a6395","wires":[]},{"id":"a941c95a.005118","type":"switchNode","name":"switch vnf-index","xml":"<switch test='`$vnf-index`'>\n","comments":"","outputs":1,"x":506.6666717529297,"y":700.3576040267944,"z":"656aafb.8a6395","wires":[["d2524204.b0f77"]]},{"id":"d2524204.b0f77","type":"outcome","name":"-1","xml":"<outcome value='-1'>\n","comments":"","outputs":1,"x":685.000057220459,"y":699.6909799575806,"z":"656aafb.8a6395","wires":[["4e3ba237.282e2c"]]},{"id":"4e3ba237.282e2c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find VNF ID ' + $vf-module-topology-operation-input.vnf-information.vnf-id + ' in MD-SAL'`\" />\n","comments":"","x":844.9999656677246,"y":699.0242834091187,"z":"656aafb.8a6395","wires":[]},{"id":"e1906aa5.79edf8","type":"switchNode","name":"switch vf-module_length","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`'>\n","comments":"","outputs":1,"x":536.6667633056641,"y":1673.6910963058472,"z":"656aafb.8a6395","wires":[["69dd7fc2.bfa07","e3821c4a.5365d"]]},{"id":"69dd7fc2.bfa07","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":794.0477180480957,"y":1640.833869934082,"z":"656aafb.8a6395","wires":[["12e01545.41510b"]]},{"id":"12e01545.41510b","type":"set","name":"set vf-module-index=0","xml":"<set>\n<parameter name='vf-module-index' value='0' />\n","comments":"","x":981.6667556762695,"y":1641.500644683838,"z":"656aafb.8a6395","wires":[]},{"id":"e3821c4a.5365d","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":794.476261138916,"y":1705.119728088379,"z":"656aafb.8a6395","wires":[["3625b8e4.8a6ed8"]]},{"id":"431edeca.30bd2","type":"set","name":"set vf-module-index = vf-module_length","xml":"<set>\n<parameter name='vf-module-index' value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' />\n","comments":"","x":1179.6668014526367,"y":1685.3101234436035,"z":"656aafb.8a6395","wires":[]},{"id":"261c711c.8a8afe","type":"for","name":"for each existing VF module","xml":"<for index='idx' start='0' end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length`' >\n","comments":"","outputs":1,"x":1138.7618942260742,"y":1729.4053535461426,"z":"656aafb.8a6395","wires":[["ffc7b05f.851d6"]]},{"id":"3625b8e4.8a6ed8","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":931.1905403137207,"y":1705.1196537017822,"z":"656aafb.8a6395","wires":[["431edeca.30bd2","261c711c.8a8afe"]]},{"id":"ffc7b05f.851d6","type":"switchNode","name":"switch vf-module-information.vf-module-id == service-data.vnfs.vnf[].vf-modules.vf-module[].vf-module-id","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.vf-module-id == $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id`'>\n","comments":"","outputs":1,"x":1642.3809967041016,"y":1728.976764678955,"z":"656aafb.8a6395","wires":[["9819f262.00a9b"]]},{"id":"9819f262.00a9b","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2085.000045776367,"y":1728.5482158660889,"z":"656aafb.8a6395","wires":[["fa80d8c4.eff008"]]},{"id":"fa80d8c4.eff008","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'VF module id ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-id\n       + ' already exists, and status is ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$idx].vf-module-data.vf-module-level-oper-status.order-status`\" />\n","comments":"","x":2236.904926300049,"y":1728.5482025146484,"z":"656aafb.8a6395","wires":[]},{"id":"c7fe0b36.b32f28","type":"comment","name":"make sure this VF module doesn't exist already","info":"","comments":"","x":1668.8333435058594,"y":1683.6042566299438,"z":"656aafb.8a6395","wires":[]},{"id":"4579baea.4e1ce4","type":"set","name":"set new vf-module_length","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module_length' value='`$vf-module-index + 1`' />\n","comments":"","x":547.3333435058594,"y":1784.690951347351,"z":"656aafb.8a6395","wires":[]},{"id":"99398bc4.52b678","type":"set","name":"set vf-module-topology data","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-id' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name' value='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`' />\n<parameter name='tmp.vf-module-topology.vf-module-topology-identifier.vf-module-type' value='`$vf-module-topology-operation-input.vf-module-information.vf-module-type`' />\n<parameter name='tmp.vf-module-topology.tenant' value='`$vf-module-topology-operation-input.vf-module-request-input.tenant`' />\n<parameter name='tmp.vf-module-topology.aic-cloud-region' value='`$vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`' />\n","comments":"","x":553.8333625793457,"y":1897.1910581588745,"z":"656aafb.8a6395","wires":[]},{"id":"873da3a5.72cd5","type":"set","name":"set aic-clli","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli'\n   value='`$aai-uid-split[$aai-uid-split_length - 1]`' />\n","comments":"","x":1314.7856216430664,"y":2056.428984642029,"z":"656aafb.8a6395","wires":[]},{"id":"deb3a0da.1b837","type":"switchNode","name":"switch aic-clli","xml":"<switch test='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.aic-clli`'>\n","comments":"","outputs":1,"x":513.8332824707031,"y":2170.3813247680664,"z":"656aafb.8a6395","wires":[["7cf3e2b0.e4015c"]]},{"id":"7cf3e2b0.e4015c","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":659.1189727783203,"y":2170.381393432617,"z":"656aafb.8a6395","wires":[["20446503.96b8aa"]]},{"id":"20446503.96b8aa","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Unable to find aic-clli in AAI for aic-cloud-region ' + $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region`\" />\n","comments":"","x":806.261833190918,"y":2169.9528274536133,"z":"656aafb.8a6395","wires":[]},{"id":"ec603470.f9c408","type":"get-resource","name":"get-resource cloud region","xml":"<get-resource plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\t\tresource=\"cloud-region\" \n\t\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner AND \n\t\t     cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\"\n        pfx='aai.cloud-region' local-only='false' >\n\n","comments":"","outputs":1,"x":552.6904983520508,"y":1970.5245962142944,"z":"656aafb.8a6395","wires":[["b56be644.999f38","db27dd5b.ccee4"]]},{"id":"db27dd5b.ccee4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":766.9366912841797,"y":1988.6754522323608,"z":"656aafb.8a6395","wires":[["aea5f281.3febe"]]},{"id":"aea5f281.3febe","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving cloud region from AAI\" />\n","comments":"","x":941.9366645812988,"y":1988.6754884719849,"z":"656aafb.8a6395","wires":[]},{"id":"b56be644.999f38","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":775.8652877807617,"y":1946.9611854553223,"z":"656aafb.8a6395","wires":[["3fc25aad.735066"]]},{"id":"3fc25aad.735066","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Cloud region not found in AAI\" />\n","comments":"","x":942.2145652770996,"y":1946.2667627334595,"z":"656aafb.8a6395","wires":[]},{"id":"64628347.fcadac","type":"set","name":"set vf-module-parameters","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-parameters.'\n  value='vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.' />\n","comments":"","x":546.3095703125,"y":2654.2869262695312,"z":"656aafb.8a6395","wires":[]},{"id":"68c36e5e.1e03f","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1600.0000686645508,"y":647.9440250396729,"z":"656aafb.8a6395","wires":[["dd7dd66d.514b18","d5f2edac.9d2be"]]},{"id":"d5f2edac.9d2be","type":"break","name":"break","xml":"<break>\n","comments":"","x":1735.0000343322754,"y":669.6106109619141,"z":"656aafb.8a6395","wires":[]},{"id":"ba680463.606c28","type":"set","name":"set from DB","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$db.vf-module-model.invariant-uuid`' />\n","comments":"","x":928.1666221618652,"y":2211.7773180007935,"z":"656aafb.8a6395","wires":[]},{"id":"24ff0c47.3546a4","type":"switchNode","name":"switch input model-invariant-uuid","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`'>\n","comments":"","outputs":1,"x":572.0236968994141,"y":2234.601761817932,"z":"656aafb.8a6395","wires":[["dea644df.085118","73169093.cd052"]]},{"id":"dea644df.085118","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":777.6903686523438,"y":2211.744725227356,"z":"656aafb.8a6395","wires":[["ba680463.606c28"]]},{"id":"73169093.cd052","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":779.1189651489258,"y":2256.0303163528442,"z":"656aafb.8a6395","wires":[["79238a6c.919764"]]},{"id":"79238a6c.919764","type":"set","name":"set from input","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-invariant-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-invariant-uuid`' />\n","comments":"","x":933.4047012329102,"y":2255.458888530731,"z":"656aafb.8a6395","wires":[]},{"id":"1f14efed.62082","type":"set","name":"set from DB","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$db.vf-module-model.uuid`' />\n","comments":"","x":929.1188926696777,"y":2300.3159942626953,"z":"656aafb.8a6395","wires":[]},{"id":"bbb0684c.92c108","type":"switchNode","name":"switch input model-uuid","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`'>\n","comments":"","outputs":1,"x":544.6427154541016,"y":2323.1404991149902,"z":"656aafb.8a6395","wires":[["88d9b82d.799bb8","a27f6a.0dcca098"]]},{"id":"88d9b82d.799bb8","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":778.6426887512207,"y":2300.2834310531616,"z":"656aafb.8a6395","wires":[["1f14efed.62082"]]},{"id":"a27f6a.0dcca098","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":780.0712852478027,"y":2344.56902217865,"z":"656aafb.8a6395","wires":[["c2e02ca.0b685d"]]},{"id":"c2e02ca.0b685d","type":"set","name":"set from input","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-uuid`' />\n","comments":"","x":934.3570213317871,"y":2343.997594356537,"z":"656aafb.8a6395","wires":[]},{"id":"62153199.201c2","type":"set","name":"set from DB","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$db.vf-module-model.version`' />\n","comments":"","x":926.2618255615234,"y":2389.173201560974,"z":"656aafb.8a6395","wires":[]},{"id":"73ee4632.723818","type":"switchNode","name":"switch input model-version","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`'>\n","comments":"","outputs":1,"x":552.785587310791,"y":2411.997646331787,"z":"656aafb.8a6395","wires":[["26a8f04b.475c8","476c4b25.1c1b84"]]},{"id":"26a8f04b.475c8","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":775.785572052002,"y":2389.1406087875366,"z":"656aafb.8a6395","wires":[["62153199.201c2"]]},{"id":"476c4b25.1c1b84","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":777.214168548584,"y":2433.426199913025,"z":"656aafb.8a6395","wires":[["c4b078c0.a8ed28"]]},{"id":"c4b078c0.a8ed28","type":"set","name":"set from input","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-version'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-version`' />\n","comments":"","x":931.4999046325684,"y":2432.854772090912,"z":"656aafb.8a6395","wires":[]},{"id":"e657442c.ead3c8","type":"set","name":"set from DB","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$db.vf-module-model.name`' />\n","comments":"","x":926.2618255615234,"y":2476.316023826599,"z":"656aafb.8a6395","wires":[]},{"id":"6b10e668.07ccf8","type":"switchNode","name":"switch input model-name","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`'>\n","comments":"","outputs":1,"x":547.785587310791,"y":2499.140468597412,"z":"656aafb.8a6395","wires":[["f168f0ce.54b45","33cec373.42738c"]]},{"id":"f168f0ce.54b45","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":775.785572052002,"y":2476.2834310531616,"z":"656aafb.8a6395","wires":[["e657442c.ead3c8"]]},{"id":"33cec373.42738c","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":777.214168548584,"y":2520.56902217865,"z":"656aafb.8a6395","wires":[["ea01df66.59c76"]]},{"id":"ea01df66.59c76","type":"set","name":"set from input","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-name'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-name`' />\n","comments":"","x":931.4999046325684,"y":2519.997594356537,"z":"656aafb.8a6395","wires":[]},{"id":"ef4d2a4.c7047d8","type":"set","name":"set model-customization-uuid","xml":"<set>\n<parameter name='tmp.vf-module-topology.onap-model-information.model-customization-uuid'\n  value='`$vf-module-topology-operation-input.vf-module-information.onap-model-information.model-customization-uuid`' />\n","comments":"","x":562.237922668457,"y":2571.6494579315186,"z":"656aafb.8a6395","wires":[]},{"id":"93254957.8f37d8","type":"set","name":"set vf-module-id","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id'\n   value='`$vf-module-topology-operation-input.vf-module-information.vf-module-id`' />\n","comments":"","x":515.4285697937012,"y":1840.372633934021,"z":"656aafb.8a6395","wires":[]},{"id":"d4ff85a5.3e2f38","type":"for","name":"for each cloud-region relationship","xml":"<for index='idx' start='0' end='`$aai.cloud-region.relationship-list.relationship_length`' >\n","comments":"","outputs":1,"x":574.9443130493164,"y":2059.031279563904,"z":"656aafb.8a6395","wires":[["82c8e882.337268"]]},{"id":"82c8e882.337268","type":"switchNode","name":"switch related-to","xml":"<switch test='`$aai.cloud-region.relationship-list.relationship[$idx].related-to`'>\n","comments":"","outputs":1,"x":822.6228561401367,"y":2058.7812089920044,"z":"656aafb.8a6395","wires":[["78be2657.4761c8"]]},{"id":"78be2657.4761c8","type":"outcome","name":"complex","xml":"<outcome value='complex'>\n","comments":"","outputs":1,"x":992.0871772766113,"y":2058.1740312576294,"z":"656aafb.8a6395","wires":[["292c6898.f5d278"]]},{"id":"f6d1d3fe.3f36b","type":"execute","name":"split related-link","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliStringUtils' method='split'>\n   <parameter name='ctx_memory_result_key' value='aai-uid-split' />\n   <parameter name='original_string' value='`$aai.cloud-region.relationship-list.relationship[$idx].related-link`' />\n   <parameter name='regex' value='/' />\n","comments":"","outputs":1,"x":1332.1823348999023,"y":2012.6026067733765,"z":"656aafb.8a6395","wires":[[]]},{"id":"292c6898.f5d278","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1151.8490371704102,"y":2059.2693948745728,"z":"656aafb.8a6395","wires":[["f6d1d3fe.3f36b","fd0333a4.b3c89","873da3a5.72cd5"]]},{"id":"fd0333a4.b3c89","type":"break","name":"break","xml":"<break>\n","comments":"","x":1301.8489990234375,"y":2102.6026916503906,"z":"656aafb.8a6395","wires":[]},{"id":"c622ee1f.60898","type":"execute","name":"execute PropertiesNode","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.prop.PropertiesNode' method='readProperties' >\n    <parameter name='fileName' value='%SDNC_CONFIG_DIR%/generic-resource-api-dg.properties' />\n    <parameter name='contextPrefix' value='prop' />\n","comments":"","outputs":1,"x":530.7142791748047,"y":259.88143253326416,"z":"656aafb.8a6395","wires":[[]]},{"id":"5866abdc.5ae8b4","type":"set","name":"set order-status to PendingCreate","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n","comments":"","x":560.5953598022461,"y":5992.23706048727,"z":"656aafb.8a6395","wires":[]},{"id":"a9429c24.2435a","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n","comments":"","x":497.16666412353516,"y":6084.855390489101,"z":"656aafb.8a6395","wires":[]},{"id":"c027e91b.5ae848","type":"set","name":"copy input data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.sdnc-request-header.'\n   value='$vf-module-topology-operation-input.sdnc-request-header.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.request-information.'\n   value='$vf-module-topology-operation-input.request-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.service-information.'\n   value='$vf-module-topology-operation-input.service-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vnf-information.'\n   value='$vf-module-topology-operation-input.vnf-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-information.'\n   value='$vf-module-topology-operation-input.vf-module-information.' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-request-input.'\n   value='$vf-module-topology-operation-input.vf-module-request-input.' />\n\n","comments":"","x":501.4523696899414,"y":5944.5853652358055,"z":"656aafb.8a6395","wires":[]},{"id":"f9c64c2d.c2c64","type":"set","name":"copy vf-module-topology data","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-topology.' value='tmp.vf-module-topology.' />\n","comments":"","x":546.3333740234375,"y":5896.3708772063255,"z":"656aafb.8a6395","wires":[]},{"id":"5cfaa9c0.9d8738","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmodule.log' />\n","comments":"","outputs":1,"x":492.04761505126953,"y":6037.085206925869,"z":"656aafb.8a6395","wires":[[]]},{"id":"74b7384e.7dc558","type":"save","name":"update vf-module","xml":"<update plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n<parameter name=\"vf-module-name\" value=\"`$tmp.vf-module-topology.vf-module-topology-identifier.vf-module-name`\" />\n<parameter name=\"model-invariant-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-uuid`\" />\n<parameter name=\"model-customization-id\" value=\"`$tmp.vf-module-topology.onap-model-information.model-customization-uuid`\" />\n<parameter name=\"selflink\" value=\"`$vf-module-object-path`\" />\n<parameter name=\"automated-assignment\" value=\"`$automated-assignment`\" />","comments":"","outputs":1,"x":540.4762268066406,"y":4220.039322853088,"z":"656aafb.8a6395","wires":[["652740cb.83ab2","4329d4e9.833ffc"]]},{"id":"93ef82f6.77bf8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No vf-module found in AAI for vf module ID ' + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n","comments":"","x":1045.5239028930664,"y":4254.80075353384,"z":"656aafb.8a6395","wires":[]},{"id":"652740cb.83ab2","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":715.5478668212891,"y":4188.419944763184,"z":"656aafb.8a6395","wires":[["ed63435e.aa384"]]},{"id":"4329d4e9.833ffc","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":724.1192398071289,"y":4257.03903478384,"z":"656aafb.8a6395","wires":[["abbcc2f3.09db4"]]},{"id":"bc498ebb.62e89","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module in AAI\" />\n","comments":"","x":1050.5478210449219,"y":4206.563501358032,"z":"656aafb.8a6395","wires":[]},{"id":"fb3addee.0067e","type":"set","name":"set vf-module-object-path","xml":"<set>\n<parameter name='vf-module-object-path'\n value=\"`'restconf/config/GENERIC-RESOURCE-API:services/service/'\n + $service-data.service-topology.service-topology-identifier.service-instance-id\n + '/service-data/vnfs/vnf/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-id\n + '/vnf-data/vf-modules/vf-module/'\n + $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n + '/vf-module-data/vf-module-topology/'`\"/>\n\n","comments":"","x":562.1428718566895,"y":4012.89657497406,"z":"656aafb.8a6395","wires":[]},{"id":"35075c06.3ff5b4","type":"save","name":"save vf-module relationships","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vf-module:relationship-list\"\n   key=\"vf-module.vf-module-id = $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id\n      AND generic-vnf.vnf-id = $service-data.vnfs.vnf[$vnf-index].vnf-id\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id`\" />\n","comments":"","outputs":1,"x":1330.8332557678223,"y":5011.524610519409,"z":"656aafb.8a6395","wires":[["eebf0c8d.02687","17cb2186.384fde"]]},{"id":"eebf0c8d.02687","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1550.6665992736816,"y":4982.396354675293,"z":"656aafb.8a6395","wires":[["9626c0d4.cffb4"]]},{"id":"17cb2186.384fde","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1559.2381324768066,"y":5035.01549911499,"z":"656aafb.8a6395","wires":[["d7b5caa2.dbe748"]]},{"id":"a5942506.20edd8","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vf-module relationships in AAI\" />\n","comments":"","x":1885.666732788086,"y":5002.206251144409,"z":"656aafb.8a6395","wires":[]},{"id":"eb5208b9.6edea8","type":"for","name":"for each vm-type","xml":"<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n","comments":"","outputs":1,"x":524.1667404174805,"y":4826.191459655762,"z":"656aafb.8a6395","wires":[["2895f74a.780eb8"]]},{"id":"c51b1efc.3f796","type":"for","name":"for each vm-network","xml":"<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n","comments":"","outputs":1,"x":907.4999923706055,"y":5195.524995565414,"z":"656aafb.8a6395","wires":[["19879c24.7f2f24"]]},{"id":"2c0c296.d55dad6","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'No l3-network found in AAI for network ID '\n      + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].network-id`\" />\n","comments":"","x":1887.5001068115234,"y":5052.19079208374,"z":"656aafb.8a6395","wires":[]},{"id":"8fbc261.8df31d8","type":"for","name":"for each vm-type","xml":"<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n","comments":"","outputs":1,"x":509.9285430908203,"y":5817.237373292446,"z":"656aafb.8a6395","wires":[["64726337.9e62cc"]]},{"id":"64726337.9e62cc","type":"for","name":"for each vm","xml":"<for index='vm-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-count`' >\n","comments":"","outputs":1,"x":704.9285736083984,"y":5816.570381104946,"z":"656aafb.8a6395","wires":[["6bfd6084.d709f"]]},{"id":"ad3cf09c.9226f","type":"save","name":"save VIPR_CONFIGURATION","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource\" resource=\"SQL\"\nkey=\"INSERT INTO VIPR_CONFIGURATION (vnf_id, vnf_name, ecomp_service_instance_id, vm_name, cloud_region_id, cloud_owner) VALUES ( $service-data.vnfs.vnf[$vnf-index].vnf-id , $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-topology-identifier-structure.vnf-name , $service-data.service-information.service-instance-id , $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index] , $tmp.vf-module-topology.aic-cloud-region , $prop.cloud-region.cloud-owner )\" >","comments":"","outputs":1,"x":1096.5952758789062,"y":5839.2380313277245,"z":"656aafb.8a6395","wires":[["5e616199.78de3"]]},{"id":"b9d57fe1.533e5","type":"comment","name":"Not a failure","info":"","comments":"","x":1616.5951766967773,"y":5839.238036096096,"z":"656aafb.8a6395","wires":[]},{"id":"5e616199.78de3","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1306.5952606201172,"y":5839.238181054592,"z":"656aafb.8a6395","wires":[["26b1e0ff.8c0e"]]},{"id":"26b1e0ff.8c0e","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n","comments":"","outputs":1,"x":1449.9287033081055,"y":5839.238018929958,"z":"656aafb.8a6395","wires":[[]]},{"id":"5588e4f4.192e3c","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1479.928825378418,"y":5790.569732606411,"z":"656aafb.8a6395","wires":[["6ef1b6fa.74d458"]]},{"id":"47184014.145f","type":"comment","name":"Not a failure","info":"","comments":"","x":1803.2618789672852,"y":5788.903554856777,"z":"656aafb.8a6395","wires":[]},{"id":"6ef1b6fa.74d458","type":"record","name":"record","xml":"<record plugin=\"org.onap.ccsdk.sli.core.sli.recording.Slf4jRecorder\">\n<parameter name=\"logger\" value=\"message-log\"/>\n<parameter name=\"field1\" value=\"__TIMESTAMP__\"/>\n<parameter name=\"field2\" value=\"GENERIC-RESOURCE-API.vf-module-topology-operation-assign:REQID\"/>\n<parameter name=\"field3\" value=\"`$vf-module-topology-operation-input.sdnc-request-header.svc-request-id`\"/>\n<parameter name=\"field4\" value=\"Failed to insert VIPR_CONFIGURATION record\"/>\n","comments":"","outputs":1,"x":1625.9287605285645,"y":5790.570365846157,"z":"656aafb.8a6395","wires":[[]]},{"id":"6bfd6084.d709f","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":873.2619667053223,"y":5815.570225656033,"z":"656aafb.8a6395","wires":[["a8168d5b.f3523","ad3cf09c.9226f"]]},{"id":"a8168d5b.f3523","type":"delete","name":"delete any pre-existing records in VIPR_CONFIGURATION","xml":"<delete plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='DELETE from VIPR_CONFIGURATION WHERE vnf_id = $service-data.vnfs.vnf[$vnf-index].vnf-id\n     AND ecomp_service_instance_id = $service-data.service-information.service-instance-id\n     AND vm_name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vm-name[$vm-index]' >","comments":"","outputs":1,"x":1186.5952911376953,"y":5790.904365479946,"z":"656aafb.8a6395","wires":[["5588e4f4.192e3c"]]},{"id":"ed63435e.aa384","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":873.8334350585938,"y":4188.190615653992,"z":"656aafb.8a6395","wires":[["bc498ebb.62e89","78341ff5.2c4ba"]]},{"id":"abbcc2f3.09db4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":874.8333511352539,"y":4254.85690587759,"z":"656aafb.8a6395","wires":[["93ef82f6.77bf8","78341ff5.2c4ba"]]},{"id":"9626c0d4.cffb4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1719.166603088379,"y":4982.190624237061,"z":"656aafb.8a6395","wires":[["a5942506.20edd8","b9195698.e1ca38"]]},{"id":"d7b5caa2.dbe748","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1714.166603088379,"y":5035.190466880798,"z":"656aafb.8a6395","wires":[["2c0c296.d55dad6","b9195698.e1ca38"]]},{"id":"dd018545.07e8e8","type":"execute","name":"execute RestApiCallNode - get preload-list","xml":"<execute plugin='org.onap.ccsdk.sli.plugins.restapicall.RestapiCallNode' method='sendRequest' >\n    <parameter name='restapiUrl' value=\"`$prop.controller.url + $prop.restapi.preloadinformation + $vf-module-topology-operation-input.vf-module-request-input.vf-module-name + '/vf-module'`\" />\n    <parameter name='restapiUser' value='`$prop.controller.user`' />\n    <parameter name='restapiPassword' value='`$prop.controller.pwd`' />\n    <parameter name='format' value='json' />\n    <parameter name='httpMethod' value='GET' />\n    <parameter name=\"responsePrefix\" value=\"mdsal-preload\" />\n\n","comments":"","outputs":1,"x":601.6666946411133,"y":2737.024694442749,"z":"656aafb.8a6395","wires":[["38fd8c9e.bc06d4","31fd432b.0f5fac"]]},{"id":"38fd8c9e.bc06d4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":865.0000101725259,"y":2700.3579107920323,"z":"656aafb.8a6395","wires":[["4a068e1a.966a4"]]},{"id":"31fd432b.0f5fac","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":868.3332977294922,"y":2775.3579063415527,"z":"656aafb.8a6395","wires":[["f560d3ad.ba84f"]]},{"id":"4a068e1a.966a4","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1026.6666984558105,"y":2698.691195487976,"z":"656aafb.8a6395","wires":[["2f57bab0.882396"]]},{"id":"f560d3ad.ba84f","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1023.3333053588867,"y":2775.357748031616,"z":"656aafb.8a6395","wires":[["c91133f9.d9e49"]]},{"id":"2f57bab0.882396","type":"switchNode","name":"switch mdsal-preload.response-code","xml":"<switch test='`$mdsal-preload.response-code`'>\n","comments":"","outputs":1,"x":1255,"y":2698.6912364959717,"z":"656aafb.8a6395","wires":[["29f6cde1.82aa82","c5e747b2.1f3448"]]},{"id":"29f6cde1.82aa82","type":"outcome","name":"404 (not found)","xml":"<outcome value='404'>\n","comments":"","outputs":1,"x":1506.6667366027832,"y":2662.024610519409,"z":"656aafb.8a6395","wires":[["57da7d13.9d23e4"]]},{"id":"57da7d13.9d23e4","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-operation-assign-no-preload","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-operation-assign-no-preload' mode='sync' >\n","comments":"","outputs":1,"x":1903.3332061767578,"y":2660.357738494873,"z":"656aafb.8a6395","wires":[["176979e3.8dfcd6"]]},{"id":"176979e3.8dfcd6","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2273.333354949951,"y":2658.6912746429443,"z":"656aafb.8a6395","wires":[["21d1dcd4.4f6544"]]},{"id":"21d1dcd4.4f6544","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":2429.9999465942383,"y":2657.0245685577393,"z":"656aafb.8a6395","wires":[]},{"id":"c5e747b2.1f3448","type":"other","name":"other","xml":"<outcome value='Other'>\n","comments":"","outputs":1,"x":1481.6667747497559,"y":2718.691237449646,"z":"656aafb.8a6395","wires":[["95f3102e.43dbf"]]},{"id":"95f3102e.43dbf","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error retrieving preload-information\" />\n","comments":"","x":1646.6665840148926,"y":2717.0244903564453,"z":"656aafb.8a6395","wires":[]},{"id":"c91133f9.d9e49","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-operation-assign-preload","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-operation-assign-preload' mode='sync' >\n","comments":"","outputs":1,"x":1386.6665954589844,"y":2777.024496078491,"z":"656aafb.8a6395","wires":[["91af88ba.737b58"]]},{"id":"91af88ba.737b58","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1742.3334579467773,"y":2775.3581142425537,"z":"656aafb.8a6395","wires":[["76f92896.248a58"]]},{"id":"76f92896.248a58","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1897.333381652832,"y":2775.3581943511963,"z":"656aafb.8a6395","wires":[]},{"id":"2895f74a.780eb8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":714.6668090820312,"y":4827.024694442749,"z":"656aafb.8a6395","wires":[["c51b1efc.3f796","df1e2be4.7bff88"]]},{"id":"df1e2be4.7bff88","type":"for","name":"for each vnfc","xml":"<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n","comments":"","outputs":1,"x":901.3335113525391,"y":4483.691401481628,"z":"656aafb.8a6395","wires":[["36bfaf08.699ea"]]},{"id":"93dc27d7.d2e7f8","type":"save","name":"save vnfc to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vnfc\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\" >\n<parameter name=\"vnfc-name\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n<parameter name=\"nfc-naming-code\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-naming-code`\" />\n<parameter name=\"nfc-function\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].nfc-function`\" />\n<parameter name=\"model-invariant-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].invariant-uuid`\" />\n<parameter name=\"model-version-id\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].uuid`\" />\n<parameter name=\"orchestration-status\" value=\"`PendingCreate`\" />\n<parameter name=\"prov-status\" value=\"`PREPROV`\" />\n","comments":"","outputs":1,"x":1264.6667137145996,"y":4310.691418647766,"z":"656aafb.8a6395","wires":[["d084a25f.130fa","f5b7c328.fea4e"]]},{"id":"36bfaf08.699ea","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1069.6668128967285,"y":4484.358228683472,"z":"656aafb.8a6395","wires":[["93dc27d7.d2e7f8","716e53c6.f8971c","5e637da9.e8c6f4","397a51e2.a9811e"]]},{"id":"d084a25f.130fa","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1453.6666946411133,"y":4286.358032166958,"z":"656aafb.8a6395","wires":[["9256f0a5.e0827"]]},{"id":"8809f864.0b9208","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vnfc to AAI\" />\n","comments":"","x":1794.6669082641602,"y":4322.167888045311,"z":"656aafb.8a6395","wires":[]},{"id":"9256f0a5.e0827","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1620.8334426879883,"y":4302.152465760708,"z":"656aafb.8a6395","wires":[["8809f864.0b9208","6dd31c8a.306554"]]},{"id":"397a51e2.a9811e","type":"save","name":"save vnfc relationships","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vnfc:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"generic-vnf\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/generic-vnfs/generic-vnf/' +\n        $vf-module-topology-operation-input.vnf-information.vnf-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vf-module\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/generic-vnfs/generic-vnf/' +\n        $vf-module-topology-operation-input.vnf-information.vnf-id +\n        '/vf-modules/vf-module/' +\n        $service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-id`\" />\n","comments":"","outputs":1,"x":1276.3333778381348,"y":4408.691504478455,"z":"656aafb.8a6395","wires":[["b73184ef.8eab58","47b09b6b.b72904"]]},{"id":"43675438.e22aec","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vnfc relationships in AAI\" />\n","comments":"","x":1786.3333129882812,"y":4400.358340263367,"z":"656aafb.8a6395","wires":[]},{"id":"ea558d44.ab434","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vnfc relationships\" />\n","comments":"","x":1781.5002212524414,"y":4452.0095472335815,"z":"656aafb.8a6395","wires":[]},{"id":"1450e757.7e8919","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1608.1665687561035,"y":4382.009128570557,"z":"656aafb.8a6395","wires":[["43675438.e22aec","6dd31c8a.306554"]]},{"id":"43b26d4f.2168a4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1608.1666450500488,"y":4435.008887290955,"z":"656aafb.8a6395","wires":[["ea558d44.ab434","6dd31c8a.306554"]]},{"id":"b73184ef.8eab58","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1451.33345413208,"y":4382.0247983932495,"z":"656aafb.8a6395","wires":[["1450e757.7e8919"]]},{"id":"47b09b6b.b72904","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1459.904987335205,"y":4434.643942832947,"z":"656aafb.8a6395","wires":[["43b26d4f.2168a4"]]},{"id":"716e53c6.f8971c","type":"for","name":"for each vnfc-network-role","xml":"<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n","comments":"","outputs":1,"x":1283.0000038146973,"y":4670.357853889465,"z":"656aafb.8a6395","wires":[["5174a4c6.f867ec"]]},{"id":"74133334.aced1c","type":"for","name":"for each vm-type","xml":"<for silentFailure='true' index='vm-type-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm_length`' >\n","comments":"","outputs":1,"x":532.6667251586914,"y":3303.024682998657,"z":"656aafb.8a6395","wires":[["4fef35f2.d4b31c"]]},{"id":"da513051.0c80f","type":"for","name":"for each vnfc","xml":"<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n","comments":"","outputs":1,"x":909.3334655761719,"y":3006.6916103363037,"z":"656aafb.8a6395","wires":[["39475bd5.415024"]]},{"id":"39475bd5.415024","type":"for","name":"for each vnfc-network-role","xml":"<for silentFailure='true' index='network-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data_length`' >\n","comments":"","outputs":1,"x":1122.1667785644531,"y":3006.5246181488037,"z":"656aafb.8a6395","wires":[["39bd0525.e9673a"]]},{"id":"39bd0525.e9673a","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1315.5003280639648,"y":3005.8581142425537,"z":"656aafb.8a6395","wires":[["211a45be.e73e6a","3d73ced8.240982","9348f910.7316b8","dc00b3e.1e7765","1a36dc6b.f54da4","66e2bf1b.b4a97"]]},{"id":"211a45be.e73e6a","type":"set","name":"set found-network-role to false","xml":"<set>\n<parameter name='found-network-role' value='false' />\n","comments":"","x":1549.1669311523438,"y":2909.191512107849,"z":"656aafb.8a6395","wires":[]},{"id":"3d73ced8.240982","type":"for","name":"for each vnf-network","xml":"<for index='vnf-network-index' start='0'\n  end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n","comments":"","outputs":1,"x":1517.5001831054688,"y":2957.5246047973633,"z":"656aafb.8a6395","wires":[["c4db9112.14214"]]},{"id":"9348f910.7316b8","type":"set","name":"set tmp.network-role","xml":"<set>\n<parameter name='tmp.network-role' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-network-role`' />\n","comments":"","x":1520.8335189819336,"y":2862.5247631073,"z":"656aafb.8a6395","wires":[]},{"id":"c4db9112.14214","type":"switchNode","name":"network-roles match?","xml":"<switch test='`$tmp.network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`'>\n","comments":"","outputs":1,"x":1730.8334426879883,"y":2955.857936859131,"z":"656aafb.8a6395","wires":[["43a60930.0fb2c8"]]},{"id":"43a60930.0fb2c8","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1910.8336563110352,"y":2954.1915950775146,"z":"656aafb.8a6395","wires":[["a2149f57.02558"]]},{"id":"a2149f57.02558","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2040.8334197998047,"y":2954.1913528442383,"z":"656aafb.8a6395","wires":[["8953ca67.9978f8","7d1c2cc.f6fa6d4"]]},{"id":"8953ca67.9978f8","type":"set","name":"set found-network-role to true","xml":"<set>\n<parameter name='found-network-role' value='true' />\n","comments":"","x":2237.500255584717,"y":2922.5246028900146,"z":"656aafb.8a6395","wires":[]},{"id":"7d1c2cc.f6fa6d4","type":"break","name":"break","xml":"<break>\n","comments":"","x":2167.500171661377,"y":2972.524850845337,"z":"656aafb.8a6395","wires":[]},{"id":"dc00b3e.1e7765","type":"switchNode","name":"switch found-network-role","xml":"<switch test='`$found-network-role`'>\n","comments":"","outputs":1,"x":1532.5001792907715,"y":3005.857961654663,"z":"656aafb.8a6395","wires":[["9701b094.853bb"]]},{"id":"9701b094.853bb","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1722.5002365112305,"y":3005.858205795288,"z":"656aafb.8a6395","wires":[["1a02e5e2.37764a"]]},{"id":"ffec08a5.88c838","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\"\n      value=\"`'Cannot find VNF network role ' + $tmp.network-role`\" />\n","comments":"","x":2032.500099182129,"y":3004.5251054763794,"z":"656aafb.8a6395","wires":[]},{"id":"6787e7f7.3e3718","type":"comment","name":"Loop through and determine network and subnet ids, and store them in context memory","info":"","comments":"","x":984.1667251586914,"y":2901.191452026367,"z":"656aafb.8a6395","wires":[]},{"id":"1a36dc6b.f54da4","type":"set","name":"store network-id","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-id`' />\n","comments":"","x":1500.8334312438965,"y":3052.857961654663,"z":"656aafb.8a6395","wires":[]},{"id":"66e2bf1b.b4a97","type":"for","name":"for each vnfc-subnet-role","xml":"<for index='subnet-role-index' start='0'\n  end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet_length`' >\n","comments":"","outputs":1,"x":1525.833366394043,"y":3206.1914081573486,"z":"656aafb.8a6395","wires":[["4b5ec7f4.4e5d08"]]},{"id":"4b5ec7f4.4e5d08","type":"for","name":"for each vnfc-address-family","xml":"<for index='address-family-index' start='0'\n  end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments_length`' >\n","comments":"","outputs":1,"x":1770.8333587646484,"y":3206.1912994384766,"z":"656aafb.8a6395","wires":[["7266ee36.9fc2e"]]},{"id":"89d10c7.03b9cf","type":"set","name":"set found-subnet to false","xml":"<set>\n<parameter name='found-subnet' value='false' />\n","comments":"","x":2190.833366394043,"y":3152.8580465316772,"z":"656aafb.8a6395","wires":[]},{"id":"3b7448f8.d9ff38","type":"for","name":"for each vnf address family","xml":"<for silentFailure='true' index='vnf-address-family-index' start='0'\n  end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n","comments":"","outputs":1,"x":2195.833251953125,"y":3199.524227142334,"z":"656aafb.8a6395","wires":[["fec50717.207ed8"]]},{"id":"b1a77703.c09158","type":"set","name":"set tmp.address-family and tmp.subnet-role","xml":"<set>\n<parameter name='tmp.address-family'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-address-family`' />\n<parameter name='tmp.subnet-role'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-subnet-role`' />\n","comments":"","x":2247.4999923706055,"y":3106.1912155151367,"z":"656aafb.8a6395","wires":[]},{"id":"fec50717.207ed8","type":"switchNode","name":"address-families match?","xml":"<switch test='`$tmp.address-family\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$vnf-address-family-index].ip-version`'>\n","comments":"","outputs":1,"x":2442.499931335449,"y":3197.857805252075,"z":"656aafb.8a6395","wires":[["d38a96f4.39fe88"]]},{"id":"d38a96f4.39fe88","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2622.499897003174,"y":3197.858211517334,"z":"656aafb.8a6395","wires":[["cca1b8aa.7bfbf8"]]},{"id":"ee552abf.ebd808","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":3089.1663818359375,"y":3194.5246362686157,"z":"656aafb.8a6395","wires":[["fb5002c1.eb703","7ece3f26.2fecd"]]},{"id":"fb5002c1.eb703","type":"set","name":"set found-subnet to true","xml":"<set>\n<parameter name='found-subnet' value='true' />\n","comments":"","x":3269.166664123535,"y":3164.524552345276,"z":"656aafb.8a6395","wires":[]},{"id":"7ece3f26.2fecd","type":"break","name":"break","xml":"<break>\n","comments":"","x":3215.8331336975098,"y":3212.8581342697144,"z":"656aafb.8a6395","wires":[]},{"id":"293030b5.eb0f5","type":"switchNode","name":"switch found-subnet","xml":"<switch test='`$found-subnet`'>\n","comments":"","outputs":1,"x":2172.499954223633,"y":3244.5243101119995,"z":"656aafb.8a6395","wires":[["6c505583.2996fc"]]},{"id":"6c505583.2996fc","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2350.833293914795,"y":3244.5245542526245,"z":"656aafb.8a6395","wires":[["35168b08.f767a4"]]},{"id":"a7c172c7.b1211","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Cannot find VNF address family '\n      + $tmp.address-family\n      + ' for subnet role '\n      + $tmp.subnet-role`\" />\n","comments":"","x":2667.499782562256,"y":3241.524631500244,"z":"656aafb.8a6395","wires":[]},{"id":"d0c8a716.7b7cf8","type":"set","name":"store subnet-id (from sdnc-subnet-id)","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$vnf-address-family-index].sdnc-subnet-id`' />\n","comments":"","x":2220.833122253418,"y":3289.8576459884644,"z":"656aafb.8a6395","wires":[]},{"id":"bf94cb16.e2d428","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vfmoduleb.log' />\n","comments":"","outputs":1,"x":523.3333129882812,"y":3966.071620941162,"z":"656aafb.8a6395","wires":[[]]},{"id":"5174a4c6.f867ec","type":"for","name":"for each vnfc-subnetwork-role","xml":"<for silentFailure='true' index='subnet-role-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet_length`' >\n","comments":"","outputs":1,"x":1541.6667671203613,"y":4669.691248893738,"z":"656aafb.8a6395","wires":[["2c378b11.4bddb4"]]},{"id":"2c378b11.4bddb4","type":"for","name":"for each vnfc-address-family","xml":"<for silentFailure='true' index='address-family-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments_length`' >\n","comments":"","outputs":1,"x":1805.6667518615723,"y":4668.691336631775,"z":"656aafb.8a6395","wires":[["12b644ea.1cc82b"]]},{"id":"bcbaadbf.dbba4","type":"for","name":"for each vnfc-ip-address","xml":"<for silentFailure='true' index='address-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip_length`' >\n","comments":"","outputs":1,"x":2219.333179473877,"y":4730.357754707336,"z":"656aafb.8a6395","wires":[["76052f92.1b8d1"]]},{"id":"12b644ea.1cc82b","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2018.3333778381348,"y":4668.691336631775,"z":"656aafb.8a6395","wires":[["84e0a123.150f7","bcbaadbf.dbba4"]]},{"id":"84e0a123.150f7","type":"set","name":"set tmp.address-family","xml":"<set>\n<parameter name='tmp.address-family'\n  value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-address-family`' />\n","comments":"","x":2218.333667755127,"y":4583.691409111023,"z":"656aafb.8a6395","wires":[]},{"id":"76052f92.1b8d1","type":"switchNode","name":"switch address family","xml":"<switch test='`$tmp.address-family`'>\n","comments":"","outputs":1,"x":2458.3332710266113,"y":4728.691576957703,"z":"656aafb.8a6395","wires":[["98314889.e73bb8","42639bc.b7f5764"]]},{"id":"98314889.e73bb8","type":"outcome","name":"ipv4","xml":"<outcome value='ipv4'>\n","comments":"","outputs":1,"x":2655.476276397705,"y":4632.262837409973,"z":"656aafb.8a6395","wires":[["39883e35.d1bea2"]]},{"id":"42639bc.b7f5764","type":"outcome","name":"ipv6","xml":"<outcome value='ipv6'>\n","comments":"","outputs":1,"x":2653.0953483581543,"y":4812.024868965149,"z":"656aafb.8a6395","wires":[["bfd7e037.4b715"]]},{"id":"d15e1933.103cb8","type":"comment","name":"Fixed IPs","info":"","comments":"","x":1390.0001665751133,"y":4610.35808467865,"z":"656aafb.8a6395","wires":[]},{"id":"265ee3cd.79724c","type":"save","name":"save l3-interface-ipv4-address-list object to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-interface-ipv4-address-list\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND l3-interface-ipv4-address-list.l3-interface-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\" >\n<parameter name=\"l3-interface-ipv4-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address`\" />\n<parameter name=\"l3-interface-ipv4-prefix-length\" value=\"32\" />\n<parameter name=\"is-floating\" value=\"false\" />\n","comments":"","outputs":1,"x":3098.8094062805176,"y":4580.595917383831,"z":"656aafb.8a6395","wires":[["d3e44cdf.4ddf"]]},{"id":"39883e35.d1bea2","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2805.476276397705,"y":4632.262756029766,"z":"656aafb.8a6395","wires":[["265ee3cd.79724c","c6039477.bd3778"]]},{"id":"28b581c.b31507e","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating l3-interface-ipv4-address-list object in AAI\" />\n","comments":"","x":3682.142925262451,"y":4598.929576555889,"z":"656aafb.8a6395","wires":[]},{"id":"45328b00.36e7d4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3512.309280395508,"y":4580.580409685772,"z":"656aafb.8a6395","wires":[["28b581c.b31507e","a3fa30dc.ae097"]]},{"id":"d3e44cdf.4ddf","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":3355.4761657714844,"y":4580.596079508465,"z":"656aafb.8a6395","wires":[["45328b00.36e7d4"]]},{"id":"c6039477.bd3778","type":"save","name":"save l3-interface-ipv4-address-list relationships","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"l3-interface-ipv4-address-list:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND l3-interface-ipv4-address-list.l3-interface-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id +\n        '/subnets/subnet/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id`\" />\n","comments":"","outputs":1,"x":3093.8096504211426,"y":4678.929336229961,"z":"656aafb.8a6395","wires":[["3cecedfa.c612b2","93e79eb8.b37ea"]]},{"id":"6212c320.740dac","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating l3-interface-ipv4-address-list relationships in AAI\" />\n","comments":"","x":3680.47603225708,"y":4670.596007982891,"z":"656aafb.8a6395","wires":[]},{"id":"8bf9ee91.86e21","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating l3-interface-ipv4-address-list relationships\" />\n","comments":"","x":3680.642894744873,"y":4720.580465952557,"z":"656aafb.8a6395","wires":[]},{"id":"34a6760c.cb568a","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3513.975902557373,"y":4650.580381075542,"z":"656aafb.8a6395","wires":[["6212c320.740dac","a3fa30dc.ae097"]]},{"id":"6650bc97.17d3c4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3513.9759788513184,"y":4703.58013979594,"z":"656aafb.8a6395","wires":[["8bf9ee91.86e21","a3fa30dc.ae097"]]},{"id":"3cecedfa.c612b2","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":3357.1427879333496,"y":4650.596050898235,"z":"656aafb.8a6395","wires":[["34a6760c.cb568a"]]},{"id":"93e79eb8.b37ea","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":3365.7143211364746,"y":4703.2151953379325,"z":"656aafb.8a6395","wires":[["6650bc97.17d3c4"]]},{"id":"bc227347.5fb69","type":"save","name":"save l3-interface-ipv6-address-list object to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"l3-interface-ipv6-address-list\" \n\tkey=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND l3-interface-ipv6-address-list.l3-interface-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\" >\n<parameter name=\"l3-interface-ipv6-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address`\" />\n<parameter name=\"l3-interface-ipv6-prefix-length\" value=\"128\" />\n<parameter name=\"is-floating\" value=\"false\" />\n","comments":"","outputs":1,"x":3097.6191444396973,"y":4759.643973350525,"z":"656aafb.8a6395","wires":[["1fb322aa.72fa5d"]]},{"id":"bfd7e037.4b715","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2804.2860145568848,"y":4811.31081199646,"z":"656aafb.8a6395","wires":[["bc227347.5fb69","f572b571.7d6058"]]},{"id":"1839ffe6.a2c79","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error creating l3-interface-ipv6-address-list object in AAI\" />\n","comments":"","x":3680.952663421631,"y":4777.977632522583,"z":"656aafb.8a6395","wires":[]},{"id":"ee8a14f4.c59418","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3511.1190185546875,"y":4759.628465652466,"z":"656aafb.8a6395","wires":[["1839ffe6.a2c79","a3fa30dc.ae097"]]},{"id":"1fb322aa.72fa5d","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":3354.285903930664,"y":4759.644135475159,"z":"656aafb.8a6395","wires":[["ee8a14f4.c59418"]]},{"id":"f572b571.7d6058","type":"save","name":"save l3-interface-ipv6-address-list relationships","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"l3-interface-ipv6-address-list:relationship-list\"\n   key=\"vnfc.vnfc-name = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name\n\t  AND l3-interface-ipv6-address-list.l3-interface-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].vnfc-subnet-ip[$address-index].vnfc-ip-address\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"l3-network\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].network-id +\n        '/subnets/subnet/' +\n        $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-networks.vnfc-network-data[$network-role-index].vnfc-subnet[$subnet-role-index].vnfc-ip-assignments[$address-family-index].subnet-id`\" />\n","comments":"","outputs":1,"x":3092.6193885803223,"y":4857.977392196655,"z":"656aafb.8a6395","wires":[["383116c9.6e3b7a","7fb50e74.bb6da"]]},{"id":"2666fdb.a988302","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating l3-interface-ipv6-address-list relationships in AAI\" />\n","comments":"","x":3679.2857704162598,"y":4849.644063949585,"z":"656aafb.8a6395","wires":[]},{"id":"4c4c7b91.8f9554","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating l3-interface-ipv6-address-list relationships\" />\n","comments":"","x":3679.4526329040527,"y":4899.6285219192505,"z":"656aafb.8a6395","wires":[]},{"id":"724dddd1.2bc264","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3512.7856407165527,"y":4829.628437042236,"z":"656aafb.8a6395","wires":[["2666fdb.a988302","a3fa30dc.ae097"]]},{"id":"12599dec.9c3eb2","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":3512.785717010498,"y":4882.628195762634,"z":"656aafb.8a6395","wires":[["4c4c7b91.8f9554","a3fa30dc.ae097"]]},{"id":"383116c9.6e3b7a","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":3355.9525260925293,"y":4829.644106864929,"z":"656aafb.8a6395","wires":[["724dddd1.2bc264"]]},{"id":"7fb50e74.bb6da","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":3364.5240592956543,"y":4882.2632513046265,"z":"656aafb.8a6395","wires":[["12599dec.9c3eb2"]]},{"id":"4fef35f2.d4b31c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":734.0000610351562,"y":3301.691195487976,"z":"656aafb.8a6395","wires":[["da513051.0c80f","a8f24b00.6e6ea8"]]},{"id":"19879c24.7f2f24","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1097.3333129882812,"y":5195.024434804916,"z":"656aafb.8a6395","wires":[["f58bd68b.96d2d8","35075c06.3ff5b4","1beb085d.4f4938","a9d5066.8dca3f8"]]},{"id":"b881adbd.34b62","type":"for","name":"for each vnfc","xml":"<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n","comments":"","outputs":1,"x":1743.6668319702148,"y":5280.691266775131,"z":"656aafb.8a6395","wires":[["50e1c37e.6412bc"]]},{"id":"abdac62e.d1e218","type":"save","name":"save vip-ipv4-address-list object to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vip-ipv4-address-list\" \n\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\" >\n<parameter name=\"vip-ipv4-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]`\" />\n<parameter name=\"vip-ipv4-prefix-length\" value=\"32\" />\n<parameter name=\"is-floating\" value=\"false\" />\n","comments":"","outputs":1,"x":1828.3333435058594,"y":5148.691194295883,"z":"656aafb.8a6395","wires":[["e508c954.f3e1a8","77e92049.e845e"]]},{"id":"1beb085d.4f4938","type":"for","name":"for each floating ipv4 address","xml":"<for silentFailure='true' index='ipv4-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4_length`' >\n","comments":"","outputs":1,"x":1336.3333358764648,"y":5206.691266775131,"z":"656aafb.8a6395","wires":[["84ebc3a1.1bd9a"]]},{"id":"84ebc3a1.1bd9a","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1562.3333358764648,"y":5204.691266775131,"z":"656aafb.8a6395","wires":[["abdac62e.d1e218","e39d949a.8de478","b881adbd.34b62"]]},{"id":"6fb5a1ed.fdbd3","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vip-ipv4-address-list in AAI\" />\n","comments":"","x":2390.3333435058594,"y":5138.691194295883,"z":"656aafb.8a6395","wires":[]},{"id":"146ffdae.698b32","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error saving vip-ipv4-address-list\" />\n","comments":"","x":2390.5002059936523,"y":5188.675652265549,"z":"656aafb.8a6395","wires":[]},{"id":"5b85e928.efe4b8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2223.8332138061523,"y":5118.675567388535,"z":"656aafb.8a6395","wires":[["6fb5a1ed.fdbd3","15f1245b.88e65c"]]},{"id":"92d5910a.67fa2","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2223.8332901000977,"y":5171.6753261089325,"z":"656aafb.8a6395","wires":[["146ffdae.698b32","15f1245b.88e65c"]]},{"id":"e508c954.f3e1a8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2067.000099182129,"y":5118.691237211227,"z":"656aafb.8a6395","wires":[["5b85e928.efe4b8"]]},{"id":"77e92049.e845e","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2075.571632385254,"y":5171.310381650925,"z":"656aafb.8a6395","wires":[["92d5910a.67fa2"]]},{"id":"50e1c37e.6412bc","type":"save","name":"save vip-ipv4-address-list relationships","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv4-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv4-address-list.vip-ipv4-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4[$ipv4-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-id\n        + '/subnets/subnet/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv4-subnet-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vnfc\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n","comments":"","outputs":1,"x":1990.666618347168,"y":5279.691755056381,"z":"656aafb.8a6395","wires":[["de4986c8.89d8c8","144fc410.ec0dac"]]},{"id":"49dd0458.91528c","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv4-address-list relationships in AAI\" />\n","comments":"","x":2560.3330268859863,"y":5271.691724598408,"z":"656aafb.8a6395","wires":[]},{"id":"d62e9338.a68f3","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv4-address-list relationships\" />\n","comments":"","x":2560.4998893737793,"y":5321.676182568073,"z":"656aafb.8a6395","wires":[]},{"id":"6b0665c4.4b3d9c","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2393.8328971862793,"y":5251.676097691059,"z":"656aafb.8a6395","wires":[["49dd0458.91528c","15f1245b.88e65c"]]},{"id":"c2b853df.f2b9a","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2393.8329734802246,"y":5304.675856411457,"z":"656aafb.8a6395","wires":[["d62e9338.a68f3","15f1245b.88e65c"]]},{"id":"de4986c8.89d8c8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2236.999782562256,"y":5251.691767513752,"z":"656aafb.8a6395","wires":[["6b0665c4.4b3d9c"]]},{"id":"144fc410.ec0dac","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2245.571315765381,"y":5304.310911953449,"z":"656aafb.8a6395","wires":[["c2b853df.f2b9a"]]},{"id":"cdcc9317.be9ce","type":"save","name":"save vip-ipv6-address-list object to A&AI","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\" \n\tresource=\"vip-ipv6-address-list\" \n\tkey=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\" >\n<parameter name=\"vip-ipv6-address\" value=\"`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]`\" />\n<parameter name=\"vip-ipv6-prefix-length\" value=\"128\" />\n<parameter name=\"is-floating\" value=\"false\" />\n","comments":"","outputs":1,"x":1828.3333358764648,"y":5382.024274587631,"z":"656aafb.8a6395","wires":[["230dacf3.4a16a4","54ad1405.aa30cc"]]},{"id":"a9d5066.8dca3f8","type":"for","name":"for each floating ipv6 address","xml":"<for silentFailure='true' index='ipv6-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6_length`' >\n","comments":"","outputs":1,"x":1336.3333282470703,"y":5440.024347066879,"z":"656aafb.8a6395","wires":[["5199f1df.36f62"]]},{"id":"5199f1df.36f62","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1562.3333282470703,"y":5438.024347066879,"z":"656aafb.8a6395","wires":[["cdcc9317.be9ce","26b0e418.f619fc","a070538.5dbd6b"]]},{"id":"3318552.b80aeaa","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error saving vip-ipv6-address-list in AAI\" />\n","comments":"","x":2390.333335876465,"y":5372.024274587631,"z":"656aafb.8a6395","wires":[]},{"id":"1b255130.bd94cf","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error saving vip-ipv6-address-list\" />\n","comments":"","x":2390.500198364258,"y":5422.008732557297,"z":"656aafb.8a6395","wires":[]},{"id":"3381b5ad.78767a","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2223.833206176758,"y":5352.008647680283,"z":"656aafb.8a6395","wires":[["3318552.b80aeaa","15f1245b.88e65c"]]},{"id":"ce31be4d.d70b5","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2223.833282470703,"y":5405.0084064006805,"z":"656aafb.8a6395","wires":[["1b255130.bd94cf","15f1245b.88e65c"]]},{"id":"230dacf3.4a16a4","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2067.0000915527344,"y":5352.0243175029755,"z":"656aafb.8a6395","wires":[["3381b5ad.78767a"]]},{"id":"54ad1405.aa30cc","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2075.5716247558594,"y":5404.643461942673,"z":"656aafb.8a6395","wires":[["ce31be4d.d70b5"]]},{"id":"793d4d94.714a34","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error updating vip-ipv6-address-list relationships in AAI\" />\n","comments":"","x":2555.3332176208496,"y":5498.357821285725,"z":"656aafb.8a6395","wires":[]},{"id":"6a436f8e.78398","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Not-found error updating vip-ipv6-address-list relationships\" />\n","comments":"","x":2555.5000801086426,"y":5548.34227925539,"z":"656aafb.8a6395","wires":[]},{"id":"1c470c9d.ff22d3","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2388.8330879211426,"y":5478.342194378376,"z":"656aafb.8a6395","wires":[["793d4d94.714a34","15f1245b.88e65c"]]},{"id":"e202479d.1d6968","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2388.833164215088,"y":5531.341953098774,"z":"656aafb.8a6395","wires":[["6a436f8e.78398","15f1245b.88e65c"]]},{"id":"765444d8.0caaac","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2231.999973297119,"y":5478.357864201069,"z":"656aafb.8a6395","wires":[["1c470c9d.ff22d3"]]},{"id":"a0f773e5.64822","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2240.571506500244,"y":5530.977008640766,"z":"656aafb.8a6395","wires":[["e202479d.1d6968"]]},{"id":"a8f24b00.6e6ea8","type":"for","name":"for each vm-network","xml":"<for silentFailure='true' index='vm-network-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network_length`' >\n","comments":"","outputs":1,"x":935.9999923706055,"y":3582.3578214645386,"z":"656aafb.8a6395","wires":[["8dd3a0d0.b72fe"]]},{"id":"8dd3a0d0.b72fe","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":1121.3333129882812,"y":3582.357699394226,"z":"656aafb.8a6395","wires":[["1b999958.1d4637","db6bf02.1b7f81","9dee4850.38f7f8","5aefc0c6.72b57"]]},{"id":"1b999958.1d4637","type":"for","name":"for each vnf network","xml":"<for index='vnf-network-index' start='0'\n  end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network_length`' >\n","comments":"","outputs":1,"x":1311.9999313354492,"y":3413.6908388137817,"z":"656aafb.8a6395","wires":[["af319386.d8bea"]]},{"id":"db6bf02.1b7f81","type":"set","name":"set tmp.network-role","xml":"<set>\n<parameter name='tmp.network-role' value='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-role`' />\n","comments":"","x":1313.6665649414062,"y":3372.024193763733,"z":"656aafb.8a6395","wires":[]},{"id":"af319386.d8bea","type":"switchNode","name":"network-roles match?","xml":"<switch test='`$tmp.network-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].network-role`'>\n","comments":"","outputs":1,"x":1525.3331909179688,"y":3412.0241708755493,"z":"656aafb.8a6395","wires":[["83fc8e4a.66111"]]},{"id":"83fc8e4a.66111","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1705.3334045410156,"y":3410.357829093933,"z":"656aafb.8a6395","wires":[["f89f6fb1.ce177"]]},{"id":"f89f6fb1.ce177","type":"break","name":"break","xml":"<break>\n","comments":"","x":1831.9999160766602,"y":3410.3576650619507,"z":"656aafb.8a6395","wires":[]},{"id":"535bda3e.da5a64","type":"set","name":"set found-address-family to false","xml":"<set>\n<parameter name='found-address-family' value='false' />\n","comments":"","x":1960.3329772949219,"y":3504.023684501648,"z":"656aafb.8a6395","wires":[]},{"id":"c35fd68c.b1f3f8","type":"for","name":"for each vnf address family","xml":"<for silentFailure='true' index='vnf-address-family-index' start='0'\n  end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n","comments":"","outputs":1,"x":1943.6662292480469,"y":3550.6900272369385,"z":"656aafb.8a6395","wires":[["5f1beee8.dced4"]]},{"id":"9dad225a.a23d2","type":"set","name":"set tmp.address-family to ipv4","xml":"<set>\n<parameter name='tmp.address-family' value='ipv4' />\n","comments":"","x":1953.6664199829102,"y":3459.0239267349243,"z":"656aafb.8a6395","wires":[]},{"id":"5f1beee8.dced4","type":"switchNode","name":"address-families match?","xml":"<switch test='`$tmp.address-family\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$vnf-address-family-index].ip-version`'>\n","comments":"","outputs":1,"x":2190.332908630371,"y":3549.0236053466797,"z":"656aafb.8a6395","wires":[["81938e82.28d5b"]]},{"id":"81938e82.28d5b","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2370.333122253418,"y":3547.3572635650635,"z":"656aafb.8a6395","wires":[["63835f8b.ef06d"]]},{"id":"63835f8b.ef06d","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2500.3328857421875,"y":3547.357021331787,"z":"656aafb.8a6395","wires":[["1b769099.d3d3cf","6af0f6a6.18c998"]]},{"id":"1b769099.d3d3cf","type":"set","name":"set found-address-family to true","xml":"<set>\n<parameter name='found-address-family' value='true' />\n","comments":"","x":2708.66650390625,"y":3517.356855392456,"z":"656aafb.8a6395","wires":[]},{"id":"6af0f6a6.18c998","type":"break","name":"break","xml":"<break>\n","comments":"","x":2626.9996376037598,"y":3565.6905193328857,"z":"656aafb.8a6395","wires":[]},{"id":"f0c850c3.1ce61","type":"switchNode","name":"switch found-address-family","xml":"<switch test='`$found-address-family`'>\n","comments":"","outputs":1,"x":1943.6662826538086,"y":3599.02344417572,"z":"656aafb.8a6395","wires":[["ca5d557e.a14708"]]},{"id":"ca5d557e.a14708","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2128.666290283203,"y":3599.0236825942993,"z":"656aafb.8a6395","wires":[["69400aa4.fada84"]]},{"id":"86734b97.d60128","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Cannot find VNF address family '\n      + $tmp.address-family\n      + ' for network role '\n      + $tmp.network-role`\" />\n","comments":"","x":2431.9995460510254,"y":3597.690411567688,"z":"656aafb.8a6395","wires":[]},{"id":"299ccd1c.a70782","type":"set","name":"store ipv4-subnet-id","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv4-subnet-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$vnf-address-family-index].sdnc-subnet-id`' />\n","comments":"","x":1920.3330459594727,"y":3644.356943130493,"z":"656aafb.8a6395","wires":[]},{"id":"9dee4850.38f7f8","type":"switchNode","name":"switch floating-ip-v4_length > 0","xml":"<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v4_length &gt; 0`'>\n","comments":"","outputs":1,"x":1350.0001907348633,"y":3557.0246391296387,"z":"656aafb.8a6395","wires":[["7ae4ebf5.7539e4"]]},{"id":"7ae4ebf5.7539e4","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1570.0000648498535,"y":3558.6911668777466,"z":"656aafb.8a6395","wires":[["159a0743.b26849"]]},{"id":"7266ee36.9fc2e","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1979.9999618530273,"y":3205.3578701019287,"z":"656aafb.8a6395","wires":[["b1a77703.c09158","89d10c7.03b9cf","3b7448f8.d9ff38","293030b5.eb0f5","d0c8a716.7b7cf8"]]},{"id":"159a0743.b26849","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1719.9999618530273,"y":3557.0243740081787,"z":"656aafb.8a6395","wires":[["9dad225a.a23d2","299ccd1c.a70782","535bda3e.da5a64","c35fd68c.b1f3f8","f0c850c3.1ce61"]]},{"id":"561a591b.9b4f18","type":"set","name":"set found-address-family to false","xml":"<set>\n<parameter name='found-address-family' value='false' />\n","comments":"","x":1958.3333358764648,"y":3733.6911220550537,"z":"656aafb.8a6395","wires":[]},{"id":"5c5af123.1a7de","type":"for","name":"for each vnf address family","xml":"<for silentFailure='true' index='vnf-address-family-index' start='0'\n  end='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data_length`' >\n","comments":"","outputs":1,"x":1941.6665878295898,"y":3780.3574647903442,"z":"656aafb.8a6395","wires":[["88be915b.ce341"]]},{"id":"1a268d2e.ae5ee3","type":"set","name":"set tmp.address-family to ipv6","xml":"<set>\n<parameter name='tmp.address-family' value='ipv6' />\n","comments":"","x":1951.6667785644531,"y":3688.69136428833,"z":"656aafb.8a6395","wires":[]},{"id":"88be915b.ce341","type":"switchNode","name":"address-families match?","xml":"<switch test='`$tmp.address-family\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$vnf-address-family-index].ip-version`'>\n","comments":"","outputs":1,"x":2188.333267211914,"y":3778.6910429000854,"z":"656aafb.8a6395","wires":[["10eb00c5.61646f"]]},{"id":"10eb00c5.61646f","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2368.333480834961,"y":3777.0247011184692,"z":"656aafb.8a6395","wires":[["6480aa39.47ab24"]]},{"id":"6480aa39.47ab24","type":"block","name":"block","xml":"<block>\n","atomic":"false","comments":"","outputs":1,"x":2498.3332443237305,"y":3777.024458885193,"z":"656aafb.8a6395","wires":[["c8d1871.7e52978","b1b263f6.757c7"]]},{"id":"c8d1871.7e52978","type":"set","name":"set found-address-family to true","xml":"<set>\n<parameter name='found-address-family' value='true' />\n","comments":"","x":2706.666862487793,"y":3747.024292945862,"z":"656aafb.8a6395","wires":[]},{"id":"b1b263f6.757c7","type":"break","name":"break","xml":"<break>\n","comments":"","x":2624.9999961853027,"y":3795.3579568862915,"z":"656aafb.8a6395","wires":[]},{"id":"55422769.94a368","type":"switchNode","name":"switch found-address-family","xml":"<switch test='`$found-address-family`'>\n","comments":"","outputs":1,"x":1941.6666412353516,"y":3828.690881729126,"z":"656aafb.8a6395","wires":[["a368ce0f.2d2c9"]]},{"id":"a368ce0f.2d2c9","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":2126.666648864746,"y":3828.691120147705,"z":"656aafb.8a6395","wires":[["bfa736d9.400938"]]},{"id":"a301e98.5098518","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Cannot find VNF address family '\n      + $tmp.address-family\n      + ' for network role '\n      + $tmp.network-role`\" />\n","comments":"","x":2444.999954223633,"y":3827.357901573181,"z":"656aafb.8a6395","wires":[]},{"id":"b8e23b5c.5e7058","type":"set","name":"store ipv6-subnet-id","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv6-subnet-id'\n  value='`$service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$vnf-address-family-index].sdnc-subnet-id`' />\n","comments":"","x":1918.3334045410156,"y":3874.024380683899,"z":"656aafb.8a6395","wires":[]},{"id":"5aefc0c6.72b57","type":"switchNode","name":"switch floating-ip-v6_length > 0","xml":"<switch test='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6_length &gt; 0`'>\n","comments":"","outputs":1,"x":1348.000602722168,"y":3788.3587951660156,"z":"656aafb.8a6395","wires":[["18819685.2ef3c9"]]},{"id":"18819685.2ef3c9","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1568.0004234313965,"y":3788.3586044311523,"z":"656aafb.8a6395","wires":[["3f110736.222aa8"]]},{"id":"3f110736.222aa8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1718.0003204345703,"y":3786.6918115615845,"z":"656aafb.8a6395","wires":[["1a268d2e.ae5ee3","b8e23b5c.5e7058","561a591b.9b4f18","5c5af123.1a7de","55422769.94a368"]]},{"id":"cb68aeb2.207c1","type":"save","name":"save vip-ipv6-address-list relationships","xml":"<save plugin=\"org.onap.ccsdk.sli.adaptors.aai.AAIService\"\n   resource=\"vip-ipv6-address-list:relationship-list\"\n   key=\"cloud-region.cloud-owner = $prop.cloud-region.cloud-owner\n\t  AND cloud-region.cloud-region-id = $vf-module-topology-operation-input.vf-module-request-input.aic-cloud-region\n\t  AND vip-ipv6-address-list.vip-ipv6-address = $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.floating-ip-v6[$ipv6-index]\"\n   force=\"true\" pfx=\"tmp.AnAI-data\">\n    <parameter name=\"relationship-list.relationship[0].related-to\" value=\"subnet\" />\n    <parameter name=\"relationship-list.relationship[0].related-link\"\n      value=\"`'/aai/v$/network/l3-networks/l3-network/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].network-id\n        + '/subnets/subnet/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.ipv6-subnet-id`\" />\n    <parameter name=\"relationship-list.relationship[1].related-to\" value=\"vnfc\" />\n    <parameter name=\"relationship-list.relationship[1].related-link\"\n      value=\"`'/aai/v$/network/vnfcs/vnfc/'\n        + $tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].vnfc-name`\" />\n","comments":"","outputs":1,"x":1987.6668167114258,"y":5507.0242831707,"z":"656aafb.8a6395","wires":[["765444d8.0caaac","a0f773e5.64822"]]},{"id":"78341ff5.2c4ba","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":1218.6667251586914,"y":4158.69089025259,"z":"656aafb.8a6395","wires":[[]]},{"id":"6dd31c8a.306554","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":1966.6666946411133,"y":4275.02439725399,"z":"656aafb.8a6395","wires":[[]]},{"id":"b9195698.e1ca38","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":2088.6667251586914,"y":4947.024355828762,"z":"656aafb.8a6395","wires":[[]]},{"id":"15f1245b.88e65c","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":3112.6667251586914,"y":5101.024355828762,"z":"656aafb.8a6395","wires":[[]]},{"id":"a3fa30dc.ae097","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":4078.6667251586914,"y":4507.024355828762,"z":"656aafb.8a6395","wires":[[]]},{"id":"5e637da9.e8c6f4","type":"set","name":"set created_flag","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names[$vnfc-index].created_flag' value='true' />\n","comments":"","x":1258.6667251586914,"y":4361.024355828762,"z":"656aafb.8a6395","wires":[]},{"id":"f58bd68b.96d2d8","type":"set","name":"set created-flag","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$network-role-index].created-flag' value='true' />\n","comments":"","x":1292.6667251586914,"y":5079.024355828762,"z":"656aafb.8a6395","wires":[]},{"id":"e39d949a.8de478","type":"set","name":"set created-ipv4-flag","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.created-ipv4-flag' value='true' />\n","comments":"","x":1765.666690826416,"y":5207.024435698986,"z":"656aafb.8a6395","wires":[]},{"id":"26b0e418.f619fc","type":"set","name":"set created-ipv6-flag","xml":"<set>\n<parameter name='tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-networks.vm-network[$vm-network-index].floating-ips.created-ipv6-flag' value='true' />\n","comments":"","x":1767.666690826416,"y":5443.024435698986,"z":"656aafb.8a6395","wires":[]},{"id":"f5b7c328.fea4e","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1458.6666946411133,"y":4336.024291932583,"z":"656aafb.8a6395","wires":[["9256f0a5.e0827"]]},{"id":"f2c3fa39.f42268","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-vlan-tagging-assign","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-vlan-tagging-assign' mode='sync' >\n","comments":"","outputs":1,"x":685.6665420532227,"y":5704.357654511929,"z":"656aafb.8a6395","wires":[["71fbe8c7.acb798"]]},{"id":"71fbe8c7.acb798","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1029.99995803833,"y":5703.691149652004,"z":"656aafb.8a6395","wires":[["cdb7e69d.10a6f8"]]},{"id":"cdb7e69d.10a6f8","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1184.9998321533203,"y":5703.6909455657005,"z":"656aafb.8a6395","wires":[["32eeeb9b.d1bbb4","8d1d7626.5fce58","e19306eb.5c38b8"]]},{"id":"32eeeb9b.d1bbb4","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":1529.9997634887695,"y":5652.024806916714,"z":"656aafb.8a6395","wires":[[]]},{"id":"8d1d7626.5fce58","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n","comments":"","x":1356.6665573120117,"y":5747.024484574795,"z":"656aafb.8a6395","wires":[]},{"id":"723699b0.0c1668","type":"call","name":"call GENERIC-RESOURCE-API:vf-module-topology-assign-rollback","xml":"<call module='GENERIC-RESOURCE-API' rpc='vf-module-topology-assign-rollback' mode='sync' >\n","comments":"","outputs":1,"x":2933.333297729492,"y":2838.6909141540527,"z":"656aafb.8a6395","wires":[[]]},{"id":"1a02e5e2.37764a","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":1869.9999389648438,"y":3005.357699394226,"z":"656aafb.8a6395","wires":[["ffec08a5.88c838","723699b0.0c1668"]]},{"id":"35168b08.f767a4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2498.3331718444824,"y":3243.6911191940308,"z":"656aafb.8a6395","wires":[["a7c172c7.b1211","723699b0.0c1668"]]},{"id":"69400aa4.fada84","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2271.6666870117188,"y":3598.690951347351,"z":"656aafb.8a6395","wires":[["86734b97.d60128","723699b0.0c1668"]]},{"id":"bfa736d9.400938","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2274.9999389648438,"y":3828.690951347351,"z":"656aafb.8a6395","wires":[["a301e98.5098518","723699b0.0c1668"]]},{"id":"e19306eb.5c38b8","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/bgb-vlantaggingfailure.log' />\n","comments":"","outputs":1,"x":1356.6664581298828,"y":5700.3574494719505,"z":"656aafb.8a6395","wires":[[]]},{"id":"65acec70.9c56c4","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":220.8928680419922,"y":508.5714416503906,"z":"656aafb.8a6395","wires":[["c622ee1f.60898","6fb1dec4.0529f","62441125.66a0b","e2b3c75a.fbe358","488e702.2bac09","a941c95a.005118","680a67ac.f6fd08","c61bcc80.d7888"]]},{"id":"62f0c3ca.57e7dc","type":"switchNode","name":"switch: param[].name","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.param[$p].name`\">\n","comments":"","outputs":1,"x":1114.4643325805664,"y":862.6906051635742,"z":"656aafb.8a6395","wires":[["61bc2ca2.ad18a4","2b6eed19.318972"]]},{"id":"aa0fa7ab.8025e8","type":"for","name":"for p in vf-module-input-parameters.param[]","xml":"<for silentFailure='true' index='p' start='0' end='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.param_length`' >\n","comments":"","outputs":1,"x":820.5714797973633,"y":863.190637588501,"z":"656aafb.8a6395","wires":[["62f0c3ca.57e7dc"]]},{"id":"150dc5a2.bf963a","type":"set","name":"set tmp.exist.vf_module_label = true","xml":"<set>\n<parameter name='tmp.exist.vf_module_label' value='true' />","comments":"","x":1656.3572616577148,"y":911.5477752685547,"z":"656aafb.8a6395","wires":[]},{"id":"a6cc427b.66186","type":"set","name":"set tmp.exist.sdnc-model-name = true","xml":"<set>\n<parameter name='tmp.exist.sdnc-model-name' value='true' />\n","comments":"","x":1659.0713691711426,"y":862.5477905273438,"z":"656aafb.8a6395","wires":[]},{"id":"680a67ac.f6fd08","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":499.8810043334961,"y":757.5001182556152,"z":"656aafb.8a6395","wires":[["aa0fa7ab.8025e8","aaa89921.844e38","49f206e1.beafa8"]]},{"id":"64580434.533b0c","type":"comment","name":"SELF-SERVE FORK","info":"","comments":"","x":484.1666946411133,"y":896.309648513794,"z":"656aafb.8a6395","wires":[]},{"id":"61bc2ca2.ad18a4","type":"outcome","name":"sdnc_model_name","xml":"<outcome value='sdnc_model_name'>\n","comments":"","outputs":1,"x":1370.6429083687917,"y":862.5953995840889,"z":"656aafb.8a6395","wires":[["a6cc427b.66186"]]},{"id":"2b6eed19.318972","type":"outcome","name":"vf_module_label","xml":"<outcome value='vf_module_label'>\n","comments":"","outputs":1,"x":1373.5000305175781,"y":912.0239715576172,"z":"656aafb.8a6395","wires":[["150dc5a2.bf963a"]]},{"id":"df5aea18.782d88","type":"switchNode","name":"switch from-preload","xml":"<switch test='`$from-preload`'>\n","comments":"","outputs":1,"x":543.5714416503906,"y":4080.8338327407837,"z":"656aafb.8a6395","wires":[["9e3a4c7.20f7cb","3eb1842b.07b66c"]]},{"id":"9e3a4c7.20f7cb","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":715.4761734008789,"y":4058.214853286743,"z":"656aafb.8a6395","wires":[["23f55617.a6809a"]]},{"id":"3eb1842b.07b66c","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":717.1428260803223,"y":4103.214692115784,"z":"656aafb.8a6395","wires":[["44b086bf.0581a8"]]},{"id":"23f55617.a6809a","type":"set","name":"set automated-assignment to true","xml":"<set>\n<parameter name='automated-assignment' value='true' />\n","comments":"","x":930.4761581420898,"y":4056.5480241775513,"z":"656aafb.8a6395","wires":[]},{"id":"44b086bf.0581a8","type":"set","name":"set automated-assignment to false","xml":"<set>\n<parameter name='automated-assignment' value='false' />\n","comments":"","x":928.8094787597656,"y":4101.547944068909,"z":"656aafb.8a6395","wires":[]},{"id":"cca1b8aa.7bfbf8","type":"switchNode","name":"subnet-roles match?","xml":"<switch test='`$tmp.subnet-role\n  == $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-topology.vnf-resource-assignments.vnf-networks.vnf-network[$vnf-network-index].subnets-data.subnet-data[$vnf-address-family-index].subnet-role`'>\n","comments":"","outputs":1,"x":2792.1427154541016,"y":3197.214653968811,"z":"656aafb.8a6395","wires":[["2548701.3a0df9"]]},{"id":"2548701.3a0df9","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":2958.809356689453,"y":3195.8811960220337,"z":"656aafb.8a6395","wires":[["ee552abf.ebd808"]]},{"id":"dfd45ccd.c4422","type":"get-resource","name":"get VF_MODEL.sdnc_model_name","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT sdnc_model_name from VF_MODEL \n  \tWHERE customization_uuid = $service-data.vnfs.vnf[$vnf-index].vnf-data.vnf-information.onap-model-information.model-customization-uuid \n  \tAND sdnc_model_name is not null'\n  pfx='db.vf-model-name'>\n\n","comments":"","outputs":1,"x":1287.5953979492188,"y":1306.6665954589844,"z":"656aafb.8a6395","wires":[["fd95d92.7e94c28","26b9ca0e.2c89c6","823653d0.65ac9"]]},{"id":"fd95d92.7e94c28","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":1537.952522277832,"y":1217.0475358963013,"z":"656aafb.8a6395","wires":[["8fba96ee.8fee48"]]},{"id":"26b9ca0e.2c89c6","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":1543.6667709350586,"y":1404.190447807312,"z":"656aafb.8a6395","wires":[["349a24c6.0478dc"]]},{"id":"8fba96ee.8fee48","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODEL table\" />\n","comments":"","x":1718.9525032043457,"y":1217.1904430389404,"z":"656aafb.8a6395","wires":[]},{"id":"89c4448.1656bb8","type":"outcomeFalse","name":"false","xml":"<outcome value='false'>\n","comments":"","outputs":1,"x":1039.440788269043,"y":1306.8568725585938,"z":"656aafb.8a6395","wires":[["dfd45ccd.c4422"]]},{"id":"5ca1b441.87f4cc","type":"call","name":"call self-serve-vf-module-assign","xml":"<call module='GENERIC-RESOURCE-API' rpc='self-serve-vf-module-assign' mode='sync' >\n","comments":"","outputs":1,"x":2360.6305236816406,"y":946.6550559997559,"z":"656aafb.8a6395","wires":[["f1df99cb.fe0ae8"]]},{"id":"e3880e9a.6b928","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"`'Failed to create self-serve assignment for vf-module with vf-module-id=' + $vf-module-topology-operation-input.vf-module-information.vf-module-id`\" />\n","comments":"","x":2744.7019004821777,"y":946.6550064086914,"z":"656aafb.8a6395","wires":[]},{"id":"c61bcc80.d7888","type":"switchNode","name":"switch: tmp.exist.sdnc-model-name && tmp.exist.vf_module_label == true","xml":"<switch test=\"`$tmp.exist.sdnc-model-name == 'true' and $tmp.exist.vf_module_label == 'true'`\">\n","comments":"","outputs":1,"x":676.9404449462891,"y":1020.2619457244873,"z":"656aafb.8a6395","wires":[["89c4448.1656bb8","e054a7ea.0bc638"]]},{"id":"e054a7ea.0bc638","type":"outcomeTrue","name":"true","xml":"<outcome value='true'>\n","comments":"","outputs":1,"x":1043.5478515625,"y":947.6190376281738,"z":"656aafb.8a6395","wires":[["3cc0bc38.f6e114"]]},{"id":"f1df99cb.fe0ae8","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2580.9281044006348,"y":946.143087387085,"z":"656aafb.8a6395","wires":[["e3880e9a.6b928"]]},{"id":"621aeca7.9d6ba4","type":"get-resource","name":"get VF_MODULE_MODEL.vf-module-label","xml":"<get-resource plugin='org.onap.ccsdk.sli.adaptors.resource.sql.SqlResource' resource='SQL'\n  key='SELECT vf_module_label from VF_MODULE_MODEL \n  \tWHERE vf_customization_uuid = $vf-module-topology-operation-input.vnf-information.onap-model-information.model-customization-uuid\n  \tAND vf_module_label is not null '\n  pfx='db.vf-module-label'>\n\n","comments":"","outputs":1,"x":1815.8335647583008,"y":1306.9048557281494,"z":"656aafb.8a6395","wires":[["defe2da.a8aefd","184bb121.e6155f","4cfef7ff.e18338"]]},{"id":"defe2da.a8aefd","type":"failure","name":"failure","xml":"<outcome value='failure'>\n","comments":"","outputs":1,"x":2091.190788269043,"y":1306.9999866485596,"z":"656aafb.8a6395","wires":[["e88f142c.6a2668"]]},{"id":"184bb121.e6155f","type":"not-found","name":"not-found","xml":"<outcome value='not-found'>\n","comments":"","outputs":1,"x":2101.7621459960938,"y":1354.7142524719238,"z":"656aafb.8a6395","wires":[["349a24c6.0478dc"]]},{"id":"e88f142c.6a2668","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"Error reading VF_MODULE_MODEL table\" />\n","comments":"","x":2265.333297729492,"y":1307.5714321136475,"z":"656aafb.8a6395","wires":[]},{"id":"349a24c6.0478dc","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2275.167350769043,"y":1403.761962890625,"z":"656aafb.8a6395","wires":[["110bcecd.ba7661"]]},{"id":"4cfef7ff.e18338","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":2095.5478591918945,"y":1257.9049110412598,"z":"656aafb.8a6395","wires":[["3cc0bc38.f6e114"]]},{"id":"823653d0.65ac9","type":"success","name":"success","xml":"<outcome value='success'>\n","comments":"","outputs":1,"x":1541.6072845458984,"y":1306.666660308838,"z":"656aafb.8a6395","wires":[["621aeca7.9d6ba4"]]},{"id":"aaa89921.844e38","type":"set","name":"initialize tmp.exist.sdnc-model-name && tmp.exist.vf_module_label = false","xml":"<set>\n<parameter name='tmp.exist.sdnc-model-name' value='false' />\n<parameter name='tmp.exist.vf_module_label' value='false' />\n","comments":"","x":912.4643096923828,"y":757.7737798690796,"z":"656aafb.8a6395","wires":[]},{"id":"9d399f15.80c96","type":"returnSuccess","name":"return success","xml":"<return status='success'>\n<parameter name=\"ack-final-indicator\" value=\"Y\" />\n<parameter name=\"error-code\" value=\"200\" />\n<parameter name=\"error-message\" value=\"`$error-message`\" />\n","comments":"","x":2307.499767303467,"y":1096.4999752044678,"z":"656aafb.8a6395","wires":[]},{"id":"e82c3ee8.852e5","type":"execute","name":"printContext","xml":"<execute plugin='org.onap.ccsdk.sli.core.slipluginutils.SliPluginUtils' method='printContext' >\n<parameter name='filename' value='/var/tmp/ss-vnfend.log' />\n","comments":"","outputs":1,"x":2299.5473098754883,"y":1050.9915189743042,"z":"656aafb.8a6395","wires":[[]]},{"id":"c5cea72e.a0e218","type":"set","name":"set order-status to PendingCreate","xml":"<set>\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.order-status'\n  value='PendingCreate' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-rpc-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.svc-action`' />\n<parameter name='service-data.vnfs.vnf[$vnf-index].vnf-data.vf-modules.vf-module[$vf-module-index].vf-module-data.vf-module-level-oper-status.last-action'\n  value='`$vf-module-topology-operation-input.sdnc-request-header.request-action`' />\n","comments":"","x":2370.2378273010254,"y":999.95241355896,"z":"656aafb.8a6395","wires":[]},{"id":"3cc0bc38.f6e114","type":"block","name":"block : atomic","xml":"<block atomic=\"true\">","atomic":"true","outputs":1,"x":2081.3332557678223,"y":946.3332176208496,"z":"656aafb.8a6395","wires":[["5ca1b441.87f4cc","c5cea72e.a0e218","e82c3ee8.852e5","9d399f15.80c96"]]},{"id":"a070538.5dbd6b","type":"for","name":"for each vnfc","xml":"<for silentFailure='true' index='vnfc-index' start='0' end='`$tmp.vf-module-topology.vf-module-assignments.vms.vm[$vm-type-index].vm-names.vnfc-names_length`' >\n","comments":"","outputs":1,"x":1743.0951919555664,"y":5508.571428060532,"z":"656aafb.8a6395","wires":[["cb68aeb2.207c1"]]},{"id":"49f206e1.beafa8","type":"switchNode","name":"switch: vf-module-input-parameters.param_length","xml":"<switch test=\"`$vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.param_length`\">\n","comments":"","outputs":1,"x":840.3214874267578,"y":806.2500638961792,"z":"656aafb.8a6395","wires":[["9757e46f.a990d8"]]},{"id":"9757e46f.a990d8","type":"other","name":"NULL","xml":"<outcome value=''>\n","comments":"","outputs":1,"x":1103.8929061889648,"y":806.5358037948608,"z":"656aafb.8a6395","wires":[["4b5c3601.c8dfa8"]]},{"id":"4b5c3601.c8dfa8","type":"set","name":"set vf-module-input-parameters.param_length = 0","xml":"<set>\n<parameter name='vf-module-topology-operation-input.vf-module-request-input.vf-module-input-parameters.param_length' value='0' />\n","comments":"","x":1377.6071472167969,"y":806.3929653167725,"z":"656aafb.8a6395","wires":[]},{"id":"3fd43ef9.658b62","type":"switchNode","name":"switch vf-module-name","xml":"<switch test='`$vf-module-topology-operation-input.vf-module-request-input.vf-module-name`'>\n","comments":"","outputs":1,"x":538.5714263916016,"y":1565.7143383026123,"z":"656aafb.8a6395","wires":[["281f6295.d9b7ee"]]},{"id":"281f6295.d9b7ee","type":"outcome","name":"NULL","xml":"<outcome value=''>","comments":"","outputs":1,"x":764.5714263916016,"y":1565.7143211364746,"z":"656aafb.8a6395","wires":[["82f1413d.5dc9d"]]},{"id":"82f1413d.5dc9d","type":"returnFailure","name":"return failure","xml":"<return status='failure'>\n\t<parameter name='ack-final' value='Y'/>\n\t<parameter name=\"error-code\" value=\"500\" />\n    <parameter name=\"error-message\" value=\"vf-module-information.vf-module-request-input.vf-module-name is a required input\" />\n","comments":"","x":915.9999923706055,"y":1565.714319229126,"z":"656aafb.8a6395","wires":[]},{"id":"cb63cf1e.5203","type":"comment","name":"MOVED vf-module-name validation from validate-vf-module-input","info":"","comments":"","x":538.5713958740234,"y":1531.428554534912,"z":"656aafb.8a6395","wires":[]}]